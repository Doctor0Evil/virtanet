const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C3FxZ4wa.js","assets/vite-D9Bl2idj.js","assets/WatchlistSelections-oarSW3wz.js","assets/vendors-D80jw9f5.js","assets/i18n-B9c4qKoa.js","assets/icons-mbN5KUs1.js","assets/platform-0Df2kFE8.js","assets/AppDownloadQR-CDgEYZtw.js","assets/emoji-picker-react.esm-BLhsW2XR.js","assets/FileUploadModal-DU2WQRnD.js","assets/SourcesTable-BE6wOiJX.js","assets/FilesTableHeader-BZJPQ89k.js","assets/CometDownloadInstructionsModal-Cjt3n7Ii.js","assets/CollectionCreateEditModal-Bs5ltp3a.js","assets/getMaybeTranslatedCollectionTitle-iiEDV8zx.js","assets/CollectionSelectModal-3qt70OVa.js","assets/OnboardingModal-ByIPg-GU.js","assets/MarkdownRenderer-D8CkAb76.js","assets/index-Dr7wN_RR.js","assets/MarkdownStreamer-sbgecgFH.js","assets/useHandleClickPricing-kmGza_Ct.js","assets/useReferralCode-cNUxKoyv.js","assets/PlatformOptions-C_gRJJcY.js","assets/IntlPhoneInput-Dr-we0E8.js","assets/IntlPhoneInput-C5Iq5FTb.css","assets/notificationQueries-jlNONzXJ.js","assets/phoneNumberUtils-2CNvKPPc.js","assets/CombinedPaywall-Bj53NF-s.js","assets/StudentReferralsContent-BCZ1qJDD.js","assets/CanonicalPattern-Br6BA38A.js","assets/useStudentReferralRewards-B_NefptQ.js","assets/PurchaseConfirmationToast-GMe0_Bx_.js","assets/use-unmount-effect-DcmbtpIq.js","assets/CompanyDataPrivacyModal-BU7yI58x.js","assets/SpaceVideoModal-56h0d8fN.js","assets/PricingTableModal-DqiiBvha.js","assets/FreeTrialModal-D_Kdmz3t.js","assets/MapModal-CCDEVfVm.js","assets/PerplexityMap-CizpoiqD.js","assets/PulsingDot-j00mlxjF.js","assets/InputPaymentModal-CBGZs_xq.js","assets/useStripePromise-CBLVjTgF.js","assets/ShoppingPaymentModal-BXgfT0aI.js","assets/useCreateFirmlyCart-UpJ1pu5n.js","assets/DiscountTag-DC5CxQZr.js","assets/ShoppingOptionRow-fzVF7DQP.js","assets/useStripeAppearance-CJefMyS8.js","assets/useCreateSetupIntentAndCheckoutSession-r2HHtjHO.js","assets/EntityItemImageCarousel-CyJHVzQD.js","assets/Carousel-gT7TzfOo.js","assets/embla-carousel-react.esm-BCk3MmRU.js","assets/ShoppingPaymentBillingBox-BiypDdRA.js","assets/ShoppingOnboardingModal-DzqhDyAE.js","assets/PurchaseDetailsModal-CX63-Ipy.js","assets/PurchaseStatus-BgLAI_QS.js","assets/ReservationDetailsModal-CrR9b3Ny.js","assets/utils-_eAuPezP.js","assets/util-B8MxrMiB.js","assets/SpaceSettingsModal-BEg3fyjY.js","assets/UsernameModal-BKpJgFO-.js","assets/FullNameModal-DLLmOB4h.js","assets/KeyboardShortcutEditorModal-QHGYoba6.js","assets/VoiceToVoiceModal-CuOEL2bt.js","assets/constants-DgrBUj1H.js","assets/SearchStepsAssetsModal-l_Ie1ivg.js","assets/GeneratedVideoCard-CnjaQUqc.js","assets/CodeFileContentRenderer-DvTAbo_H.js","assets/useAssetInfo-CKIV0oxM.js","assets/MemoryListModal-QAPx6uAZ.js","assets/MemoryList-Ca-mrcqx.js","assets/MemoryDetailModal-DhQVCS6U.js","assets/HotelRoomDetailsModal-CxquSgpV.js","assets/MaybeAdjustedPrice-CApB_aHg.js","assets/ImagePagedCarousel-BCCDpe84.js","assets/PaymentModal-ClOeqcZS.js","assets/ProReferralModal-poeD5Im0.js","assets/emailUtils-_jxwJ1Ij.js","assets/MeetingDefaultsModal-C8_qnkXr.js","assets/AvailabilityModal-D4qjy6Rd.js","assets/ComboBox-CTfdnD60.js","assets/ProMessageModal-63BURths.js","assets/MemorySearchHistoryIntroModal-qYrc1dQr.js","assets/SubSuccessModal-Yo_AMtSj.js","assets/PerksList-5wIBwXzk.js","assets/ReferralErrorModal-CoSpU1bk.js","assets/ReferralSuccessModal-JkKOvVNi.js","assets/IncentiveProModal-D5hxvr34.js","assets/StudentReferralsModal-DMTGqx-t.js","assets/SheerIDModal-DDKKzPJW.js","assets/BraintreeSubscriptionModal-BXQWgF7a.js","assets/RestaurantBookingModal-eyzYMGpT.js","assets/SheerIdRedirectModal-DkZGfDqm.js","assets/EnterprisePremiumSecureUpgradeModal-CZA-JpUW.js","assets/useOrgPremiumSecureFeatures-D5tHb5Ma.js","assets/ShortcutModal-BcWtdH_t.js","assets/PlatformOptionsModal-CzpcP_to.js","assets/SharepointSiteModal-CMCoyVJL.js","assets/MCPServerModal-v0d5-WHk.js","assets/MemberSetTierModal-CGiCCMop.js","assets/MCPServiceToolsModal-CJNF0ySh.js","assets/index-BHzD4wOK.js","assets/RenderToolbar-BcsvHHcv.js","assets/DebugModeActivator-CxCEPJVl.js","assets/LexicalClearEditorPlugin.prod-DXrnAy6l.js","assets/LexicalHistoryPlugin.prod-DYVa_hZM.js","assets/LexicalOnChangePlugin.prod-B5Msshl2.js","assets/LexicalEditorRefPlugin.prod-DSoHDE4C.js","assets/AutoLinkPlugin-Def2lGn9.js","assets/LinkPlugin-DI3dVvIc.js","assets/LexicalMarkdownShortcutPlugin.prod-Ol09BDmS.js","assets/WelcomeOverlay-BC3RcvFs.js","assets/ShoppingDetailsModal-CWx7Qdyg.js","assets/ShoppingWidget-BMLTklmP.js","assets/EntityItemReviewSummary-BZz_gNuU.js","assets/ThreadEntryVideo-CKGK1jVz.js","assets/useSponsoredImpressionTracking-B4Pm-gkL.js","assets/useViewportDwellObserver-MJ43fkxg.js","assets/CitationTrendingList-BMS8a2JR.js","assets/useNewFileViewer-BYUDoYpA.js","assets/useIsShoppingtryOnEnabled-DRxsoG2k.js","assets/ShopifyPurchaseModal-D_jAf0gW.js","assets/ShopifyPurchaseModalMobile-juoEbWj7.js","assets/ShoppingViewMoreModal-n4LTqU4Q.js","assets/useSearchForAdditionalProducts-DEDt72AK.js","assets/ShoppingOverviewItem-eG5xFEtM.js","assets/SplitModal-GsLZRinF.js","assets/qrcode-DzQwd33t.js","assets/index-DuGhojEe.js","assets/CharityWidget-PCYvyCUH.js","assets/BrandPopoverContent-Bj3aA7Gb.js","assets/cdn-DdrI0kug.js","assets/MissionControlPage-CnhC8MOa.js","assets/useGeneratedCometPersonalSuggestions-2U9lfDM8.js","assets/_restricted/restricted-feature-mission-control-CLhjKoBr.js","assets/StepRenderer-BJiLW1GY.js","assets/CodeStep-BOCjMFaL.js","assets/Select-D6q3eWwv.js","assets/canvasReducer-CIRxnsbI.js","assets/utils-DSVbbtDX.js","assets/useCometMcpEnabled-BY-NR4so.js","assets/ConnectorAuthorizationPrompt-Cs9LGeKW.js","assets/SideCanvasViewer-C1OrwslK.js","assets/AssetsMode-mmXwMlqf.js","assets/useDurationTracker-cAvM7UVj.js","assets/PDFViewerCore-CO_dAYuy.js","assets/AppsMode-yEWaj0FI.js","assets/SidePDFViewer-Df4jeApX.js","assets/AgentWorkflow-CE6QliQT.js","assets/MarkdownResponse-xwRqMmRy.js","assets/ThreadEntryFooter-A00xcEIP.js","assets/StructuredAnswerInlineBlock-DZAQ82l1.js","assets/PlaceInlineCard-Bzd7LBL4.js","assets/MapboxURLs-4yEd9e3N.js","assets/CardCarouselV2-Bp0ukQXH.js","assets/useGenerateShoppingReviewSummary-Bb_JKw8B.js","assets/ImagesModePreview-CZOn4-9E.js","assets/utils-UIbqIPyl.js","assets/CanonicalContainer-CAiyVx6U.js","assets/CanonicalPatternBackground-CuX7d67Q.js","assets/FinanceMover-D95VOBnU.js","assets/QueryComponents-DpcmgaQP.js","assets/NotFound-DM27zFDQ.js","assets/BigNumber-cdsCA4gT.js","assets/TimeAgoTooltip-CQmkbC5i.js","assets/ReportModal-BSCRiqHR.js","assets/CopyOutputButton-CylUS7ky.js","assets/Related-B4ls7ZX7.js","assets/RelatedPrompts-CFQAAIDH.js","assets/RelatedQueryList-5YvWTwMJ.js","assets/index-JfRXUotz.js","assets/StudyModeRelated-pN3FtTqA.js","assets/MapsPreview-Zej4Nd_5.js","assets/ThreadContentResponse-CzChdvzZ.js","assets/SourcesModePreview-4DC-bo-b.js","assets/AnswerComparisonModal-DYfvjzn4.js","assets/MobileCitationList-li8zqiRu.js","assets/ShoppingMode-DccEIS_l.js","assets/ShoppingFeaturedWidget-rFBuYNXy.js","assets/ModesNullState-BBKv1_LF.js","assets/HotelsMode-CpyFaIEh.js","assets/GuestInput-BRXgH0_9.js","assets/SharedAnswerModeMap-oUJli5Pu.js","assets/JobsMode-CdJvgnP0.js","assets/VideosMode-C925BSol.js","assets/useMediaSearch-D1wj8-4Z.js","assets/ImagesMode-BdAw6ZAK.js","assets/ImageGeneratorLoader-Db69-nuq.js","assets/MapsMode-Cgc0ygGU.js","assets/TasksMode-BhEXmmeB.js","assets/index-BUlg-b4n.js","assets/search-loading-component-C7iK06jw.js","assets/CometZenMode-DjQKAtK-.js","assets/index.module-J6TOuzax.js","assets/TryAssistantPage-DLaMJw11.js","assets/library-BFiV1BUU.js","assets/useScrollPositionPersistence-BCUvGcQ-.js","assets/ArticleListItem-Cfs6QuYo.js","assets/index-i6SokZ8B.js","assets/useSpacesBookmarking-D-bxxPXd.js","assets/templates-Brylh76m.js","assets/slug-BWhqF06h.js","assets/useOrgUsers-hDlC8P_x.js","assets/slug-QuO2n4TJ.js","assets/DiscoverTrending-d-ICwpO4.js","assets/loading-tBl11ccy.js","assets/academic-DGRqIHYf.js","assets/VerticalSearchContainer-RQUtR9OI.js","assets/VerticalLandingWrapper-BiDADcWa.js","assets/shopping-DApEuWoa.js","assets/hotels-JmT8EnwO.js","assets/not-found-gEkoWCvE.js","assets/perplexify_me-CtnzL9r0.js","assets/travel-iv8LETwn.js","assets/discover-BrwZERV5.js","assets/TaskStarterCards-wNOX2UyH.js","assets/index-D0XlLf-D.js","assets/F1Header-BCDvyfjl.js","assets/MonthTabs-Cg9sHNTf.js","assets/SportsTournamentOdds-BORpqv9C.js","assets/SportsCanonicalContainer-CS3r-fzg.js","assets/events-CuoEhLfq.js","assets/index-C-3lshiO.js","assets/common-DD5oJNPi.js","assets/MultiTeamSchedule-BFVBKSz0.js","assets/SportsConferenceList-BINS6n5C.js","assets/SingleTeamEventRow-CdNUzpIr.js","assets/TeamPicker-CQqlYBg-.js","assets/BaseSportsBracket-CmvHoI2Z.js","assets/SportsBracket-D_WgvzQb.js","assets/SportsTeamStandings-SCidWc5G.js","assets/stats-CKKNinx8.js","assets/events-BfTcEnwo.js","assets/EventLiveOdds-dOxf94xc.js","assets/utils-Ck5GR39r.js","assets/NBAGameLeadersStats-sbMqyZYO.js","assets/SportsGameRelatedGames-CgCku7o_.js","assets/SportsInjuryReport-BGJ_2fgR.js","assets/player-C8EgX8V7.js","assets/SportsMultiTeamSeasonLeadersStats-CSP4ZvDn.js","assets/NBASportsTeamSeasonComparison-9nnqAIB7.js","assets/SportsTeamSeasonComparison-DgJzGRM7.js","assets/SportsDataTableComparison-Z7LbIMa4.js","assets/SportsTeamGameComparison-CXDk1DZq.js","assets/teams-D68VUI10.js","assets/SportsBlazeVideoHighlights-GUBoc9wv.js","assets/players-KsEDdTQs.js","assets/RelatedPlayers-keVdz7Oa.js","assets/index-DMJRto7u.js","assets/events-_qZFe3dA.js","assets/teams-DzcSVF7k.js","assets/players-LUhrMfT0.js","assets/index-BjDwBALe.js","assets/tournament-DTNKuYzh.js","assets/events-DvG1-rQz.js","assets/EventV2LiveOdds-CZAK8z-y.js","assets/index-D8c6ibV5.js","assets/MLBEventSchedule-CPayev4T.js","assets/scheduleUtils-BD4W-1Eg.js","assets/events-Cq7na1_O.js","assets/CricketMatchStats-YsqB8UkC.js","assets/events-BianfYBi.js","assets/useShowIccCricketVariation-vqGsRTbz.js","assets/index-CcKWjVMZ.js","assets/index-BBf4qjUH.js","assets/index-CKqHa4S5.js","assets/TennisLeagueSchedule-CEEc-jxT.js","assets/events-CIbDC9tn.js","assets/index-CaKWoLsf.js","assets/events-DRuoCGOi.js","assets/events-Bq98U7IX.js","assets/index-Da-SV7lB.js","assets/index-S88DNb6e.js","assets/TennisHeader-B_aGwF40.js","assets/useTennis2025Variation-CYBhwNoK.js","assets/events-BK-L_fTI.js","assets/TennisTournamentBracket-KbIGV3mB.js","assets/tournaments-CsM00hBu.js","assets/sub-router-BItKyrPs.js","assets/WhatsHappeningHorizontal-CX86UAY2.js","assets/index-CDoNV27h.js","assets/details-ClxqlJU6.js","assets/group-BF8mm7YC.js","assets/settingsAccess-DAuM2Nrd.js","assets/ProtectedSettingsPageGate-BdkpXqJD.js","assets/useAPIAdmin-C5W30uDc.js","assets/apiPortalQueries-VYpGG67S.js","assets/APIPortalBillingBanner-CoSL0LZQ.js","assets/CreateAPIGroupModal-e7dQoePP.js","assets/members-A4GG3mF8.js","assets/MembersTablePagination-DtxEPQmV.js","assets/billing-DCgttu74.js","assets/keys-VnBBW3gd.js","assets/limits-0N2yYunj.js","assets/files-CirxPNH1.js","assets/files-repo-BIb3bd-F.js","assets/index-Oftqaz_k.js","assets/pro-perks-D63SRds-.js","assets/utils-Dad2LZ2j.js","assets/pro-perks-detail-C5Ba_ug5.js","assets/index-D47pfPlu.js","assets/access-_wR4ehSC.js","assets/index-D7TFFSKT.js","assets/useOrgMutations-BSLVrh8D.js","assets/useEnterprisePremiumSecureEnabled-CsSG7XoX.js","assets/useIsThreadRetentionEnabled-Bqnt9dcq.js","assets/members-Bhj7v7bb.js","assets/insights-s8AGDYhr.js","assets/user-access-CVWqoVLj.js","assets/permissions-C57Ad-Vk.js","assets/files-BHc370L1.js","assets/FileData-Dj5N94VY.js","assets/connectors-BhqgXq70.js","assets/purchases-B4KP04_R.js","assets/useMutationState-CLITSD6k.js","assets/reservations-DLLF7Vup.js","assets/index-CkOLcn7h.js","assets/TaskListItem-LFKgDHhQ.js","assets/task-DyVKxZfv.js","assets/shortcuts-P4kySjQm.js","assets/site-instructions-DNpaWvlI.js","assets/preferences-CkswGMGZ.js","assets/personalize-BYTrnr-c.js","assets/assistant-BF32Wzrn.js","assets/memories-CNi5eFVE.js","assets/notifications-Bs_RIqCT.js","assets/files-CqD907vg.js","assets/connectors-frImwxbb.js","assets/index-BbVjXLTP.js","assets/ask-input-WIO7hRET.js"])))=>i.map(i=>d[i]);
import{g as Tn,s as Qt,l as ee,S as Ae,a as dte,u as Dt,b as Nt,c as _t,L as Ye,P as Bv,d as X5e,r as Hd,e as To,f as Cf,h as Ql,i as Z5e,j as sr,k as ac,R as Cr,F as gN,m as fte,n as xi,o as J5e,t as eMe,p as tMe,q as bs,v as nMe,w as rMe,x as sMe,y as ea,z as fp,A as yN,B as bR,C as mte,$ as ns,D as aMe,E as oMe,G as iMe,H as lMe,I as cMe,J as uMe,K as dMe,M as he,N as FC,O as fMe,Q as mMe,T as pMe,U as hMe,V as gMe,W as yMe,X as vMe,Y as xMe,Z as bMe,_ as eB,a0 as tB,a1 as _Me,a2 as UC,a3 as vN,a4 as wMe,a5 as CMe,a6 as SMe,a7 as Rd,a8 as pte,a9 as EMe,aa as _R,ab as wR,ac as MMe,ad as Xl,ae as kMe,af as U5,ag as $f}from"./platform-0Df2kFE8.js";import{r as f,e as dh,k as TMe,l as ms,R as A,j as i,f as U,i as xs,$ as CR,m as hte,n as Rn,_ as nr,b as SR,c as ze,a as ER,p as NMe,o as Po,q as AMe,t as gte,u as yte,v as ta,w as vte,x as nB,y as fh,z as jMe,A as xte,B as Vv,C as rB,D as RMe}from"./vendors-D80jw9f5.js";import{T as me,c as Rr,d as Qn,e as xN,f as Lt,g as MR,a as BC,I as kR,h as IMe,i as Ts,j as mp,k as Ca,l as bi,m as mh,n as VC,o as Oy,p as PMe,q as bte,r as OMe,s as LMe,t as _r,u as Wv,v as _te,w as Sf,x as WC,y as uu,z as TR,A as du,B as no,C as bN,D as vw,E as wte,F as $v,G as $C,H as DMe,J as zd,K as Ef,L as Cte,M as NR,N as Ste,O as FMe,P as UMe,Q as _N,R as Ete,S as Mte,U as BMe,V as kte,W as VMe,X as WMe,Y as Tte,Z as Nte,_ as $Me,$ as rr,a0 as Hv,a1 as HMe,a2 as zMe,a3 as wc,a4 as Gd,a5 as Ate,a6 as Mf,a7 as GMe,a8 as qMe,a9 as KMe,aa as AR,ab as jR,ac as wN,ad as xw,ae as ph,af as kf,ag as bw,ah as zv,ai as YMe,aj as QMe,ak as XMe,al as jte,am as $a,an as ZMe,ao as JMe,ap as Rte,aq as e4e,ar as t4e,as as Ite,at as n4e,au as r4e,av as Tf,aw as Pte,ax as Xi,ay as RR,az as s4e,aA as a4e,aB as IR,aC as _w,aD as Ote,aE as Lte,aF as Dte,aG as Fte,aH as o4e,aI as Ute,aJ as _0,aK as i4e,aL as l4e,aM as ww,aN as Bte,aO as Vte,aP as Wte,aQ as PR,aR as c4e,aS as CN,aT as u4e,aU as w0,aV as $te,aW as d4e,aX as A_,aY as f4e,aZ as OR,a_ as HC,a$ as m4e,b0 as p4e,b1 as Hte,b2 as zte,b3 as LR,b4 as SN,b5 as h4e,b6 as Gte,b7 as zC,b8 as g4e,b9 as Gv,ba as y4e,b as ro,bb as qv,bc as DR,bd as tu,be as v4e,bf as GC,bg as x4e,bh as qte,bi as Kte,bj as b4e,bk as FR,bl as _4e,bm as w4e,bn as Yte,bo as C4e,bp as Qte,bq as sB,br as S4e,bs as qC,bt as j_,bu as E4e,bv as M4e,bw as k4e,bx as T4e,by as UR,bz as BR,bA as VR,bB as WR,bC as $R,bD as C0,bE as aB,bF as HR,bG as Xte,bH as Zte,bI as N4e,bJ as A4e,bK as oB,bL as j4e,bM as R4e,bN as I4e,bO as P4e,bP as O4e,bQ as L4e,bR as D4e,bS as F4e,bT as U4e,bU as B4e,bV as V4e,bW as W4e,bX as $4e,bY as H4e,bZ as z4e,b_ as iB,b$ as lB,c0 as G4e,c1 as Kv,c2 as q4e,c3 as Jte,c4 as zR,c5 as GR,c6 as K4e,c7 as EN,c8 as cB,c9 as Y4e,ca as Yv,cb as Q4e,cc as X4e,cd as Z4e,ce as J4e,cf as eke,cg as MN,ch as ene,ci as tke,cj as tne,ck as nke,cl as rke,cm as ske,cn as nne,co as ake,cp as oke,cq as ike,cr as lke,cs as S0,ct as cke,cu as uke,cv as dke,cw as rne,cx as fke,cy as kN,cz as mke,cA as B5,cB as pke,cC as sne,cD as hke,cE as gke,cF as yke,cG as qR,cH as KC,cI as vke,cJ as xke,cK as bke,cL as YC,cM as _ke,cN as ane,cO as wke,cP as Cke,cQ as Ske,cR as one,cS as ine,cT as lne,cU as cne,cV as KR,cW as une,cX as dne,cY as Eke,cZ as Mke,c_ as fne,c$ as kke,d0 as uB,d1 as Tke,d2 as Nke,d3 as Ake,d4 as jke,d5 as YR,d6 as Rke,d7 as Ike,d8 as Pke,d9 as mne,da as pne,db as Oke,dc as Lke,dd as Dke,de as Fke,df as Uke,dg as dB,dh as Bke,di as Vke,dj as Wke,dk as QR,dl as $ke,dm as Hke,dn as zke,dp as Gke,dq as hne,dr as qke,ds as gne,dt as Kke,du as Yke,dv as Qke,dw as fB,dx as Xke,dy as Zke,dz as Jke,dA as eTe,dB as tTe,dC as nTe,dD as yne,dE as mB,dF as pB,dG as V5,dH as hB,dI as gB,dJ as W5,dK as $5,dL as yB,dM as Eg,dN as rTe,dO as sTe,dP as aTe,dQ as vne,dR as oTe,dS as iTe,dT as lTe,dU as cTe,dV as uTe,dW as dTe,dX as fTe,dY as mTe,dZ as pTe,d_ as hTe,d$ as gTe,e0 as yTe,e1 as vTe,e2 as xne,e3 as bne,e4 as xTe,e5 as bTe,e6 as _ne,e7 as _Te,e8 as wTe,e9 as CTe}from"./icons-mbN5KUs1.js";import{u as Q,m as STe,d as dt,M as pe,a as K,c as ETe,F as TN,I as MTe,b as kTe,e as TTe,f as wne}from"./i18n-B9c4qKoa.js";import{_ as ae,c as Ya,a as io,g as hh}from"./vite-D9Bl2idj.js";function NTe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const ATe=["grey","teal","brown","maroon","red","orange","gold","yellow","green","blue","purple"],Cne=e=>{if(!e)return null;try{const n=JSON.parse(e)?.name;if(n&&ATe.includes(n))return n}catch{}return null};function jTe(){const e=Tn("colorSchemeTheme"),t=Tn("colorScheme"),n=Cne(e);n&&(document.documentElement.dataset.theme=n),t&&(document.documentElement.dataset.colorScheme=t)}jTe();var RTe={};const vB="/rest/event/analytics",Cw="pplx.visitor-id",NN="pplx.session-id",E0="pplx.trackingAllowed",ITe="http://default-analytics-service:8000",PTe=()=>RTe.ANALYTICS_SERVICE_URL||ITe,OTe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Sne(e){return typeof e=="string"&&OTe.test(e)}const ds=[];for(let e=0;e<256;++e)ds.push((e+256).toString(16).slice(1));function LTe(e,t=0){return(ds[e[t+0]]+ds[e[t+1]]+ds[e[t+2]]+ds[e[t+3]]+"-"+ds[e[t+4]]+ds[e[t+5]]+"-"+ds[e[t+6]]+ds[e[t+7]]+"-"+ds[e[t+8]]+ds[e[t+9]]+"-"+ds[e[t+10]]+ds[e[t+11]]+ds[e[t+12]]+ds[e[t+13]]+ds[e[t+14]]+ds[e[t+15]]).toLowerCase()}let H5;const DTe=new Uint8Array(16);function FTe(){if(!H5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");H5=crypto.getRandomValues.bind(crypto)}return H5(DTe)}const UTe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xB={randomUUID:UTe};function dr(e,t,n){if(xB.randomUUID&&!e)return xB.randomUUID();e=e||{};const r=e.random??e.rng?.()??FTe();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,LTe(r)}const BTe=365;function VTe(){try{Tn(Cw)||Qt(Cw,dr(),{expires:BTe})}catch{}try{Tn(NN)||Qt(NN,dr())}catch{}}VTe();const WTe=["Europe/Vienna","Europe/Brussels","Europe/Sofia","Europe/Zagreb","Asia/Famagusta","Asia/Nicosia","Europe/Prague","Europe/Copenhagen","Europe/Tallinn","Europe/Helsinki","Europe/Paris","Europe/Berlin","Europe/Busingen","Europe/Athens","Europe/Budapest","Europe/Dublin","Europe/Rome","Europe/Riga","Europe/Vilnius","Europe/Luxembourg","Europe/Malta","Europe/Amsterdam","Europe/Warsaw","Atlantic/Azores","Atlantic/Madeira","Europe/Lisbon","Europe/Bucharest","Europe/Bratislava","Europe/Ljubljana","Africa/Ceuta","Atlantic/Canary","Europe/Madrid","Europe/Stockholm"];function bB(){try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;return WTe.includes(e)||e.includes("Europe")}catch(e){return ee.warn("Error detecting user timezone:",e),!0}}function Ene(){const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[s,a]=f.useState(!1);f.useEffect(()=>{const l=c=>{c?.detail?.consent==="ALLOW"?t(!0):t(!1)};return window.addEventListener("consentChange",l),()=>{window.removeEventListener("consentChange",l)}},[]),f.useEffect(()=>{if(!bB()){t(!0),r(!0);return}Tn(E0)==="true"&&t(!0),r(!0)},[]),f.useEffect(()=>{!Tn(E0)&&bB()&&a(!0)},[]);const o=()=>{a(!1)};return f.useMemo(()=>({hasConsent:e,checkedConsent:n,showCookieConsentPopup:s,closeCookieConsentPopup:o}),[n,e,s])}var z5={},G5={exports:{}},_B;function QC(){return _B||(_B=1,function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(G5)),G5.exports}var q5={exports:{}},wB;function Qv(){return wB||(wB=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(q5)),q5.exports}var K5={exports:{}},CB;function $Te(){return CB||(CB=1,function(e){var t=Qv().default;function n(){e.exports=n=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var r,s={},a=Object.prototype,o=a.hasOwnProperty,l=Object.defineProperty||function(B,V,$){B[V]=$.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function p(B,V,$){return Object.defineProperty(B,V,{value:$,enumerable:!0,configurable:!0,writable:!0}),B[V]}try{p({},"")}catch{p=function($,G,X){return $[G]=X}}function h(B,V,$,G){var X=V&&V.prototype instanceof w?V:w,Y=Object.create(X.prototype),W=new D(G||[]);return l(Y,"_invoke",{value:O(B,$,W)}),Y}function g(B,V,$){try{return{type:"normal",arg:B.call(V,$)}}catch(G){return{type:"throw",arg:G}}}s.wrap=h;var y="suspendedStart",v="suspendedYield",x="executing",b="completed",_={};function w(){}function C(){}function S(){}var E={};p(E,u,function(){return this});var M=Object.getPrototypeOf,k=M&&M(M(F([])));k&&k!==a&&o.call(k,u)&&(E=k);var T=S.prototype=w.prototype=Object.create(E);function j(B){["next","throw","return"].forEach(function(V){p(B,V,function($){return this._invoke(V,$)})})}function R(B,V){function $(X,Y,W,H){var Z=g(B[X],B,Y);if(Z.type!=="throw"){var re=Z.arg,q=re.value;return q&&t(q)=="object"&&o.call(q,"__await")?V.resolve(q.__await).then(function(J){$("next",J,W,H)},function(J){$("throw",J,W,H)}):V.resolve(q).then(function(J){re.value=J,W(re)},function(J){return $("throw",J,W,H)})}H(Z.arg)}var G;l(this,"_invoke",{value:function(Y,W){function H(){return new V(function(Z,re){$(Y,W,Z,re)})}return G=G?G.then(H,H):H()}})}function O(B,V,$){var G=y;return function(X,Y){if(G===x)throw Error("Generator is already running");if(G===b){if(X==="throw")throw Y;return{value:r,done:!0}}for($.method=X,$.arg=Y;;){var W=$.delegate;if(W){var H=P(W,$);if(H){if(H===_)continue;return H}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(G===y)throw G=b,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);G=x;var Z=g(B,V,$);if(Z.type==="normal"){if(G=$.done?b:v,Z.arg===_)continue;return{value:Z.arg,done:$.done}}Z.type==="throw"&&(G=b,$.method="throw",$.arg=Z.arg)}}}function P(B,V){var $=V.method,G=B.iterator[$];if(G===r)return V.delegate=null,$==="throw"&&B.iterator.return&&(V.method="return",V.arg=r,P(B,V),V.method==="throw")||$!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+$+"' method")),_;var X=g(G,B.iterator,V.arg);if(X.type==="throw")return V.method="throw",V.arg=X.arg,V.delegate=null,_;var Y=X.arg;return Y?Y.done?(V[B.resultName]=Y.value,V.next=B.nextLoc,V.method!=="return"&&(V.method="next",V.arg=r),V.delegate=null,_):Y:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,_)}function N(B){var V={tryLoc:B[0]};1 in B&&(V.catchLoc=B[1]),2 in B&&(V.finallyLoc=B[2],V.afterLoc=B[3]),this.tryEntries.push(V)}function I(B){var V=B.completion||{};V.type="normal",delete V.arg,B.completion=V}function D(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(N,this),this.reset(!0)}function F(B){if(B||B===""){var V=B[u];if(V)return V.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var $=-1,G=function X(){for(;++$<B.length;)if(o.call(B,$))return X.value=B[$],X.done=!1,X;return X.value=r,X.done=!0,X};return G.next=G}}throw new TypeError(t(B)+" is not iterable")}return C.prototype=S,l(T,"constructor",{value:S,configurable:!0}),l(S,"constructor",{value:C,configurable:!0}),C.displayName=p(S,m,"GeneratorFunction"),s.isGeneratorFunction=function(B){var V=typeof B=="function"&&B.constructor;return!!V&&(V===C||(V.displayName||V.name)==="GeneratorFunction")},s.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,S):(B.__proto__=S,p(B,m,"GeneratorFunction")),B.prototype=Object.create(T),B},s.awrap=function(B){return{__await:B}},j(R.prototype),p(R.prototype,d,function(){return this}),s.AsyncIterator=R,s.async=function(B,V,$,G,X){X===void 0&&(X=Promise);var Y=new R(h(B,V,$,G),X);return s.isGeneratorFunction(V)?Y:Y.next().then(function(W){return W.done?W.value:Y.next()})},j(T),p(T,m,"Generator"),p(T,u,function(){return this}),p(T,"toString",function(){return"[object Generator]"}),s.keys=function(B){var V=Object(B),$=[];for(var G in V)$.push(G);return $.reverse(),function X(){for(;$.length;){var Y=$.pop();if(Y in V)return X.value=Y,X.done=!1,X}return X.done=!0,X}},s.values=F,D.prototype={constructor:D,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(I),!V)for(var $ in this)$.charAt(0)==="t"&&o.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=r)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var $=this;function G(re,q){return W.type="throw",W.arg=V,$.next=re,q&&($.method="next",$.arg=r),!!q}for(var X=this.tryEntries.length-1;X>=0;--X){var Y=this.tryEntries[X],W=Y.completion;if(Y.tryLoc==="root")return G("end");if(Y.tryLoc<=this.prev){var H=o.call(Y,"catchLoc"),Z=o.call(Y,"finallyLoc");if(H&&Z){if(this.prev<Y.catchLoc)return G(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return G(Y.finallyLoc)}else if(H){if(this.prev<Y.catchLoc)return G(Y.catchLoc,!0)}else{if(!Z)throw Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return G(Y.finallyLoc)}}}},abrupt:function(V,$){for(var G=this.tryEntries.length-1;G>=0;--G){var X=this.tryEntries[G];if(X.tryLoc<=this.prev&&o.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var Y=X;break}}Y&&(V==="break"||V==="continue")&&Y.tryLoc<=$&&$<=Y.finallyLoc&&(Y=null);var W=Y?Y.completion:{};return W.type=V,W.arg=$,Y?(this.method="next",this.next=Y.finallyLoc,_):this.complete(W)},complete:function(V,$){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&$&&(this.next=$),_},finish:function(V){for(var $=this.tryEntries.length-1;$>=0;--$){var G=this.tryEntries[$];if(G.finallyLoc===V)return this.complete(G.completion,G.afterLoc),I(G),_}},catch:function(V){for(var $=this.tryEntries.length-1;$>=0;--$){var G=this.tryEntries[$];if(G.tryLoc===V){var X=G.completion;if(X.type==="throw"){var Y=X.arg;I(G)}return Y}}throw Error("illegal catch attempt")},delegateYield:function(V,$,G){return this.delegate={iterator:F(V),resultName:$,nextLoc:G},this.method==="next"&&(this.arg=r),_}},s}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(K5)),K5.exports}var Y5,SB;function XC(){if(SB)return Y5;SB=1;var e=$Te()();Y5=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return Y5}var Q5={exports:{}},X5={exports:{}},Z5={exports:{}},EB;function HTe(){return EB||(EB=1,function(e){var t=Qv().default;function n(r,s){if(t(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var o=a.call(r,s||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Z5)),Z5.exports}var MB;function Mne(){return MB||(MB=1,function(e){var t=Qv().default,n=HTe();function r(s){var a=n(s,"string");return t(a)=="symbol"?a:a+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(X5)),X5.exports}var kB;function ZC(){return kB||(kB=1,function(e){var t=Mne();function n(r,s,a){return(s=t(s))in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Q5)),Q5.exports}var J5={exports:{}},TB;function JC(){return TB||(TB=1,function(e){function t(r,s,a,o,l,c,u){try{var d=r[c](u),m=d.value}catch(p){return void a(p)}d.done?s(m):Promise.resolve(m).then(o,l)}function n(r){return function(){var s=this,a=arguments;return new Promise(function(o,l){var c=r.apply(s,a);function u(m){t(c,o,l,u,d,"next",m)}function d(m){t(c,o,l,u,d,"throw",m)}u(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(J5)),J5.exports}var eM={exports:{}},tM={exports:{}},NB;function zTe(){return NB||(NB=1,function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(tM)),tM.exports}var nM={exports:{}},AB;function GTe(){return AB||(AB=1,function(e){function t(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,o,l,c,u=[],d=!0,m=!1;try{if(l=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=l.call(s)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(p){m=!0,o=p}finally{try{if(!d&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(m)throw o}}return u}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(nM)),nM.exports}var rM={exports:{}},sM={exports:{}},jB;function qTe(){return jB||(jB=1,function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var s=0,a=Array(r);s<r;s++)a[s]=n[s];return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(sM)),sM.exports}var RB;function KTe(){return RB||(RB=1,function(e){var t=qTe();function n(r,s){if(r){if(typeof r=="string")return t(r,s);var a={}.toString.call(r).slice(8,-1);return a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set"?Array.from(r):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(r,s):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(rM)),rM.exports}var aM={exports:{}},IB;function YTe(){return IB||(IB=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(aM)),aM.exports}var PB;function QTe(){return PB||(PB=1,function(e){var t=zTe(),n=GTe(),r=KTe(),s=YTe();function a(o,l){return t(o)||n(o,l)||r(o,l)||s()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(eM)),eM.exports}var Ku={},Vn={},oM={exports:{}},OB;function XTe(){return OB||(OB=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(oM)),oM.exports}var iM={exports:{}},LB;function ZTe(){return LB||(LB=1,function(e){var t=Mne();function n(s,a){for(var o=0;o<a.length;o++){var l=a[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(s,t(l.key),l)}}function r(s,a,o){return a&&n(s.prototype,a),o&&n(s,o),Object.defineProperty(s,"prototype",{writable:!1}),s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(iM)),iM.exports}var lM={exports:{}},cM={exports:{}},DB;function JTe(){return DB||(DB=1,function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(cM)),cM.exports}var FB;function e6e(){return FB||(FB=1,function(e){var t=Qv().default,n=JTe();function r(s,a){if(a&&(t(a)=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(s)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(lM)),lM.exports}var uM={exports:{}},UB;function kne(){return UB||(UB=1,function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(uM)),uM.exports}var dM={exports:{}},fM={exports:{}},BB;function XR(){return BB||(BB=1,function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(fM)),fM.exports}var VB;function t6e(){return VB||(VB=1,function(e){var t=XR();function n(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&t(r,s)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(dM)),dM.exports}var mM={exports:{}},pM={exports:{}},WB;function n6e(){return WB||(WB=1,function(e){function t(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(pM)),pM.exports}var hM={exports:{}},gM={exports:{}},$B;function r6e(){return $B||($B=1,function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(gM)),gM.exports}var HB;function s6e(){return HB||(HB=1,function(e){var t=r6e(),n=XR();function r(s,a,o){if(t())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,a);var c=new(s.bind.apply(s,l));return o&&n(c,o.prototype),c}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(hM)),hM.exports}var zB;function a6e(){return zB||(zB=1,function(e){var t=kne(),n=XR(),r=n6e(),s=s6e();function a(o){var l=typeof Map=="function"?new Map:void 0;return e.exports=a=function(u){if(u===null||!r(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(u))return l.get(u);l.set(u,d)}function d(){return s(u,arguments,t(this).constructor)}return d.prototype=Object.create(u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),n(d,u)},e.exports.__esModule=!0,e.exports.default=e.exports,a(o)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(mM)),mM.exports}var GB;function o6e(){if(GB)return Vn;GB=1;var e=QC();Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.UnsupportedStrategy=Vn.UnknownError=Vn.OAuthCallbackError=Vn.MissingSecret=Vn.MissingAuthorize=Vn.MissingAdapterMethods=Vn.MissingAdapter=Vn.MissingAPIRoute=Vn.InvalidCallbackUrl=Vn.AccountNotLinkedError=void 0,Vn.adapterErrorHandler=v,Vn.capitalize=g,Vn.eventsErrorHandler=y,Vn.upperSnake=h;var t=e(XC()),n=e(JC()),r=e(ZC()),s=e(XTe()),a=e(ZTe()),o=e(e6e()),l=e(kne()),c=e(t6e()),u=e(a6e());function d(x,b,_){return b=(0,l.default)(b),(0,o.default)(x,m()?Reflect.construct(b,_||[],(0,l.default)(x).constructor):b.apply(x,_))}function m(){try{var x=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m=function(){return!!x})()}var p=Vn.UnknownError=function(x){function b(_){var w,C;return(0,s.default)(this,b),C=d(this,b,[(w=_?.message)!==null&&w!==void 0?w:_]),C.name="UnknownError",C.code=_.code,_ instanceof Error&&(C.stack=_.stack),C}return(0,c.default)(b,x),(0,a.default)(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,u.default)(Error));Vn.OAuthCallbackError=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","OAuthCallbackError"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),Vn.AccountNotLinkedError=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","AccountNotLinkedError"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),Vn.MissingAPIRoute=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAPIRouteError"),(0,r.default)(_,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),Vn.MissingSecret=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingSecretError"),(0,r.default)(_,"code","NO_SECRET"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),Vn.MissingAuthorize=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAuthorizeError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),Vn.MissingAdapter=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAdapterError"),(0,r.default)(_,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),Vn.MissingAdapterMethods=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAdapterMethodsError"),(0,r.default)(_,"code","MISSING_ADAPTER_METHODS_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),Vn.UnsupportedStrategy=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","UnsupportedStrategyError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p),Vn.InvalidCallbackUrl=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=d(this,b,[].concat(C)),(0,r.default)(_,"name","InvalidCallbackUrl"),(0,r.default)(_,"code","INVALID_CALLBACK_URL_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(p);function h(x){return x.replace(/([A-Z])/g,"_$1").toUpperCase()}function g(x){return"".concat(x[0].toUpperCase()).concat(x.slice(1))}function y(x,b){return Object.keys(x).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function C(){var S,E=arguments;return t.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,S=x[w],k.next=4,S.apply(void 0,E);case 4:return k.abrupt("return",k.sent);case 7:k.prev=7,k.t0=k.catch(0),b.error("".concat(h(w),"_EVENT_ERROR"),k.t0);case 10:case"end":return k.stop()}},C,null,[[0,7]])})),_},{})}function v(x,b){if(x)return Object.keys(x).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function C(){var S,E,M,k,T,j=arguments;return t.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:for(O.prev=0,S=j.length,E=new Array(S),M=0;M<S;M++)E[M]=j[M];return b.debug("adapter_".concat(w),{args:E}),k=x[w],O.next=6,k.apply(void 0,E);case 6:return O.abrupt("return",O.sent);case 9:throw O.prev=9,O.t0=O.catch(0),b.error("adapter_error_".concat(w),O.t0),T=new p(O.t0),T.name="".concat(g(w),"Error"),T;case 15:case"end":return O.stop()}},C,null,[[0,9]])})),_},{})}return Vn}var qB;function i6e(){if(qB)return Ku;qB=1;var e=QC();Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.default=void 0,Ku.proxyLogger=m,Ku.setLogger=d;var t=e(XC()),n=e(ZC()),r=e(JC()),s=o6e();function a(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);h&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable})),g.push.apply(g,y)}return g}function o(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?a(Object(g),!0).forEach(function(y){(0,n.default)(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):a(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}function l(p){if(p instanceof Error&&!(p instanceof s.UnknownError))return{message:p.message,stack:p.stack,name:p.name};if(c(p)){var h;p.error=l(p.error),p.message=(h=p.message)!==null&&h!==void 0?h:p.error.message}return p}function c(p){return!!(p!=null&&p.error)}var u={error:function(h,g){g=l(g),console.error("[next-auth][error][".concat(h,"]"),`
https://next-auth.js.org/errors#`.concat(h.toLowerCase()),g.message,g)},warn:function(h){console.warn("[next-auth][warn][".concat(h,"]"),`
https://next-auth.js.org/warnings#`.concat(h.toLowerCase()))},debug:function(h,g){console.log("[next-auth][debug][".concat(h,"]"),g)}};function d(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;h||(u.debug=function(){}),p.error&&(u.error=p.error),p.warn&&(u.warn=p.warn),p.debug&&(u.debug=p.debug)}Ku.default=u;function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u,h=arguments.length>1?arguments[1]:void 0;try{if(typeof window>"u")return p;var g={},y=function(b){g[b]=function(){var _=(0,r.default)(t.default.mark(function w(C,S){var E,M;return t.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(u[b](C,S),b==="error"&&(S=l(S)),S.client=!0,E="".concat(h,"/_log"),M=new URLSearchParams(o({level:b,code:C},S)),!navigator.sendBeacon){T.next=8;break}return T.abrupt("return",navigator.sendBeacon(E,M));case 8:return T.next=10,fetch(E,{method:"POST",body:M,keepalive:!0});case 10:return T.abrupt("return",T.sent);case 11:case"end":return T.stop()}},w)}));return function(w,C){return _.apply(this,arguments)}}()};for(var v in p)y(v);return g}catch{return u}}return Ku}var Hx={},KB;function l6e(){if(KB)return Hx;KB=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.default=e;function e(t){var n;const r=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);const s=new URL((n=t)!==null&&n!==void 0?n:r),a=(s.pathname==="/"?r.pathname:s.pathname).replace(/\/$/,""),o=`${s.origin}${a}`;return{origin:s.origin,host:s.host,path:a,base:o,toString:()=>o}}return Hx}var Yu={},YB;function c6e(){if(YB)return Yu;YB=1;var e=QC();Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.BroadcastChannel=m,Yu.apiBaseUrl=u,Yu.fetchData=l,Yu.now=d;var t=e(XC()),n=e(ZC()),r=e(JC());function s(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);h&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable})),g.push.apply(g,y)}return g}function a(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?s(Object(g),!0).forEach(function(y){(0,n.default)(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):s(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}var o=3;function l(p,h,g){return c.apply(this,arguments)}function c(){return c=(0,r.default)(t.default.mark(function p(h,g,y){var v,x,b,_,w,C,S,E,M,k,T=arguments;return t.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:v=T.length>3&&T[3]!==void 0?T[3]:{},x=v.ctx,b=v.req,_=b===void 0?x?.req:b,w="".concat(u(g),"/").concat(h),C=0;case 3:if(!(C<o)){R.next=28;break}return R.prev=4,E={headers:a({"Content-Type":"application/json"},_!=null&&(S=_.headers)!==null&&S!==void 0&&S.cookie?{cookie:_.headers.cookie}:{})},_!=null&&_.body&&(E.body=JSON.stringify(_.body),E.method="POST"),R.next=9,fetch(w,E);case 9:return M=R.sent,R.next=12,M.json();case 12:if(k=R.sent,M.ok){R.next=15;break}throw k;case 15:return R.abrupt("return",Object.keys(k).length>0?k:null);case 18:if(R.prev=18,R.t0=R.catch(4),C++,C!==o){R.next=24;break}throw y.error("CLIENT_FETCH_ERROR",{error:R.t0,url:w}),R.t0;case 24:return R.next=26,new Promise(function(O){return setTimeout(O,Math.pow(2,C)*100)});case 26:R.next=3;break;case 28:return R.abrupt("return",null);case 29:case"end":return R.stop()}},p,null,[[4,18]])})),c.apply(this,arguments)}function u(p){return typeof window>"u"?"".concat(p.baseUrlServer).concat(p.basePathServer):p.basePath}function d(){return Math.floor(Date.now()/1e3)}function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"nextauth.message";return{receive:function(g){var y=function(x){var b;if(x.key===p){var _=JSON.parse((b=x.newValue)!==null&&b!==void 0?b:"{}");_?.event!=="session"||!(_!=null&&_.data)||g(_)}};return window.addEventListener("storage",y),function(){return window.removeEventListener("storage",y)}},post:function(g){if(!(typeof window>"u"))try{localStorage.setItem(p,JSON.stringify(a(a({},g),{},{timestamp:d()})))}catch{}}}}return Yu}var yM={},QB;function u6e(){return QB||(QB=1,Object.defineProperty(yM,"__esModule",{value:!0})),yM}var XB;function d6e(){return XB||(XB=1,function(e){var t={},n=QC(),r=Qv();Object.defineProperty(e,"__esModule",{value:!0});var s={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};e.SessionContext=void 0,e.SessionProvider=Y,e.getCsrfToken=I,e.getProviders=F,e.getSession=P,e.signIn=V,e.signOut=G,e.useSession=O;var a=n(XC()),o=n(ZC()),l=n(JC()),c=n(QTe()),u=C(dh()),d=C(i6e()),m=n(l6e()),p=c6e(),h=TMe(),g=u6e();Object.keys(g).forEach(function(W){W==="default"||W==="__esModule"||Object.prototype.hasOwnProperty.call(s,W)||W in e&&e[W]===g[W]||Object.defineProperty(e,W,{enumerable:!0,get:function(){return g[W]}})});var y,v,x,b,_;function w(W){if(typeof WeakMap!="function")return null;var H=new WeakMap,Z=new WeakMap;return(w=function(q){return q?Z:H})(W)}function C(W,H){if(W&&W.__esModule)return W;if(W===null||r(W)!="object"&&typeof W!="function")return{default:W};var Z=w(H);if(Z&&Z.has(W))return Z.get(W);var re={__proto__:null},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in W)if(J!=="default"&&{}.hasOwnProperty.call(W,J)){var te=q?Object.getOwnPropertyDescriptor(W,J):null;te&&(te.get||te.set)?Object.defineProperty(re,J,te):re[J]=W[J]}return re.default=W,Z&&Z.set(W,re),re}function S(W,H){var Z=Object.keys(W);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(W);H&&(re=re.filter(function(q){return Object.getOwnPropertyDescriptor(W,q).enumerable})),Z.push.apply(Z,re)}return Z}function E(W){for(var H=1;H<arguments.length;H++){var Z=arguments[H]!=null?arguments[H]:{};H%2?S(Object(Z),!0).forEach(function(re){(0,o.default)(W,re,Z[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(Z)):S(Object(Z)).forEach(function(re){Object.defineProperty(W,re,Object.getOwnPropertyDescriptor(Z,re))})}return W}var M={baseUrl:(0,m.default)((y=t.NEXTAUTH_URL)!==null&&y!==void 0?y:t.VERCEL_URL).origin,basePath:(0,m.default)(t.NEXTAUTH_URL).path,baseUrlServer:(0,m.default)((v=(x=t.NEXTAUTH_URL_INTERNAL)!==null&&x!==void 0?x:t.NEXTAUTH_URL)!==null&&v!==void 0?v:t.VERCEL_URL).origin,basePathServer:(0,m.default)((b=t.NEXTAUTH_URL_INTERNAL)!==null&&b!==void 0?b:t.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},k=(0,p.BroadcastChannel)(),T=(0,d.proxyLogger)(d.default,M.basePath);function j(){var W=u.useState(typeof navigator<"u"?navigator.onLine:!1),H=(0,c.default)(W,2),Z=H[0],re=H[1],q=function(){return re(!0)},J=function(){return re(!1)};return u.useEffect(function(){return window.addEventListener("online",q),window.addEventListener("offline",J),function(){window.removeEventListener("online",q),window.removeEventListener("offline",J)}},[]),Z}var R=e.SessionContext=(_=u.createContext)===null||_===void 0?void 0:_.call(u,void 0);function O(W){if(!R)throw new Error("React Context is unavailable in Server Components");var H=u.useContext(R),Z=W??{},re=Z.required,q=Z.onUnauthenticated,J=re&&H.status==="unauthenticated";return u.useEffect(function(){if(J){var te="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));q?q():window.location.href=te}},[J,q]),J?{data:H.data,update:H.update,status:"loading"}:H}function P(W){return N.apply(this,arguments)}function N(){return N=(0,l.default)(a.default.mark(function W(H){var Z,re;return a.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,p.fetchData)("session",M,T,H);case 2:return re=J.sent,(!((Z=H?.broadcast)!==null&&Z!==void 0)||Z)&&k.post({event:"session",data:{trigger:"getSession"}}),J.abrupt("return",re);case 5:case"end":return J.stop()}},W)})),N.apply(this,arguments)}function I(W){return D.apply(this,arguments)}function D(){return D=(0,l.default)(a.default.mark(function W(H){var Z;return a.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,p.fetchData)("csrf",M,T,H);case 2:return Z=q.sent,q.abrupt("return",Z?.csrfToken);case 4:case"end":return q.stop()}},W)})),D.apply(this,arguments)}function F(){return B.apply(this,arguments)}function B(){return B=(0,l.default)(a.default.mark(function W(){return a.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,p.fetchData)("providers",M,T);case 2:return Z.abrupt("return",Z.sent);case 3:case"end":return Z.stop()}},W)})),B.apply(this,arguments)}function V(W,H,Z){return $.apply(this,arguments)}function $(){return $=(0,l.default)(a.default.mark(function W(H,Z,re){var q,J,te,se,de,fe,ve,ue,ie,be,Se,Ce,ke,Re,je,ct,tt;return a.default.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return q=Z??{},J=q.callbackUrl,te=J===void 0?window.location.href:J,se=q.redirect,de=se===void 0?!0:se,fe=(0,p.apiBaseUrl)(M),we.next=4,F();case 4:if(ve=we.sent,ve){we.next=8;break}return window.location.href="".concat(fe,"/error"),we.abrupt("return");case 8:if(!(!H||!(H in ve))){we.next=11;break}return window.location.href="".concat(fe,"/signin?").concat(new URLSearchParams({callbackUrl:te})),we.abrupt("return");case 11:return ue=ve[H].type==="credentials",ie=ve[H].type==="email",be=ue||ie,Se="".concat(fe,"/").concat(ue?"callback":"signin","/").concat(H),Ce="".concat(Se).concat(re?"?".concat(new URLSearchParams(re)):""),we.t0=fetch,we.t1=Ce,we.t2={"Content-Type":"application/x-www-form-urlencoded"},we.t3=URLSearchParams,we.t4=E,we.t5=E({},Z),we.t6={},we.next=25,I();case 25:return we.t7=we.sent,we.t8=te,we.t9={csrfToken:we.t7,callbackUrl:we.t8,json:!0},we.t10=(0,we.t4)(we.t5,we.t6,we.t9),we.t11=new we.t3(we.t10),we.t12={method:"post",headers:we.t2,body:we.t11},we.next=33,(0,we.t0)(we.t1,we.t12);case 33:return ke=we.sent,we.next=36,ke.json();case 36:if(Re=we.sent,!(de||!be)){we.next=42;break}return ct=(je=Re.url)!==null&&je!==void 0?je:te,window.location.href=ct,ct.includes("#")&&window.location.reload(),we.abrupt("return");case 42:if(tt=new URL(Re.url).searchParams.get("error"),!ke.ok){we.next=46;break}return we.next=46,k.post({event:"session",data:{trigger:"signin"}}),M._getSession({event:"storage"});case 46:return we.abrupt("return",{error:tt,status:ke.status,ok:ke.ok,url:tt?null:Re.url});case 47:case"end":return we.stop()}},W)})),$.apply(this,arguments)}function G(W){return X.apply(this,arguments)}function X(){return X=(0,l.default)(a.default.mark(function W(H){var Z,re,q,J,te,se,de,fe,ve,ue;return a.default.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return re=H??{},q=re.callbackUrl,J=q===void 0?window.location.href:q,te=(0,p.apiBaseUrl)(M),be.t0={"Content-Type":"application/x-www-form-urlencoded"},be.t1=URLSearchParams,be.next=6,I();case 6:return be.t2=be.sent,be.t3=J,be.t4={csrfToken:be.t2,callbackUrl:be.t3,json:!0},be.t5=new be.t1(be.t4),se={method:"post",headers:be.t0,body:be.t5},be.next=13,fetch("".concat(te,"/signout"),se);case 13:return de=be.sent,be.next=16,de.json();case 16:if(fe=be.sent,k.post({event:"session",data:{trigger:"signout"}}),!(!((Z=H?.redirect)!==null&&Z!==void 0)||Z)){be.next=23;break}return ue=(ve=fe.url)!==null&&ve!==void 0?ve:J,window.location.href=ue,ue.includes("#")&&window.location.reload(),be.abrupt("return");case 23:return be.next=25,M._getSession({event:"storage"});case 25:return be.abrupt("return",fe);case 26:case"end":return be.stop()}},W)})),X.apply(this,arguments)}function Y(W){if(!R)throw new Error("React Context is unavailable in Server Components");var H=W.children,Z=W.basePath,re=W.refetchInterval,q=W.refetchWhenOffline;Z&&(M.basePath=Z);var J=W.session!==void 0;M._lastSync=J?(0,p.now)():0;var te=u.useState(function(){return J&&(M._session=W.session),W.session}),se=(0,c.default)(te,2),de=se[0],fe=se[1],ve=u.useState(!J),ue=(0,c.default)(ve,2),ie=ue[0],be=ue[1];u.useEffect(function(){return M._getSession=(0,l.default)(a.default.mark(function Re(){var je,ct,tt,ut=arguments;return a.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(je=ut.length>0&&ut[0]!==void 0?ut[0]:{},ct=je.event,Ue.prev=1,tt=ct==="storage",!(tt||M._session===void 0)){Ue.next=10;break}return M._lastSync=(0,p.now)(),Ue.next=7,P({broadcast:!tt});case 7:return M._session=Ue.sent,fe(M._session),Ue.abrupt("return");case 10:if(!(!ct||M._session===null||(0,p.now)()<M._lastSync)){Ue.next=12;break}return Ue.abrupt("return");case 12:return M._lastSync=(0,p.now)(),Ue.next=15,P();case 15:M._session=Ue.sent,fe(M._session),Ue.next=22;break;case 19:Ue.prev=19,Ue.t0=Ue.catch(1),T.error("CLIENT_SESSION_ERROR",Ue.t0);case 22:return Ue.prev=22,be(!1),Ue.finish(22);case 25:case"end":return Ue.stop()}},Re,null,[[1,19,22,25]])})),M._getSession(),function(){M._lastSync=0,M._session=void 0,M._getSession=function(){}}},[]),u.useEffect(function(){var Re=k.receive(function(){return M._getSession({event:"storage"})});return function(){return Re()}},[]),u.useEffect(function(){var Re=W.refetchOnWindowFocus,je=Re===void 0?!0:Re,ct=function(){je&&document.visibilityState==="visible"&&M._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",ct,!1),function(){return document.removeEventListener("visibilitychange",ct,!1)}},[W.refetchOnWindowFocus]);var Se=j(),Ce=q!==!1||Se;u.useEffect(function(){if(re&&Ce){var Re=setInterval(function(){M._session&&M._getSession({event:"poll"})},re*1e3);return function(){return clearInterval(Re)}}},[re,Ce]);var ke=u.useMemo(function(){return{data:de,status:ie?"loading":de?"authenticated":"unauthenticated",update:function(je){return(0,l.default)(a.default.mark(function ct(){var tt;return a.default.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(!(ie||!de)){we.next=2;break}return we.abrupt("return");case 2:return be(!0),we.t0=p.fetchData,we.t1=M,we.t2=T,we.next=8,I();case 8:return we.t3=we.sent,we.t4=je,we.t5={csrfToken:we.t3,data:we.t4},we.t6={body:we.t5},we.t7={req:we.t6},we.next=15,(0,we.t0)("session",we.t1,we.t2,we.t7);case 15:return tt=we.sent,be(!1),tt&&(fe(tt),k.post({event:"session",data:{trigger:"getSession"}})),we.abrupt("return",tt);case 19:case"end":return we.stop()}},ct)}))()}}},[de,ie]);return(0,h.jsx)(R.Provider,{value:ke,children:H})}}(z5)),z5}var Xv=d6e();const ZR="pplx-next-auth-session";let zx=null;const f6e=()=>{try{const e=Ae.getItem(ZR);return e?JSON.parse(e):null}catch{return null}},AN=e=>{e&&Ae.setItem(ZR,JSON.stringify(e))},m6e=()=>{Ae.removeItem(ZR)},p6e=(e=!1)=>{zx??=Xv.getSession().then(n=>(AN(n),n)).catch(n=>{throw AN(null),n}).finally(()=>{zx=null});const t=f6e();return t&&(e||new Date(t.expires)>new Date)?{cachedSession:t,sessionFetchPromise:zx}:{cachedSession:null,sessionFetchPromise:zx}},Ct=()=>{const{data:e,status:t,update:n}=Xv.useSession(),[r,s]=f.useState(e),a=f.useCallback(async()=>{const o=await n();return s(l=>ms(o?.user,l?.user)?l:o),o},[n]);return f.useEffect(()=>{t!=="loading"&&(s(o=>ms(e?.user,o?.user)?o:e),e?AN(e):m6e())},[e,t]),f.useMemo(()=>({session:r,update:a,status:t}),[r,a,t])};function eS(){const{session:e}=Ct(),t=["pplx-dev@example.com","pplx-dev-pro@example.com","pplx-dev-enterprise@example.com","fe-test-user@example.com"],n=e?.user?.email??"none";return n.endsWith("@perplexity.ai")||t.includes(n)}function Qe(){const{session:e}=Ct(),t=e!==null&&typeof e<"u";return f.useEffect(()=>{t&&dte()},[t]),t}function h6e(){if(typeof window>"u")return!1;const e=window;return!!(e?.webkit?.messageHandlers?.pplx?.postMessage||e?.Android?.pplx?.postMessage)}function tS({type:e,data:t}){if(typeof window>"u")return!1;const n=window,r={type:e,data:t};return n?.webkit?.messageHandlers?.pplx?.postMessage?(n.webkit.messageHandlers.pplx.postMessage(r),!0):n?.Android?.pplx?.postMessage?(n.Android.pplx.postMessage(r),!0):!1}function g6e({query:e}){return tS({type:"pplx.ask",data:{query:e}})}function Tne(e,t){const n=e.split(".").map(Number),r=t.split(".").map(Number);for(let s=0;s<3;s++){const a=n[s],o=r[s];if(a===void 0||o===void 0)return 0;if(a>o)return 1;if(a<o)return-1}return 0}function y6e(e,t){try{return!e||!t?!0:Tne(e,t)===-1}catch(n){return ee.error("Error comparing canonical page semver",{e:n}),!0}}function EOt(e,t,n){try{if(!e||!t)return!1;const r=n[t];return r?Tne(e,r)>=0:!0}catch(r){return ee.error("Error comparing canonical page semver",{e:r}),!1}}const Nne=f.createContext({inApp:!1,preferredColorScheme:null,deviceId:null,appVersion:null,isIOS:!1,isAndroid:!1,client:null}),v6e=A.memo(({children:e,inApp:t})=>{const n=Dt(),r=Nt(),s=n?.get("mobile.deviceId")||null,a=n?.get("mobile.appVersion")||null,o=n?.get("mobile.preferredColorScheme")||null,l=n?.get("mobile.client")||null,c=l==="ios",u=l==="android";return f.useEffect(()=>{if(!r?.startsWith("/app")||!n)return;const d=["mobile.","version"],m=new URL(window.location.href.replace("/app",""));m.searchParams.forEach((p,h)=>{d.includes(h)&&m.searchParams.delete(h)}),m.searchParams.set("referrer","canonical"),tS({type:"pplx.url.share",data:{url:m.href}})},[r,n]),i.jsx(Nne.Provider,{value:{inApp:t,preferredColorScheme:o,deviceId:s,appVersion:a,isIOS:c,isAndroid:u,client:l},children:e})});v6e.displayName="CanonicalPageProvider";function _l(){return f.useContext(Nne)}const M0=f.createContext({});function Zv(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const JR=typeof window<"u",nS=JR?f.useLayoutEffect:f.useEffect,rS=f.createContext(null);function eI(e,t){e.indexOf(t)===-1&&e.push(t)}function Jv(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const cc=(e,t,n)=>n>t?t:n<e?e:n;let tI=()=>{};const uc={},Ane=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function jne(e){return typeof e=="object"&&e!==null}const Rne=e=>/^0[^.\s]+$/u.test(e);function nI(e){let t;return()=>(t===void 0&&(t=e()),t)}const Mo=e=>e,x6e=(e,t)=>n=>t(e(n)),e1=(...e)=>e.reduce(x6e),pp=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class rI{constructor(){this.subscriptions=[]}add(t){return eI(this.subscriptions,t),()=>Jv(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ai=e=>e*1e3,Zi=e=>e/1e3;function Ine(e,t){return t?e*(1e3/t):0}const b6e=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e},Pne=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,_6e=1e-7,w6e=12;function C6e(e,t,n,r,s){let a,o,l=0;do o=t+(n-t)/2,a=Pne(o,r,s)-e,a>0?n=o:t=o;while(Math.abs(a)>_6e&&++l<w6e);return o}function Ta(e,t,n,r){if(e===t&&n===r)return Mo;const s=a=>C6e(a,0,1,e,n);return a=>a===0||a===1?a:Pne(s(a),t,r)}const One=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Lne=e=>t=>1-e(1-t),Dne=Ta(.33,1.53,.69,.99),sI=Lne(Dne),Fne=One(sI),aI=e=>(e*=2)<1?.5*sI(e):.5*(2-Math.pow(2,-10*(e-1))),oI=e=>1-Math.sin(Math.acos(e)),Une=Lne(oI),Bne=One(oI),Vne=Ta(.42,0,1,1),na=Ta(0,0,.58,1),_a=Ta(.42,0,.58,1),Wne=e=>Array.isArray(e)&&typeof e[0]!="number";function $ne(e,t){return Wne(e)?e[b6e(0,e.length,t)]:e}const Hne=e=>Array.isArray(e)&&typeof e[0]=="number",S6e={linear:Mo,easeIn:Vne,easeInOut:_a,easeOut:na,circIn:oI,circInOut:Bne,circOut:Une,backIn:sI,backInOut:Fne,backOut:Dne,anticipate:aI},E6e=e=>typeof e=="string",ZB=e=>{if(Hne(e)){tI(e.length===4);const[t,n,r,s]=e;return Ta(t,n,r,s)}else if(E6e(e))return S6e[e];return e},Gx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function M6e(e,t){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,m=!1,p=!1)=>{const g=p&&s?n:r;return m&&o.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(l=d,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const k6e=40;function zne(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Gx.reduce((_,w)=>(_[w]=M6e(a),_),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:m,preRender:p,render:h,postRender:g}=o,y=()=>{const _=uc.useManualTiming?s.timestamp:performance.now();n=!1,uc.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,k6e),1)),s.timestamp=_,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),m.process(s),p.process(s),h.process(s),g.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(y))},v=()=>{n=!0,r=!0,s.isProcessing||e(y)};return{schedule:Gx.reduce((_,w)=>{const C=o[w];return _[w]=(S,E=!1,M=!1)=>(n||v(),C.schedule(S,E,M)),_},{}),cancel:_=>{for(let w=0;w<Gx.length;w++)o[Gx[w]].cancel(_)},state:s,steps:o}}const{schedule:$n,cancel:dc,state:fs,steps:vM}=zne(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mo,!0);let R_;function T6e(){R_=void 0}const wa={now:()=>(R_===void 0&&wa.set(fs.isProcessing||uc.useManualTiming?fs.timestamp:performance.now()),R_),set:e=>{R_=e,queueMicrotask(T6e)}},Gne=e=>t=>typeof t=="string"&&t.startsWith(e),iI=Gne("--"),N6e=Gne("var(--"),lI=e=>N6e(e)?A6e.test(e.split("/*")[0].trim()):!1,A6e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},k0={...gh,transform:e=>cc(0,1,e)},qx={...gh,default:1},Ly=e=>Math.round(e*1e5)/1e5,cI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function j6e(e){return e==null}const R6e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uI=(e,t)=>n=>!!(typeof n=="string"&&R6e.test(n)&&n.startsWith(e)||t&&!j6e(n)&&Object.prototype.hasOwnProperty.call(n,t)),qne=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,o,l]=r.match(cI);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},I6e=e=>cc(0,255,e),xM={...gh,transform:e=>Math.round(I6e(e))},Sd={test:uI("rgb","red"),parse:qne("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+xM.transform(e)+", "+xM.transform(t)+", "+xM.transform(n)+", "+Ly(k0.transform(r))+")"};function P6e(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const jN={test:uI("#"),parse:P6e,transform:Sd.transform},t1=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Bc=t1("deg"),Ji=t1("%"),jt=t1("px"),O6e=t1("vh"),L6e=t1("vw"),JB={...Ji,parse:e=>Ji.parse(e)/100,transform:e=>Ji.transform(e*100)},wm={test:uI("hsl","hue"),parse:qne("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ji.transform(Ly(t))+", "+Ji.transform(Ly(n))+", "+Ly(k0.transform(r))+")"},Tr={test:e=>Sd.test(e)||jN.test(e)||wm.test(e),parse:e=>Sd.test(e)?Sd.parse(e):wm.test(e)?wm.parse(e):jN.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Sd.transform(e):wm.transform(e),getAnimatableNone:e=>{const t=Tr.parse(e);return t.alpha=0,Tr.transform(t)}},D6e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function F6e(e){return isNaN(e)&&typeof e=="string"&&(e.match(cI)?.length||0)+(e.match(D6e)?.length||0)>0}const Kne="number",Yne="color",U6e="var",B6e="var(",eV="${}",V6e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function T0(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=t.replace(V6e,c=>(Tr.test(c)?(r.color.push(a),s.push(Yne),n.push(Tr.parse(c))):c.startsWith(B6e)?(r.var.push(a),s.push(U6e),n.push(c)):(r.number.push(a),s.push(Kne),n.push(parseFloat(c))),++a,eV)).split(eV);return{values:n,split:l,indexes:r,types:s}}function Qne(e){return T0(e).values}function Xne(e){const{split:t,types:n}=T0(e),r=t.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],s[o]!==void 0){const l=n[o];l===Kne?a+=Ly(s[o]):l===Yne?a+=Tr.transform(s[o]):a+=s[o]}return a}}const W6e=e=>typeof e=="number"?0:Tr.test(e)?Tr.getAnimatableNone(e):e;function $6e(e){const t=Qne(e);return Xne(e)(t.map(W6e))}const fu={test:F6e,parse:Qne,createTransformer:Xne,getAnimatableNone:$6e};function bM(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function H6e({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,o=0;if(!t)s=a=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=bM(c,l,e+1/3),a=bM(c,l,e),o=bM(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Sw(e,t){return n=>n>0?t:e}const lr=(e,t,n)=>e+(t-e)*n,_M=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},z6e=[jN,Sd,wm],G6e=e=>z6e.find(t=>t.test(e));function tV(e){const t=G6e(e);if(!t)return!1;let n=t.parse(e);return t===wm&&(n=H6e(n)),n}const nV=(e,t)=>{const n=tV(e),r=tV(t);if(!n||!r)return Sw(e,t);const s={...n};return a=>(s.red=_M(n.red,r.red,a),s.green=_M(n.green,r.green,a),s.blue=_M(n.blue,r.blue,a),s.alpha=lr(n.alpha,r.alpha,a),Sd.transform(s))},RN=new Set(["none","hidden"]);function q6e(e,t){return RN.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function K6e(e,t){return n=>lr(e,t,n)}function dI(e){return typeof e=="number"?K6e:typeof e=="string"?lI(e)?Sw:Tr.test(e)?nV:X6e:Array.isArray(e)?Zne:typeof e=="object"?Tr.test(e)?nV:Y6e:Sw}function Zne(e,t){const n=[...e],r=n.length,s=e.map((a,o)=>dI(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function Y6e(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=dI(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function Q6e(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][r[a]],l=e.values[o]??0;n[s]=l,r[a]++}return n}const X6e=(e,t)=>{const n=fu.createTransformer(t),r=T0(e),s=T0(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?RN.has(e)&&!s.values.length||RN.has(t)&&!r.values.length?q6e(e,t):e1(Zne(Q6e(r,s),s.values),n):Sw(e,t)};function Jne(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?lr(e,t,n):dI(e)(e,t)}const Z6e=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>$n.update(t,n),stop:()=>dc(t),now:()=>fs.isProcessing?fs.timestamp:wa.now()}},ere=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ew=2e4;function fI(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Ew;)t+=n,r=e.next(t);return t>=Ew?1/0:t}function tre(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(fI(r),Ew);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:Zi(s)}}const J6e=5;function nre(e,t,n){const r=Math.max(t-J6e,0);return Ine(n-e(r),t-r)}const yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rV=.001;function eNe({duration:e=yr.duration,bounce:t=yr.bounce,velocity:n=yr.velocity,mass:r=yr.mass}){let s,a,o=1-t;o=cc(yr.minDamping,yr.maxDamping,o),e=cc(yr.minDuration,yr.maxDuration,Zi(e)),o<1?(s=u=>{const d=u*o,m=d*e,p=d-n,h=IN(u,o),g=Math.exp(-m);return rV-p/h*g},a=u=>{const m=u*o*e,p=m*n+n,h=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-m),y=IN(Math.pow(u,2),o);return(-s(u)+rV>0?-1:1)*((p-h)*g)/y}):(s=u=>{const d=Math.exp(-u*e),m=(u-n)*e+1;return-.001+d*m},a=u=>{const d=Math.exp(-u*e),m=(n-u)*(e*e);return d*m});const l=5/e,c=nNe(s,a,l);if(e=ai(e),isNaN(c))return{stiffness:yr.stiffness,damping:yr.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const tNe=12;function nNe(e,t,n){let r=n;for(let s=1;s<tNe;s++)r=r-e(r)/t(r);return r}function IN(e,t){return e*Math.sqrt(1-t*t)}const rNe=["duration","bounce"],sNe=["stiffness","damping","mass"];function sV(e,t){return t.some(n=>e[n]!==void 0)}function aNe(e){let t={velocity:yr.velocity,stiffness:yr.stiffness,damping:yr.damping,mass:yr.mass,isResolvedFromDuration:!1,...e};if(!sV(e,sNe)&&sV(e,rNe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*cc(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:yr.mass,stiffness:s,damping:a}}else{const n=eNe(e);t={...t,...n,mass:yr.mass},t.isResolvedFromDuration=!0}return t}function N0(e=yr.visualDuration,t=yr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:m,velocity:p,isResolvedFromDuration:h}=aNe({...n,velocity:-Zi(n.velocity||0)}),g=p||0,y=u/(2*Math.sqrt(c*d)),v=o-a,x=Zi(Math.sqrt(c/d)),b=Math.abs(v)<5;r||(r=b?yr.restSpeed.granular:yr.restSpeed.default),s||(s=b?yr.restDelta.granular:yr.restDelta.default);let _;if(y<1){const C=IN(x,y);_=S=>{const E=Math.exp(-y*x*S);return o-E*((g+y*x*v)/C*Math.sin(C*S)+v*Math.cos(C*S))}}else if(y===1)_=C=>o-Math.exp(-x*C)*(v+(g+x*v)*C);else{const C=x*Math.sqrt(y*y-1);_=S=>{const E=Math.exp(-y*x*S),M=Math.min(C*S,300);return o-E*((g+y*x*v)*Math.sinh(M)+C*v*Math.cosh(M))/C}}const w={calculatedDuration:h&&m||null,next:C=>{const S=_(C);if(h)l.done=C>=m;else{let E=C===0?g:0;y<1&&(E=C===0?ai(g):nre(_,C,S));const M=Math.abs(E)<=r,k=Math.abs(o-S)<=s;l.done=M&&k}return l.value=l.done?o:S,l},toString:()=>{const C=Math.min(fI(w),Ew),S=ere(E=>w.next(C*E).value,C,30);return C+"ms "+S},toTransition:()=>{}};return w}N0.applyToOptions=e=>{const t=tre(e,100,N0);return e.ease=t.ease,e.duration=ai(t.duration),e.type="keyframes",e};function PN({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const m=e[0],p={done:!1,value:m},h=M=>l!==void 0&&M<l||c!==void 0&&M>c,g=M=>l===void 0?c:c===void 0||Math.abs(l-M)<Math.abs(c-M)?l:c;let y=n*t;const v=m+y,x=o===void 0?v:o(v);x!==v&&(y=x-m);const b=M=>-y*Math.exp(-M/r),_=M=>x+b(M),w=M=>{const k=b(M),T=_(M);p.done=Math.abs(k)<=u,p.value=p.done?x:T};let C,S;const E=M=>{h(p.value)&&(C=M,S=N0({keyframes:[p.value,g(p.value)],velocity:nre(_,M,p.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:M=>{let k=!1;return!S&&C===void 0&&(k=!0,w(M),E(M)),C!==void 0&&M>=C?S.next(M-C):(!k&&w(M),p)}}}function oNe(e,t,n){const r=[],s=n||uc.mix||Jne,a=e.length-1;for(let o=0;o<a;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Mo:t;l=e1(c,l)}r.push(l)}return r}function rre(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(tI(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=oNe(t,r,s),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(d<e[m+1]);m++);const p=pp(e[m],e[m+1],d);return l[m](p)};return n?d=>u(cc(e[0],e[a-1],d)):u}function sre(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=pp(0,t,r);e.push(lr(n,1,s))}}function are(e){const t=[0];return sre(t,e.length-1),t}function iNe(e,t){return e.map(n=>n*t)}function lNe(e,t){return e.map(()=>t||_a).splice(0,e.length-1)}function Dy({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Wne(r)?r.map(ZB):ZB(r),a={done:!1,value:t[0]},o=iNe(n&&n.length===t.length?n:are(t),e),l=rre(o,t,{ease:Array.isArray(s)?s:lNe(t,s)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const cNe=e=>e!==null;function mI(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(cNe),l=s<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const uNe={decay:PN,inertia:PN,tween:Dy,keyframes:Dy,spring:N0};function ore(e){typeof e.type=="string"&&(e.type=uNe[e.type])}class pI{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const dNe=e=>e/100;class sS extends pI{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==wa.now()&&this.tick(wa.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ore(t);const{type:n=Dy,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=t;let{keyframes:l}=t;const c=n||Dy;c!==Dy&&typeof l[0]!="number"&&(this.mixKeyframes=e1(dNe,Jne(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=fI(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:p,repeatDelay:h,type:g,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,w=r;if(m){const M=Math.min(this.currentTime,s)/l;let k=Math.floor(M),T=M%1;!T&&M>=1&&(T=1),T===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(p==="reverse"?(T=1-T,h&&(T-=h/l)):p==="mirror"&&(w=o)),_=cc(0,1,T)*l}const C=b?{done:!1,value:d[0]}:w.next(_);a&&(C.value=a(C.value));let{done:S}=C;!b&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&g!==PN&&(C.value=mI(d,this.options,v,this.speed)),y&&y(C.value),E&&this.finish(),C}then(t,n){return this.finished.then(t,n)}get duration(){return Zi(this.calculatedDuration)}get time(){return Zi(this.currentTime)}set time(t){t=ai(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(wa.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Zi(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Z6e,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(wa.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function fNe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ed=e=>e*180/Math.PI,ON=e=>{const t=Ed(Math.atan2(e[1],e[0]));return LN(t)},mNe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ON,rotateZ:ON,skewX:e=>Ed(Math.atan(e[1])),skewY:e=>Ed(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},LN=e=>(e=e%360,e<0&&(e+=360),e),aV=ON,oV=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),iV=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),pNe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oV,scaleY:iV,scale:e=>(oV(e)+iV(e))/2,rotateX:e=>LN(Ed(Math.atan2(e[6],e[5]))),rotateY:e=>LN(Ed(Math.atan2(-e[2],e[0]))),rotateZ:aV,rotate:aV,skewX:e=>Ed(Math.atan(e[4])),skewY:e=>Ed(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function DN(e){return e.includes("scale")?1:0}function FN(e,t){if(!e||e==="none")return DN(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=pNe,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=mNe,s=l}if(!s)return DN(t);const a=r[t],o=s[1].split(",").map(gNe);return typeof a=="function"?a(o):o[a]}const hNe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return FN(n,t)};function gNe(e){return parseFloat(e.trim())}const yh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vh=new Set(yh),lV=e=>e===gh||e===jt,yNe=new Set(["x","y","z"]),vNe=yh.filter(e=>!yNe.has(e));function xNe(e){const t=[];return vNe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Id={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>FN(t,"x"),y:(e,{transform:t})=>FN(t,"y")};Id.translateX=Id.x;Id.translateY=Id.y;const Pd=new Set;let UN=!1,BN=!1,VN=!1;function ire(){if(BN){const e=Array.from(Pd).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=xNe(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}BN=!1,UN=!1,Pd.forEach(e=>e.complete(VN)),Pd.clear()}function lre(){Pd.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(BN=!0)})}function bNe(){VN=!0,lre(),ire(),VN=!1}class hI{constructor(t,n,r,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Pd.add(this),UN||(UN=!0,$n.read(lre),$n.resolveKeyframes(ire))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const a=s?.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),s&&a===void 0&&s.set(t[0])}fNe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Pd.delete(this)}cancel(){this.state==="scheduled"&&(Pd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _Ne=e=>e.startsWith("--");function wNe(e,t,n){_Ne(t)?e.style.setProperty(t,n):e.style[t]=n}const CNe=nI(()=>window.ScrollTimeline!==void 0),SNe={};function ENe(e,t){const n=nI(e);return()=>SNe[t]??n()}const cre=ENe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),py=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,cV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:py([0,.65,.55,1]),circOut:py([.55,0,1,.45]),backIn:py([.31,.01,.66,-.59]),backOut:py([.33,1.53,.69,.99])};function ure(e,t){if(e)return typeof e=="function"?cre()?ere(e,t):"ease-out":Hne(e)?py(e):Array.isArray(e)?e.map(n=>ure(n,t)||cV.easeOut):cV[e]}function MNe(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const m=ure(l,s);Array.isArray(m)&&(d.easing=m);const p={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(d,p)}function gI(e){return typeof e=="function"&&"applyToOptions"in e}function kNe({type:e,...t}){return gI(e)&&cre()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class TNe extends pI{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,tI(typeof t.type!="string");const u=kNe(t);this.animation=MNe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=mI(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):wNe(n,r,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Zi(Number(t))}get time(){return Zi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ai(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&CNe()?(this.animation.timeline=t,Mo):n(this)}}const dre={anticipate:aI,backInOut:Fne,circInOut:Bne};function NNe(e){return e in dre}function ANe(e){typeof e.ease=="string"&&NNe(e.ease)&&(e.ease=dre[e.ease])}const uV=10;class jNe extends TNe{constructor(t){ANe(t),ore(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new sS({...o,autoplay:!1}),c=ai(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-uV).value,l.sample(c).value,uV),l.stop()}}const dV=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fu.test(e)||e==="0")&&!e.startsWith("url("));function RNe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function INe(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=dV(s,t),l=dV(a,t);return!o||!l?!1:RNe(e)||(n==="spring"||gI(n))&&r}function WN(e){e.duration=0,e.type}const PNe=new Set(["opacity","clipPath","filter","transform"]),ONe=nI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function LNe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return ONe()&&n&&PNe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}const DNe=40;class FNe extends pI{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=wa.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:d,...m},h=d?.KeyframeResolver||hI;this.keyframeResolver=new h(l,(g,y,v)=>this.onKeyframesResolved(g,y,p,!v),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=wa.now(),INe(t,a,o,l)||((uc.instantAnimations||!c)&&d?.(mI(t,r,n)),t[0]=t[t.length-1],WN(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>DNe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},h=!u&&LNe(p)?new jNe({...p,element:p.motionValue.owner.current}):new sS(p);h.finished.then(()=>this.notifyFinished()).catch(Mo),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),bNe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}class UNe{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t){const n=this.animations.map(r=>r.attachTimeline(t));return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class BNe extends UNe{then(t,n){return this.finished.finally(t).then(()=>{})}}const VNe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WNe(e){const t=VNe.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function fre(e,t,n=1){const[r,s]=WNe(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return Ane(o)?parseFloat(o):o}return lI(s)?fre(s,t,n+1):s}function yI(e,t){return e?.[t]??e?.default??e}const mre=new Set(["width","height","top","left","right","bottom",...yh]),$Ne={test:e=>e==="auto",parse:e=>e},pre=e=>t=>t.test(e),hre=[gh,jt,Ji,Bc,L6e,O6e,$Ne],fV=e=>hre.find(pre(e));function HNe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Rne(e):!0}const zNe=new Set(["brightness","contrast","saturate","opacity"]);function GNe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(cI)||[];if(!r)return e;const s=n.replace(r,"");let a=zNe.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const qNe=/\b([a-z-]*)\(.*?\)/gu,$N={...fu,getAnimatableNone:e=>{const t=e.match(qNe);return t?t.map(GNe).join(" "):e}},mV={...gh,transform:Math.round},KNe={rotate:Bc,rotateX:Bc,rotateY:Bc,rotateZ:Bc,scale:qx,scaleX:qx,scaleY:qx,scaleZ:qx,skew:Bc,skewX:Bc,skewY:Bc,distance:jt,translateX:jt,translateY:jt,translateZ:jt,x:jt,y:jt,z:jt,perspective:jt,transformPerspective:jt,opacity:k0,originX:JB,originY:JB,originZ:jt},vI={borderWidth:jt,borderTopWidth:jt,borderRightWidth:jt,borderBottomWidth:jt,borderLeftWidth:jt,borderRadius:jt,radius:jt,borderTopLeftRadius:jt,borderTopRightRadius:jt,borderBottomRightRadius:jt,borderBottomLeftRadius:jt,width:jt,maxWidth:jt,height:jt,maxHeight:jt,top:jt,right:jt,bottom:jt,left:jt,padding:jt,paddingTop:jt,paddingRight:jt,paddingBottom:jt,paddingLeft:jt,margin:jt,marginTop:jt,marginRight:jt,marginBottom:jt,marginLeft:jt,backgroundPositionX:jt,backgroundPositionY:jt,...KNe,zIndex:mV,fillOpacity:k0,strokeOpacity:k0,numOctaves:mV},YNe={...vI,color:Tr,backgroundColor:Tr,outlineColor:Tr,fill:Tr,stroke:Tr,borderColor:Tr,borderTopColor:Tr,borderRightColor:Tr,borderBottomColor:Tr,borderLeftColor:Tr,filter:$N,WebkitFilter:$N},gre=e=>YNe[e];function yre(e,t){let n=gre(e);return n!==$N&&(n=fu),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const QNe=new Set(["auto","none","0"]);function XNe(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!QNe.has(a)&&T0(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=yre(n,s)}class ZNe extends hI{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),lI(u))){const d=fre(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!mre.has(r)||t.length!==2)return;const[s,a]=t,o=fV(s),l=fV(a);if(o!==l)if(lV(o)&&lV(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Id[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||HNe(t[s]))&&r.push(s);r.length&&XNe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Id[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Id[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function xI(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const vre=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function xre(e){return jne(e)&&"offsetHeight"in e}const pV=30,JNe=e=>!isNaN(parseFloat(e)),Fy={current:void 0};class eAe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=wa.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=wa.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=JNe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new rI);const r=this.events[t].add(n);return t==="change"?()=>{r(),$n.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return Fy.current&&Fy.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=wa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>pV)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pV);return Ine(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qd(e,t){return new eAe(e,t)}const{schedule:bI}=zne(queueMicrotask,!1),Qo={x:!1,y:!1};function bre(){return Qo.x||Qo.y}function tAe(e){return e==="x"||e==="y"?Qo[e]?null:(Qo[e]=!0,()=>{Qo[e]=!1}):Qo.x||Qo.y?null:(Qo.x=Qo.y=!0,()=>{Qo.x=Qo.y=!1})}function _re(e,t){const n=xI(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function hV(e){return!(e.pointerType==="touch"||bre())}function nAe(e,t,n={}){const[r,s,a]=_re(e,n),o=l=>{if(!hV(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=m=>{hV(m)&&(u(m),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",o,s)}),a}const wre=(e,t)=>t?e===t?!0:wre(e,t.parentElement):!1,_I=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,rAe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sAe(e){return rAe.has(e.tagName)||e.tabIndex!==-1}const I_=new WeakSet;function gV(e){return t=>{t.key==="Enter"&&e(t)}}function wM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const aAe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=gV(()=>{if(I_.has(n))return;wM(n,"down");const s=gV(()=>{wM(n,"up")}),a=()=>wM(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function yV(e){return _I(e)&&!bre()}function oAe(e,t,n={}){const[r,s,a]=_re(e,n),o=l=>{const c=l.currentTarget;if(!yV(l))return;I_.add(c);const u=t(c,l),d=(h,g)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),I_.has(c)&&I_.delete(c),yV(h)&&typeof u=="function"&&u(h,{success:g})},m=h=>{d(h,c===window||c===document||n.useGlobalTarget||wre(c,h.target))},p=h=>{d(h,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",p,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),xre(l)&&(l.addEventListener("focus",u=>aAe(u,s)),!sAe(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function wI(e){return jne(e)&&"ownerSVGElement"in e}function Cre(e){return wI(e)&&e.tagName==="svg"}function iAe(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=e[1+n],a=e[2+n],o=e[3+n],l=rre(s,a,o);return t?l(r):l}const Ar=e=>!!(e&&e.getVelocity);function lAe(e,t,n){const r=e.get();let s=null,a=r,o;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,c=()=>{s&&(s.stop(),s=null)},u=()=>{c(),s=new sS({keyframes:[xV(e.get()),xV(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:o})};if(e.attach((d,m)=>(a=d,o=p=>m(vV(p,l)),$n.postRender(u),e.get()),c),Ar(t)){const d=t.on("change",p=>e.set(vV(p,l))),m=e.on("destroy",d);return()=>{d(),m()}}return c}function vV(e,t){return t?e+t:e}function xV(e){return typeof e=="number"?e:parseFloat(e)}const cAe=[...hre,Tr,fu],uAe=e=>cAe.find(pre(e)),n1=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class dAe extends f.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=xre(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function fAe({children:e,isPresent:t,anchorX:n,root:r}){const s=f.useId(),a=f.useRef(null),o=f.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=f.useContext(n1);return f.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:m,right:p}=o.current;if(t||!a.current||!c||!u)return;const h=n==="left"?`left: ${m}`:`right: ${p}`;a.current.dataset.motionPopId=s;const g=document.createElement("style");l&&(g.nonce=l);const y=r??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${h}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),i.jsx(dAe,{isPresent:t,childRef:a,sizeRef:o,children:f.cloneElement(e,{ref:a})})}const mAe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o,anchorX:l,root:c})=>{const u=Zv(pAe),d=f.useId();let m=!0,p=f.useMemo(()=>(m=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:h=>{u.set(h,!0);for(const g of u.values())if(!g)return;r&&r()},register:h=>(u.set(h,!1),()=>u.delete(h))}),[n,u,r]);return a&&m&&(p={...p}),f.useMemo(()=>{u.forEach((h,g)=>u.set(g,!1))},[n]),f.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=i.jsx(fAe,{isPresent:n,anchorX:l,root:c,children:e})),i.jsx(rS.Provider,{value:p,children:e})};function pAe(){return new Map}function Sre(e=!0){const t=f.useContext(rS);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=f.useId();f.useEffect(()=>{if(e)return s(a)},[e]);const o=f.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,o]:[!0]}const Kx=e=>e.key||"";function bV(e){const t=[];return f.Children.forEach(e,n=>{f.isValidElement(n)&&t.push(n)}),t}const it=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=Sre(o),m=f.useMemo(()=>bV(e),[e]),p=o&&!u?[]:m.map(Kx),h=f.useRef(!0),g=f.useRef(m),y=Zv(()=>new Map),[v,x]=f.useState(m),[b,_]=f.useState(m);nS(()=>{h.current=!1,g.current=m;for(let S=0;S<b.length;S++){const E=Kx(b[S]);p.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[b,p.length,p.join("-")]);const w=[];if(m!==v){let S=[...m];for(let E=0;E<b.length;E++){const M=b[E],k=Kx(M);p.includes(k)||(S.splice(E,0,M),w.push(M))}return a==="wait"&&w.length&&(S=w),_(bV(S)),x(m),null}const{forceRender:C}=f.useContext(M0);return i.jsx(i.Fragment,{children:b.map(S=>{const E=Kx(S),M=o&&!u?!1:m===b||p.includes(E),k=()=>{if(y.has(E))y.set(E,!0);else return;let T=!0;y.forEach(j=>{j||(T=!1)}),T&&(C?.(),_(g.current),o&&d?.(),r&&r())};return i.jsx(mAe,{isPresent:M,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:M?void 0:k,anchorX:l,children:S},E)})})},hAe=f.createContext(null);function gAe(){const e=f.useRef(!1);return nS(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function yAe(){const e=gAe(),[t,n]=f.useState(0),r=f.useCallback(()=>{e.current&&n(t+1)},[t]);return[f.useCallback(()=>$n.postRender(r),[r]),t]}const vAe=e=>!e.isLayoutDirty&&e.willUpdate(!1);function _V(){const e=new Set,t=new WeakMap,n=()=>e.forEach(vAe);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);const s=t.get(r);s&&(s(),t.delete(r)),n()},dirty:n}}const Ere=e=>e===!0,xAe=e=>Ere(e===!0)||e==="id",wl=({children:e,id:t,inherit:n=!0})=>{const r=f.useContext(M0),s=f.useContext(hAe),[a,o]=yAe(),l=f.useRef(null),c=r.id||s;l.current===null&&(xAe(n)&&c&&(t=t?c+"-"+t:c),l.current={id:t,group:Ere(n)&&r.group||_V()});const u=f.useMemo(()=>({...l.current,forceRender:a}),[o]);return i.jsx(M0.Provider,{value:u,children:e})},Mre=f.createContext({strict:!1}),wV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hp={};for(const e in wV)hp[e]={isEnabled:t=>wV[e].some(n=>!!t[n])};function bAe(e){for(const t in e)hp[t]={...hp[t],...e[t]}}const _Ae=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_Ae.has(e)}let kre=e=>!Mw(e);function wAe(e){typeof e=="function"&&(kre=t=>t.startsWith("on")?!Mw(t):e(t))}try{wAe(require("@emotion/is-prop-valid").default)}catch{}function CAe(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(kre(s)||n===!0&&Mw(s)||!t&&!Mw(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const aS=f.createContext({});function oS(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function A0(e){return typeof e=="string"||Array.isArray(e)}const CI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SI=["initial",...CI];function iS(e){return oS(e.animate)||SI.some(t=>A0(e[t]))}function Tre(e){return!!(iS(e)||e.variants)}function SAe(e,t){if(iS(e)){const{initial:n,animate:r}=e;return{initial:n===!1||A0(n)?n:void 0,animate:A0(r)?r:void 0}}return e.inherit!==!1?t:{}}function EAe(e){const{initial:t,animate:n}=SAe(e,f.useContext(aS));return f.useMemo(()=>({initial:t,animate:n}),[CV(t),CV(n)])}function CV(e){return Array.isArray(e)?e.join(" "):e}const j0={};function MAe(e){for(const t in e)j0[t]=e[t],iI(t)&&(j0[t].isCSSVariable=!0)}function Nre(e,{layout:t,layoutId:n}){return vh.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!j0[e]||e==="opacity")}const kAe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TAe=yh.length;function NAe(e,t,n){let r="",s=!0;for(let a=0;a<TAe;a++){const o=yh[a],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=vre(l,vI[o]);if(!c){s=!1;const d=kAe[o]||o;r+=`${d}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function EI(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(vh.has(c)){o=!0;continue}else if(iI(c)){s[c]=u;continue}else{const d=vre(u,vI[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(t.transform||(o||n?r.transform=NAe(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const MI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Are(e,t,n){for(const r in t)!Ar(t[r])&&!Nre(r,n)&&(e[r]=t[r])}function AAe({transformTemplate:e},t){return f.useMemo(()=>{const n=MI();return EI(n,t,e),Object.assign({},n.vars,n.style)},[t])}function jAe(e,t){const n=e.style||{},r={};return Are(r,n,e),Object.assign(r,AAe(e,t)),r}function RAe(e,t){const n={},r=jAe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const IAe={offset:"stroke-dashoffset",array:"stroke-dasharray"},PAe={offset:"strokeDashoffset",array:"strokeDasharray"};function OAe(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?IAe:PAe;e[a.offset]=jt.transform(-r);const o=jt.transform(t),l=jt.transform(n);e[a.array]=`${o} ${l}`}function jre(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...l},c,u,d){if(EI(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p}=e;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=d?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&OAe(m,s,a,o,!1)}const Rre=()=>({...MI(),attrs:{}}),Ire=e=>typeof e=="string"&&e.toLowerCase()==="svg";function LAe(e,t,n,r){const s=f.useMemo(()=>{const a=Rre();return jre(a,t,Ire(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};Are(a,e.style,e),s.style={...a,...s.style}}return s}const DAe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kI(e){return typeof e!="string"||e.includes("-")?!1:!!(DAe.indexOf(e)>-1||/[A-Z]/u.test(e))}function FAe(e,t,n,{latestValues:r},s,a=!1){const l=(kI(e)?LAe:RAe)(t,r,s,e),c=CAe(t,typeof e=="string",a),u=e!==f.Fragment?{...c,...l,ref:n}:{},{children:d}=t,m=f.useMemo(()=>Ar(d)?d.get():d,[d]);return f.createElement(e,{...u,children:m})}function SV(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function TI(e,t,n,r){if(typeof t=="function"){const[s,a]=SV(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=SV(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function P_(e){return Ar(e)?e.get():e}function UAe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:BAe(n,r,s,e),renderState:t()}}function BAe(e,t,n,r){const s={},a=r(e,{});for(const p in a)s[p]=P_(a[p]);let{initial:o,animate:l}=e;const c=iS(e),u=Tre(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const m=d?l:o;if(m&&typeof m!="boolean"&&!oS(m)){const p=Array.isArray(m)?m:[m];for(let h=0;h<p.length;h++){const g=TI(e,p[h]);if(g){const{transitionEnd:y,transition:v,...x}=g;for(const b in x){let _=x[b];if(Array.isArray(_)){const w=d?_.length-1:0;_=_[w]}_!==null&&(s[b]=_)}for(const b in y)s[b]=y[b]}}}return s}const Pre=e=>(t,n)=>{const r=f.useContext(aS),s=f.useContext(rS),a=()=>UAe(e,t,r,s);return n?a():Zv(a)};function NI(e,t,n){const{style:r}=e,s={};for(const a in r)(Ar(r[a])||t.style&&Ar(t.style[a])||Nre(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const VAe=Pre({scrapeMotionValuesFromProps:NI,createRenderState:MI});function Ore(e,t,n){const r=NI(e,t,n);for(const s in e)if(Ar(e[s])||Ar(t[s])){const a=yh.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}const WAe=Pre({scrapeMotionValuesFromProps:Ore,createRenderState:Rre}),$Ae=Symbol.for("motionComponentSymbol");function Cm(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function HAe(e,t,n){return f.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Cm(n)&&(n.current=r))},[t])}const AI=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zAe="framerAppearId",Lre="data-"+AI(zAe),Dre=f.createContext({});function GAe(e,t,n,r,s){const{visualElement:a}=f.useContext(aS),o=f.useContext(Mre),l=f.useContext(rS),c=f.useContext(n1).reducedMotion,u=f.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,m=f.useContext(Dre);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&qAe(u.current,n,s,m);const p=f.useRef(!1);f.useInsertionEffect(()=>{d&&p.current&&d.update(n,l)});const h=n[Lre],g=f.useRef(!!h&&!window.MotionHandoffIsComplete?.(h)&&window.MotionHasOptimisedAnimation?.(h));return nS(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),f.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(h)}),g.current=!1),d.enteringChildren=void 0)}),d}function qAe(e,t,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Fre(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||l&&Cm(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function Fre(e){if(e)return e.options.allowProjection!==!1?e.projection:Fre(e.parent)}function CM(e,{forwardMotionProps:t=!1}={},n,r){n&&bAe(n);const s=kI(e)?WAe:VAe;function a(l,c){let u;const d={...f.useContext(n1),...l,layoutId:KAe(l)},{isStatic:m}=d,p=EAe(l),h=s(l,m);if(!m&&JR){YAe();const g=QAe(d);u=g.MeasureLayout,p.visualElement=GAe(e,h,d,r,g.ProjectionNode)}return i.jsxs(aS.Provider,{value:p,children:[u&&p.visualElement?i.jsx(u,{visualElement:p.visualElement,...d}):null,FAe(e,l,HAe(h,p.visualElement,c),h,m,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=f.forwardRef(a);return o[$Ae]=e,o}function KAe({layoutId:e}){const t=f.useContext(M0).id;return t&&e!==void 0?t+"-"+e:e}function YAe(e,t){f.useContext(Mre).strict}function QAe(e){const{drag:t,layout:n}=hp;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function XAe(e,t){if(typeof Proxy>"u")return CM;const n=new Map,r=(a,o)=>CM(a,o,e,t),s=(a,o)=>r(a,o);return new Proxy(s,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,CM(o,void 0,e,t)),n.get(o))})}function Ure({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function ZAe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function JAe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function SM(e){return e===void 0||e===1}function HN({scale:e,scaleX:t,scaleY:n}){return!SM(e)||!SM(t)||!SM(n)}function dd(e){return HN(e)||Bre(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Bre(e){return EV(e.x)||EV(e.y)}function EV(e){return e&&e!=="0%"}function kw(e,t,n){const r=e-n,s=t*r;return n+s}function MV(e,t,n,r,s){return s!==void 0&&(e=kw(e,s,r)),kw(e,n,r)+t}function zN(e,t=0,n=1,r,s){e.min=MV(e.min,t,n,r,s),e.max=MV(e.max,t,n,r,s)}function Vre(e,{x:t,y:n}){zN(e.x,t.translate,t.scale,t.originPoint),zN(e.y,n.translate,n.scale,n.originPoint)}const kV=.999999999999,TV=1.0000000000001;function e8e(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,o;for(let l=0;l<s;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Em(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Vre(e,o)),r&&dd(a.latestValues)&&Em(e,a.latestValues))}t.x<TV&&t.x>kV&&(t.x=1),t.y<TV&&t.y>kV&&(t.y=1)}function Sm(e,t){e.min=e.min+t,e.max=e.max+t}function NV(e,t,n,r,s=.5){const a=lr(e.min,e.max,s);zN(e,t,n,a,r)}function Em(e,t){NV(e.x,t.x,t.scaleX,t.scale,t.originX),NV(e.y,t.y,t.scaleY,t.scale,t.originY)}function Wre(e,t){return Ure(JAe(e.getBoundingClientRect(),t))}function t8e(e,t,n){const r=Wre(e,n),{scroll:s}=t;return s&&(Sm(r.x,s.offset.x),Sm(r.y,s.offset.y)),r}const AV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mm=()=>({x:AV(),y:AV()}),jV=()=>({min:0,max:0}),gr=()=>({x:jV(),y:jV()}),Tw={current:null},jI={current:!1};function $re(){if(jI.current=!0,!!JR)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Tw.current=e.matches;e.addEventListener("change",t),t()}else Tw.current=!1}const R0=new WeakMap;function n8e(e,t,n){for(const r in t){const s=t[r],a=n[r];if(Ar(s))e.addValue(r,s);else if(Ar(a))e.addValue(r,qd(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,qd(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const RV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Hre{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=wa.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,$n.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=iS(n),this.isVariantNode=Tre(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const h=m[p];c[p]!==void 0&&Ar(h)&&h.set(c[p])}}mount(t){this.current=t,R0.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),jI.current||$re(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),dc(this.notifyUpdate),dc(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=vh.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&$n.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in hp){const n=hp[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<RV.length;r++){const s=RV[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=t[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=n8e(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=qd(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Ane(r)||Rne(r))?r=parseFloat(r):!uAe(r)&&fu.test(n)&&(r=yre(t,n)),this.setBaseTarget(t,Ar(r)?r.get():r)),Ar(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=TI(this.props,n,this.presenceContext?.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ar(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new rI),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){bI.render(this.render)}}class zre extends Hre{constructor(){super(...arguments),this.KeyframeResolver=ZNe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ar(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Gre(e,{style:t,vars:n},r,s){const a=e.style;let o;for(o in t)a[o]=t[o];s?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function r8e(e){return window.getComputedStyle(e)}class qre extends zre{constructor(){super(...arguments),this.type="html",this.renderInstance=Gre}readValueFromInstance(t,n){if(vh.has(n))return this.projection?.isProjecting?DN(n):hNe(t,n);{const r=r8e(t),s=(iI(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Wre(t,n)}build(t,n,r){EI(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return NI(t,n,r)}}const Kre=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function s8e(e,t,n,r){Gre(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Kre.has(s)?s:AI(s),t.attrs[s])}class Yre extends zre{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(vh.has(n)){const r=gre(n);return r&&r.default||0}return n=Kre.has(n)?n:AI(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Ore(t,n,r)}build(t,n,r){jre(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){s8e(t,n,r,s)}mount(t){this.isSVGTag=Ire(t.tagName),super.mount(t)}}const a8e=(e,t)=>kI(e)?new Yre(t):new qre(t,{allowProjection:e!==f.Fragment});function Fm(e,t,n){const r=e.getProps();return TI(r,t,n!==void 0?n:r.custom,e)}const GN=e=>Array.isArray(e);function o8e(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,qd(n))}function i8e(e){return GN(e)?e[e.length-1]||0:e}function l8e(e,t){const n=Fm(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const l=i8e(a[o]);o8e(e,o,l)}}function c8e(e){return!!(Ar(e)&&e.add)}function qN(e,t){const n=e.getValue("willChange");if(c8e(n))return n.add(t);if(!n&&uc.WillChange){const r=new uc.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Qre(e){return e.props[Lre]}const u8e=e=>e!==null;function d8e(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(u8e),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[a]}const f8e={type:"spring",stiffness:500,damping:25,restSpeed:10},m8e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),p8e={type:"keyframes",duration:.8},h8e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},g8e=(e,{keyframes:t})=>t.length>2?p8e:vh.has(e)?e.startsWith("scale")?m8e(t[1]):f8e:h8e;function y8e({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const RI=(e,t,n,r={},s,a)=>o=>{const l=yI(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ai(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:p=>{t.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:s};y8e(l)||Object.assign(d,g8e(e,d)),d.duration&&(d.duration=ai(d.duration)),d.repeatDelay&&(d.repeatDelay=ai(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(WN(d),d.delay===0&&(m=!0)),(uc.instantAnimations||uc.skipAnimations)&&(m=!0,WN(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,m&&!a&&t.get()!==void 0){const p=d8e(d.keyframes,l);if(p!==void 0){$n.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new sS(d):new FNe(d)};function v8e({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function II(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(a=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const m=e.getValue(d,e.latestValues[d]??null),p=l[d];if(p===void 0||u&&v8e(u,d))continue;const h={delay:n,...yI(a||{},d)},g=m.get();if(g!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===g&&!h.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const x=Qre(e);if(x){const b=window.MotionHandoffAnimation(x,d,$n);b!==null&&(h.startTime=b,y=!0)}}qN(e,d),m.start(RI(d,m,p,e.shouldReduceMotion&&mre.has(d)?{type:!1}:h,e,y));const v=m.animation;v&&c.push(v)}return o&&Promise.all(c).then(()=>{$n.update(()=>{o&&l8e(e,o)})}),c}function Xre(e,t,n,r=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(a,o):s===1?a*r:l-a*r}function KN(e,t,n={}){const r=Fm(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(II(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:m}=s;return x8e(e,t,c,u,d,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>u())}else return Promise.all([a(),o(n.delay)])}function x8e(e,t,n=0,r=0,s=0,a=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(KN(c,t,{...o,delay:n+(typeof r=="function"?0:r)+Xre(e.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function b8e(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>KN(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=KN(e,t,n);else{const s=typeof t=="function"?Fm(e,t,n.custom):t;r=Promise.all(II(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Zre(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const _8e=SI.length;function Jre(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Jre(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<_8e;n++){const r=SI[n],s=e.props[r];(A0(s)||s===!1)&&(t[r]=s)}return t}const w8e=[...CI].reverse(),C8e=CI.length;function S8e(e){return t=>Promise.all(t.map(({animation:n,options:r})=>b8e(e,n,r)))}function E8e(e){let t=S8e(e),n=IV(),r=!0;const s=c=>(u,d)=>{const m=Fm(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(m){const{transition:p,transitionEnd:h,...g}=m;u={...u,...g,...h}}return u};function a(c){t=c(e)}function o(c){const{props:u}=e,d=Jre(e.parent)||{},m=[],p=new Set;let h={},g=1/0;for(let v=0;v<C8e;v++){const x=w8e[v],b=n[x],_=u[x]!==void 0?u[x]:d[x],w=A0(_),C=x===c?b.isActive:null;C===!1&&(g=v);let S=_===d[x]&&_!==u[x]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...h},!b.isActive&&C===null||!_&&!b.prevProp||oS(_)||typeof _=="boolean")continue;const E=M8e(b.prevProp,_);let M=E||x===c&&b.isActive&&!S&&w||v>g&&w,k=!1;const T=Array.isArray(_)?_:[_];let j=T.reduce(s(x),{});C===!1&&(j={});const{prevResolvedValues:R={}}=b,O={...R,...j},P=D=>{M=!0,p.has(D)&&(k=!0,p.delete(D)),b.needsAnimating[D]=!0;const F=e.getValue(D);F&&(F.liveStyle=!1)};for(const D in O){const F=j[D],B=R[D];if(h.hasOwnProperty(D))continue;let V=!1;GN(F)&&GN(B)?V=!Zre(F,B):V=F!==B,V?F!=null?P(D):p.add(D):F!==void 0&&p.has(D)?P(D):b.protectedKeys[D]=!0}b.prevProp=_,b.prevResolvedValues=j,b.isActive&&(h={...h,...j}),r&&e.blockInitialAnimation&&(M=!1);const N=S&&E;M&&(!N||k)&&m.push(...T.map(D=>{const F={type:x};if(typeof D=="string"&&r&&!N&&e.manuallyAnimateOnMount&&e.parent){const{parent:B}=e,V=Fm(B,D);if(B.enteringChildren&&V){const{delayChildren:$}=V.transition||{};F.delay=Xre(B.enteringChildren,e,$)}}return{animation:D,options:F}}))}if(p.size){const v={};if(typeof u.initial!="boolean"){const x=Fm(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(v.transition=x.transition)}p.forEach(x=>{const b=e.getBaseTarget(x),_=e.getValue(x);_&&(_.liveStyle=!0),v[x]=b??null}),m.push({animation:v})}let y=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(m):Promise.resolve()}function l(c,u){if(n[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(m=>m.animationState?.setActive(c,u)),n[c].isActive=u;const d=o(c);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=IV(),r=!0}}}function M8e(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Zre(t,e):!1}function Qu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function IV(){return{animate:Qu(!0),whileInView:Qu(),whileHover:Qu(),whileTap:Qu(),whileDrag:Qu(),whileFocus:Qu(),exit:Qu()}}class Tu{constructor(t){this.isMounted=!1,this.node=t}update(){}}class k8e extends Tu{constructor(t){super(t),t.animationState||(t.animationState=E8e(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();oS(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let T8e=0;class N8e extends Tu{constructor(){super(...arguments),this.id=T8e++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const A8e={animation:{Feature:k8e},exit:{Feature:N8e}};function I0(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function r1(e){return{point:{x:e.pageX,y:e.pageY}}}const j8e=e=>t=>_I(t)&&e(t,r1(t));function Uy(e,t,n,r){return I0(e,t,j8e(n),r)}const ese=1e-4,R8e=1-ese,I8e=1+ese,tse=.01,P8e=0-tse,O8e=0+tse;function Ks(e){return e.max-e.min}function L8e(e,t,n){return Math.abs(e-t)<=n}function PV(e,t,n,r=.5){e.origin=r,e.originPoint=lr(t.min,t.max,e.origin),e.scale=Ks(n)/Ks(t),e.translate=lr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=R8e&&e.scale<=I8e||isNaN(e.scale))&&(e.scale=1),(e.translate>=P8e&&e.translate<=O8e||isNaN(e.translate))&&(e.translate=0)}function By(e,t,n,r){PV(e.x,t.x,n.x,r?r.originX:void 0),PV(e.y,t.y,n.y,r?r.originY:void 0)}function OV(e,t,n){e.min=n.min+t.min,e.max=e.min+Ks(t)}function D8e(e,t,n){OV(e.x,t.x,n.x),OV(e.y,t.y,n.y)}function LV(e,t,n){e.min=t.min-n.min,e.max=e.min+Ks(t)}function Vy(e,t,n){LV(e.x,t.x,n.x),LV(e.y,t.y,n.y)}function go(e){return[e("x"),e("y")]}const nse=({current:e})=>e?e.ownerDocument.defaultView:null,DV=(e,t)=>Math.abs(e-t);function F8e(e,t){const n=DV(e.x,t.x),r=DV(e.y,t.y);return Math.sqrt(n**2+r**2)}class rse{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=MM(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,g=F8e(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!h&&!g)return;const{point:y}=p,{timestamp:v}=fs;this.history.push({...y,timestamp:v});const{onStart:x,onMove:b}=this.handlers;h||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,h)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=EM(h,this.transformPagePoint),$n.update(this.updatePoint,!0)},this.handlePointerUp=(p,h)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=MM(p.type==="pointercancel"?this.lastMoveEventInfo:EM(h,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,x),y&&y(p,x)},!_I(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const l=r1(t),c=EM(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=fs;this.history=[{...u,timestamp:d}];const{onSessionStart:m}=n;m&&m(t,MM(c,this.history)),this.removeListeners=e1(Uy(this.contextWindow,"pointermove",this.handlePointerMove),Uy(this.contextWindow,"pointerup",this.handlePointerUp),Uy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),dc(this.updatePoint)}}function EM(e,t){return t?{point:t(e.point)}:e}function FV(e,t){return{x:e.x-t.x,y:e.y-t.y}}function MM({point:e},t){return{point:e,delta:FV(e,sse(t)),offset:FV(e,U8e(t)),velocity:B8e(t,.1)}}function U8e(e){return e[0]}function sse(e){return e[e.length-1]}function B8e(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=sse(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>ai(t)));)n--;if(!r)return{x:0,y:0};const a=Zi(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function V8e(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?lr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?lr(n,e,r.max):Math.min(e,n)),e}function UV(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function W8e(e,{top:t,left:n,bottom:r,right:s}){return{x:UV(e.x,n,s),y:UV(e.y,t,r)}}function BV(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function $8e(e,t){return{x:BV(e.x,t.x),y:BV(e.y,t.y)}}function H8e(e,t){let n=.5;const r=Ks(e),s=Ks(t);return s>r?n=pp(t.min,t.max-r,e.min):r>s&&(n=pp(e.min,e.max-s,t.min)),cc(0,1,n)}function z8e(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const YN=.35;function G8e(e=YN){return e===!1?e=0:e===!0&&(e=YN),{x:VV(e,"left","right"),y:VV(e,"top","bottom")}}function VV(e,t,n){return{min:WV(e,t),max:WV(e,n)}}function WV(e,t){return typeof e=="number"?e:e[t]||0}const q8e=new WeakMap;class K8e{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(r1(m).point)},o=(m,p)=>{const{drag:h,dragPropagation:g,onDragStart:y}=this.getProps();if(h&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tAe(h),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),go(x=>{let b=this.getAxisMotionValue(x).get()||0;if(Ji.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[x];w&&(b=Ks(w)*(parseFloat(b)/100))}}this.originPoint[x]=b}),y&&$n.postRender(()=>y(m,p)),qN(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p;const{dragPropagation:h,dragDirectionLock:g,onDirectionLock:y,onDrag:v}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:x}=p;if(g&&this.currentDirection===null){this.currentDirection=Y8e(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,x),this.updateAxis("y",p.point,x),this.visualElement.render(),v&&v(m,p)},c=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p,this.stop(m,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>go(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new rse(t,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:nse(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&$n.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Yx(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=V8e(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Cm(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=W8e(r.layoutBox,t):this.constraints=!1,this.elastic=G8e(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&go(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=z8e(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Cm(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=t8e(r,s.root,this.visualElement.getTransformPagePoint());let o=$8e(s.layout.layoutBox,a);if(n){const l=n(ZAe(o));this.hasMutatedConstraints=!!l,l&&(o=Ure(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=go(d=>{if(!Yx(d,n,this.currentDirection))return;let m=c&&c[d]||{};o&&(m={min:0,max:0});const p=s?200:1e6,h=s?40:1e7,g={type:"inertia",velocity:r?t[d]:0,bounceStiffness:p,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return qN(this.visualElement,t),r.start(RI(t,r,0,n,this.visualElement,!1))}stopAnimation(){go(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){go(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){go(n=>{const{drag:r}=this.getProps();if(!Yx(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n];a.set(t[n]-lr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Cm(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};go(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=H8e({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),go(o=>{if(!Yx(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(lr(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;q8e.set(this.visualElement,this);const t=this.visualElement.current,n=Uy(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Cm(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),$n.read(r);const o=I0(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(go(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=YN,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Yx(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Y8e(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Q8e extends Tu{constructor(t){super(t),this.removeGroupControls=Mo,this.removeListeners=Mo,this.controls=new K8e(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mo}unmount(){this.removeGroupControls(),this.removeListeners()}}const $V=e=>(t,n)=>{e&&$n.postRender(()=>e(t,n))};class X8e extends Tu{constructor(){super(...arguments),this.removePointerDownListener=Mo}onPointerDown(t){this.session=new rse(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nse(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:$V(t),onStart:$V(n),onMove:r,onEnd:(a,o)=>{delete this.session,s&&$n.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=Uy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const O_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function HV(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(jt.test(e))e=parseFloat(e);else return e;const n=HV(e,t.target.x),r=HV(e,t.target.y);return`${n}% ${r}%`}},Z8e={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=fu.parse(e);if(s.length>5)return r;const a=fu.createTransformer(e),o=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=lr(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),a(s)}};let kM=!1;class J8e extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;MAe(eje),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),kM&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),O_.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,kM=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||$n.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),bI.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;kM=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ase(e){const[t,n]=Sre(),r=f.useContext(M0);return i.jsx(J8e,{...e,layoutGroup:r,switchLayoutGroup:f.useContext(Dre),isPresent:t,safeToRemove:n})}const eje={borderRadius:{...Mg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mg,borderTopRightRadius:Mg,borderBottomLeftRadius:Mg,borderBottomRightRadius:Mg,boxShadow:Z8e};function ose(e,t,n){const r=Ar(e)?e:qd(e);return r.start(RI("",r,t,n)),r.animation}const tje=(e,t)=>e.depth-t.depth;class nje{constructor(){this.children=[],this.isDirty=!1}add(t){eI(this.children,t),this.isDirty=!0}remove(t){Jv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(tje),this.isDirty=!1,this.children.forEach(t)}}function rje(e,t){const n=wa.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(dc(r),e(a-t))};return $n.setup(r,!0),()=>dc(r)}const ise=["TopLeft","TopRight","BottomLeft","BottomRight"],sje=ise.length,zV=e=>typeof e=="string"?parseFloat(e):e,GV=e=>typeof e=="number"||jt.test(e);function aje(e,t,n,r,s,a){s?(e.opacity=lr(0,n.opacity??1,oje(r)),e.opacityExit=lr(t.opacity??1,0,ije(r))):a&&(e.opacity=lr(t.opacity??1,n.opacity??1,r));for(let o=0;o<sje;o++){const l=`border${ise[o]}Radius`;let c=qV(t,l),u=qV(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||GV(c)===GV(u)?(e[l]=Math.max(lr(zV(c),zV(u),r),0),(Ji.test(u)||Ji.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=lr(t.rotate||0,n.rotate||0,r))}function qV(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const oje=lse(0,.5,Une),ije=lse(.5,.95,Mo);function lse(e,t,n){return r=>r<e?0:r>t?1:n(pp(e,t,r))}function KV(e,t){e.min=t.min,e.max=t.max}function po(e,t){KV(e.x,t.x),KV(e.y,t.y)}function YV(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function QV(e,t,n,r,s){return e-=t,e=kw(e,1/n,r),s!==void 0&&(e=kw(e,1/s,r)),e}function lje(e,t=0,n=1,r=.5,s,a=e,o=e){if(Ji.test(t)&&(t=parseFloat(t),t=lr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=lr(a.min,a.max,r);e===a&&(l-=t),e.min=QV(e.min,t,n,l,s),e.max=QV(e.max,t,n,l,s)}function XV(e,t,[n,r,s],a,o){lje(e,t[n],t[r],t[s],t.scale,a,o)}const cje=["x","scaleX","originX"],uje=["y","scaleY","originY"];function ZV(e,t,n,r){XV(e.x,t,cje,n?n.x:void 0,r?r.x:void 0),XV(e.y,t,uje,n?n.y:void 0,r?r.y:void 0)}function JV(e){return e.translate===0&&e.scale===1}function cse(e){return JV(e.x)&&JV(e.y)}function eW(e,t){return e.min===t.min&&e.max===t.max}function dje(e,t){return eW(e.x,t.x)&&eW(e.y,t.y)}function tW(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function use(e,t){return tW(e.x,t.x)&&tW(e.y,t.y)}function nW(e){return Ks(e.x)/Ks(e.y)}function rW(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class fje{constructor(){this.members=[]}add(t){eI(this.members,t),t.scheduleRender()}remove(t){if(Jv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mje(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,o=n?.z||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:p,skewX:h,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),m&&(r+=`rotateX(${m}deg) `),p&&(r+=`rotateY(${p}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const TM=["","X","Y","Z"],pje=1e3;let hje=0;function NM(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function dse(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Qre(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",$n,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&dse(r)}function fse({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=t?.()){this.id=hje++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vje),this.nodes.forEach(wje),this.nodes.forEach(Cje),this.nodes.forEach(xje)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new nje)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rI),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=wI(o)&&!Cre(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,m=0;const p=()=>this.root.updateBlockedByResize=!1;$n.read(()=>{m=window.innerWidth}),e(o,()=>{const h=window.innerWidth;h!==m&&(m=h,this.root.updateBlockedByResize=!0,d&&d(),d=rje(p,250),O_.hasAnimatedSinceResize&&(O_.hasAnimatedSinceResize=!1,this.nodes.forEach(oW)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||Tje,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),x=!this.targetLayout||!use(this.targetLayout,h),b=!m&&p;if(this.options.layoutRoot||this.resumeFrom||b||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...yI(g,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(d,b)}else m||oW(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),dc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Sje),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&dse(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(sW);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(aW);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(_je),this.nodes.forEach(gje),this.nodes.forEach(yje)):this.nodes.forEach(aW),this.clearAllSnapshots();const l=wa.now();fs.delta=cc(0,1e3/60,l-fs.timestamp),fs.timestamp=l,fs.isProcessing=!0,vM.update.process(fs),vM.preRender.process(fs),vM.render.process(fs),fs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bje),this.sharedNodes.forEach(Eje)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$n.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$n.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ks(this.snapshot.measuredBox.x)&&!Ks(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!cse(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||dd(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),Nje(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return gr();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Aje))){const{scroll:u}=this.root;u&&(Sm(l.x,u.offset.x),Sm(l.y,u.offset.y))}return l}removeElementScroll(o){const l=gr();if(po(l,o),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:m}=u;u!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&po(l,o),Sm(l.x,d.offset.x),Sm(l.y,d.offset.y))}return l}applyTransform(o,l=!1){const c=gr();po(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Em(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),dd(d.latestValues)&&Em(c,d.latestValues)}return dd(this.latestValues)&&Em(c,this.latestValues),c}removeTransform(o){const l=gr();po(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!dd(u.latestValues))continue;HN(u.latestValues)&&u.updateSnapshot();const d=gr(),m=u.measurePageBox();po(d,m),ZV(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return dd(this.latestValues)&&ZV(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=fs.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gr(),this.relativeTargetOrigin=gr(),Vy(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=gr(),this.targetWithTransforms=gr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D8e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):po(this.target,this.layout.layoutBox),Vre(this.target,this.targetDelta)):po(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gr(),this.relativeTargetOrigin=gr(),Vy(this.relativeTargetOrigin,this.target,p.target),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||HN(this.parent.latestValues)||Bre(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===fs.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;po(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;e8e(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=gr());const{target:h}=o;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YV(this.prevProjectionDelta.x,this.projectionDelta.x),YV(this.prevProjectionDelta.y,this.projectionDelta.y)),By(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!rW(this.projectionDelta.x,this.prevProjectionDelta.x)||!rW(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mm(),this.projectionDelta=Mm(),this.projectionDeltaWithTransform=Mm()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=Mm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=gr(),h=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=h!==g,v=this.getStack(),x=!v||v.members.length<=1,b=!!(y&&!x&&this.options.crossfade===!0&&!this.path.some(kje));this.animationProgress=0;let _;this.mixTargetDelta=w=>{const C=w/1e3;iW(m.x,o.x,C),iW(m.y,o.y,C),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vy(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Mje(this.relativeTarget,this.relativeTargetOrigin,p,C),_&&dje(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=gr()),po(_,this.relativeTarget)),y&&(this.animationValues=d,aje(d,u,this.latestValues,C,b,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(dc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$n.update(()=>{O_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qd(0)),this.currentAnimation=ose(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pje),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&mse(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||gr();const m=Ks(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const p=Ks(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}po(l,c),Em(l,d),By(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new fje),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&NM("z",o,u,this.animationValues);for(let d=0;d<TM.length;d++)NM(`rotate${TM[d]}`,o,u,this.animationValues),NM(`skew${TM[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=P_(l?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=P_(l?.pointerEvents)||""),this.hasProjected&&!dd(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=mje(this.projectionDeltaWithTransform,this.treeScale,d);c&&(m=c(d,m)),o.transform=m;const{x:p,y:h}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${h.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in j0){if(d[g]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:x}=j0[g],b=m==="none"?d[g]:y(d[g],u);if(v){const _=v.length;for(let w=0;w<_;w++)o[v[w]]=b}else x?this.options.visualElement.renderState.vars[g]=b:o[g]=b}this.options.layoutId&&(o.pointerEvents=u===this?P_(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(sW),this.root.sharedNodes.clear()}}}function gje(e){e.updateLayout()}function yje(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?go(d=>{const m=a?t.measuredBox[d]:t.layoutBox[d],p=Ks(m);m.min=n[d].min,m.max=m.min+p}):mse(s,t.layoutBox,n)&&go(d=>{const m=a?t.measuredBox[d]:t.layoutBox[d],p=Ks(n[d]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+p)});const o=Mm();By(o,n,t.layoutBox);const l=Mm();a?By(l,e.applyTransform(r,!0),t.measuredBox):By(l,n,t.layoutBox);const c=!cse(o);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:p}=d;if(m&&p){const h=gr();Vy(h,t.layoutBox,m.layoutBox);const g=gr();Vy(g,n,p.layoutBox),use(h,g)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=h,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function vje(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function xje(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function bje(e){e.clearSnapshot()}function sW(e){e.clearMeasurements()}function aW(e){e.isLayoutDirty=!1}function _je(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function oW(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function wje(e){e.resolveTargetDelta()}function Cje(e){e.calcProjection()}function Sje(e){e.resetSkewAndRotation()}function Eje(e){e.removeLeadSnapshot()}function iW(e,t,n){e.translate=lr(t.translate,0,n),e.scale=lr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function lW(e,t,n,r){e.min=lr(t.min,n.min,r),e.max=lr(t.max,n.max,r)}function Mje(e,t,n,r){lW(e.x,t.x,n.x,r),lW(e.y,t.y,n.y,r)}function kje(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Tje={duration:.45,ease:[.4,0,.1,1]},cW=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),uW=cW("applewebkit/")&&!cW("chrome/")?Math.round:Mo;function dW(e){e.min=uW(e.min),e.max=uW(e.max)}function Nje(e){dW(e.x),dW(e.y)}function mse(e,t,n){return e==="position"||e==="preserve-aspect"&&!L8e(nW(t),nW(n),.2)}function Aje(e){return e!==e.root&&e.scroll?.wasRoot}const jje=fse({attachResizeListener:(e,t)=>I0(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),AM={current:void 0},pse=fse({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!AM.current){const e=new jje({});e.mount(window),e.setOptions({layoutScroll:!0}),AM.current=e}return AM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Rje={pan:{Feature:X8e},drag:{Feature:Q8e,ProjectionNode:pse,MeasureLayout:ase}};function fW(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&$n.postRender(()=>a(t,r1(t)))}class Ije extends Tu{mount(){const{current:t}=this.node;t&&(this.unmount=nAe(t,(n,r)=>(fW(this.node,r,"Start"),s=>fW(this.node,s,"End"))))}unmount(){}}class Pje extends Tu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=e1(I0(this.node.current,"focus",()=>this.onFocus()),I0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mW(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&$n.postRender(()=>a(t,r1(t)))}class Oje extends Tu{mount(){const{current:t}=this.node;t&&(this.unmount=oAe(t,(n,r)=>(mW(this.node,r,"Start"),(s,{success:a})=>mW(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const QN=new WeakMap,jM=new WeakMap,Lje=e=>{const t=QN.get(e.target);t&&t(e)},Dje=e=>{e.forEach(Lje)};function Fje({root:e,...t}){const n=e||document;jM.has(n)||jM.set(n,{});const r=jM.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(Dje,{root:e,...t})),r[s]}function Uje(e,t,n){const r=Fje(t);return QN.set(e,n),r.observe(e),()=>{QN.delete(e),r.unobserve(e)}}const Bje={some:0,all:1};class Vje extends Tu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Bje[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),p=u?d:m;p&&p(c)};return Uje(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Wje(t,n))&&this.startObserver()}unmount(){}}function Wje({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const $je={inView:{Feature:Vje},tap:{Feature:Oje},focus:{Feature:Pje},hover:{Feature:Ije}},Hje={layout:{ProjectionNode:pse,MeasureLayout:ase}},zje={...A8e,...$je,...Rje,...Hje},xe=XAe(zje,a8e);function Wy(e){const t=Zv(()=>qd(e)),{isStatic:n}=f.useContext(n1);if(n){const[,r]=f.useState(e);f.useEffect(()=>t.on("change",r),[])}return t}function hse(e,t){const n=Wy(t()),r=()=>n.set(t());return r(),nS(()=>{const s=()=>$n.preRender(r,!1,!0),a=e.map(o=>o.on("change",s));return()=>{a.forEach(o=>o()),dc(r)}}),n}function Gje(e){Fy.current=[],e();const t=hse(Fy.current,e);return Fy.current=void 0,t}function fd(e,t,n,r){if(typeof e=="function")return Gje(e);const s=typeof t=="function"?t:iAe(t,n,r);return Array.isArray(e)?pW(e,s):pW([e],([a])=>s(a))}function pW(e,t){const n=Zv(()=>[]);return hse(e,()=>{n.length=0;const r=e.length;for(let s=0;s<r;s++)n[s]=e[s].get();return t(n)})}function Hf(e,t={}){const{isStatic:n}=f.useContext(n1),r=()=>Ar(e)?e.get():e;if(n)return fd(r);const s=Wy(r());return f.useInsertionEffect(()=>lAe(s,e,t),[s,JSON.stringify(t)]),s}function s1(){!jI.current&&$re();const[e]=f.useState(Tw.current);return e}function PI(e){return typeof e=="object"&&!Array.isArray(e)}function gse(e,t,n,r){return typeof e=="string"&&PI(t)?xI(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function qje(e,t,n){return e*(t+1)}function hW(e,t,n,r){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):r.get(t)??e}function Kje(e,t,n){for(let r=0;r<e.length;r++){const s=e[r];s.at>t&&s.at<n&&(Jv(e,s),r--)}}function Yje(e,t,n,r,s,a){Kje(e,s,a);for(let o=0;o<t.length;o++)e.push({value:t[o],at:lr(s,a,r[o]),easing:$ne(n,o)})}function Qje(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function Xje(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const Zje="easeInOut";function Jje(e,{defaultTransition:t={},...n}={},r,s){const a=t.duration||.3,o=new Map,l=new Map,c={},u=new Map;let d=0,m=0,p=0;for(let h=0;h<e.length;h++){const g=e[h];if(typeof g=="string"){u.set(g,m);continue}else if(!Array.isArray(g)){u.set(g.name,hW(m,g.at,d,u));continue}let[y,v,x={}]=g;x.at!==void 0&&(m=hW(m,x.at,d,u));let b=0;const _=(w,C,S,E=0,M=0)=>{const k=e9e(w),{delay:T=0,times:j=are(k),type:R="keyframes",repeat:O,repeatType:P,repeatDelay:N=0,...I}=C;let{ease:D=t.ease||"easeOut",duration:F}=C;const B=typeof T=="function"?T(E,M):T,V=k.length,$=gI(R)?R:s?.[R||"keyframes"];if(V<=2&&$){let W=100;if(V===2&&r9e(k)){const re=k[1]-k[0];W=Math.abs(re)}const H={...I};F!==void 0&&(H.duration=ai(F));const Z=tre(H,W,$);D=Z.ease,F=Z.duration}F??(F=a);const G=m+B;j.length===1&&j[0]===0&&(j[1]=1);const X=j.length-k.length;if(X>0&&sre(j,X),k.length===1&&k.unshift(null),O){F=qje(F,O);const W=[...k],H=[...j];D=Array.isArray(D)?[...D]:[D];const Z=[...D];for(let re=0;re<O;re++){k.push(...W);for(let q=0;q<W.length;q++)j.push(H[q]+(re+1)),D.push(q===0?"linear":$ne(Z,q-1))}Qje(j,O)}const Y=G+F;Yje(S,k,D,j,G,Y),b=Math.max(B+F,b),p=Math.max(Y,p)};if(Ar(y)){const w=gW(y,l);_(v,x,yW("default",w))}else{const w=gse(y,v,r,c),C=w.length;for(let S=0;S<C;S++){v=v,x=x;const E=w[S],M=gW(E,l);for(const k in v)_(v[k],t9e(x,k),yW(k,M),S,C)}}d=m,m+=b}return l.forEach((h,g)=>{for(const y in h){const v=h[y];v.sort(Xje);const x=[],b=[],_=[];for(let C=0;C<v.length;C++){const{at:S,value:E,easing:M}=v[C];x.push(E),b.push(pp(0,p,S)),_.push(M||"easeOut")}b[0]!==0&&(b.unshift(0),x.unshift(x[0]),_.unshift(Zje)),b[b.length-1]!==1&&(b.push(1),x.push(null)),o.has(g)||o.set(g,{keyframes:{},transition:{}});const w=o.get(g);w.keyframes[y]=x,w.transition[y]={...t,duration:p,ease:_,times:b,...n}}}),o}function gW(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function yW(e,t){return t[e]||(t[e]=[]),t[e]}function e9e(e){return Array.isArray(e)?e:[e]}function t9e(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const n9e=e=>typeof e=="number",r9e=e=>e.every(n9e);function s9e(e,t){return e in t}class a9e extends Hre{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(s9e(n,t)){const r=t[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return gr()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function o9e(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=wI(e)&&!Cre(e)?new Yre(t):new qre(t);n.mount(e),R0.set(e,n)}function i9e(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new a9e(t);n.mount(e),R0.set(e,n)}function l9e(e,t){return Ar(e)||typeof e=="number"||typeof e=="string"&&!PI(t)}function yse(e,t,n,r){const s=[];if(l9e(e,t))s.push(ose(e,PI(t)&&t.default||t,n&&(n.default||n)));else{const a=gse(e,t,r),o=a.length;for(let l=0;l<o;l++){const c=a[l],u=c instanceof Element?o9e:i9e;R0.has(c)||u(c);const d=R0.get(c),m={...n};"delay"in m&&typeof m.delay=="function"&&(m.delay=m.delay(l,o)),s.push(...II(d,{...t,transition:m},{}))}}return s}function c9e(e,t,n){const r=[];return Jje(e,t,n,{spring:N0}).forEach(({keyframes:a,transition:o},l)=>{r.push(...yse(l,a,o))}),r}function u9e(e){return Array.isArray(e)&&e.some(Array.isArray)}function d9e(e){function t(n,r,s){let a=[];u9e(n)?a=c9e(n,r,e):a=yse(n,r,s,e);const o=new BNe(a);return e&&(e.animations.push(o),o.finished.then(()=>{Jv(e.animations,o)})),o}return t}const vW=d9e(),f9e={some:0,all:1};function m9e(e,t,{root:n,margin:r,amount:s="some"}={}){const a=xI(e),o=new WeakMap,l=u=>{u.forEach(d=>{const m=o.get(d.target);if(d.isIntersecting!==!!m)if(d.isIntersecting){const p=t(d.target,d);typeof p=="function"?o.set(d.target,p):c.unobserve(d.target)}else typeof m=="function"&&(m(d),o.delete(d.target))})},c=new IntersectionObserver(l,{root:n,rootMargin:r,threshold:typeof s=="number"?s:f9e[s]});return a.forEach(u=>c.observe(u)),()=>c.disconnect()}function p9e(e,{root:t,margin:n,amount:r,once:s=!1,initial:a=!1}={}){const[o,l]=f.useState(a);return f.useEffect(()=>{if(!e.current||s&&o)return;const c=()=>(l(!0),s?void 0:()=>l(!1)),u={root:t&&t.current||void 0,margin:n,amount:r};return m9e(e.current,c,u)},[t,e,n,s,r]),o}const h9e=()=>{const{base:e}=_t(),t=Nt();return t===(e||"/")||t?.startsWith("/search")},g9e={micro:"font-sans text-2xs font-normal",tiny:"font-sans text-xs font-medium",tinyRegular:"font-sans text-xs font-normal",tinyBold:"font-sans text-xs font-bold",extraSmall:"font-sans text-[13px]",small:"font-sans text-sm",smallBold:"font-sans text-sm font-medium leading-[1.125rem]",smallExtraBold:"font-sans text-sm font-extrabold leading-[1.125rem]",base:"font-sans text-base",baseSemi:"font-sans text-base font-medium",tinyMono:"font-mono text-2xs md:text-xs",smallMono:"font-mono text-sm",smallCaps:"text-2xs md:text-xs tracking-wide font-mono leading-none uppercase","section-title":"font-display text-lg font-medium","page-title":"font-display font-medium text-2xl",display:"font-display text-4xl lg:text-[2.8rem] !leading-[1.2]","entry-title":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-100":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-200":"font-display text-lg lg:text-xl font-medium","entry-title-300":"font-sans text-pretty font-medium"},y9e={default:"text-foreground",defaultInverted:"text-inverse",light:"text-quiet ",ultraLight:"text-quietest",red:"text-caution",yellow:"text-yellow-600 dark:text-yellow-400",super:"text-super",white:"text-white",positive:"text-positive",negative:"text-negative",max:"text-max"},v9e=(e,t,n)=>t||(e==="page-title"?"h1":e==="entry-title"?"h2":n?"span":"div"),x9e=(e,t,n,r,s)=>{const a=g9e[e],o=y9e[t];return U(s,a,o,n?"text-center block":"",r?"hover:text-super":"","selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super")},L=A.memo(({children:e,variant:t="base",color:n="default",textCenter:r,className:s,inline:a,superHover:o,testId:l,as:c,ref:u,...d})=>{const m=f.useMemo(()=>v9e(t,c,a),[t,c,a]),p=f.useMemo(()=>x9e(t,n,r,o,s),[s,n,r,t,o]);return A.createElement(m,{className:p,"data-testid":l,ref:u,...d},e)});L.displayName="TextBlock";const Wt={tiny:"tiny",small:"small",regular:"regular",large:"large",xl:"xl",none:"none"};var Ie;(function(e){e.RETRY_BUTTON="retryButton",e.PRO_PAGE="proPage",e.SHARE_DROPDOWN="shareDropdown",e.PRICING_TABLE="pricingTable",e.TRY_COPILOT="tryCopilot",e.TRY_RESEARCH="tryResearch",e.TRY_LABS="tryLabs",e.PRO_HOVER_CARD_BUTTON="proHoverCardButton",e.PRO_REASONING_SELECTOR="proReasoningSelector",e.LIBRARY_PAGE="libraryPage",e.SPACES_PAGE="spacesPage",e.SPACES_LANDING="spacesLanding",e.SPACES_TEMPLATES="spacesTemplates",e.DISCOVER_TOPICS="discoverTopics",e.COLLECTIONS="collections",e.SPACES="spaces",e.THREAD_SOCIAL="threadSocial",e.MOBILE_SIGNUP="mobileSignup",e.RELATED_QUERIES="relatedQueries",e.FILE_UPLOAD="fileUpload",e.SPACES_FILE_UPLOAD="spacesFileUpload",e.TRY_PRO="tryPro",e.HOMEPAGE_FREE_PLAN_UPSELL="homepageFreePlanUpsell",e.LOGIN_BUTTON="loginButton",e.SIGNUP_BUTTON="signupButton",e.LOGIN_BUTTON_HEADER="loginButtonHeader",e.SIGNUP_BUTTON_HEADER="signupButtonHeader",e.FLOATING_SIGNUP="floatingSignup",e.SIDEBAR_LOGIN_AD="sidebarLoginAd",e.SIDEBAR_PRO_UPSELL="sidebarProUpsell",e.SIDE_TEXT_PRO_UPSELL="sideTextProUpsell",e.VISITOR_GATE="visitorGate",e.SHARED_THREAD_LOGIN_GATE="sharedThreadLoginGate",e.SHARED_THREAD_INSTALL_GATE="sharedThreadInstallGate",e.REQUEST_ACCESS_LOGIN_GATE="requestAccessLoginGate",e.GENERATE_IMAGE="generateImage",e.PPLX_API_PAGE="pplxApiPage",e.FILES_PAGE="filesPage",e.PURCHASES_PAGE="purchasesPage",e.GOOGLE_ONETAP_HOME="oneTapHome",e.GOOGLE_ONETAP_THREAD="oneTapThread",e.GOOGLE_ONETAP_PAGE="oneTapPage",e.GOOGLE_ONETAP_DISCOVER="oneTapDiscover",e.GOOGLE_ONETAP_UNKNOWN="oneTap",e.ONBOARDING="onboarding",e.NEXTAUTH_SIGNIN_PAGE="nextauthSignInPage",e.DISCOUNT_CODE_BANNER="discountCodeBanner",e.PARTNER_CODE="partnerCode",e.ARTICLE_NEW="articleNew",e.THREAD_TO_ARTICLE="threadToArticle",e.ORG_CREATE="orgCreate",e.ORG_PANEL="orgPanel",e.LOSS_AVERSION_MODAL="lossAversionModal",e.NEW_THREAD_BUTTON="newThreadButton",e.NEW_THREAD_SHORTCUT="newThreadShortcut",e.DISCOVER_BUTTON="discoverButton",e.THREAD_BOOKMARK_BUTTON="threadBookmarkButton",e.PAGE_BOOKMARK_BUTTON="pageBookmarkButton",e.DISCOVER_FEED_BOOKMARK_BUTTON="discoverFeedBookmarkButton",e.BACK_TO_SCHOOL="backToSchool",e.WELCOME_BACK="welcomeBack",e.LEFT_HAND_NAV="leftHandNav",e.SETTINGS="settings",e.PRO_FEATURE_LIMIT_BANNER="proFeatureLimitBanner",e.BUY_WITH_PRO_BUTTON="buyWithProButton",e.FINANCE_WATCHLIST="financeWatchlist",e.DOWNLOAD_COMET="downloadComet",e.GROW_COMET="growComet",e.GROW_COMET_STUDENTS="growCometStudents",e.GROW_COMET_STUDENTS_COUNTRY="growCometStudentsCountry",e.COMET_ONBOARDING="cometOnboarding",e.PROMO_REDEMPTION="promoRedemption",e.CONNECTORS_PAGE="connectorsPage",e.MARKETING_LANDING_PAGE="marketingLandingPage",e.FINANCE_TRANSCRIPT="financeTranscript",e.FINANCE_RESEARCH="financeResearch",e.LJJ_LANDING_PAGE="ljjLandingPage",e.STUDENT_REFERRAL_LANDING_PAGE="studentReferralLandingPage",e.VOICE_TO_VOICE_BUTTON="voiceToVoiceButton",e.PRO_PERKS="proPerks",e.REFERRAL_PAGE="referralPage",e.HOTEL_BOOKING_PAGE="hotelBookingPage",e.SOURCES_VIEW_MORE="sourcesViewMore",e.SPORTS_WATCHLIST="sportsWatchlist",e.IMAGE_GENERATION_IN_THREAD="imageGenerationInThread",e.AUTO_UPGRADE_TO_PRO="autoUpgradeToPro",e.UNSPECIFIED_GENERALIZED_UPSELL="unspecifiedGeneralizedUpsell",e.MILESTONE_ACHIEVED="milestoneAchieved",e.PRO_PERKS_PARTNER_PAGE="proPerksPartnerPage",e.STUDENT_LANDING_PAGE="studentLandingPage",e.TASKS_PAGE="tasksPage",e.MAX_URL_PAYWALL="maxUrlPaywall",e.MODEL_SELECTOR="modelSelector",e.DISCOVER_FEED_LIKE_BUTTON="discoverFeedLikeButton",e.DISCOVER_FEED_DISLIKE_BUTTON="discoverFeedDislikeButton",e.DISCOVER_FEED_TASK_WIDGET="discoverFeedTaskWidget",e.SIDEBAR_BOTTOM_POPOVER="sidebarBottomPopover",e.HOME_SIDEBAR="homeSidebar",e.WHATSAPP_LINK="whatsappLink",e.UPGRADE_MODAL="upgradeModal",e.MAX_PAGE="maxPage",e.COMET_INVITE="cometInvite",e.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD="loginForCometAgentQueriesInThread",e.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD="cometAgentQueriesRateLimitedInThread",e.PRO_UPGRADE_IN_SIDE_HOMEPAGE="proUpgradeInSideHomepage",e.MISSING_OUT_ON_PRO_IN_THREAD="missingOutOnProInThread",e.VIDEO_GENERATION_IN_THREAD="videoGenerationInThread",e.STUDENT_VERIFICATION_UPSELL="studentVerificationUpsell",e.STUDENT_VERIFICATION_PAGE="studentVerificationPage",e.TRY_ASSISTANT_BUTTON="tryAssistantButton",e.COMET_NTP="cometNTP",e.EMAIL_ASSISTANT_GATE="emailAssistantGate",e.ENTERPRISE_BILLING_BANNER="enterpriseBillingBanner",e.ENTERPRISE_MAX_UPSELL="enterpriseMaxUpsell"})(Ie||(Ie={}));var gt;(function(e){e[e.OWNER_ONLY=0]="OWNER_ONLY",e[e.PRIVATE_READ=1]="PRIVATE_READ",e[e.PUBLIC_READ=2]="PUBLIC_READ",e[e.PUBLIC_PUBLISHED=3]="PUBLIC_PUBLISHED",e[e.ORG_READ=4]="ORG_READ",e[e.COLLECTION_READ=5]="COLLECTION_READ"})(gt||(gt={}));const b9e={[Wt.tiny]:"xs",[Wt.small]:"sm",[Wt.regular]:"base",[Wt.large]:"lg",[Wt.xl]:"xl",[Wt.none]:"base"},$y=A.memo(({icon:e,showClicked:t=!1,buttonSize:n,iconClassName:r})=>i.jsx(me,{icon:t?Rr:e,size:b9e[n]||"base",className:r}));$y.displayName="BaseIcon";const as=A.memo(({size:e=16,className:t,...n})=>i.jsx("div",{className:U("p-two aspect-square shrink-0 animate-spin rounded-full",t),style:{width:e,backgroundImage:"conic-gradient(from 270deg, transparent 0%, currentColor 99%)",mask:`radial-gradient(transparent 0%, transparent ${e/2-2}px, black ${e/2-2}px, black) center center`},...n}));as.displayName="Spinner";function Pt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function xW(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function vse(...e){return t=>{let n=!1;const r=e.map(s=>{const a=xW(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():xW(e[s],null)}}}}function In(...e){return f.useCallback(vse(...e),e)}function _9e(e,t){const n=f.createContext(t),r=a=>{const{children:o,...l}=a,c=f.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function s(a){const o=f.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Ra(e,t=[]){let n=[];function r(a,o){const l=f.createContext(o),c=n.length;n=[...n,o];const u=m=>{const{scope:p,children:h,...g}=m,y=p?.[e]?.[c]||l,v=f.useMemo(()=>g,Object.values(g));return i.jsx(y.Provider,{value:v,children:h})};u.displayName=a+"Provider";function d(m,p){const h=p?.[e]?.[c]||l,g=f.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(o=>f.createContext(o));return function(l){const c=l?.[e]||a;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,w9e(s,...t)]}function w9e(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(a)[`__scope${u}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function P0(e){const t=C9e(e),n=f.forwardRef((r,s)=>{const{children:a,...o}=r,l=f.Children.toArray(a),c=l.find(E9e);if(c){const u=c.props.children,d=l.map(m=>m===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return i.jsx(t,{...o,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}function C9e(e){const t=f.forwardRef((n,r)=>{const{children:s,...a}=n;if(f.isValidElement(s)){const o=k9e(s),l=M9e(a,s.props);return s.type!==f.Fragment&&(l.ref=r?vse(r,o):o),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xse=Symbol("radix.slottable");function S9e(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=xse,t}function E9e(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===xse}function M9e(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function k9e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var T9e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nn=T9e.reduce((e,t)=>{const n=P0(`Primitive.${t}`),r=f.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function N9e(e,t){e&&xs.flushSync(()=>e.dispatchEvent(t))}function ba(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>t.current?.(...n),[])}function A9e(e,t=globalThis?.document){const n=ba(e);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var j9e="DismissableLayer",XN="dismissableLayer.update",R9e="dismissableLayer.pointerDownOutside",I9e="dismissableLayer.focusOutside",bW,bse=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),a1=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,u=f.useContext(bse),[d,m]=f.useState(null),p=d?.ownerDocument??globalThis?.document,[,h]=f.useState({}),g=In(t,E=>m(E)),y=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(v),b=d?y.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,w=b>=x,C=L9e(E=>{const M=E.target,k=[...u.branches].some(T=>T.contains(M));!w||k||(s?.(E),o?.(E),E.defaultPrevented||l?.())},p),S=D9e(E=>{const M=E.target;[...u.branches].some(T=>T.contains(M))||(a?.(E),o?.(E),E.defaultPrevented||l?.())},p);return A9e(E=>{b===u.layers.size-1&&(r?.(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),f.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(bW=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),_W(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=bW)}},[d,p,n,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),_W())},[d,u]),f.useEffect(()=>{const E=()=>h({});return document.addEventListener(XN,E),()=>document.removeEventListener(XN,E)},[]),i.jsx(nn.div,{...c,ref:g,style:{pointerEvents:_?w?"auto":"none":void 0,...e.style},onFocusCapture:Pt(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Pt(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Pt(e.onPointerDownCapture,C.onPointerDownCapture)})});a1.displayName=j9e;var P9e="DismissableLayerBranch",O9e=f.forwardRef((e,t)=>{const n=f.useContext(bse),r=f.useRef(null),s=In(t,r);return f.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(nn.div,{...e,ref:s})});O9e.displayName=P9e;function L9e(e,t=globalThis?.document){const n=ba(e),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){_se(R9e,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function D9e(e,t=globalThis?.document){const n=ba(e),r=f.useRef(!1);return f.useEffect(()=>{const s=a=>{a.target&&!r.current&&_se(I9e,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _W(){const e=new CustomEvent(XN);document.dispatchEvent(e)}function _se(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?N9e(s,a):s.dispatchEvent(a)}var fc=globalThis?.document?f.useLayoutEffect:()=>{},F9e=CR[" useId ".trim().toString()]||(()=>{}),U9e=0;function Um(e){const[t,n]=f.useState(F9e());return fc(()=>{n(r=>r??String(U9e++))},[e]),t?`radix-${t}`:""}const B9e=["top","right","bottom","left"],ui=Math.min,Ns=Math.max,Nw=Math.round,Qx=Math.floor,el=e=>({x:e,y:e}),V9e={left:"right",right:"left",bottom:"top",top:"bottom"},W9e={start:"end",end:"start"};function ZN(e,t,n){return Ns(e,ui(t,n))}function ol(e,t){return typeof e=="function"?e(t):e}function di(e){return e.split("-")[0]}function xh(e){return e.split("-")[1]}function OI(e){return e==="x"?"y":"x"}function LI(e){return e==="y"?"height":"width"}function mc(e){return["top","bottom"].includes(di(e))?"y":"x"}function DI(e){return OI(mc(e))}function $9e(e,t,n){n===void 0&&(n=!1);const r=xh(e),s=DI(e),a=LI(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Aw(o)),[o,Aw(o)]}function H9e(e){const t=Aw(e);return[JN(e),t,JN(t)]}function JN(e){return e.replace(/start|end/g,t=>W9e[t])}function z9e(e,t,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?a:o;default:return[]}}function G9e(e,t,n,r){const s=xh(e);let a=z9e(di(e),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(JN)))),a}function Aw(e){return e.replace(/left|right|bottom|top/g,t=>V9e[t])}function q9e(e){return{top:0,right:0,bottom:0,left:0,...e}}function FI(e){return typeof e!="number"?q9e(e):{top:e,right:e,bottom:e,left:e}}function gp(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function wW(e,t,n){let{reference:r,floating:s}=e;const a=mc(t),o=DI(t),l=LI(o),c=di(t),u=a==="y",d=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let h;switch(c){case"top":h={x:d,y:r.y-s.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:m};break;case"left":h={x:r.x-s.width,y:m};break;default:h={x:r.x,y:r.y}}switch(xh(t)){case"start":h[o]-=p*(n&&u?-1:1);break;case"end":h[o]+=p*(n&&u?-1:1);break}return h}const K9e=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:m}=wW(u,r,c),p=r,h={},g=0;for(let y=0;y<l.length;y++){const{name:v,fn:x}=l[y],{x:b,y:_,data:w,reset:C}=await x({x:d,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});d=b??d,m=_??m,h={...h,[v]:{...h[v],...w}},C&&g<=50&&(g++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:d,y:m}=wW(u,p,c)),y=-1)}return{x:d,y:m,placement:p,strategy:s,middlewareData:h}};async function O0(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:p=!1,padding:h=0}=ol(t,e),g=FI(h),v=l[p?m==="floating"?"reference":"floating":m],x=gp(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=m==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),w=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},C=gp(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:_,strategy:c}):b);return{top:(x.top-C.top+g.top)/w.y,bottom:(C.bottom-x.bottom+g.bottom)/w.y,left:(x.left-C.left+g.left)/w.x,right:(C.right-x.right+g.right)/w.x}}const Y9e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=ol(e,t)||{};if(u==null)return{};const m=FI(d),p={x:n,y:r},h=DI(s),g=LI(h),y=await o.getDimensions(u),v=h==="y",x=v?"top":"left",b=v?"bottom":"right",_=v?"clientHeight":"clientWidth",w=a.reference[g]+a.reference[h]-p[h]-a.floating[g],C=p[h]-a.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=S?S[_]:0;(!E||!await(o.isElement==null?void 0:o.isElement(S)))&&(E=l.floating[_]||a.floating[g]);const M=w/2-C/2,k=E/2-y[g]/2-1,T=ui(m[x],k),j=ui(m[b],k),R=T,O=E-y[g]-j,P=E/2-y[g]/2+M,N=ZN(R,P,O),I=!c.arrow&&xh(s)!=null&&P!==N&&a.reference[g]/2-(P<R?T:j)-y[g]/2<0,D=I?P<R?P-R:P-O:0;return{[h]:p[h]+D,data:{[h]:N,centerOffset:P-N-D,...I&&{alignmentOffset:D}},reset:I}}}),Q9e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...v}=ol(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=di(s),b=mc(l),_=di(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=p||(_||!y?[Aw(l)]:H9e(l)),S=g!=="none";!p&&S&&C.push(...G9e(l,y,g,w));const E=[l,...C],M=await O0(t,v),k=[];let T=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&k.push(M[x]),m){const P=$9e(s,o,w);k.push(M[P[0]],M[P[1]])}if(T=[...T,{placement:s,overflows:k}],!k.every(P=>P<=0)){var j,R;const P=(((j=a.flip)==null?void 0:j.index)||0)+1,N=E[P];if(N)return{data:{index:P,overflows:T},reset:{placement:N}};let I=(R=T.filter(D=>D.overflows[0]<=0).sort((D,F)=>D.overflows[1]-F.overflows[1])[0])==null?void 0:R.placement;if(!I)switch(h){case"bestFit":{var O;const D=(O=T.filter(F=>{if(S){const B=mc(F.placement);return B===b||B==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(B=>B>0).reduce((B,V)=>B+V,0)]).sort((F,B)=>F[1]-B[1])[0])==null?void 0:O[0];D&&(I=D);break}case"initialPlacement":I=l;break}if(s!==I)return{reset:{placement:I}}}return{}}}};function CW(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function SW(e){return B9e.some(t=>e[t]>=0)}const X9e=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=ol(e,t);switch(r){case"referenceHidden":{const a=await O0(t,{...s,elementContext:"reference"}),o=CW(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:SW(o)}}}case"escaped":{const a=await O0(t,{...s,altBoundary:!0}),o=CW(a,n.floating);return{data:{escapedOffsets:o,escaped:SW(o)}}}default:return{}}}}};function wse(e){const t=ui(...e.map(a=>a.left)),n=ui(...e.map(a=>a.top)),r=Ns(...e.map(a=>a.right)),s=Ns(...e.map(a=>a.bottom));return{x:t,y:n,width:r-t,height:s-n}}function Z9e(e){const t=e.slice().sort((s,a)=>s.y-a.y),n=[];let r=null;for(let s=0;s<t.length;s++){const a=t[s];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map(s=>gp(wse(s)))}const J9e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:a,strategy:o}=t,{padding:l=2,x:c,y:u}=ol(e,t),d=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),m=Z9e(d),p=gp(wse(d)),h=FI(l);function g(){if(m.length===2&&m[0].left>m[1].right&&c!=null&&u!=null)return m.find(v=>c>v.left-h.left&&c<v.right+h.right&&u>v.top-h.top&&u<v.bottom+h.bottom)||p;if(m.length>=2){if(mc(n)==="y"){const T=m[0],j=m[m.length-1],R=di(n)==="top",O=T.top,P=j.bottom,N=R?T.left:j.left,I=R?T.right:j.right,D=I-N,F=P-O;return{top:O,bottom:P,left:N,right:I,width:D,height:F,x:N,y:O}}const v=di(n)==="left",x=Ns(...m.map(T=>T.right)),b=ui(...m.map(T=>T.left)),_=m.filter(T=>v?T.left===b:T.right===x),w=_[0].top,C=_[_.length-1].bottom,S=b,E=x,M=E-S,k=C-w;return{top:w,bottom:C,left:S,right:E,width:M,height:k,x:S,y:w}}return p}const y=await a.getElementRects({reference:{getBoundingClientRect:g},floating:r.floating,strategy:o});return s.reference.x!==y.reference.x||s.reference.y!==y.reference.y||s.reference.width!==y.reference.width||s.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}};async function eRe(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=di(n),l=xh(n),c=mc(n)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,m=ol(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof g=="number"&&(h=l==="end"?g*-1:g),c?{x:h*d,y:p*u}:{x:p*u,y:h*d}}const tRe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=t,c=await eRe(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},nRe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x,y:b}=v;return{x,y:b}}},...c}=ol(e,t),u={x:n,y:r},d=await O0(t,c),m=mc(di(s)),p=OI(m);let h=u[p],g=u[m];if(a){const v=p==="y"?"top":"left",x=p==="y"?"bottom":"right",b=h+d[v],_=h-d[x];h=ZN(b,h,_)}if(o){const v=m==="y"?"top":"left",x=m==="y"?"bottom":"right",b=g+d[v],_=g-d[x];g=ZN(b,g,_)}const y=l.fn({...t,[p]:h,[m]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:a,[m]:o}}}}}},rRe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ol(e,t),d={x:n,y:r},m=mc(s),p=OI(m);let h=d[p],g=d[m];const y=ol(l,t),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=p==="y"?"height":"width",w=a.reference[p]-a.floating[_]+v.mainAxis,C=a.reference[p]+a.reference[_]-v.mainAxis;h<w?h=w:h>C&&(h=C)}if(u){var x,b;const _=p==="y"?"width":"height",w=["top","left"].includes(di(s)),C=a.reference[m]-a.floating[_]+(w&&((x=o.offset)==null?void 0:x[m])||0)+(w?0:v.crossAxis),S=a.reference[m]+a.reference[_]+(w?0:((b=o.offset)==null?void 0:b[m])||0)-(w?v.crossAxis:0);g<C?g=C:g>S&&(g=S)}return{[p]:h,[m]:g}}}},sRe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...u}=ol(e,t),d=await O0(t,u),m=di(s),p=xh(s),h=mc(s)==="y",{width:g,height:y}=a.floating;let v,x;m==="top"||m==="bottom"?(v=m,x=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=m,v=p==="end"?"top":"bottom");const b=y-d.top-d.bottom,_=g-d.left-d.right,w=ui(y-d[v],b),C=ui(g-d[x],_),S=!t.middlewareData.shift;let E=w,M=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(M=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=b),S&&!p){const T=Ns(d.left,0),j=Ns(d.right,0),R=Ns(d.top,0),O=Ns(d.bottom,0);h?M=g-2*(T!==0||j!==0?T+j:Ns(d.left,d.right)):E=y-2*(R!==0||O!==0?R+O:Ns(d.top,d.bottom))}await c({...t,availableWidth:M,availableHeight:E});const k=await o.getDimensions(l.floating);return g!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function lS(){return typeof window<"u"}function bh(e){return Cse(e)?(e.nodeName||"").toLowerCase():"#document"}function to(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Cl(e){var t;return(t=(Cse(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Cse(e){return lS()?e instanceof Node||e instanceof to(e).Node:!1}function Ys(e){return lS()?e instanceof Element||e instanceof to(e).Element:!1}function il(e){return lS()?e instanceof HTMLElement||e instanceof to(e).HTMLElement:!1}function EW(e){return!lS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof to(e).ShadowRoot}function o1(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=No(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function aRe(e){return["table","td","th"].includes(bh(e))}function cS(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function UI(e){const t=BI(),n=Ys(e)?No(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function oRe(e){let t=mu(e);for(;il(t)&&!yp(t);){if(UI(t))return t;if(cS(t))return null;t=mu(t)}return null}function BI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yp(e){return["html","body","#document"].includes(bh(e))}function No(e){return to(e).getComputedStyle(e)}function uS(e){return Ys(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function mu(e){if(bh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||EW(e)&&e.host||Cl(e);return EW(t)?t.host:t}function Sse(e){const t=mu(e);return yp(t)?e.ownerDocument?e.ownerDocument.body:e.body:il(t)&&o1(t)?t:Sse(t)}function L0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Sse(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),o=to(s);if(a){const l=eA(o);return t.concat(o,o.visualViewport||[],o1(s)?s:[],l&&n?L0(l):[])}return t.concat(s,L0(s,[],n))}function eA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ese(e){const t=No(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=il(e),a=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=Nw(n)!==a||Nw(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function VI(e){return Ys(e)?e:e.contextElement}function Bm(e){const t=VI(e);if(!il(t))return el(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=Ese(t);let o=(a?Nw(n.width):n.width)/r,l=(a?Nw(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const iRe=el(0);function Mse(e){const t=to(e);return!BI()||!t.visualViewport?iRe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function lRe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==to(e)?!1:t}function Kd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=VI(e);let o=el(1);t&&(r?Ys(r)&&(o=Bm(r)):o=Bm(e));const l=lRe(a,n,r)?Mse(a):el(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,m=s.height/o.y;if(a){const p=to(a),h=r&&Ys(r)?to(r):r;let g=p,y=eA(g);for(;y&&r&&h!==g;){const v=Bm(y),x=y.getBoundingClientRect(),b=No(y),_=x.left+(y.clientLeft+parseFloat(b.paddingLeft))*v.x,w=x.top+(y.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,m*=v.y,c+=_,u+=w,g=to(y),y=eA(g)}}return gp({width:d,height:m,x:c,y:u})}function WI(e,t){const n=uS(e).scrollLeft;return t?t.left+n:Kd(Cl(e)).left+n}function kse(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:WI(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function cRe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",o=Cl(r),l=t?cS(t.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=el(1);const d=el(0),m=il(r);if((m||!m&&!a)&&((bh(r)!=="body"||o1(o))&&(c=uS(r)),il(r))){const h=Kd(r);u=Bm(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const p=o&&!m&&!a?kse(o,c,!0):el(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function uRe(e){return Array.from(e.getClientRects())}function dRe(e){const t=Cl(e),n=uS(e),r=e.ownerDocument.body,s=Ns(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Ns(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+WI(e);const l=-n.scrollTop;return No(r).direction==="rtl"&&(o+=Ns(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function fRe(e,t){const n=to(e),r=Cl(e),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=BI();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function mRe(e,t){const n=Kd(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=il(e)?Bm(e):el(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function MW(e,t,n){let r;if(t==="viewport")r=fRe(e,n);else if(t==="document")r=dRe(Cl(e));else if(Ys(t))r=mRe(t,n);else{const s=Mse(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return gp(r)}function Tse(e,t){const n=mu(e);return n===t||!Ys(n)||yp(n)?!1:No(n).position==="fixed"||Tse(n,t)}function pRe(e,t){const n=t.get(e);if(n)return n;let r=L0(e,[],!1).filter(l=>Ys(l)&&bh(l)!=="body"),s=null;const a=No(e).position==="fixed";let o=a?mu(e):e;for(;Ys(o)&&!yp(o);){const l=No(o),c=UI(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||o1(o)&&!c&&Tse(e,o))?r=r.filter(d=>d!==o):s=l,o=mu(o)}return t.set(e,r),r}function hRe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?cS(t)?[]:pRe(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const m=MW(t,d,s);return u.top=Ns(m.top,u.top),u.right=ui(m.right,u.right),u.bottom=ui(m.bottom,u.bottom),u.left=Ns(m.left,u.left),u},MW(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function gRe(e){const{width:t,height:n}=Ese(e);return{width:t,height:n}}function yRe(e,t,n){const r=il(t),s=Cl(t),a=n==="fixed",o=Kd(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=el(0);if(r||!r&&!a)if((bh(t)!=="body"||o1(s))&&(l=uS(t)),r){const p=Kd(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=WI(s));const u=s&&!r&&!a?kse(s,l):el(0),d=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:d,y:m,width:o.width,height:o.height}}function RM(e){return No(e).position==="static"}function kW(e,t){if(!il(e)||No(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Cl(e)===n&&(n=n.ownerDocument.body),n}function Nse(e,t){const n=to(e);if(cS(e))return n;if(!il(e)){let s=mu(e);for(;s&&!yp(s);){if(Ys(s)&&!RM(s))return s;s=mu(s)}return n}let r=kW(e,t);for(;r&&aRe(r)&&RM(r);)r=kW(r,t);return r&&yp(r)&&RM(r)&&!UI(r)?n:r||oRe(e)||n}const vRe=async function(e){const t=this.getOffsetParent||Nse,n=this.getDimensions,r=await n(e.floating);return{reference:yRe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xRe(e){return No(e).direction==="rtl"}const bRe={convertOffsetParentRelativeRectToViewportRelativeRect:cRe,getDocumentElement:Cl,getClippingRect:hRe,getOffsetParent:Nse,getElementRects:vRe,getClientRects:uRe,getDimensions:gRe,getScale:Bm,isElement:Ys,isRTL:xRe};function Ase(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function _Re(e,t){let n=null,r;const s=Cl(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:m,width:p,height:h}=u;if(l||t(),!p||!h)return;const g=Qx(m),y=Qx(s.clientWidth-(d+p)),v=Qx(s.clientHeight-(m+h)),x=Qx(d),_={rootMargin:-g+"px "+-y+"px "+-v+"px "+-x+"px",threshold:Ns(0,ui(1,c))||1};let w=!0;function C(S){const E=S[0].intersectionRatio;if(E!==c){if(!w)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!Ase(u,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(C,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,_)}n.observe(e)}return o(!0),a}function jse(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=VI(e),d=s||a?[...u?L0(u):[],...L0(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const m=u&&l?_Re(u,n):null;let p=-1,h=null;o&&(h=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let g,y=c?Kd(e):null;c&&v();function v(){const x=Kd(e);y&&!Ase(y,x)&&n(),y=x,g=requestAnimationFrame(v)}return n(),()=>{var x;d.forEach(b=>{s&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),m?.(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const wRe=tRe,CRe=nRe,SRe=Q9e,ERe=sRe,MRe=X9e,TW=Y9e,kOt=J9e,kRe=rRe,TRe=(e,t,n)=>{const r=new Map,s={platform:bRe,...n},a={...s.platform,_c:r};return K9e(e,t,{...s,platform:a})};var L_=typeof document<"u"?f.useLayoutEffect:f.useEffect;function jw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!jw(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!jw(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Rse(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function NW(e,t){const n=Rse(e);return Math.round(t*n)/n}function IM(e){const t=f.useRef(e);return L_(()=>{t.current=e}),t}function Ise(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,m]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=f.useState(r);jw(p,r)||h(r);const[g,y]=f.useState(null),[v,x]=f.useState(null),b=f.useCallback(F=>{F!==S.current&&(S.current=F,y(F))},[]),_=f.useCallback(F=>{F!==E.current&&(E.current=F,x(F))},[]),w=a||g,C=o||v,S=f.useRef(null),E=f.useRef(null),M=f.useRef(d),k=c!=null,T=IM(c),j=IM(s),R=IM(u),O=f.useCallback(()=>{if(!S.current||!E.current)return;const F={placement:t,strategy:n,middleware:p};j.current&&(F.platform=j.current),TRe(S.current,E.current,F).then(B=>{const V={...B,isPositioned:R.current!==!1};P.current&&!jw(M.current,V)&&(M.current=V,xs.flushSync(()=>{m(V)}))})},[p,t,n,j,R]);L_(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,m(F=>({...F,isPositioned:!1})))},[u]);const P=f.useRef(!1);L_(()=>(P.current=!0,()=>{P.current=!1}),[]),L_(()=>{if(w&&(S.current=w),C&&(E.current=C),w&&C){if(T.current)return T.current(w,C,O);O()}},[w,C,O,T,k]);const N=f.useMemo(()=>({reference:S,floating:E,setReference:b,setFloating:_}),[b,_]),I=f.useMemo(()=>({reference:w,floating:C}),[w,C]),D=f.useMemo(()=>{const F={position:n,left:0,top:0};if(!I.floating)return F;const B=NW(I.floating,d.x),V=NW(I.floating,d.y);return l?{...F,transform:"translate("+B+"px, "+V+"px)",...Rse(I.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:V}},[n,l,I.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:O,refs:N,elements:I,floatingStyles:D}),[d,O,N,I,D])}const NRe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?TW({element:r.current,padding:s}).fn(n):{}:r?TW({element:r,padding:s}).fn(n):{}}}},$I=(e,t)=>({...wRe(e),options:[e,t]}),Pse=(e,t)=>({...CRe(e),options:[e,t]}),Ose=(e,t)=>({...kRe(e),options:[e,t]}),Lse=(e,t)=>({...SRe(e),options:[e,t]}),Dse=(e,t)=>({...ERe(e),options:[e,t]}),ARe=(e,t)=>({...MRe(e),options:[e,t]}),Fse=(e,t)=>({...NRe(e),options:[e,t]});var jRe="Arrow",Use=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return i.jsx(nn.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Use.displayName=jRe;var RRe=Use;function dS(e){const[t,n]=f.useState(void 0);return fc(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var HI="Popper",[Bse,_h]=Ra(HI),[IRe,Vse]=Bse(HI),Wse=e=>{const{__scopePopper:t,children:n}=e,[r,s]=f.useState(null);return i.jsx(IRe,{scope:t,anchor:r,onAnchorChange:s,children:n})};Wse.displayName=HI;var $se="PopperAnchor",Hse=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=Vse($se,n),o=f.useRef(null),l=In(t,o),c=f.useRef(null);return f.useEffect(()=>{const u=c.current;c.current=r?.current||o.current,u!==c.current&&a.onAnchorChange(c.current)}),r?null:i.jsx(nn.div,{...s,ref:l})});Hse.displayName=$se;var zI="PopperContent",[PRe,ORe]=Bse(zI),zse=f.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:g,...y}=e,v=Vse(zI,n),[x,b]=f.useState(null),_=In(t,Z=>b(Z)),[w,C]=f.useState(null),S=dS(w),E=S?.width??0,M=S?.height??0,k=r+(a!=="center"?"-"+a:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(u)?u:[u],R=j.length>0,O={padding:T,boundary:j.filter(DRe),altBoundary:R},{refs:P,floatingStyles:N,placement:I,isPositioned:D,middlewareData:F}=Ise({strategy:"fixed",placement:k,whileElementsMounted:(...Z)=>jse(...Z,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[$I({mainAxis:s+M,alignmentAxis:o}),c&&Pse({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Ose():void 0,...O}),c&&Lse({...O}),Dse({...O,apply:({elements:Z,rects:re,availableWidth:q,availableHeight:J})=>{const{width:te,height:se}=re.reference,de=Z.floating.style;de.setProperty("--radix-popper-available-width",`${q}px`),de.setProperty("--radix-popper-available-height",`${J}px`),de.setProperty("--radix-popper-anchor-width",`${te}px`),de.setProperty("--radix-popper-anchor-height",`${se}px`)}}),w&&Fse({element:w,padding:l}),FRe({arrowWidth:E,arrowHeight:M}),p&&ARe({strategy:"referenceHidden",...O})]}),[B,V]=Kse(I),$=ba(g);fc(()=>{D&&$?.()},[D,$]);const G=F.arrow?.x,X=F.arrow?.y,Y=F.arrow?.centerOffset!==0,[W,H]=f.useState();return fc(()=>{x&&H(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...N,transform:D?N.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(PRe,{scope:n,placedSide:B,onArrowChange:C,arrowX:G,arrowY:X,shouldHideArrow:Y,children:i.jsx(nn.div,{"data-side":B,"data-align":V,...y,ref:_,style:{...y.style,animation:D?void 0:"none"}})})})});zse.displayName=zI;var Gse="PopperArrow",LRe={top:"bottom",right:"left",bottom:"top",left:"right"},qse=f.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=ORe(Gse,r),o=LRe[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(RRe,{...s,ref:n,style:{...s.style,display:"block"}})})});qse.displayName=Gse;function DRe(e){return e!==null}var FRe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,o=s.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=Kse(n),m={start:"0%",center:"50%",end:"100%"}[d],p=(s.arrow?.x??0)+l/2,h=(s.arrow?.y??0)+c/2;let g="",y="";return u==="bottom"?(g=o?m:`${p}px`,y=`${-c}px`):u==="top"?(g=o?m:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,y=o?m:`${h}px`):u==="left"&&(g=`${r.floating.width+c}px`,y=o?m:`${h}px`),{data:{x:g,y}}}});function Kse(e){const[t,n="center"]=e.split("-");return[t,n]}var GI=Wse,fS=Hse,qI=zse,KI=qse,URe="Portal",i1=f.forwardRef((e,t)=>{const{container:n,...r}=e,[s,a]=f.useState(!1);fc(()=>a(!0),[]);const o=n||s&&globalThis?.document?.body;return o?hte.createPortal(i.jsx(nn.div,{...r,ref:t}),o):null});i1.displayName=URe;function BRe(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var Os=e=>{const{present:t,children:n}=e,r=VRe(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),a=In(r.ref,WRe(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:a}):null};Os.displayName="Presence";function VRe(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),a=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=BRe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Xx(r.current);a.current=l==="mounted"?u:"none"},[l]),fc(()=>{const u=r.current,d=s.current;if(d!==e){const p=a.current,h=Xx(u);e?c("MOUNT"):h==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&p!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),fc(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,m=h=>{const y=Xx(r.current).includes(CSS.escape(h.animationName));if(h.target===t&&y&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},p=h=>{h.target===t&&(a.current=Xx(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Xx(e){return e?.animationName||"none"}function WRe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var $Re=CR[" useInsertionEffect ".trim().toString()]||fc;function _i({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,o]=HRe({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const m=d.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=f.useCallback(d=>{if(l){const m=zRe(d)?d(e):d;m!==e&&o.current?.(m)}else a(d)},[l,e,a,o]);return[c,u]}function HRe({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),s=f.useRef(n),a=f.useRef(t);return $Re(()=>{a.current=t},[t]),f.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}function zRe(e){return typeof e=="function"}var GRe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qRe="VisuallyHidden",l1=f.forwardRef((e,t)=>i.jsx(nn.span,{...e,ref:t,style:{...GRe,...e.style}}));l1.displayName=qRe;var YI=l1,[mS,TOt]=Ra("Tooltip",[_h]),pS=_h(),Yse="TooltipProvider",KRe=700,tA="tooltip.open",[YRe,QI]=mS(Yse),XI=e=>{const{__scopeTooltip:t,delayDuration:n=KRe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,o=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(YRe,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};XI.displayName=Yse;var D0="Tooltip",[QRe,c1]=mS(D0),Qse=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=QI(D0,e.__scopeTooltip),u=pS(t),[d,m]=f.useState(null),p=Um(),h=f.useRef(0),g=o??c.disableHoverableContent,y=l??c.delayDuration,v=f.useRef(!1),[x,b]=_i({prop:r,defaultProp:s??!1,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(tA))):c.onClose(),a?.(E)},caller:D0}),_=f.useMemo(()=>x?v.current?"delayed-open":"instant-open":"closed",[x]),w=f.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,b(!0)},[b]),C=f.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b(!1)},[b]),S=f.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,b(!0),h.current=0},y)},[y,b]);return f.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),i.jsx(GI,{...u,children:i.jsx(QRe,{scope:t,contentId:p,open:x,stateAttribute:_,trigger:d,onTriggerChange:m,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayedRef.current?S():w()},[c.isOpenDelayedRef,S,w]),onTriggerLeave:f.useCallback(()=>{g?C():(window.clearTimeout(h.current),h.current=0)},[C,g]),onOpen:w,onClose:C,disableHoverableContent:g,children:n})})};Qse.displayName=D0;var nA="TooltipTrigger",ZI=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=c1(nA,n),a=QI(nA,n),o=pS(n),l=f.useRef(null),c=In(t,l,s.onTriggerChange),u=f.useRef(!1),d=f.useRef(!1),m=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),i.jsx(fS,{asChild:!0,...o,children:i.jsx(nn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Pt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Pt(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Pt(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Pt(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Pt(e.onBlur,s.onClose),onClick:Pt(e.onClick,s.onClose)})})});ZI.displayName=nA;var JI="TooltipPortal",[XRe,ZRe]=mS(JI,{forceMount:void 0}),e7=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,a=c1(JI,t);return i.jsx(XRe,{scope:t,forceMount:n,children:i.jsx(Os,{present:n||a.open,children:i.jsx(i1,{asChild:!0,container:s,children:r})})})};e7.displayName=JI;var vp="TooltipContent",t7=f.forwardRef((e,t)=>{const n=ZRe(vp,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,o=c1(vp,e.__scopeTooltip);return i.jsx(Os,{present:r||o.open,children:o.disableHoverableContent?i.jsx(Xse,{side:s,...a,ref:t}):i.jsx(JRe,{side:s,...a,ref:t})})}),JRe=f.forwardRef((e,t)=>{const n=c1(vp,e.__scopeTooltip),r=QI(vp,e.__scopeTooltip),s=f.useRef(null),a=In(t,s),[o,l]=f.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:m}=r,p=f.useCallback(()=>{l(null),m(!1)},[m]),h=f.useCallback((g,y)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},b=rIe(x,v.getBoundingClientRect()),_=sIe(x,b),w=aIe(y.getBoundingClientRect()),C=iIe([..._,...w]);l(C),m(!0)},[m]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&d){const g=v=>h(v,d),y=v=>h(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",y)}}},[c,d,h,p]),f.useEffect(()=>{if(o){const g=y=>{const v=y.target,x={x:y.clientX,y:y.clientY},b=c?.contains(v)||d?.contains(v),_=!oIe(x,o);b?p():_&&(p(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,p]),i.jsx(Xse,{...e,ref:a})}),[eIe,tIe]=mS(D0,{isInside:!1}),nIe=S9e("TooltipContent"),Xse=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=c1(vp,n),u=pS(n),{onClose:d}=c;return f.useEffect(()=>(document.addEventListener(tA,d),()=>document.removeEventListener(tA,d)),[d]),f.useEffect(()=>{if(c.trigger){const m=p=>{p.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,d]),i.jsx(a1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:i.jsxs(qI,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(nIe,{children:r}),i.jsx(eIe,{scope:n,isInside:!0,children:i.jsx(YI,{id:c.contentId,role:"tooltip",children:s||r})})]})})});t7.displayName=vp;var Zse="TooltipArrow",Rw=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=pS(n);return tIe(Zse,n).isInside?null:i.jsx(KI,{...s,...r,ref:t})});Rw.displayName=Zse;function rIe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function sIe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function aIe(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function oIe(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],c=t[o],u=l.x,d=l.y,m=c.x,p=c.y;d>r!=p>r&&n<(m-u)*(r-d)/(p-d)+u&&(s=!s)}return s}function iIe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),lIe(t)}function lIe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var cIe=XI,Jse=Qse,uIe=ZI,dIe=e7,fIe=t7,mIe=Rw;const eae=new Proxy(Object.freeze([]),{set(){throw new Error("Cannot modify default array")}}),le=eae,tae=new Proxy(Object.freeze({}),{set(){throw new Error("Cannot modify default object")}}),nae=A.memo(({className:e,textClassName:t,text:n,shortcut:r=le,...s})=>i.jsxs("div",{className:U("gap-x-sm bg-inverse px-sm py-xs dark:bg-offsetPlus flex max-w-[280px] items-center rounded",e),...s,children:[typeof n=="string"?i.jsx(L,{variant:"tiny",color:"white",className:t,children:n}):n,r.length>0&&i.jsx("div",{className:"gap-two flex",children:r.map(a=>i.jsx(L,{variant:"smallCaps",className:"border-subtlest bg-inverse px-xs py-two dark:bg-offsetPlus rounded border shadow-md",children:i.jsx("span",{className:"text-light",children:a})},a))})]}));nae.displayName="TooltipBody";const pn=A.memo(({tooltipText:e,tooltipLayout:t="top",children:n,keyboardShortcut:r,showTooltip:s=!0,className:a="",asChild:o=!1,testId:l,offset:c=8,closeOnClick:u=!0,bodyClassName:d,bodyTextClassName:m,arrowClassName:p,open:h,onClickOutsideTooltip:g,onOpenChange:y,delayDuration:v,childrenClassName:x})=>s?i.jsxs(Jse,{open:h,onOpenChange:y,delayDuration:v,children:[i.jsx(dIe,{children:i.jsxs(fIe,{side:t,sideOffset:c,className:U(t==="bottom"&&"data-[state=closed]:animate-slideUpAndFadeOut data-[state=delayed-open]:animate-slideDownAndFadeIn",t==="top"&&"data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn",t==="left"&&"data-[state=closed]:animate-slideRightAndFadeOut data-[state=delayed-open]:animate-slideLeftAndFadeIn",t==="right"&&"data-[state=closed]:animate-slideLeftAndFadeOut data-[state=delayed-open]:animate-slideRightAndFadeIn",a),onPointerDownOutside:u?g:b=>{b.preventDefault()},children:[i.jsx(nae,{text:e,shortcut:r,"data-test-id":l,className:d,textClassName:m}),p&&i.jsx(mIe,{className:U("fill-foreground dark:fill-offsetPlus bg-transparent",p)})]})}),i.jsx(uIe,{asChild:o,className:x,onClick:u?g:b=>{b.preventDefault()},children:n})]}):i.jsx(i.Fragment,{children:n}));pn.displayName="TooltipWrapper";const pIe=2e3,hIe=1e3,AW={[Wt.tiny]:{height:"h-6",text:"text-xs",padding:"px-2",iconWrapperSize:"size-3.5",baselineShift:"-mb-px"},[Wt.small]:{height:"h-8",text:"text-sm",padding:"px-2.5",iconWrapperSize:"size-4",baselineShift:"-mb-px"},[Wt.regular]:{height:"h-10",text:"text-base",padding:"px-3",iconWrapperSize:"size-5",baselineShift:"mb-[-2px]"},[Wt.large]:{height:"h-14",text:"text-lg",padding:"px-5",iconWrapperSize:"size-7",baselineShift:"mb-[-3px]"}},rae=e=>AW[e]||AW[Wt.regular],jW=({children:e,buttonSize:t=Wt.regular})=>i.jsx("div",{className:U("flex shrink-0 items-center justify-center",rae(t).iconWrapperSize),children:e}),n7=f.memo(e=>{const{text:t,textClassName:n="",size:r=Wt.regular,disabled:s=!1,fullWidth:a,fullWidthMobile:o,layout:l="center",type:c="button",noWrap:u=!0,onClick:d=Rn,onMouseDown:m,href:p,target:h,extraCSS:g,icon:y,iconClassName:v,pill:x=!1,noRounded:b=!1,toolTip:_,keyboardShortcut:w,tooltipLayout:C="top",tooltipProps:S,badge:E,chevron:M,isLoading:k,loadingVariant:T="spin",leadingComponent:j,trailingComponent:R,maxWidth:O,chevronIcon:P=Qn,clickFeedback:N=!1,debounce:I=!1,testId:D,ariaLabel:F,variant:B,autoFocus:V,noPadding:$=!1,ref:G,...X}=e,[Y,W]=f.useState(!1),[H,Z]=f.useState(!1),[re,q]=f.useState(s),J=f.useMemo(()=>rae(r),[r]);f.useEffect(()=>{q(I&&H||s)},[I,H,s]);const te=Ce=>{(!I||!H)&&(Z(!0),setTimeout(()=>Z(!1),hIe),d(Ce)),N&&(W(!0),setTimeout(()=>W(!1),pIe))},se=!!t,de=f.useMemo(()=>U(g,"font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium",{"justify-center text-center items-center":l==="center","justify-start":l==="left","rounded-none":b,"rounded-lg":!x&&!b,"rounded-full":x&&!b,"cursor-default opacity-50":re,"cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center":!re,"whitespace-nowrap":u,"break-words":!u,"flex w-full":a,"inline-flex":!a&&!o,"flex w-full md:inline-flex md:w-auto":o,[J.text]:!0,[J.height]:!0,[J.padding]:se,[x?"aspect-square":"aspect-[9/8]"]:!se&&!M&&!E&&!(y&&j)}),[E,J,M,re,g,a,o,se,y,l,j,b,u,x]),fe=f.useMemo(()=>U("flex items-center min-w-0 gap-two",{"flex-col":l==="stacked","justify-center":l==="center","justify-left":l==="left","justify-between":l==="split","w-full":a,"gap-sm":l==="stacked"}),[a,l]),ve=f.useMemo(()=>l==="stacked"||r===Wt.regular&&!se||r===Wt.large&&se?16:14,[l,r,se]),ue=i.jsxs("div",{className:fe,style:{maxWidth:O},children:[j&&i.jsx("div",{children:j}),k&&i.jsx(jW,{buttonSize:r,children:T==="spin"?i.jsx(as,{size:ve}):T==="pulse"?i.jsx("div",{className:U("relative flex items-center justify-center",B==="primary"?"text-inverse":"text-super"),children:i.jsxs("div",{className:"relative scale-[0.8]",children:[i.jsx($y,{icon:xN,buttonSize:r}),i.jsx($y,{icon:xN,buttonSize:r,iconClassName:"duration-1200 absolute inset-0 animate-ping"})]})}):null}),!k&&y&&i.jsx(jW,{buttonSize:r,children:i.jsx($y,{icon:y,showClicked:Y,buttonSize:r,iconClassName:v})}),t&&i.jsx("div",{className:U("relative truncate text-center",{"px-1":!$,"leading-loose":l!=="stacked","leading-none":l==="stacked"},J.baselineShift,n),children:t}),E&&i.jsxs("span",{children:["  ",E]}),M&&i.jsx(me,{size:"xs",icon:P,className:"shrink-0 opacity-50"}),R]});let ie;y&&!t&&_&&(ie=_);const be=f.useMemo(()=>({WebkitTapHighlightColor:"transparent"}),[]);let Se;return p!==void 0?Se=i.jsx(Ye,{"data-testid":D,role:"button","aria-label":F??ie,href:p,className:de,target:h,onClick:d,onMouseDown:m,style:be,...X,ref:G,children:ue}):Se=i.jsx("button",{"data-testid":D,"aria-label":F??ie,type:c,disabled:re,onClick:te,onMouseDown:m,className:de,...X,ref:G,children:ue}),w||_?i.jsx(pn,{tooltipText:_??"",keyboardShortcut:w,tooltipLayout:C,...S,asChild:!0,children:Se}):Se});n7.displayName="ButtonBase";const Te=f.memo(({variant:e="common",noPadding:t,noXPadding:n,extraCSS:r,...s})=>{const a=f.useMemo(()=>U("focus-visible:bg-offsetPlus",{"!p-0 !h-auto hover:!bg-transparent":t},{"!px-0 hover:!bg-transparent":n},{super:"hover:bg-offsetPlus text-super dark:hover:bg-offsetPlus",primary:"hover:bg-offsetPlus text-foreground dark:hover:bg-offsetPlus",common:"hover:bg-offsetPlus text-quiet  hover:text-foreground dark:hover:bg-offsetPlus",positive:"text-quiet  hover:bg-offsetPlus hover:text-super",positiveSelected:"text-super hover:bg-offsetPlus hover:text-super",negative:"text-quiet hover:bg-offsetPlus hover:text-caution",negativeSelected:"text-caution dark:text-caution hover:bg-offsetPlus hover:text-caution",noBackground:"text-quiet hover:text-foreground",noHover:"text-quiet  cursor-default",offset:"text-foreground bg-offsetPlus"}[e],r),[r,e,t,n]);return i.jsx(n7,{testId:s.testId,extraCSS:a,...s})});Te.displayName="TextButton";const gIe=f.createContext(null),PM={didCatch:!1,error:null};let yIe=class extends f.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=PM}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:a,reason:"imperative-api"}),this.setState(PM)}}componentDidCatch(t,n){var r,s;(r=(s=this.props).onError)===null||r===void 0||r.call(s,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&n.error!==null&&vIe(t.resetKeys,s)){var a,o;(a=(o=this.props).onReset)===null||a===void 0||a.call(o,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(PM)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:s}=this.props,{didCatch:a,error:o}=this.state;let l=t;if(a){const c={error:o,resetErrorBoundary:this.resetErrorBoundary};if(f.isValidElement(s))l=s;else if(typeof n=="function")l=n(c);else if(r)l=f.createElement(r,c);else throw o}return f.createElement(gIe.Provider,{value:{didCatch:a,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}};function vIe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}const r7={transparent:"transparent",subtle:"subtle",subtler:"subtler",background:"background"},xIe="border-subtlest ring-subtlest divide-subtlest",z=A.memo(({variant:e=r7.transparent,className:t,onClick:n,onMouseOver:r,onMouseLeave:s,children:a,id:o,bgHover:l,style:c,testId:u,as:d="div",ref:m,noBorder:p,...h})=>{const g=A.useMemo(()=>{const y={transparent:"bg-transparent",super:"bg-super",superBorder:"border border-super",superLight:"bg-superBG",subtle:"bg-subtle",subtler:"bg-subtler",red:"bg-caution",background:"bg-base",underlay:"bg-underlay",offsetLoading:"bg-subtlest animate-pulse",offsetPlus:"bg-offsetPlus",textColor:"bg-inverse",orange:"bg-attention",raised:"bg-raised dark:bg-offset",raisedOffset:"bg-raisedOffset",max:"bg-max",maxBorder:"border border-max"},v={subtle:"md:hover:bg-subtle",subtler:"md:hover:bg-subtler",offsetPlus:"md:hover:bg-offsetPlus",raisedOffset:"md:hover:bg-raisedOffset",transparent:"md:hover:bg-transparent",super:"md:hover:bg-super"};return U(t,!p&&e!=="maxBorder"&&e!=="superBorder"&&xIe,l?"transition duration-300":"",y[e]||y.transparent,l&&v[l]||"")},[l,t,e,p]);return A.createElement(d,{id:o,ref:m,className:g,onClick:n,onMouseOver:r,onMouseLeave:s,style:c,"data-testid":u,...h},a)});z.displayName="Box";const ge=f.memo(e=>{const{variant:t="common",disabled:n,extraCSS:r,...s}=e,{buttonClass:a}=f.useMemo(()=>{const o={disabled:"bg-inverse/15 text-quiet",primary:"bg-super text-inverse hover:opacity-80",primaryGhost:"border border-super/20 bg-super/10 hover:bg-super/20 hover:border-super/30 text-super",common:"bg-offsetPlus text-foreground md:hover:text-quiet",border:"border border-subtler text-quiet md:hover:border-subtle md:hover:text-quiet hover:bg-subtler bg-base",inverted:"bg-inverse text-inverse hover:opacity-80",rejecter:"border border-subtlest text-caution dark:hover:text-foreground hover:bg-caution/30 hover:border-caution/20 bg-base",rejected:"bg-caution hover:opacity-50 text-white",orange:"bg-attention text-white hover:opacity-50",maxGold:"bg-max dark:text-inverse hover:opacity-80"},l=n?o.disabled:o[t];return{buttonClass:U(l,r)}},[t,n,r]);return i.jsx(n7,{extraCSS:a,disabled:n,variant:t,...s})});ge.displayName="Button";class bIe extends Bv{name="ReactRenderingError"}function hS(e){ee.info("Reloading window",{reason:e,url:window.location.href}),window.location.reload()}const _Ie=()=>hS("Error boundary"),wIe=({resetErrorBoundary:e})=>{const{$t:t}=Q(),n=f.useCallback(()=>{e()},[e]);return i.jsx(z,{variant:"background",className:"overflow-hidden rounded-xl",children:i.jsxs(z,{variant:"subtler",className:"px-md flex w-full items-center justify-between py-3",children:[i.jsx(L,{variant:"smallBold",children:t({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})}),i.jsx(ge,{size:"tiny",text:t({defaultMessage:"Retry",id:"62nsdyMyIO"}),type:"button",onClick:n})]})})},sae=A.memo(()=>null);sae.displayName="NullFallback";const CIe=/load(.*?)chunk/i,zr=A.memo(({fallback:e=wIe,children:t,onError:n,code:r="REACT_RENDERING_ERROR"})=>{const s=f.useCallback((a,o)=>{n?.(a,o);let l;if(a instanceof Bv)l=a;else{let c=r;CIe.test(a?.message??"")&&(c="CHUNK_LOADING_ERROR"),l=new bIe(c,{message:a.message,cause:a})}l.stack=o.componentStack||void 0,ee.error(l)},[n,r]);return i.jsx(yIe,{FallbackComponent:e||sae,onError:s,onReset:_Ie,children:t})});zr.displayName="ErrorBoundary";const aae=({shouldShow:e,imageSrc:t,imageAlt:n,title:r,description:s,primaryAction:a,onDismiss:o,iconXDismiss:l})=>{const c=h9e();return!e||!c?null:i.jsx(zr,{fallback:null,children:i.jsxs(xe.div,{className:"p-sm m-md ring-offsetPlus bg-base gap-md fixed bottom-0 right-0 hidden max-w-[320px] grid-cols-1 rounded-xl shadow-md ring-1 md:grid",initial:{opacity:0,y:0},animate:{opacity:1,y:0},transition:{duration:.5},children:[t&&i.jsx("img",{src:t,alt:n,className:"bg-offsetPlus size-full rounded-lg object-cover",style:{aspectRatio:"528/240"}}),l&&i.jsx("div",{className:"right-md top-md absolute",children:i.jsx(Te,{size:"small",icon:Lt,onClick:o,noPadding:!0,iconClassName:t?"text-white":void 0,"data-testid":"floating-card-upsell-dismiss"})}),i.jsxs("div",{className:U("px-sm",{"pt-sm":!t}),children:[i.jsx(L,{variant:"smallBold",className:"mb-xs pr-md",children:r}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"whitespace-pre-line leading-snug",children:s})]}),i.jsxs("div",{className:U("px-sm pb-sm gap-xs flex flex-row",t?"ml-auto":"mr-auto"),children:[!l&&i.jsx(Te,{variant:"common",size:"small",onClick:o,text:"Dismiss"}),a]})]})})};var wh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yd=typeof window>"u"||"Deno"in globalThis;function vo(){}function SIe(e,t){return typeof e=="function"?e(t):e}function rA(e){return typeof e=="number"&&e>=0&&e!==1/0}function oae(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Vm(e,t){return typeof e=="function"?e(t):e}function Jo(e,t){return typeof e=="function"?e(t):e}function RW(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==s7(o,t.options))return!1}else if(!F0(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function IW(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Qd(t.options.mutationKey)!==Qd(a))return!1}else if(!F0(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function s7(e,t){return(t?.queryKeyHashFn||Qd)(e)}function Qd(e){return JSON.stringify(e,(t,n)=>sA(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function F0(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!F0(e[n],t[n])):!1}function iae(e,t){if(e===t)return e;const n=PW(e)&&PW(t);if(n||sA(e)&&sA(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const d=n?u:a[u];(!n&&r.includes(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,c++):(l[d]=iae(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&c++)}return s===o&&c===s?e:l}return t}function Iw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function PW(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function sA(e){if(!OW(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!OW(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function OW(e){return Object.prototype.toString.call(e)==="[object Object]"}function EIe(e){return new Promise(t=>{setTimeout(t,e)})}function aA(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?iae(e,t):t}function Ch(e){return e}function MIe(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function kIe(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var lae=Symbol(),cae=(e,t)=>!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===lae?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn,TIe=class extends wh{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Yd&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},a7=new TIe,NIe=class extends wh{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Yd&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},Pw=new NIe;function AIe(e){return Math.min(1e3*2**e,3e4)}function uae(e){return(e??"online")==="online"?Pw.isOnline():!0}var dae=class{constructor(e){this.revert=e?.revert,this.silent=e?.silent}};function OM(e){return e instanceof dae}function fae(e){let t=!1,n=0,r=!1,s,a,o;const l=new Promise((x,b)=>{a=x,o=b}),c=x=>{r||(g(new dae(x)),e.abort?.())},u=()=>{t=!0},d=()=>{t=!1},m=()=>a7.isFocused()&&(e.networkMode==="always"||Pw.isOnline())&&e.canRun(),p=()=>uae(e.networkMode)&&e.canRun(),h=x=>{r||(r=!0,e.onSuccess?.(x),s?.(),a(x))},g=x=>{r||(r=!0,e.onError?.(x),s?.(),o(x))},y=()=>new Promise(x=>{s=b=>{(r||m())&&x(b)},e.onPause?.()}).then(()=>{s=void 0,r||e.onContinue?.()}),v=()=>{if(r)return;let x;const b=n===0?e.initialPromise:void 0;try{x=b??e.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(h).catch(_=>{if(r)return;const w=e.retry??(Yd?0:3),C=e.retryDelay??AIe,S=typeof C=="function"?C(n,_):C,E=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(t||!E){g(_);return}n++,e.onFail?.(n,_),EIe(S).then(()=>m()?void 0:y()).then(()=>{t?g(_):v()})})};return{promise:l,cancel:c,continue:()=>(s?.(),l),cancelRetry:u,continueRetry:d,canStart:p,start:()=>(p()?v():y().then(v),l)}}function jIe(){let e=[],t=0,n=p=>{p()},r=p=>{p()},s=p=>setTimeout(p,0);const a=p=>{s=p},o=p=>{let h;t++;try{h=p()}finally{t--,t||u()}return h},l=p=>{t?e.push(p):s(()=>{n(p)})},c=p=>(...h)=>{l(()=>{p(...h)})},u=()=>{const p=e;e=[],p.length&&s(()=>{r(()=>{p.forEach(h=>{n(h)})})})};return{batch:o,batchCalls:c,schedule:l,setNotifyFunction:p=>{n=p},setBatchNotifyFunction:p=>{r=p},setScheduler:a}}var Wr=jIe(),mae=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rA(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Yd?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},RIe=class extends mae{#e;#t;#r;#n;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=e.state||IIe(this.options),this.state=this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const n=aA(this.state.data,e,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(vo).catch(vo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Jo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!oae(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},s=()=>{const l=cae(this.options,t),c={queryKey:this.queryKey,meta:this.meta};return r(c),this.#a=!1,this.options.persister?this.options.persister(l,c,this):l(c)},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};r(a),this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const o=l=>{OM(l)&&l.silent||this.#s({type:"error",error:l}),OM(l)||(this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#n=fae({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:o,onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...pae(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return OM(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Wr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function pae(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uae(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function IIe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var hae=class extends wh{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??s7(r,t);let a=this.get(s);return a||(a=new RIe({cache:this,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Wr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>RW(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>RW(e,n)):t}notify(e){Wr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Wr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Wr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},PIe=class extends mae{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||gae(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=fae({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(r,s)=>{this.#n({type:"failed",failureCount:r,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#r.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:n}),await this.#t.config.onMutate?.(e,this);const s=await this.options.onMutate?.(e);s!==this.state.context&&this.#n({type:"pending",context:s,variables:e,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,e,this.state.context,this),await this.options.onError?.(r,e,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,e,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Wr.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function gae(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yae=class extends wh{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,n){const r=new PIe({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){const t=Zx(e),n=this.#e.get(t)??[];n.push(e),this.#e.set(t,n),this.notify({type:"added",mutation:e})}remove(e){const t=Zx(e);if(this.#e.has(t)){const n=this.#e.get(t)?.filter(r=>r!==e);n&&(n.length===0?this.#e.delete(t):this.#e.set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(Zx(e))?.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(Zx(e))?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){Wr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(n=>IW(t,n))}findAll(e={}){return this.getAll().filter(t=>IW(e,t))}notify(e){Wr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Wr.batch(()=>Promise.all(e.map(t=>t.continue().catch(vo))))}};function Zx(e){return e.options.scope?.id??String(e.mutationId)}function oA(e){return{onFetch:(t,n)=>{const r=async()=>{const s=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],l=t.state.data?.pageParams||[],c={pages:[],pageParams:[]};let u=!1;const d=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},m=cae(t.options,t.fetchOptions),p=async(g,y,v)=>{if(u)return Promise.reject();if(y==null&&g.pages.length)return Promise.resolve(g);const x={queryKey:t.queryKey,pageParam:y,direction:v?"backward":"forward",meta:t.options.meta};d(x);const b=await m(x),{maxPages:_}=t.options,w=v?kIe:MIe;return{pages:w(g.pages,b,_),pageParams:w(g.pageParams,y,_)}};let h;if(a&&o.length){const g=a==="backward",y=g?vae:iA,v={pages:o,pageParams:l},x=y(s,v);h=await p(v,x,g)}else{h=await p(c,l[0]??s.initialPageParam);const g=e??o.length;for(let y=1;y<g;y++){const v=iA(s,h);h=await p(h,v)}}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=r}}}function iA(e,{pages:t,pageParams:n}){const r=t.length-1;return e.getNextPageParam(t[r],t,n[r],n)}function vae(e,{pages:t,pageParams:n}){return e.getPreviousPageParam?.(t[0],t,n[0],n)}function OIe(e,t){return t?iA(e,t)!=null:!1}function LIe(e,t){return!t||!e.getPreviousPageParam?!1:vae(e,t)!=null}var DIe=class{#e;#t;#r;#n;#o;#a;#s;#i;constructor(e={}){this.#e=e.queryCache||new hae,this.#t=e.mutationCache||new yae,this.#r=e.defaultOptions||{},this.#n=new Map,this.#o=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#s=a7.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=Pw.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#s?.(),this.#s=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=this.#e.build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Vm(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(r.queryHash)?.state.data,o=SIe(t,a);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Wr.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Wr.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e,r={type:"active",...e};return Wr.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Wr.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(vo).catch(vo)}invalidateQueries(e={},t={}){return Wr.batch(()=>{if(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},r=Wr.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(vo)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(vo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(Vm(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vo).catch(vo)}fetchInfiniteQuery(e){return e.behavior=oA(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vo).catch(vo)}resumePausedMutations(){return Pw.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(Qd(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()];let n={};return t.forEach(r=>{F0(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){this.#o.set(Qd(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#o.values()];let n={};return t.forEach(r=>{F0(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=s7(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===lae&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},xae=class extends wh{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#o;#a;#s;#i;#f;#m;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),LW(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lA(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lA(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#b(),this.#t.removeObserver(this)}setOptions(e,t){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Jo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!Iw(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&DW(this.#t,r,this.options,n)&&this.#d(),this.updateResult(t),s&&(this.#t!==r||Jo(this.options.enabled,this.#t)!==Jo(n.enabled,this.#t)||Vm(this.options.staleTime,this.#t)!==Vm(n.staleTime,this.#t))&&this.#h();const a=this.#g();s&&(this.#t!==r||Jo(this.options.enabled,this.#t)!==Jo(n.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return UIe(this,n)&&(this.#n=n,this.#a=this.options,this.#o=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(e,t){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t?.(r),e[r])})}),n}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(vo)),t}#h(){this.#x();const e=Vm(this.options.staleTime,this.#t);if(Yd||this.#n.isStale||!rA(e))return;const n=oae(this.#n.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#b(),this.#l=e,!(Yd||Jo(this.options.enabled,this.#t)===!1||!rA(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||a7.isFocused())&&this.#d()},this.#l))}#v(){this.#h(),this.#y(this.#g())}#x(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#n,a=this.#o,o=this.#a,c=e!==n?e.state:this.#r,{state:u}=e;let d={...u},m=!1,p;if(t._optimisticResults){const S=this.hasListeners(),E=!S&&LW(e,t),M=S&&DW(e,n,t,r);(E||M)&&(d={...d,...pae(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:h,errorUpdatedAt:g,status:y}=d;if(t.select&&d.data!==void 0)if(s&&d.data===a?.data&&t.select===this.#i)p=this.#f;else try{this.#i=t.select,p=t.select(d.data),p=aA(s?.data,p,t),this.#f=p,this.#s=null}catch(S){this.#s=S}else p=d.data;if(t.placeholderData!==void 0&&p===void 0&&y==="pending"){let S;if(s?.isPlaceholderData&&t.placeholderData===o?.placeholderData)S=s.data;else if(S=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,t.select&&S!==void 0)try{S=t.select(S),this.#s=null}catch(E){this.#s=E}S!==void 0&&(y="success",p=aA(s?.data,S,t),m=!0)}this.#s&&(h=this.#s,p=this.#f,g=Date.now(),y="error");const v=d.fetchStatus==="fetching",x=y==="pending",b=y==="error",_=x&&v,w=p!==void 0;return{status:y,fetchStatus:d.fetchStatus,isPending:x,isSuccess:y==="success",isError:b,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:b&&!w,isPaused:d.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&w,isStale:o7(e,t),refetch:this.refetch}}updateResult(e){const t=this.#n,n=this.createResult(this.#t,this.options);if(this.#o=this.#t.state,this.#a=this.options,this.#o.data!==void 0&&(this.#m=this.#t),Iw(n,t))return;this.#n=n;const r={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!this.#p.size)return!0;const l=new Set(o??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#n).some(c=>{const u=c;return this.#n[u]!==t[u]&&l.has(u)})};e?.listeners!==!1&&s()&&(r.listeners=!0),this.#w({...r,...e})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){Wr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function FIe(e,t){return Jo(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function LW(e,t){return FIe(e,t)||e.state.data!==void 0&&lA(e,t,t.refetchOnMount)}function lA(e,t,n){if(Jo(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&o7(e,t)}return!1}function DW(e,t,n,r){return(e!==t||Jo(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&o7(e,n)}function o7(e,t){return Jo(t.enabled,e)!==!1&&e.isStaleByTime(Vm(t.staleTime,e))}function UIe(e,t){return!Iw(e.getCurrentResult(),t)}var BIe=class extends xae{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:oA()},t)}getOptimisticResult(e){return e.behavior=oA(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:n}=e,r=super.createResult(e,t),{isFetching:s,isRefetching:a,isError:o,isRefetchError:l}=r,c=n.fetchMeta?.fetchMore?.direction,u=o&&c==="forward",d=s&&c==="forward",m=o&&c==="backward",p=s&&c==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:OIe(t,n.data),hasPreviousPage:LIe(t,n.data),isFetchNextPageError:u,isFetchingNextPage:d,isFetchPreviousPageError:m,isFetchingPreviousPage:p,isRefetchError:l&&!u&&!m,isRefetching:a&&!d&&!p}}},VIe=class extends wh{#e;#t=void 0;#r;#n;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),Iw(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&Qd(n.mutationKey)!==Qd(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#o(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#o(),this.#a()}mutate(t,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#o(){const t=this.#r?.state??gae();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){Wr.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,n,r),this.#n.onSettled?.(t.data,null,n,r)):t?.type==="error"&&(this.#n.onError?.(t.error,n,r),this.#n.onSettled?.(void 0,t.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}};function WIe(e){return e}function FW(e,t,n){if(typeof t!="object"||t===null)return;const r=e.getMutationCache(),s=e.getQueryCache(),a=n?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??WIe,o=t.mutations||[],l=t.queries||[];o.forEach(({state:c,...u})=>{r.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...u},c)}),l.forEach(({queryKey:c,state:u,queryHash:d,meta:m,promise:p})=>{let h=s.get(d);const g=u.data===void 0?u.data:a(u.data);if(h){if(h.state.dataUpdatedAt<u.dataUpdatedAt){const{fetchStatus:y,...v}=u;h.setState({...v,data:g})}}else h=s.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:c,queryHash:d,meta:m},{...u,data:g,fetchStatus:"idle"});if(p){const y=Promise.resolve(p).then(a);h.fetch(void 0,{initialPromise:y})}})}var bae=f.createContext(void 0),mt=e=>{const t=f.useContext(bae);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},$Ie=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(bae.Provider,{value:e,children:t})),_ae=f.createContext(!1),HIe=()=>f.useContext(_ae);_ae.Provider;function zIe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var GIe=f.createContext(zIe()),qIe=()=>f.useContext(GIe);function wae(e,t){return typeof e=="function"?e(...t):!!e}function KIe(){}var YIe=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},QIe=e=>{f.useEffect(()=>{e.clearReset()},[e])},XIe=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&wae(n,[e.error,r]),ZIe=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},JIe=(e,t)=>e?.suspense&&t.isPending,e7e=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Cae(e,t,n){const r=mt(n),s=HIe(),a=qIe(),o=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=s?"isRestoring":"optimistic",ZIe(o),YIe(o,a),QIe(a);const[l]=f.useState(()=>new t(r,o)),c=l.getOptimisticResult(o);if(f.useSyncExternalStore(f.useCallback(u=>{const d=s?()=>{}:l.subscribe(Wr.batchCalls(u));return l.updateResult(),d},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),f.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),JIe(o,c))throw e7e(o,l,a);if(XIe({result:c,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw c.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,c),o.notifyOnChangeProps?c:l.trackResult(c)}function $e(e,t){return Cae(e,xae,t)}var t7e=({children:e,options:t={},state:n,queryClient:r})=>{const s=mt(r),[a,o]=f.useState(),l=f.useRef(t);return l.current=t,f.useMemo(()=>{if(n){if(typeof n!="object")return;const c=s.getQueryCache(),u=n.queries||[],d=[],m=[];for(const p of u){const h=c.get(p.queryHash);if(!h)d.push(p);else{const g=p.state.dataUpdatedAt>h.state.dataUpdatedAt,y=a?.find(v=>v.queryHash===p.queryHash);g&&(!y||p.state.dataUpdatedAt>y.state.dataUpdatedAt)&&m.push(p)}}d.length>0&&FW(s,{queries:d},l.current),m.length>0&&o(p=>p?[...p,...m]:m)}},[s,a,n]),f.useEffect(()=>{a&&(FW(s,{queries:a},l.current),o(void 0))},[s,a]),e};function bt(e,t){const n=mt(t),[r]=f.useState(()=>new VIe(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(o=>r.subscribe(Wr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=f.useCallback((o,l)=>{r.mutate(o,l).catch(KIe)},[r]);if(s.error&&wae(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}function Cc(e,t){return Cae(e,BIe,t)}const n7e={pro:"pro",max:"max"},r7e=e=>Object.keys(n7e).includes(e);function yt(){const{session:e}=Ct(),t=e?.user?.subscription_status??"none",n=t==="active"||t==="trialing"||t==="white_glove_past_due",r=e?.user?.subscription_tier,s=r7e(r)?r:void 0,a=n&&(s==="pro"||!s),o=n&&s==="max",l=a||o,c=n?e?.user?.subscription_source:"none",u=n&&c==="enterprise",d=u&&(s==="pro"||!s),m=u&&s==="max";return f.useMemo(()=>({isPro:a,isMax:o,hasAccessToProFeatures:l,hasActiveSubscription:n,subscriptionSource:c,subscriptionStatus:t,subscriptionTier:s,isEnterprise:u,isEnterprisePro:d,isEnterpriseMax:m}),[l,o,a,n,c,t,s,u,d,m])}let zf;const Sae=new URL("/ws",X5e());Sae.protocol="wss:";async function Eae(){return zf||(zf=new Promise(e=>{const t=new WebSocket(Sae);t.addEventListener("error",()=>{try{t.close()}finally{zf=void 0}}),t.addEventListener("close",()=>{zf=void 0}),t.addEventListener("open",()=>{e(t)})}),zf)}const pu="en-US",gS={"ar-SA":{characterOrder:"rtl",displayName:" (  )",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-ar-SA-IVUNuyy-.js");return{default:e}},[])).default},"bn-BD":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-bn-BD-C8D_ZuXh.js");return{default:e}},[])).default},"cs-CZ":{characterOrder:"ltr",displayName:"etina (esko)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-cs-CZ-CHdogvfo.js");return{default:e}},[])).default},"de-DE":{characterOrder:"ltr",displayName:"Deutsch (Deutschland)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-de-DE-DPAM0ihW.js");return{default:e}},[])).default},"el-GR":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-el-GR-cSd4cuWE.js");return{default:e}},[])).default},"en-US":{characterOrder:"ltr",displayName:"American English",translations:async()=>Promise.resolve({})},"es-ES":{characterOrder:"ltr",displayName:"espaol de Espaa",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-es-ES-ki0e31HD.js");return{default:e}},[])).default},"fr-FR":{characterOrder:"ltr",displayName:"franais (France)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-fr-FR-DLJpznXl.js");return{default:e}},[])).default},"hi-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-hi-IN-eR628dsd.js");return{default:e}},[])).default},"hr-HR":{characterOrder:"ltr",displayName:"hrvatski (Hrvatska)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-hr-HR-Rru6SiqR.js");return{default:e}},[])).default},"hu-HU":{characterOrder:"ltr",displayName:"magyar (Magyarorszg)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-hu-HU-ni5bsw_0.js");return{default:e}},[])).default},"id-ID":{characterOrder:"ltr",displayName:"Indonesia (Indonesia)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-id-ID-DIVgyU43.js");return{default:e}},[])).default},"it-IT":{characterOrder:"ltr",displayName:"italiano (Italia)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-it-IT-dOo-2ryA.js");return{default:e}},[])).default},"ja-JP":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-ja-JP-BLPvVDFI.js");return{default:e}},[])).default},"kn-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-kn-IN-BfYquyeO.js");return{default:e}},[])).default},"ko-KR":{characterOrder:"ltr",displayName:"()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-ko-KR-C32LdgVQ.js");return{default:e}},[])).default},"ml-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-ml-IN-DTZFRQL-.js");return{default:e}},[])).default},"mr-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-mr-IN-o__rxb88.js");return{default:e}},[])).default},"nl-NL":{characterOrder:"ltr",displayName:"Nederlands (Nederland)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-nl-NL-D9yZABAI.js");return{default:e}},[])).default},"pl-PL":{characterOrder:"ltr",displayName:"polski (Polska)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-pl-PL-DaSPpblt.js");return{default:e}},[])).default},"pt-BR":{characterOrder:"ltr",displayName:"portugus (Brasil)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-pt-BR-Czb-OkKT.js");return{default:e}},[])).default},"pt-PT":{characterOrder:"ltr",displayName:"portugus europeu",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-pt-PT-JiaSndPw.js");return{default:e}},[])).default},"ro-RO":{characterOrder:"ltr",displayName:"romn (Romnia)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-ro-RO-BK1s2S2p.js");return{default:e}},[])).default},"ru-RU":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-ru-RU-DM7KymYA.js");return{default:e}},[])).default},"sk-SK":{characterOrder:"ltr",displayName:"slovenina (Slovensko)",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-sk-SK-DYxTeWtg.js");return{default:e}},[])).default},"sr-Cyrl-ME":{characterOrder:"ltr",displayName:" (,  )",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-sr-Cyrl-ME-DNxLu5uK.js");return{default:e}},[])).default},"ta-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-ta-IN-DuFzmtQ5.js");return{default:e}},[])).default},"te-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-te-IN-BBXq1wOp.js");return{default:e}},[])).default},"uk-UA":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-uk-UA-CWSIOnh5.js");return{default:e}},[])).default},"zh-CN":{characterOrder:"ltr",displayName:"",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-zh-CN-d4IM_7gP.js");return{default:e}},[])).default},"zh-TW":{characterOrder:"ltr",displayName:"",translations:async()=>(await ae(async()=>{const{default:e}=await import("./translations-zh-TW-CHlVQErS.js");return{default:e}},[])).default}},Mae="pplx.chosen-locale",i7=new Intl.DateTimeFormat().resolvedOptions().timeZone,D_=Object.keys(gS),s7e=Object.entries(gS).map(([e,t])=>({locale:e,label:t.displayName,characterOrder:t.characterOrder})),kae=(e,t=D_)=>{try{return STe(e,t,pu)}catch{return pu}};async function a7e(e=pu){const t=kae(Array.isArray(e)?e:[e]);if(t===pu)return Promise.resolve({matchedLocale:t,translations:{}});const n=await gS[t].translations()??{};return Promise.resolve({matchedLocale:t,translations:n})}function Tae(e){return gS[e]?.characterOrder??"ltr"}function nu(){const t=[new URL(globalThis.location.href).searchParams.get("locale"),Tn(Mae),globalThis.navigator.language].filter(n=>!!n);return kae(t)}function o7e(){Hd(Mae)}var i7e={};function l7e(){return typeof window>"u"||window.location.hostname.includes("localhost")?new URL(vB,PTe()):new URL(vB,window.location.origin)}const c7e=l7e();function Nae(e){return navigator.sendBeacon(c7e,new Blob([JSON.stringify(e)],{type:"application/json; charset=UTF-8"}))}function Aae(){const e={};try{navigator.hardwareConcurrency&&(e.hardwareConcurrency=navigator.hardwareConcurrency);const t=new Float32Array(1),n=new Uint8Array(t.buffer);t[0]=1/0,t[0]=t[0]-t[0];const r=n[3];r&&(e.architecture=r),globalThis.screen.colorDepth&&(e.colorDepth=globalThis.screen.colorDepth),globalThis.screen.width&&globalThis.screen.height&&(e.screenSize=`${globalThis.screen.width}x${globalThis.screen.height}`)}catch{}return e}const u7e=Aae(),d7e=(e={},t)=>{const n=Date.now(),r={...e,isStandaloneApp:!1,timestamp:n,isBrowserExtension:!1,timeZone:i7,isPro:t?.user?.subscription_status&&t?.user?.subscription_status!=="none",userId:t?.user?.id,deviceInfo:u7e,isPerplexityBrowser:Tn("comet_browser")!==void 0},s=globalThis.location.pathname+globalThis.location.search,a=!!getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-title"),o=Aae(),l=Tn(Cw),c=Tn(NN);let u;return r.internalReferrer?u=r.internalReferrer:u=document.referrer,(globalThis.matchMedia("(display-mode: standalone)").matches||globalThis.matchMedia("(display-mode: minimal-ui)").matches||globalThis.navigator?.standalone)&&(r.isStandaloneApp=!0),{eventData:r,pathnameAndParams:s,visitorId:l,isArcBrowser:a,sessionId:c,deviceInfo:o,referrer:u}};function jae(e){const{name:t,data:n,session:r,source:s}=e,{eventData:a,visitorId:o,sessionId:l,pathnameAndParams:c,deviceInfo:u,referrer:d,isArcBrowser:m}=d7e(n,r);return c.startsWith("/search/render")?void 0:(i7e.NEXT_PUBLIC_EVENT_DEBUG_PRINT&&ee.log(`[trackEvent] ${t}: `,a),{event_name:t,event_data:a,visitor_id:o??"",session_id:l??"",url:c,referrer:d,language:nu(),screen:yS(),hostname:globalThis.location.hostname,device_info:u,is_arc_browser:m,source:s})}function oi(e){const t=jae(e);t&&(Nae(t)||(To("web.browser.analytics.send_event_failed"),Eae().then(n=>{n.send(JSON.stringify(t))})))}function f7e(e){const t=e.map(n=>jae(n)).filter(n=>n!==void 0);t.length!==0&&(Nae(t)||(To("web.browser.analytics.send_event_failed"),Eae().then(n=>{n.send(JSON.stringify(t))})))}function yS(){return`${globalThis.screen.width}x${globalThis.screen.height}`}const UW=Object.freeze({});function Sa(){return typeof window<"u"?window.__PPL_CONFIG__??UW:UW}const Rae=Cf("WebPlatformContext",{env:{isPublicDNS:!1,isLocalhost:!1,isPplxDev:!1,isPreview:!1,isStaging:!1,isBeta:!1,isTesting:!1,isAskDev:!1,isDevBox:!1,isNamedDevDomain:!1,isProduction:!1,isSandbox:!1,isDevDeployment:!1,envHasDevLogins:!1,deployName:""},device:{isChrome:!1,isMobile:!1,isAndroid:!1,isIOS:!1,isMacOS:!1,isFirefox:!1,isMobileSafari:!1,isWindowsOS:!1,isWindowsApp:!1,isMetaBrowser:!1,isSamsungBrowser:!1,userAgent:""}}),Et=()=>{const e=f.useContext(Rae);if(!e)throw new Error("useWebPlatform must be used within WebPlatformContext");return e},Hy={default:{termsOfService:"https://www.perplexity.ai/hub/legal/terms-of-service",enterpriseTermsOfService:"https://www.perplexity.ai/hub/legal/enterprise-terms-of-service",privacyPolicy:"https://www.perplexity.ai/hub/legal/privacy-policy"},"ja-JP":{termsOfService:"https://www.perplexity.ai/ja/hub/legal/terms-of-service",privacyPolicy:"https://www.perplexity.ai/ja/hub/legal/privacy-policy"}},Md=4e4,Iae=2e3,BW=4e3,VW=50,WW=1e3,jOt=1500,ROt=500,IOt=100,m7e=10,POt=10,p7e=5e3,h7e=50,$W=10,HW=1024*1024,Pae=3,Oae=500,Wm="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png",wi="2.18",Lae="default",OOt="mweb",l7="entropy",$m="windowsapp",LOt="ios",DOt="android",FOt="autodetect",zW=["audio/midi","audio/x-midi","application/zip","application/x-tar","application/x-bzip","application/vnd.rar"],c7=[".bash",".bat",".c",".coffee",".conf",".config",".cpp",".cs",".css",".csv",".cxx",".dart",".diff",".doc",".docx",".fish",".go",".h",".hpp",".htm",".html",".in",".ini",".ipynb",".java",".js",".json",".jsx",".ksh",".kt",".kts",".latex",".less",".log",".lua",".m",".markdown",".md",".pdf",".php",".pl",".pm",".pptx",".py",".r",".R",".rb",".rmd",".rs",".scala",".sh",".sql",".swift",".t",".tex",".text",".toml",".ts",".tsx",".txt",".xlsx",".xml",".yaml",".yml",".zsh"],g7e=c7.join(","),Dae=[".jpeg",".jpg",".jpe",".jp2",".png",".gif",".bmp",".tiff",".tif",".svg",".webp",".ico",".avif",".heic",".heif"],Fae=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],y7e=Dae.join(","),Uae=[...c7,...Dae],v7e=Uae.join(","),x7e=[...c7,...Fae],b7e=x7e.join(","),_7e=[...Uae,...Fae],w7e=_7e.join(","),UOt="",BOt=gt.PUBLIC_READ,Bae=gt.PRIVATE_READ,Ow=gt.PRIVATE_READ,VOt="https://chrome.google.com/webstore/detail/perplexity-ai-search/bnaffjbjpgiagpondjlnneblepbdchol",WOt="https://pplx.ai/mac",$Ot="https://www.perplexity.ai/comet",GW="onboarding",qW="uninstall_default_search_extension",C7e="edu_referral_code",S7e="utm_source",E7e="backtoschool",M7e="backtoschool_usc",k7e="backtoschool_cal",T7e="iitm",N7e="krstudents",Sl="login-source",KW="login-new",A7e="model_id",YW="max",u7=5,j7e="/static/images/back-to-school-splash.png",R7e="back-to-school",HOt="/static/images/search-like-never-before-square.jpg",zOt="search-like-never-before",GOt="/static/images/file-search-upsell-demo.png",qOt="file-search-upsell-demo",I7e="/static/images/sidebar-upsell-bg-light.svg",P7e="/static/images/sidebar-upsell-bg-dark.svg",QW="App Promo Background",KOt="Perplexity",vS="/static/images/data-connectors/factset/factset-avatar.svg",xS="FactSet",YOt="perplexity@factset.com",bS="/static/images/data-connectors/crunchbase/crunchbase-avatar.svg",_S="Crunchbase",u1="/static/images/data-connectors/wiley/wiley-avatar.svg",wS="Wiley",d7="Finance",QOt="/static/images/data-connectors/finance/finance-avatar.svg",CS="/static/images/data-connectors/google/google-drive-avatar.svg",O7e="/static/images/data-connectors/google/gmail-avatar.svg",L7e="Gmail",xp="Google Drive",SS="/static/images/data-connectors/google/gcal-gmail-avatar.svg",U0="Gmail with Calendar",D7e="Microsoft",ES="/static/images/data-connectors/microsoft/onedrive-avatar.svg",hu="OneDrive",MS="/static/images/data-connectors/microsoft/sharepoint-avatar.svg",gu="SharePoint",f7="/static/images/data-connectors/dropbox/dropbox-avatar.svg",pc="Dropbox",kS="/static/images/data-connectors/box/box-avatar.svg",bp="Box",TS="/static/images/data-connectors/notion/notion-avatar.svg",_p="Notion",Lw="/static/images/data-connectors/linear/linear-avatar.svg",kd="Linear",Dw="/static/images/data-connectors/slack/slack-avatar.svg",B0="Slack (deprecated)",V0="Slack",m7="/static/images/data-connectors/github/github-avatar.svg",W0="GitHub",Fw="/static/images/data-connectors/asana/asana-avatar.svg",$0="Asana",H0="Asana (Merge)",p7="/static/images/data-connectors/atlassian/atlassian-avatar.svg",z0="Atlassian",XOt="/static/images/data-connectors/whatsapp/whatsapp-avatar.svg",F7e="/static/images/data-connectors/sidebar-connectors-ad-upsell.png",ZOt="https://r2cdn.perplexity.ai/hotels/hotel-pro-banner.jpg",JOt="Save on hotel bookings with Perplexity Pro",Vae="submit-query",km="search-model-change",Hc="source-selection-change",Uw="windows-app",XW=Uw,U7e="If4YwAeizGHdB3eOhX2JxYcjeCgy0N9c",G0=`${Uw}/ask/input`,eLt="https://dl.todesktop.com/25020447d4kq915",LM="pplx.windowsApp.microphonePermission",ZW={silenceThreshold:30,silenceDuration:5e3},cA="pplx.upload-privacy-accepted",Wae=["answer_modes","media_items","knowledge_cards","inline_entity_cards","place_widgets","finance_widgets","sports_widgets","shopping_widgets","jobs_widgets","search_result_widgets","clarification_responses","inline_images","inline_assets","inline_finance_widgets","placeholder_cards","diff_blocks","inline_knowledge_cards","entity_group_v2","refinement_filters","canvas_mode"],JW=["google_drive","onedrive","sharepoint","dropbox","box","notion"],B7e=["google_drive","onedrive","sharepoint","dropbox","box"],wp="Outlook",$ae="/static/images/data-connectors/microsoft/outlook-avatar.svg",V7e="org-upgrade-in-progress";let e$=0;const h7=1e6;class kg{eventTime=-1;setOnce(){return this.eventTime==-1?(this.eventTime=Date.now(),!0):!1}timeSinceTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime<t?(ee.log(`TimeMarker.timeSinceTimestamp found inconsistency: mytime ${this.eventTime}, old: ${t}`),-1):this.eventTime-t}timeBeforeTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime>t?(ee.log(`TimeMarker.timeBeforeTimestamp found inconsistency: mytime ${this.eventTime}, next: ${t}`),-1):t-this.eventTime}wasSet(){return this.eventTime!=-1}}const W7e={firstServerResponseReceived:!1,firstLLMTokenReceived:!1,isPerplexityBrowser:!1},Ci=new Map,$7e=(e,{hasLLMToken:t,hasSearchResults:n,hasSources:r},s)=>{H7e(e,s),z7e(e,t,s),G7e(e,n),q7e(e,r)},H7e=(e,t)=>{const n=Ci.get(e);if(!n||n.firstServerResponseReceived||!n.submitTimestamp||!n.startFirstServerResponseMarker?.setOnce())return;n.firstServerResponseReceived=!0;const{queryStr:r,isFollowup:s,queryParams:a}=n,o=zae(e);o>0&&oi({name:"query first server response",data:{startFirstServerResponseElapsed:o,queryStr:r,isFollowup:s,mode:a?.mode??"unknown",isPerplexityBrowser:n.isPerplexityBrowser},session:t??void 0})},z7e=(e,t,n)=>{const r=Ci.get(e);if(!r||r.firstLLMTokenReceived||!t||!r.startLLMTokenMarker?.setOnce())return;r.firstLLMTokenReceived=!0;const{queryStr:s,isFollowup:a,queryParams:o}=r,l=Gae(e);l>0&&oi({name:"query first llm token",data:{startLLMTokenElapsed:l,queryStr:s,isFollowup:a,mode:o?.mode??"unknown",isPerplexityBrowser:r.isPerplexityBrowser},session:n??void 0})},G7e=(e,t)=>{const n=Ci.get(e);if(n){if(!t)return}else return;n.firstSearchResultsMarker?.setOnce()},q7e=(e,t)=>{const n=Ci.get(e);if(n){if(!t)return}else return;n.firstSourcesMarker?.setOnce()},tLt=e=>{const t=Ci.get(e);t&&t.firstSourcesRenderMarker?.setOnce()},K7e=(e,t,n,r)=>{r=r??"unknown",Ql("web.frontend.start_stream_elapsed",{startTime:e,duration:t*h7,isFollowup:n,mode:r})},Y7e=(e,t,n,r)=>{r=r??"unknown",Ql("web.frontend.start_llm_token_elapsed",{startTime:e,duration:t*h7,isFollowup:n,mode:r})},Q7e=(e,t,n,r)=>{r=r??"unknown",Ql("web.frontend.first_search_result_elapsed",{startTime:e,duration:t*h7,isFollowup:n,mode:r})},X7e=({latencies:e,isMobile:t})=>{To("web.frontend.autosuggest_latency",{latencies:e,isMobile:t})},t$=(e,{session:t,source:n,name:r})=>{const s=Ci.get(e);s&&(s.endStreamTimestamp||(s.endStreamTimestamp=Date.now(),oi({name:r,data:s,session:t??void 0,source:n})))},Hae=(e,t,n,r,s)=>{const a=Ci.get(e);if(!a)return;a.finalizedTimestamp=Date.now();let o=-1;a.submitTimestamp&&(o=a.finalizedTimestamp-a.submitTimestamp);const l=zae(e);l>0&&K7e(a.submitTimestamp??0,l,a.isFollowup??!1,a?.queryParams?.mode);const c=J7e(e);c>0&&Q7e(a.submitTimestamp??0,c,a.isFollowup??!1,a?.queryParams?.mode);const u=Gae(e);u>0&&Y7e(a.submitTimestamp??0,u,a.isFollowup??!1,a?.queryParams?.mode);let d=-1;a.endStreamTimestamp&&a.startFirstServerResponseMarker&&(d=a.startFirstServerResponseMarker.timeBeforeTimestamp(a.endStreamTimestamp));const m={...a,totalElapsed:o,startStreamElapsed:l,startFirstServerResponseElapsed:l,startLLMTokenElapsed:u,totalStreamingElapsed:d,submissionResult:t,entryUUID:n?.backend_uuid,displayModel:n?.display_model,stepType:n?.step_type,isPerplexityBrowser:a.isPerplexityBrowser,source:void 0};oi({name:`${t} response`,data:m,session:r??void 0,source:void 0})},nLt=(e,t,n,r)=>{Hae(e,"FAILED",t,n)},rLt=(e,t,n,r)=>{Hae(e,"SUCCESSFUL",t,n)},Z7e=(e,{name:t,queryStr:n,queryParams:r,isFollowup:s,frontendUUID:a,isPerplexityBrowser:o,session:l,browserVersion:c,source:u,connectors:d,mentions:m})=>{e$+=1;const p={...W7e};p.submissionType=t,p.submitTimestamp=Date.now(),p.queryStr=n,p.queryParams=r,p.frontendUUID=a,p.submissionCount=e$,p.isFollowup=s,p.startFirstServerResponseMarker=new kg,p.startLLMTokenMarker=new kg,p.firstSearchResultsMarker=new kg,p.firstSourcesMarker=new kg,p.firstSourcesRenderMarker=new kg,p.isPerplexityBrowser=o,p.browserVersion=c,p.enabledConnectors=d?.enabled,p.disabledConnectors=d?.disabled;const h=m?.filter(v=>v.type==="tab")??[];p.attachedTabsDomains=[...new Set(h.map(v=>new URL(v.url).host))],p.attachedTabsCount=h.length;const g=m?.filter(v=>v.type==="space")??[];p.mentionedSpacesCount=g.length;const y=m?.filter(v=>v.type==="shortcut")??[];p.mentionedShortcutsCount=y.length,Ci.set(e,p),oi({name:"submit query",data:p,session:l??void 0,source:u})},zae=e=>{const t=Ci.get(e);let n=-1;return t&&(n=t.startFirstServerResponseMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},Gae=e=>{const t=Ci.get(e);let n=-1;return t&&(n=t.startLLMTokenMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},J7e=e=>{const t=Ci.get(e);let n=-1;return t&&(n=t.firstSearchResultsMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},Me=()=>{const{session:e}=Ct(),{device:{isWindowsApp:t}}=Et(),n=f.useRef(new Set),r=f.useCallback((l,c={})=>{const u=Sa(),d=t?$m:u.erp??void 0;oi({name:l,data:c,source:d,session:e??void 0})},[t,e]),s=f.useCallback(l=>{const c=l.map(({name:u,data:d})=>({name:u,data:d,session:e??void 0}));f7e(c)},[e]),a=f.useCallback((l,c)=>{oi({name:l,data:c,session:e??void 0})},[e]),o=f.useCallback((l,c={})=>{n.current.has(l)||(n.current.add(l),oi({name:l,data:c,session:e??void 0}))},[e]);return f.useMemo(()=>({trackEvent:r,trackEventTyped:a,trackEventOnce:o,trackEventBatch:s}),[r,s,a,o])};class Ee extends Bv{name="ApiClientsError"}const ePe=/\{[^{}]+\}/g,tPe=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function nPe(){return Math.random().toString(36).slice(2,11)}function rPe(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:s,bodySerializer:a,headers:o,requestInitExt:l=void 0,...c}={...e};l=tPe()?l:void 0,t=r$(t);const u=[];async function d(m,p){const{baseUrl:h,fetch:g=r,Request:y=n,headers:v,params:x={},parseAs:b="json",querySerializer:_,bodySerializer:w=a??aPe,body:C,...S}=p||{};h&&(t=r$(h));let E=typeof s=="function"?s:n$(s);_&&(E=typeof _=="function"?_:n$({...typeof s=="object"?s:{},..._}));const M=C===void 0?void 0:w(C),k=M===void 0||M instanceof FormData?{}:{"Content-Type":"application/json"},T={redirect:"follow",...c,...S,body:M,headers:iPe(k,o,v,x.header)};let j,R,O=new n(oPe(m,{baseUrl:t,params:x,querySerializer:E}),T),P;for(const I in S)I in O||(O[I]=S[I]);if(u.length){j=nPe(),R=Object.freeze({baseUrl:t,fetch:g,parseAs:b,querySerializer:E,bodySerializer:w});for(const I of u)if(I&&typeof I=="object"&&typeof I.onRequest=="function"){const D=await I.onRequest({request:O,schemaPath:m,params:x,options:R,id:j});if(D)if(D instanceof n)O=D;else if(D instanceof Response){P=D;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!P){try{P=await g(O,l)}catch(I){let D=I;if(u.length)for(let F=u.length-1;F>=0;F--){const B=u[F];if(B&&typeof B=="object"&&typeof B.onError=="function"){const V=await B.onError({request:O,error:D,schemaPath:m,params:x,options:R,id:j});if(V){if(V instanceof Response){D=void 0,P=V;break}if(V instanceof Error){D=V;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(D)throw D}if(u.length)for(let I=u.length-1;I>=0;I--){const D=u[I];if(D&&typeof D=="object"&&typeof D.onResponse=="function"){const F=await D.onResponse({request:O,response:P,schemaPath:m,params:x,options:R,id:j});if(F){if(!(F instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");P=F}}}}if(P.status===204||P.headers.get("Content-Length")==="0")return P.ok?{data:void 0,response:P}:{error:void 0,response:P};if(P.ok)return b==="stream"?{data:P.body,response:P}:{data:await P[b](),response:P};let N=await P.text();try{N=JSON.parse(N)}catch{}return{error:N,response:P}}return{request(m,p,h){return d(p,{...h,method:m.toUpperCase()})},GET(m,p){return d(m,{...p,method:"GET"})},PUT(m,p){return d(m,{...p,method:"PUT"})},POST(m,p){return d(m,{...p,method:"POST"})},DELETE(m,p){return d(m,{...p,method:"DELETE"})},OPTIONS(m,p){return d(m,{...p,method:"OPTIONS"})},HEAD(m,p){return d(m,{...p,method:"HEAD"})},PATCH(m,p){return d(m,{...p,method:"PATCH"})},TRACE(m,p){return d(m,{...p,method:"TRACE"})},use(...m){for(const p of m)if(p){if(typeof p!="object"||!("onRequest"in p||"onResponse"in p||"onError"in p))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");u.push(p)}},eject(...m){for(const p of m){const h=u.indexOf(p);h!==-1&&u.splice(h,1)}}}}function NS(e,t,n){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function qae(e,t,n){if(!t||typeof t!="object")return"";const r=[],s={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const l in t)r.push(l,n.allowReserved===!0?t[l]:encodeURIComponent(t[l]));const o=r.join(",");switch(n.style){case"form":return`${e}=${o}`;case"label":return`.${o}`;case"matrix":return`;${e}=${o}`;default:return o}}for(const o in t){const l=n.style==="deepObject"?`${e}[${o}]`:o;r.push(NS(l,t[o],n))}const a=r.join(s);return n.style==="label"||n.style==="matrix"?`${s}${a}`:a}function Kae(e,t,n){if(!Array.isArray(t))return"";if(n.explode===!1){const a={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",o=(n.allowReserved===!0?t:t.map(l=>encodeURIComponent(l))).join(a);switch(n.style){case"simple":return o;case"label":return`.${o}`;case"matrix":return`;${e}=${o}`;default:return`${e}=${o}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",s=[];for(const a of t)n.style==="simple"||n.style==="label"?s.push(n.allowReserved===!0?a:encodeURIComponent(a)):s.push(NS(e,a,n));return n.style==="label"||n.style==="matrix"?`${r}${s.join(r)}`:s.join(r)}function n$(e){return function(n){const r=[];if(n&&typeof n=="object")for(const s in n){const a=n[s];if(a!=null){if(Array.isArray(a)){if(a.length===0)continue;r.push(Kae(s,a,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof a=="object"){r.push(qae(s,a,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}r.push(NS(s,a,e))}}return r.join("&")}}function sPe(e,t){let n=e;for(const r of e.match(ePe)??[]){let s=r.substring(1,r.length-1),a=!1,o="simple";if(s.endsWith("*")&&(a=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(o="label",s=s.substring(1)):s.startsWith(";")&&(o="matrix",s=s.substring(1)),!t||t[s]===void 0||t[s]===null)continue;const l=t[s];if(Array.isArray(l)){n=n.replace(r,Kae(s,l,{style:o,explode:a}));continue}if(typeof l=="object"){n=n.replace(r,qae(s,l,{style:o,explode:a}));continue}if(o==="matrix"){n=n.replace(r,`;${NS(s,l)}`);continue}n=n.replace(r,o==="label"?`.${encodeURIComponent(l)}`:encodeURIComponent(l))}return n}function aPe(e){return e instanceof FormData?e:JSON.stringify(e)}function oPe(e,t){let n=`${t.baseUrl}${e}`;t.params?.path&&(n=sPe(n,t.params.path));let r=t.querySerializer(t.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function iPe(...e){const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[s,a]of r)if(a===null)t.delete(s);else if(Array.isArray(a))for(const o of a)t.append(s,o);else a!==void 0&&t.set(s,a)}return t}function r$(e){return e.endsWith("/")?e.substring(0,e.length-1):e}function lPe(e){return rPe(e)}const Xu="X-Perplexity-Request-Reason",cPe=()=>{const e=lPe({baseUrl:"https://perplexity.ai/",fetch:async t=>{const n=new URL(t.url),r=n.pathname,s=n.searchParams,a=await t.text(),o=t.headers.get(Xu)??"typedRestAsyncClient";return sr({urlPath:s.size>0?`${r}?${s.toString()}`:r,method:t.method,body:a||void 0,headers:t.headers,timeoutMs:t.timeoutMs,numRetries:t.numRetries,backOffTime:t.backOffTime,reason:o,baseUrlOverride:t.baseUrlOverride,includeCredentials:t.includeCredentials})}});return{...e,GET:(t,n,r)=>e.GET(t,{...r||{},headers:{...r?.headers||{},[Xu]:n}}),POST:(t,n,r)=>e.POST(t,{...r||{},headers:{...r?.headers||{},[Xu]:n}}),PUT:(t,n,r)=>e.PUT(t,{...r||{},headers:{...r?.headers||{},[Xu]:n}}),PATCH:(t,n,r)=>e.PATCH(t,{...r||{},headers:{...r?.headers||{},[Xu]:n}}),DELETE:(t,n,r)=>e.DELETE(t,{...r||{},headers:{...r?.headers||{},[Xu]:n}}),SSE:(t,n,{path:r,...s})=>(r&&Object.entries(r).forEach(([a,o])=>{t=t.replace(`{${a}}`,o)}),Z5e({url:t,...s||{},headers:{...s?.headers||{},[Xu]:n}}))}},ne=cPe(),Kt={DEFAULT:1200,LOW:2500,MEDIUM:5e3,HIGH:1e4,VERY_HIGH:3e4,EXREMELY_HIGH:9e4,NONE:0},Sc=2,Pe=e=>{const t=e?.productionMs??Kt.DEFAULT;e?.devMs??Kt.HIGH;const n=e?.clientSideMs??Kt.MEDIUM;return typeof window<"u"?n:t},Hm={COPILOT:"COPILOT",ARTICLE:"ARTICLE"},uPe={IN_PROGRESS:"IN_PROGRESS"},Jx={SELECTED:"SELECTED",REVIEWED:"REVIEWED",REVIEWING:"REVIEWING",UNSORTED:"UNSORTED"},Gf={CLICK:"CLICK",FILL:"FILL",SEARCH:"SEARCH",NAVIGATE:"NAVIGATE",SCROLL_PAGE:"SCROLL_PAGE",WAIT:"WAIT"},uA={DOWN:"DOWN"},DM={HISTORY:"HISTORY",OPEN_TABS:"OPEN_TABS",RECENTLY_CLOSED_TABS:"RECENTLY_CLOSED_TABS"},dA={LOGIN:"LOGIN",DOWNLOAD_COMET:"DOWNLOAD_COMET",CREATE_SHORTCUT:"CREATE_SHORTCUT"},$l={IN_THREAD:"IN_THREAD",SIDEBAR:"SIDEBAR",MODAL:"MODAL",IN_THREAD_BOTTOM:"IN_THREAD_BOTTOM",IN_THREAD_INPUT:"IN_THREAD_INPUT",SIDE_CARD:"SIDE_CARD",COMET_NTP_BANNER:"COMET_NTP_BANNER"},ua={PRO_UPGRADE:"PRO_UPGRADE",SIGN_UP_OR_LOGIN:"SIGN_UP_OR_LOGIN",REWRITE_ANSWER:"REWRITE_ANSWER",PERMALINK:"PERMALINK",CONNECTOR:"CONNECTOR",THREAD_TO_SPACE:"THREAD_TO_SPACE",SET_DEFAULT_BROWSER:"SET_DEFAULT_BROWSER",COMET_DOWNLOAD:"COMET_DOWNLOAD",IMAGE_ANNOUNCEMENT_MODAL:"IMAGE_ANNOUNCEMENT_MODAL",MERGE_AUTH_CONNECTOR:"MERGE_AUTH_CONNECTOR",SHORTCUT_MODAL:"SHORTCUT_MODAL",OPEN_SHEERID_MODAL:"OPEN_SHEERID_MODAL"},eb={PRIMARY_COLOR:"PRIMARY_COLOR",SECONDARY_COLOR:"SECONDARY_COLOR",MAX_COLOR:"MAX_COLOR",INVERTED:"INVERTED"},Bn={CODE_ASSET:"CODE_ASSET",CHART:"CHART",CODE_FILE:"CODE_FILE",APP:"APP",GENERATED_IMAGE:"GENERATED_IMAGE",GENERATED_VIDEO:"GENERATED_VIDEO",PDF_FILE:"PDF_FILE",FLASHCARD:"FLASHCARD",QUIZ:"QUIZ",SLIDES:"SLIDES",DOCX_FILE:"DOCX_FILE"},dPe={MCP_SERVER_TYPE_LOCAL:"MCP_SERVER_TYPE_LOCAL"},FM={BROWSER_HISTORY:"BROWSER_HISTORY",OPEN_TAB:"OPEN_TAB",RECENTLY_CLOSED_TAB:"RECENTLY_CLOSED_TAB"},cr={PENDING:"PENDING",COMPLETED:"COMPLETED",FAILED:"FAILED",STAGED:"STAGED",RESUMING:"RESUMING",BLOCKED:"BLOCKED"},Cp={NONE:"NONE",INCOGNITO:"INCOGNITO"},sLt={FULL:"FULL",STREAMING:"STREAMING"},Bl={IN_PROGRESS:"IN_PROGRESS",DONE:"DONE"},s$={FINANCE:"FINANCE"},aLt={CALENDAR_EVENT:"CALENDAR_EVENT",PLACE_CARD:"PLACE_CARD",SHOPPING_CARD:"SHOPPING_CARD",CALENDAR_ACTION:"CALENDAR_ACTION",MOVIE_TV_CARD:"MOVIE_TV_CARD"},ti={SELECTION_STATUS_UNSPECIFIED:"SELECTION_STATUS_UNSPECIFIED",UNSELECTED:"UNSELECTED",SELECTED:"SELECTED",TIE:"TIE"},sn={HOTELS:"HOTELS",SHOPPING:"SHOPPING",JOBS:"JOBS",IMAGE:"IMAGE",VIDEO:"VIDEO",SOURCES:"SOURCES",MAPS:"MAPS",ASSETS:"ASSETS",APPS:"APPS",TASKS:"TASKS",SEARCH:"SEARCH",CHAT:"CHAT"},fPe=async({entryUUID:e,params:t,reason:n})=>{try{return(await ne.POST("/rest/entry/should-show-feedback/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:Pe({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_feedback??!1}catch(r){return ee.error("Failed to check if should show feedback",r),!1}},mPe=async({reason:e,lastEventTimestamp:t})=>(await ne.GET("/rest/entry/creation-events",e,{params:{query:{last_event_timestamp_us:t}},timeoutMs:Kt.EXREMELY_HIGH,numRetries:1})).data?.events.map(s=>({contextUUID:s.context_uuid,entryUUID:s.entry_uuid,isPersonalIntent:s.is_personal_intent,cometIsMissionControl:s.comet_is_mission_control,timestamp:s.timestamp_us}))||[],oLt=({callback:e,reason:t})=>{let s,a=!0,o=null;return(async()=>{for(;a;)try{const c=await mPe({reason:t,lastEventTimestamp:s});if(c.length>0&&(s=Math.max(...c.map(u=>u.timestamp)),await e(c)),!a)break;await new Promise(u=>{o=setTimeout(u,500)})}catch(c){if(ee.error("Failed to poll for entry creation events",c),!a)break;await new Promise(u=>{o=setTimeout(u,2e3)})}})(),()=>{a=!1,o&&(clearTimeout(o),o=null)}},pPe=async({slugOrUUID:e,headers:t,options:n,numRetries:r=0,reason:s})=>{const a="getThreadByUUID";if(!e||e==="undefined"||e==="new"){ee.log(`Tried to ${a} with bad slugOrUUID: ${e}`);return}const o=n?.withParentInfo??!1,l=n?.version??wi,c=n?.source??Lae,u=n?.limit??0,d=n?.offset??0,m=n?.fromFirst??!1,p=n?.supportedBlockUseCases??[],h=n?.cursor??null;try{const g=await ne.GET("/rest/thread/{entry_uuid_or_slug}",s,{params:{path:{entry_uuid_or_slug:e},query:{with_parent_info:o,with_schematized_response:!0,version:l,source:c,limit:u,offset:d,from_first:m,supported_block_use_cases:p,cursor:h}},timeoutMs:Kt.HIGH,numRetries:r,headers:t});if(!g.response.ok||!g.data||g.error)throw g.error?new Error(`Failed to ${a} for ${e}`,{cause:g.error.detail}):new Error(`Failed to ${a} for ${e}`);return g.data}catch(g){throw ee.error("Failed to get thread by uuid",g),g}},iLt=async({entryUUID:e,selectedText:t,beforeContext:n,afterContext:r,callback:s,reason:a})=>{await ne.SSE("/rest/sse/check-sources",a,{params:{entry_uuid_or_slug:e,selected_text:t,before_context:n,after_context:r},handlers:{message:o=>s(o)}})},lLt=async({entryUUID:e,answerHelpful:t,detailedFeedback:n,reason:r})=>{try{const{error:s}=await ne.POST("/rest/entry/feedback/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{answer_helpful:t??!1,feedback:n},timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s)throw new Ee("API_CLIENTS_ERROR",{cause:s})}catch(s){ee.error(s)}},cLt=async({entryUUID:e,params:t,reason:n})=>{if(e)try{const{error:r}=await ne.POST("/rest/entry/label-entry/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r})}catch(r){ee.error(r)}},uLt=async({entry_uuid:e,format:t,reason:n})=>{const{data:r,error:s}=await ne.POST("/rest/entry/export",n,{body:{entry_uuid:e,format:t},timeoutMs:Pe({productionMs:6e3}),numRetries:1});if(s)throw new Ee("API_CLIENTS_ERROR",{cause:s});return r},hPe=async({slugOrUUID:e,reason:t})=>{const{error:n}=await ne.POST("/rest/thread/request-access/{entry_uuid_or_slug}",t,{params:{path:{entry_uuid_or_slug:e}}});if(n)throw new Ee("API_CLIENTS_ERROR",{cause:n})},Sp=async({entryUUID:e,reason:t})=>{try{const{error:n}=await ne.POST("/rest/sse/perplexity_terminate",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e},timeoutMs:Pe({productionMs:5e3}),numRetries:1});return!n}catch(n){return ee.error("Failed to terminate entry",n),!1}},dLt=async({entryUUID:e,reason:t})=>{try{await ne.POST("/rest/sse/perplexity_skip_search",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e}})}catch(n){ee.error("Failed to skip search",n)}},gPe=async({entryUUID:e,clarification:t,reason:n})=>{try{await ne.POST("/rest/sse/perplexity_clarifying_answer",n,{headers:{"content-type":"application/json"},body:{entry_uuid:e,clarification:t},timeoutMs:Pe({productionMs:5e3}),numRetries:0})}catch(r){ee.error("Failed to give clarifying answer",r)}},yPe=async({entryUUID:e,reason:t})=>{try{return(await ne.POST("/rest/entry/should-show-recruitment-banner/{entry_uuid}",t,{params:{path:{entry_uuid:e}},body:void 0,timeoutMs:Pe({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_recruitment_banner??!1}catch(n){return ee.error("Failed to check if should show recruitment banner",n),!1}},fLt=async({contextUUID:e,stepUUID:t,result:n,reason:r})=>{try{const{data:s,error:a}=await ne.POST("/rest/sse/pro_search_step_result",r,{body:{context_uuid:e,step_uuid:t,result:n},timeoutMs:Pe({productionMs:5e3}),numRetries:0});if(a)throw new Ee("API_CLIENTS_ERROR",{cause:a});return s?.status==="completed"?s.should_resume:!1}catch(s){ee.error(s)}return!1},vPe=async({entryUUID:e,params:t,siblingUUID:n,reason:r})=>{const{error:s}=await ne.POST("/rest/entry/set-entry-selection/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{selection_status:t,sibling_uuid:n},timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s)throw new Ee("API_CLIENTS_ERROR",{cause:s})},Yae=A.memo(({lineColor:e,width:t,fillColor:n,...r})=>{const s=U("h-auto group",t),a=U(e,"transition-all duration-300");return i.jsx("div",{className:s,...r,children:i.jsxs("svg",{viewBox:"0 0 400 91",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M196.978 27.8931H200.033V34.1872H196.079C192.979 34.1872 190.669 34.9333 189.14 36.4254C187.615 37.9176 186.85 40.3662 186.85 43.7711V64.401H180.606V28.0333H186.85V33.8367C186.85 34.1622 187.014 34.3274 187.337 34.3274C187.52 34.3274 187.659 34.2823 187.754 34.1872C187.848 34.0921 187.938 33.9068 188.032 33.6264C189.234 29.8058 192.219 27.8931 196.983 27.8931H196.978ZM237.763 35.6894C239.402 38.6036 240.227 42.1137 240.227 46.2146C240.227 50.3156 239.407 53.8257 237.763 56.7399C236.119 59.6541 233.993 61.8323 231.38 63.2794C228.767 64.7265 225.956 65.4476 222.951 65.4476C217.03 65.4476 212.868 63.0691 210.464 58.3122C210.28 57.9417 210.046 57.7514 209.768 57.7514C209.49 57.7514 209.351 57.8916 209.351 58.172V77.6853H203.107V28.0333H209.351V34.2573C209.351 34.5377 209.49 34.6779 209.768 34.6779C210.046 34.6779 210.275 34.4926 210.464 34.1171C212.868 29.3602 217.03 26.9817 222.951 26.9817C225.956 26.9817 228.767 27.7028 231.38 29.1499C233.993 30.597 236.119 32.7751 237.763 35.6894ZM233.983 46.2146C233.983 41.9234 232.841 38.5786 230.551 36.1801C228.261 33.7816 225.246 32.5799 221.496 32.5799C217.745 32.5799 214.73 33.7816 212.44 36.1801C210.151 38.5836 209.311 41.9284 209.311 46.2146C209.311 50.5009 210.151 53.8507 212.44 56.2492C214.73 58.6527 217.75 59.8494 221.496 59.8494C225.241 59.8494 228.261 58.6477 230.551 56.2492C232.841 53.8507 233.983 50.5009 233.983 46.2146ZM134.595 35.7445C136.235 38.6587 137.059 42.1688 137.059 46.2697C137.059 50.3707 136.24 53.8808 134.595 56.795C132.951 59.7092 130.825 61.8874 128.213 63.3345C125.6 64.7816 122.788 65.5026 119.783 65.5026C113.863 65.5026 109.7 63.1242 107.296 58.3673C107.112 57.9967 106.879 57.8065 106.601 57.8065C106.322 57.8065 106.183 57.9467 106.183 58.2271V77.7404H99.9446V28.0883H106.188V34.3124C106.188 34.5928 106.327 34.733 106.606 34.733C106.884 34.733 107.112 34.5477 107.301 34.1722C109.705 29.4153 113.867 27.0368 119.788 27.0368C122.793 27.0368 125.605 27.7579 128.218 29.205C130.83 30.6521 132.956 32.8302 134.6 35.7445H134.595ZM130.815 46.2697C130.815 41.9785 129.673 38.6336 127.383 36.2352C125.093 33.8367 122.078 32.6349 118.328 32.6349C114.578 32.6349 111.563 33.8367 109.273 36.2352C106.983 38.6387 106.144 41.9835 106.144 46.2697C106.144 50.5559 106.983 53.9058 109.273 56.3043C111.563 58.7078 114.578 59.9045 118.328 59.9045C122.078 59.9045 125.093 58.7028 127.383 56.3043C129.673 53.9058 130.815 50.5559 130.815 46.2697ZM169.112 52.8543H175.703C174.824 56.2592 173.031 59.2085 170.329 61.7021C167.622 64.1957 163.748 65.4425 158.706 65.4425C154.911 65.4425 151.573 64.6614 148.682 63.0991C145.791 61.5369 143.561 59.3137 141.986 56.4195C140.412 53.5303 139.627 50.1253 139.627 46.2096C139.627 42.294 140.392 38.889 141.917 35.9998C143.442 33.1106 145.583 30.8824 148.335 29.3201C151.086 27.7579 154.31 26.9767 158.011 26.9767C161.711 26.9767 164.776 27.7479 167.344 29.2851C169.912 30.8223 171.829 32.8653 173.101 35.404C174.372 37.9477 175.008 40.7317 175.008 43.7611V47.9572H146.219C146.447 51.5925 147.664 54.4867 149.859 56.6298C152.055 58.7729 155.005 59.8494 158.706 59.8494C161.711 59.8494 164.016 59.2335 165.61 57.9967C167.205 56.7599 168.372 55.0475 169.112 52.8543ZM146.288 42.7146H168.074C168.074 39.545 167.264 37.0614 165.645 35.2638C164.026 33.4712 161.483 32.5699 158.015 32.5699C154.777 32.5699 152.129 33.4461 150.073 35.1937C148.017 36.9412 146.755 39.4498 146.293 42.7096L146.288 42.7146ZM245.169 64.396H251.413V14.043H245.169V64.401V64.396ZM331.801 24.0625H339.093V16.1911H331.801V24.0625ZM357.526 58.9782C356.393 59.0933 355.708 59.1534 355.479 59.1534C355.156 59.1534 354.898 59.0583 354.714 58.873C354.531 58.6877 354.436 58.4324 354.436 58.1019C354.436 57.8716 354.496 57.1806 354.61 56.0389C354.724 54.8972 354.784 53.1347 354.784 50.7612V33.361H363.69L361.937 28.0333H354.789V18.2391H348.545V28.0283H341.755V33.356H348.545V52.5038C348.545 56.5146 349.519 59.4989 351.461 61.4568C353.403 63.4146 356.363 64.396 360.342 64.396H365.2V58.8029H362.771C360.412 58.8029 358.663 58.863 357.531 58.9782H357.526ZM394.059 28.0283L383.723 58.5425C383.583 58.9181 383.365 59.4088 382.655 59.4088C381.944 59.4088 381.726 58.9181 381.587 58.5425L371.25 28.0283H364.882L376.853 64.396H381.085C381.363 64.396 381.572 64.4211 381.711 64.4661C381.85 64.5112 381.964 64.6264 382.059 64.8166C382.242 65.097 382.217 65.5177 381.989 66.0735L380.047 71.3862C379.769 72.0872 379.237 72.4377 378.452 72.4377C378.174 72.4377 377.529 72.3776 376.51 72.2624C375.492 72.1473 374.176 72.0872 372.556 72.0872H367.49V77.6803H374.151C378.035 77.6803 380.375 77.0143 382.386 75.6874C384.398 74.3605 385.958 72.0171 387.07 68.6572L400 29.4203V28.0233H394.059V28.0283ZM311.406 41.5979L301.626 28.0283H294.756V29.4253L306.478 45.1631L292.188 62.999V64.396H299.197L310.576 49.7798L321.191 64.396H327.922V62.999L315.504 46.2146L328.965 29.5004V28.0333H321.956L311.411 41.603L311.406 41.5979ZM332.467 64.396H338.71V28.0333H332.467V64.401V64.396ZM292.471 52.8543C291.592 56.2592 289.799 59.2085 287.097 61.7021C284.39 64.1957 280.515 65.4425 275.474 65.4425C271.679 65.4425 268.341 64.6614 265.45 63.0991C262.559 61.5369 260.329 59.3137 258.754 56.4195C257.18 53.5303 256.395 50.1253 256.395 46.2096C256.395 42.294 257.16 38.889 258.685 35.9998C260.21 33.1106 262.35 30.8824 265.102 29.3201C267.854 27.7579 271.078 26.9767 274.778 26.9767C278.479 26.9767 281.543 27.7479 284.111 29.2851C286.679 30.8223 288.597 32.8653 289.868 35.404C291.14 37.9477 291.776 40.7317 291.776 43.7611V47.9572H262.986C263.215 51.5925 264.432 54.4867 266.627 56.6298C268.823 58.7729 271.773 59.8494 275.474 59.8494C278.479 59.8494 280.783 59.2335 282.378 57.9967C283.972 56.7599 285.14 55.0475 285.88 52.8543H292.471ZM263.056 42.7146H284.842C284.842 39.545 284.032 37.0614 282.413 35.2638C280.793 33.4712 278.25 32.5699 274.783 32.5699C271.545 32.5699 268.897 33.4461 266.841 35.1937C264.784 36.9412 263.523 39.4498 263.061 42.7096L263.056 42.7146Z",className:n}),i.jsx("path",{d:"M38.6936 29.9832L12.8633 5.88983V29.9832H38.6936Z M39.5005 29.9832L65.3308 5.88983V29.9832H39.5005Z M38.7227 2L38.7227 90.2534 M64.5246 53.7584L38.6943 30.0068V62.9404L64.5246 85.9724V53.7584Z M12.8924 53.7584L38.7227 30.0068V62.9404L12.8924 85.9724V53.7584Z M2.28711 29.9832V64.4236H12.8863V53.7348L38.7226 29.9832H2.28711Z M38.6943 30.3L64.5246 54.0515V64.7403H75.2872V30.3L38.6943 30.3Z",className:a,strokeWidth:"4.30504",strokeMiterlimit:"10"})]})})});Yae.displayName="Full";const Qae=A.memo(({width:e,fillColor:t,...n})=>{const r=U("h-auto group",e,{});return i.jsx("div",{className:r,...n,children:i.jsxs("svg",{viewBox:"0 0 1456 187",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M311.555 34.9571C330.01 34.9571 344.672 45.7532 344.672 65.084C344.672 84.4148 330.01 95.3568 311.555 95.3568H279.094V140H265.817V34.9571H311.555ZM279.094 84.0501H309.585C322.643 84.0501 331.396 77.1931 331.396 65.157C331.396 53.0478 322.643 46.2638 309.585 46.2638H279.094V84.0501ZM353.444 102.797C353.444 77.7037 367.669 63.9169 390.209 63.9169C412.823 63.9169 425.151 77.8496 425.151 99.5877V105.934H365.918C366.137 121.399 375.255 131.465 390.209 131.465C404.434 131.465 410.926 123.587 412.093 116.73H423.619V118.918C421.868 128.037 413.187 141.751 390.355 141.751C367.815 141.751 353.444 127.964 353.444 102.797ZM366.064 95.8674H412.896C412.75 83.2477 405.09 74.1294 390.136 74.1294C375.474 74.1294 367.085 83.3936 366.064 95.8674ZM447.732 65.6676H460.133V76.1719H461.3C464.218 69.8985 469.908 65.4487 483.257 65.4487H500.691V76.3907H483.549C467.501 76.3907 460.571 84.7795 460.571 101.849V140H447.732V65.6676ZM517.092 169.179V65.6676H529.638V75.8801H530.805C536.349 67.3453 545.322 63.9898 555.826 63.9898C575.157 63.9898 589.965 77.1202 589.965 102.87C589.965 128.547 575.157 141.678 555.826 141.678C545.541 141.678 536.641 138.395 531.097 130.152H529.93V169.179H517.092ZM529.492 102.87C529.492 120.888 539.121 131.028 553.2 131.028C567.425 131.028 576.981 120.888 576.981 102.87C576.981 84.7795 567.425 74.64 553.2 74.64C539.121 74.64 529.492 84.7795 529.492 102.87ZM637.266 34.9571V129.642H651.272V140H605.899V129.642H624.428V45.2426H610.276V34.9571H637.266ZM665.9 102.797C665.9 77.7037 680.125 63.9169 702.665 63.9169C725.278 63.9169 737.606 77.8496 737.606 99.5877V105.934H678.374C678.593 121.399 687.711 131.465 702.665 131.465C716.89 131.465 723.382 123.587 724.549 116.73H736.074V118.918C734.324 128.037 725.643 141.751 702.811 141.751C680.27 141.751 665.9 127.964 665.9 102.797ZM678.52 95.8674H725.351C725.205 83.2477 717.546 74.1294 702.592 74.1294C687.93 74.1294 679.541 83.3936 678.52 95.8674ZM752.566 65.6676H765.696L786.851 93.3143H788.018L810.85 65.6676H823.762V67.856L795.313 102.36L822.522 137.812V140H809.391L787.289 111.186H786.121L762.414 140H749.502V137.812L778.827 102.214L752.566 67.856V65.6676ZM871.43 65.6676V129.642H885.436V140H840.063V129.642H858.591V75.953H844.44V65.6676H871.43ZM857.205 52.9749V38.8962H872.087V52.9749H857.205ZM896.344 65.6676H919.613V43.8566H932.452V65.6676H962.068V76.0989H932.452V127.745L933.619 128.912H961.849V140H938.725C926.543 140 919.613 133.945 919.613 121.836V76.0989H896.344V65.6676ZM973.245 65.6676H986.302L1010.01 124.681H1011.18L1034.81 65.6676H1047.5V67.856L1004.76 169.179H991.992V166.99L1003.66 139.927L973.245 67.856V65.6676ZM1116.67 34.9571H1130.09V128.256H1189.03V140H1116.67V34.9571ZM1205.12 86.3114C1206.66 72.5245 1218.55 63.9169 1237.95 63.9169C1257.21 63.9169 1268.59 72.5245 1268.59 91.0529V140H1256.62V129.787H1255.46C1252.25 135.477 1244.66 141.605 1229.05 141.605C1212.78 141.605 1201.55 133.508 1201.55 119.648C1201.55 104.913 1212.78 98.4205 1227.96 96.5239L1256.19 93.0225V90.3235C1256.19 78.725 1249.84 74.1294 1237.66 74.1294C1225.4 74.1294 1218.18 78.725 1217.16 88.4998H1205.12V86.3114ZM1214.31 119.064C1214.31 126.797 1220.88 131.246 1231.17 131.246C1244.88 131.246 1256.19 123.952 1256.19 107.539V102.943L1230.51 106.299C1220.52 107.612 1214.31 111.259 1214.31 119.064ZM1291.61 34.9571H1304.44V75.5153H1305.61C1311.16 67.1995 1320.06 63.9898 1330.34 63.9898C1349.67 63.9898 1364.48 77.1202 1364.48 102.87C1364.48 128.547 1349.67 141.678 1330.34 141.678C1319.84 141.678 1310.86 138.322 1305.32 129.787H1304.15V140H1291.61V34.9571ZM1304.01 102.87C1304.01 120.888 1313.64 131.028 1327.71 131.028C1341.94 131.028 1351.49 120.888 1351.49 102.87C1351.49 84.7795 1341.94 74.64 1327.71 74.64C1313.64 74.64 1304.01 84.7795 1304.01 102.87ZM1381.07 85.1443C1381.07 71.941 1392.52 63.9898 1411.78 63.9898C1431.18 63.9898 1443 71.941 1444.17 86.0926V88.281H1432.42C1431.91 77.9955 1423.74 74.1294 1411.85 74.1294C1400.04 74.1294 1393.4 77.9226 1393.4 84.8525C1393.4 91.7824 1399.09 94.4085 1407.19 95.3568L1419.95 96.9616C1434.98 98.7853 1445.41 105.132 1445.41 118.773C1445.41 132.487 1434.54 141.678 1413.9 141.678C1393.25 141.678 1380.34 132.559 1379.39 119.064V116.876H1391.36C1392.09 126.943 1401.28 131.538 1413.9 131.538C1426.59 131.538 1433.01 126.87 1433.01 119.429C1433.01 112.134 1426.95 108.852 1417.18 107.612L1404.41 106.007C1390.41 104.329 1381.07 98.2017 1381.07 85.1443Z",className:t}),i.jsx("path",{d:"M59.4967 39.8367C30.9654 39.8367 7.83624 62.9671 7.83624 91.5C7.83624 120.033 30.9654 143.163 59.4967 143.163C83.9985 143.163 104.516 126.105 109.823 103.216H117.84C112.399 130.466 88.3457 151 59.4967 151C26.6376 151 0 124.361 0 91.5C0 58.639 26.6376 32 59.4967 32C91.0393 32 116.849 56.5473 118.866 87.5817H155.879L123.292 54.9276L128.838 49.3918L161.428 82.0483L161.387 35.9218L169.223 35.9149L169.264 82.0641L201.87 49.3918L207.416 54.9276L174.829 87.5817H221V95.4183H174.771L207.416 128.131L201.87 133.667L169.281 101.011L169.321 147.157L161.485 147.163L161.444 100.993L128.838 133.667L123.292 128.131L155.937 95.4183H129.748V95.3791H84.6892V95.4183H59.495V87.5817H111.011C109.008 60.8792 86.7098 39.8367 59.4967 39.8367Z",className:t})]})})});Qae.displayName="Labs";const Xae=A.memo(({lineColor:e,width:t,...n})=>{const r=U("h-auto group ",t);return i.jsx("div",{className:r,...n,children:i.jsx("svg",{viewBox:"0 0 101 116",stroke:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{className:e,d:"M86.4325 6.53418L50.4634 36.9696H86.4325V6.53418Z M50.4625 36.9696L17.2603 6.53418V36.9696H50.4625Z M50.4634 1L50.4634 114.441 M83.6656 70.172L50.4634 36.9697V79.3026L83.6656 108.908V70.172Z M17.2603 70.172L50.4625 36.9697V78.4497L17.2603 108.908V70.172Z M3.42627 36.9697V81.2394H17.2605V70.172L50.4628 36.9697H3.42627Z M50.4634 36.9697L83.6656 70.172V81.2394H97.4999V36.9697L50.4634 36.9697Z",strokeWidth:"5.53371",strokeMiterlimit:"10"})})})});Xae.displayName="Mark";const AS=A.memo(({width:e="w-10",sizeVariant:t="regular",fillColor:n="fill-super",svgClassName:r,...s})=>{const a=U("h-auto group",e);return i.jsx("div",{className:a,...s,children:t==="small"?i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1102.02 529.46",className:r,children:[i.jsx("path",{className:n,d:"M1068.23,126.49c-23.5-41.68-58.35-75.11-100.77-96.67C928.5,10.04,884.37,0,836.29,0H66.16C29.56,0-.08,29.71,0,66.3l1,463.16h109.72V107.9h78.16v24.37c0,2.66,3.19,3.99,5.1,2.13,20.89-20.25,50.62-30.5,88.64-30.5,26.8,0,51.2,6.11,72.52,18.17,21.44,12.13,38.59,30.51,50.96,54.66h0c12.27,23.95,18.49,53.6,18.49,88.14s-6.22,63.91-18.49,87.85c-12.37,24.14-29.52,42.53-50.96,54.66-21.33,12.06-45.73,18.17-72.52,18.17-16.55,0-55.7-2.68-87.27-25.54-1.98-1.43-4.75-.01-4.75,2.43v127.02h645.68c48.09,0,92.22-10.03,131.18-29.83,42.41-21.55,77.26-54.98,100.78-96.69,22.41-39.76,33.78-86.22,33.78-138.07s-11.37-98.6-33.79-138.39ZM650.3,177.46h-33.53c-23.25,0-40.37,6.1-50.86,18.14-10.7,12.27-16.12,32.09-16.12,58.91v164.71h-79.89V107.9h77.01v20.91c0,2.68,3.28,4.04,5.13,2.11,4.56-4.76,9.87-8.79,15.89-12.06,11.94-6.49,28.27-9.77,48.55-9.77h33.81v68.37ZM967.21,352.21c-13.66,24.23-33.03,42.83-57.56,55.29-24.32,12.36-52.71,18.62-84.38,18.62s-60.35-6.27-84.67-18.62c-24.54-12.46-43.9-31.07-57.56-55.29-13.58-24.09-20.47-53.47-20.47-87.34s6.89-63.54,20.47-87.63c13.65-24.22,33.02-42.82,57.56-55.29,24.33-12.36,52.81-18.62,84.67-18.62s60.06,6.27,84.38,18.62c24.53,12.47,43.9,31.07,57.56,55.29,13.58,24.1,20.47,53.58,20.47,87.63s-6.89,63.25-20.47,87.34Z"}),i.jsx("path",{className:n,d:"M868.46,179.51c-12.16-7.28-26.7-10.97-43.2-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28,12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.07-28.22-32.29Z"}),i.jsx("path",{className:n,d:"M221.1,351.54c12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.06-28.22-32.29-12.16-7.28-26.7-10.97-43.19-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28Z"})]}):i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 804.75 382.36",children:[i.jsx("path",{className:n,d:"M558.95,126.72c-27.44,27.72-27.17,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04Z"}),i.jsx("path",{className:n,d:"M780.18,91.05l-.13-.24c-16.48-29.44-40.65-53.13-69.89-68.52l-.17-.09c-27.73-14.73-58.76-22.2-92.21-22.2H30.68C14.13,0,.71,13.4.68,29.94l-.68,352.42h61.16V69.44h51.68v20.46c0,2.11,2.57,3.13,4.03,1.6,47.58-52.18,144.58-36.94,178.65,27.45,11.54,19.66,17.39,43.96,17.39,72.23,1.63,73.04-48.06,131.68-120.25,131.21-32.37,0-57.81-12.59-75.79-31.52-1.45-1.53-4.03-.51-4.03,1.6v89.9h504.93c33.45,0,64.43-7.45,92.09-22.14l.17-.09c29.33-15.43,53.53-39.13,69.99-68.53l.14-.25c16.31-28.74,24.58-62.44,24.58-100.17s-8.27-71.4-24.57-100.13ZM479.99,118.23c-23.81.5-56.08-3.74-72.26,13-8.74,8.61-13.17,23.4-13.17,43.96v140.34h-51.67V69.44h51.67v20.46c0,2.35,3.08,3.22,4.32,1.22,5.01-8.06,10.34-13.58,16.12-16.74,9.81-5.62,23.28-8.48,40.05-8.48h24.94v52.31ZM613.77,322.39c-75.99.52-128.52-54.09-127-131.21,0-27.33,5.53-51.14,16.45-70.78,43.24-80.65,177.73-80.74,220.65-.03,11.22,19.65,16.91,43.48,16.91,70.8,1.27,76.58-51.1,131.74-127,131.21Z"}),i.jsx("path",{className:n,d:"M240.29,256.1h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04-27.44,27.72-27.18,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0Z"})]})})});AS.displayName="Pro";const Zae=A.memo(({width:e,fillColor:t,isPro:n,isMax:r,isEnterprise:s,...a})=>{const o=U("h-auto group",e,{"":n});return s&&n?i.jsx("div",{className:o,...a,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 797 82",children:[i.jsx("path",{className:"fill-super",d:"M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"}),i.jsx("path",{className:t,d:"M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"})]})}):s&&r?i.jsx("div",{className:o,...a,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 797 82",children:[i.jsx("path",{className:"fill-max",d:"M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"}),i.jsx("path",{className:t,d:"M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"})]})}):n?i.jsx("div",{className:o,...a,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3913.07 632",children:[i.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),i.jsxs("g",{children:[i.jsx("path",{className:"fill-super",d:"M3355.84,188.2c-34.07-64.39-131.07-79.63-178.65-27.45-1.45,1.53-4.03.51-4.03-1.6v-20.46s-51.68,0-51.68,0v360.92h51.68v-137.9c0-2.11,2.57-3.13,4.03-1.6,17.98,18.93,43.42,31.52,75.79,31.52,72.2.47,121.88-58.16,120.25-131.21,0-28.27-5.85-52.57-17.39-72.23ZM3321.56,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.18-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),i.jsx("path",{className:"fill-super",d:"M3678.1,499.61h-438.05v-48.22h438.05c33.41,0,64.39-7.45,92.07-22.16,29.4-15.46,53.58-39.15,70.02-68.56l.08-.14c16.31-28.72,24.58-62.4,24.58-100.11s-8.26-71.36-24.56-100.07l-.08-.13c-16.46-29.43-40.64-53.13-69.93-68.54-27.79-14.76-58.78-22.22-92.19-22.22h-555.91V21.24h555.91c41.39,0,79.99,9.36,114.73,27.81,37.45,19.7,68.41,49.99,89.43,87.55,20.45,36.05,30.82,77.7,30.82,123.82s-10.38,87.81-30.84,123.86c-21,37.53-51.96,67.81-89.53,87.57-34.63,18.4-73.22,27.75-114.61,27.75Z"}),i.jsx("path",{className:"fill-super",d:"M3784.19,189.62c-42.92-80.72-177.41-80.62-220.65.03-10.91,19.63-16.45,43.44-16.45,70.78-1.52,77.12,51.01,131.73,127,131.21,75.9.53,128.27-54.63,127-131.21,0-27.33-5.69-51.15-16.91-70.8ZM3749.42,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.17-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),i.jsx("path",{className:"fill-super",d:"M3515.38,135.16c-16.77,0-30.24,2.85-40.05,8.48-5.78,3.15-11.11,8.68-16.12,16.74-1.24,2-4.32,1.13-4.32-1.22v-20.46s-51.67,0-51.67,0v246.1h51.67v-140.34c0-20.57,4.43-35.36,13.17-43.97,16.17-16.75,48.45-12.5,72.26-13v-52.31h-24.94Z"})]})]})}):r?i.jsx("div",{className:o,...a,children:i.jsxs("svg",{viewBox:"0 0 485 74",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),i.jsx("path",{d:"M113.78 16.0915H117.318V23.4013H112.739C109.15 23.4013 106.475 24.2666 104.701 26.003C102.937 27.7336 102.051 30.5812 102.051 34.5388V58.508H94.8233V16.2578H102.051V22.9997C102.051 23.3803 102.242 23.5676 102.613 23.5676C102.825 23.5676 102.984 23.5149 103.098 23.406C103.211 23.2959 103.308 23.0828 103.422 22.7538C104.813 18.3162 108.274 16.095 113.785 16.095H113.78V16.0903V16.0915ZM161.863 25.1483C163.76 28.5322 164.714 32.6103 164.714 37.3759C164.714 42.1414 163.765 46.2196 161.863 49.6034C159.96 52.9873 157.495 55.5211 154.469 57.2001C151.443 58.8792 148.189 59.7187 144.71 59.7187C137.853 59.7187 133.032 56.9554 130.248 51.4277C130.036 50.9944 129.763 50.7755 129.444 50.7755C129.124 50.7755 128.959 50.9371 128.959 51.2661V73.9379H121.73V16.2531H128.959V23.4856C128.959 23.8088 129.119 23.9762 129.444 23.9762C129.769 23.9762 130.031 23.762 130.248 23.324C133.032 17.7975 137.853 15.033 144.71 15.033C148.189 15.033 151.443 15.8725 154.469 17.5516C157.495 19.2306 159.955 21.7644 161.863 25.1483ZM157.491 37.3759C157.491 32.3914 156.166 28.5064 153.515 25.7173C150.866 22.9271 147.376 21.5349 143.029 21.5349C138.682 21.5349 135.193 22.9318 132.542 25.7173C129.887 28.5064 128.918 32.3961 128.918 37.3759C128.918 42.3556 129.892 46.2453 132.542 49.0344C135.193 51.8293 138.687 53.2168 143.029 53.2168C147.371 53.2168 150.866 51.8199 153.515 49.0344C156.166 46.25 157.491 42.3556 157.491 37.3759ZM40.127 25.2103C42.0241 28.5942 42.9779 32.6724 42.9779 37.4379C42.9779 42.2034 42.0287 46.2816 40.127 49.6655C38.224 53.0493 35.7605 55.5843 32.734 57.2622C29.7076 58.9412 26.454 59.7808 22.9747 59.7808C16.1177 59.7808 11.2972 57.0175 8.51295 51.4897C8.30229 51.0565 8.02844 50.8375 7.70894 50.8375C7.38944 50.8375 7.22442 50.9991 7.22442 51.327V73.9988H0V16.3151H7.22793V23.5465C7.22793 23.8697 7.3871 24.0371 7.71245 24.0371C8.0378 24.0371 8.29995 23.8228 8.51646 23.3849C11.3007 17.8584 16.1212 15.0939 22.9782 15.0939C26.4587 15.0939 29.7111 15.9334 32.7375 17.6125C35.764 19.2915 38.2228 21.8253 40.1305 25.2092H40.1246L40.127 25.2103ZM35.7488 37.4379C35.7488 32.4534 34.424 28.5684 31.7743 25.7794C29.1236 22.995 25.629 21.597 21.2871 21.597C16.9451 21.597 13.4506 22.9939 10.8009 25.7794C8.15132 28.5743 7.17644 32.4593 7.17644 37.4379C7.17644 42.4165 8.15132 46.3074 10.8009 49.0976C13.4506 51.8925 16.9416 53.2788 21.2871 53.2788C25.6325 53.2788 29.1236 51.882 31.7743 49.0976C34.424 46.3132 35.7488 42.4177 35.7488 37.4379ZM82.048 45.0873H89.6786C88.6627 49.0449 86.5854 52.4697 83.4559 55.3642C80.3206 58.2633 75.8359 59.7082 69.9949 59.7082C65.6026 59.7082 61.7359 58.8007 58.3899 56.9859C55.0439 55.171 52.461 52.5903 50.6353 49.2276C48.8108 45.8695 47.9026 41.9177 47.9026 37.3653C47.9026 32.8129 48.7897 28.8612 50.5522 25.5031C52.3159 22.145 54.7958 19.5585 57.9815 17.7448C61.1683 15.9299 64.9004 15.0225 69.185 15.0225C73.4695 15.0225 77.0215 15.9194 79.9906 17.7026C82.9656 19.4906 85.1822 21.864 86.6568 24.8099C88.1314 27.7664 88.8628 30.9992 88.8628 34.5189V39.3945H55.5261C55.7883 43.6178 57.202 46.9818 59.7428 49.4688C62.2847 51.9616 65.7021 53.2074 69.9878 53.2074C73.4672 53.2074 76.1379 52.4932 77.9847 51.0541C79.8303 49.6151 81.1808 47.6281 82.0422 45.0791L82.0469 45.0896L82.048 45.0873ZM55.3775 33.3082H80.6039C80.6039 29.6269 79.6653 26.7384 77.7892 24.653C75.9132 22.5723 72.9686 21.5244 68.9521 21.5244C65.2035 21.5244 62.1361 22.5407 59.7545 24.5746C57.3729 26.6025 55.9135 29.518 55.3775 33.3082ZM170.545 58.4986H177.778V0H170.545V58.5033V58.4986ZM272.204 11.6386H280.65V2.49282H272.204V11.6386ZM303.389 52.2051C302.076 52.3409 301.282 52.4089 301.021 52.4089C300.649 52.4089 300.343 52.3 300.134 52.0798C299.921 51.8656 299.809 51.5693 299.809 51.1829C299.809 50.9171 299.878 50.1139 300.015 48.785C300.143 47.4607 300.216 45.4116 300.216 42.653V22.4377H310.526L308.494 16.2484H300.219V4.86971H292.993V16.2425H285.129V22.4318H292.993V44.6752C292.993 49.3365 294.123 52.8046 296.367 55.0773C298.616 57.3512 302.045 58.4928 306.656 58.4928H312.279V51.9955H309.465C306.733 51.9955 304.71 52.0634 303.396 52.1993L303.389 52.2051ZM347.085 16.2425L335.113 51.6993C334.955 52.1372 334.7 52.7063 333.883 52.7063C333.067 52.7063 332.806 52.1384 332.643 51.6993L320.672 16.2484H313.3L327.163 58.4998H332.067C332.385 58.4998 332.63 58.5314 332.795 58.5829C332.954 58.6356 333.088 58.7703 333.196 58.9892C333.406 59.3124 333.38 59.803 333.113 60.4493L330.865 66.6234C330.541 67.4372 329.927 67.8435 329.021 67.8435C328.697 67.8435 327.949 67.7756 326.771 67.6397C325.592 67.5039 324.071 67.4372 322.195 67.4372H316.327V73.9333H324.04C328.54 73.9333 331.247 73.1616 333.578 71.6184C335.909 70.0752 337.713 67.3529 339 63.4538L353.973 17.8712V16.2437L347.094 16.2496L347.085 16.2437V16.2425ZM247.737 32.0097L236.408 16.2472H228.455V17.8689L242.028 36.1499L225.477 56.8711V58.4928H233.594L246.77 41.5103L259.062 58.4928H266.858V56.8711L252.472 37.37L268.065 17.952V16.2472H259.949L247.74 32.0097H247.737ZM272.973 58.4986H280.205V16.2531H272.973V58.5033V58.4986ZM225.379 45.0873C224.358 49.0449 222.288 52.4697 219.159 55.3642C216.022 58.2633 211.538 59.7082 205.695 59.7082C201.304 59.7082 197.436 58.8007 194.09 56.9859C190.739 55.171 188.163 52.5903 186.337 49.2276C184.517 45.8695 183.609 41.9177 183.609 37.3653C183.609 32.8129 184.496 28.8612 186.26 25.5031C188.029 22.145 190.503 19.5585 193.69 17.7448C196.873 15.9299 200.607 15.0225 204.897 15.0225C209.188 15.0225 212.734 15.9194 215.707 17.7026C218.678 19.4906 220.901 21.864 222.374 24.8099C223.849 27.7664 224.581 30.9992 224.581 34.5189V39.3945H191.241C191.509 43.6178 192.914 46.9818 195.458 49.4688C197.999 51.9616 201.418 53.2074 205.702 53.2074C209.182 53.2074 211.854 52.4932 213.698 51.0541C215.542 49.6151 216.894 47.6281 217.75 45.0791H225.385L225.379 45.0896V45.0873ZM191.261 33.3082H216.487C216.487 29.6269 215.548 26.7384 213.678 24.653C211.799 22.5723 208.858 21.5244 204.84 21.5244C201.09 21.5244 198.025 22.5407 195.642 24.5746C193.261 26.6025 191.798 29.518 191.266 33.3082H191.261Z",className:t}),i.jsxs("g",{children:[i.jsx("path",{d:"M369.705 16.0751V19.7517H370.279C371.485 17.7413 373.552 15.3866 379.007 15.3866C384.461 15.3866 386.93 18.2588 387.906 20.7282H388.48C389.915 18.1429 392.499 15.3866 398.241 15.3866C403.982 15.3866 408.345 18.5457 408.345 25.2666V45.3133H403.293V25.612C403.293 21.7633 401.169 19.4086 397.035 19.4086C392.385 19.4086 389.112 22.2234 389.112 28.0825V45.3145H384.06V25.6131C384.06 21.7644 381.936 19.4098 377.802 19.4098C373.151 19.4098 369.879 22.2246 369.879 28.0837V45.3156H364.827V16.0786H369.707L369.705 16.0751Z",className:"fill-max"}),i.jsx("path",{d:"M412.837 24.5758C413.813 19.1194 418.693 15.3855 425.985 15.3855C433.276 15.3855 438.328 19.1194 438.328 26.2419V45.3121H433.448V41.0045H432.873C431.61 43.0722 428.797 45.9444 422.711 45.9444C416.626 45.9444 412.032 42.7854 412.032 37.5585C412.032 32.3317 416.452 29.5169 422.423 28.9432L433.332 27.9093V26.1283C433.332 21.3605 430.518 19.178 425.869 19.178C421.219 19.178 418.232 21.3605 417.716 25.4387H412.836V24.5769L412.837 24.5758ZM423.573 42.1519C428.912 42.1519 433.333 39.0502 433.333 32.4441V31.6397L423.114 32.6162C419.324 32.9605 417.085 34.3971 417.085 37.3267C417.085 40.2563 419.612 42.1519 423.573 42.1519Z",className:"fill-max"}),i.jsx("path",{d:"M456.8 2.49283C461.595 2.49283 466.06 3.61337 470.071 5.74672C474.452 8.0522 477.928 11.4606 480.394 15.8725C482.786 20.0889 483.999 24.9855 483.999 30.4255C483.999 35.8654 482.786 40.7632 480.394 44.9796C479.086 47.319 477.492 49.3739 475.629 51.1349C474.431 52.2672 473.125 53.2788 471.71 54.1617L468.776 50.4617L455.493 33.7133H455.001L445.815 45.3156H440.418V44.4539L451.985 30.3037L440.418 16.1536V15.2918H445.815L455.001 26.8941H455.493L464.679 15.2918H470.075V16.1536L458.509 30.3037L472.647 47.5052C474.071 46.1142 475.295 44.5054 476.312 42.6858L476.32 42.6718C478.31 39.1685 479.319 35.0481 479.319 30.4255C479.319 25.8028 478.31 21.6837 476.321 18.1792L476.313 18.1651C474.297 14.5541 471.46 11.7686 467.883 9.88697C464.547 8.11308 460.821 7.21618 456.8 7.21618H364.861V2.49283H456.8Z",className:"fill-max"}),i.jsx("path",{d:"M462.359 55.5562L460.611 53.3526C459.374 53.5399 458.103 53.6348 456.8 53.6348H364.861V58.3183H456.8C459.252 58.3183 461.616 58.0326 463.877 57.4706L462.358 55.5562H462.359Z",className:"fill-max"})]})]})}):i.jsx("div",{className:o,...a,children:i.jsx("svg",{viewBox:"0 0 962 202",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M310.846 43.922H320.632V63.8822H307.966C298.037 63.8822 290.638 66.2483 285.737 70.9803C280.852 75.7123 278.401 83.4772 278.401 94.2751V159.698H258.4V44.3666H278.401V62.7707C278.401 63.8028 278.926 64.3269 279.961 64.3269C280.549 64.3269 280.995 64.1839 281.297 63.8822C281.6 63.5805 281.886 62.993 282.188 62.1038C286.039 49.9879 295.602 43.922 310.862 43.922H310.846ZM441.502 68.646C446.753 77.8877 449.395 89.0191 449.395 102.024C449.395 115.029 446.769 126.161 441.502 135.402C436.235 144.644 429.425 151.552 421.055 156.141C412.685 160.73 403.679 163.016 394.052 163.016C375.084 163.016 361.75 155.474 354.048 140.388C353.459 139.213 352.712 138.61 351.82 138.61C350.929 138.61 350.484 139.055 350.484 139.944V201.825H330.482V44.3666H350.484V64.1045C350.484 64.9938 350.929 65.4384 351.82 65.4384C352.712 65.4384 353.444 64.8509 354.048 63.6599C361.75 48.5746 375.084 41.032 394.052 41.032C403.679 41.032 412.685 43.3186 421.055 47.9077C429.425 52.4968 436.235 59.4043 441.502 68.646ZM429.393 102.024C429.393 88.4157 425.733 77.8083 418.397 70.2022C411.062 62.596 401.403 58.785 389.389 58.785C377.376 58.785 367.717 62.596 360.381 70.2022C353.046 77.8242 350.357 88.4316 350.357 102.024C350.357 115.617 353.046 126.24 360.381 133.846C367.717 141.468 377.392 145.263 389.389 145.263C401.387 145.263 411.062 141.452 418.397 133.846C425.733 126.24 429.393 115.617 429.393 102.024ZM111.004 68.8207C116.255 78.0624 118.897 89.1938 118.897 102.199C118.897 115.204 116.271 126.335 111.004 135.577C105.737 144.819 98.9266 151.726 90.5568 156.315C82.1869 160.904 73.1806 163.191 63.5536 163.191C44.5862 163.191 31.2517 155.648 23.5502 140.563C22.9614 139.388 22.2135 138.785 21.3225 138.785C20.4314 138.785 19.9858 139.229 19.9858 140.119V202H0V44.5413H20.0017V64.2792C20.0017 65.1685 20.4473 65.6131 21.3384 65.6131C22.2295 65.6131 22.9614 65.0256 23.5661 63.8346C31.2676 48.7493 44.6021 41.2067 63.5696 41.2067C73.1965 41.2067 82.2028 43.4933 90.5727 48.0824C98.9426 52.6715 105.753 59.579 111.02 68.8207H111.004ZM98.8948 102.199C98.8948 88.5904 95.235 77.983 87.8994 70.3769C80.5639 62.7707 70.9051 58.9597 58.8913 58.9597C46.8776 58.9597 37.2188 62.7707 29.8833 70.3769C22.5477 77.9989 19.8585 88.6062 19.8585 102.199C19.8585 115.792 22.5477 126.415 29.8833 134.021C37.2188 141.643 46.8776 145.438 58.8913 145.438C70.9051 145.438 80.5639 141.627 87.8994 134.021C95.235 126.415 98.8948 115.792 98.8948 102.199ZM221.578 123.08H242.694C239.878 133.878 234.133 143.231 225.477 151.139C216.805 159.047 204.393 163.001 188.242 163.001C176.085 163.001 165.392 160.523 156.131 155.569C146.87 150.615 139.726 143.564 134.682 134.386C129.637 125.224 127.123 114.426 127.123 102.008C127.123 89.5908 129.574 78.7929 134.459 69.6305C139.344 60.4682 146.202 53.4019 155.017 48.4476C163.833 43.4933 174.16 41.0161 186.015 41.0161C197.869 41.0161 207.687 43.4615 215.914 48.3365C224.14 53.2114 230.283 59.6901 234.356 67.7409C238.43 75.8076 240.466 84.6364 240.466 94.2434V107.55H148.239C148.971 119.079 152.869 128.257 159.902 135.053C166.936 141.849 176.388 145.263 188.242 145.263C197.869 145.263 205.252 143.31 210.36 139.388C215.468 135.466 219.208 130.035 221.578 123.08ZM148.462 90.9246H218.253C218.253 80.873 215.659 72.9969 210.472 67.2963C205.284 61.6115 197.137 58.7532 186.03 58.7532C175.656 58.7532 167.174 61.5321 160.587 67.074C153.999 72.6158 149.957 80.5713 148.477 90.9087L148.462 90.9246ZM465.227 159.682H485.229V0H465.227V159.698V159.682ZM742.753 31.7744H766.113V6.8122H742.753V31.7744ZM825.163 142.5C821.535 142.866 819.339 143.056 818.607 143.056C817.573 143.056 816.745 142.755 816.157 142.167C815.568 141.579 815.266 140.77 815.266 139.722C815.266 138.991 815.457 136.8 815.823 133.179C816.189 129.559 816.379 123.969 816.379 116.443V61.2622H844.91L839.293 44.3666H816.395V13.3068H796.394V44.3508H774.642V61.2463H796.394V121.969C796.394 134.688 799.512 144.152 805.734 150.361C811.956 156.569 821.44 159.682 834.185 159.682H849.748V141.945H841.966C834.408 141.945 828.807 142.135 825.179 142.5H825.163ZM942.198 44.3508L909.084 141.119C908.639 142.31 907.939 143.866 905.663 143.866C903.388 143.866 902.688 142.31 902.242 141.119L869.129 44.3508H848.729L887.078 159.682H900.635C901.526 159.682 902.194 159.761 902.64 159.904C903.086 160.047 903.451 160.412 903.754 161.016C904.343 161.905 904.263 163.239 903.531 165.001L897.309 181.849C896.418 184.072 894.716 185.184 892.201 185.184C891.31 185.184 889.242 184.993 885.98 184.628C882.718 184.263 878.501 184.072 873.314 184.072H857.083V201.809H878.421C890.865 201.809 898.359 199.698 904.804 195.49C911.248 191.281 916.245 183.85 919.809 173.195L961.229 48.7652V44.3349H942.198V44.3508ZM677.418 87.3835L646.086 44.3508H624.08V48.7811L661.633 98.6896L615.853 155.251V159.682H638.305L674.76 113.33L708.765 159.682H730.326V155.251L690.545 102.024L733.667 49.0193V44.3666H711.215L677.433 87.3994L677.418 87.3835ZM744.886 159.682H764.887V44.3666H744.886V159.698V159.682ZM616.76 123.08C613.943 133.878 608.199 143.231 599.543 151.139C590.871 159.047 578.459 163.001 562.308 163.001C550.151 163.001 539.458 160.523 530.197 155.569C520.936 150.615 513.792 143.564 508.747 134.386C503.703 125.224 501.189 114.426 501.189 102.008C501.189 89.5908 503.64 78.7929 508.525 69.6305C513.41 60.4682 520.268 53.4019 529.083 48.4476C537.899 43.4933 548.226 41.0161 560.08 41.0161C571.935 41.0161 581.753 43.4615 589.98 48.3365C598.206 53.2114 604.348 59.6901 608.422 67.7409C612.495 75.8076 614.532 84.6364 614.532 94.2434V107.55H522.305C523.037 119.079 526.935 128.257 533.968 135.053C541.002 141.849 550.453 145.263 562.308 145.263C571.935 145.263 579.318 143.31 584.426 139.388C589.534 135.466 593.273 130.035 595.644 123.08H616.76ZM522.527 90.9246H592.319C592.319 80.873 589.725 72.9969 584.538 67.2963C579.35 61.6115 571.203 58.7532 560.096 58.7532C549.721 58.7532 541.24 61.5321 534.653 67.074C528.065 72.6158 524.023 80.5713 522.543 90.9087L522.527 90.9246Z",className:t})})})});Zae.displayName="Word";const xPe={tiny:"w-4 md:w-6",small:"",md:"w-10","md-large":"w-20",large:"w-24",xl:"w-36"},bPe="w-6 md:w-8",Na=A.memo(({size:e="large",includeEffects:t=!1,isPro:n=!1,isMax:r=!1,isEnterprise:s=!1,variant:a="full",color:o="foreground",...l})=>{let c="w-28 md:w-[140px]";e==="tiny"?c="w-14 md:w-16":e==="small"?c="w-24":e==="large"?c="w-40 md:w-52":e==="xl"&&(c=s?"w-72":"w-64");const u=xPe?.[e]||bPe;let d="w-6";e==="large"?d="w-12":e==="md-large"?d="w-8":e==="xl"&&(d="w-36");const m=U("",{"stroke-foreground":o==="foreground","stroke-quiet":o==="quiet","stroke-super":o==="super"||o==="mixed","stroke-caution":o==="caution","stroke-light":o==="white","stroke-inverse":o==="background","group-hover:stroke-super transition-colors duration-300":t}),p=U(" block",{"fill-foreground":o==="foreground"||o==="mixed","fill-quiet":o==="quiet","fill-super":o==="super","fill-caution":o==="caution","fill-light":o==="white","fill-inverse":o==="background","group-hover:fill-super transition-colors duration-300":t});return a==="pro"?i.jsx(AS,{width:d,fillColor:p,...l}):a==="mark"?i.jsx("div",{className:U({"transition-all duration-300 ease-in-out hover:scale-105":t}),children:i.jsx(Xae,{lineColor:m,width:u,...l})}):a==="text"?i.jsx(Zae,{fillColor:p,width:c,isPro:n,isMax:r,isEnterprise:s,...l}):a==="full"?i.jsx(Yae,{fillColor:p,lineColor:m,width:c,...l}):a==="labs"?i.jsx(Qae,{width:c,fillColor:p,...l}):null});Na.displayName="Logo";const jS=A.memo(({onClick:e,testId:t="close-button",size:n="small",variant:r="common",className:s="right-sm top-sm absolute",ariaLabel:a="Close"})=>i.jsx("div",{className:s,children:i.jsx(Te,{testId:t,variant:r,pill:!0,size:n,onClick:e,icon:Lt,ariaLabel:a})}));jS.displayName="CloseButton";var UM="focusScope.autoFocusOnMount",BM="focusScope.autoFocusOnUnmount",a$={bubbles:!1,cancelable:!0},_Pe="FocusScope",g7=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=f.useState(null),u=ba(s),d=ba(a),m=f.useRef(null),p=In(t,y=>c(y)),h=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let y=function(_){if(h.paused||!l)return;const w=_.target;l.contains(w)?m.current=w:Vc(m.current,{select:!0})},v=function(_){if(h.paused||!l)return;const w=_.relatedTarget;w!==null&&(l.contains(w)||Vc(m.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&Vc(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),b.disconnect()}}},[r,l,h.paused]),f.useEffect(()=>{if(l){i$.add(h);const y=document.activeElement;if(!l.contains(y)){const x=new CustomEvent(UM,a$);l.addEventListener(UM,u),l.dispatchEvent(x),x.defaultPrevented||(wPe(kPe(Jae(l)),{select:!0}),document.activeElement===y&&Vc(l))}return()=>{l.removeEventListener(UM,u),setTimeout(()=>{const x=new CustomEvent(BM,a$);l.addEventListener(BM,d),l.dispatchEvent(x),x.defaultPrevented||Vc(y??document.body,{select:!0}),l.removeEventListener(BM,d),i$.remove(h)},0)}}},[l,u,d,h]);const g=f.useCallback(y=>{if(!n&&!r||h.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(v&&x){const b=y.currentTarget,[_,w]=CPe(b);_&&w?!y.shiftKey&&x===w?(y.preventDefault(),n&&Vc(_,{select:!0})):y.shiftKey&&x===_&&(y.preventDefault(),n&&Vc(w,{select:!0})):x===b&&y.preventDefault()}},[n,r,h.paused]);return i.jsx(nn.div,{tabIndex:-1,...o,ref:p,onKeyDown:g})});g7.displayName=_Pe;function wPe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Vc(r,{select:t}),document.activeElement!==n)return}function CPe(e){const t=Jae(e),n=o$(t,e),r=o$(t.reverse(),e);return[n,r]}function Jae(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function o$(e,t){for(const n of e)if(!SPe(n,{upTo:t}))return n}function SPe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function EPe(e){return e instanceof HTMLInputElement&&"select"in e}function Vc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&EPe(e)&&t&&e.select()}}var i$=MPe();function MPe(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=l$(e,t),e.unshift(t)},remove(t){e=l$(e,t),e[0]?.resume()}}}function l$(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function kPe(e){return e.filter(t=>t.tagName!=="A")}var VM=0;function eoe(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??c$()),document.body.insertAdjacentElement("beforeend",e[1]??c$()),VM++,()=>{VM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),VM--}},[])}function c$(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zy="right-scroll-bar-position",Gy="width-before-scroll-bar",TPe="with-scroll-bars-hidden",NPe="--removed-body-scroll-bar-size";function WM(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function APe(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var jPe=typeof window<"u"?f.useLayoutEffect:f.useEffect,u$=new WeakMap;function toe(e,t){var n=APe(null,function(r){return e.forEach(function(s){return WM(s,r)})});return jPe(function(){var r=u$.get(n);if(r){var s=new Set(r),a=new Set(e),o=n.current;s.forEach(function(l){a.has(l)||WM(l,null)}),a.forEach(function(l){s.has(l)||WM(l,o)})}u$.set(n,e)},[e]),n}function RPe(e){return e}function IPe(e,t){t===void 0&&(t=RPe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function noe(e){e===void 0&&(e={});var t=IPe(null);return t.options=nr({async:!0,ssr:!1},e),t}var roe=function(e){var t=e.sideCar,n=SR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,nr({},n))};roe.isSideCarExport=!0;function soe(e,t){return e.useMedium(t),roe}var aoe=noe(),$M=function(){},RS=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:$M,onWheelCapture:$M,onTouchMoveCapture:$M}),s=r[0],a=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,p=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=SR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=toe([n,t]),S=nr(nr({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(w,{sideCar:aoe,removeScrollBar:u,shards:m,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?f.cloneElement(f.Children.only(l),nr(nr({},S),{ref:C})):f.createElement(x,nr({},S,{className:c,ref:C}),l))});RS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RS.classNames={fullWidth:Gy,zeroRight:zy};var PPe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function OPe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=PPe();return t&&e.setAttribute("nonce",t),e}function LPe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function DPe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var FPe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=OPe())&&(LPe(t,n),DPe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},UPe=function(){var e=FPe();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},y7=function(){var e=UPe(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},BPe={left:0,top:0,right:0,gap:0},HM=function(e){return parseInt(e||"",10)||0},VPe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[HM(n),HM(r),HM(s)]},WPe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return BPe;var t=VPe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$Pe=y7(),zm="data-scroll-locked",HPe=function(e,t,n,r){var s=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(TPe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(zm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zy,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gy,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(zy," .").concat(zy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gy," .").concat(Gy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zm,`] {
    `).concat(NPe,": ").concat(l,`px;
  }
`)},d$=function(){var e=parseInt(document.body.getAttribute(zm)||"0",10);return isFinite(e)?e:0},zPe=function(){f.useEffect(function(){return document.body.setAttribute(zm,(d$()+1).toString()),function(){var e=d$()-1;e<=0?document.body.removeAttribute(zm):document.body.setAttribute(zm,e.toString())}},[])},ooe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;zPe();var a=f.useMemo(function(){return WPe(s)},[s]);return f.createElement($Pe,{styles:HPe(a,!t,s,n?"":"!important")})},fA=!1;if(typeof window<"u")try{var tb=Object.defineProperty({},"passive",{get:function(){return fA=!0,!0}});window.addEventListener("test",tb,tb),window.removeEventListener("test",tb,tb)}catch{fA=!1}var qf=fA?{passive:!1}:!1,GPe=function(e){return e.tagName==="TEXTAREA"},ioe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!GPe(e)&&n[t]==="visible")},qPe=function(e){return ioe(e,"overflowY")},KPe=function(e){return ioe(e,"overflowX")},f$=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=loe(e,r);if(s){var a=coe(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},YPe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},QPe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},loe=function(e,t){return e==="v"?qPe(t):KPe(t)},coe=function(e,t){return e==="v"?YPe(t):QPe(t)},XPe=function(e,t){return e==="h"&&t==="rtl"?-1:1},ZPe=function(e,t,n,r,s){var a=XPe(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,c=t.contains(l),u=!1,d=o>0,m=0,p=0;do{var h=coe(e,l),g=h[0],y=h[1],v=h[2],x=y-v-a*g;(g||x)&&loe(e,l)&&(m+=x,p+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(m)<1||!d&&Math.abs(p)<1)&&(u=!0),u},nb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},m$=function(e){return[e.deltaX,e.deltaY]},p$=function(e){return e&&"current"in e?e.current:e},JPe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},eOe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},tOe=0,Kf=[];function nOe(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(tOe++)[0],a=f.useState(y7)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=ze([e.lockRef.current],(e.shards||[]).map(p$),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var x=nb(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-x[0],w="deltaY"in y?y.deltaY:b[1]-x[1],C,S=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&S.type==="range")return!1;var M=f$(E,S);if(!M)return!0;if(M?C=E:(C=E==="v"?"h":"v",M=f$(E,S)),!M)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=C),!C)return!0;var k=r.current||C;return ZPe(k,v,y,k==="h"?_:w)},[]),c=f.useCallback(function(y){var v=y;if(!(!Kf.length||Kf[Kf.length-1]!==a)){var x="deltaY"in v?m$(v):nb(v),b=t.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&JPe(C.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(p$).filter(Boolean).filter(function(C){return C.contains(v.target)}),w=_.length>0?l(v,_[0]):!o.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),u=f.useCallback(function(y,v,x,b){var _={name:y,delta:v,target:x,should:b,shadowParent:rOe(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),d=f.useCallback(function(y){n.current=nb(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,m$(y),y.target,l(y,e.lockRef.current))},[]),p=f.useCallback(function(y){u(y.type,nb(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return Kf.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,qf),document.addEventListener("touchmove",c,qf),document.addEventListener("touchstart",d,qf),function(){Kf=Kf.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,qf),document.removeEventListener("touchmove",c,qf),document.removeEventListener("touchstart",d,qf)}},[]);var h=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:eOe(s)}):null,h?f.createElement(ooe,{gapMode:e.gapMode}):null)}function rOe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sOe=soe(aoe,nOe);var v7=f.forwardRef(function(e,t){return f.createElement(RS,nr({},e,{ref:t,sideCar:sOe}))});v7.classNames=RS.classNames;var aOe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Yf=new WeakMap,rb=new WeakMap,sb={},zM=0,uoe=function(e){return e&&(e.host||uoe(e.parentNode))},oOe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=uoe(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},iOe=function(e,t,n,r){var s=oOe(t,Array.isArray(e)?e:[e]);sb[n]||(sb[n]=new WeakMap);var a=sb[n],o=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var d=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))d(p);else try{var h=p.getAttribute(r),g=h!==null&&h!=="false",y=(Yf.get(p)||0)+1,v=(a.get(p)||0)+1;Yf.set(p,y),a.set(p,v),o.push(p),y===1&&g&&rb.set(p,!0),v===1&&p.setAttribute(n,"true"),g||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),l.clear(),zM++,function(){o.forEach(function(m){var p=Yf.get(m)-1,h=a.get(m)-1;Yf.set(m,p),a.set(m,h),p||(rb.has(m)||m.removeAttribute(r),rb.delete(m)),h||m.removeAttribute(n)}),zM--,zM||(Yf=new WeakMap,Yf=new WeakMap,rb=new WeakMap,sb={})}},doe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=aOe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),iOe(r,s,n,"aria-hidden")):function(){return null}},IS="Dialog",[foe,mLt]=Ra(IS),[lOe,Si]=foe(IS),x7=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[u,d]=_i({prop:r,defaultProp:s??!1,onChange:a,caller:IS});return i.jsx(lOe,{scope:t,triggerRef:l,contentRef:c,contentId:Um(),titleId:Um(),descriptionId:Um(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(m=>!m),[d]),modal:o,children:n})};x7.displayName=IS;var moe="DialogTrigger",poe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Si(moe,n),a=In(t,s.triggerRef);return i.jsx(nn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":M7(s.open),...r,ref:a,onClick:Pt(e.onClick,s.onOpenToggle)})});poe.displayName=moe;var b7="DialogPortal",[cOe,hoe]=foe(b7,{forceMount:void 0}),_7=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=Si(b7,t);return i.jsx(cOe,{scope:t,forceMount:n,children:f.Children.map(r,o=>i.jsx(Os,{present:n||a.open,children:i.jsx(i1,{asChild:!0,container:s,children:o})}))})};_7.displayName=b7;var Bw="DialogOverlay",w7=f.forwardRef((e,t)=>{const n=hoe(Bw,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Si(Bw,e.__scopeDialog);return a.modal?i.jsx(Os,{present:r||a.open,children:i.jsx(dOe,{...s,ref:t})}):null});w7.displayName=Bw;var uOe=P0("DialogOverlay.RemoveScroll"),dOe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Si(Bw,n);return i.jsx(v7,{as:uOe,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(nn.div,{"data-state":M7(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Xd="DialogContent",C7=f.forwardRef((e,t)=>{const n=hoe(Xd,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Si(Xd,e.__scopeDialog);return i.jsx(Os,{present:r||a.open,children:a.modal?i.jsx(fOe,{...s,ref:t}):i.jsx(mOe,{...s,ref:t})})});C7.displayName=Xd;var fOe=f.forwardRef((e,t)=>{const n=Si(Xd,e.__scopeDialog),r=f.useRef(null),s=In(t,n.contentRef,r);return f.useEffect(()=>{const a=r.current;if(a)return doe(a)},[]),i.jsx(goe,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pt(e.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Pt(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Pt(e.onFocusOutside,a=>a.preventDefault())})}),mOe=f.forwardRef((e,t)=>{const n=Si(Xd,e.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return i.jsx(goe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),goe=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=Si(Xd,n),c=f.useRef(null),u=In(t,c);return eoe(),i.jsxs(i.Fragment,{children:[i.jsx(g7,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(a1,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":M7(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(pOe,{titleId:l.titleId}),i.jsx(gOe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),S7="DialogTitle",E7=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Si(S7,n);return i.jsx(nn.h2,{id:s.titleId,...r,ref:t})});E7.displayName=S7;var yoe="DialogDescription",voe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Si(yoe,n);return i.jsx(nn.p,{id:s.descriptionId,...r,ref:t})});voe.displayName=yoe;var xoe="DialogClose",boe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Si(xoe,n);return i.jsx(nn.button,{type:"button",...r,ref:t,onClick:Pt(e.onClick,()=>s.onOpenChange(!1))})});boe.displayName=xoe;function M7(e){return e?"open":"closed"}var _oe="DialogTitleWarning",[pLt,woe]=_9e(_oe,{contentName:Xd,titleName:S7,docsSlug:"dialog"}),pOe=({titleId:e})=>{const t=woe(_oe),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},hOe="DialogDescriptionWarning",gOe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${woe(hOe).contentName}}.`;return f.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},k7=x7,yOe=poe,T7=_7,Coe=w7,PS=C7,OS=E7,N7=voe,vOe=boe;const A7=A.memo(e=>{const{children:t,trigger:n,...r}=e;return i.jsxs(k7,{...r,children:[n&&i.jsx(yOe,{asChild:!0,children:n}),i.jsx(it,{children:r.open&&i.jsx(T7,{forceMount:!0,children:t})})]})});A7.displayName="ControlledDialog";function xOe(e){const[t,n]=f.useState(!1),[r,s]=f.useState(!1),a=f.useMemo(()=>e?.isEnabled??!0,[e?.isEnabled]),o=f.useMemo(()=>a&&!t&&!r,[a,t,r]);return f.useMemo(()=>({canShow:o,handleConfirm(){n(!1),s(!0),e?.onConfirm()},handleCancel(){n(!1),s(!1)},isShowing:t,show(){n(!0)}}),[o,t,e])}const Soe=Cf("ConfirmCloseModalContext",{canShow:!1,handleCancel(){},handleConfirm(){},isShowing:!1,show(){}}),Eoe=A.memo(function(t){const{children:n,trigger:r,value:s}=t;return i.jsx(Soe.Provider,{value:s,children:i.jsx(A7,{onOpenChange:s.handleCancel,open:s.isShowing,trigger:r,children:n})})});Eoe.displayName="ConfirmCloseModalDialog";function bOe(){const e=f.useContext(Soe);if(!e)throw new Error("useConfirmCloseModalContext() used outside of provider.");return e}var Moe=noe(),GM=function(){},LS=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:GM,onWheelCapture:GM,onTouchMoveCapture:GM}),s=r[0],a=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,p=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=SR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=toe([n,t]),S=nr(nr({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(w,{sideCar:Moe,removeScrollBar:u,shards:m,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?f.cloneElement(f.Children.only(l),nr(nr({},S),{ref:C})):f.createElement(x,nr({},S,{className:c,ref:C}),l))});LS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};LS.classNames={fullWidth:Gy,zeroRight:zy};var mA=!1;if(typeof window<"u")try{var ab=Object.defineProperty({},"passive",{get:function(){return mA=!0,!0}});window.addEventListener("test",ab,ab),window.removeEventListener("test",ab,ab)}catch{mA=!1}var Qf=mA?{passive:!1}:!1,_Oe=function(e){return e.tagName==="TEXTAREA"},koe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!_Oe(e)&&n[t]==="visible")},wOe=function(e){return koe(e,"overflowY")},COe=function(e){return koe(e,"overflowX")},h$=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Toe(e,r);if(s){var a=Noe(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SOe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},EOe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Toe=function(e,t){return e==="v"?wOe(t):COe(t)},Noe=function(e,t){return e==="v"?SOe(t):EOe(t)},MOe=function(e,t){return e==="h"&&t==="rtl"?-1:1},kOe=function(e,t,n,r,s){var a=MOe(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,c=t.contains(l),u=!1,d=o>0,m=0,p=0;do{var h=Noe(e,l),g=h[0],y=h[1],v=h[2],x=y-v-a*g;(g||x)&&Toe(e,l)&&(m+=x,p+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(m)<1||!d&&Math.abs(p)<1)&&(u=!0),u},ob=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},g$=function(e){return[e.deltaX,e.deltaY]},y$=function(e){return e&&"current"in e?e.current:e},TOe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},NOe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},AOe=0,Xf=[];function jOe(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(AOe++)[0],a=f.useState(y7)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=ze([e.lockRef.current],(e.shards||[]).map(y$),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var x=ob(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-x[0],w="deltaY"in y?y.deltaY:b[1]-x[1],C,S=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&S.type==="range")return!1;var M=h$(E,S);if(!M)return!0;if(M?C=E:(C=E==="v"?"h":"v",M=h$(E,S)),!M)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=C),!C)return!0;var k=r.current||C;return kOe(k,v,y,k==="h"?_:w)},[]),c=f.useCallback(function(y){var v=y;if(!(!Xf.length||Xf[Xf.length-1]!==a)){var x="deltaY"in v?g$(v):ob(v),b=t.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&TOe(C.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(y$).filter(Boolean).filter(function(C){return C.contains(v.target)}),w=_.length>0?l(v,_[0]):!o.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),u=f.useCallback(function(y,v,x,b){var _={name:y,delta:v,target:x,should:b,shadowParent:ROe(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),d=f.useCallback(function(y){n.current=ob(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,g$(y),y.target,l(y,e.lockRef.current))},[]),p=f.useCallback(function(y){u(y.type,ob(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return Xf.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Qf),document.addEventListener("touchmove",c,Qf),document.addEventListener("touchstart",d,Qf),function(){Xf=Xf.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Qf),document.removeEventListener("touchmove",c,Qf),document.removeEventListener("touchstart",d,Qf)}},[]);var h=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:NOe(s)}):null,h?f.createElement(ooe,{gapMode:e.gapMode}):null)}function ROe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const IOe=soe(Moe,jOe);var j7=f.forwardRef(function(e,t){return f.createElement(LS,nr({},e,{ref:t,sideCar:IOe}))});j7.classNames=LS.classNames;const Nu=A.memo(({children:e,portalTarget:t})=>{const[n,r]=f.useState(!1);return f.useEffect(()=>(r(!0),()=>r(!1)),[]),n?xs.createPortal(e,t||document.body):null});Nu.displayName="Portal";const POe=250,Sh=A.memo(({animationClassName:e,children:t,isOpen:n=!1,transparent:r=!1,canOutsideClickClose:s=!0,onBeforeClose:a,onClose:o,onIsClosing:l,childVariant:c="default",center:u=!0,shouldClose:d=!1,disableAnimation:m=!1,testId:p,removeScroll:h=!0,shards:g=[],delayClose:y=!0,variant:v="default",portalTarget:x,includeBlur:b=!0,forceColorScheme:_})=>{const w=f.useRef(null),C=f.useRef(null),S=f.useRef(null),[E,M]=f.useState(!1),k=f.useRef(!1),T=f.useCallback(D=>{E||a?.()===!1||(y?(M(!0),l?.(),setTimeout(()=>{o?.(D),M(!1)},POe)):(M(!0),o?.(D),M(!1)))},[E,a,y,l,o]);f.useEffect(()=>{d&&!E&&T("closed")},[d,E,T]);const j=f.useCallback(D=>{r&&!s?D.stopPropagation():D.target===w.current&&T("backdrop")},[r,s,T]),R=f.useCallback(D=>{const F=D.target;if(F instanceof Element){if(C.current===F||C.current?.contains(F))return;const B=F.closest('[data-type="portal"]');if(B&&B!==S.current&&!r)return}M(!1),T("clickaway")},[T,r]);f.useEffect(()=>{if(n&&r&&s)return document.addEventListener("click",R),()=>{document.removeEventListener("click",R)}},[n,r,R,s]);const O=f.useCallback(D=>{D.key==="Escape"&&T("escape")},[T]);f.useEffect(()=>(n&&document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}),[n,O]);const P=f.useMemo(()=>U("duration-200 fill-mode-both",{"animate-in fade-in zoom-in-[0.98] ease-in":["default","large","small","hide-chrome","full-sheet"].includes(c),"zoom-out-[0.98] fade-out animate-out ease-out":["default","hide-chrome","full-sheet","large","small"].includes(c)&&E,"fixed bottom-0 left-0":c==="bottom-left-sheet","fixed top-0 right-0 left-0":c==="side-sheet","fixed bottom-0 left-0 right-0":c==="bottom-sheet"},e),[e,c,E]),N=U("items-stretch md:items-center",{"fill-mode-both fixed inset-0":!r,"bg-backdrop/70":v==="default"||v==="default-less-blur","bg-lightbox/95":v==="lightbox","animate-in fade-in ease-outExpo duration-200":!E&&!m,"animate-out fade-out ease-inExpo duration-200":E&&!m},{"backdrop-blur-md":b&&v==="lightbox","backdrop-blur-sm":b&&v==="default","backdrop-blur-[0.5px]":b&&v==="default-less-blur"}),I=f.useMemo(()=>n?i.jsxs(j7,{removeScrollBar:!1,enabled:h,allowPinchZoom:!0,shards:g,children:[i.jsx("div",{className:N}),i.jsx("div",{ref:w,onPointerDown:D=>{k.current=D.target===w.current},onPointerUp:D=>{k.current&&j(D),k.current=!1},className:U({"fixed inset-0 overflow-y-auto":!r,"flex items-center justify-center":u}),"data-test-id":p,children:i.jsx("div",{ref:C,className:P,children:t})})]}):null,[n,t,r,u,p,j,P,C,w,h,g,N]);return i.jsx(Nu,{portalTarget:x,children:i.jsx("div",{ref:S,"data-type":"portal","data-color-scheme":_,children:I})})});Sh.displayName="Overlay";const Aoe=Cf("ModalInternalContext",{canOutsideClickClose:!0}),Xt=A.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=le,variant:o="default",onClose:l,noPadding:c=!1,onIsClosing:u,titleContent:d,footerContent:m,icon:p,overlayVariant:h,titleLeadingButtonProps:g,confirmOnClose:y,titleTextVariant:v="page-title",headerClassname:x,closeButtonClassname:b="right-0 top-sm absolute",footerClassname:_,renderCloseButton:w=!0,fixedTitle:C,modalClassname:S,modalContentClassname:E,modalElementProps:M,includeBlur:k=!0,isOpen:T,ref:j,wrapperClassname:R,forceColorScheme:O,...P})=>{const N=f.useRef(null),I=f.useRef(null),D=f.useRef(null),F=f.useRef(null),[B,V]=f.useState(!1),[$,G]=f.useState(!1),[X,Y]=f.useState(!1);f.useEffect(()=>{T&&!X?Y(!0):!T&&X&&!B&&V(!0)},[T,X,B]);const W=f.useMemo(()=>!!y,[y]),H=xOe({isEnabled:W,onConfirm(){G(!0),V(!0)}}),Z=f.useMemo(()=>U(S,"bg-base shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"md:rounded-xl md:min-w-[600px] max-w-screen-sm shadow-md dark:border dark:border-subtlest relative h-full max-h-[100vh] md:max-h-[95vh] overflow-auto md:w-full":o==="default","min-h-0 max-h-[70vh] rounded-t-xl bottom-0 left-0 right-0 flex flex-col":o==="bottom-left-sheet","w-screen md:h-screen h-[100dvh] flex flex-col":o==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] shadow-overlay max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":o==="bottom-sheet","h-screen w-[40vw] min-w-[500px] shadow-overlay top-0 right-0 fixed flex flex-col":o==="side-sheet","animate-in slide-in-from-right ease-outExpo":o==="side-sheet"&&!$,"animate-out slide-out-to-right ease-inExpo":o==="side-sheet"&&$,"animate-in slide-in-from-bottom ease-in":["bottom-left-sheet","bottom-sheet"].includes(o)&&!$,"animate-out slide-out-to-bottom ease-out":["bottom-left-sheet","bottom-sheet"].includes(o)&&$,"max-h-[100vh] w-[90vw] rounded-l-xl flex flex-col":o==="wide","h-[95vh] w-[95vw] rounded-xl flex flex-col":o==="full","md:rounded-lg md:min-w-[600px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":o==="large","md:rounded-lg md:min-w-[500px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":o==="medium","md:rounded-lg md:max-w-[440px] shadow-md relative overflow-auto max-h-[100vh]":o==="small","md:rounded-lg md:max-w-[350px] shadow-md relative overflow-auto max-h-[100vh]":o==="thin"}),[o,$,S]),re=f.useMemo(()=>U("grow flex flex-col justify-center shrink-0",{"md:pt-md":e===void 0&&!d,"md:pb-lg":a?.length===0,"p-sm":!c,"p-0":c},E),[a?.length,c,e,E,d]),q=f.useMemo(()=>a.map((ue,ie)=>f.createElement(joe,{...ue,idx:ie,key:ie,confirmCloseModal:H})),[a,H]);f.useImperativeHandle(j,()=>({scrollContainerRef:N,headerRef:I,contentRef:D,footerRef:F}),[N,I,F]);const J=f.useCallback(()=>{u?.(),G(!0)},[u]),te=f.useCallback(ue=>{G(!1),V(!1),Y(!1),l?.(ue)},[l]),se=f.useCallback(()=>{if(H?.canShow){H.show();return}V(!0)},[H]),de=f.useCallback(()=>H?.canShow?(H.show(),!1):!0,[H]),{canOutsideClickClose:fe}=f.useContext(Aoe),ve=f.useMemo(()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{children:o==="hide-chrome"?i.jsx("div",{children:s}):i.jsxs(xe.div,{animate:{scale:H.isShowing?.955:1},className:Z,transition:{duration:.2},ref:N,...M,children:[i.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),i.jsxs(z,{className:U(R,"px-md pb-md flex min-h-0 w-screen grow flex-col md:w-[unset] md:grow-[unset]",{"h-full":!C,"h-auto !grow":C}),children:[i.jsxs(z,{variant:"background",className:U(x,"pt-md sticky top-0 z-[22] w-full shrink-0",{"text-center":r,"h-10":!e&&!d}),ref:I,children:[i.jsxs("div",{className:"p-sm flex items-center gap-1.5",children:[g&&i.jsx(Te,{extraCSS:"-ml-sm",...g,size:"small",variant:"common"}),p&&i.jsx(me,{icon:p,className:"text-foreground -ml-xs -translate-y-two",size:"xl"}),e&&i.jsx(L,{variant:v,className:U("line-clamp-3 text-pretty",v,{"pt-lg grow":r,"mr-lg":!r}),children:e}),!e&&d,w&&i.jsx(jS,{onClick:se,testId:"close-modal",className:b})]}),t&&i.jsx(L,{variant:"base",color:"light",className:U("mt-xs p-sm line-clamp-3 text-pretty",n),children:t})]}),s&&i.jsx("div",{className:re,ref:D,children:s}),(q?.length>0||m)&&i.jsxs(z,{variant:"background",className:U("gap-x-sm p-sm pt-lg bottom-0 z-10 flex items-center",{"justify-end":!m},{"justify-between":m},{sticky:!0},_),ref:F,children:[m&&i.jsx("div",{className:"flex-1",children:m}),q]})]})]})}),W&&i.jsx(Eoe,{value:H,children:y})]}),[q,r,s,b,H,y,re,C,_,m,se,x,p,W,Z,M,w,t,n,e,d,g,v,o,R]);return i.jsx(Sh,{forceColorScheme:O,includeBlur:k,childVariant:o,shouldClose:B,onBeforeClose:de,onIsClosing:J,onClose:te,variant:h,isOpen:X,canOutsideClickClose:fe,...P,children:ve})});Xt.displayName="Modal";const joe=A.memo(({idx:e,text:t,onClick:n,variant:r,disabled:s,isLoading:a,testId:o,icon:l,shouldShowConfirmDialog:c,buttonClassname:u,tooltipText:d,confirmCloseModal:m})=>{const p=f.useCallback(y=>{if(y.stopPropagation(),r&&c&&m.canShow){m.show();return}n?.()},[m,n,c,r]),h={key:e,text:t,disabled:s,isLoading:a,testId:o,chevronIcon:l,extraCSS:u},g=f.createElement(ge,{fullWidthMobile:!0,variant:r||void 0,...h,onClick:p,key:h.key});return d?i.jsx(pn,{tooltipText:d,tooltipLayout:"top",children:g}):g});joe.displayName="ButtonFactory";const Roe={keyProp:0,message:null,variant:"success",description:void 0,isVisible:!1,ctaText:void 0,ctaOnClick:void 0,openToast:()=>{},closeToast:()=>{}},Ioe=Cf("ToastStateContext",Roe),Poe=A.memo(({children:e})=>{const[t,n]=f.useState(Roe),r=f.useCallback((o,l,c,u,d,m,p)=>{n(h=>({...h,message:o,variant:l,timeout:c,description:u,ctaText:d,ctaOnClick:m,position:p??"top",isVisible:!0,keyProp:(h.keyProp||0)+1}))},[]),s=f.useCallback(()=>{n(o=>({...o,isVisible:!1}))},[]),a=f.useMemo(()=>({...t,openToast:r,closeToast:s}),[r,s,t]);return i.jsx(Ioe.Provider,{value:a,children:e})});Poe.displayName="ToastStateProvider";const xn=()=>{const e=f.useContext(Ioe);if(!e)throw new Error("useToastState must be used within ToastContext");return e},Ooe=A.memo(({isOpen:e,onClose:t,uuidOrSlug:n})=>{const r="request-access-modal",{$t:s}=Q(),{openToast:a}=xn(),{trackEvent:o}=Me();f.useEffect(()=>{o("thread access modal viewed",{uuidOrSlug:n})},[o,n]);const l=f.useCallback(u=>{o("thread access modal requested",{uuidOrSlug:n}),hPe({slugOrUUID:n,reason:r}).then(()=>{t(),a(s({defaultMessage:"Access request sent",id:"STvLV+qKiH"}),"success",3)})},[n,s,t,a,o]),c=f.useCallback(()=>l(n),[l,n]);return i.jsx(Xt,{isOpen:e,onClose:t,variant:"thin",children:i.jsx(z,{className:"px-md mx-auto text-center",children:i.jsxs("div",{className:"gap-y-md flex flex-col",children:[i.jsx("div",{className:"mb-lg flex justify-center",children:i.jsx(Na,{variant:"full",size:"large",color:"foreground"})}),i.jsxs("div",{className:"mx-auto max-w-sm",children:[i.jsx(L,{variant:"section-title",className:"-mt-md",children:s({defaultMessage:"This answer is private",id:"cA+GFbHP/s"})}),i.jsx(L,{variant:"base",color:"light",className:"-mb-md",children:s({defaultMessage:"You can access this page if the owner accepts your request.",id:"SOJ/6nzOoc"})})]}),i.jsxs("div",{className:"mt-lg mb-md mx-auto flex w-full max-w-sm flex-col gap-y-2",children:[i.jsx(ge,{variant:"primary",text:s({defaultMessage:"Request access",id:"vkHRp5q6Wi"}),onClick:c}),i.jsx(ge,{variant:"common",text:s({defaultMessage:"Back to Perplexity",id:"r89PhWwooe"}),onClick:t,textClassName:"font-normal"})]})]})})})});Ooe.displayName="RequestAccessModal";var ft;(function(e){e.SCHEDULED="scheduled",e.PRICE_ALERT="priceAlert",e.SHORTCUT="shortcut"})(ft||(ft={}));var Is;(function(e){e.TARGET_PRICE="targetPrice",e.MOVEMENT_AMOUNT="movementAmount"})(Is||(Is={}));const OOe=1e9,Loe=dt({STOCK_PRICE_TARGET:{defaultMessage:"Price Target",id:"GkDb3edsv4"},STOCK_PRICE_MOVEMENT:{defaultMessage:"Price Movement",id:"nccbHgYn+f"}});function hLt(e){return e in Loe}function LOe(e,t){return t.formatMessage(Loe[e])}function DOe(e,t){const{event_entity:n,event_type:r,value_upper_bound:s,value_lower_bound:a}=e;let o="";return r==="STOCK_PRICE_TARGET"?a!=null?o=t.formatMessage({defaultMessage:"goes below ${value}",id:"RKgpKR3E99"},{value:a}):s!=null?o=t.formatMessage({defaultMessage:"goes above ${value}",id:"8eV5ClXcpi"},{value:s}):o=t.formatMessage({defaultMessage:"price target",id:"vnTdzDaohg"}):r==="STOCK_PRICE_MOVEMENT"?a!=null?o=t.formatMessage({defaultMessage:"drops {percent}%+",id:"Vl3IJiE9mt"},{percent:Math.abs(a)}):s!=null?o=t.formatMessage({defaultMessage:"rises {percent}%+",id:"EK4T00JAfI"},{percent:s}):o=t.formatMessage({defaultMessage:"price movement",id:"Pcu8sUjesQ"}):o=t.formatMessage({defaultMessage:"event triggers",id:"LpIhmla5ty"}),{kind:n,friendly:o,isRecurring:!1}}function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function tr(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function at(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function wt(e){at(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Zd(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ys(e,t){at(2,arguments);var n=wt(e),r=tr(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function fi(e,t){at(2,arguments);var n=wt(e),r=tr(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+r+1,0);var o=a.getDate();return s>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}function Tg(e,t){if(at(2,arguments),!t||Zd(t)!=="object")return new Date(NaN);var n=t.years?tr(t.years):0,r=t.months?tr(t.months):0,s=t.weeks?tr(t.weeks):0,a=t.days?tr(t.days):0,o=t.hours?tr(t.hours):0,l=t.minutes?tr(t.minutes):0,c=t.seconds?tr(t.seconds):0,u=wt(e),d=r||n?fi(u,r+n*12):u,m=a||s?ys(d,a+s*7):d,p=l+o*60,h=c+p*60,g=h*1e3,y=new Date(m.getTime()+g);return y}function FOe(e,t){at(2,arguments);var n=wt(e).getTime(),r=tr(t);return new Date(n+r)}var UOe={};function Au(){return UOe}function ll(e,t){var n,r,s,a,o,l,c,u;at(1,arguments);var d=Au(),m=tr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=wt(e),h=p.getDay(),g=(h<m?7:0)+h-m;return p.setDate(p.getDate()-g),p.setHours(0,0,0,0),p}function Jd(e){return at(1,arguments),ll(e,{weekStartsOn:1})}function BOe(e){at(1,arguments);var t=wt(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=Jd(r),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var o=Jd(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function VOe(e){at(1,arguments);var t=BOe(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var r=Jd(n);return r}function q0(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function yu(e){at(1,arguments);var t=wt(e);return t.setHours(0,0,0,0),t}var WOe=864e5;function Gi(e,t){at(2,arguments);var n=yu(e),r=yu(t),s=n.getTime()-q0(n),a=r.getTime()-q0(r);return Math.round((s-a)/WOe)}function Vw(e,t){at(2,arguments);var n=tr(t),r=n*7;return ys(e,r)}function $Oe(e,t){at(2,arguments);var n=tr(t);return fi(e,n*12)}function HOe(e){at(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Zd(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=wt(r);(n===void 0||n<s||isNaN(Number(s)))&&(n=s)}),n||new Date(NaN)}function zOe(e){at(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Zd(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=wt(r);(n===void 0||n>s||isNaN(s.getDate()))&&(n=s)}),n||new Date(NaN)}function Gm(e,t){at(2,arguments);var n=wt(e),r=wt(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var Doe=6e4,GOe=36e5,qOe=1e3;function vs(e,t){at(2,arguments);var n=yu(e),r=yu(t);return n.getTime()===r.getTime()}function R7(e){return at(1,arguments),e instanceof Date||Zd(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function KOe(e){if(at(1,arguments),!R7(e)&&typeof e!="number")return!1;var t=wt(e);return!isNaN(Number(t))}function Ep(e,t){at(2,arguments);var n=wt(e),r=wt(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}var YOe=6048e5;function QOe(e,t,n){at(2,arguments);var r=ll(e,n),s=ll(t,n),a=r.getTime()-q0(r),o=s.getTime()-q0(s);return Math.round((a-o)/YOe)}function XOe(e,t){at(2,arguments);var n=wt(e),r=wt(t);return n.getFullYear()-r.getFullYear()}function v$(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function ZOe(e,t){at(2,arguments);var n=wt(e),r=wt(t),s=v$(n,r),a=Math.abs(Gi(n,r));n.setDate(n.getDate()-s*a);var o=+(v$(n,r)===-s),l=s*(a-o);return l===0?0:l}function I7(e,t){return at(2,arguments),wt(e).getTime()-wt(t).getTime()}var JOe={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},eLe="trunc";function P7(e){return JOe[eLe]}function tLe(e,t,n){at(2,arguments);var r=I7(e,t)/GOe;return P7()(r)}function nLe(e,t,n){at(2,arguments);var r=I7(e,t)/Doe;return P7()(r)}function rLe(e){at(1,arguments);var t=wt(e);return t.setHours(23,59,59,999),t}function DS(e){at(1,arguments);var t=wt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function sLe(e){at(1,arguments);var t=wt(e);return rLe(t).getTime()===DS(t).getTime()}function aLe(e,t){at(2,arguments);var n=wt(e),r=wt(t),s=Gm(n,r),a=Math.abs(Ep(n,r)),o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);var l=Gm(n,r)===-s;sLe(wt(e))&&a===1&&Gm(e,r)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function oLe(e,t,n){at(2,arguments);var r=I7(e,t)/1e3;return P7()(r)}function iLe(e,t){at(2,arguments);var n=wt(e),r=wt(t),s=Gm(n,r),a=Math.abs(XOe(n,r));n.setFullYear(1584),r.setFullYear(1584);var o=Gm(n,r)===-s,l=s*(a-Number(o));return l===0?0:l}function Ea(e){at(1,arguments);var t=wt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function lLe(e){at(1,arguments);var t=wt(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function O7(e,t){var n,r,s,a,o,l,c,u;at(1,arguments);var d=Au(),m=tr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=wt(e),h=p.getDay(),g=(h<m?-7:0)+6-(h-m);return p.setDate(p.getDate()+g),p.setHours(23,59,59,999),p}function Foe(e){return at(1,arguments),O7(e,{weekStartsOn:1})}function cLe(e,t){at(2,arguments);var n=tr(t);return FOe(e,-n)}var uLe=864e5;function dLe(e){at(1,arguments);var t=wt(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/uLe)+1}function Ww(e){at(1,arguments);var t=1,n=wt(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function Uoe(e){at(1,arguments);var t=wt(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=Ww(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=Ww(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function fLe(e){at(1,arguments);var t=Uoe(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Ww(n);return r}var mLe=6048e5;function pLe(e){at(1,arguments);var t=wt(e),n=Ww(t).getTime()-fLe(t).getTime();return Math.round(n/mLe)+1}function $w(e,t){var n,r,s,a,o,l,c,u;at(1,arguments);var d=Au(),m=tr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=wt(e),h=p.getUTCDay(),g=(h<m?7:0)+h-m;return p.setUTCDate(p.getUTCDate()-g),p.setUTCHours(0,0,0,0),p}function Boe(e,t){var n,r,s,a,o,l,c,u;at(1,arguments);var d=wt(e),m=d.getUTCFullYear(),p=Au(),h=tr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(m+1,0,h),g.setUTCHours(0,0,0,0);var y=$w(g,t),v=new Date(0);v.setUTCFullYear(m,0,h),v.setUTCHours(0,0,0,0);var x=$w(v,t);return d.getTime()>=y.getTime()?m+1:d.getTime()>=x.getTime()?m:m-1}function hLe(e,t){var n,r,s,a,o,l,c,u;at(1,arguments);var d=Au(),m=tr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=Boe(e,t),h=new Date(0);h.setUTCFullYear(p,0,m),h.setUTCHours(0,0,0,0);var g=$w(h,t);return g}var gLe=6048e5;function yLe(e,t){at(1,arguments);var n=wt(e),r=$w(n,t).getTime()-hLe(n,t).getTime();return Math.round(r/gLe)+1}function Un(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Lc={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return Un(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Un(r+1,2)},d:function(t,n){return Un(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Un(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Un(t.getUTCHours(),n.length)},m:function(t,n){return Un(t.getUTCMinutes(),n.length)},s:function(t,n){return Un(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,r-3));return Un(a,n.length)}},Zf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vLe={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Lc.y(t,n)},Y:function(t,n,r,s){var a=Boe(t,s),o=a>0?a:1-a;if(n==="YY"){var l=o%100;return Un(l,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Un(o,n.length)},R:function(t,n){var r=Uoe(t);return Un(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Un(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Un(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Un(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Lc.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Un(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var a=yLe(t,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):Un(a,n.length)},I:function(t,n,r){var s=pLe(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Un(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Lc.d(t,n)},D:function(t,n,r){var s=dLe(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Un(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var a=t.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Un(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var a=t.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Un(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return Un(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),a=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),a;switch(s===12?a=Zf.noon:s===0?a=Zf.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),a;switch(s>=17?a=Zf.evening:s>=12?a=Zf.afternoon:s>=4?a=Zf.morning:a=Zf.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Lc.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Lc.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Un(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Un(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Lc.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Lc.s(t,n)},S:function(t,n){return Lc.S(t,n)},X:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return b$(o);case"XXXX":case"XX":return md(o);case"XXXXX":case"XXX":default:return md(o,":")}},x:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"x":return b$(o);case"xxxx":case"xx":return md(o);case"xxxxx":case"xxx":default:return md(o,":")}},O:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+x$(o,":");case"OOOO":default:return"GMT"+md(o,":")}},z:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+x$(o,":");case"zzzz":default:return"GMT"+md(o,":")}},t:function(t,n,r,s){var a=s._originalDate||t,o=Math.floor(a.getTime()/1e3);return Un(o,n.length)},T:function(t,n,r,s){var a=s._originalDate||t,o=a.getTime();return Un(o,n.length)}};function x$(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(a===0)return n+String(s);var o=t;return n+String(s)+o+Un(a,2)}function b$(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Un(Math.abs(e)/60,2)}return md(e,t)}function md(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),a=Un(Math.floor(s/60),2),o=Un(s%60,2);return r+a+n+o}var _$=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Voe=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},xLe=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return _$(t,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",_$(s,n)).replace("{{time}}",Voe(a,n))},bLe={p:Voe,P:xLe},_Le=["D","DD"],wLe=["YY","YYYY"];function CLe(e){return _Le.indexOf(e)!==-1}function SLe(e){return wLe.indexOf(e)!==-1}function w$(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ELe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},MLe=function(t,n,r){var s,a=ELe[t];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function qM(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var kLe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},TLe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},NLe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ALe={date:qM({formats:kLe,defaultWidth:"full"}),time:qM({formats:TLe,defaultWidth:"full"}),dateTime:qM({formats:NLe,defaultWidth:"full"})},jLe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},RLe=function(t,n,r,s){return jLe[t]};function Ng(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=e.formattingValues[o]||e.formattingValues[a]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var ILe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PLe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},OLe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},LLe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},DLe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},FLe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ULe=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},BLe={ordinalNumber:ULe,era:Ng({values:ILe,defaultWidth:"wide"}),quarter:Ng({values:PLe,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ng({values:OLe,defaultWidth:"wide"}),day:Ng({values:LLe,defaultWidth:"wide"}),dayPeriod:Ng({values:DLe,defaultWidth:"wide",formattingValues:FLe,defaultFormattingWidth:"wide"})};function Ag(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?WLe(l,function(m){return m.test(o)}):VLe(l,function(m){return m.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function VLe(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function WLe(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function $Le(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;var l=t.slice(s.length);return{value:o,rest:l}}}var HLe=/^(\d+)(th|st|nd|rd)?/i,zLe=/\d+/i,GLe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qLe={any:[/^b/i,/^(a|c)/i]},KLe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},YLe={any:[/1/i,/2/i,/3/i,/4/i]},QLe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XLe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ZLe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JLe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eDe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tDe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nDe={ordinalNumber:$Le({matchPattern:HLe,parsePattern:zLe,valueCallback:function(t){return parseInt(t,10)}}),era:Ag({matchPatterns:GLe,defaultMatchWidth:"wide",parsePatterns:qLe,defaultParseWidth:"any"}),quarter:Ag({matchPatterns:KLe,defaultMatchWidth:"wide",parsePatterns:YLe,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ag({matchPatterns:QLe,defaultMatchWidth:"wide",parsePatterns:XLe,defaultParseWidth:"any"}),day:Ag({matchPatterns:ZLe,defaultMatchWidth:"wide",parsePatterns:JLe,defaultParseWidth:"any"}),dayPeriod:Ag({matchPatterns:eDe,defaultMatchWidth:"any",parsePatterns:tDe,defaultParseWidth:"any"})},Woe={code:"en-US",formatDistance:MLe,formatLong:ALe,formatRelative:RLe,localize:BLe,match:nDe,options:{weekStartsOn:0,firstWeekContainsDate:1}},rDe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sDe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aDe=/^'([^]*?)'?$/,oDe=/''/g,iDe=/[a-zA-Z]/;function Ec(e,t,n){var r,s,a,o,l,c,u,d,m,p,h,g,y,v,x,b,_,w;at(2,arguments);var C=String(t),S=Au(),E=(r=(s=n?.locale)!==null&&s!==void 0?s:S.locale)!==null&&r!==void 0?r:Woe,M=tr((a=(o=(l=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:S.firstWeekContainsDate)!==null&&o!==void 0?o:(m=S.locale)===null||m===void 0||(p=m.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=tr((h=(g=(y=(v=n?.weekStartsOn)!==null&&v!==void 0?v:n==null||(x=n.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&y!==void 0?y:S.weekStartsOn)!==null&&g!==void 0?g:(_=S.locale)===null||_===void 0||(w=_.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&h!==void 0?h:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var T=wt(e);if(!KOe(T))throw new RangeError("Invalid time value");var j=q0(T),R=cLe(T,j),O={firstWeekContainsDate:M,weekStartsOn:k,locale:E,_originalDate:T},P=C.match(sDe).map(function(N){var I=N[0];if(I==="p"||I==="P"){var D=bLe[I];return D(N,E.formatLong)}return N}).join("").match(rDe).map(function(N){if(N==="''")return"'";var I=N[0];if(I==="'")return lDe(N);var D=vLe[I];if(D)return!(n!=null&&n.useAdditionalWeekYearTokens)&&SLe(N)&&w$(N,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&CLe(N)&&w$(N,t,String(e)),D(R,N,E.localize,O);if(I.match(iDe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return N}).join("");return P}function lDe(e){var t=e.match(aDe);return t?t[1].replace(oDe,"'"):e}function cDe(e){at(1,arguments);var t=wt(e),n=t.getFullYear(),r=t.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}var uDe=6048e5;function dDe(e){at(1,arguments);var t=wt(e),n=Jd(t).getTime()-VOe(t).getTime();return Math.round(n/uDe)+1}function fDe(e){at(1,arguments);var t=wt(e),n=t.getTime();return n}function mDe(e){return at(1,arguments),Math.floor(fDe(e)/1e3)}function pDe(e,t){var n,r,s,a,o,l,c,u;at(1,arguments);var d=wt(e),m=d.getFullYear(),p=Au(),h=tr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(m+1,0,h),g.setHours(0,0,0,0);var y=ll(g,t),v=new Date(0);v.setFullYear(m,0,h),v.setHours(0,0,0,0);var x=ll(v,t);return d.getTime()>=y.getTime()?m+1:d.getTime()>=x.getTime()?m:m-1}function hDe(e,t){var n,r,s,a,o,l,c,u;at(1,arguments);var d=Au(),m=tr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=pDe(e,t),h=new Date(0);h.setFullYear(p,0,m),h.setHours(0,0,0,0);var g=ll(h,t);return g}var gDe=6048e5;function yDe(e,t){at(1,arguments);var n=wt(e),r=ll(n,t).getTime()-hDe(n,t).getTime();return Math.round(r/gDe)+1}function vDe(e){at(1,arguments);var t=wt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function xDe(e,t){return at(1,arguments),QOe(vDe(e),Ea(e),t)+1}function bDe(e){at(1,arguments);var t=wt(e.start),n=wt(e.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(n.getTime()))throw new RangeError("End Date is invalid");var r={};r.years=Math.abs(iLe(n,t));var s=Gm(n,t),a=Tg(t,{years:s*r.years});r.months=Math.abs(aLe(n,a));var o=Tg(a,{months:s*r.months});r.days=Math.abs(ZOe(n,o));var l=Tg(o,{days:s*r.days});r.hours=Math.abs(tLe(n,l));var c=Tg(l,{hours:s*r.hours});r.minutes=Math.abs(nLe(n,c));var u=Tg(c,{minutes:s*r.minutes});return r.seconds=Math.abs(oLe(n,u)),r}function $oe(e,t){at(2,arguments);var n=wt(e),r=wt(t);return n.getTime()>r.getTime()}function Hoe(e,t){at(2,arguments);var n=wt(e),r=wt(t);return n.getTime()<r.getTime()}function L7(e,t){at(2,arguments);var n=wt(e),r=wt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function zoe(e,t){at(2,arguments);var n=wt(e),r=wt(t);return n.getFullYear()===r.getFullYear()}function _De(e){return at(1,arguments),zoe(e,Date.now())}function D7(e){return at(1,arguments),vs(e,Date.now())}function wDe(e){return at(1,arguments),vs(e,ys(Date.now(),1))}function pA(e,t){at(2,arguments);var n=tr(t);return ys(e,-n)}function CDe(e){return at(1,arguments),vs(e,pA(Date.now(),1))}function SDe(e){return at(1,arguments),Math.floor(e*Doe)}function KM(e){return at(1,arguments),e*qOe}function YM(e,t){at(2,arguments);var n=wt(e),r=tr(t),s=n.getFullYear(),a=n.getDate(),o=new Date(0);o.setFullYear(s,r,15),o.setHours(0,0,0,0);var l=cDe(o);return n.setMonth(r,Math.min(a,l)),n}function C$(e,t){at(2,arguments);var n=wt(e),r=tr(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}var ce;(function(e){e.DEFAULT="turbo",e.PPLX_PRO_UPGRADED="pplx_pro_upgraded",e.PRO="pplx_pro",e.SONAR="experimental",e.GPT_4o="gpt4o",e.GPT_4_1="gpt41",e.GPT_5="gpt5",e.CLAUDE_2="claude2",e.GEMINI_2_FLASH="gemini2flash",e.GROK="grok",e.PPLX_REASONING="pplx_reasoning",e.CLAUDE_3_7_SONNET_THINKING="claude37sonnetthinking",e.O4_MINI="o4mini",e.O3="o3",e.O3_PRO="o3pro",e.GPT_5_THINKING="gpt5_thinking",e.CLAUDE_4_0_OPUS="claude40opus",e.CLAUDE_4_1_OPUS="claude41opus",e.CLAUDE_4_0_OPUS_THINKING="claude40opusthinking",e.CLAUDE_4_1_OPUS_THINKING="claude41opusthinking",e.GROK_4="grok4",e.ALPHA="pplx_alpha",e.O3_RESEARCH="o3_research",e.O3_PRO_RESEARCH="o3pro_research",e.CLAUDE40SONNET_RESEARCH="claude40sonnet_research",e.CLAUDE40SONNETTHINKING_RESEARCH="claude40sonnetthinking_research",e.CLAUDE40OPUS_RESEARCH="claude40opus_research",e.CLAUDE40OPUSTHINKING_RESEARCH="claude40opusthinking_research",e.BETA="pplx_beta",e.O3_LABS="o3_labs",e.O3_PRO_LABS="o3pro_labs",e.CLAUDE40SONNETTHINKING_LABS="claude40sonnetthinking_labs",e.CLAUDE40OPUSTHINKING_LABS="claude40opusthinking_labs",e.STUDY="pplx_study"})(ce||(ce={}));var Vs;(function(e){e.GPT_4="gpt4",e.CLAUDE_3_OPUS="claude3opus",e.CLAUDE_3_5_HAIKU="claude35haiku",e.GEMINI="gemini",e.LLAMA_X_LARGE="llama_x_large",e.MISTRAL="mistral",e.GROK2="grok2",e.COPILOT="copilot",e.O3_MINI="o3mini",e.CLAUDE_OMBRE_EAP="claude_ombre_eap",e.CLAUDE_LACE_EAP="claude_lace_eap",e.R1="r1",e.GAMMA="pplx_gamma"})(Vs||(Vs={}));var oe;(function(e){e.SEARCH="search",e.RESEARCH="research",e.STUDIO="studio",e.STUDY="study"})(oe||(oe={}));var Mn;(function(e){e.PRO="pro",e.MAX="max"})(Mn||(Mn={}));const Aa={[ce.DEFAULT]:oe.SEARCH,[ce.PRO]:oe.SEARCH,[ce.SONAR]:oe.SEARCH,[ce.CLAUDE_2]:oe.SEARCH,[ce.GPT_4o]:oe.SEARCH,[ce.GPT_4_1]:oe.SEARCH,[ce.GPT_5]:oe.SEARCH,[ce.GEMINI_2_FLASH]:oe.SEARCH,[ce.GROK]:oe.SEARCH,[ce.O3]:oe.SEARCH,[ce.O3_PRO]:oe.SEARCH,[ce.CLAUDE_3_7_SONNET_THINKING]:oe.SEARCH,[ce.CLAUDE_4_0_OPUS_THINKING]:oe.SEARCH,[ce.CLAUDE_4_1_OPUS_THINKING]:oe.SEARCH,[ce.GROK_4]:oe.SEARCH,[ce.GPT_5_THINKING]:oe.SEARCH,[ce.ALPHA]:oe.RESEARCH,[ce.O4_MINI]:oe.RESEARCH,[ce.O3_RESEARCH]:oe.RESEARCH,[ce.O3_PRO_RESEARCH]:oe.RESEARCH,[ce.CLAUDE40SONNET_RESEARCH]:oe.RESEARCH,[ce.CLAUDE40SONNETTHINKING_RESEARCH]:oe.RESEARCH,[ce.CLAUDE40OPUS_RESEARCH]:oe.RESEARCH,[ce.CLAUDE40OPUSTHINKING_RESEARCH]:oe.RESEARCH,[ce.BETA]:oe.STUDIO,[ce.O3_LABS]:oe.STUDIO,[ce.O3_PRO_LABS]:oe.STUDIO,[ce.CLAUDE40SONNETTHINKING_LABS]:oe.STUDIO,[ce.CLAUDE40OPUSTHINKING_LABS]:oe.STUDIO,[ce.STUDY]:oe.STUDY},F7=e=>Aa[e]||oe.SEARCH,Mp={[oe.SEARCH]:IMe,[oe.RESEARCH]:kR,[oe.STUDIO]:BC,[oe.STUDY]:MR},EDe=e=>Mp[e],Goe=e=>EDe(F7(e)),MDe={...Mp,[oe.SEARCH]:Ts},kDe={auto:{model:ce.DEFAULT,mode:oe.SEARCH},reasoning:{model:ce.PPLX_REASONING,mode:oe.SEARCH},deep_research:{model:ce.ALPHA,mode:oe.RESEARCH}},qoe=e=>typeof e=="string"&&e in Aa,U7=e=>qoe(e)?e:void 0,S$=Object.values(oe),Koe=[{search_model:ce.SONAR,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.CLAUDE_2,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.CLAUDE_3_7_SONNET_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Mn.PRO},{search_model:ce.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Mn.MAX},{search_model:ce.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.GPT_5,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.GPT_5_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Mn.PRO},{search_model:ce.O3,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Mn.PRO},{search_model:ce.O3_PRO,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Mn.MAX},{search_model:ce.GROK_4,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Mn.PRO}];function $t(e){throw new Error(e)}var hA=["MO","TU","WE","TH","FR","SA","SU"],Hs=function(){function e(t,n){if(n===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=n}return e.fromStr=function(t){return new e(hA.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=hA[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),kr=function(e){return e!=null},Li=function(e){return typeof e=="number"},E$=function(e){return typeof e=="string"&&hA.includes(e)},Qa=Array.isArray,El=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var n=[],r=e;r<t;r++)n.push(r);return n},En=function(e,t){var n=0,r=[];if(Qa(e))for(;n<t;n++)r[n]=[].concat(e);else for(;n<t;n++)r[n]=e;return r},TDe=function(e){return Qa(e)?e:[e]};function Jf(e,t,n){n===void 0&&(n=" ");var r=String(e);return t=t>>0,r.length>t?String(r):(t=t-r.length,t>n.length&&(n+=En(n,t/n.length)),n.slice(0,t)+String(r))}var NDe=function(e,t,n){var r=e.split(t);return n?r.slice(0,n).concat([r.slice(n).join(t)]):r},_o=function(e,t){var n=e%t;return n*t<0?n+t:n},QM=function(e,t){return{div:Math.floor(e/t),mod:_o(e,t)}},Vi=function(e){return!kr(e)||e.length===0},Xr=function(e){return!Vi(e)},Wn=function(e,t){return Xr(e)&&e.indexOf(t)!==-1},ef=function(e,t,n,r,s,a){return r===void 0&&(r=0),s===void 0&&(s=0),a===void 0&&(a=0),new Date(Date.UTC(e,t-1,n,r,s,a))},ADe=[31,28,31,30,31,30,31,31,30,31,30,31],Yoe=1e3*60*60*24,Qoe=9999,Xoe=ef(1970,1,1),jDe=[6,0,1,2,3,4,5],qy=function(e){return e%4===0&&e%100!==0||e%400===0},Zoe=function(e){return e instanceof Date},hy=function(e){return Zoe(e)&&!isNaN(e.getTime())},RDe=function(e,t){var n=e.getTime(),r=t.getTime(),s=n-r;return Math.round(s/Yoe)},gA=function(e){return RDe(e,Xoe)},Joe=function(e){return new Date(Xoe.getTime()+e*Yoe)},IDe=function(e){var t=e.getUTCMonth();return t===1&&qy(e.getUTCFullYear())?29:ADe[t]},kp=function(e){return jDe[e.getUTCDay()]},M$=function(e,t){var n=ef(e,t+1,1);return[kp(n),IDe(n)]},eie=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},yA=function(e){var t=new Date(e.getTime());return t},k$=function(e){for(var t=[],n=0;n<e.length;n++)t.push(yA(e[n]));return t},K0=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},B7=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Jf(n.getUTCFullYear().toString(),4,"0"),Jf(n.getUTCMonth()+1,2,"0"),Jf(n.getUTCDate(),2,"0"),"T",Jf(n.getUTCHours(),2,"0"),Jf(n.getUTCMinutes(),2,"0"),Jf(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},V7=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))},T$=function(e,t){var n=e.toLocaleString("sv-SE",{timeZone:t});return n.replace(" ","T")+"Z"},PDe=function(e,t){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=new Date(T$(e,n)),s=new Date(T$(e,t??"UTC")),a=s.getTime()-r.getTime();return new Date(e.getTime()-a)},Tm=function(){function e(t,n){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=n,t==="between"?(this.maxDate=n.inc?n.before:new Date(n.before.getTime()-1),this.minDate=n.inc?n.after:new Date(n.after.getTime()+1)):t==="before"?this.maxDate=n.inc?n.dt:new Date(n.dt.getTime()-1):t==="after"&&(this.minDate=n.inc?n.dt:new Date(n.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var n=this.minDate&&t<this.minDate,r=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(n)return!0;if(r)return!1}else if(this.method==="before"){if(r)return!1}else if(this.method==="after")return n?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),N$=function(e){ER(t,e);function t(n,r,s){var a=e.call(this,n,r)||this;return a.iterator=s,a}return t.prototype.add=function(n){return this.iterator(n,this._result.length)?(this._result.push(n),!0):!1},t}(Tm),Hw={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},A$=function(e,t){return e.indexOf(t)!==-1},ODe=function(e){return e.toString()},LDe=function(e,t,n){return"".concat(t," ").concat(n,", ").concat(e)},Mc=function(){function e(t,n,r,s){if(n===void 0&&(n=ODe),r===void 0&&(r=Hw),s===void 0&&(s=LDe),this.text=[],this.language=r||Hw,this.gettext=n,this.dateFormatter=s,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),o=[].concat(this.options.bynmonthday);a.sort(function(d,m){return d-m}),o.sort(function(d,m){return m-d}),this.bymonthday=a.concat(o),this.bymonthday.length||(this.bymonthday=null)}if(kr(this.origOptions.byweekday)){var l=Qa(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return!!d.n}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var u=function(d,m){return d.weekday-m.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var n=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var r in t.origOptions){if(A$(["dtstart","tzid","wkst","freq"],r))return!0;if(!A$(e.IMPLEMENTED[t.options.freq],r))return!1}return n},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[lt.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var n,r=this.gettext;if(t===-1)return r("last");var s=Math.abs(t);switch(s){case 1:case 21:case 31:n=s+r("st");break;case 2:case 22:n=s+r("nd");break;case 3:case 23:n=s+r("rd");break;default:n=s+r("th")}return t<0?n+" "+r("last"):n},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var n=Li(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[n]},e.prototype.plural=function(t){return t%100!==1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,n,r,s){var a=this;s===void 0&&(s=","),Qa(t)||(t=[t]);var o=function(c,u,d){for(var m="",p=0;p<c.length;p++)p!==0&&(p===c.length-1?m+=" "+d+" ":m+=u+" "),m+=c[p];return m};n=n||function(c){return c.toString()};var l=function(c){return n&&n.call(a,c)};return r?o(t.map(l),s,r):t.map(l).join(s+" ")},e}(),DDe=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,n;this.symbol=null,this.value=null;do{if(this.done)return!1;var r=void 0;t=null;for(var s in this.rules){r=this.rules[s];var a=r.exec(this.text);a&&(t===null||a[0].length>t[0].length)&&(t=a,n=s)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(n==="SKIP");return this.symbol=n,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var n=this.value;return this.nextSymbol(),n}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function tie(e,t){t===void 0&&(t=Hw);var n={},r=new DDe(t.tokens);if(!r.start(e))return null;return s(),n;function s(){r.expect("every");var p=r.acceptNumber();if(p&&(n.interval=parseInt(p[0],10)),r.isDone())throw new Error("Unexpected end");switch(r.symbol){case"day(s)":n.freq=lt.DAILY,r.nextSymbol()&&(o(),m());break;case"weekday(s)":n.freq=lt.WEEKLY,n.byweekday=[lt.MO,lt.TU,lt.WE,lt.TH,lt.FR],r.nextSymbol(),o(),m();break;case"week(s)":n.freq=lt.WEEKLY,r.nextSymbol()&&(a(),o(),m());break;case"hour(s)":n.freq=lt.HOURLY,r.nextSymbol()&&(a(),m());break;case"minute(s)":n.freq=lt.MINUTELY,r.nextSymbol()&&(a(),m());break;case"month(s)":n.freq=lt.MONTHLY,r.nextSymbol()&&(a(),m());break;case"year(s)":n.freq=lt.YEARLY,r.nextSymbol()&&(a(),m());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=lt.WEEKLY;var h=r.symbol.substr(0,2).toUpperCase();if(n.byweekday=[lt[h]],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var g=c();if(!g)throw new Error("Unexpected symbol "+r.symbol+", expected weekday");n.byweekday.push(lt[g]),r.nextSymbol()}o(),d(),m();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=lt.YEARLY,n.bymonth=[l()],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var y=l();if(!y)throw new Error("Unexpected symbol "+r.symbol+", expected month");n.bymonth.push(y),r.nextSymbol()}a(),m();break;default:throw new Error("Unknown symbol")}}function a(){var p=r.accept("on"),h=r.accept("the");if(p||h)do{var g=u(),y=c(),v=l();if(g)y?(r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(lt[y].nth(g))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(g),r.accept("day(s)"));else if(y)r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(lt[y]);else if(r.symbol==="weekday(s)")r.nextSymbol(),n.byweekday||(n.byweekday=[lt.MO,lt.TU,lt.WE,lt.TH,lt.FR]);else if(r.symbol==="week(s)"){r.nextSymbol();var x=r.acceptNumber();if(!x)throw new Error("Unexpected symbol "+r.symbol+", expected week number");for(n.byweekno=[parseInt(x[0],10)];r.accept("comma");){if(x=r.acceptNumber(),!x)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.byweekno.push(parseInt(x[0],10))}}else if(v)r.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(v);else return}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function o(){var p=r.accept("at");if(p)do{var h=r.acceptNumber();if(!h)throw new Error("Unexpected symbol "+r.symbol+", expected hour");for(n.byhour=[parseInt(h[0],10)];r.accept("comma");){if(h=r.acceptNumber(),!h)throw new Error("Unexpected symbol "+r.symbol+"; expected hour");n.byhour.push(parseInt(h[0],10))}}while(r.accept("comma")||r.accept("at"))}function l(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(r.symbol){case"last":return r.nextSymbol(),-1;case"first":return r.nextSymbol(),1;case"second":return r.nextSymbol(),r.accept("last")?-2:2;case"third":return r.nextSymbol(),r.accept("last")?-3:3;case"nth":var p=parseInt(r.value[1],10);if(p<-366||p>366)throw new Error("Nth out of range: "+p);return r.nextSymbol(),r.accept("last")?-p:p;default:return!1}}function d(){r.accept("on"),r.accept("the");var p=u();if(p)for(n.bymonthday=[p],r.nextSymbol();r.accept("comma");){if(p=u(),!p)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.bymonthday.push(p),r.nextSymbol()}}function m(){if(r.symbol==="until"){var p=Date.parse(r.text);if(!p)throw new Error("Cannot parse until date:"+r.text);n.until=new Date(p)}else r.accept("for")&&(n.count=parseInt(r.value[0],10),r.expect("number"))}}var kn;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(kn||(kn={}));function W7(e){return e<kn.HOURLY}var FDe=function(e,t){return t===void 0&&(t=Hw),new lt(tie(e,t)||void 0)},Eh=["count","until","interval","byweekday","bymonthday","bymonth"];Mc.IMPLEMENTED=[];Mc.IMPLEMENTED[kn.HOURLY]=Eh;Mc.IMPLEMENTED[kn.MINUTELY]=Eh;Mc.IMPLEMENTED[kn.DAILY]=["byhour"].concat(Eh);Mc.IMPLEMENTED[kn.WEEKLY]=Eh;Mc.IMPLEMENTED[kn.MONTHLY]=Eh;Mc.IMPLEMENTED[kn.YEARLY]=["byweekno","byyearday"].concat(Eh);var UDe=function(e,t,n,r){return new Mc(e,t,n,r).toString()},BDe=Mc.isFullyConvertible,zw=function(){function e(t,n,r,s){this.hour=t,this.minute=n,this.second=r,this.millisecond=s||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}(),VDe=function(e){ER(t,e);function t(n,r,s,a,o,l,c){var u=e.call(this,a,o,l,c)||this;return u.year=n,u.month=r,u.day=s,u}return t.fromDate=function(n){return new this(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.valueOf()%1e3)},t.prototype.getWeekday=function(){return kp(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(n){this.year+=n},t.prototype.addMonths=function(n){if(this.month+=n,this.month>12){var r=Math.floor(this.month/12),s=_o(this.month,12);this.month=s,this.year+=r,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(n,r){r>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-r))+n*7:this.day+=-(this.getWeekday()-r)+n*7,this.fixDay()},t.prototype.addDaily=function(n){this.day+=n,this.fixDay()},t.prototype.addHours=function(n,r,s){for(r&&(this.hour+=Math.floor((23-this.hour)/n)*n);;){this.hour+=n;var a=QM(this.hour,24),o=a.div,l=a.mod;if(o&&(this.hour=l,this.addDaily(o)),Vi(s)||Wn(s,this.hour))break}},t.prototype.addMinutes=function(n,r,s,a){for(r&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/n)*n);;){this.minute+=n;var o=QM(this.minute,60),l=o.div,c=o.mod;if(l&&(this.minute=c,this.addHours(l,!1,s)),(Vi(s)||Wn(s,this.hour))&&(Vi(a)||Wn(a,this.minute)))break}},t.prototype.addSeconds=function(n,r,s,a,o){for(r&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/n)*n);;){this.second+=n;var l=QM(this.second,60),c=l.div,u=l.mod;if(c&&(this.second=u,this.addMinutes(c,!1,s,a)),(Vi(s)||Wn(s,this.hour))&&(Vi(a)||Wn(a,this.minute))&&(Vi(o)||Wn(o,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var n=M$(this.year,this.month-1)[1];if(!(this.day<=n))for(;this.day>n;){if(this.day-=n,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Qoe))return;n=M$(this.year,this.month-1)[1]}}},t.prototype.add=function(n,r){var s=n.freq,a=n.interval,o=n.wkst,l=n.byhour,c=n.byminute,u=n.bysecond;switch(s){case kn.YEARLY:return this.addYears(a);case kn.MONTHLY:return this.addMonths(a);case kn.WEEKLY:return this.addWeekly(a,o);case kn.DAILY:return this.addDaily(a);case kn.HOURLY:return this.addHours(a,r,l);case kn.MINUTELY:return this.addMinutes(a,r,l,c);case kn.SECONDLY:return this.addSeconds(a,r,l,c,u)}},t}(zw);function nie(e){for(var t=[],n=Object.keys(e),r=0,s=n;r<s.length;r++){var a=s[r];Wn(yFe,a)||t.push(a),Zoe(e[a])&&!hy(e[a])&&t.push(a)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return nr({},e)}function WDe(e){var t=nr(nr({},$7),nie(e));if(kr(t.byeaster)&&(t.freq=lt.YEARLY),!(kr(t.freq)&&lt.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),kr(t.wkst)?Li(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=lt.MO.weekday,kr(t.bysetpos)){Li(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var n=0;n<t.bysetpos.length;n++){var r=t.bysetpos[n];if(r===0||!(r>=-366&&r<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(t.byweekno||Xr(t.byweekno)||Xr(t.byyearday)||t.bymonthday||Xr(t.bymonthday)||kr(t.byweekday)||kr(t.byeaster)))switch(t.freq){case lt.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case lt.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case lt.WEEKLY:t.byweekday=[kp(t.dtstart)];break}if(kr(t.bymonth)&&!Qa(t.bymonth)&&(t.bymonth=[t.bymonth]),kr(t.byyearday)&&!Qa(t.byyearday)&&Li(t.byyearday)&&(t.byyearday=[t.byyearday]),!kr(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(Qa(t.bymonthday)){for(var s=[],a=[],n=0;n<t.bymonthday.length;n++){var r=t.bymonthday[n];r>0?s.push(r):r<0&&a.push(r)}t.bymonthday=s,t.bynmonthday=a}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(kr(t.byweekno)&&!Qa(t.byweekno)&&(t.byweekno=[t.byweekno]),!kr(t.byweekday))t.bynweekday=null;else if(Li(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(E$(t.byweekday))t.byweekday=[Hs.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof Hs)!t.byweekday.n||t.freq>lt.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var o=[],l=[],n=0;n<t.byweekday.length;n++){var c=t.byweekday[n];if(Li(c)){o.push(c);continue}else if(E$(c)){o.push(Hs.fromStr(c).weekday);continue}!c.n||t.freq>lt.MONTHLY?o.push(c.weekday):l.push([c.weekday,c.n])}t.byweekday=Xr(o)?o:null,t.bynweekday=Xr(l)?l:null}return kr(t.byhour)?Li(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<lt.HOURLY?[t.dtstart.getUTCHours()]:null,kr(t.byminute)?Li(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<lt.MINUTELY?[t.dtstart.getUTCMinutes()]:null,kr(t.bysecond)?Li(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<lt.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function $De(e){var t=e.dtstart.getTime()%1e3;if(!W7(e.freq))return[];var n=[];return e.byhour.forEach(function(r){e.byminute.forEach(function(s){e.bysecond.forEach(function(a){n.push(new zw(r,s,a,t))})})}),n}function vA(e){var t=e.split(`
`).map(HDe).filter(function(n){return n!==null});return nr(nr({},t[0]),t[1])}function Gw(e){var t={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!n)return t;var r=n[1],s=n[2];return r&&(t.tzid=r),t.dtstart=V7(s),t}function HDe(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return j$(e);var n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return j$(e);case"DTSTART":return Gw(e);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(e))}}function j$(e){var t=e.replace(/^RRULE:/i,""),n=Gw(t),r=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return r.forEach(function(s){var a=s.split("="),o=a[0],l=a[1];switch(o.toUpperCase()){case"FREQ":n.freq=kn[l.toUpperCase()];break;case"WKST":n.wkst=Xo[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=zDe(l),u=o.toLowerCase();n[u]=c;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=GDe(l);break;case"DTSTART":case"TZID":var d=Gw(e);n.tzid=d.tzid,n.dtstart=d.dtstart;break;case"UNTIL":n.until=V7(l);break;case"BYEASTER":n.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+o+"'")}}),n}function zDe(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(R$)}return R$(e)}function R$(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function GDe(e){var t=e.split(",");return t.map(function(n){if(n.length===2)return Xo[n];var r=n.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!r||r.length<3)throw new SyntaxError("Invalid weekday string: ".concat(n));var s=Number(r[1]),a=r[2],o=Xo[a].weekday;return new Hs(o,s)})}var qw=function(){function e(t,n){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=n}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=B7(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:PDe(this.date,this.tzid)},e}();function xA(e){for(var t=[],n="",r=Object.keys(e),s=Object.keys($7),a=0;a<r.length;a++)if(r[a]!=="tzid"&&Wn(s,r[a])){var o=r[a].toUpperCase(),l=e[r[a]],c="";if(!(!kr(l)||Qa(l)&&!l.length)){switch(o){case"FREQ":c=lt.FREQUENCIES[e.freq];break;case"WKST":Li(l)?c=new Hs(l).toString():c=l.toString();break;case"BYWEEKDAY":o="BYDAY",c=TDe(l).map(function(h){return h instanceof Hs?h:Qa(h)?new Hs(h[0],h[1]):new Hs(h)}).toString();break;case"DTSTART":n=qDe(l,e.tzid);break;case"UNTIL":c=B7(l,!e.tzid);break;default:if(Qa(l)){for(var u=[],d=0;d<l.length;d++)u[d]=String(l[d]);c=u.toString()}else c=String(l)}c&&t.push([o,c])}}var m=t.map(function(h){var g=h[0],y=h[1];return"".concat(g,"=").concat(y.toString())}).join(";"),p="";return m!==""&&(p="RRULE:".concat(m)),[n,p].filter(function(h){return!!h}).join(`
`)}function qDe(e,t){return e?"DTSTART"+new qw(new Date(e),t).toString():""}function KDe(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(n,r){return n.getTime()===t[r].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var YDe=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,n,r){n&&(n=n instanceof Date?yA(n):k$(n)),t==="all"?this.all=n:(r._value=n,this[t].push(r))},e.prototype._cacheGet=function(t,n){var r=!1,s=n?Object.keys(n):[],a=function(d){for(var m=0;m<s.length;m++){var p=s[m];if(!KDe(n[p],d[p]))return!0}return!1},o=this[t];if(t==="all")r=this.all;else if(Qa(o))for(var l=0;l<o.length;l++){var c=o[l];if(!(s.length&&a(c))){r=c._value;break}}if(!r&&this.all){for(var u=new Tm(t,n),l=0;l<this.all.length&&u.accept(this.all[l]);l++);r=u.getValue(),this._cacheAdd(t,r,n)}return Qa(r)?k$(r):r instanceof Date?yA(r):r},e}(),QDe=ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze([],En(1,31),!0),En(2,28),!0),En(3,31),!0),En(4,30),!0),En(5,31),!0),En(6,30),!0),En(7,31),!0),En(8,31),!0),En(9,30),!0),En(10,31),!0),En(11,30),!0),En(12,31),!0),En(1,7),!0),XDe=ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze([],En(1,31),!0),En(2,29),!0),En(3,31),!0),En(4,30),!0),En(5,31),!0),En(6,30),!0),En(7,31),!0),En(8,31),!0),En(9,30),!0),En(10,31),!0),En(11,30),!0),En(12,31),!0),En(1,7),!0),ZDe=El(1,29),JDe=El(1,30),Kc=El(1,31),Es=El(1,32),eFe=ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze([],Es,!0),JDe,!0),Es,!0),Kc,!0),Es,!0),Kc,!0),Es,!0),Es,!0),Kc,!0),Es,!0),Kc,!0),Es,!0),Es.slice(0,7),!0),tFe=ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze([],Es,!0),ZDe,!0),Es,!0),Kc,!0),Es,!0),Kc,!0),Es,!0),Es,!0),Kc,!0),Es,!0),Kc,!0),Es,!0),Es.slice(0,7),!0),nFe=El(-28,0),rFe=El(-29,0),Yc=El(-30,0),Ms=El(-31,0),sFe=ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze([],Ms,!0),rFe,!0),Ms,!0),Yc,!0),Ms,!0),Yc,!0),Ms,!0),Ms,!0),Yc,!0),Ms,!0),Yc,!0),Ms,!0),Ms.slice(0,7),!0),aFe=ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze(ze([],Ms,!0),nFe,!0),Ms,!0),Yc,!0),Ms,!0),Yc,!0),Ms,!0),Ms,!0),Yc,!0),Ms,!0),Yc,!0),Ms,!0),Ms.slice(0,7),!0),oFe=[0,31,60,91,121,152,182,213,244,274,305,335,366],iFe=[0,31,59,90,120,151,181,212,243,273,304,334,365],I$=function(){for(var e=[],t=0;t<55;t++)e=e.concat(El(7));return e}();function lFe(e,t){var n=ef(e,1,1),r=qy(e)?366:365,s=qy(e+1)?366:365,a=gA(n),o=kp(n),l=nr(nr({yearlen:r,nextyearlen:s,yearordinal:a,yearweekday:o},cFe(e)),{wnomask:null});if(Vi(t.byweekno))return l;l.wnomask=En(0,r+7);var c,u,d=c=_o(7-o+t.wkst,7);d>=4?(d=0,u=l.yearlen+_o(o-t.wkst,7)):u=r-d;for(var m=Math.floor(u/7),p=_o(u,7),h=Math.floor(m+p/4),g=0;g<t.byweekno.length;g++){var y=t.byweekno[g];if(y<0&&(y+=h+1),y>0&&y<=h){var v=void 0;y>1?(v=d+(y-1)*7,d!==c&&(v-=7-c)):v=d;for(var x=0;x<7&&(l.wnomask[v]=1,v++,l.wdaymask[v]!==t.wkst);x++);}}if(Wn(t.byweekno,1)){var v=d+h*7;if(d!==c&&(v-=7-c),v<r)for(var g=0;g<7&&(l.wnomask[v]=1,v+=1,l.wdaymask[v]!==t.wkst);g++);}if(d){var b=void 0;if(Wn(t.byweekno,-1))b=-1;else{var _=kp(ef(e-1,1,1)),w=_o(7-_.valueOf()+t.wkst,7),C=qy(e-1)?366:365,S=void 0;w>=4?(w=0,S=C+_o(_-t.wkst,7)):S=r-d,b=Math.floor(52+_o(S,7)/4)}if(Wn(t.byweekno,b))for(var v=0;v<d;v++)l.wnomask[v]=1}return l}function cFe(e){var t=qy(e)?366:365,n=ef(e,1,1),r=kp(n);return t===365?{mmask:QDe,mdaymask:tFe,nmdaymask:aFe,wdaymask:I$.slice(r),mrange:iFe}:{mmask:XDe,mdaymask:eFe,nmdaymask:sFe,wdaymask:I$.slice(r),mrange:oFe}}function uFe(e,t,n,r,s,a){var o={lastyear:e,lastmonth:t,nwdaymask:[]},l=[];if(a.freq===lt.YEARLY)if(Vi(a.bymonth))l=[[0,n]];else for(var c=0;c<a.bymonth.length;c++)t=a.bymonth[c],l.push(r.slice(t-1,t+1));else a.freq===lt.MONTHLY&&(l=[r.slice(t-1,t+1)]);if(Vi(l))return o;o.nwdaymask=En(0,n);for(var c=0;c<l.length;c++)for(var u=l[c],d=u[0],m=u[1]-1,p=0;p<a.bynweekday.length;p++){var h=void 0,g=a.bynweekday[p],y=g[0],v=g[1];v<0?(h=m+(v+1)*7,h-=_o(s[h]-y,7)):(h=d+(v-1)*7,h+=_o(7-s[h]+y,7)),d<=h&&h<=m&&(o.nwdaymask[h]=1)}return o}function dFe(e,t){t===void 0&&(t=0);var n=e%19,r=Math.floor(e/100),s=e%100,a=Math.floor(r/4),o=r%4,l=Math.floor((r+8)/25),c=Math.floor((r-l+1)/3),u=Math.floor(19*n+r-a-c+15)%30,d=Math.floor(s/4),m=s%4,p=Math.floor(32+2*o+2*d-u-m)%7,h=Math.floor((n+11*u+22*p)/451),g=Math.floor((u+p-7*h+114)/31),y=(u+p-7*h+114)%31+1,v=Date.UTC(e,g-1,y+t),x=Date.UTC(e,0,1);return[Math.ceil((v-x)/(1e3*60*60*24))]}var fFe=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,n){var r=this.options;if(t!==this.lastyear&&(this.yearinfo=lFe(t,r)),Xr(r.bynweekday)&&(n!==this.lastmonth||t!==this.lastyear)){var s=this.yearinfo,a=s.yearlen,o=s.mrange,l=s.wdaymask;this.monthinfo=uFe(t,n,a,o,l,r)}kr(r.byeaster)&&(this.eastermask=dFe(t,r.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[El(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,n){for(var r=this.mrange[n-1],s=this.mrange[n],a=En(null,this.yearlen),o=r;o<s;o++)a[o]=o;return[a,r,s]},e.prototype.wdayset=function(t,n,r){for(var s=En(null,this.yearlen+7),a=gA(ef(t,n,r))-this.yearordinal,o=a,l=0;l<7&&(s[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[s,o,a]},e.prototype.ddayset=function(t,n,r){var s=En(null,this.yearlen),a=gA(ef(t,n,r))-this.yearordinal;return s[a]=a,[s,a,a+1]},e.prototype.htimeset=function(t,n,r,s){var a=this,o=[];return this.options.byminute.forEach(function(l){o=o.concat(a.mtimeset(t,l,r,s))}),K0(o),o},e.prototype.mtimeset=function(t,n,r,s){var a=this.options.bysecond.map(function(o){return new zw(t,n,o,s)});return K0(a),a},e.prototype.stimeset=function(t,n,r,s){return[new zw(t,n,r,s)]},e.prototype.getdayset=function(t){switch(t){case kn.YEARLY:return this.ydayset.bind(this);case kn.MONTHLY:return this.mdayset.bind(this);case kn.WEEKLY:return this.wdayset.bind(this);case kn.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case kn.HOURLY:return this.htimeset.bind(this);case kn.MINUTELY:return this.mtimeset.bind(this);case kn.SECONDLY:return this.stimeset.bind(this)}},e}();function mFe(e,t,n,r,s,a){for(var o=[],l=0;l<e.length;l++){var c=void 0,u=void 0,d=e[l];d<0?(c=Math.floor(d/t.length),u=_o(d,t.length)):(c=Math.floor((d-1)/t.length),u=_o(d-1,t.length));for(var m=[],p=n;p<r;p++){var h=a[p];kr(h)&&m.push(h)}var g=void 0;c<0?g=m.slice(c)[0]:g=m[c];var y=t[u],v=Joe(s.yearordinal+g),x=eie(v,y);Wn(o,x)||o.push(x)}return K0(o),o}function rie(e,t){var n=t.dtstart,r=t.freq,s=t.interval,a=t.until,o=t.bysetpos,l=t.count;if(l===0||s===0)return jl(e);var c=VDe.fromDate(n),u=new fFe(t);u.rebuild(c.year,c.month);for(var d=gFe(u,c,t);;){var m=u.getdayset(r)(c.year,c.month,c.day),p=m[0],h=m[1],g=m[2],y=hFe(p,h,g,u,t);if(Xr(o))for(var v=mFe(o,d,h,g,u,p),x=0;x<v.length;x++){var b=v[x];if(a&&b>a)return jl(e);if(b>=n){var _=P$(b,t);if(!e.accept(_)||l&&(--l,!l))return jl(e)}}else for(var x=h;x<g;x++){var w=p[x];if(kr(w))for(var C=Joe(u.yearordinal+w),S=0;S<d.length;S++){var E=d[S],b=eie(C,E);if(a&&b>a)return jl(e);if(b>=n){var _=P$(b,t);if(!e.accept(_)||l&&(--l,!l))return jl(e)}}}if(t.interval===0||(c.add(t,y),c.year>Qoe))return jl(e);W7(r)||(d=u.gettimeset(r)(c.hour,c.minute,c.second,0)),u.rebuild(c.year,c.month)}}function pFe(e,t,n){var r=n.bymonth,s=n.byweekno,a=n.byweekday,o=n.byeaster,l=n.bymonthday,c=n.bynmonthday,u=n.byyearday;return Xr(r)&&!Wn(r,e.mmask[t])||Xr(s)&&!e.wnomask[t]||Xr(a)&&!Wn(a,e.wdaymask[t])||Xr(e.nwdaymask)&&!e.nwdaymask[t]||o!==null&&!Wn(e.eastermask,t)||(Xr(l)||Xr(c))&&!Wn(l,e.mdaymask[t])&&!Wn(c,e.nmdaymask[t])||Xr(u)&&(t<e.yearlen&&!Wn(u,t+1)&&!Wn(u,-e.yearlen+t)||t>=e.yearlen&&!Wn(u,t+1-e.yearlen)&&!Wn(u,-e.nextyearlen+t-e.yearlen))}function P$(e,t){return new qw(e,t.tzid).rezonedDate()}function jl(e){return e.getValue()}function hFe(e,t,n,r,s){for(var a=!1,o=t;o<n;o++){var l=e[o];a=pFe(r,l,s),a&&(e[l]=null)}return a}function gFe(e,t,n){var r=n.freq,s=n.byhour,a=n.byminute,o=n.bysecond;return W7(r)?$De(n):r>=lt.HOURLY&&Xr(s)&&!Wn(s,t.hour)||r>=lt.MINUTELY&&Xr(a)&&!Wn(a,t.minute)||r>=lt.SECONDLY&&Xr(o)&&!Wn(o,t.second)?[]:e.gettimeset(r)(t.hour,t.minute,t.second,t.millisecond)}var Xo={MO:new Hs(0),TU:new Hs(1),WE:new Hs(2),TH:new Hs(3),FR:new Hs(4),SA:new Hs(5),SU:new Hs(6)},$7={freq:kn.YEARLY,dtstart:null,interval:1,wkst:Xo.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},yFe=Object.keys($7),lt=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=!1),this._cache=n?null:new YDe,this.origOptions=nie(t);var r=WDe(t).parsedOptions;this.options=r}return e.parseText=function(t,n){return tie(t,n)},e.fromText=function(t,n){return FDe(t,n)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return rie(t,this.options)},e.prototype._cacheGet=function(t,n){return this._cache?this._cache._cacheGet(t,n):!1},e.prototype._cacheAdd=function(t,n,r){if(this._cache)return this._cache._cacheAdd(t,n,r)},e.prototype.all=function(t){if(t)return this._iter(new N$("all",{},t));var n=this._cacheGet("all");return n===!1&&(n=this._iter(new Tm("all",{})),this._cacheAdd("all",n)),n},e.prototype.between=function(t,n,r,s){if(r===void 0&&(r=!1),!hy(t)||!hy(n))throw new Error("Invalid date passed in to RRule.between");var a={before:n,after:t,inc:r};if(s)return this._iter(new N$("between",a,s));var o=this._cacheGet("between",a);return o===!1&&(o=this._iter(new Tm("between",a)),this._cacheAdd("between",o,a)),o},e.prototype.before=function(t,n){if(n===void 0&&(n=!1),!hy(t))throw new Error("Invalid date passed in to RRule.before");var r={dt:t,inc:n},s=this._cacheGet("before",r);return s===!1&&(s=this._iter(new Tm("before",r)),this._cacheAdd("before",s,r)),s},e.prototype.after=function(t,n){if(n===void 0&&(n=!1),!hy(t))throw new Error("Invalid date passed in to RRule.after");var r={dt:t,inc:n},s=this._cacheGet("after",r);return s===!1&&(s=this._iter(new Tm("after",r)),this._cacheAdd("after",s,r)),s},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return xA(this.origOptions)},e.prototype.toText=function(t,n,r){return UDe(this,t,n,r)},e.prototype.isFullyConvertibleToText=function(){return BDe(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=kn.YEARLY,e.MONTHLY=kn.MONTHLY,e.WEEKLY=kn.WEEKLY,e.DAILY=kn.DAILY,e.HOURLY=kn.HOURLY,e.MINUTELY=kn.MINUTELY,e.SECONDLY=kn.SECONDLY,e.MO=Xo.MO,e.TU=Xo.TU,e.WE=Xo.WE,e.TH=Xo.TH,e.FR=Xo.FR,e.SA=Xo.SA,e.SU=Xo.SU,e.parseString=vA,e.optionsToString=xA,e}();function vFe(e,t,n,r,s,a){var o={},l=e.accept;function c(p,h){n.forEach(function(g){g.between(p,h,!0).forEach(function(y){o[Number(y)]=!0})})}s.forEach(function(p){var h=new qw(p,a).rezonedDate();o[Number(h)]=!0}),e.accept=function(p){var h=Number(p);return isNaN(h)?l.call(this,p):!o[h]&&(c(new Date(h-1),new Date(h+1)),!o[h])?(o[h]=!0,l.call(this,p)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(p){var h=Number(p);return o[h]?!0:(o[h]=!0,l.call(this,p))});for(var u=0;u<r.length;u++){var d=new qw(r[u],a).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(p){rie(e,p.options)});var m=e._result;switch(K0(m),e.method){case"all":case"between":return m;case"before":return m.length&&m[m.length-1]||null;case"after":default:return m.length&&m[0]||null}}var O$={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function xFe(e,t){var n=[],r=[],s=[],a=[],o=Gw(e),l=o.dtstart,c=o.tzid,u=SFe(e,t.unfold);return u.forEach(function(d){var m;if(d){var p=CFe(d),h=p.name,g=p.parms,y=p.value;switch(h.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));n.push(vA(d));break;case"RDATE":var v=(m=/RDATE(?:;TZID=([^:=]+))?/i.exec(d))!==null&&m!==void 0?m:[],x=v[1];x&&!c&&(c=x),r=r.concat(D$(y,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));s.push(vA(y));break;case"EXDATE":a=a.concat(D$(y,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:l,tzid:c,rrulevals:n,rdatevals:r,exrulevals:s,exdatevals:a}}function bFe(e,t){var n=xFe(e,t),r=n.rrulevals,s=n.rdatevals,a=n.exrulevals,o=n.exdatevals,l=n.dtstart,c=n.tzid,u=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||r.length>1||s.length||a.length||o.length){var d=new MFe(u);return d.dtstart(l),d.tzid(c||void 0),r.forEach(function(p){d.rrule(new lt(XM(p,l,c),u))}),s.forEach(function(p){d.rdate(p)}),a.forEach(function(p){d.exrule(new lt(XM(p,l,c),u))}),o.forEach(function(p){d.exdate(p)}),t.compatible&&t.dtstart&&d.rdate(l),d}var m=r[0]||{};return new lt(XM(m,m.dtstart||t.dtstart||l,m.tzid||t.tzid||c),u)}function L$(e,t){return t===void 0&&(t={}),bFe(e,_Fe(t))}function XM(e,t,n){return nr(nr({},e),{dtstart:t,tzid:n})}function _Fe(e){var t=[],n=Object.keys(e),r=Object.keys(O$);if(n.forEach(function(s){Wn(r,s)||t.push(s)}),t.length)throw new Error("Invalid options: "+t.join(", "));return nr(nr({},O$),e)}function wFe(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=NDe(e,":",1),n=t[0],r=t[1];return{name:n,value:r}}function CFe(e){var t=wFe(e),n=t.name,r=t.value,s=n.split(";");if(!s)throw new Error("empty property name");return{name:s[0].toUpperCase(),parms:s.slice(1),value:r}}function SFe(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var n=e.split(`
`),r=0;r<n.length;){var s=n[r]=n[r].replace(/\s+$/g,"");s?r>0&&s[0]===" "?(n[r-1]+=s.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}function EFe(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function D$(e,t){return EFe(t),e.split(",").map(function(n){return V7(n)})}function F$(e){var t=this;return function(n){if(n!==void 0&&(t["_".concat(e)]=n),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var r=0;r<t._rrule.length;r++){var s=t._rrule[r].origOptions[e];if(s)return s}}}var MFe=function(e){ER(t,e);function t(n){n===void 0&&(n=!1);var r=e.call(this,{},n)||this;return r.dtstart=F$.apply(r,["dtstart"]),r.tzid=F$.apply(r,["tzid"]),r._rrule=[],r._rdate=[],r._exrule=[],r._exdate=[],r}return t.prototype._iter=function(n){return vFe(n,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(n){U$(n,this._rrule)},t.prototype.exrule=function(n){U$(n,this._exrule)},t.prototype.rdate=function(n){B$(n,this._rdate)},t.prototype.exdate=function(n){B$(n,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(n){return L$(n.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(n){return L$(n.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(n){return new Date(n.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(n){return new Date(n.getTime())})},t.prototype.valueOf=function(){var n=[];return!this._rrule.length&&this._dtstart&&(n=n.concat(xA({dtstart:this._dtstart}))),this._rrule.forEach(function(r){n=n.concat(r.toString().split(`
`))}),this._exrule.forEach(function(r){n=n.concat(r.toString().split(`
`).map(function(s){return s.replace(/^RRULE:/,"EXRULE:")}).filter(function(s){return!/^DTSTART/.test(s)}))}),this._rdate.length&&n.push(V$("RDATE",this._rdate,this.tzid())),this._exdate.length&&n.push(V$("EXDATE",this._exdate,this.tzid())),n},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var n=new t(!!this._cache);return this._rrule.forEach(function(r){return n.rrule(r.clone())}),this._exrule.forEach(function(r){return n.exrule(r.clone())}),this._rdate.forEach(function(r){return n.rdate(new Date(r.getTime()))}),this._exdate.forEach(function(r){return n.exdate(new Date(r.getTime()))}),n},t}(lt);function U$(e,t){if(!(e instanceof lt))throw new TypeError(String(e)+" is not RRule instance");Wn(t.map(String),String(e))||t.push(e)}function B$(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");Wn(t.map(Number),Number(e))||(t.push(e),K0(t))}function V$(e,t,n){var r=!n||n.toUpperCase()==="UTC",s=r?"".concat(e,":"):"".concat(e,";TZID=").concat(n,":"),a=t.map(function(o){return B7(o.valueOf(),r)}).join(",");return"".concat(s).concat(a)}const kFe=e=>{switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);case"DAILY":return new Date(2e3,0,1,e.hour,e.minute);case"WEEKLY":return new Date(2e3,0,2+e.dayOfWeek,e.hour,e.minute);case"MONTHLY":return new Date(2e3,0,e.day,e.hour,e.minute);case"YEARLY":return new Date(2e3,e.month,e.day,e.hour,e.minute);case"WEEKDAYS":return new Date(2e3,0,1,e.hour,e.minute)}};function H7(e,t){const n=new Date;switch(e.kind){case"ONCE":{const r=new Date(e.year,e.month,e.day,e.hour,e.minute);return r>n?r:n}case"DAILY":return new lt({freq:lt.DAILY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKLY":{const r=e.dayOfWeek===0?lt.SU:e.dayOfWeek-1;return new lt({freq:lt.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:r,byhour:e.hour,byminute:e.minute}).after(n)||n}case"MONTHLY":return new lt({freq:lt.MONTHLY,dtstart:new Date(n.getFullYear(),n.getMonth(),1,e.hour,e.minute),bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"YEARLY":return new lt({freq:lt.YEARLY,dtstart:new Date(n.getFullYear(),0,1,e.hour,e.minute),bymonth:e.month+1,bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKDAYS":return new lt({freq:lt.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:[lt.MO,lt.TU,lt.WE,lt.TH,lt.FR],byhour:e.hour,byminute:e.minute}).after(n)||n;default:return n}}function TFe(e,t){const n=kFe(e);switch(e.kind){case"ONCE":return t.formatDate(n,{dateStyle:"medium",timeStyle:"short"});case"DAILY":return t.formatTime(n,{timeStyle:"short"});case"WEEKLY":return t.formatDate(n,{weekday:"short",hour:"numeric",minute:"numeric"});case"MONTHLY":return t.formatMessage({defaultMessage:"Day {day}, {time}",id:"grA/MDsLjr"},{day:n.getDate().toString(),time:t.formatTime(n,{timeStyle:"short"})});case"YEARLY":return t.formatDate(n,{hour:"numeric",minute:"numeric",day:"numeric",month:"short"});case"WEEKDAYS":return t.formatTime(n,{timeStyle:"short"})}}const em=dt({kindOnce:{defaultMessage:"Once",id:"DqTQOpG2Me"},kindDaily:{defaultMessage:"Daily",id:"zxvhnETmn2"},kindWeekly:{defaultMessage:"Weekly",id:"/clOBUs/wZ"},kindWeekdays:{defaultMessage:"Every weekday",id:"8Hjql2wdJG"},kindMonthly:{defaultMessage:"Monthly",id:"wYsv4ZHu+B"},kindYearly:{defaultMessage:"Yearly",id:"dqD39hnoA/"}}),NFe={ONCE:em.kindOnce,DAILY:em.kindDaily,WEEKLY:em.kindWeekly,MONTHLY:em.kindMonthly,YEARLY:em.kindYearly,WEEKDAYS:em.kindWeekdays};function FS(){const e=new Date;return e.setHours(e.getHours()+1,e.getMinutes(),0,0),{kind:"ONCE",minute:e.getMinutes(),hour:e.getHours(),day:e.getDate(),month:e.getMonth(),year:e.getFullYear(),dayOfWeek:e.getDay()}}function AFe(e="",t=ce.PRO,n=["web"]){return{title:"",prompt:e,schedule:FS(),searchModel:t,sources:n,expiryDate:void 0,defaultExpiryDate:aie(t)}}function jFe(e,t){return t.formatMessage(NFe[e])}const RFe=()=>Intl.DateTimeFormat().resolvedOptions().timeZone;function IFe(e){switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);default:return new Date}}function PFe(e){switch(e.kind){case"ONCE":return"FREQ=DAILY;COUNT=1";case"DAILY":return`FREQ=DAILY;BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKLY":return`FREQ=WEEKLY;BYDAY=${["SU","MO","TU","WE","TH","FR","SA"][e.dayOfWeek]};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"MONTHLY":return`FREQ=MONTHLY;BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"YEARLY":return`FREQ=YEARLY;BYMONTH=${e.month+1};BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKDAYS":return`FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;BYHOUR=${e.hour};BYMINUTE=${e.minute}`}}function Ky(e){const t=IFe(e);return{start_at:Ec(t,"yyyy-MM-dd'T'HH:mm:ss"),rrule:PFe(e),tzid:RFe()}}function sie(e){if(!(e===null||!e))return Ec(e,"yyyy-MM-dd'T'HH:mm:ss")}function Kw(e){const t=new Date(e.start_at),n={kind:"ONCE",minute:t.getMinutes(),hour:t.getHours(),day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),dayOfWeek:t.getDay()};if(e.rrule.includes("FREQ=DAILY;COUNT=1"))return n;const r=lt.parseString(e.rrule),s=d=>Array.isArray(d)?d[0]:d,a=s(r.byhour),o=s(r.byminute),l=s(r.bymonth),c=s(r.bymonthday),u=s(r.byweekday);switch(r.freq){case lt.DAILY:return a===void 0||o===void 0?(ee.error("DAILY schedule missing required BYHOUR or BYMINUTE parameter"),{...n}):{...n,kind:"DAILY",hour:a,minute:o};case lt.WEEKLY:{if(u===void 0||a===void 0||o===void 0)return ee.error("WEEKLY schedule missing required parameters"),{...n};if(Array.isArray(r.byweekday)&&r.byweekday.length===5)return{...n,kind:"WEEKDAYS",hour:a,minute:o};const d=u.weekday===6?0:u.weekday+1;return{...n,kind:"WEEKLY",dayOfWeek:d,hour:a,minute:o}}case lt.MONTHLY:return c===void 0||a===void 0||o===void 0?(ee.error("MONTHLY schedule missing required BYMONTHDAY parameter"),{...n}):{...n,kind:"MONTHLY",day:c,hour:a,minute:o};case lt.YEARLY:return l===void 0||c===void 0||a===void 0||o===void 0?(ee.error("YEARLY schedule missing required BYMONTH parameter"),{...n}):{...n,kind:"YEARLY",month:l-1,day:c,hour:a,minute:o}}return ee.error("Invalid task schedule"),{...n}}function OFe({expiryDate:e,schedule:t,defaultExpiryDate:n}){return e===null||!e||!t?e:H7(t)>e?n??null:e}function LFe(e,t){return(e===ce.BETA||e===ce.ALPHA)&&(t.kind==="DAILY"||t.kind==="WEEKLY"||t.kind==="WEEKDAYS")}function aie(e,t){if(!(!t||!LFe(e,t))&&(e===ce.BETA||e===ce.ALPHA)){const n=H7(t);return(s=>{switch(s){case"DAILY":return ys(n,14);case"WEEKLY":return Vw(n,14);case"WEEKDAYS":return ys(n,21);case"ONCE":case"MONTHLY":case"YEARLY":return;default:$t(s)}})(t.kind)}}const Mh={should_send_email:!0,should_send_in_app:!0,should_send_push:!0},oie=e=>({id:e.task_id,type:DFe(e),createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),expiryDate:e.end_at?new Date(e.end_at):void 0,title:e.task_name,prompt:e.task_data.task_prompt,status:e.status,nextRun:new Date(e.next_trigger_intended_time),scheduleInfo:{start_at:e.start_at,rrule:e.trigger_condition_schedule,tzid:e.tzid},subscription:e.event_subscription,searchModel:e.task_data?.task_params?.model_preference||"pplx_pro",sources:e.task_data?.task_params?.sources||["web"],notificationSettings:e.notification_settings||Mh}),DFe=e=>{switch(e.scheduler_type){case"EVENT_PUSH":return"ALERT";case"POLL":return"SCHEDULE";case"SHORTCUT":return"SHORTCUT";default:return null}};function FFe({intl:e,triggerType:t}){switch(t){case ft.SCHEDULED:return e.formatMessage({defaultMessage:"Scheduled task",id:"dG8VrMkuAT"});case ft.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert",id:"XMapyUiPpV"});case ft.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut",id:"tceWOrncgz"});default:$t(t)}}function UFe({intl:e,triggerType:t,actionPerformed:n}){const r=BFe({intl:e,actionPerformed:n});switch(t){case ft.SCHEDULED:return e.formatMessage({defaultMessage:"Task has been {actionDisplayName}",id:"dztI4FIBBf"},{actionDisplayName:r});case ft.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert has been {actionDisplayName}",id:"ApBHuTxt1D"},{actionDisplayName:r});case ft.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut has been {actionDisplayName}",id:"oprPa0O7KY"},{actionDisplayName:r});default:$t(t)}}function BFe({intl:e,actionPerformed:t}){switch(t){case"created":return e.formatMessage({defaultMessage:"created",id:"lr7wlbGcN2"});case"updated":return e.formatMessage({defaultMessage:"updated",id:"fM7xZh2bri"});case"paused":return e.formatMessage({defaultMessage:"paused",id:"onIpArq3j6"});case"resumed":return e.formatMessage({defaultMessage:"resumed",id:"NUz1enNtoA"});case"deleted":return e.formatMessage({defaultMessage:"deleted",id:"GBLHN+CxXe"});case"copied":return e.formatMessage({defaultMessage:"copied",id:"JZWZSAD5l1"});case"skipped":return e.formatMessage({defaultMessage:"skipped",id:"yrhXAwV22L"});default:$t(t)}}const VFe=1e9,W$=-1e9;function iie(e){return{trigger:{type:ft.SCHEDULED,schedule:e.schedule},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources??d1()},status:"ACTIVE",notificationSettings:Mh}}function lie({selectedTask:e}){if(!e||e.type===null)return null;switch(e.type){case"SCHEDULE":return{id:e.id,trigger:{type:ft.SCHEDULED,schedule:Kw(e.scheduleInfo),expiryDate:e.expiryDate},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status,notificationSettings:e.notificationSettings??Mh};case"ALERT":switch(e.subscription?.event_type){case"STOCK_PRICE_TARGET":return{id:e.id,trigger:{type:ft.PRICE_ALERT,alertType:Is.TARGET_PRICE,price:(e.subscription.value_lower_bound??W$)<0?e.subscription.value_upper_bound??VFe:e.subscription.value_lower_bound??W$,currency:"usd",symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};case"STOCK_PRICE_MOVEMENT":return{id:e.id,trigger:{type:ft.PRICE_ALERT,alertType:Is.MOVEMENT_AMOUNT,percentageDecimalLowerBound:(e.subscription.value_lower_bound??0)/100,percentageDecimalUpperBound:(e.subscription.value_upper_bound??0)/100,symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:throw new Error("Unhandled subscription.event_type: "+e.subscription?.event_type)}case"SHORTCUT":return{id:e.id,trigger:{type:ft.SHORTCUT,shortcut:e.title},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:$t(e.type)}}function z7(e=!0){return{trigger:{type:ft.SCHEDULED,schedule:FS()},query:{searchModel:e?ce.PRO:ce.DEFAULT,prompt:"",sources:d1()},status:"ACTIVE",notificationSettings:Mh}}function cie({symbol:e=""}={symbol:""}){return{trigger:{type:ft.PRICE_ALERT,alertType:Is.TARGET_PRICE,price:0,currency:"usd",symbol:e},query:{prompt:"",searchModel:ce.PRO,sources:d1()},status:"ACTIVE"}}function uie(e){if(e.trigger.type!==ft.SCHEDULED)return e;const t=aie(e.query.searchModel,e.trigger.schedule),n=OFe({expiryDate:e.trigger.expiryDate,schedule:e.trigger.schedule,defaultExpiryDate:t});return e.id?{...e,trigger:{...e.trigger,expiryDate:n}}:{...e,trigger:{...e.trigger,schedule:{...e.trigger.schedule},expiryDate:n,defaultExpiryDate:t}}}function d1(){return["web"]}function gLt({intl:e,type:t,symbol:n}){return`${n}  ${LOe(t,e)}`}function yLt({intl:e,type:t,upperBound:n,lowerBound:r,currency:s="USD"}){const{$t:a}=e,o=l=>l!=null&&l!==-1&&Math.abs(l)!==OOe;switch(t){case"STOCK_PRICE_TARGET":{if(o(r))return a({defaultMessage:"Price below {price}",id:"a0pUAk88Od"},{price:r.toLocaleString(e.locale,{style:"currency",currency:s,trailingZeroDisplay:"stripIfInteger"})});if(o(n))return a({defaultMessage:"Price above {price}",id:"t+Mcn2lglF"},{price:n.toLocaleString(e.locale,{style:"currency",currency:s,trailingZeroDisplay:"stripIfInteger"})});break}case"STOCK_PRICE_MOVEMENT":{const l=o(r),c=o(n);if(l&&c)return a({defaultMessage:"Price moves {percentage}%+",id:"RevB4+v84e"},{percentage:Math.abs(n)});if(c)return a({defaultMessage:"Price rises {percentage}%+",id:"9reloFrZNr"},{percentage:n});if(l)return a({defaultMessage:"Price drops {percentage}%+",id:"RWgd7UywB3"},{percentage:Math.abs(r)});break}default:$t(t)}return""}const die=20,tf="list_ask_threads",WFe=10,fie=async({paginationParams:e,timeoutMs:t,ascending:n=!1,reason:r})=>{const s=await ne.POST("/rest/thread/list_ask_threads",r,{timeoutMs:t,body:{limit:die,ascending:n,...e}});if(s.error||!s.data)throw new Error(s.error?.detail?.toString()||"Failed to get user threads");return s.data},mie=async({thread_uuid:e,format:t,filename:n,reason:r})=>{const s=await ne.POST("/rest/thread/export",r,{body:{thread_uuid:e,format:t,filename:n},timeoutMs:Pe({productionMs:6e3,clientSideMs:1e4})});if(s.error)throw new Error(s.error.detail?.toString()||"Failed to export thread");return s.data},US=async(e,t)=>{try{await ne.PUT("/rest/thread/{entry_uuid_or_slug}","remove-thread-expiry",{params:{path:{entry_uuid_or_slug:e}},body:{expired:!1}}),t?.()}catch{throw new Error("Failed to remove thread expiry")}},$Fe=({slugOrUUID:e})=>{const t=f.useCallback(async()=>{e&&await US(e)},[e]);return f.useMemo(()=>({handleRemoveExpiry:t}),[t])},pie="rwTokenStorage",$$=20,Y0=e=>{const t=JSON.stringify(e);try{Ae.setItem(pie,t)}catch(n){ee.warn("Could not put rw token storage"),ee.warn(n)}},G7=()=>{let e=null;try{e=Ae.getItem(pie)}catch(t){ee.warn("Could not access local storage"),ee.warn(t)}if(!e)return Y0({}),{};try{return JSON.parse(e)??{}}catch(t){ee.warn("Could not deserialize rw token storage"),ee.warn(t);const n={};return Y0({}),n}},HFe=(e,t)=>{if(!e||!t)return;let n=G7(),r=Object.keys(n);if(r.length>=$$){const s=r[Math.floor(Math.random()*r.length)];s&&delete n[s]}r=Object.keys(n),r.length>$$+5&&(ee.warn("Too many rw tokens stored; resetting"),n={}),n[e]=t,Y0(n)},zFe=e=>e?G7()[e]:void 0,hie=e=>{const t=e.context_uuid;if(!t)return;const n=zFe(t);if(n)return n;const r=e?.read_write_token;if(r)return HFe(t,r),r},vLt=e=>{if(!e)return;const t=G7();delete t[e],Y0(t)},xLt=()=>{Y0({})},GFe=e=>e?.context_uuid??void 0,qFe=e=>e?.frontend_context_uuid??void 0,KFe=e=>e?.thread_title??"",YFe=e=>e?.query_str??void 0,QFe=e=>e?.search_focus??void 0,XFe=e=>e.sources?.sources??void 0,ZFe=e=>e?.author_id??void 0,JFe=e=>e?.author_username??void 0,eUe=e=>e?.author_image??void 0,tUe=e=>{if(e.parent_info)return e.parent_info},nUe=e=>e?.mode??null,rUe=e=>e?.personalized??void 0,sUe=e=>e?.collection_info??void 0,aUe=e=>e?.bookmark_state??void 0,oUe=e=>e?.thread_access??void 0,iUe=e=>e?.thread_url_slug??void 0,lUe=e=>e?.updated_datetime??void 0,cUe=e=>e?.expiry_time??null,uUe=e=>e?.privacy_state??void 0;function Q0(e,t){const n={};for(const r of e){const s=t(r);Object.prototype.hasOwnProperty.call(n,s)?n[s].push(r):Object.defineProperty(n,s,{value:[r],configurable:!0,enumerable:!0,writable:!0})}return n}const $i={web:"web",scholar:"scholar",social:"social",edgar:"edgar",org:"org",my_files:"my_files",crunchbase:"crunchbase",factset:"factset",google_drive:"google_drive",onedrive:"onedrive",sharepoint:"sharepoint",wiley:"wiley",dropbox:"dropbox",box:"box",notion:"notion",notion_mcp:"notion_mcp",outlook:"outlook",linear:"linear",linear_alt:"linear_alt",slack:"slack",github_mcp_direct:"github_mcp_direct",asana_mcp_direct:"asana_mcp_direct",asana_mcp_merge:"asana_mcp_merge",atlassian_mcp_direct:"atlassian_mcp_direct",slack_direct:"slack_direct",space:"space",gcal:"gcal"},dUe=Object.values($i),fUe=["linear","linear_alt","slack","notion_mcp","github_mcp_direct","asana_mcp_direct","asana_mcp_merge","atlassian_mcp_direct","slack_direct"],kh=e=>dUe.includes(e),bA=e=>Array.isArray(e)?e.filter(kh):[],mUe=e=>Array.isArray(e)?e.filter(kh).filter(t=>fUe.includes(t)):[],gie=e=>e?.entity_group_type!=="CALENDAR_ACTION"&&!!e?.entities?.length,yie=e=>{const t=!!e?.gauge_familiarity_card_block?.question,n=!!e?.multiple_choice_quiz_card_block?.questions?.length,r=!!e?.flash_card_section_block;return t||n||r};class un{static hasAnswer(t,n){const r=!!(t.chunks&&t.chunks.length>0),s=!!(t.answer&&t.answer.length>0),a=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.chunks?.length||u.entity_list_block?.chunks?.length),o=!!t.structured_answer_blocks?.some(u=>yie(u.inline_entity_block)),l=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.answer?.length||u.entity_list_block?.text?.length||gie(u.entity_group_block)),c=!!t.structured_answer_blocks?.some(u=>u.inline_entity_block?.media_block?.generated_media_items?.some(d=>d.status==="COMPLETED"))&&n;return r||s||a||l||c||o}static isPerplexityMessage(t){return t?.blocks!==void 0}static isPerplexityArticleSection(t){return t?.message!==void 0}static isArticleSection(t){return t?.article_info!==void 0}static mergePlaceBlocks(t){const n=t.filter(o=>!!o);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(o=>({review_summary:o.review_summary})))}static mergeMediaBlocks(t){const n=t.filter(s=>!!s);return n.length?{media_items:n.flatMap(s=>s?.media_items||[]),generated_media_items:n[n.length-1].generated_media_items||[],progress:n[n.length-1].progress}:void 0}static mergeShoppingBlocks(t){const n=t.filter(o=>!!o);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(o=>({review_summary:o.review_summary})))}static mergeEntityListItems(t){const n=Q0(t,s=>s.index),r=[];return Object.values(n).forEach(s=>{const a=s[0];r.push({title:a.title,text:s.map(({text:o})=>o).join(""),chunks:s.flatMap(o=>o.chunks),chunk_starting_offset:0,index:a.index,awaiting_backfill:s.reduce((o,l)=>l.awaiting_backfill??o,!1),place_block:un.mergePlaceBlocks(s.map(o=>o.place_block)),shopping_block:un.mergeShoppingBlocks(s.map(o=>o.shopping_block))})}),r}static parseStructuredAnswerBlocks(t){if(!this.isPerplexityMessage(t)||!t.structured_answer_block_usages?.length)return null;const n=Q0(t.blocks,s=>s.intended_usage),r=[];return t.structured_answer_block_usages.forEach(s=>{const a=n[s];if(!a)return;const{markdownBlocks:o,placeBlocks:l,mediaBlocks:c,shoppingPreviewBlocks:u,entityListBlocks:d,jobsPreviewBlocks:m,hotelsPreviewBlocks:p,placesPreviewBlocks:h,knowledgeCardsBlocks:g,calendarEventBlocks:y,entityGroupBlocks:v,entityGroupV2Blocks:x,assetsPreviewBlocks:b,assetsInlineBlocks:_,shoppingBlocks:w,proPerkOfferBlocks:C,placeholderBlocks:S,financeInlineBlocks:E,gaugeFamiliarityCardBlocks:M,multipleChoiceQuizCardBlocks:k,flashCardSectionBlocks:T}=a.reduce((j,R)=>(R.markdown_block?j.markdownBlocks.push(R.markdown_block):R.inline_entity_block?.place_block?j.placeBlocks.push(R.inline_entity_block.place_block):R.inline_entity_block?.media_block?j.mediaBlocks.push(R.inline_entity_block.media_block):R.inline_entity_block?.shopping_preview_block?j.shoppingPreviewBlocks.push(R.inline_entity_block.shopping_preview_block):R.entity_list_block?j.entityListBlocks.push(R.entity_list_block):R.inline_entity_block?.jobs_preview_block?j.jobsPreviewBlocks.push(R.inline_entity_block.jobs_preview_block):R.inline_entity_block?.hotels_preview_block?j.hotelsPreviewBlocks.push(R.inline_entity_block.hotels_preview_block):R.inline_entity_block?.places_preview_block?j.placesPreviewBlocks.push(R.inline_entity_block.places_preview_block):R.inline_entity_block?.knowledge_card_block?j.knowledgeCardsBlocks.push(R.inline_entity_block.knowledge_card_block):R.inline_entity_block?.calendar_event_block?j.calendarEventBlocks.push(R.inline_entity_block.calendar_event_block):R.entity_group_block?j.entityGroupBlocks.push(R.entity_group_block):R.entity_group_v2_block?j.entityGroupV2Blocks.push(R.entity_group_v2_block):R.inline_entity_block?.assets_preview_block?j.assetsPreviewBlocks.push(R.inline_entity_block.assets_preview_block):R.inline_entity_block?.assets_inline_block?j.assetsInlineBlocks.push(R.inline_entity_block.assets_inline_block):R.inline_entity_block?.shopping_block?j.shoppingBlocks.push(R.inline_entity_block?.shopping_block):R.pro_perk_offer_block?j.proPerkOfferBlocks.push(R.pro_perk_offer_block):R.inline_entity_block?.finance_inline_block?j.financeInlineBlocks.push(R.inline_entity_block.finance_inline_block):R.inline_entity_block?.placeholder_block?j.placeholderBlocks.push(R.inline_entity_block?.placeholder_block):R.inline_entity_block?.gauge_familiarity_card_block?j.gaugeFamiliarityCardBlocks.push(R.inline_entity_block.gauge_familiarity_card_block):R.inline_entity_block?.multiple_choice_quiz_card_block?j.multipleChoiceQuizCardBlocks.push(R.inline_entity_block.multiple_choice_quiz_card_block):R.inline_entity_block?.flash_card_section_block&&j.flashCardSectionBlocks.push(R.inline_entity_block.flash_card_section_block),j),{markdownBlocks:[],placeBlocks:[],mediaBlocks:[],shoppingPreviewBlocks:[],entityListBlocks:[],jobsPreviewBlocks:[],hotelsPreviewBlocks:[],placesPreviewBlocks:[],knowledgeCardsBlocks:[],calendarEventBlocks:[],entityGroupBlocks:[],entityGroupV2Blocks:[],assetsPreviewBlocks:[],assetsInlineBlocks:[],shoppingBlocks:[],proPerkOfferBlocks:[],placeholderBlocks:[],financeInlineBlocks:[],gaugeFamiliarityCardBlocks:[],multipleChoiceQuizCardBlocks:[],flashCardSectionBlocks:[]});if(o.length){const j=o[o.length-1];r.push({intended_usage:s,markdown_block:{answer:o.map(R=>R.answer).join(""),chunks:o.flatMap(R=>R.chunks),chunk_starting_offset:0,progress:j.progress,media_items:o.flatMap(R=>R.media_items||[]),inline_token_annotations:o.flatMap(R=>R.inline_token_annotations||[])}})}if(u.length&&r.push({intended_usage:s,inline_entity_block:{shopping_preview_block:u[u.length-1]}}),m.length&&r.push({intended_usage:s,inline_entity_block:{jobs_preview_block:m[m.length-1]}}),p.length&&r.push({intended_usage:s,inline_entity_block:{hotels_preview_block:p[p.length-1]}}),h.length&&r.push({intended_usage:s,inline_entity_block:{places_preview_block:h[h.length-1]}}),l.length&&r.push({intended_usage:s,inline_entity_block:{place_block:un.mergePlaceBlocks(l)}}),c.length&&r.push({intended_usage:s,inline_entity_block:{media_block:un.mergeMediaBlocks(c)}}),d.length&&r.push({intended_usage:s,entity_list_block:{text:d.map(({text:j})=>j).join(""),chunks:d.flatMap(j=>j.chunks),chunk_starting_offset:0,entities:un.mergeEntityListItems(d.flatMap(j=>j.entities))}}),g.length&&r.push({intended_usage:s,inline_entity_block:{knowledge_card_block:g[g.length-1]}}),y.length&&r.push({intended_usage:s,inline_entity_block:{calendar_event_block:y[y.length-1]}}),v.length&&r.push({intended_usage:s,entity_group_block:{entities:v[v.length-1].entities,entity_group_type:v[v.length-1].entity_group_type}}),x.length){const j=x[x.length-1];r.push({intended_usage:s,entity_group_v2_block:j})}b.length&&r.push({intended_usage:s,inline_entity_block:{assets_preview_block:b[b.length-1]}}),_.length&&r.push({intended_usage:s,inline_entity_block:{assets_inline_block:_[_.length-1]}}),w.length&&r.push({intended_usage:s,inline_entity_block:{shopping_block:this.mergeShoppingBlocks(w)}}),C.length&&r.push({intended_usage:s,pro_perk_offer_block:C[C.length-1]}),E.length&&r.push({intended_usage:s,inline_entity_block:{finance_inline_block:E[E.length-1]}}),S.length&&r.push({intended_usage:s,inline_entity_block:{placeholder_block:S[S.length-1]}}),M.length&&r.push({intended_usage:s,inline_entity_block:{gauge_familiarity_card_block:M[M.length-1]}}),k.length&&r.push({intended_usage:s,inline_entity_block:{multiple_choice_quiz_card_block:k[k.length-1]}}),T.length&&r.push({intended_usage:s,inline_entity_block:{flash_card_section_block:T[T.length-1]}})}),r}static parseAskTextField(t){if(!this.isPerplexityMessage(t))return this.legacyParseBackendOutputStr(t.text);if(!t.blocks?.length)return null;const n={answer:""};n.structured_answer_blocks=un.parseStructuredAnswerBlocks(t);const r=t.blocks?.filter(a=>a.intended_usage==="ask_text"&&a.markdown_block).map(a=>a.markdown_block);if(r.length>0){const a=r.flatMap(o=>o.chunks);n.chunks=a,n.answer=a.join("")}const s=t.blocks?.filter(a=>a.intended_usage==="web_results"&&a.web_result_block).flatMap(a=>a.web_result_block.web_results);return s.length>0&&(n.web_results=s),n}static legacyParseBackendOutputStr(t){let n=null;try{if(n=JSON.parse(t??""),Array.isArray(n)){const r=n[n.length-1];r.step_type=="FINAL"&&r?.content?.answer!=null&&(n=JSON.parse(r.content.answer))}}catch{return null}return n}static isStatusPending(t){return t.status?.toLowerCase()===cr.PENDING.toLowerCase()}static isStatusBlocked(t){return t.status?.toLowerCase()===cr.BLOCKED.toLowerCase()}static isStatusFailed(t){return t.status?.toLowerCase()===cr.FAILED.toLowerCase()}static isStatusCompleted(t){return t.status?.toLowerCase()===cr.COMPLETED.toLowerCase()}static isCopilotMode(t){return t.mode?.toLowerCase()===Hm.COPILOT.toLowerCase()}static isArticleMode(t){return this.isPerplexityMessage(t)?t?.mode===Hm.ARTICLE:this.isPerplexityArticleSection(t)?t?.message?.mode===Hm.ARTICLE:t?.mode==="article"}static isSourceListType(t){return Array.isArray(t)&&t.every(n=>Object.values($i).includes(n))}static hasUnspecifiedSelectionStatus(t){return t?.selection_status===ti.SELECTION_STATUS_UNSPECIFIED}static extractClarifyingQuestion(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{if(r.intended_usage==="clarification_responses"&&r?.clarification_responses_block){const s=r.clarification_responses_block?.responses;if(s?.length>0&&s[0]){const a=s[0];a?.input_hint?.hint&&n.push(a.input_hint.hint)}}}),n[0]??null}static extractClarificationResponses(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{r.intended_usage==="pro_search_steps"&&r.plan_block?.steps&&r.plan_block.steps.forEach(s=>{s.clarifying_questions_output_content?.clarification&&n.push(s.clarifying_questions_output_content.clarification)})}),n}}var Yw;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(Yw||(Yw={}));function pUe(e){return e>=Yw.WRITER&&e<Yw.INVITED_READER}const vie="CLIENT_SEARCH_PLACEHOLDER",hUe=({rawQuery:e,fork:t,existingEntryUUID:n,existingUuid:r,collection:s,isRelatedQuery:a,newFrontendContextUUID:o,existingFrontendContextUUID:l,submitFromArticleOverride:c,isNavSuggestionsDisabled:u,isCopilot:d,newAttachments:m,firstResultFrontendContextUUID:p,isPersonalized:h,forceNew:g,finalSources:y,finalRecency:v,uuid:x,threadMetadataTitle:b,threadMetadataThreadUrlSlug:_,modelPreferenceSubmit:w,querySource:C,side_by_side_metadata:S})=>{const E=e.trim(),M=d?JSON.stringify([{step_type:"INITIAL_QUERY",content:{query:""},uuid:""}]):m.length>0?JSON.stringify({web_results:m.map(j=>({url:j,is_attachment:!0}))}):null,k=t?{title:c?.article_info?.title??b,url_slug:(c&&"thread_url_slug"in c?c.thread_url_slug:void 0)??_,mode:((c&&"mode"in c?c.mode:void 0)??p)?.toUpperCase()}:void 0,T=s&&pUe(s.user_permission)?s:void 0;return{parent_info:void 0,plan:void 0,summary:void 0,form:void 0,reasoning_plan:void 0,status:"PENDING",final:!1,query_str:E,query_source:C,backend_uuid:g?"":n??"",bookmark_state:s?"BOOKMARKED":"NOT_BOOKMARKED",context_uuid:"",frontend_context_uuid:l??o??"",uuid:r??x,frontend_uuid:r??x,...t?{parent_info:k}:{},author_username:void 0,author_image:void 0,search_focus:y.length===0?"writing":"internet",search_recency_filter:v??void 0,sources:{sources:y},num_sources_display:void 0,personalized:h,attachments:m,blocks:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},mode:d?"COPILOT":"CONCISE",text:M??void 0,collection_info:T,is_related_query_result:a??!1,related_queries:[],media_items:[],widget_data:[],widget_intents:[],knowledge_cards:[],sponsored_results:[],expect_sponsored_results:!1,related_query_items:[],sources_list:[],answer_modes:[],is_nav_suggestions_disabled:u,structured_answer_block_usages:[],display_model:w,model_preference:w,side_by_side_metadata:S}},q7="DEFAULT_SEARCH_PLACEHOLDER",gUe=(e={})=>{const t=e.uuid??e.frontend_uuid??dr();return{status:"PENDING",parent_info:void 0,query_str:"",backend_uuid:q7,author_username:void 0,author_image:void 0,search_focus:"internet",display_model:"turbo",personalized:!1,attachments:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},text:void 0,collection_info:void 0,image_completions:[],is_related_query_result:!1,final:!1,sources:{sources:["web"]},should_index:!1,updated_datetime:new Date().toISOString(),thread_access:0,thread_url_slug:"",expiry_time:void 0,privacy_state:void 0,context_uuid:"",related_queries:[],media_items:[],widget_data:[],blocks:[],message_mode:"MESSAGE_MODE_UNSPECIFIED",widget_intents:[],knowledge_cards:[],sponsored_results:[],plan:void 0,reasoning_plan:void 0,summary:void 0,form:void 0,sources_list:[],related_query_items:[],answer_modes:[],structured_answer_block_usages:[],...e,frontend_context_uuid:e.frontend_context_uuid??dr(),frontend_uuid:t,uuid:t,attachment_processing_progress:[]}};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var yUe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vUe=Object.prototype.hasOwnProperty;function _A(e,t){return vUe.call(e,t)}function wA(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var s in e)_A(e,s)&&r.push(s);return r}function Xa(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function CA(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function pd(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function xie(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function SA(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(SA(e[t]))return!0}else if(typeof e=="object"){for(var r=wA(e),s=r.length,a=0;a<s;a++)if(SA(e[r[a]]))return!0}}return!1}function H$(e,t){var n=[e];for(var r in t){var s=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof s<"u"&&n.push(r+": "+s)}return n.join(`
`)}var bie=function(e){yUe(t,e);function t(n,r,s,a,o){var l=this.constructor,c=e.call(this,H$(n,{name:r,index:s,operation:a,tree:o}))||this;return c.name=r,c.index=s,c.operation=a,c.tree=o,Object.setPrototypeOf(c,l.prototype),c.message=H$(n,{name:r,index:s,operation:a,tree:o}),c}return t}(Error),vr=bie,xUe=Xa,Nm={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Qw(n,this.path);r&&(r=Xa(r));var s=Od(n,{op:"remove",path:this.from}).removed;return Od(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Qw(n,this.from);return Od(n,{op:"add",path:this.path,value:Xa(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:X0(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},bUe={add:function(e,t,n){return CA(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Nm.move,copy:Nm.copy,test:Nm.test,_get:Nm._get};function Qw(e,t){if(t=="")return e;var n={op:"_get",path:t};return Od(e,n),n.value}function Od(e,t,n,r,s,a){if(n===void 0&&(n=!1),r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Xw(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Qw(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=X0(e,t.value),o.test===!1)throw new vr("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new vr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return o}}else{r||(e=Xa(e));var l=t.path||"",c=l.split("/"),u=e,d=1,m=c.length,p=void 0,h=void 0,g=void 0;for(typeof n=="function"?g=n:g=Xw;;){if(h=c[d],h&&h.indexOf("~")!=-1&&(h=xie(h)),s&&(h=="__proto__"||h=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[h]===void 0?p=c.slice(0,d).join("/"):d==m-1&&(p=t.path),p!==void 0&&g(t,0,e,p)),d++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!CA(h))throw new vr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);CA(h)&&(h=~~h)}if(d>=m){if(n&&t.op==="add"&&h>u.length)throw new vr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var o=bUe[t.op].call(t,u,h,e);if(o.test===!1)throw new vr("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}}else if(d>=m){var o=Nm[t.op].call(t,u,h,e);if(o.test===!1)throw new vr("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}if(u=u[h],n&&d<m&&(!u||typeof u!="object"))throw new vr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function BS(e,t,n,r,s){if(r===void 0&&(r=!0),s===void 0&&(s=!0),n&&!Array.isArray(t))throw new vr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Xa(e));for(var a=new Array(t.length),o=0,l=t.length;o<l;o++)a[o]=Od(e,t[o],n,!0,s,o),e=a[o].newDocument;return a.newDocument=e,a}function _Ue(e,t,n){var r=Od(e,t);if(r.test===!1)throw new vr("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Xw(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new vr("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Nm[e.op]){if(typeof e.path!="string")throw new vr("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new vr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new vr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new vr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&SA(e.value))throw new vr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,a=r.split("/").length;if(s!==a+1&&s!==a)throw new vr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new vr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},l=_ie([o],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new vr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new vr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function _ie(e,t,n){try{if(!Array.isArray(e))throw new vr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)BS(Xa(t),Xa(e),n||!0);else{n=n||Xw;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(s){if(s instanceof vr)return s;throw s}}function X0(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),s,a,o;if(n&&r){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!X0(e[s],t[s]))return!1;return!0}if(n!=r)return!1;var l=Object.keys(e);if(a=l.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!t.hasOwnProperty(l[s]))return!1;for(s=a;s--!==0;)if(o=l[s],!X0(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const wUe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:vr,_areEquals:X0,applyOperation:Od,applyPatch:BS,applyReducer:_Ue,deepClone:xUe,getValueByPointer:Qw,validate:_ie,validator:Xw},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var K7=new WeakMap,CUe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),SUe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function EUe(e){return K7.get(e)}function MUe(e,t){return e.observers.get(t)}function kUe(e,t){e.observers.delete(t.callback)}function TUe(e,t){t.unobserve()}function NUe(e,t){var n=[],r,s=EUe(e);if(!s)s=new CUe(e),K7.set(e,s);else{var a=MUe(s,t);r=a&&a.observer}if(r)return r;if(r={},s.value=Xa(e),t){r.callback=t,r.next=null;var o=function(){EA(r)},l=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return r.patches=n,r.object=e,r.unobserve=function(){EA(r),clearTimeout(r.next),kUe(s,r),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},s.observers.set(t,new SUe(t,r)),r}function EA(e,t){t===void 0&&(t=!1);var n=K7.get(e.object);Y7(n.value,e.object,e.patches,"",t),e.patches.length&&BS(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Y7(e,t,n,r,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=wA(t),o=wA(e),l=!1,c=o.length-1;c>=0;c--){var u=o[c],d=e[u];if(_A(t,u)&&!(t[u]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var m=t[u];typeof d=="object"&&d!=null&&typeof m=="object"&&m!=null&&Array.isArray(d)===Array.isArray(m)?Y7(d,m,n,r+"/"+pd(u),s):d!==m&&(s&&n.push({op:"test",path:r+"/"+pd(u),value:Xa(d)}),n.push({op:"replace",path:r+"/"+pd(u),value:Xa(m)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:r+"/"+pd(u),value:Xa(d)}),n.push({op:"remove",path:r+"/"+pd(u)}),l=!0):(s&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!l&&a.length==o.length))for(var c=0;c<a.length;c++){var u=a[c];!_A(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+pd(u),value:Xa(t[u])})}}}function AUe(e,t,n){n===void 0&&(n=!1);var r=[];return Y7(e,t,r,"",n),r}const jUe=Object.freeze(Object.defineProperty({__proto__:null,compare:AUe,generate:EA,observe:NUe,unobserve:TUe},Symbol.toStringTag,{value:"Module"}));Object.assign({},wUe,jUe,{JsonPatchError:bie,deepClone:Xa,escapePathComponent:pd,unescapePathComponent:xie});function RUe(e,t){const n=new Map(e.map(r=>[r.intended_usage,r]));for(const r of t)if(r.diff_block){const s=r.diff_block.field,a=n.get(r.intended_usage)?.[s]??{},o=BS(a,r.diff_block.patches,!1,!1).newDocument;n.set(r.intended_usage,{intended_usage:r.intended_usage,[s]:o})}else n.set(r.intended_usage,r);return Array.from(n.values())}let wie=()=>({emit(e,...t){for(let n=this.events[e]||[],r=0,s=n.length;r<s;r++)n[r](...t)},events:{},on(e,t){return(this.events[e]||=[]).push(t),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}});const Yr=wie();function IUe(e,t){return e.reduce((n,r)=>r(n),t)}const PUe=e=>e&&NMe(e,t=>t!=null);function MA(e){return e?!e.resume_entry_uuid:!1}function OUe(e,t){const n={minuteCount:0,hourCount:0,minuteWindow:Math.floor(Date.now()/6e4),hourWindow:Math.floor(Date.now()/36e5)};return async(...r)=>{const s=Date.now(),a=Math.floor(s/(60*1e3)),o=Math.floor(s/(60*60*1e3));return a!==n.minuteWindow&&(n.minuteCount=0,n.minuteWindow=a),o!==n.hourWindow&&(n.hourCount=0,n.hourWindow=o),n.minuteCount>=t.perMinute?{allowed:!1}:n.hourCount>=t.perHour?{allowed:!1}:(n.minuteCount++,n.hourCount++,{allowed:!0,result:await e(...r)})}}const LUe=Symbol(),Cie=Symbol(),gy="a",Sie="f",z$="p",Eie="c",Mie="t",kie="h",F_="w",Tie="o",Nie="k";let DUe=(e,t)=>new Proxy(e,t);const kA=Object.getPrototypeOf,G$=new WeakMap,FUe=e=>e&&(G$.has(e)?G$.get(e):kA(e)===Object.prototype||kA(e)===Array.prototype),q$=e=>typeof e=="object"&&e!==null,UUe=e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(t=>!t.configurable&&!t.writable),BUe=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(n=>{n.configurable=!0}),Object.create(kA(e),t)},VUe=(e,t)=>{const n={[Sie]:t};let r=!1;const s=(l,c)=>{if(!r){let u=n[gy].get(e);if(u||(u={},n[gy].set(e,u)),l===F_)u[F_]=!0;else{let d=u[l];d||(d=new Set,u[l]=d),d.add(c)}}},a=()=>{r=!0,n[gy].delete(e)},o={get(l,c){return c===Cie?e:(s(Nie,c),jie(Reflect.get(l,c),n[gy],n[Eie],n[Mie]))},has(l,c){return c===LUe?(a(),!0):(s(kie,c),Reflect.has(l,c))},getOwnPropertyDescriptor(l,c){return s(Tie,c),Reflect.getOwnPropertyDescriptor(l,c)},ownKeys(l){return s(F_),Reflect.ownKeys(l)}};return t&&(o.set=o.deleteProperty=()=>!1),[o,n]},Aie=e=>e[Cie]||e,jie=(e,t,n,r)=>{if(!FUe(e))return e;let s=r&&r.get(e);if(!s){const c=Aie(e);UUe(c)?s=[c,BUe(c)]:s=[c],r?.set(e,s)}const[a,o]=s;let l=n&&n.get(a);return(!l||l[1][Sie]!==!!o)&&(l=VUe(a,!!o),l[1][z$]=DUe(o||a,l[0]),n&&n.set(a,l)),l[1][gy]=t,l[1][Eie]=n,l[1][Mie]=r,l[1][z$]},WUe=(e,t)=>{const n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some((s,a)=>s!==r[a])},TA=(e,t,n,r,s=Object.is)=>{if(s(e,t))return!1;if(!q$(e)||!q$(t))return!0;const a=n.get(Aie(e));if(!a)return!0;if(r){if(r.get(e)===t)return!1;r.set(e,t)}let o=null;for(const l of a[kie]||[])if(o=Reflect.has(e,l)!==Reflect.has(t,l),o)return o;if(a[F_]===!0){if(o=WUe(e,t),o)return o}else for(const l of a[Tie]||[]){const c=!!Reflect.getOwnPropertyDescriptor(e,l),u=!!Reflect.getOwnPropertyDescriptor(t,l);if(o=c!==u,o)return o}for(const l of a[Nie]||[])if(o=TA(e[l],t[l],n,r,s),o)return o;if(o===null)throw new Error("invalid used");return o},$Ue=e=>()=>{const[,n]=f.useReducer(u=>u+1,0),r=f.useMemo(()=>new WeakMap,[]),s=f.useRef(),a=f.useRef();f.useEffect(()=>{s.current!==a.current&&TA(s.current,a.current,r,new WeakMap)&&(s.current=a.current,n())});const o=f.useCallback(u=>(a.current=u,s.current&&s.current!==u&&!TA(s.current,u,r,new WeakMap)?s.current:(s.current=u,u)),[r]),l=e(o),c=f.useMemo(()=>new WeakMap,[]);return jie(l,r,c)};function f1(e){const t=A.createContext(null),{useSelector:n,useStore:r,useTrackedState:s}=Rie(t,e);return{Context:t,useSelector:n,useStore:r,useTrackedState:s}}function Rie(e,t){const n=()=>{const a=A.useContext(e);if(!a)throw new Error(`This hook must be used within ${t}.Provider`);return a},r=a=>n()(a),s=$Ue(r);return{useSelector:r,useStore:n,useTrackedState:s}}const Th=(e,t)=>{const n=A.createContext(null),r=l=>{const[c]=A.useState(()=>l.initialValue?t(l?.initialValue):t(void 0));return i.jsx(n.Provider,{value:c,children:l.children})},{useSelector:s,useStore:a,useTrackedState:o}=Rie(n,e);return{useSelector:s,useStore:a,useTrackedState:o,Context:n,Provider:r}},HUe="2.18",NA=Object.freeze([]);function qm(e,t){return t?e.streams[t]:void 0}function Q7(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===t&&e.activeStreams.includes(a.id.description))return a}}function zUe(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.threadId===t&&e.activeStreams.includes(a.id.description))return a}}const Iie=50,GUe=100,K$=1e3;function ZM(e,t,n){const r=IUe(e.middlewares,n);if(!r)return{newState:e};const s=qm(e,t);if(!s||!e.activeStreams.includes(t))return{newState:e};const a=r.context_uuid,o=r.backend_uuid,l=r.uuid,u=!!!(s.entryId&&s.isReconnect&&e.erroredStreams[s.entryId])&&(!s.threadId||!s.entryId);if(o===q7||o===vie)return{newState:{streams:{...e.streams,[t]:{...s,placeholderChunk:r}}}};if(r.status===cr.PENDING&&r.blocks?.length===0||r.status===cr.RESUMING)return{newState:{...AA(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:{...s,threadId:r.context_uuid,entryId:o,extraEntryId:l,placeholderChunk:r}}},ingested:r};if(!a||!o)return{newState:e};let d=s;return u&&(d={...s,threadId:a,entryId:o,extraEntryId:l}),{newState:{...AA(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:d}},ingested:r}}function AA(e,t,{isFirstMessage:n,placeholderChunk:r,streamId:s}){const a=t.context_uuid,o=t.backend_uuid,l=Array.from(e.threads),c={...e.entries};if(l.length>=GUe){const m=l.shift();if(m)for(const p of m.entryIds)delete c[p]}const u=l.findIndex(m=>m.id===a),d=l[u];if(d?d.entryIds.includes(o)||(l[u]={...d,entryIds:[...d.entryIds,o]}):l.push({id:a,entryIds:[o]}),t.status===cr.COMPLETED)c[o]=t;else if(t.blocks){let m=c[o];m&&m.uuid!==t.uuid?m=r:m||(m=r);const p=m?.frontend_context_uuid??t.frontend_context_uuid??s,h=m?.frontend_uuid??t.frontend_uuid??s,g=m?.query_str??t.query_str,y=m?.connector_auth_info!=null&&!("connector_auth_info"in t)&&!n,v={...m??{},...t,frontend_context_uuid:p,frontend_uuid:h,query_str:g,...y&&{connector_auth_info:void 0},blocks:RUe(n?NA:m?.blocks??NA,t.blocks)};c[o]=v}return{threads:l,entries:c}}function qUe(e,t,n){ee.error("Error in reading stream",n);const r=qm(e,t);if(!r)return e;const s=r?.entryId;if(!s)return e;const a={...e.entries[s],status:cr.FAILED},{promise:o,abortController:l,...c}=r;return{erroredStreams:{...e.erroredStreams,[s]:{...c,code:n instanceof gN?n.code:void 0}},entries:{...e.entries,[s]:a}}}const Y$=Object.freeze([PUe]);function KUe(e,t){const n=qm(e,t);if(!n)return;const r=e.threads.find(s=>s.id===n.threadId);Yr.emit("completed",{stream:n,thread:(r?.entryIds.map(s=>e.entries[s])??NA).filter(s=>s!=null),message:n.entryId?e.entries[n.entryId]:void 0})}const YUe=(e,t)=>({threads:[],entries:{},activeStreams:[],erroredStreams:{},middlewares:Y$,streamTimers:{},streams:{},actions:{abortStream:n=>{e(r=>{let s=r.activeStreams;const a=qm(r,n);if(a){try{a.abortController?.abort("Forced abort")}catch(o){ee.error("Failed to abort stream",o)}finally{s=s.filter(o=>o!==n)}return{activeStreams:s,streams:{...r.streams,[n]:{...a,promise:null,abortController:null}}}}return r},void 0,"abortStream")},getEntryById:n=>t().entries[n],createStream:n=>t().actions.createBackwardsCompatibleStream(n,{reason:"create-stream",timer:ac(void 0,{nowFromTimeOrigin:performance.now()})}).id,retryStream:n=>{const r=t().entries[n];if(!r)return;const s=t().erroredStreams[n];if(!s)return;const a=s.placeholderChunk?.query_str;if(a){if(e(o=>{const{entries:l,threads:c}=o,{[n]:u,...d}=l,m=Array.from(c),p=c.findIndex(h=>h.entryIds.includes(n));return p===-1?o:(m.splice(p,1,{id:m[p].id,entryIds:m[p].entryIds}),{threads:m,entries:d})}),!MA(s.params))throw new Error("Stream params are not SubmitParams so cannot retry");return t().actions.createBackwardsCompatibleStream({query_str:a,params:{...s.params,existing_entry_uuid:n,query_source:"retry",frontend_context_uuid:r.frontend_context_uuid}},{placeholderChunk:s.placeholderChunk,timer:ac(void 0,{nowFromTimeOrigin:performance.now()}),reason:"retry-stream"})}},reconnectStream:n=>{const r=Q7(t(),n);if(r&&r.promise&&r.abortController&&!r.abortController.signal.aborted)return r.id;const s=t().entries[n],a=s?.cursor,o=t().actions.createBackwardsCompatibleStream({query_str:"",params:{resume_entry_uuid:n,cursor:a}},{isReconnect:!0,timer:ac(void 0,{nowFromTimeOrigin:performance.now()}),reason:"reconnect-stream"});return e(l=>ZM(l,o.id.description,{...s,status:cr.PENDING}).newState,void 0,"ingestPlaceholderChunk"),o.id},createBackwardsCompatibleStream:(n,{isReconnect:r,placeholderChunk:s,onFinalResponse:a,onFirstMessageReceived:o,timer:l,reason:c})=>{const u=Array.from(t().activeStreams),d={...t().streams};if(u.length>=Iie)try{const x=u.shift();x&&(d[x]?.abortController?.abort(),d[x]={...d[x],promise:null,abortController:null})}catch(x){ee.error("Failed to abort stream",x)}const m=n.params?.frontend_uuid??dr(),p=new AbortController,h={id:{description:m},promise:Promise.resolve(),abortController:p,isReconnect:r,entryId:n.params?.resume_entry_uuid,params:n.params,timer:l},g={message:async x=>{const b=qm(t(),m);let _=!1;b?.threadId||(_=!0,o?.(x)),e(w=>{const{newState:C,ingested:S}=ZM(w,m,x);if(S?.status===cr.COMPLETED&&a?.(S),S?.status===cr.FAILED&&b&&b.entryId){const{promise:E,abortController:M,...k}=b;return{...C,erroredStreams:{...w.erroredStreams,[b.entryId]:k}}}return C},void 0,"ingest"),b&&Yr.emit("progress",{stream:b,message:t().entries[x.backend_uuid]??x,isFirstMessage:_})}},y=n.params?.query_source==="default_search",v={[Cr]:m};return ee.info("Starting stream",{request_id:m}),h.promise=(r?ne.SSE("/rest/sse/perplexity_ask/reconnect/{resume_entry_uuid}",c,{path:{resume_entry_uuid:n.params?.resume_entry_uuid??""},params:{cursor:n.params?.cursor},signal:p.signal,handlers:g,headers:v}):ne.SSE("/rest/sse/perplexity_ask",c,{params:{...n,params:{...n.params,version:HUe}},signal:p.signal,handlers:g,metrics:{omnisearch:y},timer:l,headers:v})).then(()=>KUe(t(),m),x=>{const b=t(),_=qm(b,m);_&&(e(w=>qUe(w,m,x),void 0,"handleStreamError"),Yr.emit("error",{stream:_,error:x}))}).finally(()=>{e(({activeStreams:x,streams:b})=>({streams:{...b,[m]:{...b[m],promise:null,abortController:null}},activeStreams:x.filter(_=>_!==m)}),void 0,"cleanupBackwardsCompatibleStream")}),u.push(m),e({activeStreams:u,streams:{...d,[m]:h}},void 0,"createBackwardsCompatibleStream"),Yr.emit("created",{stream:h,query:n.query_str,params:n.params}),h.abortController?.signal.addEventListener("abort",()=>{Yr.emit("aborted",{stream:h})}),s&&e(x=>ZM(x,m,s).newState,void 0,"ingestPlaceholderChunk"),h},setMiddlewares:n=>{e(()=>({middlewares:[...Y$,...n]}))}}}),X7=Th("StreamState",()=>Po()(AMe(gte(YUe),{name:"StreamStore"}))),nf=X7.useSelector,Pie=X7.useStore,QUe=()=>{const e=Pie(),t=f.useMemo(()=>OUe(e.getState().actions.reconnectStream,{perMinute:20,perHour:120}),[e]);return f.useEffect(()=>{function n(){const o=e.getState(),l=new Set(o.activeStreams),c=new Set(Object.values(o.streams).filter(u=>l.has(u.id.description)).map(u=>u.entryId));Object.values(o.entries).forEach(u=>{u?.reconnectable&&l.size<Iie&&!c.has(u?.backend_uuid)&&t(u.backend_uuid)})}n();let r=setInterval(n,K$);function s(){clearInterval(r),n(),r=setInterval(n,K$)}function a(){clearInterval(r)}return window.addEventListener("online",s,!0),window.addEventListener("offline",a,!0),()=>{clearInterval(r),window.removeEventListener("online",s,!0),window.removeEventListener("offline",a,!0)}},[t,e]),null},Oie=A.memo(({children:e})=>i.jsxs(X7.Provider,{children:[i.jsx(QUe,{}),e]}));Oie.displayName="StreamStateProvider";const bLt=()=>nf(e=>e.actions.getEntryById),XUe=()=>nf(e=>e.actions.createBackwardsCompatibleStream),ZUe=()=>nf(e=>e.actions.reconnectStream),JUe=()=>nf(e=>e.actions.retryStream),eBe=()=>{const e=nf(t=>t.entries);return f.useCallback(t=>t?e[t]?.status===cr.COMPLETED:!1,[e])},Lie=e=>{const t=nf(s=>s.activeStreams),n=nf(s=>s.streams),r=Object.values(n).find(s=>s.id.description===e);return!!(r&&t.includes(r?.id.description))},Ia=()=>Pie(),tBe=()=>{const e=Ia();return f.useCallback(n=>{for(const r of n){if(e.getState().entries[r.backend_uuid])continue;const a=!r.reconnectable;e.setState(o=>AA(o,{...r,status:a?r.status===cr.BLOCKED?cr.BLOCKED:cr.COMPLETED:cr.PENDING,final:a,final_sse_message:a},{streamId:r.frontend_uuid??dr()}),void 0,"ingestInitialEntries")}},[e])},Die=()=>{const e=Ia();return f.useCallback((t,n)=>{t&&e.setState(r=>{const s=r.entries[t],a=Q7(r,t);if(a&&a.promise&&a.abortController&&!a.abortController.signal.aborted&&ee.error("Attempting to mutate entries while stream is active"),!s||!n)return r;const o=n(s);return o?{...r,entries:{...r.entries,[t]:o}}:r},void 0,"mutateEntry")},[e])},nBe=()=>{const e=Ia();return f.useCallback((t,n,{terminateStream:r=!0}={})=>{t&&e.setState(s=>{if(!t)return s;zUe(s,t)&&r&&ee.error("Attempting to mutate entries while stream is active");const o=s.threads.findIndex(p=>p.id===t);if(o===-1)return s;const l=s.threads[o];if(!l)return s;const u=l.entryIds.map(p=>s.entries[p]).filter(p=>p!=null),d=n?.(u);if(!d)return s;const m=Array.from(s.threads);return m.splice(o,1,{...l,entryIds:d.map(p=>p.backend_uuid)}),{...s,entries:{...s.entries,...d.reduce((p,h)=>(p[h.backend_uuid]=h,p),{})},threads:m}},void 0,"mutateEntries")},[e])};function _Lt(e){const t=Ia();return Q7(t.getState(),e)}function rBe(e){const t=Ia(),n=Object.values(t.getState().erroredStreams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===e)return a}}const Fie=A.memo(({middlewares:e})=>{const t=Ia();return f.useLayoutEffect(()=>{t.getState().actions.setMiddlewares(e)},[e,t]),null});Fie.displayName="MiddlewareRegistry";function Z7(){const e=Ia();return f.useCallback(t=>e.getState().streams[t]?.timer,[e])}function Uie(){const e=Ia();return f.useCallback(()=>e.getState().activeStreams.length>0,[e])}const U_=e=>e?{author_id:ZFe(e),author_image:eUe(e),author_username:JFe(e),bookmarkState:aUe(e),collection:sUe(e),contextUUID:GFe(e),expiry_time:cUe(e)??void 0,first_query:YFe(e),focus:QFe(e),frontendContextUUID:qFe(e),mode:nUe(e)??void 0,parent_info:tUe(e)??void 0,personalized:rUe(e)??void 0,privacy_state:uUe(e)??void 0,rwToken:hie({backend_uuid:e.backend_uuid,read_write_token:e.read_write_token,context_uuid:e.context_uuid}),sources:XFe(e)??void 0,text_completed:!1,thread_access:oUe(e)??void 0,thread_url_slug:iUe(e),title:KFe(e),updated_datetime:lUe(e)}:tae,jA=e=>({forkCount:e?.fork_count??0,likeCount:e?.like_count??0,viewCount:e?.view_count??0,userLikes:e?.user_likes??!1}),Bie={fork_count:0,like_count:0,view_count:0,user_likes:!1};function jg({entries:e,threads:t,streams:n},r,s){const a=r?n[r]:void 0;if(a&&a.threadId&&(s=a.threadId),s){const o=t.find(l=>l.id===s);if(o){const l=o.entryIds.map(c=>e[c]).filter(c=>c!=null);return a&&!a.entryId&&a.placeholderChunk&&l.push(a.placeholderChunk),{results:l,currentStreamId:r,currentThreadId:s}}}return{results:a?.placeholderChunk?[a.placeholderChunk]:[],currentStreamId:r,currentThreadId:s}}const sBe=({streamStore:e})=>{const t=Po()((r,s)=>({results:[],resultsLength:0,firstResult:void 0,lastResult:void 0,inFlight:!1,inFlightLatest:!1,inFlightEntry:void 0,isReadOnly:!1,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},actions:{setResults:a=>{const o=a[0],l=jA(o?.social_info??Bie),c={inFlight:a.some(u=>un.isStatusPending(u)),inFlightLatest:a.length>0&&un.isStatusPending(a[a.length-1]),inFlightEntry:a.find(u=>un.isStatusPending(u))};r({results:a,firstResult:o,lastResult:a[a.length-1],inFlight:c.inFlight,inFlightLatest:c.inFlightLatest,inFlightEntry:c.inFlightEntry,socialStats:l,resultsLength:a.length},void 0)},setCurrentStreamId:a=>{const o=s(),l=jg(e.getState(),a,o.currentThreadId);o.actions.setResults(l.results),r({currentStreamId:l.currentStreamId,currentThreadId:l.currentThreadId},void 0)},clearCurrentStreamId:()=>{r({currentStreamId:void 0},void 0);const a=s(),o=jg(e.getState(),void 0,a.currentThreadId);a.actions.setResults(o.results),r({currentStreamId:o.currentStreamId,currentThreadId:o.currentThreadId},void 0)},setCurrentThreadId:a=>{r({currentThreadId:a},void 0);const o=s(),l=o.currentStreamId,c=Object.values(e.getState().streams).find(d=>d.threadId===a);c?c.id.description!==l&&o.actions.setCurrentStreamId(c.id.description):o.actions.clearCurrentStreamId();const u=jg(e.getState(),s().currentStreamId,a);o.actions.setResults(u.results),r({currentStreamId:u.currentStreamId,currentThreadId:u.currentThreadId},void 0)},clearCurrentThreadId:()=>{r({currentThreadId:void 0},void 0);const a=s(),o=jg(e.getState(),a.currentStreamId,void 0);a.actions.setResults(o.results),r({currentStreamId:o.currentStreamId,currentThreadId:o.currentThreadId},void 0)}}})),n=e.subscribe(({entries:r,threads:s,streams:a})=>jg({entries:r,threads:s,streams:a},t.getState().currentStreamId,t.getState().currentThreadId),r=>{t.getState().actions.setResults(r.results),t.setState({currentStreamId:r.currentStreamId,currentThreadId:r.currentThreadId},void 0)});return{store:t,clearSubscriptions:()=>{n()}}},{Context:aBe,useStore:oBe,useSelector:iBe,useTrackedState:lBe}=f1("ResultsStore"),cBe=iBe,Ht=lBe,uBe=({children:e})=>{const t=Ia(),[{store:n,clearSubscriptions:r}]=f.useState(()=>sBe({streamStore:t}));return f.useEffect(()=>r,[r]),i.jsx(aBe.Provider,{value:n,children:e})},dBe=()=>{const{firstResult:e}=Ht();return f.useMemo(()=>U_(e),[e])};function fBe(e){return e.results.find(t=>un.isStatusPending(t))}const mBe=e=>$e({queryKey:["navigationResults",e],queryFn:()=>Promise.resolve({}),enabled:!1}),VS=()=>{const e=oBe(),t=nBe();return f.useCallback(n=>{const r=e.getState().currentThreadId;t(r,n)},[t,e])};function Oo(){const{firstResult:{backend_uuid:e,context_uuid:t,read_write_token:n}={}}=Ht();return f.useMemo(()=>hie({context_uuid:t,read_write_token:n}),[t,n,e])}const an=["list_user_collections",{}],Zl="list_collection_threads",Dc="__temp__";async function pBe({contextUUID:e,updatedAccess:t,rwToken:n,callback:r,reason:s}){try{const o=await(await ne.POST("/rest/thread/update_thread_access",s,{body:{context_uuid:e??"",updated_access:t,read_write_token:n??""}}))?.data;r?.(o?.access)}catch(a){ee.error(a),r?.(a)}}var Rg={},Q$;function hBe(){if(Q$)return Rg;Q$=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.parse=o,Rg.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function o(p,h){const g=new a,y=p.length;if(y<2)return g;const v=h?.decode||d;let x=0;do{const b=p.indexOf("=",x);if(b===-1)break;const _=p.indexOf(";",x),w=_===-1?y:_;if(b>w){x=p.lastIndexOf(";",b-1)+1;continue}const C=l(p,x,b),S=c(p,b,C),E=p.slice(C,S);if(g[E]===void 0){let M=l(p,b+1,w),k=c(p,w,M);const T=v(p.slice(M,k));g[E]=T}x=w+1}while(x<y);return g}function l(p,h,g){do{const y=p.charCodeAt(h);if(y!==32&&y!==9)return h}while(++h<g);return g}function c(p,h,g){for(;h>g;){const y=p.charCodeAt(--h);if(y!==32&&y!==9)return h+1}return g}function u(p,h,g){const y=g?.encode||encodeURIComponent;if(!e.test(p))throw new TypeError(`argument name is invalid: ${p}`);const v=y(h);if(!t.test(v))throw new TypeError(`argument val is invalid: ${h}`);let x=p+"="+v;if(!g)return x;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);x+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);x+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);x+="; Path="+g.path}if(g.expires){if(!m(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);x+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(x+="; HttpOnly"),g.secure&&(x+="; Secure"),g.partitioned&&(x+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return x}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return s.call(p)==="[object Date]"}return Rg}hBe();var JM={};const gBe=(e,t)=>{try{let n=new URL("https://www.perplexity.ai");return typeof window>"u"?t&&JM.NEXTAUTH_UNSAFE_TRUST_HOST_HEADERS?n=new URL(`https://${t}`):JM.NEXTAUTH_URL&&(n=new URL(JM.NEXTAUTH_URL)):n=new URL(window.location.href),new URL(e,n).hostname===n.hostname}catch(n){return ee.warn(n),!1}},yBe=({redirect:e,hostname:t})=>{const n=typeof e=="string"?e:e?.[0];return!n||typeof n!="string"?"/":gBe(n,t)?n:"/"},J7="pplx.chosen-locale",Zw="pplx.is-incognito",Vie="pplx.is-discover-interest-box-dismissed",Wie="pplx.is-enterprise-ad-dismissed",RA="pplx.la-status",vBe="pplx.visitor-id",$ie="pplx.mweb-splash-page-dismissed",Hie="pplx.is-autosuggest-disabled",zie="pplx.homepage-widgets-disabled",Gie="pplx.source-selection-v3",qie="pplx.sports-ios-notification-cta",X$="pplx.prefers-metric",Kie="pplx.welcome-back-gate-impressions",Yie="pplx.share-gate-impressions",Qie="pplx.sidebar-connectors-ad-dismissed",Xie="pplx.is-student-referral-banner-dismissed",Zie="pplx.is-student-space-upsell-dismissed",Jie="pplx.student-space-upsell-impressions",ele="pplx.default-search-session",tle="pplx.utm-source",nle="pplx.pt",rle="pplx.personal-search-badge-seen",sle="pplx.tasks-settings-seen",IA="pplx.search-mode",ale="pplx.search-models-v4",ole="pplx.max-assistant-mode-enabled",Sr=400,xBe=7;function e4(...e){WS("[email_signin_flow] ",...e)}function WS(...e){const t=new Date().toISOString();ee.log(`[${t}] `,...e)}function ile(...e){const t=new Date().toISOString();ee.warn(`[${t}] `,...e)}const bBe=e=>{Qt(J7,e,{expires:Sr})},_Be=()=>Tn(J7),wBe=()=>{Hd(J7)},CBe=e=>{Qt(Zw,String(e),{})},SBe=(e,t)=>{Qt($ie,String(e),{expires:t})},EBe=e=>{Qt(Vie,String(e),{expires:Sr})},MBe=e=>{Qt(RA,e,{})},kBe=e=>{Qt(Wie,String(e),{expires:Sr})},TBe=e=>{Qt(Hie,String(e),{expires:Sr})},NBe=e=>{Qt(zie,String(e),{expires:Sr})},ABe=e=>{Qt(Kie,String(e),{expires:Sr})},jBe=e=>{Qt(Yie,String(e),{expires:Sr})},RBe=e=>{Qt(qie,String(e),{expires:Sr})},t4=(e,t)=>{const n=`${Gie}-${t}`;Qt(n,JSON.stringify(e),{expires:xBe})},IBe=e=>{const t=`${Gie}-${e}`,n=Tn(t);return n?JSON.parse(n):null},PBe=()=>!(Tn(E0)??!0),m1=()=>Tn(vBe)??null,OBe=e=>{Qt(Qie,String(e),{expires:Sr})},LBe=()=>Tn("pplx.has-discovered-space-mentions")==="true",DBe=()=>{Qt("pplx.has-discovered-space-mentions","true",{expires:Sr})},FBe=e=>{Qt(Xie,String(e),{expires:4})},UBe=e=>{Qt(Zie,String(e),{expires:Sr})},BBe=e=>{Qt(Jie,String(e),{expires:Sr})},lle=()=>fte().queryCount>30,eP=()=>{const e=Tn(rle);if(!e)return{sidebar:!1,settingsSidebar:!1,personalize:!1};try{return JSON.parse(e)}catch{return{sidebar:!1,settingsSidebar:!1,personalize:!1}}},VBe=(e,t)=>{const r={...eP(),[e]:t};Qt(rle,JSON.stringify(r),{expires:Sr})},WBe=()=>Tn(sle)==="true",$Be=e=>{Qt(sle,String(e),{expires:Sr})},HBe=e=>{Qt(ele,e)},zBe=()=>Tn(ele),GBe=e=>{Qt(tle,e)},qBe=()=>Tn(tle),KBe=()=>Tn(nle),YBe=e=>{Qt(nle,e)};var QBe={};const wLt=async({reason:e})=>{const{data:t,error:n}=await ne.GET("/rest/enterprise/previous-subscription",e,{timeoutMs:Pe({productionMs:2e3})});if(n)throw new Ee("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t},XBe=async({source:e,locale:t,headers:n,reason:r})=>{try{const{data:s,error:a}=await ne.POST("/rest/enterprise/customer-portal",r,{body:{origin:e,locale:t},timeoutMs:7500,headers:{...n,"Content-Type":"application/json"}});if(a)throw new Ee("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});if(s.status!=="success")throw new Ee("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});return s.url}catch(s){return ee.error(s),null}},ZBe=async({interval:e,subscriptionTier:t,origin:n,locale:r,reason:s})=>{const a=yS(),o=m1();try{const{data:l,error:c}=await ne.POST("/rest/enterprise/checkout-session",s,{body:{referral_code:null,discount_code:null,origin:n,tier:e,locale:r,visitor_id:o,subscription_tier:t},timeoutMs:3500,headers:{...a?{"Screen-Dimensions":a}:{}}});if(c)throw new Ee("API_CLIENTS_ERROR",{cause:c,details:{reason:s}});return l}catch(l){return ee.error(l),null}},JBe=async({interval:e,subscriptionTier:t,origin:n,locale:r,collectionMethod:s,billingAddress:a,reason:o})=>{const l=yS();try{const{data:c,error:u}=await ne.POST("/rest/enterprise/subscription",o,{body:{collection_method:s,origin:n,locale:r,subscription_interval:e,subscription_tier:t,billing_address:a},timeoutMs:1e4,headers:{...l?{"Screen-Dimensions":l}:{}}});if(u)throw new Ee("API_CLIENTS_ERROR",{cause:u,details:{reason:o}});return c}catch(c){return ee.error(c),null}};var Z$;(function(e){e.ON_PLATFORM="on_platform",e.OFF_PLATFORM="off_platform"})(Z$||(Z$={}));const $S=async({headers:e,reason:t})=>{const n={organization:void 0,org_user:void 0,is_in_organization:!1};try{const{data:r,error:s}=await ne.GET("/rest/enterprise/user/organization",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(s)throw new Ee("API_CLIENTS_ERROR",{cause:s,details:{reason:t}});return r.status!=="success",r}catch(r){return ee.error(r),n}},cle=async({email:e,headers:t,useNextAuthService:n,reason:r})=>{if(!e)throw new Error("No email");const s=e.split("@"),a=s.length>=2?s[s.length-1]:null;if(!a)throw new Error(`No domain extracted from ${e}`);return eVe({domain:a,headers:t,useNextAuthService:n,reason:r})},eVe=async({domain:e,headers:t,useNextAuthService:n,reason:r})=>{let s;try{if(n){const o=`/rest/nextauth/organization/domain/${e}`,l=QBe.PPL_NEXTAUTH_SERVER_URL;s=await sr({headers:t,urlPath:o,timeoutMs:3e3,numRetries:1,baseUrlOverride:l,reason:r})}else{const o=`/rest/enterprise/organization/domain/${e}`;s=await sr({headers:t,urlPath:o,timeoutMs:3e3,numRetries:1,reason:r})}const a=await s.json();if(a.status!=="success")throw new Error("Failed to get organization from domain");return a?.organization??null}catch(a){return ee.error("Failed to get organization from domain",a),null}},CLt=async({headers:e,query:t,reason:n})=>{try{const r=t?.["user-limit"]??2e4,s=t?.["user-offset"]??0,a=t?.["invite-limit"]??2e4,o=t?.["invite-offset"]??0,{data:l,error:c}=await ne.GET("/rest/enterprise/user/organization/users",n,{params:{query:{"user-limit":r,"user-offset":s,"invite-limit":a,"invite-offset":o}},headers:e,timeoutMs:Pe({productionMs:2e3,clientSideMs:1e4}),numRetries:1});if(c)throw new Ee("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});if(l.status!=="success")throw new Ee("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});return{userList:l?.user_list??[],hasNextUserPage:l?.has_next_user_page??!1,totalUsers:l?.total_users??0,inviteList:l?.invite_list??[],hasNextInvitePage:l?.has_next_invite_page??!1,totalInvites:l?.total_invites??0}}catch(r){return ee.error("Failed to get organization users",r),null}},tVe=20,nVe=1,SLt=async({page:e=nVe,limit:t=tVe,emailFilter:n,reason:r,headers:s})=>{const a=await ne.GET("/rest/enterprise/user/organization/members",r,{params:{query:{page:e,limit:t,"email-filter":n??null}},timeoutMs:Pe({productionMs:5e3}),headers:s});if(a.error)throw a.error;return a.data},ule=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/enterprise/organization/subscription/refresh",t,{headers:e,timeoutMs:4e3});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return{subscriptionStatus:n?.subscription_status??null}}catch(n){return ee.error(n),null}},ELt=async({reason:e})=>{try{const{data:t,error:n}=await ne.GET("/rest/enterprise/user/organization/seat-info",e,{timeoutMs:2e3});if(n)throw new Ee("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t}catch(t){return ee.error(t),null}};async function MLt({orgUuid:e,headers:t,reason:n,prefersDark:r}){const s=await ne.GET("/rest/enterprise/organization/{org_uuid}/insights/embed-url",n,{params:{path:{org_uuid:e},query:{prefersDark:r}},headers:t,timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s.error){ee.error("Failed to fetch Omni insights embed URL",{url:`/rest/enterprise/organization/${e}/insights/embed-url`,error:s.error,status:s.response.status,statusText:s.response.statusText});return}return s.data}const kLt=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/enterprise/organization/premium-secure-eligibility",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ee.error(n),null}},TLt=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ne.POST("/rest/enterprise/organization/premium-secure-billing-update",t,{headers:{...e,"Content-Type":"application/json"},timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ee.error(n),null}},NLt=async({headers:e,reason:t})=>{try{const n=await ne.GET("/rest/enterprise/organization/subscription-info",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(n.error)throw n.error;return n.data}catch(n){return ee.error("Failed to get org subscription info",n),null}},rVe=async({uuid:e,success:t,reason:n})=>{try{if((await ne.POST("/rest/sse/perplexity_connector_auth_response",n,{body:{result:{tool_uuid:e,success:t}},backOffTime:100,numRetries:1,headers:{"Content-Type":"application/json"}})).data?.status!=="success")throw new Error("Failed to post perplexity connector auth response");return!0}catch(r){return ee.error("Failed to post perplexity connector auth response",r),!1}},ALt=e=>["get_prices",{subscription_tier:e}],HS=()=>["get_user_settings",{}],jLt=()=>["get_user_site_instructions",{}],PA=()=>["get_user_profile",{}],sVe=()=>["get_user_promotions",{}],aVe=()=>["get_government_origin",{}],oVe=e=>["get_special_profile",{profile_name:e}],iVe=()=>["get_homepage_upsells",{}],lVe=()=>["get_ntp_upsells",{}],RLt=e=>["get_related_pages",{uuid:e}],Vl=(e="you")=>["list_feed",{topic:e}],dle=()=>["discover_topics",{}],Nh=()=>["userOrgData",{}],tP=e=>["get_collection",{collection_slug:e.slice(-22)}],ILt=()=>["shoppingOrders",{}],Jw=()=>["userTryOnPhoto",{}],Zu=()=>["shoppingTryOnBackgroundGeneration"],n4=e=>["productTryOn",{productImageUrl:e}],e2="getOrganizationUsers",PLt=e=>e?[e2,{query:e}]:[e2],OLt=e=>e?[e2,"members",e]:[e2,"members"],cVe=e=>["get_thread_by_uuid",{uuid:e}],uVe=e=>["get_article_by_uuid",{uuid:e}],LLt=e=>["get_article_by_slug",{slug:e}],r4=()=>["customer_shopping_info",{}],nP=e=>["articleResults",{frontend_context_uuid:e}],J$=e=>["article-slug",e],dVe=(e,t=!1)=>[t?"list_file_directory_infinite":"list_file_directory",e.file_repository_type,e.owner_id],zS=(e,t,n,r=0,s,a=!1)=>[...dVe({file_repository_type:e,owner_id:t},a),n,...a?[]:[r],s],fle="connector-files",mle="connector-files-infinite",ple=(e,t=!1)=>[t?mle:fle,e],fVe=e=>["get_sharepoint_sites_infinite",e??{}],DLt=()=>["get_filters",{}],rP=e=>e?["memories",e]:["memories"],FLt=(e={})=>["hotelBookings",e],ULt=e=>["pro_perks_codes",e],BLt=()=>["pro_perks"],VLt=()=>["customer_billing_info",{}],WLt=()=>["travel-tile-data"],sP=(e,t)=>["file_exists",e,...t?[t]:[]],ib=e=>["download-image-url",...e?[e]:[]],$Lt=()=>["notifications-preferences"],fm=e=>["memory-feedback",e],mm=e=>["entry-feedback",e],aP=e=>["user-task",e],B_=e=>["user-tasks",...e?[e]:[]],mVe=()=>["academic-tile-data"],pVe=()=>["academic-primer-queries"],hVe=()=>["check-edu-institution"],yy=()=>["list_spaces_mentions"],gVe=()=>["upgrade-subscription-preview"],yVe=()=>["task_shortcuts_mentions"],HLt=e=>["task_shortcuts_copy",e],vVe=e=>["task_shortcuts_paste",e],Gc=()=>["app-notifications"],xVe=()=>[...Gc(),"unread-count"],zLt=()=>["braintree-subscription-details"],hle="get_repository_upload_states",bVe=e=>[hle,e],GLt=()=>["get_seat_info"],_Ve={orgUser:void 0,organization:void 0,isEnterprise:!1,refetch:Rn,isLoading:!1,isSuccess:!1};function gn({shouldRefetchOnMount:e=!0,reason:t}){const n=Qe(),{data:r,refetch:s,fetchStatus:a,isSuccess:o}=$e({enabled:n,queryKey:Nh(),queryFn:()=>$S({reason:t}),placeholderData:_Ve,refetchOnMount:e});return f.useMemo(()=>({orgUser:r?.org_user,isAdmin:r?.org_user?.role==="ADMIN",organization:r?.organization,isEnterprise:r?.is_in_organization??!1,refetch:s,isLoading:a==="fetching",isSuccess:o}),[r?.is_in_organization,r?.org_user,r?.organization,a,o,s])}function oP({shouldRefetchOnMount:e=!0,reason:t}){const n=Qe(),{data:r,isFetching:s}=$e({enabled:n,queryKey:Nh(),queryFn:()=>$S({reason:t}),refetchOnMount:e});return f.useMemo(()=>({isEnterprise:r?.is_in_organization??!1,isFetching:s}),[r?.is_in_organization,s])}function wVe({reason:e}){const t=Qe(),n=f.useRef(void 0),{data:r,status:s}=$e({enabled:t,queryKey:Nh(),queryFn:()=>$S({reason:e})}),a=f.useMemo(()=>s==="success"&&r?.organization?.uuid?(n.current=r.organization.uuid,r.organization.uuid):n.current??void 0,[r,s]);return f.useMemo(()=>({uuid:a}),[a])}const gle=({currentAccessLevel:e,onClick:t,isCollection:n,isPage:r,spaceIsOrgPinned:s=!1,addOrgPinnedSpace:a,deleteOrgPinnedSpace:o,reason:l,hideLabels:c=!1,isCollectionOwner:u=!1})=>{const{$t:d}=Q(),m=Q(),{device:{isIOS:p,isAndroid:h}}=Et(),{isEnterprise:g,organization:y}=gn({reason:l}),{firstResult:{collection_info:v,sources:{sources:x}={}}={}}=Ht(),b=n?y?.settings?.public_collection_sharing_allowed??!0:r?y?.settings?.public_page_sharing_allowed??!0:y?.settings?.public_thread_sharing_allowed??!0,_=x?.includes($i.factset),w=f.useMemo(()=>n&&u?[{label:m.formatMessage({defaultMessage:"Share via link",id:"oJFaPCNcIw"}),text:m.formatMessage({defaultMessage:"Link share",id:"5CBpesC8V9"}),onClick:()=>o?.(),active:!s},{label:m.formatMessage({defaultMessage:"Pinned for everyone in org",id:"BCLJqQMHbj"}),text:m.formatMessage({defaultMessage:"Pinned",id:"fWZYP5U4xZ"}),onClick:()=>a?.(),active:s}]:void 0,[a,o,m,n,u,s]),C=f.useMemo(()=>[{label:c?void 0:"",text:d({defaultMessage:"Owner Only",id:"RUPRkBML7X"}),icon:mp,show:!1,accessLevel:gt.OWNER_ONLY},{label:c?void 0:d({defaultMessage:"Only the author can view",id:"ZKx/MMPXAk"}),text:d(n?{defaultMessage:"Only invited members",id:"mm5vL8ueCo"}:{defaultMessage:"Private",id:"viXE3205/2"}),icon:mp,show:!r,onClick:()=>t(gt.PRIVATE_READ),active:e===gt.PRIVATE_READ,accessLevel:gt.PRIVATE_READ,testId:"access-level-private"},{label:c?void 0:d({defaultMessage:"Anyone in your Space can view",id:"8i8H9TisQU"}),text:d({defaultMessage:"Space",id:"0ah2udCSKF"}),icon:Ca,onClick:()=>t(gt.COLLECTION_READ),active:e===gt.COLLECTION_READ,show:!n&&!r&&!!v?.uuid,accessLevel:gt.COLLECTION_READ,testId:"access-level-space"},{label:c?void 0:d({defaultMessage:"Anyone in your organization can view",id:"T2yBpbP3mu"}),text:d({defaultMessage:"Anyone in my org with the link",id:"ah50gEdYbM"}),icon:bi,onClick:()=>t(gt.ORG_READ),active:e===gt.ORG_READ,show:g&&(!r||b),accessLevel:gt.ORG_READ,testId:"access-level-org",subMenu:w},{label:c?void 0:d({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),text:d({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),icon:p?mh:h?VC:Oy,onClick:()=>t(gt.PUBLIC_READ),active:e===gt.PUBLIC_READ,show:b&&!_,accessLevel:gt.PUBLIC_READ,testId:"access-level-public"}],[d,v?.uuid,e,_,c,h,n,g,p,r,t,b,w]),S=C.find(E=>E.accessLevel===e)||null;return f.useMemo(()=>({accessLevelMenuItems:C,selectedAccessMenuItem:S}),[C,S])},qLt=e=>e?[gt.ORG_READ,gt.PUBLIC_READ,gt.PUBLIC_PUBLISHED].includes(e):!1,CVe=e=>e?[gt.OWNER_ONLY,gt.PRIVATE_READ].includes(e):!0,yle=e=>e?[gt.PUBLIC_READ,gt.PUBLIC_PUBLISHED,gt.ORG_READ,gt.COLLECTION_READ].includes(e):!1,SVe=e=>e?[gt.PUBLIC_READ,gt.PUBLIC_PUBLISHED].includes(e):!1,EVe=e=>{switch(e){case gt.PUBLIC_PUBLISHED:case gt.PUBLIC_READ:return Oy;case gt.COLLECTION_READ:return Ca;case gt.ORG_READ:return bi;case gt.PRIVATE_READ:case gt.OWNER_ONLY:return mp;default:return null}},eH=e=>{switch(e){case gt.PUBLIC_READ:case gt.PUBLIC_PUBLISHED:return"public";case gt.ORG_READ:return"organization";case gt.COLLECTION_READ:return"collection";case gt.PRIVATE_READ:case gt.OWNER_ONLY:return"private";default:return"private"}};function iP({threadAccess:e,contextUUID:t,rwToken:n,collectionSlug:r,reason:s}){const{trackEvent:a}=Me(),o=Qe(),l=mt(),c=VS(),u=yle(e),d=f.useCallback((h,g)=>{!t||!n||!o||e===h||pBe({contextUUID:t,updatedAccess:h,rwToken:n,reason:s,callback:y=>{if(y===h){if(c(v=>{if(v)return v.map(x=>({...x,thread_access:y}))}),e&&a("thread privacy changed",{oldPrivacy:eH(e),newPrivacy:eH(y),contextUUID:t}),r){const v=[Zl,{collection_slug:r.slice(-22)}];l.invalidateQueries({queryKey:v})}g?.(y)}}})},[t,n,e,o,c,a,r,l,s]),m=f.useCallback(h=>{!o||u||(a("click share thread to space"),d(gt.COLLECTION_READ,h))},[o,u,d,a]),p=f.useCallback(h=>{!o||!u||(a("click make thread private"),d(gt.PRIVATE_READ,h))},[o,u,d,a]);return f.useMemo(()=>({isShareable:u,currentAccess:e,onShareThreadToSpace:m,onMakeThreadPrivate:p,handleAccessChange:d}),[u,d,p,m,e])}const MVe=async(e,t,n,r)=>await kVe({headers:{},reason:"Report Bug",bugText:e,url:t,email:n,category:r}),kVe=async({headers:e,reason:t,bugText:n,url:r,email:s,category:a})=>{try{const o=await ne.POST("/webhooks/slack-web-debugger/web",t,{body:{bug_text:n,url:r,email:s??"",category:a??""},headers:e,timeoutMs:1e4});return o.data?o.data:null}catch(o){return ee.error("Failed to make bug report request",o),null}},TVe=e=>{if(!e.includes("/sidecar/"))return e;const t=new URL(e);return t.searchParams.delete("erp"),t.pathname=t.pathname.replace("/sidecar",""),t.toString()};function OA(){return OA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OA.apply(null,arguments)}function NVe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var AVe=f.useLayoutEffect,jVe=function(t){var n=A.useRef(t);return AVe(function(){n.current=t}),n},tH=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},RVe=function(t,n){var r=A.useRef();return A.useCallback(function(s){t.current=s,r.current&&tH(r.current,null),r.current=n,n&&tH(n,s)},[n])},nH={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},IVe=function(t){Object.keys(nH).forEach(function(n){t.style.setProperty(n,nH[n],"important")})},rH=IVe,Us=null,sH=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function PVe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Us||(Us=document.createElement("textarea"),Us.setAttribute("tabindex","-1"),Us.setAttribute("aria-hidden","true"),rH(Us)),Us.parentNode===null&&document.body.appendChild(Us);var s=e.paddingSize,a=e.borderSize,o=e.sizingStyle,l=o.boxSizing;Object.keys(o).forEach(function(p){var h=p;Us.style[h]=o[h]}),rH(Us),Us.value=t;var c=sH(Us,e);Us.value=t,c=sH(Us,e),Us.value="x";var u=Us.scrollHeight-s,d=u*n;l==="border-box"&&(d=d+s+a),c=Math.max(d,c);var m=u*r;return l==="border-box"&&(m=m+s+a),c=Math.min(m,c),[c,u]}var aH=function(){},OVe=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},LVe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],DVe=!!document.documentElement.currentStyle,FVe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=OVe(LVe,n),s=r.boxSizing;if(s==="")return null;DVe&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:o}},UVe=FVe;function lP(e,t,n){var r=jVe(n);f.useLayoutEffect(function(){var s=function(o){return r.current(o)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var BVe=function(t,n){lP(document.body,"reset",function(r){t.current.form===r.target&&n(r)})},VVe=function(t){lP(window,"resize",t)},WVe=function(t){lP(document.fonts,"loadingdone",t)},$Ve=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],HVe=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,a=t.minRows,o=t.onChange,l=o===void 0?aH:o,c=t.onHeightChange,u=c===void 0?aH:c,d=NVe(t,$Ve),m=d.value!==void 0,p=f.useRef(null),h=RVe(p,n),g=f.useRef(0),y=f.useRef(),v=function(){var _=p.current,w=r&&y.current?y.current:UVe(_);if(w){y.current=w;var C=PVe(w,_.value||_.placeholder||"x",a,s),S=C[0],E=C[1];g.current!==S&&(g.current=S,_.style.setProperty("height",S+"px","important"),u(S,{rowHeight:E}))}},x=function(_){m||v(),l(_)};return f.useLayoutEffect(v),BVe(p,function(){if(!m){var b=p.current,_=b.value;requestAnimationFrame(function(){_!==b.value&&v()})}}),VVe(v),WVe(v),f.createElement("textarea",OA({},d,{onChange:x,ref:h}))},vle=f.forwardRef(HVe);const xle=A.memo(({text:e})=>i.jsx(L,{variant:"tiny",children:i.jsx("span",{className:"text-caution",children:e})}));xle.displayName="FormError";const cP=A.memo(({label:e,subtitle:t,errorText:n,isOptional:r=!1,withMargin:s=!0,optionalLabel:a="optional",testId:o})=>e||n||t?i.jsxs("div",{className:U({"mb-sm":s}),"data-test-id":o,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[(e||t)&&i.jsx("label",{htmlFor:e,children:i.jsx("div",{className:"gap-y-xs flex flex-col",children:e&&i.jsxs("div",{className:"gap-x-xs flex",children:[i.jsx(L,{variant:"smallBold",className:"select-none",children:e}),r&&i.jsx(L,{variant:"small",color:"light",children:`(${a})`})]})})}),n&&i.jsx(xle,{text:n})]}),t&&i.jsx(L,{variant:"small",color:"light",children:t})]}):null);cP.displayName="FormItemHeader";function Ah(e){const t=f.useRef(void 0);return f.useEffect(()=>{t.current=e},[e]),t.current}class So{static isEnterKey(t){return t.code==="Enter"||t.key==="Enter"||t.keyCode===13}static isEnterKeyWithoutShift(t){return this.isEnterKey(t)&&!t.shiftKey}static isArrowDown(t){return t.key==="ArrowDown"}static isArrowUp(t){return t.key==="ArrowUp"}static isEscapeKey(t){return t.key==="Escape"}static isTabKey(t){return t.key==="Tab"}static isOnlySlashKey(t){return t.key==="/"&&!t.metaKey&&!t.ctrlKey&&!t.altKey}static isCtrlOrCmdJ(t){return(t.metaKey||t.ctrlKey)&&t.key==="j"}}const Z0=(e,t)=>{if(So.isEnterKeyWithoutShift(e)){if(t.isComposing||e.keyCode===229){e.preventDefault();return}if(t.isMobileUserAgent||t.allowEnterNewlines)return;e.preventDefault()}t.onKeyDown?.(e)},uP=e=>{e(!0)},dP=e=>{setTimeout(()=>{e(!1)},0)};var Ld;(function(e){e.INLINE="inline",e.LABEL="label"})(Ld||(Ld={}));const zVe=({onClear:e})=>i.jsx(Te,{icon:Lt,pill:!0,onClick:e,size:Wt.small}),GVe=["email","tel"],ra=A.memo(({type:e,className:t,wrapperClassName:n,value:r,name:s,maxLength:a,errorText:o,errorPlacement:l=Ld.INLINE,disabled:c=!1,required:u=!1,autoFocus:d=!1,placeholder:m="",rightItems:p=le,onChange:h,onClear:g,onBlur:y,onFocus:v,onKeyDown:x,isLoading:b,inlineEditBlock:_,label:w,subtitle:C,isOptional:S,isMobileUserAgent:E,labelMargin:M=!0,testId:k,variant:T,pill:j=!0,disable1pass:R,ClearIcon:O=zVe,enterKeyHint:P,size:N,ref:I,colorVariant:D="default",min:F,max:B,spellCheck:V})=>{const $=Ah(c),G=f.useRef(null),[X,Y]=f.useState(!1),[W,H]=f.useState(!1),Z=f.useRef(X);Z.current=X,f.useEffect(()=>{!E&&d&&G.current?.focus()},[E,G,d]),f.useEffect(()=>{$!==c&&!c&&!E&&d&&setTimeout(()=>{G.current?.focus()},200)});const re=f.useMemo(()=>U({"border-r mr-sm pr-xs border-subtler":p.length!=0}),[p.length]),q=f.useMemo(()=>{const Ce=(()=>{switch(D){case"default":return"bg-base dark:bg-subtler";case"offsetPlus":return"bg-offsetPlus";default:$t(D)}})(),ke=U("w-full outline-none focus:outline-none focus:ring-subtler font-sans flex items-center","text-foreground caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",Ce,"border border-subtler  focus:ring-1 placeholder-quieter","duration-200 transition-all",{"ring-subtler ring-1":X,"rounded-t-[32px] rounded-b-[32px]":j,"rounded-lg":!j},t),Re=U({"py-xs px-sm text-xs placeholder:text-xs":N==="xs","py-sm px-sm text-sm placeholder:text-xs":N==="sm","py-lg px-xl text-lg placeholder:text-base":N==="lg","pl-[40px]":e==="search","!font-mono md:text-base":T==="monospace","!text-3xl !placeholder:text-3xl !font-medium":T==="page-title","py-sm md:text-sm px-md placeholder:text-sm":!N&&!T}),je=U({"pr-xs":p.length===0&&N==="xs","pr-sm":p.length===0&&N==="sm","pr-md":p.length===0&&!N,"pr-lg":p.length===0&&N==="lg","pr-[49px] md:pr-[59px]":p.length===1,"pr-[128px] md:pr-[138px]":p.length===2});return U(ke,Re,je)},[X,j,t,N,e,T,p.length,D]),J=!!o,te=!J&&!!a&&!!r&&r.length>a,se=f.useMemo(()=>e==="search"?i.jsx("div",{className:"absolute left-3 flex items-center rounded-l-lg",children:i.jsx(L,{color:"light",children:i.jsx(me,{icon:Ts})})}):null,[e]),de=f.useMemo(()=>{const Ce=l===Ld.INLINE&&J;return i.jsxs("div",{className:U("right-sm gap-sm absolute flex items-center rounded-full"),children:[b?i.jsx(L,{color:"light",className:"mr-xs",children:i.jsx(as,{})}):null,Ce&&i.jsx(z,{className:"mr-sm",children:i.jsx(L,{color:"red",variant:"tiny",children:o})}),te&&i.jsx(z,{className:"mr-sm",children:a&&r&&i.jsx(L,{color:"red",variant:"tiny",children:a-r.length})}),g&&i.jsx("div",{className:re,children:i.jsx(O,{onClear:g,inputValue:r})}),p.map((ke,Re)=>i.jsx(ge,{...ke.buttonProps,size:ke.buttonProps.size,disabled:ke.buttonProps.disabled||J||te,pill:!0},Re))]})},[l,J,b,o,te,a,r,g,re,O,p]),fe=f.useCallback(()=>{if(G.current){const Ce=G.current.value.length;G.current.focus();try{G.current.setSelectionRange(Ce,Ce)}catch{}}},[]),ve=f.useCallback(Ce=>{v?.(Ce.nativeEvent),Y(!0)},[v]),ue=f.useCallback(Ce=>{y?.(Ce.nativeEvent),Y(!1)},[y]);f.useImperativeHandle(I,()=>{const Ce=G.current;return Ce.focusAtEnd=fe,Ce.isFocused=()=>Z.current,Ce.inLine=()=>!0,Ce.append=ke=>{G.current&&(G.current.value+=ke)},Ce.scrollToEnd=()=>{G.current&&(G.current.scrollTop=G.current.scrollHeight)},Ce.trim=()=>{G.current&&(G.current.value=G.current.value.trim())},Ce},[fe]),f.useEffect(()=>{d&&!E&&fe()},[d,fe,E]);const ie=f.useCallback(Ce=>{h?.(Ce.target.value)},[h]),be=f.useCallback(Ce=>{Z0(Ce.nativeEvent,{isMobileUserAgent:E,isComposing:W,onKeyDown:x})},[x,E,W]),Se=l===Ld.LABEL?o:void 0;return i.jsxs("div",{className:n,children:[i.jsx(cP,{label:w,subtitle:C,isOptional:S,errorText:Se,withMargin:M}),i.jsx("div",{className:"rounded-full",children:i.jsxs("div",{className:"relative flex items-center",children:[i.jsx("input",{type:e,ref:G,autoFocus:d,placeholder:m,disabled:c,value:r,required:u,name:s??w,onChange:ie,onKeyDown:be,onCompositionStart:()=>uP(H),onCompositionEnd:()=>dP(H),onBlur:ue,onFocus:ve,className:q,autoComplete:GVe.includes(e??"")?e:"off","data-test-id":k,"data-1p-ignore":R,enterKeyHint:P,min:F,max:B,spellCheck:V}),se,de]})}),_&&i.jsx("div",{className:"mt-sm flex justify-end",children:_})]})});ra.displayName="Input";function fP(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var GS="Switch",[qVe,KLt]=Ra(GS),[KVe,YVe]=qVe(GS),ble=f.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...m}=e,[p,h]=f.useState(null),g=In(t,_=>h(_)),y=f.useRef(!1),v=p?d||!!p.closest("form"):!0,[x,b]=_i({prop:s,defaultProp:a??!1,onChange:u,caller:GS});return i.jsxs(KVe,{scope:n,checked:x,disabled:l,children:[i.jsx(nn.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":Sle(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onClick:Pt(e.onClick,_=>{b(w=>!w),v&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),v&&i.jsx(Cle,{control:p,bubbles:!y.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});ble.displayName=GS;var _le="SwitchThumb",wle=f.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=YVe(_le,n);return i.jsx(nn.span,{"data-state":Sle(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});wle.displayName=_le;var QVe="SwitchBubbleInput",Cle=f.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=f.useRef(null),l=In(o,a),c=fP(n),u=dS(t);return f.useEffect(()=>{const d=o.current;if(!d)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const g=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(g)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Cle.displayName=QVe;function Sle(e){return e?"checked":"unchecked"}var XVe=ble,ZVe=wle;const Ao=f.memo(({active:e=!1,disabled:t,id:n,text:r,testId:s,onChange:a,size:o="default",switchProps:l,ref:c,...u})=>{const d=U("rounded-full relative bg-base dark:bg-inverse dark:text-foreground",o==="default"?"size-4":"size-2.5","before:content-[''] before:duration-150 dark:before:shadow-md before:absolute before:inset-0 before:rounded-full before:bg-base before:dark:bg-white",{"before:opacity-20":t}),m=U("flex rounded-full duration-150 shadow-inset-xs",o==="default"?"w-9  p-three":"w-5 h-3.5 p-0.5","data-[state=checked]:justify-end","data-[state=checked]:bg-super dark:data-[state=checked]:bg-super/85","data-[state=unchecked]:bg-inverse/45 dark:data-[state=unchecked]:bg-inverse/20",{"opacity-50":t});return i.jsxs("div",{className:U("group/switch gap-sm flex cursor-default items-center",{"cursor-pointer":!t}),"data-testid":s,ref:c,...u,children:[i.jsx(XVe,{asChild:!0,checked:e,onCheckedChange:t?void 0:a,id:n,disabled:t,className:"group/switch gap-sm flex items-center","data-testid":s,style:{WebkitTapHighlightColor:"transparent"},...l,children:i.jsx(xe.button,{className:m,layout:!0,layoutRoot:!0,children:i.jsx(ZVe,{asChild:!0,children:i.jsx(xe.div,{className:d,layout:"position",transition:{layout:{type:"spring",duration:.2,bounce:.3}}})})})}),r&&i.jsx(L,{variant:"smallBold",className:U("mr-sm whitespace-nowrap duration-150",{"cursor-pointer":!t},{"group-hover/switch:text-foreground":!e&&!t}),htmlFor:n,as:"label",color:e?"super":"light",children:r})]})});Ao.displayName="Switch";const JVe=({wrapperClassName:e,variant:t="default",size:n="default",errorText:r,className:s,value:a,maxLength:o,errorMessage:l,disabled:c=!1,hasShadow:u=!1,autoFocus:d=!1,placeholder:m="",rightItems:p=le,onChange:h,onClear:g,onClick:y,onBlur:v,onFocus:x,onKeyDown:b,onPaste:_,isLoading:w,inlineEditBlock:C,label:S,subtitle:E,isOptional:M,minRows:k,isMobileUserAgent:T,allowEnterNewlines:j=!1,testId:R,textAreaClassname:O,ref:P})=>{const N=Ah(c),I=f.useRef(null),[D,F]=f.useState(!1),[B,V]=f.useState(!1),$=f.useRef(D);$.current=D,f.useEffect(()=>{!T&&d&&I.current?.focus()},[T,I,d]),f.useEffect(()=>{N!==c&&!c&&!T&&d&&setTimeout(()=>{I.current?.focus()},200)});const G=f.useMemo(()=>U({"border-r mr-sm pr-xs border-subtler":p.length!=0}),[p.length]),X=U("overflow-auto max-h-[50vh] outline-none w-full flex items-center","text-foreground font-sans resize-none","bg-transparent placeholder-quieter","caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",O),Y=f.useMemo(()=>{const ie=(()=>{switch(t){case"offsetPlus":return"bg-offsetPlus";case"default":return"bg-base dark:bg-subtler";default:$t(t)}})(),be=U("w-full focus:ring-subtler flex items-center",ie,"border border-subtler  focus:ring-1 rounded-md","duration-200 transition-all",{"ring-subtler ring-1":D,"shadow-sm":u},s),Se=U({"py-sm text-sm px-md":n==="default","text-base p-md pb-xl":n==="large"}),Ce=U({"pr-md":p.length===0});return U(be,Se,Ce)},[D,u,s,n,p.length,t]),W=l!==void 0,H=!W&&!!o&&!!a&&a.length>o,Z=f.useMemo(()=>i.jsxs("div",{className:"right-sm gap-sm mb-xs pb-xs absolute bottom-0 flex items-center rounded-full",children:[w?i.jsx(L,{color:"light",children:i.jsx(me,{icon:PMe,className:"aspect-square animate-spin"})}):null,W&&i.jsx(z,{className:"mr-sm",children:i.jsx(L,{color:"red",variant:"tiny",children:l})}),H&&i.jsx(z,{className:"mr-sm",children:o&&a&&i.jsx(L,{color:"red",variant:"tiny",children:o-a.length})}),g!==void i.jsx("div",{className:G,children:i.jsx(Te,{icon:Lt,pill:!0,onClick:g,size:Wt.small})}),p.map((ie,be)=>ie.type=="toggleButton"?i.jsx(Ao,{...ie.buttonProps,disabled:ie.buttonProps.disableOverride?!1:ie.buttonProps.disabled||W||H},be):i.jsx(ge,{...ie.buttonProps,size:Wt.small,disabled:ie.buttonProps.disabled||W||H,pill:!0},be))]}),[l,w,o,g,p,a,G,W,H]),re=f.useCallback(()=>{if(I.current){const ie=I.current.value.length;I.current.focus(),I.current.setSelectionRange(ie,ie)}},[]),q=f.useCallback(ie=>{x?.(ie.nativeEvent),F(!0)},[x]),J=f.useCallback(ie=>{v?.(ie.nativeEvent),F(!1)},[v]),te=f.useCallback(ie=>{y?.(ie.nativeEvent)},[y]),se=f.useCallback(ie=>{h?.(ie.target.value)},[h]),de=f.useCallback(ie=>{Z0(ie.nativeEvent,{isMobileUserAgent:T,isComposing:B,allowEnterNewlines:j,onKeyDown:b})},[b,B,T,j]),fe=f.useCallback(()=>uP(V),[V]),ve=f.useCallback(()=>dP(V),[V]),ue=f.useCallback(ie=>{_?.(ie.nativeEvent)},[_]);return f.useImperativeHandle(P,()=>{const ie=I.current;return ie.focusAtEnd=re,ie.isFocused=()=>$.current,ie.append=be=>{I.current&&(I.current.value+=be)},ie.scrollToEnd=()=>{I.current&&(I.current.scrollTop=I.current.scrollHeight)},ie.trim=()=>{I.current&&(I.current.value=I.current.value.trim())},ie},[re]),f.useEffect(()=>{d&&!T&&re()},[d,re,T]),i.jsxs("div",{"data-test-id":R,children:[i.jsx(cP,{label:S,subtitle:E,isOptional:M,errorText:r}),i.jsx("div",{className:U("rounded-3xl",e),children:i.jsxs("div",{className:"relative flex items-center",children:[i.jsx("div",{className:Y,children:i.jsx(vle,{ref:I,autoFocus:d,placeholder:m,disabled:c,minRows:k,value:a,onClick:te,onChange:se,name:S,onKeyDown:de,onBlur:J,onCompositionStart:fe,onCompositionEnd:ve,onFocus:q,onPaste:ue,className:X,autoComplete:"off","data-testid":R})}),i.jsx("div",{className:"absolute bottom-0 m-px flex justify-between rounded-b-md px-[6px]",style:{width:"calc(100% - 2px)"},children:Z})]})}),C&&i.jsx("div",{className:"mt-sm flex justify-end",children:C})]})},cl=A.memo(JVe),eWe=new Set(["super","textColor","max","orange"]),tWe=new Set(["red"]),nWe=e=>eWe.has(e)?"defaultInverted":tWe.has(e)?"white":e==="maxBorder"?"max":e==="superBorder"?"super":"default",Ele=A.memo(({text:e,variant:t="super",boxProps:n,textProps:r})=>{const s=nWe(t);return i.jsx(z,{variant:t,...n,className:U("px-xs rounded-badge -mt-px box-border inline-flex",n?.className),children:i.jsx(L,{variant:"tiny",className:"leading-4",color:s,inline:!0,...r,children:e})})});Ele.displayName="Badge";const rWe=768,Mle=`(max-width: ${rWe}px)`;function oH(){return typeof window>"u"?!1:window.matchMedia(Mle).matches}function Ls(e={}){const t=Nt(),{device:{isWindowsApp:n}}=Et(),r=f.useMemo(()=>!!(n&&t?.includes(G0)),[n,t]),{evaluateOnInit:s=!1}=e,a=kle(),o=sWe(),[l,c]=f.useState(()=>a||o?!0:s?oH():!1);return f.useEffect(()=>{if(typeof window>"u")return;const u=window.matchMedia(Mle);function d(){c(u.matches)}return u.addEventListener("change",d),()=>{u.removeEventListener("change",d)}},[a]),f.useEffect(()=>{s||c(oH())},[s]),l&&!r}function kle(e=!1){const{device:{isMobile:t}}=Et();return t??e}function sWe(e=!1){const{device:{isAndroid:t}}=Et();return t??e}function ye(e={}){const t=Nt(),{device:{isWindowsApp:n}}=Et(),r=Ls(e),s=f.useMemo(()=>!!(n&&t?.includes(G0)),[n,t]),a=f.useMemo(()=>r&&!s,[r,s]),o=kle();return f.useMemo(()=>({isMobileStyle:a,isMobileUserAgent:o}),[a,o])}const jh=A.memo(({children:e,className:t,disabled:n,onClick:r,onMouseDown:s,onMouseEnter:a,onMouseMove:o,testId:l,rounded:c,href:u,focused:d,disableHoverStyles:m=!1,target:p="_blank",tooltipText:h,tooltipLayout:g="right",tooltipDelayDuration:y,active:v=!1,role:x="menuitem"})=>{const b=f.useRef(null),_=Ls(),w=i.jsx("div",{className:U("relative select-none rounded-lg transition-all duration-300","px-sm py-1.5 md:h-full",{"hover:bg-subtler cursor-pointer":!n&&!m,"cursor-pointer":!n&&m,rounded:c,"bg-subtler":d}),children:e}),C=U("group/item md:h-full",t);f.useEffect(()=>{b.current&&d&&b.current.scrollIntoView({behavior:"instant",block:"nearest"})},[d]);const S=x==="menuitemradio"||x==="menuitemcheckbox"?v?"true":"false":void 0;return u&&!n?i.jsx(Ye,{href:u,target:p,className:C,onClick:r,"data-testid":l,children:w}):i.jsx(pn,{tooltipText:h,showTooltip:!_&&!!h,tooltipLayout:g,delayDuration:y,offset:12,asChild:!0,children:i.jsx("div",{role:x,"aria-checked":S,ref:b,"data-testid":l,className:C,onClick:n?void 0:r,onMouseDown:n?void 0:s,onMouseEnter:n?void 0:a,onMouseMove:n?void 0:o,children:w})})});jh.displayName="MenuItemWrapper";const aWe=({icon:e,avatar:t,destructive:n})=>{if(t)return t;if(!e)return null;const r=U({"!text-caution":n},"opacity-90");return i.jsx(me,{icon:e,className:r,size:"sm"})},oWe=/\bgap(-[xy])?-/,iWe={[Wt.small]:"extraSmall",[Wt.tiny]:"tiny"},Rh=A.memo(({customDescriptionNode:e,customTextNode:t,text:n,description:r,icon:s,avatar:a,label:o,badge:l,link:c,onLinkClick:u,size:d=Wt.small,color:m="default",badgeVariant:p="super",destructive:h,leftElement:g,rightElement:y,bottomElement:v,textTrailingElement:x,className:b="",preserveLeftIconSpace:_=!1,textClassName:w})=>{const C=s||a;return i.jsxs("div",{className:U("flex",b,oWe.test(b)?"":"gap-sm"),children:[(C||_)&&i.jsx("div",{className:"flex",children:i.jsx(L,{color:m,className:"pt-two flex size-5 justify-center leading-none",children:!_||C?i.jsx(aWe,{icon:s,avatar:a,destructive:h}):null})}),g,i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex flex-col gap-y-0.5",children:[t||i.jsxs(L,{variant:iWe[d]??"baseSemi",color:m,className:U("flex items-center gap-x-1.5",{"!text-caution":h}),children:[i.jsx("span",{className:w,children:n}),x,l&&i.jsx(Ele,{text:l,variant:p})]}),e||r&&i.jsx(L,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:r}),c&&i.jsx(L,{variant:"tinyRegular",color:"super",onClick:u,children:c}),v]}),o&&i.jsx(L,{className:"mt-one whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o})]}),y]})});Rh.displayName="BaseMenuItem";const Tle=A.memo(e=>{const{active:t,show:n=!0,className:r,rounded:s,color:a="default",badgeVariant:o="super",disabled:l,href:c,onClick:u,onMouseDown:d,onMouseEnter:m,onMouseMove:p,testId:h,rightElement:g,focused:y,preserveRightElementSpace:v=!0,disableHoverStyles:x=!1,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:C,role:S}=e;if(!n)return null;let E=a;l?E="ultraLight":t&&(E="super");const M=g??i.jsx(L,{color:t?"super":E,className:"size-5",children:i.jsx(me,{icon:Rr,size:"sm",className:t?"opacity-100":"opacity-0","aria-hidden":!t})});return i.jsx(jh,{className:r,disabled:l,onClick:u,onMouseDown:d,onMouseEnter:m,onMouseMove:p,testId:h,rounded:s,href:c,focused:y,disableHoverStyles:x,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:C,role:S,active:t,children:i.jsx(Rh,{...e,color:E,badgeVariant:o,rightElement:v?M:g})})});Tle.displayName="DefaultMenuItem";const Nle=A.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:o,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,disableHoverStyles:p=!1,tooltipText:h,tooltipLayout:g,tooltipDelayDuration:y,iconVariant:v="checkbox",disableActiveStyles:x=!1}=e;let b=r;s?b="ultraLight":(m||d)&&!x&&(b="super");const _=f.useMemo(()=>v==="check"?i.jsx(L,{color:d&&!x?"super":b,className:"size-5",children:i.jsx(me,{icon:Rr,size:"sm",className:d?"opacity-100":"opacity-0","aria-hidden":!d})}):i.jsx(L,{color:d&&!x?"super":b,children:i.jsx(me,{icon:d?bte:OMe,size:"sm"})}),[b,d,v,x]);return i.jsx(jh,{className:t,disabled:s,onClick:a,onMouseDown:o,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:p,tooltipText:h,tooltipLayout:g,tooltipDelayDuration:y,children:i.jsx(Rh,{...e,color:b,rightElement:_})})});Nle.displayName="MultiSelectMenuItem";const Ale=A.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:o,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,rightElement:p,disableHoverStyles:h=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v}=e;let x=r;s?x="ultraLight":(m||d)&&(x="super");const b=f.useMemo(()=>i.jsxs("div",{className:"gap-x-sm flex items-start pt-0.5",children:[p,i.jsx(Ao,{active:d,disabled:s,size:"small"})]}),[s,p,d]);return i.jsx(jh,{className:t,disabled:s,onClick:a,onMouseDown:o,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v,children:i.jsx(Rh,{...e,color:x,rightElement:b})})});Ale.displayName="ToggleMenuItem";const jle=A.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:o,onMouseEnter:l,onMouseMove:c,testId:u,selected:d,active:m,showIconLeft:p=!1,disableHoverStyles:h=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v}=e;let x=r;(m||d)&&(x="super");const b=i.jsx(L,{color:d?x:"ultraLight",className:U("flex pt-0.5 leading-none",{"opacity-50":s}),children:i.jsx(me,{icon:d?xN:LMe,size:"sm"})});return i.jsx(jh,{className:t,disabled:s,onClick:a,onMouseDown:o,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v,children:i.jsx(Rh,{...e,rightElement:p?void 0:b,leftElement:p?b:void 0})})});jle.displayName="RadioMenuItem";const Rle=A.memo(e=>{const{text:t,show:n,className:r}=e;return n?i.jsxs(i.Fragment,{children:[i.jsx(z,{className:U("sm:mx-sm my-sm border-b first:hidden",r)}),t&&i.jsx(z,{variant:"background",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:i.jsx(L,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});Rle.displayName="MenuItemSeparator";const Ile=A.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onMouseDown:a,onMouseEnter:o,onMouseMove:l,testId:c,submenu:u,active:d,disableHoverStyles:m=!1,isSubmenuOpen:p,onSubmenuOpen:h,onSubmenuClose:g,menuWidth:y="200px"}=e;let v=r;s?v="ultraLight":d&&(v="super");const x=f.useMemo(()=>i.jsx(L,{color:"light",children:i.jsx(me,{icon:_r,size:"sm"})}),[]),b=f.useMemo(()=>({className:"min-w-0",style:{width:y}}),[y]),_=f.useMemo(()=>({hasInteractiveContent:!0}),[]);return i.jsx(Jt,{isOpen:p,items:u,placement:"right-end",onOpen:h,onClose:g,isMobileStyle:!1,hoverOpen:!0,boxProps:b,popoverProps:_,children:i.jsx(jh,{className:t,disabled:s,onMouseDown:a,onMouseEnter:o,onMouseMove:l,testId:c,rounded:n,disableHoverStyles:m,children:i.jsx(Rh,{...e,color:v,rightElement:x})})})});Ile.displayName="NestedMenuItem";const Tp=A.memo(e=>{switch(e.type){case"default":{const{type:t,...n}=e;return i.jsx(Tle,{...n,role:n.role||"menuitem"})}case"multiSelect":{const{type:t,...n}=e;return i.jsx(Nle,{...n,role:"menuitemcheckbox"})}case"toggle":{const{type:t,...n}=e;return i.jsx(Ale,{...n,role:"menuitemcheckbox"})}case"radio":{const{type:t,...n}=e;return i.jsx(jle,{...n,role:"menuitemradio"})}case"separator":{const{type:t,...n}=e;return i.jsx(Rle,{...n})}case"nested":{const{type:t,...n}=e;return i.jsx(Ile,{...n})}}});Tp.displayName="MenuItem";var lWe=f.createContext(void 0);function qS(e){const t=f.useContext(lWe);return e||t||"ltr"}function cWe(e,[t,n]){return Math.min(n,Math.max(t,e))}function uWe(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var mP="ScrollArea",[Ple,YLt]=Ra(mP),[dWe,Lo]=Ple(mP),Ole=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=e,[l,c]=f.useState(null),[u,d]=f.useState(null),[m,p]=f.useState(null),[h,g]=f.useState(null),[y,v]=f.useState(null),[x,b]=f.useState(0),[_,w]=f.useState(0),[C,S]=f.useState(!1),[E,M]=f.useState(!1),k=In(t,j=>c(j)),T=qS(s);return i.jsx(dWe,{scope:n,type:r,dir:T,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:m,onContentChange:p,scrollbarX:h,onScrollbarXChange:g,scrollbarXEnabled:C,onScrollbarXEnabledChange:S,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:E,onScrollbarYEnabledChange:M,onCornerWidthChange:b,onCornerHeightChange:w,children:i.jsx(nn.div,{dir:T,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});Ole.displayName=mP;var Lle="ScrollAreaViewport",Dle=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,o=Lo(Lle,n),l=f.useRef(null),c=In(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(nn.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Dle.displayName=Lle;var Ml="ScrollAreaScrollbar",Fle=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lo(Ml,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return f.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(fWe,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(mWe,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(Ule,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(pP,{...r,ref:t}):null});Fle.displayName=Ml;var fWe=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lo(Ml,e.__scopeScrollArea),[a,o]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Os,{present:n||a,children:i.jsx(Ule,{"data-state":a?"visible":"hidden",...r,ref:t})})}),mWe=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lo(Ml,e.__scopeScrollArea),a=e.orientation==="horizontal",o=YS(()=>c("SCROLL_END"),100),[l,c]=uWe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let m=u[d];const p=()=>{const h=u[d];m!==h&&(c("SCROLL"),o()),m=h};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,a,c,o]),i.jsx(Os,{present:n||l!=="hidden",children:i.jsx(pP,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Pt(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Pt(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Ule=f.forwardRef((e,t)=>{const n=Lo(Ml,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,o]=f.useState(!1),l=e.orientation==="horizontal",c=YS(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Np(n.viewport,c),Np(n.content,c),i.jsx(Os,{present:r||a,children:i.jsx(pP,{"data-state":a?"visible":"hidden",...s,ref:t})})}),pP=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Lo(Ml,e.__scopeScrollArea),a=f.useRef(null),o=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=$le(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function m(p,h){return bWe(p,o.current,l,h)}return n==="horizontal"?i.jsx(pWe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,h=iH(p,l,s.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?i.jsx(hWe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,h=iH(p,l);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),pWe=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Lo(Ml,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),u=In(t,c,a.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Vle,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":KS(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,m)=>{if(a.viewport){const p=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),zle(p,m)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:n2(o.paddingLeft),paddingEnd:n2(o.paddingRight)}})}})}),hWe=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Lo(Ml,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),u=In(t,c,a.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Vle,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":KS(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,m)=>{if(a.viewport){const p=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),zle(p,m)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:n2(o.paddingTop),paddingEnd:n2(o.paddingBottom)}})}})}),[gWe,Ble]=Ple(Ml),Vle=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:m,...p}=e,h=Lo(Ml,n),[g,y]=f.useState(null),v=In(t,k=>y(k)),x=f.useRef(null),b=f.useRef(""),_=h.viewport,w=r.content-r.viewport,C=ba(d),S=ba(c),E=YS(m,10);function M(k){if(x.current){const T=k.clientX-x.current.left,j=k.clientY-x.current.top;u({x:T,y:j})}}return f.useEffect(()=>{const k=T=>{const j=T.target;g?.contains(j)&&C(T,w)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[_,g,w,C]),f.useEffect(S,[r,S]),Np(g,E),Np(h.content,E),i.jsx(gWe,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:ba(a),onThumbPointerUp:ba(o),onThumbPositionChange:S,onThumbPointerDown:ba(l),children:i.jsx(nn.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:Pt(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),x.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),M(k))}),onPointerMove:Pt(e.onPointerMove,M),onPointerUp:Pt(e.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),t2="ScrollAreaThumb",Wle=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ble(t2,e.__scopeScrollArea);return i.jsx(Os,{present:n||s.hasThumb,children:i.jsx(yWe,{ref:t,...r})})}),yWe=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=Lo(t2,n),o=Ble(t2,n),{onThumbPositionChange:l}=o,c=In(t,m=>o.onThumbChange(m)),u=f.useRef(void 0),d=YS(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const m=a.viewport;if(m){const p=()=>{if(d(),!u.current){const h=_We(m,l);u.current=h,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[a.viewport,d,l]),i.jsx(nn.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Pt(e.onPointerDownCapture,m=>{const h=m.target.getBoundingClientRect(),g=m.clientX-h.left,y=m.clientY-h.top;o.onThumbPointerDown({x:g,y})}),onPointerUp:Pt(e.onPointerUp,o.onThumbPointerUp)})});Wle.displayName=t2;var hP="ScrollAreaCorner",vWe=f.forwardRef((e,t)=>{const n=Lo(hP,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(xWe,{...e,ref:t}):null});vWe.displayName=hP;var xWe=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Lo(hP,n),[a,o]=f.useState(0),[l,c]=f.useState(0),u=!!(a&&l);return Np(s.scrollbarX,()=>{const d=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(d),c(d)}),Np(s.scrollbarY,()=>{const d=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(d),o(d)}),u?i.jsx(nn.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function n2(e){return e?parseInt(e,10):0}function $le(e,t){const n=e/t;return isNaN(n)?0:n}function KS(e){const t=$le(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function bWe(e,t,n,r="ltr"){const s=KS(n),a=s/2,o=t||a,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,m=r==="ltr"?[0,d]:[d*-1,0];return Hle([c,u],m)(e)}function iH(e,t,n="ltr"){const r=KS(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=cWe(e,c);return Hle([0,o],[0,l])(u)}function Hle(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function zle(e,t){return e>0&&e<t}var _We=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function YS(e,t){const n=ba(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Np(e,t){const n=ba(t);fc(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var wWe=Ole,CWe=Dle,lH=Fle,cH=Wle;const ul=A.memo(({children:e,orientation:t="vertical",showScrollIndicator:n=!0,thumbClassName:r="",className:s,viewportRef:a,viewportClassName:o,showIndicatorOnHover:l=!0,onScroll:c})=>{const d="before:content-[''] before:absolute before:top-[50%] before:left-[50%] before:translate-x-[-50%] before:translate-y-[-50%] before:w-[100%] before:h-[100%] before:min-w-[10px] before:min-h-[10px]"+" rounded-full bg-subtle duration-quick relative",m=U("flex flex-col p-px duration-150",{"data-[state=visible]:opacity-100":n,"pointer-events-none":!n,"opacity-0":l,"opacity-100":!l});return i.jsxs(wWe,{className:U("w-full overflow-hidden",s),children:[i.jsx(CWe,{className:U("size-full",o),ref:a,onScroll:c,children:e}),["vertical","both"].includes(t)&&i.jsx(lH,{forceMount:!0,orientation:"vertical",className:m,children:i.jsx(cH,{className:`!w-[5px] ${d} ${r}`})}),["horizontal","both"].includes(t)&&i.jsx(lH,{forceMount:!0,orientation:"horizontal",className:m,children:i.jsx(cH,{className:`!h-[5px] ${d} ${r}`})})]})}),uH="z-[1] pointer-events-none absolute top-0 w-[50px] h-full transition-all duration-500 from-base to-transparent",SWe=f.memo(({scrollRef:e,threshold:t=10})=>{const[n,r]=f.useState(!0),[s,a]=f.useState(!1);return f.useEffect(()=>{const o=()=>{if(e.current){const c=e.current.scrollLeft,u=e.current.scrollWidth,d=e.current.clientWidth,m=u-d;r(c<=t),a(c>=m-t)}},l=e.current;return l?.addEventListener("scrollend",o),o(),()=>{l?.removeEventListener("scrollend",o)}},[e,t]),i.jsxs(i.Fragment,{children:[i.jsx("div",{className:U(uH,"left-0 bg-gradient-to-r",{"opacity-0":n})}),i.jsx("div",{className:U(uH,"right-0 bg-gradient-to-l",{"opacity-0":s})})]})});SWe.displayName="ScrollAreaGradient";const EWe=A.memo(({scrollRef:e,buttonProps:t,children:n,className:r})=>{const s=f.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft-e.current?.scrollWidth/3,behavior:"smooth"})},[e]),a=f.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft+e.current?.scrollWidth/3,behavior:"smooth"})},[e]);return i.jsxs(z,{className:r,children:[i.jsx(Te,{pill:!0,icon:Wv,onClick:s,...t}),n,i.jsx(Te,{pill:!0,icon:_r,onClick:a,...t})]})});EWe.displayName="ScrollAreaArrows";ul.displayName="ScrollArea";const vu=A.memo(({items:e,grid:t,cols:n=1,disableScrollArea:r=!1,menuItemClassName:s="",disableHoverStyles:a=!1})=>{const o=f.useMemo(()=>t&&n>1?{display:"grid",gridTemplateColumns:`repeat(${n}, minmax(0, 1fr))`,gap:"1px"}:void 0,[t,n]),l=({children:c})=>o?i.jsx("div",{role:"menu",style:o,children:c}):r?i.jsx("div",{role:"menu",className:"p-xs flex flex-col gap-px",children:c}):i.jsx(ul,{showIndicatorOnHover:!1,className:"p-xs",children:i.jsx("div",{role:"menu",className:"flex flex-col gap-px",children:c})});return i.jsx(l,{children:e.map((c,u)=>c.type==="separator"?i.jsx(Tp,{...c},u):i.jsx(Tp,{className:s,disableHoverStyles:a,...c},u))})});vu.displayName="Menu";const Gle={...CR},MWe=Gle.useInsertionEffect,kWe=MWe||(e=>e());function TWe(e){const t=f.useRef(()=>{});return kWe(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var r2=typeof document<"u"?f.useLayoutEffect:f.useEffect;function LA(){return LA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LA.apply(this,arguments)}let dH=!1,NWe=0;const fH=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+NWe++;function AWe(){const[e,t]=f.useState(()=>dH?fH():void 0);return r2(()=>{e==null&&t(fH())},[]),f.useEffect(()=>{dH=!0},[]),e}const jWe=Gle.useId,qle=jWe||AWe,RWe=f.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:a,shift:o}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:m,stroke:p,d:h,style:{transform:g,...y}={},...v}=t,x=qle(),[b,_]=f.useState(!1);if(r2(()=>{if(!s)return;No(s).direction==="rtl"&&_(!0)},[s]),!s)return null;const[w,C]=r.split("-"),S=w==="top"||w==="bottom";let E=m;(S&&o!=null&&o.x||!S&&o!=null&&o.y)&&(E=null);const M=d*2,k=M/2,T=l/2*(u/-8+1),j=c/2*u/4,R=!!h,O=E&&C==="end"?"bottom":"top";let P=E&&C==="end"?"right":"left";E&&b&&(P=C==="end"?"left":"right");const N=a?.x!=null?E||a.x:"",I=a?.y!=null?E||a.y:"",D=h||"M0,0"+(" H"+l)+(" L"+(l-T)+","+(c-j))+(" Q"+l/2+","+c+" "+T+","+(c-j))+" Z",F={top:R?"rotate(180deg)":"",left:R?"rotate(90deg)":"rotate(-90deg)",bottom:R?"":"rotate(180deg)",right:R?"rotate(-90deg)":"rotate(90deg)"}[w];return f.createElement("svg",LA({},v,{"aria-hidden":!0,ref:n,width:R?l:l+M,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[P]:N,[O]:I,[w]:S||R?"100%":"calc(100% - "+M/2+"px)",transform:[F,g].filter(B=>!!B).join(" "),...y}}),M>0&&f.createElement("path",{clipPath:"url(#"+x+")",fill:"none",stroke:p,strokeWidth:M+(h?0:1),d:D}),f.createElement("path",{stroke:M&&!h?v.fill:"none",d:D}),f.createElement("clipPath",{id:x},f.createElement("rect",{x:-k,y:k*(R?-1:1),width:l+M,height:l})))});function IWe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const PWe=f.createContext(null),OWe=f.createContext(null),LWe=()=>{var e;return((e=f.useContext(PWe))==null?void 0:e.id)||null},DWe=()=>f.useContext(OWe);function FWe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=qle(),a=f.useRef({}),[o]=f.useState(()=>IWe()),l=LWe()!=null,[c,u]=f.useState(r.reference),d=TWe((h,g,y)=>{a.current.openEvent=h?g:void 0,o.emit("openchange",{open:h,event:g,reason:y,nested:l}),n?.(h,g,y)}),m=f.useMemo(()=>({setPositionReference:u}),[]),p=f.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return f.useMemo(()=>({dataRef:a,open:t,onOpenChange:d,elements:p,events:o,floatingId:s,refs:m}),[t,d,p,o,s,m])}function UWe(e){e===void 0&&(e={});const{nodeId:t}=e,n=FWe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[a,o]=f.useState(null),[l,c]=f.useState(null),d=s?.domReference||a,m=f.useRef(null),p=DWe();r2(()=>{d&&(m.current=d)},[d]);const h=Ise({...e,elements:{...s,...l&&{reference:l}}}),g=f.useCallback(_=>{const w=Ys(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;c(w),h.refs.setReference(w)},[h.refs]),y=f.useCallback(_=>{(Ys(_)||_===null)&&(m.current=_,o(_)),(Ys(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Ys(_))&&h.refs.setReference(_)},[h.refs]),v=f.useMemo(()=>({...h.refs,setReference:y,setPositionReference:g,domReference:m}),[h.refs,y,g]),x=f.useMemo(()=>({...h.elements,domReference:d}),[h.elements,d]),b=f.useMemo(()=>({...h,...r,refs:v,elements:x,nodeId:t}),[h,v,x,t,r]);return r2(()=>{r.dataRef.current.floatingContext=b;const _=p?.nodesRef.current.find(w=>w.id===t);_&&(_.context=b)}),f.useMemo(()=>({...h,context:b,refs:v,elements:x}),[h,v,x,b])}class BWe{static detectOverflowOptions={padding:8};static offsetMiddleware=$I({mainAxis:4,crossAxis:0});static shiftMiddleware=Pse({limiter:Ose(),...this.detectOverflowOptions});static flipMiddleware=Lse(this.detectOverflowOptions);static sizeMiddleware(t={matchTargetWidth:!1},n=!0){return Dse({...this.detectOverflowOptions,apply({availableHeight:r,rects:s,elements:a}){n&&(a.floating.style.maxHeight=`${r}px`),(t.matchTargetWidth??!0)&&(a.floating.style.width=`${s.reference.width}px`)}})}static defaultMiddleWare(t={avoidCollisions:!0,matchTargetWidth:!1}){const n=t.avoidCollisions??!0,r=t.avoidPositionCollisions!==void 0?t.avoidPositionCollisions:n,s=t.avoidSizeCollisions!==void 0?t.avoidSizeCollisions:n;return[this.offsetMiddleware,r&&this.shiftMiddleware,r&&this.flipMiddleware,this.sizeMiddleware({matchTargetWidth:t.matchTargetWidth},s)].filter(Boolean)}}const VWe=130,lo=A.memo(({content:e,contentClassName:t="",children:n,delayTime:r=200,isOpen:s,hoverOpen:a,placement:o="bottom-end",matchTargetWidth:l=!1,childrenClassName:c,testId:u,overlayProps:d,onOpen:m,onClose:p,disableAnimation:h,hasInteractiveContent:g=!1,avoidCollisions:y=!0,avoidPositionCollisions:v,avoidSizeCollisions:x,customFloatingUIOptions:b,disableShadow:_,floatingElementProps:w,arrowClassName:C,borderRadius:S="rounded-xl",sideOffset:E=4,forceDarkMode:M=!1})=>{const k=f.useRef(null),T=f.useMemo(()=>{const Se=BWe.defaultMiddleWare({avoidCollisions:y,avoidPositionCollisions:v,avoidSizeCollisions:x,matchTargetWidth:l});return E!==4&&(Se[0]=$I({mainAxis:E,crossAxis:0})),C&&Se.push(Fse({element:k})),Se},[y,v,x,l,C,E]),{refs:j,floatingStyles:R,placement:O,context:P}=UWe({strategy:"fixed",placement:o,middleware:T,whileElementsMounted:(...Se)=>jse(...Se),...b}),[N,I]=f.useState(!1),D=f.useRef(N),[F,B]=f.useState(!1),V=f.useRef(F),[$,G]=f.useState(!1),X=s!==void 0,[Y,W]=f.useState(!1),H=f.useMemo(()=>X?s:Y,[X,s,Y]),Z=f.useCallback(Se=>{Se.stopPropagation()},[]),re=f.useCallback(()=>{H||(m?.(),X||W(!0))},[X,H,m]),q=f.useCallback(()=>{G(Se=>H&&!Se?(p?.(),X||W(!1),h?!1:(setTimeout(()=>{G(!1)},VWe),!0)):Se)},[X,H,p,h]),J=f.useCallback(()=>{H?q():re()},[q,re,H]),te=f.useCallback(()=>{setTimeout(()=>{!V.current&&!D.current&&q()},r)},[r,q,V,D]);f.useEffect(()=>{if(!a||!H||$)return;const Se=setInterval(()=>{const Ce=j.reference.current,ke=j.floating.current,Re=Ce.matches(":hover"),je=ke.matches(":hover");!Re&&D.current&&fe(),!je&&V.current&&ue(),!Re&&!je&&te()},250);return()=>clearInterval(Se)},[$,H,te,a]);const se=f.useCallback(()=>{setTimeout(()=>{if(X&&p){p();return}q()},0)},[X,p,q]),de=f.useCallback(()=>{D.current=!0,I(!0),re()},[re]),fe=f.useCallback(()=>{D.current=!1,I(!1),te()},[te]),ve=()=>{V.current=!0,B(!0)},ue=f.useCallback(()=>{V.current=!1,B(!1),te()},[te]),ie=f.useCallback(Se=>{Se.stopPropagation(),J()},[J]),be=f.useMemo(()=>({transform:"translateY(-1px)"}),[]);return i.jsxs(i.Fragment,{children:[i.jsx("span",{onMouseEnter:a?de:void 0,onMouseLeave:a?fe:void 0,ref:j.setReference,onMouseDown:Z,onClick:a?void 0:ie,className:c,"data-test-id":u,children:n}),e?i.jsx(Sh,{isOpen:H||$,onClose:se,transparent:!0,childVariant:"clean",disableAnimation:h,delayClose:!1,...d,children:i.jsx("div",{className:"absolute inset-x-0 top-0","data-color-scheme":M?"dark":void 0,children:i.jsx("div",{className:"flex",ref:j.setFloating,onMouseEnter:a?ve:void 0,onMouseLeave:a?ue:void 0,onClick:Se=>{g&&Se.stopPropagation()},style:R,...w,children:i.jsxs(z,{variant:"background",className:U({"shadow-overlay":!_},"flex min-h-0 min-w-0","data-[placement=bottom-end]:origin-top-right data-[placement=bottom-start]:origin-top-left data-[placement=top-end]:origin-bottom-right data-[placement=top-start]:origin-bottom-left",{"duration-150":!h,"animate-out fade-out zoom-out-[0.97] ease-in":$&&!h,"p-xs animate-in fade-in zoom-in-[0.97] ease-out":!h},t,S),"data-placement":O,children:[e,C&&i.jsx(RWe,{ref:k,context:P,className:C,style:be})]})})})}):null]})});lo.displayName="Popover";const Jt=A.memo(({isOpen:e,hoverOpen:t=!1,children:n,items:r,placement:s,disabled:a=!1,grid:o,onOpen:l,title:c,onClose:u,testid:d,isMobileStyle:m,boxProps:p,modalProps:h,popoverProps:g,cols:y=1,footer:v=null,menuItemClassName:x="",contentClassName:b="",wrapperClassName:_,header:w,alwaysShowChildren:C,size:S,showFooterOnMobile:E=!1})=>{const[M,k]=f.useState(!1),T=e!==void 0,j=T?e:M,R=f.useCallback(()=>{if(!j&&!a){const D=l?.()??!0;!T&&D&&k(!0)}},[a,T,l,j]),O=f.useCallback(()=>{j&&!a&&(u?.(),T||k(!1))},[a,T,u,j]),P=f.useMemo(()=>r.map(D=>({...D,size:S??(m?Wt.regular:void 0),onClick:F=>{!a&&"onClick"in D&&(D.onClick?.(F),D.type==="toggle"||D.type==="multiSelect"||O())}})),[a,O,r,S,m]),N=f.useMemo(()=>i.jsx(z,{className:U("flex max-h-[80vh] min-h-0 min-w-[160px] flex-col",{"max-w-[250px]":!o,"gap-two grid max-w-lg":o}),...p,children:i.jsxs("div",{className:"flex h-full flex-col",children:[w&&i.jsx(z,{className:"mb-sm mx-sm flex-shrink-0 border-b",children:w}),c&&i.jsx(z,{testId:d,className:"mb-sm mx-sm flex-shrink-0 border-b",children:i.jsx(L,{variant:"smallBold",className:"py-sm mb-1",children:c})}),i.jsxs(ul,{orientation:"vertical",showIndicatorOnHover:!1,className:"min-h-0 flex-1 overflow-auto",children:[i.jsx(vu,{items:P,grid:o,cols:y,menuItemClassName:x,disableScrollArea:!0}),v]})]})}),[p,y,v,o,w,P,x,d,c]);return r.every(D=>D.show===!1)?C?n:null:m?i.jsxs(i.Fragment,{children:[i.jsx(Xt,{variant:"bottom-left-sheet",actionList:le,isOpen:j,onClose:O,footerContent:E&&v?v:void 0,footerClassname:E&&v?"!pt-0 pb-5 sticky bottom-0":void 0,wrapperClassname:E&&v?"!pb-0":void 0,...h,children:i.jsx(z,{className:"divide-y",children:i.jsx(vu,{items:P,grid:o,menuItemClassName:x})})}),i.jsx("span",{className:_,onClick:t?void 0:D=>{D.stopPropagation(),R()},children:n})]}):i.jsx(lo,{...g,hoverOpen:t,isOpen:j,placement:s,onClose:O,onOpen:R,contentClassName:b,childrenClassName:_,content:N,hasInteractiveContent:!0,children:n})});Jt.displayName="DropDownMenu";const WWe=[{label:"Comet Assistant",value:"AGENT",description:"Use cases where Comet Assistant is acting on your behalf and does the wrong thing. For general Comet issues please use Comet Browser instead."},{label:"Comet Browser",value:"BROWSER",description:"General Comet UI/UX issues. For general Perplexity web issues please use Web instead."},{label:"Product",value:"PRODUCT",description:"General product features, UI/UX issues, or user experience problems"},{label:"AI",value:"AI",description:"Core AI model issues, accuracy problems, or response quality"},{label:"Enterprise",value:"ENTERPRISE",description:"Enterprise-specific features"},{label:"Platform",value:"PLATFORM",description:"Infrastructure, performance, or system-level issues"},{label:"Mobile",value:"MOBILE",description:"Mobile app functionality or design issues"},{label:"Search",value:"SEARCH",description:"Search functionality, results quality, or indexing problems"},{label:"Web",value:"WEB",description:"General Web UI/UX issues."}],$We=({value:e,onSelect:t,options:n,placeholder:r="Select a category..."})=>{const a=n.find(c=>c.value===e)?.label||r,o=n.map(c=>({type:"default",text:c.label,tooltipText:c.description,onClick:()=>t(c.value),show:!0})),l={text:a,variant:"common",size:"small",trailingComponent:i.jsx(me,{icon:Qn,size:"xs"}),extraCSS:"w-full justify-between border-subtler bg-base p-sm dark:border-subtle dark:bg-subtler"};return i.jsx(Jt,{items:o,isMobileStyle:!1,placement:"bottom-start",children:i.jsx(Te,{...l})})},Kle=({isOpen:e,onClose:t})=>{const[n,r]=f.useState(""),[s,a]=f.useState(""),[o,l]=f.useState(""),[c,u]=f.useState(!1),[d,m]=f.useState(null),{firstResult:{context_uuid:p,backend_uuid:h,expiry_time:g,collection_info:{slug:y}={}}={}}=Ht(),v=Oo(),{handleAccessChange:x}=iP({contextUUID:p,rwToken:v,collectionSlug:y,reason:"Bug Report"}),{handleRemoveExpiry:b}=$Fe({slugOrUUID:h}),_=async()=>{if(!n.trim()){m("Please describe the bug");return}u(!0),m(null);try{const C=TVe(window.location.href),S=await MVe(n,C,s,o);t(),S?.status==="success"&&S.linear_url&&window.open(S.linear_url,"_blank"),x(gt.PUBLIC_READ),g&&await b(),r(""),l("")}catch(C){ee.error("Failed to submit bug report",C),m("Failed to submit bug report. Please try again.")}finally{u(!1)}},w=()=>{r(""),l(""),a(""),m(null),t()};return i.jsx(Xt,{isOpen:e,onClose:w,title:"Report a Bug",variant:"large",actionList:[{text:"Cancel",onClick:w,variant:"common"},{text:c?"Submitting...":"Submit Bug Report",onClick:_,variant:"primary",disabled:c||!n.trim(),isLoading:c}],children:i.jsxs("div",{className:"space-y-md",children:[i.jsxs("div",{children:[i.jsx(L,{variant:"base",className:"mb-sm",children:"Category (optional)"}),i.jsx($We,{value:o,onSelect:l,options:WWe,placeholder:"Select a category..."})]}),i.jsxs("div",{children:[i.jsx(L,{variant:"base",className:"mb-sm",children:"Who should we assign this bug to? (optional)"}),i.jsx(cl,{value:s,onChange:C=>a(C),placeholder:"Please provide the email address. E.g. johnny@perplexity.ai",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),i.jsxs("div",{children:[i.jsx(L,{variant:"base",className:"mb-sm",children:"Please describe the bug you encountered:"}),i.jsx(cl,{value:n,onChange:C=>r(C),placeholder:"Describe what happened, steps to reproduce, and any other relevant details...",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),d&&i.jsx(L,{variant:"smallMono",color:"red",className:"text-sm",children:d})]})})};var Fn;(function(e){e.MACOS="macos",e.WINDOWS="windows"})(Fn||(Fn={}));var or;(function(e){e.NEW_THREAD="NEW_THREAD",e.STOP_GENERATING="STOP_GENERATING",e.TOGGLE_INCOGNITO="TOGGLE_INCOGNITO",e.SHOW_SHORTCUTS="SHOW_SHORTCUTS",e.FOCUS_ASK_INPUT="FOCUS_ASK_INPUT",e.TOGGLE_DICTATION="TOGGLE_DICTATION",e.TOGGLE_V2V="TOGGLE_V2V"})(or||(or={}));const QLt="keyboard-shortcuts",Yle=(e,t,n=!1)=>[{type:or.NEW_THREAD,label:e.formatMessage({defaultMessage:"New Thread",id:"76XSxT3hV8"}),macos:["","K"],windows:t?["Ctrl","Shift","P"]:["Ctrl","I"],editable:!0,global:!0},{type:or.TOGGLE_V2V,label:e.formatMessage({defaultMessage:"Toggle Voice Mode",id:"ulahVrf1h4"}),macos:["","Shift","B"],windows:["Ctrl","Shift","B"],editable:!0,global:!0,requiresAuth:!0,windowsAppOnly:!0},{type:or.TOGGLE_DICTATION,label:e.formatMessage({defaultMessage:"Toggle Voice Dictation",id:"tWip/8rlIv"}),macos:["","D"],windows:["Ctrl","D"],editable:!1,windowsAppOnly:!0},{type:or.TOGGLE_INCOGNITO,label:e.formatMessage({defaultMessage:"Toggle Incognito",id:"YNMg3vd9IG"}),macos:["",";"],windows:["Ctrl",";"],editable:!1},{type:or.SHOW_SHORTCUTS,label:e.formatMessage({defaultMessage:"Show Shortcuts",id:"8o6rUVckYq"}),macos:["","/"],windows:["Ctrl","/"],editable:!1},{type:or.FOCUS_ASK_INPUT,label:e.formatMessage({defaultMessage:"Focus Ask Input",id:"RP5ybIk9wM"}),macos:["","J"],windows:["Ctrl","J"],editable:!1}].filter(s=>(!s.requiresAuth||n)&&(!s.windowsAppOnly||t)),HWe={Meta:"",Shift:"",ArrowUp:"",ArrowDown:"",ArrowLeft:"",ArrowRight:"",Enter:"",Period:".",Semicolon:";",Slash:"/",Escape:"Esc"},zWe={"":"Meta","":"Shift","":"ArrowUp","":"ArrowDown","":"ArrowLeft","":"ArrowRight","":"Enter"},GWe=(e,t=Fn.MACOS)=>e==="Meta"?t===Fn.WINDOWS?"Win":"":HWe[e]||e,mH=e=>e==="Win"?"Meta":zWe[e]||e,qWe=({label:e,keys:t})=>i.jsxs(L,{color:"light",className:"py-md flex place-content-between items-center",children:[i.jsx(L,{as:"dd",variant:"small",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:e}),i.jsx(z,{as:"dl",className:"space-x-two flex items-center",children:t.map(n=>i.jsx(z,{className:"px-xs flex h-5 min-w-5 items-center justify-center rounded border font-mono",children:n},n))})]}),Qle=A.memo(({closeModal:e,isOpen:t})=>{const n=Q(),{device:{isMacOS:r,isWindowsApp:s}}=Et(),a=Qe(),o=r?Fn.MACOS:Fn.WINDOWS,l=f.useMemo(()=>Yle(n,s,a),[n,s,a]);return i.jsx(Sh,{childVariant:"hide-chrome",isOpen:t,canOutsideClickClose:!0,onClose:e,children:i.jsx(z,{variant:"background",className:"relative w-[90vw] max-w-screen-sm overflow-hidden rounded-xl",children:i.jsxs(z,{variant:"subtler",className:"p-md inset-0",children:[i.jsx(L,{className:"mb-2",variant:"section-title",as:"h2",children:n.formatMessage({defaultMessage:"Keyboard Shortcuts",id:"nFkLBjIGMy"})}),i.jsx(z,{as:"dl",className:"divide-y",children:l.map(c=>i.jsx(qWe,{label:c.label,keys:c[o]},c.type))})]})})})});Qle.displayName="KeyboardShortcutHelperModal";const KWe=async({reason:e})=>{try{return(await(await sr({urlPath:"/rest/collections/list_recent",reason:e})).json()).map(r=>({...r,link:r.link.replace(/^\/collections\//,"/spaces/")}))}catch(t){return ee.error("Failed to get recent collections.",t),[]}},YWe=async({headers:e={},params:t,reason:n})=>{const r=await ne.GET("/rest/collections/list_user_collections",n,{params:{query:{limit:t.limit,offset:t.offset,version:wi}},timeoutMs:Pe(),headers:e});if(!r.response.ok||!r.data)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to list user collections",cause:r.error});return r.data},QWe=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await ne.GET("/rest/collections/get_collection",n,{params:{query:t},headers:e,timeoutMs:Pe()});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:r});if(!s?.status||s?.status==="failed")throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:s});return s}catch(r){ee.error(r);return}},XWe=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await ne.PUT("/rest/collections/{collection_uuid}/access",n,{params:{path:{collection_uuid:t.collection_uuid}},headers:e,body:{updated_access:t.updated_access},timeoutMs:Pe()});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to update collection access",cause:r})}catch(r){ee.error(r)}},XLt=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await ne.POST("/rest/collections/{collection_uuid}/remove_user",n,{params:{path:{collection_uuid:t.collectionUUID}},body:{email:t.email},headers:e,timeoutMs:Pe()});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to remove user from collection",cause:r})}catch(r){ee.error(r)}},ZLt=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await ne.GET("/rest/collections/list_collection_threads",n,{params:{query:t},headers:e,timeoutMs:Pe()});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:r});if(!s||!Array.isArray(s))throw new Ee("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:s});return s}catch(r){return ee.error(r),[]}},JLt=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/collections/invitations",e,{});if(t)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get invited collections",cause:t});return{collections:n.collections}}catch{return{collections:[]}}},lb=async({params:e,reason:t})=>{try{const{error:n,data:r}=await ne.POST("/rest/collections/upsert_thread_collection",t,{body:e});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:n});if(!r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:r});return r}catch{return}},eDt=async({params:e,reason:t})=>{try{const{error:n,data:r}=await ne.POST("/rest/collections/invite_to_collection",t,{body:e,timeoutMs:Pe()});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to invite user to collection",cause:n});return r}catch{return}},pH=async({collectionUUID:e,entryUUID:t,reason:n})=>{try{const{error:r}=await ne.DELETE("/rest/collections/remove_collection_thread",n,{params:{query:{collection_uuid:e,entry_uuid:t}}});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to remove thread from collection",cause:r})}catch{return}},kl=({collectionSlug:e,reason:t,enabled:n=!!e})=>{const r=async()=>e?await QWe({params:{collection_slug:e,version:wi},reason:t})??null:null,{data:s,isLoading:a}=$e({enabled:n,queryKey:["get_collection",{collection_slug:e?.slice(-22)}],queryFn:r,placeholderData:Ch});return f.useMemo(()=>({collection:s??void 0,isLoading:a}),[s,a])},DA=async({request:e,reason:t})=>{const{fileRepositoryInfo:n,limit:r,offset:s,searchTerm:a,fileStates:o,email:l}=e;try{let c;o.includes("COMPLETE")?c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:o}:c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:o,email_in_filter:[l]};const{data:u,error:d}=await ne.POST("/rest/file-repository/list-files",t,{headers:{"content-type":"application/json"},body:c,timeoutMs:Pe(),numRetries:1});if(d)throw new Ee("API_CLIENTS_ERROR",{cause:d});return{files:u?.files??[],numTotalFiles:u?.num_total_files??0}}catch(c){return ee.error(c),null}},ZWe=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/file-repository/get-file-upload-urls",t,{body:e,timeoutMs:5e3,numRetries:1});if(r)throw new Error("Failed to get fileUploadUrl",{cause:r});return n},Xle=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/files/list",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to get connector files",{cause:r});return n},JWe=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/files/delete",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to delete connector files",{cause:r});return n},e$e=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/files/resync",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to resync connector files",{cause:r});return n},t$e=async({request:e,reason:t})=>{try{const{data:n,error:r}=await ne.POST("/rest/file-repository/uploads",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r});return n??null}catch(n){return ee.error(n),null}};async function gP({request:e,reason:t}){return new Promise((n,r)=>{ne.SSE("/rest/sse/index_files",t,{params:e,headers:{"content-type":"application/json",accept:"text/event-stream"},handlers:{message:s=>{s.status==="success"?n():r(new Error("Indexing failed"))}}}).catch(r)})}const Zle=({reason:e})=>{const t=mt();return bt({mutationFn:({fileUuids:n,fileRepoInfo:r})=>JWe({request:{file_repository_info:r,filters:{uuids:n,connection_ids:[],connection_types:[],file_types:[],ids:[],parent_uuids:[],remote_file_ids:[],root_files_only:!1,status:[],upload_ids:[]}},reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["connector-files"]})}})},n$e=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,cursor:o,pollingEnabled:l=!1,pageSize:c,fileTypes:u,reason:d})=>{const[m,p]=f.useState(!1),h=f.useMemo(()=>({file_repository_info:e,filters:{connection_types:t??le,status:n??le,search_keyword:r,parent_uuids:s??le,root_files_only:a??!1,file_types:u??le,connection_ids:le,ids:le,remote_file_ids:le,uuids:le,upload_ids:le},pagination:{cursor:o,page_size:c??100},order_by:"updated",order_dir:"desc"}),[e,t,n,r,s,a,o,c,u]),g=$e({queryKey:ple(h),queryFn:()=>Xle({request:h,reason:d}),refetchInterval:()=>l&&m?5e3:!1,staleTime:0,gcTime:0,enabled:e.file_repository_type!=="COLLECTION"||e.file_repository_type==="COLLECTION"&&!!e.owner_id});return f.useEffect(()=>{const y=g.data?.files.some(v=>v.status==="SYNCING"||v.status==="QUEUED")||!1;p(y)},[g.data]),g},r$e=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,pageSize:o,fileTypes:l,reason:c})=>{const u={file_repository_info:e,filters:{connection_types:t??le,status:n??le,search_keyword:r,parent_uuids:s??le,root_files_only:a??!1,file_types:l??le,connection_ids:le,ids:le,remote_file_ids:le,uuids:le,upload_ids:le},pagination:{page_size:o},order_by:"updated",order_dir:"desc"};return Cc({enabled:e.file_repository_type==="USER"||e.file_repository_type==="COLLECTION"&&!!e.owner_id,initialPageParam:void 0,queryKey:ple(u,!0),queryFn:({pageParam:d})=>Xle({request:{...u,pagination:{cursor:d,page_size:o}},reason:c}),getNextPageParam:d=>d.next_cursor??void 0})},Do=({reason:e,collectionSlugOverride:t})=>{const n=Nt(),r=xi(),{firstResult:{collection_info:{uuid:s}={}}={}}=Ht(),a=n?.includes("/search/")&&!!s,o=t??(Array.isArray(r?.slug)?r.slug[0]:r?.slug),{collection:l}=kl({collectionSlug:o,reason:e}),c=f.useMemo(()=>{let u,d;return a?(u="COLLECTION",d=s??""):n?.includes("/collections")||n?.includes("/spaces")?(u="COLLECTION",d=l?.uuid||""):(u="ORG",d=""),{file_repository_type:u,owner_id:d}},[a,n,s,l?.uuid]);return f.useMemo(()=>({fileRepoInfo:c}),[c])},s$e=({reason:e})=>{const t=mt();return bt({mutationFn:({fileUuids:n,fileRepoInfo:r})=>e$e({request:{file_repository_info:r,filters:{uuids:n,connection_ids:[],connection_types:[],file_types:[],ids:[],parent_uuids:[],remote_file_ids:[],root_files_only:!1,status:[],upload_ids:[]}},reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["connector-files"]})}})},yP=e=>{switch(e){case"GOOGLE_DRIVE":return xp;case"ONEDRIVE":return hu;case"SHAREPOINT":return gu;case"DROPBOX":return pc;case"BOX":return bp;case"WILEY":return wS;case"GCAL":return U0;case"NOTION":case"NOTION_MCP":return _p;case"LINEAR":case"LINEAR_ALT":return kd;case"SLACK":return B0;case"SLACK_DIRECT":return V0;case"GITHUB_MCP_DIRECT":return W0;case"ASANA_MCP_DIRECT":return $0;case"ASANA_MCP_MERGE":return H0;case"ATLASSIAN_MCP_DIRECT":return z0;case"OUTLOOK":return wp;default:return""}};function tDt(e){if(e===0)return"0 bytes";const t=1024,n=["bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return Math.ceil(e/Math.pow(t,r))+" "+n[r]}const a$e=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"||t==="PAGE"},o$e=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"?_te:Sf},Ha=e=>{switch(e){case"GOOGLE_DRIVE":return CS;case"ONEDRIVE":return ES;case"SHAREPOINT":return MS;case"DROPBOX":return f7;case"BOX":return kS;case"GCAL":return SS;case"NOTION":case"NOTION_MCP":return TS;case"OUTLOOK":return $ae;case"LINEAR":case"LINEAR_ALT":return Lw;case"SLACK":case"SLACK_DIRECT":return Dw;case"GITHUB_MCP_DIRECT":return m7;case"ASANA_MCP_DIRECT":case"ASANA_MCP_MERGE":return Fw;case"ATLASSIAN_MCP_DIRECT":return p7;default:return null}},ri=e=>{switch(e){case"crunchbase":return bS;case"factset":return vS;case"wiley":return u1;case"google_drive":return CS;case"onedrive":return ES;case"sharepoint":return MS;case"gcal":return SS;case"dropbox":return f7;case"box":return kS;case"gmail":return O7e;case"notion":case"notion_mcp":return TS;case"outlook":return $ae;case"linear":case"linear_alt":return Lw;case"slack":case"slack_direct":return Dw;case"github_mcp_direct":return m7;case"asana_mcp_direct":case"asana_mcp_merge":return Fw;case"atlassian_mcp_direct":return p7;default:return null}},$s=e=>{switch(e){case"crunchbase":return _S;case"factset":return xS;case"google_drive":return xp;case"onedrive":return hu;case"sharepoint":return gu;case"gcal":return U0;case"dropbox":return pc;case"box":return bp;case"gmail":return L7e;case"notion":case"notion_mcp":return _p;case"outlook":return wp;case"linear":case"linear_alt":return kd;case"slack":return B0;case"slack_direct":return V0;case"github_mcp_direct":return W0;case"asana_mcp_direct":return $0;case"asana_mcp_merge":return H0;case"atlassian_mcp_direct":return z0;default:return e}},i$e=e=>{switch(e){case"GOOGLE_DRIVE":return xp;case"ONEDRIVE":return hu;case"SHAREPOINT":return gu;case"DROPBOX":return pc;case"BOX":return bp;case"NOTION":case"NOTION_MCP":return _p;case"LINEAR":case"LINEAR_ALT":return kd;case"SLACK":return B0;case"SLACK_DIRECT":return V0;case"GITHUB_MCP_DIRECT":return W0;case"ASANA_MCP_DIRECT":return $0;case"ASANA_MCP_MERGE":return H0;case"ATLASSIAN_MCP_DIRECT":return z0;default:return""}},l$e=(e,t)=>new Date(e+"Z").toLocaleString(t,{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),c$e=(e,t)=>{switch(e){case"RECEIVED":case"QUEUED":case"RATE_LIMITED":return t.formatMessage({id:"Cnm0QAkWnp",defaultMessage:"Queued"});case"SYNCING":return t.formatMessage({id:"eOnwqs6QFY",defaultMessage:"Syncing"});case"SYNC_ERROR":return t.formatMessage({id:"N1cqoEe4CZ",defaultMessage:"Sync error"});case"EVALUATING_RESYNC":case"READY":return t.formatMessage({id:"IZFEUgrg25",defaultMessage:"Ready"})}},nDt=(e,t)=>{if(t==="WILEY")return yP(t);if(t||e.is_memory||e.is_conversation_history)return e.name&&e.name.trim()?e.name:void 0},Jle=e=>e.isFile,ece=e=>e.isDirectory,u$e=async(e,t=m7e)=>{const n=[e],r=[];for(;n.length>0;){const s=n.pop();if(s){if(Jle(s)){const a=await new Promise(o=>{s.file(o)});if(r.push(a),r.length>t)return r}else if(ece(s)){const a=s.createReader(),o=await new Promise(l=>a.readEntries(l));n.push(...o)}}}return r},ko=A.memo(({blockCount:e,size:t=Wt.large,animateLines:n=!0,divider:r,noLines:s,noHeight:a,variant:o="subtler",className:l,...c})=>{const u="h-1 bg-inverse/70  rounded-full",d=f.useMemo(()=>{const m=[];for(let p=0;p<(e??1);p++)m.push(i.jsx(z,{variant:o,className:U("animate-pulse rounded-md",{"h-8":t===Wt.small,"h-10":t===Wt.regular,"h-[72px]":t===Wt.large,"h-32":t===Wt.xl,"h-6":t===Wt.tiny,"h-full":a}),children:i.jsx("div",{className:"gap-y-sm p-md flex h-full flex-col",children:!s&&i.jsxs(i.Fragment,{children:[i.jsx(xe.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),i.jsx(xe.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),i.jsx(xe.div,{initial:{width:n?0:"80%"},animate:{width:"80%"},transition:{duration:.8,delay:.2},className:u}),i.jsx(xe.div,{initial:{width:n?0:"20%"},animate:{width:"20%"},transition:{duration:.8,delay:.2},className:u})]})})},p));return m},[n,e,t,s,a,o]);return i.jsx(z,{className:U("h-full",{"divider gap-y-sm flex flex-col":r,"absolute top-0 w-full":a},l),...c,children:d})});ko.displayName="TextBlockThrobber";var Tt;(function(e){e.GOOGLE_DRIVE="GOOGLE_DRIVE",e.ONEDRIVE="ONEDRIVE",e.SHAREPOINT="SHAREPOINT",e.DROPBOX="DROPBOX",e.BOX="BOX",e.WILEY="WILEY",e.GCAL="GCAL",e.GENERATED_IMAGE="GENERATED_IMAGE",e.GENERATED_VIDEO="GENERATED_VIDEO",e.NOTION="NOTION",e.NOTION_MCP="NOTION_MCP",e.OUTLOOK="OUTLOOK",e.LINEAR="LINEAR",e.LINEAR_ALT="LINEAR_ALT",e.SLACK="SLACK",e.GITHUB_MCP_DIRECT="GITHUB_MCP_DIRECT",e.ASANA_MCP_DIRECT="ASANA_MCP_DIRECT",e.ASANA_MCP_MERGE="ASANA_MCP_MERGE",e.ATLASSIAN_MCP_DIRECT="ATLASSIAN_MCP_DIRECT",e.LOCAL="LOCAL",e.SLACK_DIRECT="SLACK_DIRECT"})(Tt||(Tt={}));const tce=A.memo(({files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,allowEditSources:r,onFolderClick:s})=>{const a="connectors-table-files",o=Q(),{locale:l}=Q(),{isMobileStyle:c}=ye(),{mutate:u}=Zle({reason:a}),{mutate:d}=s$e({reason:a}),m=f.useCallback(h=>{a$e(h)?s(h.uuid,h.name):h.connection_file_url&&window.open(h.connection_file_url,"_blank")},[s]),p=f.useCallback(h=>[{type:"default",text:o.formatMessage({defaultMessage:"View",id:"FgydNeoT78"}),icon:WC,onClick:g=>{g.stopPropagation(),h.connection_file_url&&window.open(h.connection_file_url,"_blank")},show:!!h.connection_file_url},{type:"default",text:o.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),icon:uu,onClick:g=>{g.stopPropagation(),u({fileUuids:[h.uuid],fileRepoInfo:t})},show:r},{type:"default",text:o.formatMessage({defaultMessage:"Resync",id:"yr3UuWC6qt"}),icon:TR,onClick:g=>{g.stopPropagation(),d({fileUuids:[h.uuid],fileRepoInfo:t})},show:r&&h.connection_type!==Tt.LOCAL}],[o,r,u,d,t]);return n?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"py-sm",children:i.jsx("div",{className:"w-full",children:i.jsx(ko,{variant:"offsetPlus",size:"regular",blockCount:8,noLines:!0,divider:!0,className:"w-full"})})})}):i.jsx(i.Fragment,{children:e.map((h,g)=>i.jsx(A.Fragment,{children:i.jsxs("tr",{className:"border-subtler animate-in fade-in border-b align-middle duration-500",onClick:()=>m(h),children:[i.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:i.jsx(z,{className:"shrink-0",children:h.connection_type===Tt.LOCAL?i.jsx(me,{icon:mh,size:"lg"}):i.jsx("img",{src:Ha(h.connection_type)??"",alt:h.name,width:24,height:24})})}),i.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:i.jsxs("div",{className:"gap-x-sm flex items-center",children:[i.jsx(L,{children:i.jsx(me,{icon:o$e(h)})}),i.jsx(L,{variant:"small",color:"light",className:"truncate",children:h.name})]})}),i.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:i.jsx(L,{variant:"small",color:"light",className:"truncate",children:l$e(h.updated,l)})}),i.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:i.jsx(L,{variant:"small",color:h.status==="SYNC_ERROR"?"red":"light",className:"truncate",children:c$e(h.status,o)})}),i.jsx("td",{className:"py-sm",children:i.jsx("span",{className:"flex justify-end",children:i.jsx(Jt,{isMobileStyle:c,placement:"bottom-end",items:p(h),children:i.jsx(Te,{noPadding:!0,size:"small",icon:du})})})})]})},g))})});tce.displayName="ConnectorsTableFiles";const za=10,hH=20,d$e=za*41+46,nce=A.memo(({files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,allowEditSources:r,selectedFiles:s,currentPath:a,setSelectedFiles:o,setCurrentPath:l,handleFolderClick:c,handleResetSearch:u})=>{const d=Q(),m=f.useMemo(()=>A.memo(()=>{const p=f.useCallback(()=>{l([]),u()},[]);return a.length===0?null:i.jsxs("div",{className:"mb-md gap-x-xs flex items-center",children:[i.jsx(L,{variant:"tiny",color:a.length===0?void 0:"light",className:"cursor-pointer hover:underline",onClick:p,children:d.formatMessage({defaultMessage:"All",id:"zQvVDJ+j59"})}),a.map((h,g)=>i.jsx(rce,{item:h,index:g,currentPathLength:a.length,handleResetSearch:u,setCurrentPath:l},h.uuid))]})}),[a,u,d,l]);return i.jsxs("div",{style:{minHeight:d$e},className:"px-sm pt-md flex flex-col",children:[i.jsx(m,{}),i.jsx("div",{className:"grow-0",children:i.jsxs("table",{className:"w-full table-fixed",children:[i.jsx("thead",{className:"border-subtler border-b",children:i.jsxs("tr",{children:[i.jsx("th",{className:"pb-sm w-[10%] text-left",children:i.jsx(L,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Source",id:"aH4De2Y20k"})})}),i.jsx("th",{className:"pb-sm w-[45%] text-left",children:i.jsx(L,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Name",id:"HAlOn1ZsuY"})})}),i.jsx("th",{className:"pb-sm w-1/4 text-left",children:i.jsx(L,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Date",id:"P7PLVjLe4f"})})}),i.jsx("th",{className:"pb-sm w-1/5 text-left",children:i.jsx(L,{variant:"smallBold",children:d.formatMessage({defaultMessage:"Status",id:"tzMNF3jWoU"})})})]})}),i.jsx("tbody",{children:i.jsx(tce,{allowEditSources:r,files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,selectedFiles:s,setSelectedFiles:o,onFolderClick:c})})]})}),!n&&e.length===0&&i.jsx("div",{className:"flex grow items-center justify-center",children:i.jsx(L,{color:"light",variant:"small",className:"text-center",children:d.formatMessage({defaultMessage:"Files that you sync will be found here",id:"uT32Xg01/F"})})})]})});nce.displayName="ConnectorsTableContent";const rce=A.memo(({item:e,index:t,currentPathLength:n,handleResetSearch:r,setCurrentPath:s})=>{const a=f.useCallback(()=>{s(o=>o.slice(0,t+1)),r()},[r,t,s]);return i.jsxs("div",{className:"gap-x-xs flex items-center",children:[i.jsx(L,{variant:"small",color:"light",children:"/"}),i.jsx(me,{icon:_te}),i.jsx(L,{variant:"tiny",color:t===n-1?void 0:"light",className:"cursor-pointer hover:underline",onClick:a,children:e.name})]},e.uuid)});rce.displayName="PathBlockFactory";function f$e(e,t,n=2){if(e==null)return"";const r=e.includes(".")?e.slice(e.lastIndexOf(".")):"",s=e.substring(0,e.length-r.length);return s.length>t?s.substring(0,t-r.length-3)+".".repeat(n)+r:s+r}const p1=e=>{try{return(new URL(e).pathname.split("/").pop()||"").split(".").pop()?.toLowerCase()}catch{return e.split(".").pop()?.toLowerCase()}},sce=e=>e.file.type.includes("image"),m$e=e=>e.file.type==="application/pdf",p$e=e=>e.file.type==="text/csv"||e.file.type=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",h$e=e=>e.file.type==="text/plain"||e.file.type==="application/msword"||e.file.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||e.file.type==="text/markdown",FA={txt:"text/plain",pdf:"application/pdf",jpeg:"image/jpeg",jpg:"image/jpeg",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",md:"text/markdown",png:"image/png",csv:"text/csv"},g$e=e=>{if(e<0)throw new Error("Number of bytes cannot be negative");const t=["B","KB","MB","GB"];let n=0,r=e;for(;r>=1e3&&n<t.length-1;)r/=1e3,n++;return`${r%1===0?r.toString():r.toFixed(1)} ${t[n]}`},vP=[".txt",".pdf",".docx",".pptx",".xlsx",".md",".csv"],xP=[".txt",".pdf",".jpg",".jpeg",".png",".docx",".pptx",".xlsx",".md",".csv"],bP=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],gH=27,y$e=2e4;let s4=!1,Rl=null;const v$e=()=>{const e=f.useRef(null),t=f.useRef(null);let n="";typeof window<"u"&&(window.location.hostname==="localhost"?n=`${window.location.protocol}//${window.location.hostname}:${window.location.port}/account/connectors`:n=`${window.location.protocol}//${window.location.hostname}/account/connectors`);const r=(c,u)=>u?c==="sharepoint"?u:u+"-my":null,s=f.useCallback(async(c,u)=>{u.success=!1;const d=r(c.connector,c.tenantName);u.tenant=d,Rl||(Rl=await(await ae(()=>import("./index-C3FxZ4wa.js"),__vite__mapDeps([0,1]))).PublicClientApplication.createPublicClientApplication({auth:{authority:d?"https://login.microsoftonline.com/common":"https://login.microsoftonline.com/consumers",clientId:c.clientId,redirectUri:n},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!0}}));const m=d?[`https://${d}.sharepoint.com/.default`]:["OneDrive.ReadWrite"];u.scopes=m;const p={scopes:m,login_hint:c.loginHint,prompt:"select_account"};let h=null,g=Rl.getActiveAccount();if(g||(g=Rl.getAllAccounts().find(v=>v.username===c.loginHint)??null),u.hasActiveAccount=!!g?.username,g)try{Rl.setActiveAccount(g),h=(await Rl.acquireTokenSilent(p)).accessToken}catch(y){u.silentAcquisitionError=y instanceof Error?y.toString():y}if(!h&&!s4)try{s4=!0;const y=await Rl.loginPopup(p);Rl.setActiveAccount(y.account),h=(await Rl.acquireTokenSilent(p)).accessToken}catch(y){u.interactiveAcquisitionError=y instanceof Error?y.toString():y}finally{s4=!1}else h||(u.interactiveAuthenticationSkipped=!0);if(h)return u.success=!0,u.accessTokenLength=h.length,h;throw Error("Access token not acquired")},[n]),a=f.useCallback(c=>{const u=r(c.connector,c.tenantName);let d=c.mode==="source"?vP:xP;d=c.isAudioVideoFilesEnabled?d.concat(bP):d;const m=c.connector==="sharepoint"?{recent:!0,oneDrive:!1,sharedLibraries:!0}:{recent:!0,oneDrive:!0,sharedLibraries:!1},p={sdk:"8.0",messaging:{origin:n,channelId:gH},authentication:{},entry:c.connector==="sharepoint"?{sharePoint:{}}:{oneDrive:{}},typesAndSources:{mode:c.mode==="attachment"?"files":"all",filters:d,pivots:m},selection:{mode:"multiple"}},h=new URLSearchParams({filePicker:JSON.stringify(p)});return c.webUrl?`${c.webUrl}/_layouts/15/FilePicker.aspx?${h}`:u?`https://${u}.sharepoint.com/_layouts/15/FilePicker.aspx?${h}`:`https://onedrive.live.com/picker?${h}`},[n]),o=f.useCallback(async c=>{const u=b=>{window.removeEventListener("message",p),t.current?.removeEventListener("message",m),t.current?.close(),e.current?.close(),b?c.onError?.(b):c.onCancel?.()},d=async(b,_)=>await new Promise((w,C)=>{const S=setTimeout(()=>{C(new Error("Request timed out"))},y$e);s(b,_).then(E=>{clearTimeout(S),w(E)}).catch(E=>{clearTimeout(S),C(E)})}),m=async b=>{const _={};switch(b.data.type){case"command":t.current?.postMessage({type:"acknowledge",id:b.data.id});const w=b.data.data;switch(w.command){case"authenticate":try{const C=await d(c,_);t.current?.postMessage({type:"result",id:b.data.id,data:{result:"token",token:C}})}catch(C){_.errorStep="authenticateCommand",_.error=C instanceof Error?C.toString():C,u(C)}finally{c.log?.(c.connectionType??c.connector.toUpperCase(),_)}break;case"pick":t.current?.postMessage({type:"result",id:b.data.id,data:{result:"success"}}),c.onPicked?.(w.items),u();break;case"close":u();break;default:u();break}break}},p=async b=>{if(b.source&&b.source===e.current){const _=b.data;_.type==="initialize"&&_.channelId===gH&&(t.current=b.ports[0],t.current.addEventListener("message",m),t.current.start(),t.current.postMessage({type:"activate"}))}};let h;const g={};try{h=await s(c,g)}catch(b){g.errorStep="initialization",g.error=b instanceof Error?b.toString():b,u(b);return}finally{c.log?.(c.connectionType??c.connector.toUpperCase(),g)}const y=document.getElementById("microsoft-file-picker");if(!y){u();return}if(e.current=y.contentWindow,!e?.current){u();return}const v=e.current.document.createElement("form");v.setAttribute("action",a(c)),v.setAttribute("method","POST"),e.current.document.body.append(v);const x=e.current.document.createElement("input");x.setAttribute("type","hidden"),x.setAttribute("name","access_token"),x.setAttribute("value",h),v.appendChild(x),e.current.document.body.appendChild(v),v.submit(),window.addEventListener("message",p)},[s,a]),l=f.useCallback((c,u)=>{let d;if(c.parentReference.sharepointIds?.siteId&&u==="sharepoint"){const p={item_id:c.id,drive_id:c.parentReference.driveId,site_id:c.parentReference.sharepointIds.siteId};d=JSON.stringify(p)}else d=c.id;const m=p1(c.name);return m?{id:d,name:c.name,sizeBytes:c.size,mimeType:FA[m]}:null},[]);return f.useMemo(()=>({openPicker:o,toPickerDocument:l}),[o,l])},UA="box-file-picker",x$e="0";let cb=null,yH=!1;const b$e=()=>cb||(cb=new Promise((e,t)=>{const n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.css";const r=document.createElement("script");r.src="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.js",r.onload=()=>{if(!yH){const s=document.createElement("style");s.textContent=`
                .be .be-header input[type="search"] {
                    background: white;
                }

                .btn-content {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }
            `,document.head.appendChild(s),yH=!0}e()},r.onerror=t,n.onload=()=>document.body.appendChild(r),document.head.appendChild(n)}),cb),ace=({apiKey:e,mode:t,isAudioVideoFilesEnabled:n,onPicked:r,onCancel:s,onError:a})=>{const o=f.useRef(null),l=f.useCallback(async(u="file")=>{try{if(await b$e(),!document.getElementById(UA)){a?.("Attempted to open picker when container isn't ready");return}let m=t==="source"?vP:xP;m=n?m.concat(bP):m;const p=[...m,".gdocs",".gsheets",".gslides"];o.current&&(o.current.removeListener("choose",r),o.current.removeListener("cancel",s),o.current.hide(),o.current=null);let h;u==="folder"?h=new window.Box.FolderPicker:h=new window.Box.FilePicker,o.current=h,h.addListener("choose",r),h.addListener("cancel",s),h.show(x$e,e,{container:`#${UA}`,logoUrl:kS,extensions:p.join(","),canUpload:!1,canSetShareAccess:!1,canCreateNewFolder:!1,chooseButtonLabel:"Select",cancelButtonLabel:"Cancel"})}catch(d){a?.(d);return}},[e,a,t,s,r,n]),c=f.useCallback(()=>{o.current&&(o.current.removeListener("choose",r),o.current.removeListener("cancel",s),o.current.hide(),o.current=null)},[r,s]);return f.useMemo(()=>({openPicker:l,cleanupPicker:c}),[l,c])},_P=A.memo(({isOpen:e,onClose:t,cleanupPicker:n})=>(f.useEffect(()=>()=>{n()},[n]),i.jsx(Xt,{variant:"wide",isOpen:e,onClose:t,renderCloseButton:!0,children:i.jsx("div",{id:UA,style:{height:"800px"}})})));_P.displayName="BoxFilePickerModal";const rDt=async({backendUUID:e,title:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/article/section/title/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,title:t},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Error updating article section title",{cause:a});return s},sDt=async({backendUUID:e,heroOffset:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/article/section/hero_offset/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,hero_offset:t},timeoutMs:Pe()});if(a)throw new Error("Error updating article section hero offset",{cause:a});return s},aDt=async({backendUUID:e,rwToken:t,reason:n})=>{if(!e||!t)return;const{data:r,error:s}=await ne.DELETE("/rest/article/section/{section_uuid}",n,{params:{path:{section_uuid:e}},body:{read_write_token:t},timeoutMs:Pe()});if(s)throw new Error("Error deleting article section",{cause:s});return r},oDt=async({sections:e,rwToken:t,reason:n})=>{if(!t||e.length===0)return;const{data:r,error:s}=await ne.PUT("/rest/article/sections/layout",n,{body:{read_write_token:t,sections:e},timeoutMs:Pe()});if(s)throw new Error("Error updating article sections layout",{cause:s});return r},iDt=async({sectionUUID:e,mediaItem:t,targetIndex:n,rwToken:r,isNewMediaItem:s=!1,reason:a})=>{if(!r)return;const{data:o,error:l}=await ne.PUT("/rest/article/section/image/{section_uuid}",a,{params:{path:{section_uuid:e}},timeoutMs:5500,body:{read_write_token:r,media_item:t,target_index:n,new_media_item:s}});if(l)throw new Error("Error updating article section image",{cause:l});return o},lDt=async({sectionUUID:e,mediaItem:t,rwToken:n,isNewMediaItem:r,reason:s})=>{n&&await ne.PUT("/rest/page/section/media/add/{section_uuid}",s,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:n,media_item:t,new_media_item:r}})},cDt=async({sectionUUID:e,image:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.POST("/rest/article/section/upload_image/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"POST",body:{read_write_token:n,content_type:t.type},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Failed to upload image to section media items",{cause:a});return s},uDt=async({sectionUUID:e,mediaItemImageUrl:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/article/section/media/remove/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),body:{read_write_token:n,media_item_image_url:t}});if(a)throw new Error("Error removing media item from section selected images",{cause:a});return s},dDt=async({sectionUUID:e,relativeMove:t,rwToken:n,articleSlug:r,reason:s})=>{if(!n||!r)return;const{data:a,error:o}=await ne.PUT("/rest/article/reorder/{article_slug}",s,{params:{path:{article_slug:r}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:n,section_uuid:e,relative_move:t}});if(o)throw new Error("Error reordering article section",{cause:o});return a},fDt=async({backendUUID:e,reason:t})=>{if(!e)return;const{data:n,error:r}=await ne.POST("/rest/article/section/terminate",t,{body:{entry_uuid:e},timeoutMs:1500,method:"POST",numRetries:1});if(r)throw new Error("Error terminating article section streaming",{cause:r});return n},mDt=async({sectionUUID:e,mediaItem:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/article/section/add/media_item/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,media_item:t}});if(a)throw new Error("Error adding article section media item",{cause:a});return s},_$e=async({entryUUIDs:e,rwToken:t,reason:n})=>{await ne.DELETE("/rest/thread",n,{body:{entry_uuids:e,read_write_token:t??""}})},w$e=async({entryUUID:e,rwToken:t,callback:n,reason:r})=>{n?.(),await ne.DELETE("/rest/thread/delete_thread_by_entry_uuid",r,{body:{entry_uuid:e,read_write_token:t??""}})},C$e=async({backendUUID:e,url:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/thread/entry/remove_widget",r,{timeoutMs:Pe(),body:{entry_uuid:e,read_write_token:n,url:t}});if(a)throw new Error("Error removing widget from entry",{cause:a});return s},pDt=async({backendUUID:e,rwToken:t,value:n,reason:r})=>{const{data:s,error:a}=await ne.PUT("/rest/article/emphasize_sources/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:t,value:n}});if(a)throw new Error("Error toggling emphasize sources",{cause:a});return s},hDt=async({connectorName:e,apiKey:t,reason:n})=>{const{data:r,error:s}=await ne.POST("/rest/connectors/store-api-key",n,{body:{api_key:t,connector_id:e}});if(s)throw new Error(`Failed to store ${e} API key`,{cause:s});return r},S$e=async({name:e,referrer:t,referrerId:n,redirectPath:r,unauthedRedirectPath:s,reason:a})=>{try{let o="";if(e!=="factset"){const u=new URLSearchParams;t&&(u.append("referrer",t),n&&u.append("referrer_id",n)),r&&u.append("redirect_path",r),s&&u.append("unauthed_redirect_path",s),o="?"+u.toString()}const l=await sr({urlPath:`/rest/connectors/${e}/connect${o}`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:Pe(),numRetries:1,reason:a});if(!l.ok)throw new Error("Failed to initiate OAuth flow");return(await l.json()).redirect_url}catch(o){return ee.error("Error fetching factset OAuth redirect URL:",o),null}},E$e=async({connectorName:e,reason:t})=>{const n=`disconnectConnector:${e}`;try{const r=await sr({urlPath:`/rest/connectors/${e}/disconnect`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:Pe({productionMs:500}),numRetries:1,reason:t});if(!r.ok)throw new Error("Failed to disconnect connector");return await r.json()}catch(r){return ee.log(`Error in ${n}:`,r),null}},M$e=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/connections/{uuid}/update",t,{params:{path:{uuid:e}},body:{disconnect:!0}});if(r)throw new Error("Failed to disconnect file connector",{cause:r});return n},k$e=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/connections/{uuid}/delete",t,{params:{path:{uuid:e}}});if(r)throw new Error("Failed to disconnect file connector and delete files",{cause:r});return n},T$e=async({connectorName:e,fileIds:t,fileRepoInfo:n,folder_ids:r,reason:s})=>{const a="uploadConnectorFiles";try{const o=await sr({urlPath:`/rest/connectors/${e}/files`,method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({file_ids:t,file_repository_info:n,folder_ids:r}),reason:s});if(!o.ok)throw new Error("Failed to upload connector files");return await o.json()}catch(o){throw ee.log(`Error in ${a}:`,o),o}},N$e=async({reason:e})=>{const{data:t,error:n}=await ne.POST("/rest/connectors/box/picker",e);if(n)throw new Error("Failed to refresh box picker credentials",{cause:n});return t},A$e=async({connectionType:e,content:t,reason:n})=>{const{data:r,error:s}=await ne.POST("/rest/connectors/picker/log",n,{body:{connection_type:e,content:t}});if(s)throw new Error("Failed log connector picker",{cause:s});return r},j$e=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/file-repository/delete-files",t,{body:e});if(r)throw new Error("Failed to delete files",{cause:r});return n};class wP extends Error{constructor(){super("Downloads are disabled"),this.name="DownloadsDisabledError"}}class CP extends Error{constructor(){super("PDF downloads are restricted"),this.name="PdfUntrustedOriginError"}}class SP extends Error{constructor(){super("This file belongs to a different organization"),this.name="UserNotInFileOrgError"}}const R$e=async({request:e,reason:t})=>{const n=await ne.POST("/rest/file-repository/download",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new wP;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new CP;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new SP}throw new Ee("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n.error})}return n.data},I$e=async({request:e,reason:t})=>{const n=await ne.POST("/rest/file-repository/download-attachment",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new wP;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new CP;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new SP}throw new Ee("API_CLIENTS_ERROR",{message:"Failed to download attachment",cause:n.error})}return n.data},gDt=async({seedDirectoryRequest:e,reason:t})=>{const n="seedDirectoryWithExampleFiles";try{if((await ne.POST("/rest/file-repository/seed-examples",t,{body:e,timeoutMs:Pe(),numRetries:1})).response.ok)return;throw new Error("Failed to seed file repository")}catch(r){throw ee.log(`Error in ${n}:`,r),r}},oce=e=>{const{accessLevel:t,enableWebByDefault:n,...r}=e;return{...r,access:t,enable_web_by_default:n}},P$e=async({collectionUuid:e,changes:t,reason:n})=>{const r=oce(t),s=await ne.POST("/rest/collections/edit_collection/{collection_uuid}",n,{params:{path:{collection_uuid:e}},body:r,timeoutMs:Pe()});if(!s.response.ok||!s.data)throw new Error("Failed to edit collection",{cause:s.error});const a=s.data,{access:o,...l}=a;return o!==void 0?{...l,accessLevel:o}:l},vH=async({params:e,reason:t})=>{const n=oce(e);e.template_id&&(n.template_id=e.template_id);const r=await ne.POST("/rest/collections/create_collection",t,{body:n,timeoutMs:Pe()});if(!r.response.ok||!r.data)throw new Error("Failed to create collection",{cause:r.error});return r.data},yDt=async({entryUUID:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/entry/convert-to-report/{entry_uuid}",t,{params:{path:{entry_uuid:e}},timeoutMs:Pe()});if(r)throw new Error("Failed to convert entry to report",{cause:r});return n},vDt=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to subscribe to space",{cause:r});return n},xDt=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await ne.DELETE("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to unsubscribe from space",{cause:r});return n},bDt=async({reason:e})=>{const{error:t}=await ne.DELETE("/rest/user/delete-account",e);if(t)throw new Error("Failed to delete account",{cause:t})},O$e=async({collectionUuid:e,reason:t})=>{const{error:n}=await ne.DELETE("/rest/collections/delete_collection/{collection_uuid}",t,{params:{path:{collection_uuid:e}},timeoutMs:Pe(),numRetries:1});if(n)throw new Error("Failed to delete collection",{cause:n})},_Dt=async({contextUUIDs:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/thread/mark_viewed",t,{body:{context_uuids:e},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to batch mark threads as viewed",{cause:r});return n},L$e=async({contextUUID:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/thread/mark_viewed/{context_uuid}",t,{params:{path:{context_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to mark thread as viewed",{cause:r});return n};function ice({reason:e}){const t=mt();return bt({mutationFn:()=>N$e({reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["get_user_settings"]})}})}function EP({reason:e,onConnectorFileUploadSuccess:t}){const n=mt(),{openToast:r}=xn(),s=Q(),a=f.useRef(null);return f.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),bt({mutationFn:async({connectorName:o,fileIds:l,fileRepoInfo:c,folder_ids:u})=>await T$e({connectorName:o,fileIds:l,fileRepoInfo:c,folder_ids:u,reason:e}),onSuccess:()=>{a.current=setTimeout(()=>{n.invalidateQueries({predicate:o=>o.queryKey[0]===fle||o.queryKey[0]===mle||o.queryKey[0]===hle})},5e3),r(s.formatMessage({defaultMessage:"You'll receive an email when the sync is complete",id:"in8zoTTNmN"}),"success",5),t?.()}})}const D$e=({initialApiKey:e,expiresAtString:t,mode:n,isSpace:r=!1,fileRepoInfo:s,isAudioVideoFilesEnabled:a,reason:o})=>{const l=_t(),c=Q(),{openToast:u}=xn(),{mutateAsync:d}=EP({reason:o}),{mutateAsync:m}=ice({reason:o}),[p,h]=f.useState(!1),[g,y]=f.useState(""),[v,x]=f.useState("file"),b=f.useCallback(()=>h(!1),[]),_=f.useCallback(M=>{ee.error(`${bp} file picker failed to open: ${M}`),u(c.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:bp}),"error",5)},[c,u]),w=f.useCallback(M=>{const k=M.map(T=>T.id);d({connectorName:"box",fileIds:v=="file"?k:[],fileRepoInfo:r?s:void 0,folder_ids:v=="folder"?k:[]}),r||l.push(`/account/files?connector=box&uploadCount=${k.length}`),b()},[l,d,r,s,b,v]),{openPicker:C,cleanupPicker:S}=ace({apiKey:g||e,mode:n,onPicked:w,onCancel:b,onError:_,isAudioVideoFilesEnabled:a}),E=f.useCallback(async(M="file")=>{if(t){const k=new Date(t);if(isNaN(k.getTime())){ee.error("Unparsable expiration timestamp from Box connector"),h(!0);return}if(k<new Date){const j=await m();y(j.api_key)}}h(!0),x(M)},[t,m]);return f.useEffect(()=>{p&&setTimeout(()=>{C(v)},100)},[p,C,v]),f.useMemo(()=>({isOpen:p,onOpen:E,onClose:b,cleanupPicker:S}),[S,p,b,E])},Sn="/account",Ju="/org",lce=()=>i.jsx("div",{className:"flex flex-1 items-center justify-end opacity-50",children:i.jsx(me,{icon:no,size:"sm"})}),Zt={Account:{show:!0,icon:bN,href:`${Sn}/details`},ProPerks:{show:!0,icon:Ste,href:`${Sn}/pro-perks`},Preferences:{show:!0,icon:vw,href:`${Sn}/preferences`},Personalize:{show:!0,icon:wte,href:`${Sn}/personalize`},Assistant:{show:!0,icon:$v,href:`${Sn}/assistant`},Connectors:{show:!0,icon:Cte,href:`${Sn}/connectors`},Imports:{show:!0,icon:NR,href:`${Sn}/files`},Products:{show:!0,icon:FMe,href:`${Sn}/purchases`},API:{show:!0,icon:Tte,href:`${Sn}/api`},Enterprise:{show:!0,icon:bi,trailingComponent:i.jsx(lce,{})},Reservations:{show:!0,icon:UMe,href:`${Sn}/reservations`},Notifications:{show:!0,icon:Ef,href:`${Sn}/notifications`},Tasks:{show:!0,icon:zd,href:`${Sn}/tasks`},Shortcuts:{show:!0,icon:$C,href:`${Sn}/shortcuts`},SiteInstructions:{show:!0,icon:DMe,href:`${Sn}/site-instructions`}},da={Organization:{show:!0,icon:bi,href:`${Sn}${Ju}/details`},Members:{show:!0,icon:VMe,href:`${Sn}${Ju}/members`},"User access":{show:!0,icon:WMe,href:`${Sn}${Ju}/user-access`},Permissions:{show:!0,icon:mp,href:`${Sn}${Ju}/permissions`},Insights:{show:!0,icon:Mte,href:`${Sn}${Ju}/insights`},"Org Connectors":{show:!0,icon:Cte,href:`${Sn}${Ju}/connectors`},"Org Imports":{show:!0,icon:NR,href:`${Sn}${Ju}/files`}},fa={APIGroup:{show:!0,icon:bi,href:`${Sn}/api/group`},APIMembers:{show:!0,icon:_N,href:`${Sn}/api/members`},APIBilling:{show:!0,icon:Ete,href:`${Sn}/api/billing`},UsageMetrics:{show:!0,icon:Mte,trailingComponent:i.jsx(lce,{})},AccountLimits:{show:!0,icon:BMe,href:`${Sn}/api/limits`},APIKeys:{show:!0,icon:kte,href:`${Sn}/api/keys`},APIFiles:{show:!0,icon:NR,href:`${Sn}/api/files`}},F$e=()=>`${Sn}/details`,kc=()=>Sn,cce=({clientId:e})=>{const[t,n]=f.useState(!1);f.useEffect(()=>{if(!e)return;const s=document.createElement("script");return s.src="https://www.dropbox.com/static/api/2/dropins.js",s.id="dropboxjs",s.setAttribute("data-app-key",e),s.onload=()=>n(!0),s.onerror=()=>n(!1),document.body.appendChild(s),()=>{const a=document.getElementById("dropboxjs");a&&document.body.removeChild(a)}},[e]);const r=f.useCallback(s=>{if(!t)return;let a=s.mode==="source"?vP:xP;a=s.isAudioVideoFilesEnabled?a.concat(bP):a,window.Dropbox.choose({success:s.onPicked,error:o=>s.onError?.(o),multiselect:!0,extensions:a,folderselect:s.mode==="source"})},[t]);return f.useMemo(()=>({isReady:t,openPicker:r}),[t,r])},U$e=({clientId:e,isSpace:t=!1,fileRepoInfo:n,isAudioVideoFilesEnabled:r,reason:s})=>{const a=_t(),o=Q(),{openToast:l}=xn(),{mutateAsync:c}=EP({reason:s}),{openPicker:u}=cce({clientId:e}),d=kc(),m=f.useCallback(g=>{const y=g.map(v=>v.id);c({connectorName:"dropbox",fileIds:y,fileRepoInfo:t?n:void 0}),t||a.push(`${d}/files?connector=dropbox&uploadCount=${y.length}`)},[a,c,t,n,d]),p=f.useCallback(g=>{ee.error("A Dropbox file picker error occured:",g),l(o.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:pc}),"error",5)},[o,l]),h=f.useCallback(g=>{u({mode:g,onPicked:m,onError:p,isAudioVideoFilesEnabled:r})},[u,m,p,r]);return f.useMemo(()=>({openPicker:h}),[h])};function B$e({reason:e}){return bt({mutationFn:async({connectionType:t,content:n})=>{await A$e({connectionType:t,content:n,reason:e})}})}const uce=({reason:e,mode:t})=>{const n=Q(),[r,s]=f.useState(!1),[a,o]=f.useState(null),{openToast:l}=xn(),{openModal:c,closeModal:u}=vt(),{openPicker:d,toPickerDocument:m}=v$e(),{mutateAsync:p}=B$e({reason:e}),h=f.useCallback(b=>{b.connector==="sharepoint"&&t==="attachment"?c("sharepointSiteModal",{onSelectSite:_=>{u(),b&&(s(!0),o({...b,webUrl:_}),d({...b,webUrl:_}))}}):(s(!0),o(b),b.connector==="onedrive"&&d(b))},[u,t,c,d]),g=f.useCallback(()=>{s(!1),o(null)},[s,o]),y=f.useCallback(b=>{ee.error("A Microsoft file picker error occured:",b),g(),l(n.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:D7e}),"error",5)},[g,l,n]),v=f.useCallback((b,_)=>{p({connectionType:b,content:_})},[p]),x=f.useCallback(b=>{a&&(o({...a,webUrl:b}),d({...a,webUrl:b}))},[a,d]);return f.useMemo(()=>({onOpen:h,onClose:g,onError:y,onSelectSite:x,toPickerDocument:m,log:v,isOpen:r,options:a}),[r,v,g,y,h,x,a,m])},dce=/(\[\d{1,3}\])/,V$e=/(\[\d{1,3},\s*\{ts:.*\}\])/,QS=new RegExp(dce.source+"|"+V$e.source),wDt=(e,t)=>{if(QS.test(e))if(dce.test(e)){const n=parseInt(e.substring(1,e.length-1))-1,r=t?.[n]??null;return r||void 0}else{const n=e.indexOf(","),r=parseInt(e.substring(1,n))-1,s=t?.[r]??null;if(!s)return;if(!s.url){ee.warn("[parseCitation] web_result has no url",{web_result:s});return}return s.url=W$e(s.url,e),s}},W$e=(e,t)=>{const n=e.split("&")[0],r=t.indexOf(":");if(r===-1)return n;const s=t.indexOf("}"),a=t.substring(r+1,s);return n+`&t=${a}`},$$e=e=>{const t=un.legacyParseBackendOutputStr(e);return t?t.answer.replace(QS,""):null};function H$e(e,t){return e.startsWith("http")?e:t?`/discover/${t}/${e}`:`/page/${e}`}const z$e=e=>{const t=e.mode==="article"?"/page":"/search";return{title:e.title??"",preview:$$e(e.first_answer),threadCount:e.query_count,lastUpdated:e.last_query_datetime,href:`${t}/${e.slug}`,rwToken:e.read_write_token,focus:e.search_focus??"internet",entryUUID:e.uuid,contextUUID:e.context_uuid,copilot:e.mode==="copilot",socialInfo:e.social_info,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,featuredImage:e?.featured_images?.[0]?.image??null,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,threadAccess:e.thread_access,collection:e.collection,mode:e.mode,expiry:e.expiry_time,source:e?.source??null,displayModel:e.display_model,slug:e.slug}},CDt=(e,t)=>({title:e.title??"",summary:e.summary??"",description:e.description??"",href:H$e(e.slug,t),backendUUID:e.uuid,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,authorUsername:e.author_username??null,featuredImage:e?.featured_images?.[0]?.image??null,collection:e.collection,socialInfo:e.social_info,feedbackState:e.feedback_state,supportedFeedbacks:e.supported_feedbacks,accessLevel:e.access??e.thread_access,preview:e.description.replace(QS,""),offset:e.hero_offset,entryUUID:e.uuid,rwToken:e.read_write_token,lastUpdated:e.last_query_datetime,threadAccess:e.access,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,contextUUID:e.context_uuid,webResults:e.web_results_preview,feedUUID:e.feed_uuid}),SDt={gpt4_limit:"gpt4Limit",gpt4_total:"gpt4Total",opus_limit:"opusLimit",pages_limit:"pagesLimit",upload_limit:"uploadLimit",article_image_upload_limit:"articleImageUploadLimit",max_files_per_user:"maxFilesPerUser",max_files_per_repository:"maxFilesPerRepository",default_image_generation_model:"defaultImageGenerationModel",query_count:"queryCount",query_count_copilot:"queryCountCopilot",query_count_mobile:"queryCountMobile",has_ai_profile:"hasAiProfile",referral_code:"referralCode",referral_num_success:"referralNumSuccess",referral_num_coupons:"referralNumCoupons",disable_training:"disableTraining",is_sidebar_collapsed:"isSidebarCollapsed",is_sidebar_pinned:"isSidebarPinned",sidebar_hidden_hubs:"sidebarHiddenHubs",subscription_tier:"subscriptionTier",create_limit:"createLimit",notif_status:"notifStatus",email_status:"emailStatus",allow_article_creation:"allowArticleCreation",is_verified:"isVerified"};function G$e(e){return e||{connectors:[]}}const xH=e=>({hasLoadedSettings:!0,gpt4Limit:e?.gpt4_limit??0,gpt4Total:e?.gpt4_total??0,pplxAlphaLimit:e?.pplx_alpha_limit??0,pplxBetaLimit:e?.pplx_beta_limit??0,pagesLimit:e?.pages_limit??0,uploadLimit:e?.upload_limit,defaultImageGenerationModel:e?.default_image_generation_model??"default",articleImageUploadLimit:e?.article_image_upload_limit??0,maxFilesPerUser:e?.max_files_per_user??0,maxFilesPerRepository:e?.max_files_per_repository??0,queryCount:e?.query_count??0,queryCountCopilot:e?.query_count_copilot??0,queryCountMobile:e?.query_count_mobile??0,hasAiProfile:e?.has_ai_profile??!1,referralCode:e?.referral_code??"",referralNumSuccess:e?.referral_num_success??0,referralNumCoupons:e?.referral_num_coupons??0,disableTraining:e?.disable_training??!1,isSidebarCollapsed:e?.is_sidebar_collapsed??!1,isSidebarPinned:e?.is_sidebar_pinned??!1,sidebarHiddenHubs:e?.sidebar_hidden_hubs??[],subscriptionTier:e?.subscription_tier??e?.subscription_tier??"null",stripeStatus:e?.stripe_status??"none",revenuecatStatus:e?.revenuecat_status??"none",revenuecatSource:e?.revenuecat_source??"none",createLimit:e?.create_limit??0,notifStatus:e?.notif_status??"daily",emailStatus:e?.email_status??"daily",hasDataRetentionWarning:e?.has_data_retention_warning??!1,allowArticleCreation:e?.allow_article_creation??!1,isVerified:e?.is_verified??!1,connectors:G$e(e?.connectors),connectorLimits:e?.connector_limits??{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}});function q$e(e,t){return e?e.place_widget_block&&t.place_widget_block?{...t,place_widget_block:{...e.place_widget_block,review_summary:t.place_widget_block.review_summary}}:e.shopping_widget_block&&t.shopping_widget_block?{...t,shopping_widget_block:{...e.shopping_widget_block,review_summary:t.shopping_widget_block.review_summary}}:t:t}var BA;(function(e){e.SAVE_PROFILE="save_profile",e.DELETE_PROFILE="delete_profile",e.TOGGLE_DISABLED="toggle_disabled"})(BA||(BA={}));const K$e=async({profileName:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/auth/get_special_profile",t,{params:{query:{profile_name:e}},timeoutMs:1500,numRetries:1});if(n||!r)throw new Ee("API_CLIENTS_ERROR",{message:`Failed to get special profile ${e}`,cause:n});return{unlimitedProSearch:!!r.unlimited_pro_search,maxModelSelection:!!r.max_model_selection,unlimitedResearch:!!r.unlimited_research,fileUpload:!!r.file_upload}}catch(n){return ee.error(n),{unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1}}},MP=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/user/subscription/refresh",e,{timeoutMs:Pe(),headers:{"X-Perplexity-CSRF-Protection":"1"}});if(t)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to refresh subscription status",cause:t});return n}catch(t){return ee.error(t),null}},fce={has_profile:!1,disabled:!1,bio:"",location:"",response_language:"",location_lng:"",location_lat:"",use_memory:!1,use_search_history:!1,language:""},Y$e=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/user/get_user_ai_profile",t,{timeoutMs:1500,numRetries:Sc,headers:e});if(n||!r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get user profile",cause:n});return r}catch(n){return ee.error(n),fce}},Q$e=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/user/settings",t,{timeoutMs:1500,numRetries:Sc,headers:e});if(n||!r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get user settings",cause:n});return xH(r)}catch(n){return ee.error(n),xH({})}},EDt=async({amount:e,headers:t,reason:n})=>{try{const{error:r,data:s}=await ne.GET("/rest/shopping/user-discount-offer",n,{params:{query:{amount_micros:e}},headers:t});if(r||!s)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch user discount offer",cause:r});return s}catch(r){return ee.error(r),{}}},MDt=async({action:e,location:t,response_language:n,bio:r,location_lat:s,location_lng:a,use_memory:o,use_search_history:l,reason:c})=>{const u={...t!==void 0&&{location:t},...n!==void 0&&{response_language:n},...r!==void 0&&{bio:r},...s!==void 0&&{location_lat:s},...a!==void 0&&{location_lng:a},...o!==void 0&&{use_memory:o},...l!==void 0&&{use_search_history:l},version:wi},{error:d,data:m}=await ne.POST("/rest/user/save_user_ai_profile",c,{body:{action:e,updated_profile:u},timeoutMs:Pe(),numRetries:1});if(d)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to save user ai profile",cause:d});return m},bH=async({type:e,value:t,reason:n})=>{const r=e==="memory"?{use_memory:t}:{use_search_history:t},{error:s,data:a}=await ne.POST("/rest/user/save_user_ai_profile",n,{timeoutMs:Pe(),numRetries:1,headers:{"content-type":"application/json"},body:{action:BA.SAVE_PROFILE,updated_profile:{...r,version:wi}}});if(s)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to update personal search settings",cause:s});return a},kDt=async({settings:e,reason:t})=>{const{error:n}=await ne.PUT("/rest/user/save-settings",t,{body:{updated_settings:e},timeoutMs:Pe(),numRetries:1});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to save user settings",cause:n});return{status:"success"}},X$e=async({reason:e})=>{const{error:t,data:n}=await ne.GET("/rest/user/previous-subscription",e,{timeoutMs:3e3,numRetries:1});if(t)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get user previous subscription",cause:t});return n},TDt=async({reason:e})=>{const{error:t,data:n}=await ne.GET("/rest/user/carrier-billing-subscription",e,{timeoutMs:Pe({productionMs:2e3})});if(t)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch carrier billing subscription status",cause:t});return n},Z$e=async({filters:e,skipToken:t,reason:n})=>{const{error:r,data:s}=await ne.POST("/rest/connectors/sharepoint/sites",n,{body:{filters:e,skip_token:t},timeoutMs:Pe({productionMs:500}),numRetries:1});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch sharepoint sites",cause:r});return{sites:s.sites,skipToken:s.skip_token}},NDt=async({orgId:e,reason:t,tokenName:n})=>{const{error:r,data:s}=await ne.POST("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",t,{params:{path:{api_org_id:e}},body:{token_name:n},timeoutMs:5e3});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to generate user api key v2",cause:r});return s},ADt=async({orgId:e,authToken:t,reason:n})=>{const{error:r,data:s}=await ne.DELETE("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",n,{params:{path:{api_org_id:e}},body:{auth_token:t},timeoutMs:5e3});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to delete user api key v2",cause:r});return s},J$e=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/auth/check_government_request_origin",e,{timeoutMs:1500,numRetries:Sc});if(t||!n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to check government origin",cause:t});return{isGovernmentRequestOrigin:n.is_government_request_origin}}catch(t){return ee.error(t),{isGovernmentRequestOrigin:!1}}},jDt=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/user/site-instructions",e,{timeoutMs:1500,numRetries:Sc});if(t||!n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get user site instructions",cause:t});return n}catch(t){return ee.error(t),{site_instructions:{}}}},RDt=async({siteInstructions:e,reason:t})=>{const{error:n,data:r}=await ne.PUT("/rest/user/site-instructions",t,{body:{site_instructions:e},timeoutMs:Pe(),numRetries:1});if(n||!r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to save user site instructions",cause:n});return r},IDt=async({site:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/user/site-instructions/{site}/reset",t,{params:{path:{site:e}},timeoutMs:Pe(),numRetries:1});if(n||!r)throw new Ee("API_CLIENTS_ERROR",{message:`Failed to reset site instruction for ${e}`,cause:n});return r},eHe=()=>{const e=Tn("isCollapsed"),{device:{isWindowsApp:t}}=Et();return e===null?t:e==="true"},Ds=({enabled:e,reason:t,refetchOnMount:n})=>{const{locale:r}=Q(),s=r?{"accept-language":r}:{},a=async()=>Q$e({headers:s,reason:t}),o=Qe(),l=eHe(),{data:c,refetch:u,isLoading:d}=$e({enabled:o?typeof e>"u"?!0:e:!1,queryKey:HS(),queryFn:a,networkMode:"always",refetchOnMount:n});return f.useEffect(()=>{c&&J5e({queryCount:c.queryCount,queryCountCopilot:c.queryCountCopilot,queryCountMobile:c.queryCountMobile})},[c]),{...c?{...c,isSidebarCollapsed:l}:{hasLoadedSettings:!1,gpt4Limit:void 0,gpt4Total:void 0,pplxAlphaLimit:void 0,pplxBetaLimit:void 0,pagesLimit:0,uploadLimit:void 0,articleImageUploadLimit:0,defaultImageGenerationModel:"default",queryCount:void 0,queryCountCopilot:void 0,queryCountMobile:void 0,hasAiProfile:!1,referralCode:void 0,referralNumSuccess:void 0,referralNumCoupons:void 0,disableTraining:!1,defaultCopilot:!1,isSidebarCollapsed:l,subscriptionTier:void 0,stripeStatus:"none",revenuecatStatus:"none",revenuecatSource:"none",createLimit:0,notifStatus:void 0,emailStatus:void 0,hasDataRetentionWarning:!1,allowArticleCreation:!1,connectors:{connectors:le},connectorLimits:{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}},refetch:u,isLoading:d}},h1=({reason:e})=>{const{connectors:t}=Ds({reason:e}),n=f.useMemo(()=>(t?.connectors??[]).reduce((r,s)=>(r[s.name]=s,r),{}),[t]);return f.useMemo(()=>({connectorsMap:n}),[n])},kP=({reason:e})=>{const{connectors:t}=Ds({reason:e}),{connectorsMap:n}=h1({reason:e}),r=f.useMemo(()=>(t?.connectors??[]).filter(a=>(a.name==="google_drive"||a.name==="onedrive"||a.name==="sharepoint"||a.name==="dropbox"||a.name==="box")&&!n[a.name]?.connected),[n,t]),s=f.useMemo(()=>(t?.connectors??[]).filter(a=>!n[a.name]?.connected),[n,t]);return f.useMemo(()=>({disabledFileConnectors:r,disabledConnectors:s}),[s,r])},g1=({reason:e})=>{const{connectors:t,isLoading:n}=Ds({reason:e}),{connectorsMap:r}=h1({reason:e}),s=f.useMemo(()=>(t?.connectors??[]).filter(l=>JW.includes(l.name)&&r[l.name]&&r[l.name].connected),[r,t]),a=f.useMemo(()=>(t?.connectors??[]).filter(l=>!JW.includes(l.name)&&r[l.name]&&r[l.name].connected),[r,t]),o=f.useMemo(()=>(t?.connectors??[]).filter(l=>r[l.name]&&r[l.name].connected),[r,t]);return f.useMemo(()=>({enabledFileConnectors:s,enabledNonFileConnectors:a,enabledConnectors:o,isConnectorsLoading:n}),[o,s,a,n])};function dl(e,t){ee.info("Redirecting window",{reason:t,url:window.location.href,redirect:eMe(e).toString()}),window.location.href=e}const XS=({reason:e})=>{const t=Dt(),n=t?.get("referrer"),r=t?.get("referrerId"),{$t:s}=Q(),{openToast:a}=xn(),o=f.useCallback(async({connectorName:l,redirectPath:c,customReferrer:u,customReferrerId:d,unauthedRedirectPath:m})=>{const p=await S$e({name:l,referrer:u??n??void 0,referrerId:d??r??void 0,redirectPath:c??void 0,unauthedRedirectPath:m??void 0,reason:e});if(!p){a(s({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3);return}dl(p,"File connector")},[e,n,r,s,a]);return f.useMemo(()=>({handleConnect:o}),[o])},TP=({mode:e})=>{const t=Nt(),n=xi(),{currentOpenedModal:r}=vt(),s=f.useMemo(()=>t?.startsWith("/collections")||t?.startsWith("/spaces")?r==="uploadFilesModal"?"space_sources":"space":t?.startsWith("/search")?"thread":t?.startsWith("/settings")?null:"ask",[t,r]),a=f.useMemo(()=>n===null?null:t?.startsWith("/collections")||t?.startsWith("/spaces")?n.slug?typeof n.slug=="string"?n.slug:n.slug[0]??null:null:t?.startsWith("/search")?t.split("/").pop()??null:t?.startsWith("/settings")?null:e??null,[t,n,e]),o=kc(),l=f.useMemo(()=>{const c=`${o}/connectors`,u=new URLSearchParams;if(s){const d=Array.isArray(a)?a[0]:a;u.append("referrer",s),d&&u.append("referrerId",d)}return c+"?"+u.toString()},[s,a,o]);return f.useMemo(()=>({referrer:s,referrerId:a,redirectPath:l}),[l,s,a])},mce=({fileRepositoryType:e,offset:t,searchTerm:n,ownerId:r,reason:s})=>{const{$t:a}=Q(),o=mt(),l=xi(),{openToast:c}=xn(),{isEnterprise:u}=gn({reason:s}),d=Nh(),m=zS(e,r,za,t,n),p=sP(r),h=Array.isArray(l?.slug)?l.slug[0]:l?.slug,g=h?tP(h):void 0,y=e==="USER"||e==="ORG"||e==="COLLECTION"&&!!r;return{...bt({mutationFn:async x=>{if(!y){c(a({defaultMessage:"Unable to delete files.",id:"QYfmPDehhb"}),"error",3);return}return j$e({request:{file_uuids:x,file_repository_info:{file_repository_type:e,owner_id:r}},reason:s})},onMutate:async x=>{await o.cancelQueries({queryKey:m});const b=o.getQueryData(m);return b&&o.setQueryData(m,_=>({..._,completedFiles:_.completedFiles.filter(w=>!x.includes(w.file_uuid)),processingFiles:_.processingFiles.filter(w=>!x.includes(w.file_uuid)),failedFiles:_.failedFiles.filter(w=>!x.includes(w.file_uuid)),numTotalFiles:Math.max((_.numTotalFiles||0)-x.length,0)})),{previousData:b}},onSuccess:()=>{u&&o.invalidateQueries({queryKey:d}),o.invalidateQueries({queryKey:m}),h&&o.invalidateQueries({queryKey:g}),o.invalidateQueries({queryKey:p})},onError:(x,b,_)=>{_?.previousData&&o.setQueryData(m,_.previousData),c(a({defaultMessage:"Failed to delete file",id:"aJlra1/tgY"}),"error",3)}}),isDeleteEnabled:y}},tHe=({fileRepoInfo:e,reason:t})=>{const n=mt(),r=xi(),s=Nh(),a=Array.isArray(r?.slug)?r.slug[0]:r?.slug,o=a?tP(a):void 0,l=zS(e.file_repository_type,e.owner_id,za,0,""),c=["list_file_directory",e.file_repository_type,e.owner_id];return bt({mutationFn:async u=>{await gP({request:{file_repository_info:e,file_index_params:[{file_s3_url:u.file_s3_url,file_size:u.size,filename:u.name,file_uuid:u.file_uuid,replace_existing:!0}]},reason:t})},onMutate:async u=>{await n.cancelQueries({queryKey:l});const d={...u,state:"PROCESSING",error:void 0};return n.setQueriesData({queryKey:l},m=>{if(!m)return m;const p=m.completedFiles.filter(y=>y.name!==d.name),h=m.failedFiles.filter(y=>y.file_uuid!==d.file_uuid),g=[...m.processingFiles||[],d];return{...m,completedFiles:p,processingFiles:g,failedFiles:h}}),d},onSettled:()=>{n.invalidateQueries({queryKey:c}),e.file_repository_type==="ORG"&&n.invalidateQueries({queryKey:s}),a&&n.invalidateQueries({queryKey:o})}})},_H=10,nHe=async(e,t)=>{const s=new FormData;Object.entries(t.fields).forEach(([o,l])=>{s.append(o,l)}),s.append("file",e);let a=null;for(let o=0;o<1;o++)try{o>0&&await new Promise(c=>setTimeout(c,2e3));const l=await fetch(t.s3_bucket_url,{method:"POST",body:s});if(!l.ok)throw new Error(`HTTP error ${l.status}: ${l.statusText}`);return}catch(l){a=l instanceof Error?l:new Error(String(l))}throw new Error(`UPLOAD_FAILED after 1 attempts: ${a?.message||"Unknown error"}`)},pce=({fileRepoInfo:e,setTotalFilesUploading:t,replaceExisting:n,reason:r,onLocalFileUploadSuccess:s})=>{const{$t:a}=Q(),o=mt(),l=Nh(),c=xi(),u=Array.isArray(c?.slug)?c.slug[0]:c?.slug,d=u?tP(u):void 0,{openToast:m}=xn(),{session:p}=Ct(),h=p?.user?.email??"",g=Ds({reason:r}),y=["list_file_directory",e.file_repository_type,e.owner_id],v=["list_file_directory_infinite",e.file_repository_type,e.owner_id],x=e.file_repository_type==="USER"||e.file_repository_type==="ORG"||e.file_repository_type==="COLLECTION"&&!!e.owner_id;return{...bt({mutationFn:async _=>{if(!x){m(a({defaultMessage:"Unable to upload files.",id:"GrtfijFWiu"}),"error",3);return}t(_.length);for(let w=0;w<_.length;w+=_H){const C=_.slice(w,w+_H),S=await ZWe({request:{file_upload_params:C.map(T=>({filename:T.name,content_type:T.type,file_size:T.size})),file_repository_info:e},reason:r}),E=S.limits_reached[0];if(E==="FILE_REPOSITORY_LIMIT_EXCEEDED"){const T=g.maxFilesPerRepository;m(a({defaultMessage:"You have reached the file limit of {limit} files per repository.",id:"J0uyf2gB1u"},{limit:T}),"error",3);break}else if(E==="USER_FILE_LIMIT_EXCEEDED"){const T=g.maxFilesPerUser;m(a({defaultMessage:"You've reached your total file limit of {limit} files across My Files and all Spaces. Delete some files or upgrade your plan to add more",id:"3CuAQ4xs/C"},{limit:T}),"error",3);break}const k=(await Promise.allSettled(S.file_url_params.map((T,j)=>T&&C[j]?{fileUploadUrlInfo:T,file:C[j]}:null).filter(T=>T!==null).map(async({fileUploadUrlInfo:T,file:j})=>{try{return await nHe(j,T),{file_s3_url:T.s3_object_url,filename:j.name,file_size:j.size,file_uuid:T.file_uuid,replace_existing:n}}catch(R){throw m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),R}}))).filter(T=>T.status==="fulfilled").map(T=>T.value);if(k.length>0&&await gP({request:{file_repository_info:e,file_index_params:k},reason:r}),S.limits_reached.length>0)break}},onMutate:async _=>{await o.cancelQueries({queryKey:y});const w=o.getQueryData(y),C=_.map(S=>({name:S.name,file_s3_url:"",file_title:null,file_description:null,file_uuid:dr(),uploadedBy:h,state:"PROCESSING",size:S.size,date:new Date().toLocaleString(),isOptimistic:!0}));return o.setQueriesData({queryKey:y},S=>S&&{...S,processingFiles:[...S.processingFiles||[],...C]}),{previousData:w,optimisticFiles:C,uploadedFilesCount:_.length}},onError:(_,w,C)=>{m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),C?.previousData&&o.setQueriesData({queryKey:y},C.previousData)},onSettled:()=>{o.invalidateQueries({queryKey:y}),o.invalidateQueries({queryKey:v}),o.invalidateQueries({queryKey:["connector-files"]}),o.invalidateQueries({queryKey:["connector-files-infinite"]}),e.file_repository_type==="ORG"&&o.invalidateQueries({queryKey:l}),u&&o.invalidateQueries({queryKey:d})},onSuccess:()=>{s?.()}}),isUploadEnabled:x}},hce=({reason:e,onLocalFileUploadSuccess:t,collectionSlugOverride:n})=>{const r=mt(),{fileRepoInfo:s}=Do({reason:e,collectionSlugOverride:n}),[a,o]=f.useState(0),[l,c]=f.useState(""),[u,d]=f.useState(0),{mutate:m}=pce({fileRepoInfo:s,setTotalFilesUploading:d,reason:e,onLocalFileUploadSuccess:t}),{mutate:p}=mce({fileRepositoryType:s.file_repository_type,offset:a,searchTerm:l,ownerId:s.owner_id,reason:e}),{mutate:h}=tHe({fileRepoInfo:s,reason:e}),g=f.useCallback(b=>{p(b),u>0&&d(u-b.length)},[p,u]),y=f.useCallback(b=>{d(_=>_+1),h(b)},[h]),v=f.useCallback(b=>{r.setQueryData(["list_file_directory",s.file_repository_type,s.owner_id,za,a,l],_=>({..._,processingFiles:[],failedFiles:[],numTotalFiles:Math.max(0,(_?.numTotalFiles??0)-b.length)})),p(b.map(_=>_.file_uuid))},[s.file_repository_type,s.owner_id,a,l,r,p]),x=f.useCallback(async b=>{const _=[],w=async C=>{if(C.isFile){const S=await new Promise(E=>C.file(E));S.type!==""&&_.push(S)}else if(C.isDirectory){const S=C.createReader(),E=await new Promise(M=>S.readEntries(M));await Promise.all(E.map(w))}};b instanceof FileList?Array.from(b).forEach(C=>_.push(C)):await Promise.all(Array.from(b).map(async C=>{if(C.kind==="file"){const S=C.webkitGetAsEntry();S&&await w(S)}})),_.length>0&&m(_)},[m]);return f.useMemo(()=>({offset:a,setOffset:o,searchTerm:l,setSearchTerm:c,totalFilesUploading:u,setTotalFilesUploading:d,handleRemoveFiles:g,handleReplaceExistingFile:y,handleClearAllFiles:v,handleFileSelect:x}),[v,x,g,y,a,l,u])};var a4={},o4={},ub={},i4={},wH;function y1(){return wH||(wH=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BANDIT_ASSIGNMENT_SHARDS=e.MAX_EVENT_QUEUE_SIZE=e.NULL_SENTINEL=e.SESSION_ASSIGNMENT_CONFIG_LOADED=e.BANDIT_ENDPOINT=e.UFC_ENDPOINT=e.BASE_URL=e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=e.POLL_JITTER_PCT=e.POLL_INTERVAL_MS=e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS=void 0,e.DEFAULT_REQUEST_TIMEOUT_MS=5e3,e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS,e.POLL_INTERVAL_MS=3e4,e.POLL_JITTER_PCT=.1,e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=1,e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=7,e.BASE_URL="https://fscdn.eppo.cloud/api",e.UFC_ENDPOINT="/flag-config/v1/config",e.BANDIT_ENDPOINT="/flag-config/v1/bandits",e.SESSION_ASSIGNMENT_CONFIG_LOADED="eppo-session-assignment-config-loaded",e.NULL_SENTINEL="EPPO_NULL",e.MAX_EVENT_QUEUE_SIZE=100,e.BANDIT_ASSIGNMENT_SHARDS=1e4}(i4)),i4}var CH;function gce(){if(CH)return ub;CH=1,Object.defineProperty(ub,"__esModule",{value:!0});const e=y1();class t{constructor(r){var s;this.params=r,this.params.baseUrl=(s=r.baseUrl)!==null&&s!==void 0?s:e.BASE_URL}endpoint(r){var s;const a=new URL(this.params.baseUrl+r);return Object.entries((s=this.params.queryParams)!==null&&s!==void 0?s:{}).forEach(([o,l])=>a.searchParams.append(o,l)),a}ufcEndpoint(){return this.endpoint(e.UFC_ENDPOINT)}banditParametersEndpoint(){return this.endpoint(e.BANDIT_ENDPOINT)}}return ub.default=t,ub}var ed={},Ig={exports:{}},l4,SH;function rHe(){if(SH)return l4;SH=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}l4=t;function t(n,r,s){var a=s&&s.stringify||e,o=1;if(typeof n=="object"&&n!==null){var l=r.length+o;if(l===1)return n;var c=new Array(l);c[0]=a(n);for(var u=1;u<l;u++)c[u]=a(r[u]);return c.join(" ")}if(typeof n!="string")return n;var d=r.length;if(d===0)return n;for(var m="",p=1-o,h=-1,g=n&&n.length||0,y=0;y<g;){if(n.charCodeAt(y)===37&&y+1<g){switch(h=h>-1?h:0,n.charCodeAt(y+1)){case 100:case 102:if(p>=d||r[p]==null)break;h<y&&(m+=n.slice(h,y)),m+=Number(r[p]),h=y+2,y++;break;case 105:if(p>=d||r[p]==null)break;h<y&&(m+=n.slice(h,y)),m+=Math.floor(Number(r[p])),h=y+2,y++;break;case 79:case 111:case 106:if(p>=d||r[p]===void 0)break;h<y&&(m+=n.slice(h,y));var v=typeof r[p];if(v==="string"){m+="'"+r[p]+"'",h=y+2,y++;break}if(v==="function"){m+=r[p].name||"<anonymous>",h=y+2,y++;break}m+=a(r[p]),h=y+2,y++;break;case 115:if(p>=d)break;h<y&&(m+=n.slice(h,y)),m+=String(r[p]),h=y+2,y++;break;case 37:h<y&&(m+=n.slice(h,y)),m+="%",h=y+2,y++,p--;break}++p}++y}return h===-1?n:(h<g&&(m+=n.slice(h)),m)}return l4}var EH;function sHe(){if(EH)return Ig.exports;EH=1;const e=rHe();Ig.exports=d;const t=P().console||{},n={mapHttpRequest:E,mapHttpResponse:E,wrapRequestSerializer:M,wrapResponseSerializer:M,wrapErrorSerializer:M,req:E,res:E,err:C,errWithCause:C};function r(N,I){return N==="silent"?1/0:I.levels.values[N]}const s=Symbol("pino.logFuncs"),a=Symbol("pino.hierarchy"),o={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function l(N,I){const D={logger:I,parent:N[a]};I[a]=D}function c(N,I,D){const F={};I.forEach(B=>{F[B]=D[B]?D[B]:t[B]||t[o[B]||"log"]||k}),N[s]=F}function u(N,I){return Array.isArray(N)?N.filter(function(F){return F!=="!stdSerializers.err"}):N===!0?Object.keys(I):!1}function d(N){N=N||{},N.browser=N.browser||{};const I=N.browser.transmit;if(I&&typeof I.send!="function")throw Error("pino: transmit option must have a send function");const D=N.browser.write||t;N.browser.write&&(N.browser.asObject=!0);const F=N.serializers||{},B=u(N.browser.serialize,F);let V=N.browser.serialize;Array.isArray(N.browser.serialize)&&N.browser.serialize.indexOf("!stdSerializers.err")>-1&&(V=!1);const $=Object.keys(N.customLevels||{}),G=["error","fatal","warn","info","debug","trace"].concat($);typeof D=="function"&&G.forEach(function(J){D[J]=D}),(N.enabled===!1||N.browser.disabled)&&(N.level="silent");const X=N.level||"info",Y=Object.create(D);Y.log||(Y.log=k),c(Y,G,D),l({},Y),Object.defineProperty(Y,"levelVal",{get:H}),Object.defineProperty(Y,"level",{get:Z,set:re});const W={transmit:I,serialize:B,asObject:N.browser.asObject,formatters:N.browser.formatters,levels:G,timestamp:S(N)};Y.levels=m(N),Y.level=X,Y.setMaxListeners=Y.getMaxListeners=Y.emit=Y.addListener=Y.on=Y.prependListener=Y.once=Y.prependOnceListener=Y.removeListener=Y.removeAllListeners=Y.listeners=Y.listenerCount=Y.eventNames=Y.write=Y.flush=k,Y.serializers=F,Y._serialize=B,Y._stdErrSerialize=V,Y.child=q,I&&(Y._logEvent=w());function H(){return r(this.level,this)}function Z(){return this._level}function re(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,g(this,W,Y,"error"),g(this,W,Y,"fatal"),g(this,W,Y,"warn"),g(this,W,Y,"info"),g(this,W,Y,"debug"),g(this,W,Y,"trace"),$.forEach(te=>{g(this,W,Y,te)})}function q(J,te){if(!J)throw new Error("missing bindings for child Pino");te=te||{},B&&J.serializers&&(te.serializers=J.serializers);const se=te.serializers;if(B&&se){var de=Object.assign({},F,se),fe=N.browser.serialize===!0?Object.keys(de):B;delete J.serializers,b([J],fe,de,this._stdErrSerialize)}function ve(ie){this._childLevel=(ie._childLevel|0)+1,this.bindings=J,de&&(this.serializers=de,this._serialize=fe),I&&(this._logEvent=w([].concat(ie._logEvent.bindings,J)))}ve.prototype=this;const ue=new ve(this);return l(this,ue),ue.level=this.level,ue}return Y}function m(N){const I=N.customLevels||{},D=Object.assign({},d.levels.values,I),F=Object.assign({},d.levels.labels,p(I));return{values:D,labels:F}}function p(N){const I={};return Object.keys(N).forEach(function(D){I[N[D]]=D}),I}d.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},d.stdSerializers=n,d.stdTimeFunctions=Object.assign({},{nullTime:T,epochTime:j,unixTime:R,isoTime:O});function h(N){const I=[];N.bindings&&I.push(N.bindings);let D=N[a];for(;D.parent;)D=D.parent,D.logger.bindings&&I.push(D.logger.bindings);return I.reverse()}function g(N,I,D,F){if(Object.defineProperty(N,F,{value:r(N.level,D)>r(F,D)?k:D[s][F],writable:!0,enumerable:!0,configurable:!0}),!I.transmit&&N[F]===k)return;N[F]=v(N,I,D,F);const B=h(N);B.length!==0&&(N[F]=y(B,N[F]))}function y(N,I){return function(){return I.apply(this,[...N,...arguments])}}function v(N,I,D,F){return function(B){return function(){const $=I.timestamp(),G=new Array(arguments.length),X=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var Y=0;Y<G.length;Y++)G[Y]=arguments[Y];if(I.serialize&&!I.asObject&&b(G,this._serialize,this.serializers,this._stdErrSerialize),I.asObject||I.formatters?B.call(X,x(this,F,G,$,I.formatters)):B.apply(X,G),I.transmit){const W=I.transmit.level||N._level,H=D.levels.values[W],Z=D.levels.values[F];if(Z<H)return;_(this,{ts:$,methodLevel:F,methodValue:Z,transmitValue:D.levels.values[I.transmit.level||N._level],send:I.transmit.send,val:r(N._level,D)},G)}}}(N[s][F])}function x(N,I,D,F,B={}){const{level:V=()=>N.levels.values[I],log:$=Z=>Z}=B;N._serialize&&b(D,N._serialize,N.serializers,N._stdErrSerialize);const G=D.slice();let X=G[0];const Y={};F&&(Y.time=F),Y.level=V(I,N.levels.values[I]);let W=(N._childLevel|0)+1;if(W<1&&(W=1),X!==null&&typeof X=="object"){for(;W--&&typeof G[0]=="object";)Object.assign(Y,G.shift());X=G.length?e(G.shift(),G):void 0}else typeof X=="string"&&(X=e(G.shift(),G));return X!==void 0&&(Y.msg=X),$(Y)}function b(N,I,D,F){for(const B in N)if(F&&N[B]instanceof Error)N[B]=d.stdSerializers.err(N[B]);else if(typeof N[B]=="object"&&!Array.isArray(N[B]))for(const V in N[B])I&&I.indexOf(V)>-1&&V in D&&(N[B][V]=D[V](N[B][V]))}function _(N,I,D){const F=I.send,B=I.ts,V=I.methodLevel,$=I.methodValue,G=I.val,X=N._logEvent.bindings;b(D,N._serialize||Object.keys(N.serializers),N.serializers,N._stdErrSerialize===void 0?!0:N._stdErrSerialize),N._logEvent.ts=B,N._logEvent.messages=D.filter(function(Y){return X.indexOf(Y)===-1}),N._logEvent.level.label=V,N._logEvent.level.value=$,F(V,N._logEvent,G),N._logEvent=w(X)}function w(N){return{ts:0,messages:[],bindings:N||[],level:{label:"",value:0}}}function C(N){const I={type:N.constructor.name,msg:N.message,stack:N.stack};for(const D in N)I[D]===void 0&&(I[D]=N[D]);return I}function S(N){return typeof N.timestamp=="function"?N.timestamp:N.timestamp===!1?T:j}function E(){return{}}function M(N){return N}function k(){}function T(){return!1}function j(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function O(){return new Date(Date.now()).toISOString()}function P(){function N(I){return typeof I<"u"&&I}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return N(self)||N(window)||N(this)||{}}}return Ig.exports.default=d,Ig.exports.pino=d,Ig.exports}var MH;function ZS(){if(MH)return ed;MH=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.logger=ed.loggerPrefix=void 0;const e=sHe();return ed.loggerPrefix="[Eppo SDK]",ed.logger=(0,e.default)({level:"warn",browser:{disabled:!0}}),ed}var Ua={},Il={},V_={exports:{}},aHe=V_.exports,kH;function oHe(){return kH||(kH=1,function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:typeof window<"u"?window:typeof Ya<"u"?Ya:aHe,function(){var n="3.7.7",r=n,s=typeof Buffer=="function",a=typeof TextDecoder=="function"?new TextDecoder:void 0,o=typeof TextEncoder=="function"?new TextEncoder:void 0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=Array.prototype.slice.call(l),u=function(W){var H={};return W.forEach(function(Z,re){return H[Z]=re}),H}(c),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,m=String.fromCharCode.bind(String),p=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(W){return new Uint8Array(Array.prototype.slice.call(W,0))},h=function(W){return W.replace(/=/g,"").replace(/[+\/]/g,function(H){return H=="+"?"-":"_"})},g=function(W){return W.replace(/[^A-Za-z0-9\+\/]/g,"")},y=function(W){for(var H,Z,re,q,J="",te=W.length%3,se=0;se<W.length;){if((Z=W.charCodeAt(se++))>255||(re=W.charCodeAt(se++))>255||(q=W.charCodeAt(se++))>255)throw new TypeError("invalid character found");H=Z<<16|re<<8|q,J+=c[H>>18&63]+c[H>>12&63]+c[H>>6&63]+c[H&63]}return te?J.slice(0,te-3)+"===".substring(te):J},v=typeof btoa=="function"?function(W){return btoa(W)}:s?function(W){return Buffer.from(W,"binary").toString("base64")}:y,x=s?function(W){return Buffer.from(W).toString("base64")}:function(W){for(var H=4096,Z=[],re=0,q=W.length;re<q;re+=H)Z.push(m.apply(null,W.subarray(re,re+H)));return v(Z.join(""))},b=function(W,H){return H===void 0&&(H=!1),H?h(x(W)):x(W)},_=function(W){if(W.length<2){var H=W.charCodeAt(0);return H<128?W:H<2048?m(192|H>>>6)+m(128|H&63):m(224|H>>>12&15)+m(128|H>>>6&63)+m(128|H&63)}else{var H=65536+(W.charCodeAt(0)-55296)*1024+(W.charCodeAt(1)-56320);return m(240|H>>>18&7)+m(128|H>>>12&63)+m(128|H>>>6&63)+m(128|H&63)}},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=function(W){return W.replace(w,_)},S=s?function(W){return Buffer.from(W,"utf8").toString("base64")}:o?function(W){return x(o.encode(W))}:function(W){return v(C(W))},E=function(W,H){return H===void 0&&(H=!1),H?h(S(W)):S(W)},M=function(W){return E(W,!0)},k=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,T=function(W){switch(W.length){case 4:var H=(7&W.charCodeAt(0))<<18|(63&W.charCodeAt(1))<<12|(63&W.charCodeAt(2))<<6|63&W.charCodeAt(3),Z=H-65536;return m((Z>>>10)+55296)+m((Z&1023)+56320);case 3:return m((15&W.charCodeAt(0))<<12|(63&W.charCodeAt(1))<<6|63&W.charCodeAt(2));default:return m((31&W.charCodeAt(0))<<6|63&W.charCodeAt(1))}},j=function(W){return W.replace(k,T)},R=function(W){if(W=W.replace(/\s+/g,""),!d.test(W))throw new TypeError("malformed base64.");W+="==".slice(2-(W.length&3));for(var H,Z="",re,q,J=0;J<W.length;)H=u[W.charAt(J++)]<<18|u[W.charAt(J++)]<<12|(re=u[W.charAt(J++)])<<6|(q=u[W.charAt(J++)]),Z+=re===64?m(H>>16&255):q===64?m(H>>16&255,H>>8&255):m(H>>16&255,H>>8&255,H&255);return Z},O=typeof atob=="function"?function(W){return atob(g(W))}:s?function(W){return Buffer.from(W,"base64").toString("binary")}:R,P=s?function(W){return p(Buffer.from(W,"base64"))}:function(W){return p(O(W).split("").map(function(H){return H.charCodeAt(0)}))},N=function(W){return P(D(W))},I=s?function(W){return Buffer.from(W,"base64").toString("utf8")}:a?function(W){return a.decode(P(W))}:function(W){return j(O(W))},D=function(W){return g(W.replace(/[-_]/g,function(H){return H=="-"?"+":"/"}))},F=function(W){return I(D(W))},B=function(W){if(typeof W!="string")return!1;var H=W.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(H)||!/[^\s0-9a-zA-Z\-_]/.test(H)},V=function(W){return{value:W,enumerable:!1,writable:!0,configurable:!0}},$=function(){var W=function(H,Z){return Object.defineProperty(String.prototype,H,V(Z))};W("fromBase64",function(){return F(this)}),W("toBase64",function(H){return E(this,H)}),W("toBase64URI",function(){return E(this,!0)}),W("toBase64URL",function(){return E(this,!0)}),W("toUint8Array",function(){return N(this)})},G=function(){var W=function(H,Z){return Object.defineProperty(Uint8Array.prototype,H,V(Z))};W("toBase64",function(H){return b(this,H)}),W("toBase64URI",function(){return b(this,!0)}),W("toBase64URL",function(){return b(this,!0)})},X=function(){$(),G()},Y={version:n,VERSION:r,atob:O,atobPolyfill:R,btoa:v,btoaPolyfill:y,fromBase64:F,toBase64:E,encode:E,encodeURI:M,encodeURL:M,utob:C,btou:j,decode:F,isValid:B,fromUint8Array:b,toUint8Array:N,extendString:$,extendUint8Array:G,extendBuiltins:X};return Y.Base64={},Object.keys(Y).forEach(function(W){return Y.Base64[W]=Y[W]}),Y})}(V_)),V_.exports}var c4={exports:{}},u4={exports:{}},TH;function iHe(){return TH||(TH=1,function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,a=0;s<n.length;s++,a+=8)r[a>>>5]|=n[s]<<24-a%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var a=n[s]<<16|n[s+1]<<8|n[s+2],o=0;o<4;o++)s*8+o*6<=n.length*8?r.push(e.charAt(a>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,a=0;s<n.length;a=++s%4)a!=0&&r.push((e.indexOf(n.charAt(s-1))&Math.pow(2,-2*a+8)-1)<<a*2|e.indexOf(n.charAt(s))>>>6-a*2);return r}};u4.exports=t}()),u4.exports}var d4,NH;function AH(){if(NH)return d4;NH=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return d4=e,d4}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var f4,jH;function lHe(){if(jH)return f4;jH=1,f4=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return f4}var RH;function cHe(){return RH||(RH=1,function(){var e=iHe(),t=AH().utf8,n=lHe(),r=AH().bin,s=function(a,o){a.constructor==String?o&&o.encoding==="binary"?a=r.stringToBytes(a):a=t.stringToBytes(a):n(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var l=e.bytesToWords(a),c=a.length*8,u=1732584193,d=-271733879,m=-1732584194,p=271733878,h=0;h<l.length;h++)l[h]=(l[h]<<8|l[h]>>>24)&16711935|(l[h]<<24|l[h]>>>8)&4278255360;l[c>>>5]|=128<<c%32,l[(c+64>>>9<<4)+14]=c;for(var g=s._ff,y=s._gg,v=s._hh,x=s._ii,h=0;h<l.length;h+=16){var b=u,_=d,w=m,C=p;u=g(u,d,m,p,l[h+0],7,-680876936),p=g(p,u,d,m,l[h+1],12,-389564586),m=g(m,p,u,d,l[h+2],17,606105819),d=g(d,m,p,u,l[h+3],22,-1044525330),u=g(u,d,m,p,l[h+4],7,-176418897),p=g(p,u,d,m,l[h+5],12,1200080426),m=g(m,p,u,d,l[h+6],17,-1473231341),d=g(d,m,p,u,l[h+7],22,-45705983),u=g(u,d,m,p,l[h+8],7,1770035416),p=g(p,u,d,m,l[h+9],12,-1958414417),m=g(m,p,u,d,l[h+10],17,-42063),d=g(d,m,p,u,l[h+11],22,-1990404162),u=g(u,d,m,p,l[h+12],7,1804603682),p=g(p,u,d,m,l[h+13],12,-40341101),m=g(m,p,u,d,l[h+14],17,-1502002290),d=g(d,m,p,u,l[h+15],22,1236535329),u=y(u,d,m,p,l[h+1],5,-165796510),p=y(p,u,d,m,l[h+6],9,-1069501632),m=y(m,p,u,d,l[h+11],14,643717713),d=y(d,m,p,u,l[h+0],20,-373897302),u=y(u,d,m,p,l[h+5],5,-701558691),p=y(p,u,d,m,l[h+10],9,38016083),m=y(m,p,u,d,l[h+15],14,-660478335),d=y(d,m,p,u,l[h+4],20,-405537848),u=y(u,d,m,p,l[h+9],5,568446438),p=y(p,u,d,m,l[h+14],9,-1019803690),m=y(m,p,u,d,l[h+3],14,-187363961),d=y(d,m,p,u,l[h+8],20,1163531501),u=y(u,d,m,p,l[h+13],5,-1444681467),p=y(p,u,d,m,l[h+2],9,-51403784),m=y(m,p,u,d,l[h+7],14,1735328473),d=y(d,m,p,u,l[h+12],20,-1926607734),u=v(u,d,m,p,l[h+5],4,-378558),p=v(p,u,d,m,l[h+8],11,-2022574463),m=v(m,p,u,d,l[h+11],16,1839030562),d=v(d,m,p,u,l[h+14],23,-35309556),u=v(u,d,m,p,l[h+1],4,-1530992060),p=v(p,u,d,m,l[h+4],11,1272893353),m=v(m,p,u,d,l[h+7],16,-155497632),d=v(d,m,p,u,l[h+10],23,-1094730640),u=v(u,d,m,p,l[h+13],4,681279174),p=v(p,u,d,m,l[h+0],11,-358537222),m=v(m,p,u,d,l[h+3],16,-722521979),d=v(d,m,p,u,l[h+6],23,76029189),u=v(u,d,m,p,l[h+9],4,-640364487),p=v(p,u,d,m,l[h+12],11,-421815835),m=v(m,p,u,d,l[h+15],16,530742520),d=v(d,m,p,u,l[h+2],23,-995338651),u=x(u,d,m,p,l[h+0],6,-198630844),p=x(p,u,d,m,l[h+7],10,1126891415),m=x(m,p,u,d,l[h+14],15,-1416354905),d=x(d,m,p,u,l[h+5],21,-57434055),u=x(u,d,m,p,l[h+12],6,1700485571),p=x(p,u,d,m,l[h+3],10,-1894986606),m=x(m,p,u,d,l[h+10],15,-1051523),d=x(d,m,p,u,l[h+1],21,-2054922799),u=x(u,d,m,p,l[h+8],6,1873313359),p=x(p,u,d,m,l[h+15],10,-30611744),m=x(m,p,u,d,l[h+6],15,-1560198380),d=x(d,m,p,u,l[h+13],21,1309151649),u=x(u,d,m,p,l[h+4],6,-145523070),p=x(p,u,d,m,l[h+11],10,-1120210379),m=x(m,p,u,d,l[h+2],15,718787259),d=x(d,m,p,u,l[h+9],21,-343485551),u=u+b>>>0,d=d+_>>>0,m=m+w>>>0,p=p+C>>>0}return e.endian([u,d,m,p])};s._ff=function(a,o,l,c,u,d,m){var p=a+(o&l|~o&c)+(u>>>0)+m;return(p<<d|p>>>32-d)+o},s._gg=function(a,o,l,c,u,d,m){var p=a+(o&c|l&~c)+(u>>>0)+m;return(p<<d|p>>>32-d)+o},s._hh=function(a,o,l,c,u,d,m){var p=a+(o^l^c)+(u>>>0)+m;return(p<<d|p>>>32-d)+o},s._ii=function(a,o,l,c,u,d,m){var p=a+(l^(o|~c))+(u>>>0)+m;return(p<<d|p>>>32-d)+o},s._blocksize=16,s._digestsize=16,c4.exports=function(a,o){if(a==null)throw new Error("Illegal argument "+a);var l=e.wordsToBytes(s(a,o));return o&&o.asBytes?l:o&&o.asString?r.bytesToString(l):e.bytesToHex(l)}}()),c4.exports}var IH;function Ih(){if(IH)return Il;IH=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.decodeBase64=Il.encodeBase64=Il.getMD5Hash=void 0;const e=oHe(),t=cHe();function n(a){return t(a)}Il.getMD5Hash=n;function r(a){return e.btoaPolyfill(a)}Il.encodeBase64=r;function s(a){return e.atobPolyfill(a)}return Il.decodeBase64=s,Il}var Pg={},PH;function uHe(){if(PH)return Pg;PH=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.LRUCache=void 0;class e{constructor(n){this.capacity=n,this.cache=new Map,this.size=this.cache.size}[Symbol.iterator](){return this.cache[Symbol.iterator]()}forEach(n,r){this.cache.forEach(n,r)}entries(){return this.cache.entries()}clear(){this.cache.clear()}delete(n){return this.cache.delete(n)}keys(){return this.cache.keys()}values(){return this.cache.values()}has(n){return this.cache.has(n)}get(n){if(!this.has(n))return;const r=this.cache.get(n);return r!==void 0&&(this.delete(n),this.cache.set(n,r)),r}set(n,r){if(this.capacity===0)return this;if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;this.delete(s)}return this.cache.set(n,r),this}}return Pg.LRUCache=e,Pg}var OH;function yce(){if(OH)return Ua;OH=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.LRUInMemoryAssignmentCache=Ua.NonExpiringInMemoryAssignmentCache=Ua.AbstractAssignmentCache=Ua.assignmentCacheValueToString=Ua.assignmentCacheKeyToString=void 0;const e=Ih(),t=uHe();function n({subjectKey:l,flagKey:c}){return(0,e.getMD5Hash)([l,c].join(";"))}Ua.assignmentCacheKeyToString=n;function r({allocationKey:l,variationKey:c}){return(0,e.getMD5Hash)([l,c].join(";"))}Ua.assignmentCacheValueToString=r;class s{constructor(c){this.delegate=c}has(c){return this.get(c)===r(c)}get(c){return this.delegate.get(n(c))}set(c){this.delegate.set(n(c),r(c))}entries(){return this.delegate.entries()}}Ua.AbstractAssignmentCache=s;class a extends s{constructor(c=new Map){super(c)}}Ua.NonExpiringInMemoryAssignmentCache=a;class o extends s{constructor(c){super(new t.LRUCache(c))}}return Ua.LRUInMemoryAssignmentCache=o,Ua}var Fc={},Og={},Pl={},LH;function vce(){if(LH)return Pl;LH=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.DeterministicSharder=Pl.MD5Sharder=Pl.Sharder=void 0;const e=Ih();class t{}Pl.Sharder=t;class n extends t{getShard(a,o){const l=(0,e.getMD5Hash)(a);return parseInt(l.slice(0,8),16)%o}}Pl.MD5Sharder=n;class r extends t{constructor(a){super(),this.lookup=a}getShard(a,o){var l;return(l=this.lookup[a])!==null&&l!==void 0?l:0}}return Pl.DeterministicSharder=r,Pl}var DH;function dHe(){if(DH)return Og;DH=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.BanditEvaluator=void 0;const e=y1(),t=vce();class n{constructor(){this.assignmentShards=e.BANDIT_ASSIGNMENT_SHARDS,this.sharder=new t.MD5Sharder}evaluateBandit(s,a,o,l,c){const u=this.scoreActions(o,l,c),d=this.weighActions(u,c.gamma,c.actionProbabilityFloor),m=this.selectAction(s,a,d),h=Object.values(u).reduce((g,y)=>y>g?y:g,-1/0)-u[m];return{flagKey:s,subjectKey:a,subjectAttributes:o,actionKey:m,actionAttributes:l[m],actionScore:u[m],actionWeight:d[m],gamma:c.gamma,optimalityGap:h}}scoreActions(s,a,o){const l={};return Object.entries(a).forEach(([c,u])=>{let d=o.defaultActionScore;const m=o.coefficients[c];m&&(d=m.intercept,d+=this.scoreNumericAttributes(m.subjectNumericCoefficients,s.numericAttributes),d+=this.scoreCategoricalAttributes(m.subjectCategoricalCoefficients,s.categoricalAttributes),d+=this.scoreNumericAttributes(m.actionNumericCoefficients,u.numericAttributes),d+=this.scoreCategoricalAttributes(m.actionCategoricalCoefficients,u.categoricalAttributes)),l[c]=d}),l}scoreNumericAttributes(s,a){return s.reduce((o,l)=>{const c=a[l.attributeKey];return typeof c=="number"&&isFinite(c)?o+=c*l.coefficient:o+=l.missingValueCoefficient,o},0)}scoreCategoricalAttributes(s,a){return s.reduce((o,l)=>{var c;const u=(c=a[l.attributeKey])===null||c===void 0?void 0:c.toString(),d=u&&l.valueCoefficients[u];return o+=typeof d=="number"?d:l.missingValueCoefficient,o},0)}weighActions(s,a,o){const l={},c=Object.entries(s);if(!c.length)return l;let u=null,d=null;if(c.forEach(([v,x])=>{(u===null||x>u)&&(u=x,d=v)}),u===null||d===null)throw new Error("Unable to find top score");const m=u,p=d,h=c.length,g=o/h;let y=0;return c.forEach(([v,x])=>{if(v===p)return;const b=1/(h+a*(m-x)),_=Math.max(b,g);y+=_,l[v]=_}),l[p]=Math.max(1-y,0),l}selectAction(s,a,o){const l=Object.entries(o).sort((p,h)=>{const g=this.sharder.getShard(`${s}-${a}-${p[0]}`,this.assignmentShards),y=this.sharder.getShard(`${s}-${a}-${h[0]}`,this.assignmentShards);let v=g-y;return v===0&&(v=p[0]<h[0]?-1:1),v}),u=this.sharder.getShard(`${s}-${a}`,this.assignmentShards)/this.assignmentShards;let d=0,m=null;for(const p of l)if(d+=p[1],d>u){m=p[0];break}if(m===null)throw new Error(`No bandit action selected for flag "${s}" and subject "${a}"`);return m}}return Og.BanditEvaluator=n,Og}var db={},FH;function xce(){if(FH)return db;FH=1,Object.defineProperty(db,"__esModule",{value:!0});class e{constructor(n,r,s,a){this.httpClient=n,this.flagConfigurationStore=r,this.banditVariationConfigurationStore=s,this.banditModelConfigurationStore=a}async fetchAndStoreConfigurations(){var n;const r=await this.httpClient.getUniversalFlagConfiguration();if(!r?.flags)return;await this.hydrateConfigurationStore(this.flagConfigurationStore,{entries:r.flags,environment:r.environment,createdAt:r.createdAt});const s=Object.keys((n=r.bandits)!==null&&n!==void 0?n:{}).length>0,a=!!(this.banditVariationConfigurationStore&&this.banditModelConfigurationStore);if(s&&a){const o=this.indexBanditVariationsByFlagKey(r.bandits);await this.hydrateConfigurationStore(this.banditVariationConfigurationStore,{entries:o,environment:r.environment,createdAt:r.createdAt});const l=await this.httpClient.getBanditParameters();if(l?.bandits){if(!this.banditModelConfigurationStore)throw new Error("Bandit parameters fetched but no bandit configuration store provided");await this.hydrateConfigurationStore(this.banditModelConfigurationStore,{entries:l.bandits,environment:r.environment,createdAt:r.createdAt})}}}async hydrateConfigurationStore(n,r){n&&await n.setEntries(r.entries)&&(n.setEnvironment(r.environment),n.setConfigFetchedAt(new Date().toISOString()),n.setConfigPublishedAt(r.createdAt))}indexBanditVariationsByFlagKey(n){const r={};return Object.values(n).forEach(s=>{s.forEach(a=>{let o=r[a.flagKey];o||(o=[],r[a.flagKey]=o),o.push(a)})}),r}}return db.default=e,db}var us={},m4={},UH;function v1(){return UH||(UH=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=void 0,function(t){t.STRING="STRING",t.INTEGER="INTEGER",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.JSON="JSON"}(e.VariationType||(e.VariationType={}))}(m4)),m4}var BH;function fHe(){if(BH)return us;BH=1,Object.defineProperty(us,"__esModule",{value:!0}),us.decodeObject=us.decodeShard=us.decodeSplit=us.decodeAllocation=us.decodeValue=us.decodeVariations=us.decodeFlag=void 0;const e=v1(),t=Ih();function n(u){return Object.assign(Object.assign({},u),{variations:r(u.variations,u.variationType),allocations:u.allocations.map(a)})}us.decodeFlag=n;function r(u,d){return Object.fromEntries(Object.entries(u).map(([,m])=>{const p=(0,t.decodeBase64)(m.key);return[p,{key:p,value:s(m.value,d)}]}))}us.decodeVariations=r;function s(u,d){switch(d){case e.VariationType.INTEGER:case e.VariationType.NUMERIC:return Number((0,t.decodeBase64)(u));case e.VariationType.BOOLEAN:return(0,t.decodeBase64)(u)==="true";default:return(0,t.decodeBase64)(u)}}us.decodeValue=s;function a(u){return Object.assign(Object.assign({},u),{key:(0,t.decodeBase64)(u.key),splits:u.splits.map(o),startAt:u.startAt?new Date((0,t.decodeBase64)(u.startAt)).toISOString():void 0,endAt:u.endAt?new Date((0,t.decodeBase64)(u.endAt)).toISOString():void 0})}us.decodeAllocation=a;function o(u){return{extraLogging:u.extraLogging?c(u.extraLogging):void 0,variationKey:(0,t.decodeBase64)(u.variationKey),shards:u.shards.map(l)}}us.decodeSplit=o;function l(u){return Object.assign(Object.assign({},u),{salt:(0,t.decodeBase64)(u.salt)})}us.decodeShard=l;function c(u){return Object.fromEntries(Object.entries(u).map(([d,m])=>[(0,t.decodeBase64)(d),(0,t.decodeBase64)(m)]))}return us.decodeObject=c,us}var p4={},VH;function mHe(){return VH||(VH=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EppoValue=e.EppoValueType=void 0;const t=v1(),n=Ih();var r;(function(a){a[a.NullType=0]="NullType",a[a.BoolType=1]="BoolType",a[a.NumericType=2]="NumericType",a[a.StringType=3]="StringType",a[a.JSONType=4]="JSONType"})(r=e.EppoValueType||(e.EppoValueType={}));class s{constructor(o,l,c,u,d){this.valueType=o,this.boolValue=l,this.numericValue=c,this.stringValue=u,this.objectValue=d}static valueOf(o,l){if(o==null)return s.Null();switch(l){case t.VariationType.BOOLEAN:return s.Bool(o);case t.VariationType.NUMERIC:return s.Numeric(o);case t.VariationType.INTEGER:return s.Numeric(o);case t.VariationType.STRING:return s.String(o);case t.VariationType.JSON:return s.JSON(o);default:return s.String(o)}}toString(){var o,l,c;switch(this.valueType){case r.NullType:return"null";case r.BoolType:return this.boolValue?"true":"false";case r.NumericType:return this.numericValue?this.numericValue.toString():"0";case r.StringType:return(o=this.stringValue)!==null&&o!==void 0?o:"";case r.JSONType:try{return(l=JSON.stringify(this.objectValue))!==null&&l!==void 0?l:""}catch{return(c=this.stringValue)!==null&&c!==void 0?c:""}}}toHashedString(){const o=this.toString();return(0,n.getMD5Hash)(o)}static Bool(o){return new s(r.BoolType,o,void 0,void 0,void 0)}static Numeric(o){return new s(r.NumericType,void 0,o,void 0,void 0)}static String(o){return new s(r.StringType,void 0,void 0,o,void 0)}static JSON(o){return new s(r.JSONType,void 0,void 0,void 0,typeof o=="string"?JSON.parse(o):o)}static Null(){return new s(r.NullType,void 0,void 0,void 0,void 0)}}e.EppoValue=s}(p4)),p4}var Ba={},h4={},WH;function bce(){return WH||(WH=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FlagEvaluationDetailsBuilder=e.AllocationEvaluationCode=e.flagEvaluationCodes=void 0;const t=v1();e.flagEvaluationCodes=["MATCH","FLAG_UNRECOGNIZED_OR_DISABLED","TYPE_MISMATCH","ASSIGNMENT_ERROR","DEFAULT_ALLOCATION_NULL","NO_ACTIONS_SUPPLIED_FOR_BANDIT"];var n;(function(s){s.UNEVALUATED="UNEVALUATED",s.MATCH="MATCH",s.BEFORE_START_TIME="BEFORE_START_TIME",s.TRAFFIC_EXPOSURE_MISS="TRAFFIC_EXPOSURE_MISS",s.AFTER_END_TIME="AFTER_END_TIME",s.FAILING_RULE="FAILING_RULE"})(n=e.AllocationEvaluationCode||(e.AllocationEvaluationCode={}));class r{constructor(a,o,l,c){this.environmentName=a,this.allocations=o,this.configFetchedAt=l,this.configPublishedAt=c,this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=[],this.setNone=()=>(this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=this.allocations.map((u,d)=>({key:u.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:d+1})),this),this.setNoMatchFound=(u=[])=>(this.variationKey=null,this.variationValue=null,this.matchedAllocation=null,this.matchedRule=null,this.unmatchedAllocations=u,this.unevaluatedAllocations=[],this),this.setMatch=(u,d,m,p,h,g)=>{this.variationKey=d.key,this.variationValue=g===t.VariationType.JSON&&typeof d.value=="string"?JSON.parse(d.value):d.value,this.matchedRule=p,this.matchedAllocation={key:m.key,allocationEvaluationCode:n.MATCH,orderPosition:u+1},this.unmatchedAllocations=h;const y=u+1,v=y+1;return this.unevaluatedAllocations=this.allocations.slice(y).map((x,b)=>({key:x.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:v+b})),this},this.buildForNoneResult=(u,d)=>this.setNone().build(u,d),this.build=(u,d)=>({environmentName:this.environmentName,flagEvaluationCode:u,flagEvaluationDescription:d,variationKey:this.variationKey,variationValue:this.variationValue,banditKey:null,banditAction:null,configFetchedAt:this.configFetchedAt,configPublishedAt:this.configPublishedAt,matchedRule:this.matchedRule,matchedAllocation:this.matchedAllocation,unmatchedAllocations:this.unmatchedAllocations,unevaluatedAllocations:this.unevaluatedAllocations}),this.setNone()}}e.FlagEvaluationDetailsBuilder=r}(h4)),h4}var g4={},fb={exports:{}},y4,$H;function JS(){if($H)return y4;$H=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=t-6;return y4={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},y4}var v4,HH;function eE(){if(HH)return v4;HH=1;var e={};return v4=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},v4}var zH;function x1(){return zH||(zH=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=JS(),a=eE();t=e.exports={};const o=t.re=[],l=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],d=t.t={};let m=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[p,r]],g=v=>{for(const[x,b]of h)v=v.split(`${x}*`).join(`${x}{0,${b}}`).split(`${x}+`).join(`${x}{1,${b}}`);return v},y=(v,x,b)=>{const _=g(x),w=m++;a(v,w,x),d[v]=w,c[w]=x,u[w]=_,o[w]=new RegExp(x,b?"g":void 0),l[w]=new RegExp(_,b?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),y("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${p}+`),y("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),y("FULL",`^${c[d.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),y("LOOSE",`^${c[d.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),y("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",c[d.COERCE],!0),y("COERCERTLFULL",c[d.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(fb,fb.exports)),fb.exports}var x4,GH;function NP(){if(GH)return x4;GH=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return x4=r=>r?typeof r!="object"?e:r:t,x4}var b4,qH;function _ce(){if(qH)return b4;qH=1;const e=/^[0-9]+$/,t=(r,s)=>{const a=e.test(r),o=e.test(s);return a&&o&&(r=+r,s=+s),r===s?0:a&&!o?-1:o&&!a?1:r<s?-1:1};return b4={compareIdentifiers:t,rcompareIdentifiers:(r,s)=>t(s,r)},b4}var _4,KH;function aa(){if(KH)return _4;KH=1;const e=eE(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=JS(),{safeRe:r,t:s}=x1(),a=NP(),{compareIdentifiers:o}=_ce();class l{constructor(u,d){if(d=a(d),u instanceof l){if(u.loose===!!d.loose&&u.includePrerelease===!!d.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const m=u.trim().match(d.loose?r[s.LOOSE]:r[s.FULL]);if(!m)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const h=+p;if(h>=0&&h<n)return h}return p}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof l)){if(typeof u=="string"&&u===this.version)return 0;u=new l(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof l||(u=new l(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof l||(u=new l(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let d=0;do{const m=this.prerelease[d],p=u.prerelease[d];if(e("prerelease compare",d,m,p),m===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(m===void 0)return-1;if(m===p)continue;return o(m,p)}while(++d)}compareBuild(u){u instanceof l||(u=new l(u,this.options));let d=0;do{const m=this.build[d],p=u.build[d];if(e("build compare",d,m,p),m===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(m===void 0)return-1;if(m===p)continue;return o(m,p)}while(++d)}inc(u,d,m){if(u.startsWith("pre")){if(!d&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,m),this.inc("pre",d,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,m),this.inc("pre",d,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(d===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let h=[d,p];m===!1&&(h=[d]),o(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return _4=l,_4}var w4,YH;function Ph(){if(YH)return w4;YH=1;const e=aa();return w4=(n,r,s=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(a){if(!s)return null;throw a}},w4}var C4,QH;function pHe(){if(QH)return C4;QH=1;const e=Ph();return C4=(n,r)=>{const s=e(n,r);return s?s.version:null},C4}var S4,XH;function hHe(){if(XH)return S4;XH=1;const e=Ph();return S4=(n,r)=>{const s=e(n.trim().replace(/^[=v]+/,""),r);return s?s.version:null},S4}var E4,ZH;function gHe(){if(ZH)return E4;ZH=1;const e=aa();return E4=(n,r,s,a,o)=>{typeof s=="string"&&(o=a,a=s,s=void 0);try{return new e(n instanceof e?n.version:n,s).inc(r,a,o).version}catch{return null}},E4}var M4,JH;function yHe(){if(JH)return M4;JH=1;const e=Ph();return M4=(n,r)=>{const s=e(n,null,!0),a=e(r,null,!0),o=s.compare(a);if(o===0)return null;const l=o>0,c=l?s:a,u=l?a:s,d=!!c.prerelease.length;if(!!u.prerelease.length&&!d){if(!u.patch&&!u.minor)return"major";if(u.compareMain(c)===0)return u.minor&&!u.patch?"minor":"patch"}const p=d?"pre":"";return s.major!==a.major?p+"major":s.minor!==a.minor?p+"minor":s.patch!==a.patch?p+"patch":"prerelease"},M4}var k4,ez;function vHe(){if(ez)return k4;ez=1;const e=aa();return k4=(n,r)=>new e(n,r).major,k4}var T4,tz;function xHe(){if(tz)return T4;tz=1;const e=aa();return T4=(n,r)=>new e(n,r).minor,T4}var N4,nz;function bHe(){if(nz)return N4;nz=1;const e=aa();return N4=(n,r)=>new e(n,r).patch,N4}var A4,rz;function _He(){if(rz)return A4;rz=1;const e=Ph();return A4=(n,r)=>{const s=e(n,r);return s&&s.prerelease.length?s.prerelease:null},A4}var j4,sz;function Ei(){if(sz)return j4;sz=1;const e=aa();return j4=(n,r,s)=>new e(n,s).compare(new e(r,s)),j4}var R4,az;function wHe(){if(az)return R4;az=1;const e=Ei();return R4=(n,r,s)=>e(r,n,s),R4}var I4,oz;function CHe(){if(oz)return I4;oz=1;const e=Ei();return I4=(n,r)=>e(n,r,!0),I4}var P4,iz;function AP(){if(iz)return P4;iz=1;const e=aa();return P4=(n,r,s)=>{const a=new e(n,s),o=new e(r,s);return a.compare(o)||a.compareBuild(o)},P4}var O4,lz;function SHe(){if(lz)return O4;lz=1;const e=AP();return O4=(n,r)=>n.sort((s,a)=>e(s,a,r)),O4}var L4,cz;function EHe(){if(cz)return L4;cz=1;const e=AP();return L4=(n,r)=>n.sort((s,a)=>e(a,s,r)),L4}var D4,uz;function tE(){if(uz)return D4;uz=1;const e=Ei();return D4=(n,r,s)=>e(n,r,s)>0,D4}var F4,dz;function jP(){if(dz)return F4;dz=1;const e=Ei();return F4=(n,r,s)=>e(n,r,s)<0,F4}var U4,fz;function wce(){if(fz)return U4;fz=1;const e=Ei();return U4=(n,r,s)=>e(n,r,s)===0,U4}var B4,mz;function Cce(){if(mz)return B4;mz=1;const e=Ei();return B4=(n,r,s)=>e(n,r,s)!==0,B4}var V4,pz;function RP(){if(pz)return V4;pz=1;const e=Ei();return V4=(n,r,s)=>e(n,r,s)>=0,V4}var W4,hz;function IP(){if(hz)return W4;hz=1;const e=Ei();return W4=(n,r,s)=>e(n,r,s)<=0,W4}var $4,gz;function Sce(){if(gz)return $4;gz=1;const e=wce(),t=Cce(),n=tE(),r=RP(),s=jP(),a=IP();return $4=(l,c,u,d)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l===u;case"!==":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l!==u;case"":case"=":case"==":return e(l,u,d);case"!=":return t(l,u,d);case">":return n(l,u,d);case">=":return r(l,u,d);case"<":return s(l,u,d);case"<=":return a(l,u,d);default:throw new TypeError(`Invalid operator: ${c}`)}},$4}var H4,yz;function MHe(){if(yz)return H4;yz=1;const e=aa(),t=Ph(),{safeRe:n,t:r}=x1();return H4=(a,o)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;o=o||{};let l=null;if(!o.rtl)l=a.match(o.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const h=o.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let g;for(;(g=h.exec(a))&&(!l||l.index+l[0].length!==a.length);)(!l||g.index+g[0].length!==l.index+l[0].length)&&(l=g),h.lastIndex=g.index+g[1].length+g[2].length;h.lastIndex=-1}if(l===null)return null;const c=l[2],u=l[3]||"0",d=l[4]||"0",m=o.includePrerelease&&l[5]?`-${l[5]}`:"",p=o.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${c}.${u}.${d}${m}${p}`,o)},H4}var z4,vz;function kHe(){if(vz)return z4;vz=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,r)}return this}}return z4=e,z4}var G4,xz;function Mi(){if(xz)return G4;xz=1;const e=/\s+/g;class t{constructor(N,I){if(I=s(I),N instanceof t)return N.loose===!!I.loose&&N.includePrerelease===!!I.includePrerelease?N:new t(N.raw,I);if(N instanceof a)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=N.trim().replace(e," "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(F=>!y(F[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&v(F[0])){this.set=[F];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const I=this.set[N];for(let D=0;D<I.length;D++)D>0&&(this.formatted+=" "),this.formatted+=I[D].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const D=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+N,F=r.get(D);if(F)return F;const B=this.options.loose,V=B?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];N=N.replace(V,R(this.options.includePrerelease)),o("hyphen replace",N),N=N.replace(c[u.COMPARATORTRIM],d),o("comparator trim",N),N=N.replace(c[u.TILDETRIM],m),o("tilde trim",N),N=N.replace(c[u.CARETTRIM],p),o("caret trim",N);let $=N.split(" ").map(W=>b(W,this.options)).join(" ").split(/\s+/).map(W=>j(W,this.options));B&&($=$.filter(W=>(o("loose invalid filter",W,this.options),!!W.match(c[u.COMPARATORLOOSE])))),o("range list",$);const G=new Map,X=$.map(W=>new a(W,this.options));for(const W of X){if(y(W))return[W];G.set(W.value,W)}G.size>1&&G.has("")&&G.delete("");const Y=[...G.values()];return r.set(D,Y),Y}intersects(N,I){if(!(N instanceof t))throw new TypeError("a Range is required");return this.set.some(D=>x(D,I)&&N.set.some(F=>x(F,I)&&D.every(B=>F.every(V=>B.intersects(V,I)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new l(N,this.options)}catch{return!1}for(let I=0;I<this.set.length;I++)if(O(this.set[I],N,this.options))return!0;return!1}}G4=t;const n=kHe(),r=new n,s=NP(),a=nE(),o=eE(),l=aa(),{safeRe:c,t:u,comparatorTrimReplace:d,tildeTrimReplace:m,caretTrimReplace:p}=x1(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=JS(),y=P=>P.value==="<0.0.0-0",v=P=>P.value==="",x=(P,N)=>{let I=!0;const D=P.slice();let F=D.pop();for(;I&&D.length;)I=D.every(B=>F.intersects(B,N)),F=D.pop();return I},b=(P,N)=>(o("comp",P,N),P=S(P,N),o("caret",P),P=w(P,N),o("tildes",P),P=M(P,N),o("xrange",P),P=T(P,N),o("stars",P),P),_=P=>!P||P.toLowerCase()==="x"||P==="*",w=(P,N)=>P.trim().split(/\s+/).map(I=>C(I,N)).join(" "),C=(P,N)=>{const I=N.loose?c[u.TILDELOOSE]:c[u.TILDE];return P.replace(I,(D,F,B,V,$)=>{o("tilde",P,D,F,B,V,$);let G;return _(F)?G="":_(B)?G=`>=${F}.0.0 <${+F+1}.0.0-0`:_(V)?G=`>=${F}.${B}.0 <${F}.${+B+1}.0-0`:$?(o("replaceTilde pr",$),G=`>=${F}.${B}.${V}-${$} <${F}.${+B+1}.0-0`):G=`>=${F}.${B}.${V} <${F}.${+B+1}.0-0`,o("tilde return",G),G})},S=(P,N)=>P.trim().split(/\s+/).map(I=>E(I,N)).join(" "),E=(P,N)=>{o("caret",P,N);const I=N.loose?c[u.CARETLOOSE]:c[u.CARET],D=N.includePrerelease?"-0":"";return P.replace(I,(F,B,V,$,G)=>{o("caret",P,F,B,V,$,G);let X;return _(B)?X="":_(V)?X=`>=${B}.0.0${D} <${+B+1}.0.0-0`:_($)?B==="0"?X=`>=${B}.${V}.0${D} <${B}.${+V+1}.0-0`:X=`>=${B}.${V}.0${D} <${+B+1}.0.0-0`:G?(o("replaceCaret pr",G),B==="0"?V==="0"?X=`>=${B}.${V}.${$}-${G} <${B}.${V}.${+$+1}-0`:X=`>=${B}.${V}.${$}-${G} <${B}.${+V+1}.0-0`:X=`>=${B}.${V}.${$}-${G} <${+B+1}.0.0-0`):(o("no pr"),B==="0"?V==="0"?X=`>=${B}.${V}.${$}${D} <${B}.${V}.${+$+1}-0`:X=`>=${B}.${V}.${$}${D} <${B}.${+V+1}.0-0`:X=`>=${B}.${V}.${$} <${+B+1}.0.0-0`),o("caret return",X),X})},M=(P,N)=>(o("replaceXRanges",P,N),P.split(/\s+/).map(I=>k(I,N)).join(" ")),k=(P,N)=>{P=P.trim();const I=N.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return P.replace(I,(D,F,B,V,$,G)=>{o("xRange",P,D,F,B,V,$,G);const X=_(B),Y=X||_(V),W=Y||_($),H=W;return F==="="&&H&&(F=""),G=N.includePrerelease?"-0":"",X?F===">"||F==="<"?D="<0.0.0-0":D="*":F&&H?(Y&&(V=0),$=0,F===">"?(F=">=",Y?(B=+B+1,V=0,$=0):(V=+V+1,$=0)):F==="<="&&(F="<",Y?B=+B+1:V=+V+1),F==="<"&&(G="-0"),D=`${F+B}.${V}.${$}${G}`):Y?D=`>=${B}.0.0${G} <${+B+1}.0.0-0`:W&&(D=`>=${B}.${V}.0${G} <${B}.${+V+1}.0-0`),o("xRange return",D),D})},T=(P,N)=>(o("replaceStars",P,N),P.trim().replace(c[u.STAR],"")),j=(P,N)=>(o("replaceGTE0",P,N),P.trim().replace(c[N.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=P=>(N,I,D,F,B,V,$,G,X,Y,W,H)=>(_(D)?I="":_(F)?I=`>=${D}.0.0${P?"-0":""}`:_(B)?I=`>=${D}.${F}.0${P?"-0":""}`:V?I=`>=${I}`:I=`>=${I}${P?"-0":""}`,_(X)?G="":_(Y)?G=`<${+X+1}.0.0-0`:_(W)?G=`<${X}.${+Y+1}.0-0`:H?G=`<=${X}.${Y}.${W}-${H}`:P?G=`<${X}.${Y}.${+W+1}-0`:G=`<=${G}`,`${I} ${G}`.trim()),O=(P,N,I)=>{for(let D=0;D<P.length;D++)if(!P[D].test(N))return!1;if(N.prerelease.length&&!I.includePrerelease){for(let D=0;D<P.length;D++)if(o(P[D].semver),P[D].semver!==a.ANY&&P[D].semver.prerelease.length>0){const F=P[D].semver;if(F.major===N.major&&F.minor===N.minor&&F.patch===N.patch)return!0}return!1}return!0};return G4}var q4,bz;function nE(){if(bz)return q4;bz=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,m){if(m=n(m),d instanceof t){if(d.loose===!!m.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,m),this.options=m,this.loose=!!m.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const m=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],p=d.match(m);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,m){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,m).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,m).test(d.semver):(m=n(m),m.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,m)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,m)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}q4=t;const n=NP(),{safeRe:r,t:s}=x1(),a=Sce(),o=eE(),l=aa(),c=Mi();return q4}var K4,_z;function rE(){if(_z)return K4;_z=1;const e=Mi();return K4=(n,r,s)=>{try{r=new e(r,s)}catch{return!1}return r.test(n)},K4}var Y4,wz;function THe(){if(wz)return Y4;wz=1;const e=Mi();return Y4=(n,r)=>new e(n,r).set.map(s=>s.map(a=>a.value).join(" ").trim().split(" ")),Y4}var Q4,Cz;function NHe(){if(Cz)return Q4;Cz=1;const e=aa(),t=Mi();return Q4=(r,s,a)=>{let o=null,l=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!o||l.compare(u)===-1)&&(o=u,l=new e(o,a))}),o},Q4}var X4,Sz;function AHe(){if(Sz)return X4;Sz=1;const e=aa(),t=Mi();return X4=(r,s,a)=>{let o=null,l=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!o||l.compare(u)===1)&&(o=u,l=new e(o,a))}),o},X4}var Z4,Ez;function jHe(){if(Ez)return Z4;Ez=1;const e=aa(),t=Mi(),n=tE();return Z4=(s,a)=>{s=new t(s,a);let o=new e("0.0.0");if(s.test(o)||(o=new e("0.0.0-0"),s.test(o)))return o;o=null;for(let l=0;l<s.set.length;++l){const c=s.set[l];let u=null;c.forEach(d=>{const m=new e(d.semver.version);switch(d.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!u||n(m,u))&&(u=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),u&&(!o||n(o,u))&&(o=u)}return o&&s.test(o)?o:null},Z4}var J4,Mz;function RHe(){if(Mz)return J4;Mz=1;const e=Mi();return J4=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},J4}var ek,kz;function PP(){if(kz)return ek;kz=1;const e=aa(),t=nE(),{ANY:n}=t,r=Mi(),s=rE(),a=tE(),o=jP(),l=IP(),c=RP();return ek=(d,m,p,h)=>{d=new e(d,h),m=new r(m,h);let g,y,v,x,b;switch(p){case">":g=a,y=l,v=o,x=">",b=">=";break;case"<":g=o,y=c,v=a,x="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(d,m,h))return!1;for(let _=0;_<m.set.length;++_){const w=m.set[_];let C=null,S=null;if(w.forEach(E=>{E.semver===n&&(E=new t(">=0.0.0")),C=C||E,S=S||E,g(E.semver,C.semver,h)?C=E:v(E.semver,S.semver,h)&&(S=E)}),C.operator===x||C.operator===b||(!S.operator||S.operator===x)&&y(d,S.semver))return!1;if(S.operator===b&&v(d,S.semver))return!1}return!0},ek}var tk,Tz;function IHe(){if(Tz)return tk;Tz=1;const e=PP();return tk=(n,r,s)=>e(n,r,">",s),tk}var nk,Nz;function PHe(){if(Nz)return nk;Nz=1;const e=PP();return nk=(n,r,s)=>e(n,r,"<",s),nk}var rk,Az;function OHe(){if(Az)return rk;Az=1;const e=Mi();return rk=(n,r,s)=>(n=new e(n,s),r=new e(r,s),n.intersects(r,s)),rk}var sk,jz;function LHe(){if(jz)return sk;jz=1;const e=rE(),t=Ei();return sk=(n,r,s)=>{const a=[];let o=null,l=null;const c=n.sort((p,h)=>t(p,h,s));for(const p of c)e(p,r,s)?(l=p,o||(o=p)):(l&&a.push([o,l]),l=null,o=null);o&&a.push([o,null]);const u=[];for(const[p,h]of a)p===h?u.push(p):!h&&p===c[0]?u.push("*"):h?p===c[0]?u.push(`<=${h}`):u.push(`${p} - ${h}`):u.push(`>=${p}`);const d=u.join(" || "),m=typeof r.raw=="string"?r.raw:String(r);return d.length<m.length?d:r},sk}var ak,Rz;function DHe(){if(Rz)return ak;Rz=1;const e=Mi(),t=nE(),{ANY:n}=t,r=rE(),s=Ei(),a=(m,p,h={})=>{if(m===p)return!0;m=new e(m,h),p=new e(p,h);let g=!1;e:for(const y of m.set){for(const v of p.set){const x=c(y,v,h);if(g=g||x!==null,x)continue e}if(g)return!1}return!0},o=[new t(">=0.0.0-0")],l=[new t(">=0.0.0")],c=(m,p,h)=>{if(m===p)return!0;if(m.length===1&&m[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;h.includePrerelease?m=o:m=l}if(p.length===1&&p[0].semver===n){if(h.includePrerelease)return!0;p=l}const g=new Set;let y,v;for(const M of m)M.operator===">"||M.operator===">="?y=u(y,M,h):M.operator==="<"||M.operator==="<="?v=d(v,M,h):g.add(M.semver);if(g.size>1)return null;let x;if(y&&v){if(x=s(y.semver,v.semver,h),x>0)return null;if(x===0&&(y.operator!==">="||v.operator!=="<="))return null}for(const M of g){if(y&&!r(M,String(y),h)||v&&!r(M,String(v),h))return null;for(const k of p)if(!r(M,String(k),h))return!1;return!0}let b,_,w,C,S=v&&!h.includePrerelease&&v.semver.prerelease.length?v.semver:!1,E=y&&!h.includePrerelease&&y.semver.prerelease.length?y.semver:!1;S&&S.prerelease.length===1&&v.operator==="<"&&S.prerelease[0]===0&&(S=!1);for(const M of p){if(C=C||M.operator===">"||M.operator===">=",w=w||M.operator==="<"||M.operator==="<=",y){if(E&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===E.major&&M.semver.minor===E.minor&&M.semver.patch===E.patch&&(E=!1),M.operator===">"||M.operator===">="){if(b=u(y,M,h),b===M&&b!==y)return!1}else if(y.operator===">="&&!r(y.semver,String(M),h))return!1}if(v){if(S&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===S.major&&M.semver.minor===S.minor&&M.semver.patch===S.patch&&(S=!1),M.operator==="<"||M.operator==="<="){if(_=d(v,M,h),_===M&&_!==v)return!1}else if(v.operator==="<="&&!r(v.semver,String(M),h))return!1}if(!M.operator&&(v||y)&&x!==0)return!1}return!(y&&w&&!v&&x!==0||v&&C&&!y&&x!==0||E||S)},u=(m,p,h)=>{if(!m)return p;const g=s(m.semver,p.semver,h);return g>0?m:g<0||p.operator===">"&&m.operator===">="?p:m},d=(m,p,h)=>{if(!m)return p;const g=s(m.semver,p.semver,h);return g<0?m:g>0||p.operator==="<"&&m.operator==="<="?p:m};return ak=a,ak}var ok,Iz;function FHe(){if(Iz)return ok;Iz=1;const e=x1(),t=JS(),n=aa(),r=_ce(),s=Ph(),a=pHe(),o=hHe(),l=gHe(),c=yHe(),u=vHe(),d=xHe(),m=bHe(),p=_He(),h=Ei(),g=wHe(),y=CHe(),v=AP(),x=SHe(),b=EHe(),_=tE(),w=jP(),C=wce(),S=Cce(),E=RP(),M=IP(),k=Sce(),T=MHe(),j=nE(),R=Mi(),O=rE(),P=THe(),N=NHe(),I=AHe(),D=jHe(),F=RHe(),B=PP(),V=IHe(),$=PHe(),G=OHe(),X=LHe(),Y=DHe();return ok={parse:s,valid:a,clean:o,inc:l,diff:c,major:u,minor:d,patch:m,prerelease:p,compare:h,rcompare:g,compareLoose:y,compareBuild:v,sort:x,rsort:b,gt:_,lt:w,eq:C,neq:S,gte:E,lte:M,cmp:k,coerce:T,Comparator:j,Range:R,satisfies:O,toComparators:P,maxSatisfying:N,minSatisfying:I,minVersion:D,validRange:F,outside:B,gtr:V,ltr:$,intersects:G,simplifyRange:X,subset:Y,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},ok}var Pz;function UHe(){return Pz||(Pz=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.matchesRule=e.ObfuscatedOperatorType=e.OperatorType=void 0;const t=FHe(),n=Ih();var r;(function(v){v.MATCHES="MATCHES",v.NOT_MATCHES="NOT_MATCHES",v.GTE="GTE",v.GT="GT",v.LTE="LTE",v.LT="LT",v.ONE_OF="ONE_OF",v.NOT_ONE_OF="NOT_ONE_OF",v.IS_NULL="IS_NULL"})(r=e.OperatorType||(e.OperatorType={}));var s;(function(v){v.MATCHES="05015086bdd8402218f6aad6528bef08",v.NOT_MATCHES="8323761667755378c3a78e0a6ed37a78",v.GTE="32d35312e8f24bc1669bd2b45c00d47c",v.GT="cd6a9bd2a175104eed40f0d33a8b4020",v.LTE="cc981ecc65ecf63ad1673cbec9c64198",v.LT="c562607189d77eb9dfb707464c1e7b0b",v.ONE_OF="27457ce369f2a74203396a35ef537c0b",v.NOT_ONE_OF="602f5ee0b6e84fe29f43ab48b9e1addf",v.IS_NULL="dbd9c38e0339e6c34bd48cafc59be388"})(s=e.ObfuscatedOperatorType||(e.ObfuscatedOperatorType={}));var a;(function(v){v.PLAIN_STRING="PLAIN_STRING",v.STRING_ARRAY="STRING_ARRAY",v.SEM_VER="SEM_VER",v.NUMERIC="NUMERIC"})(a||(a={}));function o(v,x,b){return!l(x,v.conditions,b).includes(!1)}e.matchesRule=o;function l(v,x,b){return x.map(_=>b?u(Object.entries(v).reduce((w,[C,S])=>Object.assign({[(0,n.getMD5Hash)(C)]:S},w),{}),_):c(v,_))}function c(v,x){const b=v[x.attribute],_=y(x.value);if(x.operator===r.IS_NULL)return x.value?b==null:b!=null;if(b!=null)switch(x.operator){case r.GTE:return _===a.SEM_VER?g(b,x.value,t.gte):h(b,x.value,(w,C)=>w>=C);case r.GT:return _===a.SEM_VER?g(b,x.value,t.gt):h(b,x.value,(w,C)=>w>C);case r.LTE:return _===a.SEM_VER?g(b,x.value,t.lte):h(b,x.value,(w,C)=>w<=C);case r.LT:return _===a.SEM_VER?g(b,x.value,t.lt):h(b,x.value,(w,C)=>w<C);case r.MATCHES:return new RegExp(x.value).test(b);case r.NOT_MATCHES:return!new RegExp(x.value).test(b);case r.ONE_OF:return d(b.toString(),x.value);case r.NOT_ONE_OF:return m(b.toString(),x.value)}return!1}function u(v,x){const b=v[x.attribute],_=y(b);if(x.operator===s.IS_NULL)return x.value===(0,n.getMD5Hash)("true")?b==null:b!=null;if(b!=null)switch(x.operator){case s.GTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.gte):h(b,Number((0,n.decodeBase64)(x.value)),(w,C)=>w>=C);case s.GT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.gt):h(b,Number((0,n.decodeBase64)(x.value)),(w,C)=>w>C);case s.LTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.lte):h(b,Number((0,n.decodeBase64)(x.value)),(w,C)=>w<=C);case s.LT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.lt):h(b,Number((0,n.decodeBase64)(x.value)),(w,C)=>w<C);case s.MATCHES:return new RegExp((0,n.decodeBase64)(x.value)).test(b);case s.NOT_MATCHES:return!new RegExp((0,n.decodeBase64)(x.value)).test(b);case s.ONE_OF:return d((0,n.getMD5Hash)(b.toString()),x.value);case s.NOT_ONE_OF:return m((0,n.getMD5Hash)(b.toString()),x.value)}return!1}function d(v,x){return p(v,x).length>0}function m(v,x){return p(v,x).length===0}function p(v,x){return x.filter(b=>b===v)}function h(v,x,b){return b(Number(v),Number(x))}function g(v,x,b){return!!(0,t.valid)(v)&&!!(0,t.valid)(x)&&b(v,x)}function y(v){return typeof v=="number"?a.NUMERIC:Array.isArray(v)?a.STRING_ARRAY:typeof v=="string"&&(0,t.valid)(v)?a.SEM_VER:isNaN(Number(v))?a.PLAIN_STRING:a.NUMERIC}}(g4)),g4}var Oz;function BHe(){if(Oz)return Ba;Oz=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.matchesRules=Ba.noneResult=Ba.hashKey=Ba.isInShardRange=Ba.Evaluator=void 0;const e=bce(),t=UHe(),n=vce();class r{constructor(u){this.getMatchedEvaluationDetailsMessage=(d,m,p)=>{var h;const g=!!(!((h=d.rules)===null||h===void 0)&&h.length),y=d.splits.length>1,v=m.shards.length>1,x=y||v;return g&&x?`Supplied attributes match rules defined in allocation "${d.key}" and ${p} belongs to the range of traffic assigned to "${m.variationKey}".`:g&&!x?`Supplied attributes match rules defined in allocation "${d.key}".`:`${p} belongs to the range of traffic assigned to "${m.variationKey}" defined in allocation "${d.key}".`},this.sharder=u??new n.MD5Sharder}evaluateFlag(u,d,m,p,h,g){var y,v;const x=new e.FlagEvaluationDetailsBuilder(d.configEnvironment.name,u.allocations,d.configFetchedAt,d.configPublishedAt);if(!u.enabled)return o(u.key,m,p,x.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${u.key}`));const b=new Date,_=[];for(let w=0;w<u.allocations.length;w++){const C=u.allocations[w],S=k=>{_.push({key:C.key,allocationEvaluationCode:k,orderPosition:w+1})};if(C.startAt&&b<new Date(C.startAt)){S(e.AllocationEvaluationCode.BEFORE_START_TIME);continue}if(C.endAt&&b>new Date(C.endAt)){S(e.AllocationEvaluationCode.AFTER_END_TIME);continue}const{matched:E,matchedRule:M}=l((y=C?.rules)!==null&&y!==void 0?y:[],Object.assign({id:m},p),h);if(E){for(const k of C.splits)if(k.shards.every(T=>this.matchesShard(T,m,u.totalShards))){const T=u.variations[k.variationKey],j=x.setMatch(w,T,C,M,_,g).build("MATCH",this.getMatchedEvaluationDetailsMessage(C,k,m));return{flagKey:u.key,subjectKey:m,subjectAttributes:p,allocationKey:C.key,variation:T,extraLogging:(v=k.extraLogging)!==null&&v!==void 0?v:{},doLog:C.doLog,flagEvaluationDetails:j}}S(e.AllocationEvaluationCode.TRAFFIC_EXPOSURE_MISS)}else S(e.AllocationEvaluationCode.FAILING_RULE)}return o(u.key,m,p,x.setNoMatchFound(_).build("DEFAULT_ALLOCATION_NULL",'No allocations matched. Falling back to "Default Allocation", serving NULL'))}matchesShard(u,d,m){const p=this.sharder.getShard(a(u.salt,d),m);return u.ranges.some(h=>s(p,h))}}Ba.Evaluator=r;function s(c,u){return u.start<=c&&c<u.end}Ba.isInShardRange=s;function a(c,u){return`${c}-${u}`}Ba.hashKey=a;function o(c,u,d,m){return{flagKey:c,subjectKey:u,subjectAttributes:d,allocationKey:null,variation:null,extraLogging:{},doLog:!1,flagEvaluationDetails:m}}Ba.noneResult=o;function l(c,u,d){if(!c.length)return{matched:!0,matchedRule:null};let m=null;return c.some(h=>{const g=(0,t.matchesRule)(h,u,d);return g&&(m=h),g})?{matched:!0,matchedRule:m}:{matched:!1,matchedRule:null}}return Ba.matchesRules=l,Ba}var tm={},Lz;function Ece(){if(Lz)return tm;Lz=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.HttpRequestError=void 0;class e extends Error{constructor(r,s,a){super(r),this.message=r,this.status=s,this.cause=a,a&&(this.cause=a)}}tm.HttpRequestError=e;class t{constructor(r,s){this.apiEndpoints=r,this.timeout=s}async getUniversalFlagConfiguration(){const r=this.apiEndpoints.ufcEndpoint();return await this.rawGet(r)}async getBanditParameters(){const r=this.apiEndpoints.banditParametersEndpoint();return await this.rawGet(r)}async rawGet(r){try{const s=new AbortController,a=s.signal,o=setTimeout(()=>s.abort(),this.timeout),l=await fetch(r.toString(),{signal:a});if(clearTimeout(o),!l?.ok)throw new e("Failed to fetch data",l?.status);return await l.json()}catch(s){throw s.name==="AbortError"?new e("Request timed out",408,s):s instanceof e?s:new e("Network error",0,s)}}}return tm.default=t,tm}var mb={},Lg={},Dz;function VHe(){if(Dz)return Lg;Dz=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.waitForMs=void 0;async function e(t){await new Promise(n=>setTimeout(n,t))}return Lg.waitForMs=e,Lg}var Fz;function WHe(){if(Fz)return mb;Fz=1,Object.defineProperty(mb,"__esModule",{value:!0});const e=ZS(),t=y1(),n=VHe();function r(a,o,l){let c=!1,u=0,d=a,m=!1,p;const h=async()=>{var v;c=!1;let x=!1,b=l?.skipInitialPoll?0:1+((v=l?.maxStartRetries)!==null&&v!==void 0?v:t.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES),_=null;for(;!x&&b>0;)try{await o(),x=!0,m=!1,e.logger.info("Eppo SDK successfully requested initial configuration")}catch(C){if(m=!0,e.logger.warn(`Eppo SDK encountered an error with initial poll of configurations: ${C.message}`),--b>0){const S=s(a);e.logger.warn(`Eppo SDK will retry the initial poll again in ${S} ms (${b} attempts remaining)`),await(0,n.waitForMs)(S)}else l?.pollAfterFailedStart?e.logger.warn("Eppo SDK initial poll failed; will attempt regular polling"):(e.logger.error("Eppo SDK initial poll failed. Aborting polling"),g()),l?.errorOnFailedStart&&(_=C)}if(!c&&(x&&l?.pollAfterSuccessfulStart||!x&&l?.pollAfterFailedStart)?(e.logger.info(`Eppo SDK starting regularly polling every ${a} ms`),p=setTimeout(y,a)):e.logger.info("Eppo SDK will not poll for configuration updates"),_)throw e.logger.info("Eppo SDK rethrowing start error"),_},g=()=>{c||(c=!0,p&&clearTimeout(p),e.logger.info("Eppo SDK polling stopped"))};async function y(){var v;if(!c){try{await o(),u=0,d=a,m&&(m=!1,e.logger.info("Eppo SDK poll successful; resuming normal polling"))}catch(x){m=!0,e.logger.warn(`Eppo SDK encountered an error polling configurations: ${x.message}`);const b=1+((v=l?.maxPollRetries)!==null&&v!==void 0?v:t.DEFAULT_POLL_CONFIG_REQUEST_RETRIES);if(++u<b){const _=Math.pow(2,u),w=s(a);d=_*a+w,e.logger.warn(`Eppo SDK will try polling again in ${d} ms (${b-u} attempts remaining)`)}else e.logger.error(`Eppo SDK reached maximum of ${u} failed polling attempts. Stopping polling`),g()}setTimeout(y,d)}}return{start:h,stop:g}}mb.default=r;function s(a){const o=a*t.POLL_JITTER_PCT/2,l=Math.max(Math.floor(Math.random()*a*t.POLL_JITTER_PCT/2),1);return o+l}return mb}var td={},Uz;function Mce(){if(Uz)return td;Uz=1,Object.defineProperty(td,"__esModule",{value:!0}),td.validateNotBlank=td.InvalidArgumentError=void 0;class e extends Error{}td.InvalidArgumentError=e;function t(n,r){if(n==null||n.length===0)throw new e(r)}return td.validateNotBlank=t,td}var Dg={};const $He="4.0.0",HHe={version:$He};var Bz;function zHe(){if(Bz)return Dg;Bz=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.LIB_VERSION=void 0;const e=HHe;return Dg.LIB_VERSION=e.version,Dg}var Vz;function GHe(){if(Vz)return Fc;Vz=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.checkValueTypeMatch=Fc.checkTypeMatch=void 0;const e=gce(),t=ZS(),n=dHe(),r=yce(),s=xce(),a=y1(),o=fHe(),l=mHe(),c=BHe(),u=bce(),d=Ece(),m=v1(),p=Ih(),h=WHe(),g=Mce(),y=zHe();class v{constructor(w,C,S,E,M=!1){this.flagConfigurationStore=w,this.banditVariationConfigurationStore=C,this.banditModelConfigurationStore=S,this.configurationRequestParameters=E,this.isObfuscated=M,this.queuedAssignmentEvents=[],this.queuedBanditEvents=[],this.isGracefulFailureMode=!0,this.evaluator=new c.Evaluator,this.banditEvaluator=new n.BanditEvaluator}setConfigurationRequestParameters(w){this.configurationRequestParameters=w}setFlagConfigurationStore(w){this.flagConfigurationStore=w}setBanditVariationConfigurationStore(w){this.banditVariationConfigurationStore=w}setBanditModelConfigurationStore(w){this.banditModelConfigurationStore=w}setIsObfuscated(w){this.isObfuscated=w}async fetchFlagConfigurations(){var w,C;if(!this.configurationRequestParameters)throw new Error("Eppo SDK unable to fetch flag configurations without configuration request parameters");if(this.requestPoller&&this.requestPoller.stop(),!await this.flagConfigurationStore.isExpired()){t.logger.info("[Eppo SDK] Configuration store is not expired. Skipping fetching flag configurations");return}const{apiKey:E,sdkName:M,sdkVersion:k,baseUrl:T,requestTimeoutMs:j=a.DEFAULT_REQUEST_TIMEOUT_MS,numInitialRequestRetries:R=a.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES,numPollRequestRetries:O=a.DEFAULT_POLL_CONFIG_REQUEST_RETRIES,pollAfterSuccessfulInitialization:P=!1,pollAfterFailedInitialization:N=!1,throwOnFailedInitialization:I=!1,skipInitialPoll:D=!1}=this.configurationRequestParameters,F=new e.default({baseUrl:T,queryParams:{apiKey:E,sdkName:M,sdkVersion:k}}),B=new d.default(F,j),V=new s.default(B,this.flagConfigurationStore,(w=this.banditVariationConfigurationStore)!==null&&w!==void 0?w:null,(C=this.banditModelConfigurationStore)!==null&&C!==void 0?C:null);this.requestPoller=(0,h.default)(a.POLL_INTERVAL_MS,V.fetchAndStoreConfigurations.bind(V),{maxStartRetries:R,maxPollRetries:O,pollAfterSuccessfulStart:P,pollAfterFailedStart:N,errorOnFailedStart:I,skipInitialPoll:D}),await this.requestPoller.start()}stopPolling(){this.requestPoller&&this.requestPoller.stop()}getStringAssignment(w,C,S,E){return this.getStringAssignmentDetails(w,C,S,E).variation}getStringAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:T}=this.getAssignmentVariation(w,C,S,l.EppoValue.String(E),m.VariationType.STRING);return{variation:(M=k.stringValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:T}}getBoolAssignment(w,C,S,E){return this.getBooleanAssignment(w,C,S,E)}getBooleanAssignment(w,C,S,E){return this.getBooleanAssignmentDetails(w,C,S,E).variation}getBooleanAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:T}=this.getAssignmentVariation(w,C,S,l.EppoValue.Bool(E),m.VariationType.BOOLEAN);return{variation:(M=k.boolValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:T}}getIntegerAssignment(w,C,S,E){return this.getIntegerAssignmentDetails(w,C,S,E).variation}getIntegerAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:T}=this.getAssignmentVariation(w,C,S,l.EppoValue.Numeric(E),m.VariationType.INTEGER);return{variation:(M=k.numericValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:T}}getNumericAssignment(w,C,S,E){return this.getNumericAssignmentDetails(w,C,S,E).variation}getNumericAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:T}=this.getAssignmentVariation(w,C,S,l.EppoValue.Numeric(E),m.VariationType.NUMERIC);return{variation:(M=k.numericValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:T}}getJSONAssignment(w,C,S,E){return this.getJSONAssignmentDetails(w,C,S,E).variation}getJSONAssignmentDetails(w,C,S,E){var M;const{eppoValue:k,flagEvaluationDetails:T}=this.getAssignmentVariation(w,C,S,l.EppoValue.JSON(E),m.VariationType.JSON);return{variation:(M=k.objectValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:T}}getBanditAction(w,C,S,E,M){const{variation:k,action:T}=this.getBanditActionDetails(w,C,S,E,M);return{variation:k,action:T}}getBanditActionDetails(w,C,S,E,M){var k,T,j;const R=this.flagEvaluationDetailsBuilder(w),O={variation:M,action:null};let P=M,N=null;try{const I=(k=this.banditVariationConfigurationStore)===null||k===void 0?void 0:k.get(w);if(I&&!Object.keys(E).length)return Object.assign(Object.assign({},O),{evaluationDetails:R.buildForNoneResult("NO_ACTIONS_SUPPLIED_FOR_BANDIT","No bandit actions passed for a flag known to have an active bandit")});const D=this.ensureNonContextualSubjectAttributes(S),{variation:F,evaluationDetails:B}=this.getStringAssignmentDetails(w,C,D,M);P=F;const V=(T=I?.find($=>$.variationValue===P))===null||T===void 0?void 0:T.key;if(V){const $=(j=this.banditModelConfigurationStore)===null||j===void 0?void 0:j.get(V);if(!$)throw new Error("No model parameters for bandit "+V);const G=$.modelData,X=this.ensureContextualSubjectAttributes(S),Y=this.ensureActionsWithContextualAttributes(E),W=this.banditEvaluator.evaluateBandit(w,C,X,Y,G);N=W.actionKey,B.banditAction=N,B.banditKey=V;const H={timestamp:new Date().toISOString(),featureFlag:w,bandit:V,subject:C,action:N,actionProbability:W.actionWeight,optimalityGap:W.optimalityGap,modelVersion:$.modelVersion,subjectNumericAttributes:X.numericAttributes,subjectCategoricalAttributes:X.categoricalAttributes,actionNumericAttributes:Y[N].numericAttributes,actionCategoricalAttributes:Y[N].categoricalAttributes,metaData:this.buildLoggerMetadata(),evaluationDetails:B};this.logBanditAction(H)}return{variation:P,action:N,evaluationDetails:B}}catch(I){if(t.logger.error("Error evaluating bandit action",I),!this.isGracefulFailureMode)throw I;return Object.assign(Object.assign({},O),{evaluationDetails:R.buildForNoneResult("ASSIGNMENT_ERROR",`Error evaluating bandit action: ${I.message}`)})}}ensureNonContextualSubjectAttributes(w){let C;if(this.isInstanceOfContextualAttributes(w)){const S=w;C=Object.assign(Object.assign({},S.numericAttributes),S.categoricalAttributes)}else C=w;return C}ensureContextualSubjectAttributes(w){let C;return this.isInstanceOfContextualAttributes(w)?C=w:C=this.deduceAttributeContext(w),C}ensureActionsWithContextualAttributes(w){let C={};return Array.isArray(w)?w.forEach(S=>{C[S]={numericAttributes:{},categoricalAttributes:{}}}):Object.values(w).every(this.isInstanceOfContextualAttributes)?C=w:Object.entries(w).forEach(([S,E])=>{C[S]=this.deduceAttributeContext(E)}),C}isInstanceOfContextualAttributes(w){return!!(typeof w=="object"&&w&&"numericAttributes"in w&&"categoricalAttributes"in w)}deduceAttributeContext(w){const C={numericAttributes:{},categoricalAttributes:{}};return Object.entries(w).forEach(([S,E])=>{typeof E=="number"&&isFinite(E)?C.numericAttributes[S]=E:C.categoricalAttributes[S]=E}),C}logBanditAction(w){if(!this.banditLogger){this.queuedBanditEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedBanditEvents.push(w);return}try{this.banditLogger.logBanditAction(w)}catch(C){t.logger.warn("Error encountered logging bandit action",C)}}getAssignmentVariation(w,C,S,E,M){try{const k=this.getAssignmentDetail(w,C,S,M);return k.variation?{eppoValue:l.EppoValue.valueOf(k.variation.value,M),flagEvaluationDetails:k.flagEvaluationDetails}:{eppoValue:E,flagEvaluationDetails:k.flagEvaluationDetails}}catch(k){const T=this.rethrowIfNotGraceful(k,E),j=new u.FlagEvaluationDetailsBuilder("",[],"","").buildForNoneResult("ASSIGNMENT_ERROR",`Assignment Error: ${k.message}`);return{eppoValue:T,flagEvaluationDetails:j}}}rethrowIfNotGraceful(w,C){if(this.isGracefulFailureMode)return t.logger.error(`[Eppo SDK] Error getting assignment: ${w.message}`),C??l.EppoValue.Null();throw w}getAssignmentDetail(w,C,S={},E){(0,g.validateNotBlank)(C,"Invalid argument: subjectKey cannot be blank"),(0,g.validateNotBlank)(w,"Invalid argument: flagKey cannot be blank");const M=this.flagEvaluationDetailsBuilder(w),k=this.getConfigDetails(),T=this.getFlag(w);if(T===null){t.logger.warn(`[Eppo SDK] No assigned variation. Flag not found: ${w}`);const R=M.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,C,S,R)}if(!x(E,T.variationType))throw new TypeError(`Variation value does not have the correct type. Found: ${T.variationType} != ${E} for flag ${w}`);if(!T.enabled){t.logger.info(`[Eppo SDK] No assigned variation. Flag is disabled: ${w}`);const R=M.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,C,S,R)}const j=this.evaluator.evaluateFlag(T,k,C,S,this.isObfuscated,E);if(this.isObfuscated&&(j.flagKey=w),j?.variation&&!b(E,j.variation.value)){const{key:R,value:O}=j.variation,P=`Expected variation type ${E} does not match for variation '${R}' with value ${O}`,N=M.buildForNoneResult("TYPE_MISMATCH",P);return(0,c.noneResult)(w,C,S,N)}try{j?.doLog&&this.logAssignment(j)}catch(R){t.logger.error(`[Eppo SDK] Error logging assignment event: ${R}`)}return j}flagEvaluationDetailsBuilder(w){var C;const S=this.getFlag(w),E=this.getConfigDetails();return new u.FlagEvaluationDetailsBuilder(E.configEnvironment.name,(C=S?.allocations)!==null&&C!==void 0?C:[],E.configFetchedAt,E.configPublishedAt)}getConfigDetails(){var w,C,S;return{configFetchedAt:(w=this.flagConfigurationStore.getConfigFetchedAt())!==null&&w!==void 0?w:"",configPublishedAt:(C=this.flagConfigurationStore.getConfigPublishedAt())!==null&&C!==void 0?C:"",configEnvironment:(S=this.flagConfigurationStore.getEnvironment())!==null&&S!==void 0?S:{name:""}}}getFlag(w){return this.isObfuscated?this.getObfuscatedFlag(w):this.flagConfigurationStore.get(w)}getObfuscatedFlag(w){const C=this.flagConfigurationStore.get((0,p.getMD5Hash)(w));return C?(0,o.decodeFlag)(C):null}getFlagKeys(){return this.flagConfigurationStore.getKeys()}isInitialized(){return this.flagConfigurationStore.isInitialized()&&(!this.banditVariationConfigurationStore||this.banditVariationConfigurationStore.isInitialized())&&(!this.banditModelConfigurationStore||this.banditModelConfigurationStore.isInitialized())}setLogger(w){this.setAssignmentLogger(w)}setAssignmentLogger(w){var C;this.assignmentLogger=w,this.flushQueuedEvents(this.queuedAssignmentEvents,(C=this.assignmentLogger)===null||C===void 0?void 0:C.logAssignment)}setBanditLogger(w){var C;this.banditLogger=w,this.flushQueuedEvents(this.queuedBanditEvents,(C=this.banditLogger)===null||C===void 0?void 0:C.logBanditAction)}disableAssignmentCache(){this.assignmentCache=void 0}useNonExpiringInMemoryAssignmentCache(){this.assignmentCache=new r.NonExpiringInMemoryAssignmentCache}useLRUInMemoryAssignmentCache(w){this.assignmentCache=new r.LRUInMemoryAssignmentCache(w)}useCustomAssignmentCache(w){this.assignmentCache=w}setIsGracefulFailureMode(w){this.isGracefulFailureMode=w}getFlagConfigurations(){return this.flagConfigurationStore.entries()}flushQueuedEvents(w,C){const S=[...w];w.length=0,C&&S.forEach(E=>{try{C(E)}catch(M){t.logger.error(`[Eppo SDK] Error flushing event to logger: ${M.message}`)}})}logAssignment(w){var C,S,E,M,k;const{flagKey:T,subjectKey:j,allocationKey:R,subjectAttributes:O,variation:P}=w,N=Object.assign(Object.assign({},(C=w.extraLogging)!==null&&C!==void 0?C:{}),{allocation:R??null,experiment:R?`${T}-${R}`:null,featureFlag:T,variation:(S=P?.key)!==null&&S!==void 0?S:null,subject:j,timestamp:new Date().toISOString(),subjectAttributes:O,metaData:this.buildLoggerMetadata(),evaluationDetails:w.flagEvaluationDetails});if(!(P&&R&&(!((E=this.assignmentCache)===null||E===void 0)&&E.has({flagKey:T,subjectKey:j,allocationKey:R,variationKey:P.key})))){if(!this.assignmentLogger){this.queuedAssignmentEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedAssignmentEvents.push(N);return}try{this.assignmentLogger.logAssignment(N),(M=this.assignmentCache)===null||M===void 0||M.set({flagKey:T,subjectKey:j,allocationKey:R??"__eppo_no_allocation",variationKey:(k=P?.key)!==null&&k!==void 0?k:"__eppo_no_variation"})}catch(I){t.logger.error(`[Eppo SDK] Error logging assignment event: ${I.message}`)}}}buildLoggerMetadata(){return{obfuscated:this.isObfuscated,sdkLanguage:"javascript",sdkLibVersion:y.LIB_VERSION}}}Fc.default=v;function x(_,w){return _===void 0||w===_}Fc.checkTypeMatch=x;function b(_,w){if(_==null)return!0;switch(_){case m.VariationType.STRING:return typeof w=="string";case m.VariationType.BOOLEAN:return typeof w=="boolean";case m.VariationType.INTEGER:return typeof w=="number"&&Number.isInteger(w);case m.VariationType.NUMERIC:return typeof w=="number";case m.VariationType.JSON:return typeof w=="string";default:return!1}}return Fc.checkValueTypeMatch=b,Fc}var Fg={},Wz;function qHe(){if(Wz)return Fg;Wz=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.HybridConfigurationStore=void 0;const e=ZS();class t{constructor(r,s){this.servingStore=r,this.persistentStore=s,this.environment=null,this.configFetchedAt=null,this.configPublishedAt=null}async init(){if(!this.persistentStore)return;this.persistentStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} Persistent store is not initialized from remote configuration. Serving assignments that may be stale.`);const r=await this.persistentStore.entries();this.servingStore.setEntries(r)}isInitialized(){var r,s;return this.servingStore.isInitialized()&&((s=(r=this.persistentStore)===null||r===void 0?void 0:r.isInitialized())!==null&&s!==void 0?s:!0)}async isExpired(){var r;const s=await((r=this.persistentStore)===null||r===void 0?void 0:r.isExpired());return s??!0}get(r){return this.servingStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} getting a value from a ServingStore that is not initialized.`),this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async setEntries(r){return this.persistentStore&&await this.persistentStore.setEntries(r),this.servingStore.setEntries(r),!0}setEnvironment(r){this.environment=r}getEnvironment(){return this.environment}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return Fg.HybridConfigurationStore=t,Fg}var nd={},$z;function KHe(){if($z)return nd;$z=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.MemoryOnlyConfigurationStore=nd.MemoryStore=void 0;class e{constructor(){this.store={},this.initialized=!1}get(r){var s;return(s=this.store[r])!==null&&s!==void 0?s:null}entries(){return this.store}getKeys(){return Object.keys(this.store)}isInitialized(){return this.initialized}setEntries(r){this.store=Object.assign({},r),this.initialized=!0}}nd.MemoryStore=e;class t{constructor(){this.servingStore=new e,this.initialized=!1,this.configFetchedAt=null,this.configPublishedAt=null,this.environment=null}init(){return this.initialized=!0,Promise.resolve()}get(r){return this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async isExpired(){return!0}isInitialized(){return this.initialized}async setEntries(r){return this.servingStore.setEntries(r),this.initialized=!0,!0}getEnvironment(){return this.environment}setEnvironment(r){this.environment=r}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return nd.MemoryOnlyConfigurationStore=t,nd}var Hz;function Oh(){return Hz||(Hz=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=e.assignmentCacheValueToString=e.assignmentCacheKeyToString=e.LRUInMemoryAssignmentCache=e.NonExpiringInMemoryAssignmentCache=e.MemoryOnlyConfigurationStore=e.HybridConfigurationStore=e.MemoryStore=e.validation=e.HttpClient=e.FlagConfigRequestor=e.ApiEndpoints=e.constants=e.EppoClient=e.AbstractAssignmentCache=e.applicationLogger=void 0;const t=gce();e.ApiEndpoints=t.default;const n=ZS();Object.defineProperty(e,"applicationLogger",{enumerable:!0,get:function(){return n.logger}});const r=yce();Object.defineProperty(e,"AbstractAssignmentCache",{enumerable:!0,get:function(){return r.AbstractAssignmentCache}}),Object.defineProperty(e,"NonExpiringInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.NonExpiringInMemoryAssignmentCache}}),Object.defineProperty(e,"LRUInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.LRUInMemoryAssignmentCache}}),Object.defineProperty(e,"assignmentCacheKeyToString",{enumerable:!0,get:function(){return r.assignmentCacheKeyToString}}),Object.defineProperty(e,"assignmentCacheValueToString",{enumerable:!0,get:function(){return r.assignmentCacheValueToString}});const s=GHe();e.EppoClient=s.default;const a=xce();e.FlagConfigRequestor=a.default;const o=qHe();Object.defineProperty(e,"HybridConfigurationStore",{enumerable:!0,get:function(){return o.HybridConfigurationStore}});const l=KHe();Object.defineProperty(e,"MemoryStore",{enumerable:!0,get:function(){return l.MemoryStore}}),Object.defineProperty(e,"MemoryOnlyConfigurationStore",{enumerable:!0,get:function(){return l.MemoryOnlyConfigurationStore}});const c=y1();e.constants=c;const u=Ece();e.HttpClient=u.default;const d=v1();Object.defineProperty(e,"VariationType",{enumerable:!0,get:function(){return d.VariationType}});const m=Mce();e.validation=m}(o4)),o4}var Ug={},Va={},pb={},zz;function kce(){if(zz)return pb;zz=1,Object.defineProperty(pb,"__esModule",{value:!0});class e{constructor(n){this.storage=n}async has(n){return!!await this.get(n)}async get(n){var r;const s=await this.storage.get(n);return(r=s?.[n])!==null&&r!==void 0?r:void 0}async entries(){return await this.storage.get(null)}async set(n,r){await this.storage.set({[n]:r})}}return pb.default=e,pb}var Bg={},rd={},Gz;function Tce(){return Gz||(Gz=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.META_KEY=rd.CONFIGURATION_KEY=void 0,rd.CONFIGURATION_KEY="eppo-configuration",rd.META_KEY="eppo-configuration-meta"),rd}var qz;function Nce(){if(qz)return Bg;qz=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.ChromeStorageEngine=void 0;const e=Tce();class t{constructor(r,s){this.storageMap=r,this.getContentsJsonString=async()=>{const o=await this.storageMap.get(this.contentsKey);return o??null},this.getMetaJsonString=async()=>{const o=await this.storageMap.get(this.metaKey);return o??null},this.setContentsJsonString=async o=>{await this.storageMap.set(this.contentsKey,o)},this.setMetaJsonString=async o=>{await this.storageMap.set(this.metaKey,o)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return Bg.ChromeStorageEngine=t,Bg}var Vg={},Kz;function YHe(){if(Kz)return Vg;Kz=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.IsolatableHybridConfigurationStore=void 0;const e=Oh();class t extends e.HybridConfigurationStore{constructor(r,s,a="always"){super(r,s),this.servingStoreUpdateStrategy=a}async setEntries(r){var s;this.persistentStore&&await this.persistentStore.setEntries(r);const a=!this.persistentStore||await this.persistentStore.isExpired(),o=!(!((s=this.servingStore.getKeys())===null||s===void 0)&&s.length),l=this.servingStoreUpdateStrategy==="always"||a&&this.servingStoreUpdateStrategy==="expired"||a&&o;return l&&this.servingStore.setEntries(r),l}}return Vg.IsolatableHybridConfigurationStore=t,Vg}var Wg={},Yz;function QHe(){if(Yz)return Wg;Yz=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.LocalStorageEngine=void 0;const e=Tce();class t{constructor(r,s){this.localStorage=r,this.getContentsJsonString=async()=>this.localStorage.getItem(this.contentsKey),this.getMetaJsonString=async()=>this.localStorage.getItem(this.metaKey),this.setContentsJsonString=async o=>{this.localStorage.setItem(this.contentsKey,o)},this.setMetaJsonString=async o=>{this.localStorage.setItem(this.metaKey,o)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return Wg.LocalStorageEngine=t,Wg}var $g={},Qz;function XHe(){if(Qz)return $g;Qz=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.StringValuedAsyncStore=void 0;class e{constructor(n,r=0){this.storageEngine=n,this.cooldownSeconds=r,this.initialized=!1}isInitialized(){return this.initialized}async isExpired(){if(!this.cooldownSeconds)return!0;const n=await this.storageEngine.getMetaJsonString();let r=!0;if(n){const a=JSON.parse(n).lastUpdatedAtMs;r=!a||Date.now()-a>this.cooldownSeconds*1e3}return r}async entries(){const n=await this.storageEngine.getContentsJsonString();return n?JSON.parse(n):{}}async setEntries(n){await this.storageEngine.setContentsJsonString(JSON.stringify(n));const r={lastUpdatedAtMs:new Date().getTime()};await this.storageEngine.setMetaJsonString(JSON.stringify(r)),this.initialized=!0}}return $g.StringValuedAsyncStore=e,$g}var Xz;function OP(){if(Xz)return Va;Xz=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.localStorageIfAvailable=Va.hasWindowLocalStorage=Va.chromeStorageIfAvailable=Va.hasChromeStorage=Va.configurationStorageFactory=void 0;const e=Oh(),t=kce(),n=Nce(),r=YHe(),s=QHe(),a=XHe();function o({maxAgeSeconds:m=0,servingStoreUpdateStrategy:p="always",hasChromeStorage:h=!1,hasWindowLocalStorage:g=!1,persistentStore:y=void 0,forceMemoryOnly:v=!1},{chromeStorage:x,windowLocalStorage:b,storageKeySuffix:_}={}){if(v)return new e.MemoryOnlyConfigurationStore;if(y)return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,y,p);if(h&&x){const w=new n.ChromeStorageEngine(new t.default(x),_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),p)}else if(g&&b){const w=new s.LocalStorageEngine(b,_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),p)}return new e.MemoryOnlyConfigurationStore}Va.configurationStorageFactory=o;function l(){return typeof chrome<"u"&&!!chrome.storage}Va.hasChromeStorage=l;function c(){return l()?chrome.storage.local:void 0}Va.chromeStorageIfAvailable=c;function u(){try{return typeof window<"u"&&!!window.localStorage}catch{return!1}}Va.hasWindowLocalStorage=u;function d(){return u()?window.localStorage:void 0}return Va.localStorageIfAvailable=d,Va}var hb={},Zz;function ZHe(){if(Zz)return hb;Zz=1,Object.defineProperty(hb,"__esModule",{value:!0});const e=Oh(),t=kce();class n{constructor(s){this.storage=new t.default(s)}set(s){this.storage.set((0,e.assignmentCacheKeyToString)(s),(0,e.assignmentCacheValueToString)(s))}has(s){throw new Error("This should never be called for ChromeStorageAssignmentCache, use getEntries() instead.")}async getEntries(){const s=await this.storage.entries();return Object.entries(s).map(([a,o])=>[a,o])}}return hb.default=n,hb}var gb={},Jz;function Ace(){if(Jz)return gb;Jz=1,Object.defineProperty(gb,"__esModule",{value:!0});class e{constructor(n,r){this.servingStore=n,this.persistentStore=r}async init(){const n=await this.persistentStore.getEntries();n&&this.servingStore.setEntries(n)}set(n){this.servingStore.set(n),this.persistentStore.set(n)}has(n){return this.servingStore.has(n)}}return gb.default=e,gb}var Hg={},eG;function JHe(){if(eG)return Hg;eG=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.LocalStorageAssignmentCache=void 0;const e=Oh(),t=OP();class n extends e.AbstractAssignmentCache{constructor(a){super(new r(a))}setEntries(a){a.forEach(([o,l])=>{o&&l&&this.delegate.set(o,l)})}getEntries(){return Promise.resolve(Array.from(this.entries()))}}Hg.LocalStorageAssignmentCache=n;class r{constructor(a){if(!(0,t.hasWindowLocalStorage)())throw new Error("LocalStorage is not available");const o=a?`-${a}`:"";this.localStorageKey=`eppo-assignment${o}`}clear(){this.getCache().clear()}delete(a){return this.getCache().delete(a)}forEach(a,o){this.getCache().forEach(a,o)}entries(){return this.getCache().entries()}keys(){return this.getCache().keys()}values(){return this.getCache().values()}[Symbol.iterator](){return this.getCache()[Symbol.iterator]()}has(a){return this.getCache().has(a)}get(a){var o;return(o=this.getCache().get(a))!==null&&o!==void 0?o:void 0}set(a,o){return this.setCache(this.getCache().set(a,o))}getCache(){const a=window.localStorage.getItem(this.localStorageKey);return a?new Map(JSON.parse(a)):new Map}setCache(a){return window.localStorage.setItem(this.localStorageKey,JSON.stringify(Array.from(a.entries()))),this}}return Hg}var yb={},tG;function eze(){if(tG)return yb;tG=1,Object.defineProperty(yb,"__esModule",{value:!0});const e=Oh();class t{constructor(){this.store=new Map,this.cache=new e.NonExpiringInMemoryAssignmentCache(this.store)}set(r){this.cache.set(r)}has(r){return this.cache.has(r)}setEntries(r){const{store:s}=this;r.forEach(([a,o])=>s.set(a,o))}getEntries(){return Promise.resolve(Array.from(this.cache.entries()))}}return yb.default=t,yb}var nG;function tze(){if(nG)return Ug;nG=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.assignmentCacheFactory=void 0;const e=OP(),t=ZHe(),n=Ace(),r=JHe(),s=eze();function a({forceMemoryOnly:o=!1,chromeStorage:l,storageKeySuffix:c}){const u=new s.default;if(o)return u;if(l){const d=new t.default(l);return new n.default(u,d)}else if((0,e.hasWindowLocalStorage)()){const d=new r.LocalStorageAssignmentCache(c);return new n.default(u,d)}else return u}return Ug.assignmentCacheFactory=a,Ug}var sd={};const nze="3.4.0",rze={version:nze};var rG;function sze(){if(rG)return sd;rG=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.sdkName=sd.sdkVersion=void 0;const e=rze;return sd.sdkVersion=e.version,sd.sdkName="js-client-sdk",sd}var sG;function aze(){return sG||(sG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getConfigUrl=e.getInstance=e.init=e.offlineInit=e.buildStorageKeySuffix=e.EppoJSClient=e.ChromeStorageEngine=void 0;const t=Oh(),n=tze(),r=Ace(),s=OP(),a=sze();var o=Nce();Object.defineProperty(e,"ChromeStorageEngine",{enumerable:!0,get:function(){return o.ChromeStorageEngine}});const l=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});class c extends t.EppoClient{getStringAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getStringAssignment(y,v,x,b)}getStringAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getStringAssignmentDetails(y,v,x,b)}getBoolAssignment(y,v,x,b){return this.getBooleanAssignment(y,v,x,b)}getBooleanAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignment(y,v,x,b)}getBooleanAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignmentDetails(y,v,x,b)}getIntegerAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignment(y,v,x,b)}getIntegerAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignmentDetails(y,v,x,b)}getNumericAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignment(y,v,x,b)}getNumericAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignmentDetails(y,v,x,b)}getJSONAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignment(y,v,x,b)}getJSONAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignmentDetails(y,v,x,b)}getBanditAction(y,v,x,b,_){return c.getAssignmentInitializationCheck(),super.getBanditAction(y,v,x,b,_)}getBanditActionDetails(y,v,x,b,_){return c.getAssignmentInitializationCheck(),super.getBanditActionDetails(y,v,x,b,_)}static getAssignmentInitializationCheck(){c.initialized||t.applicationLogger.warn("Eppo SDK assignment requested before init() completed")}}e.EppoJSClient=c,c.instance=new c(l,void 0,void 0,void 0,!0),c.initialized=!1;function u(g){return g.replace(/\W/g,"").substring(0,8)}e.buildStorageKeySuffix=u;function d(g){var y,v;const x=(y=g.isObfuscated)!==null&&y!==void 0?y:!1,b=(v=g.throwOnFailedInitialization)!==null&&v!==void 0?v:!0;try{const _=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});_.setEntries(g.flagsConfiguration).catch(S=>t.applicationLogger.warn("Error setting flags for memory-only configuration store",S)),c.instance.setFlagConfigurationStore(_),c.instance.setIsObfuscated(x),g.assignmentLogger&&c.instance.setAssignmentLogger(g.assignmentLogger);const C=(0,n.assignmentCacheFactory)({storageKeySuffix:"offline",forceMemoryOnly:!0});c.instance.useCustomAssignmentCache(C)}catch(_){if(t.applicationLogger.warn("Eppo SDK encountered an error initializing, assignment calls will return the default value and not be logged"),b)throw _}return c.initialized=!0,c.instance}e.offlineInit=d;async function m(g){var y,v,x,b,_,w,C;t.validation.validateNotBlank(g.apiKey,"API key required");let S;const E=c.instance,{apiKey:M,persistentStore:k,baseUrl:T,maxCacheAgeSeconds:j,updateOnFetch:R}=g;try{E.stopPolling(),E.setAssignmentLogger(g.assignmentLogger),E.setIsObfuscated(!0);const O=u(M),P=(0,s.configurationStorageFactory)({maxAgeSeconds:j,servingStoreUpdateStrategy:R,persistentStore:k,hasChromeStorage:(0,s.hasChromeStorage)(),hasWindowLocalStorage:(0,s.hasWindowLocalStorage)()},{chromeStorage:(0,s.chromeStorageIfAvailable)(),windowLocalStorage:(0,s.localStorageIfAvailable)(),storageKeySuffix:O});E.setFlagConfigurationStore(P);const N=(0,n.assignmentCacheFactory)({chromeStorage:(0,s.chromeStorageIfAvailable)(),storageKeySuffix:O});N instanceof r.default&&await N.init(),E.useCustomAssignmentCache(N);const I={apiKey:M,sdkName:a.sdkName,sdkVersion:a.sdkVersion,baseUrl:T,requestTimeoutMs:(y=g.requestTimeoutMs)!==null&&y!==void 0?y:void 0,numInitialRequestRetries:(v=g.numInitialRequestRetries)!==null&&v!==void 0?v:void 0,numPollRequestRetries:(x=g.numPollRequestRetries)!==null&&x!==void 0?x:void 0,pollAfterSuccessfulInitialization:(b=g.pollAfterSuccessfulInitialization)!==null&&b!==void 0?b:!1,pollAfterFailedInitialization:(_=g.pollAfterFailedInitialization)!==null&&_!==void 0?_:!1,throwOnFailedInitialization:!0,skipInitialPoll:(w=g.skipInitialRequest)!==null&&w!==void 0?w:!1};E.setConfigurationRequestParameters(I);let D,F;const B=P.init().then(async()=>P.getKeys().length?await P.isExpired()&&!g.useExpiredCache?(t.applicationLogger.warn("Eppo SDK set not to use expired cached configuration"),D=new Error("Configuration store was expired"),""):"config store":(t.applicationLogger.warn("Eppo SDK cached configuration is empty"),D=new Error("Configuration store was empty"),"")).catch(G=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from the configuration store",G),D=G}),V=E.fetchFlagConfigurations().then(()=>"fetch").catch(G=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from fetching",G),F=G});let $=await Promise.race([B,V]);$||(D?$=await V:$=await B),$||(S=F)}catch(O){S=O}if(S&&(t.applicationLogger.warn("Eppo SDK was unable to initialize with a configuration, assignment calls will return the default value and not be logged"+(g.pollAfterFailedInitialization?" until an experiment configuration is successfully retrieved":"")),!((C=g.throwOnFailedInitialization)!==null&&C!==void 0)||C))throw S;return c.initialized=!0,E}e.init=m;function p(){return c.instance}e.getInstance=p;function h(g,y){const v={sdkName:a.sdkName,sdkVersion:a.sdkVersion,apiKey:g};return new t.ApiEndpoints({baseUrl:y,queryParams:v}).ufcEndpoint()}e.getConfigUrl=h}(a4)),a4}var jce=aze();const oze=NTe({__proto__:null},[jce]);class Yy extends Bv{name="CometError"}const ize="pplx.comet-device-id",lze="comet_browser";function Za(){return!!Fo()}function Rce(){const e=Fo();return!!(e?.android_version||e?.ios_version)}const Fo=yte(function(){const t=Tn(lze);if(t)try{return{device_id:Tn(ize),...JSON.parse(t)}}catch{return}},()=>Math.floor(Date.now()/(6*1e4))),cze=(e,t="selected_by_user_text")=>e?`
<${t}>
<selection_timestamp>${new Date(e.timestamp).toLocaleString()}</selection_timestamp>
${e.text}
</${t}>`:"",uze=(e,t,n,r)=>{if(!e)return[];const s=cze(t.userSelection),a=[];if(n.status==="fulfilled"){const o=n.value?.contents||(n.value?.content?[n.value.content]:[]);for(const{markdown:l="",url:c="",title:u="",og_meta:d={},id:m}of o)a.push({content:[l.slice(0,r-s.length)+s],url:c,title:u,content_type:"markdown",content_origin:"current_tab",og_title:d?.title,og_description:d?.description,tab_id:String(m)})}else a.push({content:[],url:t.sidecarSourceTab.url,title:t.sidecarSourceTab.title,tab_id:String(t.sidecarSourceTab.tabId),content_type:"markdown",content_origin:"current_tab"}),t.sidecarSourceTab.secondaryTab&&a.push({content:[],url:t.sidecarSourceTab.secondaryTab.url,title:t.sidecarSourceTab.secondaryTab.title,tab_id:String(t.sidecarSourceTab.secondaryTab.tabId),content_type:"markdown",content_origin:"current_tab"});return a},dze=(e,t,n)=>{const r=[];return e.forEach(s=>{const a=t.status==="fulfilled"&&t.value.contents?.find(o=>o.id===s.id);if(!a){r.push({tab_id:String(s.id),content:[],url:s.url,title:"",content_type:"markdown",content_origin:"open_tab"});return}r.push({tab_id:String(a.id),content:[(a.markdown??"").slice(0,n)],url:a.url??"",title:a.title??"",content_type:"markdown",content_origin:"open_tab",og_title:a.og_meta?.title,og_description:a.og_meta?.description})}),r},fze=async({clientPayloadCacheKey:e,cometBrowser:t,maxChars:n,includeSidecar:r,attachedTabs:s,reason:a,cometState:o,requestId:l})=>{if(!t)return;const c=[],u=Fo(),d={contextType:"runtime",queryContextTimeMs:0,processContextTimeMs:0,getNavigationItemsTimeMs:null,filteredItemsCount:null,version:u.browser_version,mainExtVersion:u.agent_extension_version},m=ac({context_type:d?.contextType,browser_version:d?.version,main_ext_version:d?.mainExtVersion,content_type:d?.contentType});try{ee.info("fetching sidecar context",{request_id:l});const[p,h]=await Promise.allSettled([r?t.GetSidecarContext({key:e,request_id:l}):Promise.resolve(void 0),s.length?t.GetContent({key:e,pages:[...s],request_id:l}):Promise.resolve({contents:[]})]),g=uze(r,o,p,n);if(c.push(...g),s.length){const v=dze(s,h,n);c.push(...v)}d.queryContextTimeMs=performance.now()-m.getStartTimeFromTimeOrigin(),ee.info("sending sidecar context",{request_id:l});const{error:y}=await ne.POST("/rest/browser/client_payload",a,{backOffTime:100,numRetries:2,timeoutMs:Kt.HIGH,body:{client_payload_cache_key:e,client_context:c||[],client_navigation:[],metadata:d},headers:{[Cr]:l}});if(m.addTiming("browser.client_context.overall_time_ms"),y)throw new Ee("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e},cause:y})}catch(p){ee.error("Error sending client payload for cache key ",e,p,{request_id:l})}},mze=async({url:e,cometBrowser:t,stepUuid:n,extraHeaders:r,reason:s})=>{const a=t.openTab({url:e});await Qc(a,n,r,s)},pze=async({cometBrowser:e,maxUrls:t=20})=>{if(e)try{const n=await e.getTopMostVisitedUrls({maxUrls:t},"get-top-most-urls-for-ntp");return n.is_success?n.mostVisitedUrls:void 0}catch(n){ee.error("Error fetching top most urls browser",n);return}},Ice=async(e,t,n)=>{try{const{error:r}=await ne.POST("/rest/browser/tool_failure",n,{body:{client_payload_cache_key:e.clientPayloadCacheKey,error_type:e.errorType,error_msg:e.errorMsg},backOffTime:100,numRetries:2,headers:t,timeoutMs:Kt.MEDIUM});if(r)throw new Ee("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e.clientPayloadCacheKey},cause:r})}catch(r){ee.error("Error while sending a failure of tool",r,{request_id:t[Cr]})}},Qc=async(e,t,n,r)=>{try{const s=await e,{error:a}=await ne.POST("/rest/browser/tool_result",r,{body:{client_payload_cache_key:t,payload:s},backOffTime:100,numRetries:2,headers:n,timeoutMs:Kt.MEDIUM});if(a)throw new Ee("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:t},cause:a})}catch(s){const o=s&&s.message||`sendToolResult error: ${s}`,l="errorType"in s?s:{errorType:"unhandled",errorMsg:o};return ee.error("Error while sending tool result",l.errorType,l.errorMsg,{request_id:n[Cr]}),Ice({clientPayloadCacheKey:t,...l},n,r)}},VA={red:"red",maroon:"blue",orange:"cyan",teal:"green",grey:"grey",brown:"orange",green:"pink",gold:"purple",purple:"red",blue:"yellow"},aG=Object.fromEntries(Object.entries(VA).map(([e,t])=>[t,e])),Pce=e=>aG[e]??aG.grey;async function hze(e,t,n,r,s){const a=Promise.allSettled(e.map(async o=>t.groupTabs({tabIds:o.tab_ids,collapsed:o.collapsed,color:VA[o.color]??VA.grey,groupId:o.group_id,title:o.title},n,r[Cr]))).then(o=>({groups:o.map(l=>{if(l.status=="fulfilled"&&l.value.is_success)return{...l.value.tabGroup,color:Pce(l.value.tabGroup.color)}}).filter(l=>l!==void 0)}));await Qc(a,n,r,s)}async function gze(e,t,n,r,s){const a=t.closeTabs({tabIds:e.tab_ids},n,r[Cr]);await Qc(a,n,r,s)}async function yze(e,t,n,r,s){const a={[FM.OPEN_TAB]:DM.OPEN_TABS,[FM.RECENTLY_CLOSED_TAB]:DM.RECENTLY_CLOSED_TABS,[FM.BROWSER_HISTORY]:DM.HISTORY},o=e.browser_content_sources.map(c=>a[c]).filter(Boolean),l=t.SearchBrowser({closed_tabs_max_results:e.max_results,history_max_results:e.max_results,open_tabs_max_results:e.max_results,request_id:r[Cr],key:n,queries:Array.isArray(e.queries)?[...e.queries]:[],sources:o,start_time:e.start_time?Date.now()-new Date(e.start_time).getTime():void 0,end_time:e.end_time?Date.now()-new Date(e.end_time).getTime():void 0});await Qc(l,n,r,s)}async function oG({result:e,key:t,reason:n}){try{await ne.POST("/rest/browser/initial_history_summary",n,{body:{key:t,data:e},backOffTime:100,numRetries:2,timeoutMs:Kt.MEDIUM,headers:{"Content-Type":"application/json"}})}catch(r){ee.error("Error sending client payload for cache key ",r)}}function vze({entropyBrowser:e,browserHistorySummaryNumDays:t,browserHistorySummaryMaxResults:n,reason:r}){const{addTiming:s}=ac(),a=dr();return e.getInitialHistorySummary(a,t,n).then(o=>{s("web.frontend.comet_history_summary_v2"),oG({result:o,key:a,reason:r})}).catch(()=>{oG({result:{open_tabs_results:[],history_results:[],closed_tabs_results:[]},key:a,reason:r})}),a}const xze=async({entropyBrowser:e,url:t})=>{const n=await e.getQuickActions("get-quick-actions-for-sidecar-suggests");return n.is_success?n.buttons.map(({prompt:r})=>({query:r,image:J0(t)})):[]},bze=/^\w+:\/\//;let W_=null;const _ze=()=>{if(!Za()||W_!==null)return;const e=new Image;e.onerror=()=>{W_=!1,console.warn("[Comet] chrome://favicon/ is not supported. Using our backend as fallback.")},e.onload=()=>{W_=!0},e.src="chrome://favicon/"},J0=(e,t=64,n="3x")=>{if(!W_)return`https://www.perplexity.ai/rest/browser/favicon?url=${tMe(e)}`;const r=bze.test(e)?e:`https://${e}`;let s;try{s=decodeURIComponent(r)}catch{s=r}const a=s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\s/g,"\\ ");return`chrome://favicon/size/${t}@${n}/${a}`},wze=(e,t)=>t.dxt_name?e?.find(n=>n.name===t.dxt_name)?.manifest:void 0,ev=(e,t)=>t?[e,t].sort().join("-"):e.toString();function LP(e,t){f.useEffect(()=>{if(typeof window>"u")return;const r=window.cookieStore;if(!r)return;const s=a=>{const o=a.deleted.find(c=>c.name===e),l=a.changed.find(c=>c.name===e);if(o||l){t(l??null);return}};return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e,t])}let vb=[];class Ss{static PREFERRED_COLOR_SCHEME_COOKIE="colorScheme";static get userPreferredColorScheme(){return Tn(this.PREFERRED_COLOR_SCHEME_COOKIE)}static set userPreferredColorScheme(t){Qt(this.PREFERRED_COLOR_SCHEME_COOKIE,t,{expires:400}),localStorage.setItem(this.PREFERRED_COLOR_SCHEME_COOKIE,t)}static removeUserPreferredColorScheme(){Hd(this.PREFERRED_COLOR_SCHEME_COOKIE),localStorage.removeItem(this.PREFERRED_COLOR_SCHEME_COOKIE)}static get isSystemScheme(){return!this.userPreferredColorScheme}static addOverride(t){const n={scheme:t};return vb.push(n),n}static removeOverride(t){vb=vb.filter(n=>n!==t)}static get colorScheme(){const t=vb.at(-1);return t?t.scheme:this.isSystemScheme?typeof window>"u"?void 0:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.userPreferredColorScheme}}function Cze(e){f.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)");function r(){e(Ss.colorScheme)}return n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[e])}function Sze(){return f.useCallback(e=>{if(typeof window>"u")return;const n=document.documentElement.dataset.colorScheme==="dark",r=Ss.colorScheme;if(e){document.documentElement.dataset.colorScheme=e;return}n&&r==="light"?document.documentElement.dataset.colorScheme="light":!n&&r==="dark"&&(document.documentElement.dataset.colorScheme="dark")},[])}const Oce=Cf("ColorSchemeContext",null),Lce=A.memo(function(t){const{children:n,userPreferredColorScheme:r}=t,[s,a]=f.useState(r?!1:Ss.isSystemScheme),[o,l]=f.useState(r??Ss.colorScheme),c=f.useCallback(y=>{Ss.userPreferredColorScheme=y,a(!1),l(y)},[]),u=f.useCallback(()=>{Ss.removeUserPreferredColorScheme(),a(!0),l(Ss.colorScheme)},[]),d=Sze(),m=f.useCallback(y=>{s&&(l(y),d())},[s,d]);Cze(m);const p=f.useMemo(()=>ta(y=>{const v=!y&&Ss.isSystemScheme;a(v),!v&&(l(y?.value??Ss.colorScheme),d(y?.value))},100),[d]);LP(Ss.PREFERRED_COLOR_SCHEME_COOKIE,p),f.useEffect(()=>{Ss.isSystemScheme&&(document.documentElement.dataset.colorScheme=Ss.colorScheme),d()},[d]);const h=f.useCallback(y=>{const v=Ss.addOverride(y);return l(Ss.colorScheme),d(),v},[d]),g=f.useCallback(y=>{Ss.removeOverride(y),l(Ss.colorScheme),d()},[d]);return typeof document<"u"&&document.documentElement.dataset.colorScheme!==o&&(document.documentElement.dataset.colorScheme=o),i.jsx(Oce.Provider,{value:{colorScheme:o,isSystemColorScheme:s,setSystemColorScheme:u,setUserPreferredColorScheme:c,addOverride:h,removeOverride:g},children:n})});Lce.displayName="ColorSchemeProvider";function Pr(e){const t=f.useContext(Oce);if(!t)throw new Error("Attempted to access ColorSchemeContext from useColorScheme() without adding <ColorSchemeProvider> to the tree.");const[n,r]=f.useState(!t.isSystemColorScheme);f.useEffect(()=>{e?.addSecondPass&&t.isSystemColorScheme&&!n&&r(!0)},[t.isSystemColorScheme,n,e?.addSecondPass]);const s={...t};return e?.addSecondPass&&(s.isColorSchemeReady=n),s}function Eze({flag:e,override:t,defaultValue:n,isServer:r=!1}){if(!t)return{shouldUseOverride:!1,value:null};try{if(typeof n=="boolean")return{shouldUseOverride:!0,value:t==="true"};if(typeof n=="number")return{shouldUseOverride:!0,value:Number(t)};if(typeof n=="object")try{return{shouldUseOverride:!0,value:JSON.parse(t)}}catch(s){return ee.warn(`[Eppo ${r?"Server ":""}Override]`,`Failed to parse JSON override for flag "${e}"`,{override:t,error:s}),{shouldUseOverride:!0,value:n}}return{shouldUseOverride:!0,value:t}}catch(s){return ee.error(`[Eppo ${r?"Server ":""}Override] Error:`,s),{shouldUseOverride:!0,value:n}}}let zg;async function Mze({apiKey:e,logAssignment:t}){if(zg)return zg;const{init:n}=await ae(async()=>{const{init:r}=await Promise.resolve().then(()=>oze);return{init:r}},void 0);try{return zg=n({apiKey:e,assignmentLogger:{logAssignment:t}}),await zg,ee.info("[Eppo Experiments] Primary key initialization successful"),zg}catch(r){throw ee.error("[Eppo Experiments] Primary key failed",r),r}}const Dce="eppo_overrides",Fce="eppo_overrides",kze=e=>e?e.endsWith("@perplexity.ai"):!1,Tze=e=>{const t={};return e.forEach((n,r)=>{if(r.startsWith("eppo_")){const s=r.replace("eppo_","");t[s]=n??""}}),t},Nze=e=>{let t=!0;const n=JSON.stringify(e);try{Qt(Fce,n)}catch{t=!1}return t=bs.setItem(Dce,n),t},Aze=(e,t,n)=>{if(typeof window>"u"||n&&!kze(e))return!1;const r=Tze(t);return Object.keys(r).length===0?!1:Nze(r)};function jze(){try{const e=Tn(Fce);if(e)return JSON.parse(e);const t=bs.getItem(Dce);return t?JSON.parse(t):{}}catch{return{}}}const Rze=(e,t)=>{const n=f.useRef(void 0);ms(n.current,t)||(n.current=t),f.useEffect(e,[n.current])},Ize={getEppoTypedVariation:function(){return Promise.resolve(void 0)},keysRequiringRerender:[],addKeyRequiringRerender:()=>null,removeKeyRequiringRerender:()=>null},DP=f.createContext(Ize),Pze="experiment assignment",$_="failed_open_to_default_value",Oze=(e,t,n,r)=>s=>oi({name:Pze,data:{subjectType:s.subjectAttributes.subjectType,pagePropsHostname:r,colorScheme:n,isPerplexityBrowser:e,...s},session:t});function Lze(e){const t=jce.buildStorageKeySuffix(e),n=["eppo-configuration-","eppo-configuration-meta-","eppo-assignment-"];Ae.keys().filter(s=>s.startsWith("eppo-")).forEach(s=>{const a=s.split("-");if(a.length<2)return;const o=a[a.length-1],l=a.slice(0,-1).join("-")+"-";n.includes(l)&&o!==t&&(ee.warn("[Eppo Experiments] Cleaning up old Eppo key",{key:s,keySuffix:o,storageKeySuffix:t}),Ae.removeItem(s))})}const Dze=({children:e,hostname:t,session:n,cfCountry:r})=>{const s=!!n?.user,a=nMe(),o=rMe(),l=Za(),[c,u]=f.useState([]),{env:{isProduction:d,isStaging:m,deployName:p},device:{isWindowsApp:h}}=Et(),y=d||m?"a2yUBlJ1tebb5g2II8WD1CzbVUszCSk3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc":"KphAz1VUxSQKAZxlw1PwMdZNRia-a4B3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc",{colorScheme:v}=Pr(),x=f.useRef(void 0),b=Dt(),[_,w]=f.useState(!1),{locale:C}=Q(),{isMobileStyle:S}=ye(),E=f.useCallback(j=>{Oze(l,n,v,t)(j)},[n,l,v,t]);f.useEffect(()=>{if(_||!b)return;Aze(n?.user?.email,b,d)&&w(!0)},[b,n?.user?.email,_,d]);const M=f.useCallback(async function(j,{flag:R,subjectType:O,stableId:P,defaultValue:N,extraAttributes:I}){if(O==="user_nextauth_id"&&!s)return N;const D=Fo()?.device_id??void 0;let F;if(P?F=P:O==="user_nextauth_id"?F=n?.user?.id:O==="visitor_id"?F=a??void 0:O==="session_id"?F=o??void 0:O==="context_uuid"?F=I?.context_uuid:O==="comet_device_id"&&(F=D),!F)return ee.error("[Eppo Experiments]","No subject key found",{flag:R,subject_type:O,is_user_logged_in:s,has_stable_id:!!P,has_session_user_id:!!n?.user?.id,has_visitor_id:!!a,has_session_id:!!o,has_context_uuid:!!I?.context_uuid,has_comet_device_id:!!D,execution_context:typeof window<"u"?"client":"server",document_ready_state:typeof document<"u"?document.readyState:"unknown",eppo_provider_result:$_}),N;const B=jze(),{shouldUseOverride:V,value:$}=Eze({flag:R,override:B[R],defaultValue:N});if(V)return $??N;if(!y)return ee.error("[Eppo Experiments]","No Eppo API key found",{flag:R,eppo_provider_result:$_}),N;x.current||(Lze(y),x.current=Mze({apiKey:y,logAssignment:E}));const G=await x.current;try{return j(G,R,F,{subjectType:O,visitorId:a??void 0,sessionId:o??void 0,userEmail:n?.user?.email??void 0,userId:n?.user?.id??void 0,appApiClient:sMe(S,h),cfCountry:r,locale:C,isComet:l,deployName:p,cometDeviceId:D,...fte(),...I??{}},N)}catch{return ee.error("[Eppo Experiments] Error calling eppoFn",{flag:R,subjectKey:F,eppo_provider_result:$_}),N}},[y,n?.user?.id,n?.user?.email,a,o,E,S,h,r,C,l,p,s]),k=f.useCallback(j=>{u(R=>R.includes(j)?R:[...R,j])},[]),T=j=>{u(R=>R.includes(j)?R.filter(O=>O!==j):R)};return i.jsx(DP.Provider,{value:{getEppoTypedVariation:M,keysRequiringRerender:c,addKeyRequiringRerender:k,removeKeyRequiringRerender:T},children:e})};function Lh(e,t){const n=f.useContext(DP);if(!n)throw new Error("useGetEppoJSONVariation must be used within EppoExperimentsContext");const{getEppoTypedVariation:r}=n,[s,a]=f.useState(!0),[o,l]=f.useState(void 0),[c,u]=f.useState(e.defaultValue),d=f.useRef(e),m=f.useCallback(async()=>{const{skip:p,...h}=d.current;try{return r(t,h)}catch(g){return ee.error("[Eppo Experiments]","Error calling getEppoTypedVariation",{flag:h.flag,error:g,eppo_provider_result:$_}),h.defaultValue}},[r,t]);return Rze(()=>{d.current=e;const{skip:p,...h}=e;if(p){a(!1);return}a(!0),r(t,h).then(g=>u(g),l).finally(()=>a(!1))},[r,e]),{value:c,loading:s,error:o,fetchVariation:m}}const Uce=(e,...t)=>e.getJSONAssignment(...t);function Tc(e){return Lh(e,Uce)}function Fze(e,t){const n={...e,subjectType:"context_uuid",extraAttributes:{...e.extraAttributes,context_uuid:t}};return Lh(n,Uce)}const Uze=(e,...t)=>e.getStringAssignment(...t);function sE(e){return Lh(e,Uze)}const Bze=(e,...t)=>e.getBooleanAssignment(...t);function At(e){return Lh(e,Bze)}const Vze=(e,...t)=>e.getNumericAssignment(...t);function Wze(e){return Lh(e,Vze)}const $ze=(e,...t)=>e.getIntegerAssignment(...t);function Hze(e){return Lh(e,$ze)}function FP(e){return Tc({...e,subjectType:"visitor_id",skip:!1})}function jr(e){return At({...e,subjectType:"visitor_id",skip:!1})}const ju=()=>{const e=f.useContext(DP);if(!e)throw new Error("useEppoExperiments must be used within EppoExperimentsContext");return e};var ru;(function(e){e.MY_FILES="my-files",e.SOURCES="sources",e.MY_CONNECTORS="my-connectors",e.SPACES="spaces"})(ru||(ru={}));function UP({reason:e,feature:t}){const{isEnterprise:n}=gn({reason:e}),{hasAccessToProFeatures:r}=yt(),{value:s}=jr({flag:"connectors-space-access-for-pro",defaultValue:!1});return n?!0:r?t===ru.MY_FILES?!1:t===ru.SPACES?s:t!==ru.SOURCES:!1}const Bce=A.memo(({children:e,uploadSources:t,placement:n,isMobileStyle:r,isOpen:s=!1,onOpen:a,onClose:o})=>{const{$t:l}=Q(),c=f.useCallback(()=>{a?.()},[a]),u=f.useCallback(()=>{o?.()},[o]),d=f.useMemo(()=>i.jsx(z,{className:"w-[200px]",children:i.jsx(vu,{items:t})}),[t]);return r?i.jsxs(i.Fragment,{children:[i.jsx(Xt,{subtitle:l({defaultMessage:"Attach",id:"Ye0Clmvfec"}),subtitleClassname:"ml-sm mt-sm font-medium",variant:"bottom-left-sheet",isOpen:s,onClose:u,children:i.jsx(z,{className:"p-xs w-full",children:i.jsx(vu,{textColor:"light",items:t})})}),i.jsx("span",{onClick:c,children:e})]}):i.jsx(lo,{isOpen:s,placement:n,onOpen:c,onClose:u,content:d,children:e})});Bce.displayName="AttachDropdown";const zze=({skip:e,filters:t,reason:n})=>{const r=Cc({enabled:!0,initialPageParam:null,queryKey:fVe(t),queryFn:({pageParam:a})=>Z$e({filters:t,skipToken:a,reason:n}),getNextPageParam:a=>a&&a.sites.length?a.skipToken:void 0}),s=r.data?.pages.map(a=>a?.sites??[]).flat()??le;return f.useMemo(()=>({...r,sites:s}),[r,s])},aE=(e,t,n)=>{f.useEffect(()=>{const r=new IntersectionObserver(a=>{a.forEach(o=>{o.isIntersecting&&t()})},n),s=e.current;return s&&r.observe(s),()=>{s&&r.unobserve(s)}},[e,t,n])},Gze=11,Vce=A.memo(({onNext:e,onCancel:t})=>{const n="sharepoint-site-selector",r=f.useRef(null),{$t:s}=Q(),a=s({defaultMessage:"Next",id:"9+DdtuCqLw"}),o=s({defaultMessage:"Cancel",id:"47FYwba+bI"}),[l,c]=f.useState(null),u=f.useCallback(k=>c(k.name!==l?.name?k:null),[l]),{isMobileUserAgent:d}=ye(),[m,p]=f.useState(!1),[h,g]=f.useState(""),[y,v]=f.useState(h),x=f.useCallback(k=>{c(null),g(k)},[g]),{fetchNextPage:b,hasNextPage:_,isFetchingNextPage:w,sites:C,isLoading:S}=zze({skip:!1,filters:{search_term:y},reason:n}),E=f.useMemo(()=>ta(()=>{_&&!w&&b()},500),[_,w,b]);aE(r,E,{threshold:.5}),f.useEffect(()=>{!S&&y===""&&p(C.length>Gze)},[S,y,C]),f.useEffect(()=>{const k=setTimeout(()=>v(h),250);return()=>clearTimeout(k)},[h]);const M=f.useCallback(()=>e(l?.webUrl??""),[e,l?.webUrl]);return i.jsxs(z,{variant:"transparent",className:"px-md grid gap-y-[24px] sm:w-full md:w-[515px]",children:[m&&i.jsx(ra,{type:"text",isMobileUserAgent:d,placeholder:s({defaultMessage:"Search sites",id:"Nxbc+cXNbW"}),value:h,className:"bg-offsetPlus rounded-md border-none",onChange:x}),i.jsxs(z,{className:"gap-y-sm scrollbar-none h-56 flex-col overflow-y-scroll",children:[S&&i.jsx(ko,{className:"gap-y-sm grid",blockCount:5,size:"small",noLines:!0}),C.length>0&&C.map((k,T)=>i.jsx(Wce,{site:k,index:T,handleSelectSite:u,selectedSiteName:l?.name,sitesLength:C.length,lastSiteRef:r},T)),!S&&!w&&C.length===0&&i.jsx(L,{variant:"small",color:"light",textCenter:!0,children:s({defaultMessage:"No results",id:"jHJmjfxD4s"})}),w&&i.jsx(ko,{blockCount:1,size:"small"})]}),i.jsxs(z,{className:"gap-x-md flex justify-end",children:[i.jsx(ge,{variant:"common",pill:!0,text:o,onClick:t}),i.jsx(ge,{variant:"primary",pill:!0,text:a,textClassName:"",disabled:l===null,onClick:M})]})]})});Vce.displayName="SharepointSiteSelector";const Wce=A.memo(({site:e,index:t,handleSelectSite:n,selectedSiteName:r,sitesLength:s,lastSiteRef:a})=>{const o=f.useCallback(()=>n(e),[n,e]),l=f.useMemo(()=>i.jsx(me,{icon:Rr,className:"text-super"}),[]);return i.jsx(Te,{ref:t===s-1?a:null,variant:"common",layout:"split",text:e.name,onClick:o,trailingComponent:r===e.name?l:null,textClassName:"text-left w-5/6 font-display text-foreground text-md font-[500]",fullWidth:!0})});Wce.displayName="TextButtonFactory";const BP=A.memo(({isOpen:e,options:t,onClose:n,onSelectSite:r})=>{const{$t:s}=Q(),a=f.useMemo(()=>t?.connector==="sharepoint"&&!t.webUrl,[t?.connector,t?.webUrl]),o=f.useMemo(()=>{if(a)return i.jsx(L,{variant:"entry-title-200",className:"ml-md line-clamp-3 text-pretty",children:s({defaultMessage:"Select a site",id:"NLmDBthOaZ"})})},[s,a]);return i.jsxs(Xt,{variant:a?"medium":"wide",isOpen:e,onClose:n,renderCloseButton:!a,titleContent:o,children:[a&&i.jsx(Vce,{onNext:r,onCancel:n}),!a&&i.jsx("iframe",{id:"microsoft-file-picker",height:"800px"})]})});BP.displayName="MicrosoftFilePickerModal";const oE=(e,t)=>{const{value:n,loading:r}=At({flag:"file-manager-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},qze=[".pdf",".txt",".csv",".xlsx",".docx",".pptx",".md",".json"].join(",");function Kze(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function Yze(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var Qze=typeof window<"u";function WA(e){if(e){if(e.tagName==="BODY")return e;if(e.tagName==="IFRAME"){var t=e.contentDocument;return t?t.body:null}else if(!e.offsetParent)return null}else return null;return WA(e.offsetParent)}function iG(e){var t=e||window.event;return t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}var lG=Qze&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),nm=new Map,cG=typeof document=="object"?document:void 0,xb=!1;const Xze=cG?function(t,n){t===void 0&&(t=!0);var r=f.useRef(cG.body);n=n||r;var s=function(o){var l=nm.get(o);l?nm.set(o,{counter:l.counter+1,initialOverflow:l.initialOverflow}):(nm.set(o,{counter:1,initialOverflow:o.style.overflow}),lG?xb||(Kze(document,"touchmove",iG,{passive:!1}),xb=!0):o.style.overflow="hidden")},a=function(o){var l=nm.get(o);l&&(l.counter===1?(nm.delete(o),lG?(o.ontouchmove=null,xb&&(Yze(document,"touchmove",iG),xb=!1)):o.style.overflow=l.initialOverflow):nm.set(o,{counter:l.counter-1,initialOverflow:l.initialOverflow}))};f.useEffect(function(){var o=WA(n.current);o&&(t?s(o):a(o))},[t,n.current]),f.useEffect(function(){var o=WA(n.current);if(o)return function(){a(o)}},[])}:function(t,n){},Zze=["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),Jze=["application/vnd.google-apps.file","application/vnd.google-apps.folder","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/pdf","text/csv","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/markdown"],eGe=["text/plain","application/pdf","text/csv","text/markdown","image/png","image/jpeg","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet"],tGe=["audio/mpeg","audio/wav","audio/aiff","audio/ogg","audio/flac","audio/mp3","video/mp4","video/mpeg","video/mov","video/avi","video/x-flv","video/mpg","video/webm","video/wmv","video/3gpp","video/quicktime"],$ce=({clientId:e,apiKey:t,loginHint:n,isAudioVideoFilesEnabled:r,onError:s})=>{const[a,o]=f.useState(!1),[l,c]=f.useState(!1);Xze(l);const u=f.useCallback(()=>{s?.()},[s]);f.useEffect(()=>{const p=document.createElement("script");p.src="https://apis.google.com/js/api.js",p.id="google-drive-picker-gapi-script",p.onload=()=>{const h=document.createElement("script");h.src="https://accounts.google.com/gsi/client",h.id="google-drive-picker-gis-script",h.onload=()=>{window.gapi.load("picker",{callback:()=>o(!0),onerror:()=>{o(!1),u()}})},h.onerror=()=>{o(!1),u()},document.body.appendChild(h)},p.onerror=()=>{o(!1),u()},document.body.appendChild(p)},[u]);const d=f.useCallback((p,h)=>{const g=window.google?.picker,y=v=>{v.action===g.Action.PICKED?h.onPicked&&h.onPicked(v.docs??le):(v.action===g.Action.CANCEL||v.action===g.Action.ERROR)&&(v.action===g.Action.CANCEL&&h.onCancel&&h.onCancel(),c(!1))};if(a&&g)try{const v=new g.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMode(g.DocsViewMode.LIST),x=new g.ViewGroup(v);let b=h.mode==="source"?Jze:eGe;b=r?b.concat(tGe):b,new g.PickerBuilder().setSize(1051,650).addViewGroup(x).setSelectableMimeTypes(b.join(",")).enableFeature(g.Feature.MULTISELECT_ENABLED).setOAuthToken(p).setDeveloperKey(t).setCallback(y).build().setVisible(!0),c(!0)}catch{u()}},[a,t,u,r]),m=f.useCallback(p=>{window.google.accounts.oauth2.initTokenClient({client_id:e,login_hint:n,scope:Zze,prompt:"none",callback:g=>{if(g.error!==void 0)throw new Error(g.error);try{d(g.access_token,p)}catch(y){console.log(y)}}}).requestAccessToken()},[d,e,n]);return f.useMemo(()=>({openPicker:m,isReady:a}),[m,a])};function nGe(e){switch(e.name){case"notion":return Tt.NOTION;case"google_drive":return Tt.GOOGLE_DRIVE;case"onedrive":return Tt.ONEDRIVE;case"sharepoint":return Tt.SHAREPOINT;case"dropbox":return Tt.DROPBOX;case"box":return Tt.BOX;case"wiley":return Tt.WILEY;case"gcal":return Tt.GCAL;case"outlook":return Tt.OUTLOOK;case"edgar":case"linear":case"linear_alt":case"notion_mcp":case"factset":case"slack":case"github_mcp_direct":case"asana_mcp_direct":case"asana_mcp_merge":case"atlassian_mcp_direct":case"slack_direct":case"crunchbase":return null;default:$t(e.name)}}function uG(e,t){const n=nGe(e);return!!(n&&t.includes(n))}const Hce=A.memo(({repoFileLimitReached:e,addFilesTooltipMessage:t,isAudioVideoFilesEnabled:n,handleSourcesEdit:r,variant:s="primary",collectionSlugOverride:a,connectionTypes:o=HP})=>{const l="file-upload-selector",c=Q(),{variation:u}=oE(!1),{$t:d}=Q(),{isMobileStyle:m}=ye(),[p,h]=f.useState(!1),{fileRepoInfo:g}=Do({reason:l,collectionSlugOverride:a}),y=g.file_repository_type==="COLLECTION",{mutateAsync:v}=EP({reason:l,onConnectorFileUploadSuccess:()=>{r?.(u?"files":"connectors")}}),x=f.useRef(null),{handleFileSelect:b}=hce({reason:l,onLocalFileUploadSuccess:()=>{r?.(u?"files":"localFiles")}}),{referrer:_,referrerId:w}=TP({}),{connectorsMap:C}=h1({reason:l}),{enabledFileConnectors:S}=g1({reason:l}),{disabledFileConnectors:E}=kP({reason:l}),{trackEvent:M}=Me(),[k,T]=f.useState(!1),[j,R]=f.useState(!1),O=UP({reason:l,feature:ru.SPACES}),P=f.useCallback(ie=>ie.preventDefault(),[]),{onOpen:N,onClose:I,onError:D,options:F,onSelectSite:B,isOpen:V,log:$}=uce({reason:l,mode:"persistent"}),{openPicker:G}=$ce({clientId:C?.google_drive?.picker_credentials?.client_id??"",apiKey:C?.google_drive?.picker_credentials?.api_key??"",loginHint:C?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:n}),X=f.useCallback((ie,be)=>{if(be==="onedrive"){const Se=ie.map(Ce=>Ce.id);v({connectorName:"onedrive",fileIds:Se,fileRepoInfo:y?g:void 0})}else if(be==="sharepoint"){const Se=ie.map(Ce=>({item_id:Ce.id??"",drive_id:Ce.parentReference.driveId??"",site_id:Ce.parentReference.sharepointIds?.siteId??""}));v({connectorName:"sharepoint",fileIds:Se,fileRepoInfo:y?g:void 0})}I()},[v,I,y,g]),{openPicker:Y}=U$e({clientId:C?.dropbox?.picker_credentials?.client_id??"",isSpace:y,fileRepoInfo:g,isAudioVideoFilesEnabled:n,reason:l}),{onOpen:W,isOpen:H,onClose:Z,cleanupPicker:re}=D$e({initialApiKey:C?.box?.picker_credentials?.api_key??"",expiresAtString:C?.box?.picker_credentials?.expires_at??"",mode:"source",isSpace:y,fileRepoInfo:g,isAudioVideoFilesEnabled:n,reason:l}),q=f.useCallback((ie,be="file")=>{if(M("attempt connector file upload",{connectorName:ie}),ie==="google_drive")G({mode:"source",onPicked:async Se=>{const Ce=Se.map(ke=>ke.id);await v({connectorName:"google_drive",fileIds:Ce,fileRepoInfo:y?g:void 0})}});else if(ie==="onedrive"||ie==="sharepoint"){const Se=C?.[ie];N({mode:"source",connector:ie,clientId:Se?.picker_credentials?.client_id??"",tenantName:Se?.picker_credentials?.tenant_name??"",loginHint:Se?.connection_display_name??"",onPicked:Ce=>X(Ce,ie),onError:D,onCancel:I,log:$,isAudioVideoFilesEnabled:n})}else ie==="dropbox"?Y("source"):ie==="box"&&W(be)},[M,G,N,C,g,y,I,D,X,v,Y,W,$,n]),{handleConnect:J}=XS({reason:l}),te=f.useCallback(ie=>{ie==="notion"&&(M("attempt connector authentication",{connectorName:ie}),J({connectorName:ie}))},[M,J]),se=(()=>{const ie=[],be={type:"default",text:d({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),icon:Nte,onMouseDown:P,onClick:()=>{x.current?.click()}};if(o.includes(Tt.LOCAL)&&ie.push(be),O){const Se=S.filter(Ce=>uG(Ce,o)).map(Ce=>{const ke=Ce.name;return ke==="box"?{type:"nested",text:$s(ke)??"",avatar:i.jsx("img",{src:ri(ke)??"",alt:$s(ke),width:20,height:20}),isSubmenuOpen:k,onSubmenuOpen:()=>T(!0),onSubmenuClose:()=>T(!1),onMouseDown:P,submenu:[{type:"default",text:c.formatMessage({defaultMessage:"Upload files",id:"2jjdVzJX0c"}),onMouseDown:P,onClick:()=>q("box","file")},{type:"default",text:c.formatMessage({defaultMessage:"Upload folders",id:"qMKglS/Epo"}),onMouseDown:P,onClick:()=>q("box","folder")}]}:ke==="notion"&&!y?{type:"default",text:$s(ke)??"",avatar:i.jsx("img",{src:ri(ke)??"",alt:$s(ke),width:20,height:20}),onMouseDown:P,onClick:()=>te(ke)}:{type:"default",text:$s(ke)??"",avatar:i.jsx("img",{src:ri(ke)??"",alt:$s(ke),width:20,height:20}),onMouseDown:P,onClick:()=>q(ke)}}).filter(Ce=>Ce!==null);if(ie.push(...Se),E.length>0&&!m){const Ce=E.filter(Re=>uG(Re,o)),ke={type:"nested",submenu:Ce.map(Re=>({type:"default",size:"small",text:$s(Re.name),avatar:i.jsx("img",{src:ri(Re.name)??"",alt:$s(Re.name),width:20,height:20}),rightElement:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(me,{icon:no,size:"sm"})}),onClick:()=>J({connectorName:Re.name,customReferrer:_??void 0,customReferrerId:w??void 0})})),isSubmenuOpen:j,onSubmenuOpen:()=>R(!0),onSubmenuClose:()=>R(!1),text:d({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),icon:VC,onMouseDown:P};Ce.length>0&&ie.push(ke)}}return ie})(),de=f.useCallback(()=>h(!1),[]),fe=f.useCallback(()=>h(!0),[]),ve=f.useMemo(()=>i.jsx(L,{color:"light",children:i.jsx(me,{icon:mh,size:"sm"})}),[]),ue=f.useMemo(()=>i.jsx(L,{variant:"tiny",color:"light",children:c.formatMessage({defaultMessage:"Add files",id:"xrAjmQ72mN"})}),[c]);return i.jsxs(i.Fragment,{children:[i.jsx(Bce,{uploadSources:se,placement:"bottom-start",isMobileStyle:m,isOpen:p,onOpen:fe,onClose:de,children:s==="primary"?i.jsx(ge,{variant:"primary",size:"small",extraCSS:"py-[18px]",text:`+ ${c.formatMessage({defaultMessage:"Add files",id:"xrAjmQ72mN"})}`,disabled:e,toolTip:t}):i.jsx(Te,{variant:"offset",size:"small",leadingComponent:ve,text:ue,toolTip:t,testId:"add-files-button"})}),(C?.onedrive?.connected||C?.sharepoint?.connected)&&i.jsx(BP,{options:F,isOpen:V,onClose:I,onSelectSite:B}),C?.box?.connected&&i.jsx(_P,{isOpen:H,onClose:Z,cleanupPicker:re}),i.jsx("input",{type:"file",ref:x,className:"hidden",onChange:ie=>{ie.target.files&&b(ie.target.files)},onClick:ie=>{ie.target instanceof HTMLInputElement&&(ie.target.value="")},multiple:!0,accept:qze})]})});Hce.displayName="FileUploadSelector";const zce=A.memo(({statusToFilter:e,handleSelectStatus:t})=>{const{isMobileStyle:n}=ye(),r=Q(),s={ALL:r.formatMessage({defaultMessage:"All",id:"zQvVDJ+j59"}),QUEUED:r.formatMessage({defaultMessage:"Queued",id:"Cnm0QAkWnp"}),SYNCING:r.formatMessage({defaultMessage:"Syncing",id:"eOnwqs6QFY"}),SYNC_ERROR:r.formatMessage({defaultMessage:"Sync error",id:"N1cqoEe4CZ"}),READY:r.formatMessage({defaultMessage:"Ready",id:"IZFEUgrg25"})},a=Object.entries(s).map(([o,l])=>({text:l,type:"default",selected:e===o,onClick:()=>t(o==="ALL"?null:o)}));return i.jsx(Jt,{isMobileStyle:n,placement:"bottom",items:a,children:i.jsx(ge,{variant:"border",size:"small",extraCSS:"py-[18px]",text:e?s[e]:"Status",chevron:!0,chevronIcon:Qn})})});zce.displayName="StatusDropdown";const Gce=A.memo(({allowEditSources:e,searchTerm:t,statusToFilter:n,selectedFiles:r,handleDeleteFiles:s,handleOnSearchValueChange:a,handleSelectStatus:o,isAudioVideoFilesEnabled:l,collectionSlugOverride:c,connectionTypes:u})=>{const{$t:d}=Q(),{isMobileUserAgent:m}=ye();return i.jsxs("div",{className:"mx-sm pt-md gap-sm flex flex-wrap items-center justify-between",children:[i.jsx(ra,{type:"search",isMobileUserAgent:m,placeholder:d({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:t,className:"bg-offsetPlus rounded-md border-none",onChange:a}),i.jsxs("div",{className:"gap-x-sm flex",children:[r.length!==0&&i.jsx(Te,{variant:"primary",onClick:s,icon:uu,extraCSS:"h-[36px]"}),i.jsx(zce,{statusToFilter:n,handleSelectStatus:o}),e&&i.jsx(Hce,{repoFileLimitReached:!1,isAudioVideoFilesEnabled:l,collectionSlugOverride:c,connectionTypes:u})]})]})});Gce.displayName="ConnectorsTableHeader";const qce=({reason:e,fileRepoInfo:t,enablePolling:n=!1})=>{const r=bVe(t);return $e({queryKey:r,queryFn:()=>t$e({request:{file_repository_info:t},reason:e}),refetchInterval:a=>{if(!n)return!1;const{pending_files:o}=a.state.data?.summary??{pending_files:0};return o>0?KM(5):KM(60)},staleTime:KM(30)})};var VP="Progress",WP=100,[rGe,PDt]=Ra(VP),[sGe,aGe]=rGe(VP),Kce=f.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=oGe,...o}=e;(s||s===0)&&!dG(s)&&console.error(iGe(`${s}`,"Progress"));const l=dG(s)?s:WP;r!==null&&!fG(r,l)&&console.error(lGe(`${r}`,"Progress"));const c=fG(r,l)?r:null,u=s2(c)?a(c,l):void 0;return i.jsx(sGe,{scope:n,value:c,max:l,children:i.jsx(nn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":s2(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Xce(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});Kce.displayName=VP;var Yce="ProgressIndicator",Qce=f.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=aGe(Yce,n);return i.jsx(nn.div,{"data-state":Xce(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});Qce.displayName=Yce;function oGe(e,t){return`${Math.round(e/t*100)}%`}function Xce(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function s2(e){return typeof e=="number"}function dG(e){return s2(e)&&!isNaN(e)&&e>0}function fG(e,t){return s2(e)&&!isNaN(e)&&e<=t&&e>=0}function iGe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${WP}\`.`}function lGe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${WP} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var cGe=Kce,uGe=Qce;const mG=(...e)=>e.filter(Boolean).join(" "),dGe={default:"default"},Zce=A.memo(e=>{const{indicatorClassName:t,indeterminate:n,className:r,value:s=0,max:a=100,variant:o=dGe.default,ref:l,...c}=e,u=A.useMemo(()=>{const d={default:"bg-inverse",super:"bg-super"};return mG("size-full transition-transform duration-300 ease-in-out",d[o]||d.default,n&&"animate-indeterminate",t)},[o,n,t]);return i.jsx(cGe,{ref:l,className:mG("bg-offsetPlus relative h-1 w-full overflow-hidden rounded-[1px]",r),...c,children:i.jsx(uGe,{className:u,style:{transform:`translateX(-${100-(s??0)/a*100}%)`}})})});Zce.displayName="Progress";const Jce=A.memo(({hasPreviousPage:e,hasNextPage:t,handlePrevPage:n,handleNextPage:r,shouldShowPlaceholder:s,fileRepoInfo:a})=>{const{$t:o}=Q(),l="border-subtler pt-md mx-sm flex translate-y-[1px] items-center justify-between";return s?i.jsx("div",{className:`${l} h-[42px]`}):i.jsx("div",{className:`${l} border-t`,children:i.jsxs("div",{className:"flex w-full justify-between",children:[i.jsx(fGe,{fileRepoInfo:a}),i.jsxs("div",{className:"gap-x-md flex",children:[i.jsx(Te,{text:o({defaultMessage:"Prev",id:"LYaNlLTdL2"}),size:"small",noPadding:!0,disabled:!e,onClick:n,icon:Wv}),i.jsx(Te,{text:o({defaultMessage:"Next",id:"9+DdtuCqLw"}),size:"small",noPadding:!0,disabled:!t,onClick:r,icon:_r})]})]})})});Jce.displayName="SourcesTableCursorPagination";const fGe=({fileRepoInfo:e})=>{const t="upload-progress",{$t:n}=Q(),{variation:r}=oE(!1),{data:s}=qce({enablePolling:!0,fileRepoInfo:e,reason:t}),a=s?.summary?.pending_files??0,o=s?.summary?.total_files??0,l=n({defaultMessage:"Uploading {pendingFiles, number} of {totalFiles, number} files...",id:"bgsD1ZQB53"},{pendingFiles:a,totalFiles:o});return!r||a<=0?i.jsx("div",{}):i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx(Zce,{variant:"super",value:o-a,max:o,className:"h-2 w-48 rounded-full"}),i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(L,{color:"super",children:i.jsx(as,{size:14})}),i.jsx(L,{variant:"tiny",color:"default",children:l})]})]})};let Gg=0;function mGe(e,t,n=!1){const[r,s]=f.useState(!1),[a,o]=f.useState(!1),l=f.useCallback(g=>{g.preventDefault()},[]),c=f.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),s(!0),Gg++)},[]),u=f.useCallback(g=>{g.preventDefault(),Gg=Math.max(0,Gg-1),Gg===0&&s(!1)},[]),d=f.useCallback(g=>{g.preventDefault(),s(!1),o(!1),Gg=0,!t&&n&&g.dataTransfer?.items.length&&e(g.dataTransfer.items)},[t,e,n]),m=f.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),o(!0))},[]),p=f.useCallback(g=>{g.preventDefault(),o(!1)},[]),h=f.useCallback(g=>{g.preventDefault(),s(!1),o(!1),!t&&!n&&g?.dataTransfer?.items.length>0&&e(g.dataTransfer.items)},[t,e,n]);return f.useEffect(()=>(document.addEventListener("dragover",l),document.addEventListener("dragenter",c),document.addEventListener("dragleave",u),document.addEventListener("drop",d),()=>{document.removeEventListener("dragover",l),document.removeEventListener("dragenter",c),document.removeEventListener("dragleave",u),document.removeEventListener("drop",d)}),[l,c,u,d]),f.useMemo(()=>({isDraggingFile:r,isFileOver:a,rootProps:{onDragOver:m,onDragLeave:p,onDrop:h}}),[p,m,h,r,a])}const $P=A.memo(({onDrop:e,disabled:t=!1,children:n,dropZoneClassName:r,dropLabel:s,dropIcon:a=$Me,allowDropAnywhere:o=!1,...l})=>{const{$t:c}=Q(),{isDraggingFile:u,isFileOver:d,rootProps:m}=mGe(e,t,o),p=s??c(o?{defaultMessage:"Dropped files appear here.",id:"9WR4elgZix"}:{defaultMessage:"Drop your files here.",id:"llIM82nPs+"});return i.jsxs("div",{className:"relative",...m,...l,children:[u&&t?i.jsx(z,{className:U("border-subtler bg-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed",{"!border-caution":d},r?.(u,d)),children:i.jsxs(L,{color:"red",children:[i.jsx(me,{icon:a,className:"mr-2"}),"Drop zone disabled"]})}):u?i.jsxs(i.Fragment,{children:[i.jsx(z,{variant:"background",className:"absolute inset-0 z-20 rounded-2xl opacity-80"}),i.jsx(z,{className:U("gap-x-sm animate-in fade-in border-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed transition-all duration-200",{"!border-super":d},r?.(u,d)),children:i.jsxs(L,{color:"super",children:[i.jsx(me,{icon:a,className:"mr-2"}),p]})})]}):null,n]})});$P.displayName="DropZone";var js;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(js||(js={}));function eue(){return[js.INVITED_READER,js.INVITED_WRITER,js.INVITED_EDITOR,js.INVITED_ADMIN]}function pGe(e){return e===js.OWNER||e===js.OWNER_DEFAULT_BOOKMARKS}function Ap(e){return e===js.OWNER_DEFAULT_BOOKMARKS}function tue(e){return e>=js.WRITER&&e<js.INVITED_READER}function hGe(e){return e>=js.READER&&e<js.INVITED_READER}function gGe(e){return e==js.READER||e==js.INVITED_READER}function yGe(e){return eue().includes(e)}function ODt(e){if(e===void 0)return{ownerUser:void 0,contributorUsers:[],invitedUsers:[]};const t=e.owner_user,n=e.contributor_users,r=[],s=[],a=eue();return n?.forEach(o=>{o.permission&&a.includes(o.permission)?r.push(o):s.push(o)}),{ownerUser:t,contributorUsers:s,invitedUsers:r}}var Dd;(function(e){e.PageAccessNotAllowed="pageAccessNotAllowed",e.ThreadAccessNotAllowed="threadAccessNotAllowed",e.InvalidThread="invalidThread",e.ThreadExpired="threadExpired",e.ThreadStreamError="threadStreamError",e.CollectionAccessNotAllowed="collectionAccessNotAllowed",e.SpaceAccessNotAllowed="spaceAccessNotAllowed",e.InvalidCollection="invalidCollection",e.SubscriptionAlreadyActive="subscriptionAlreadyActive",e.UnableToGrantAccess="unableToGrantAccess"})(Dd||(Dd={}));const vGe="ENTRY_EXPIRED",pG="VIEW_THREAD_NOT_ALLOWED",HP=[Tt.GOOGLE_DRIVE,Tt.ONEDRIVE,Tt.SHAREPOINT,Tt.DROPBOX,Tt.BOX,Tt.NOTION],xGe=e=>[...HP,...e],bGe=A.memo(({fileRepoInfoOverride:e,collectionSlugOverride:t,connectionTypes:n=HP})=>{const r="connectors-source-section",s=xi(),a=t??(Array.isArray(s?.slug)?s.slug[0]:s?.slug),{collection:o}=kl({collectionSlug:a,reason:r}),l=o?tue(o.user_permission):!1,{fileRepoInfo:c}=Do({reason:r,collectionSlugOverride:t}),u=c.file_repository_type==="COLLECTION",d=f.useMemo(()=>({file_repository_type:"USER",owner_id:""}),[]),m=e??(u?c:d),[p,h]=f.useState(""),[g,y]=f.useState(null),[v,x]=f.useState([]),[b,_]=f.useState(!1),[w,C]=f.useState([]),[S,E]=f.useState(null),[M,k]=f.useState([]),T=w.length>0?w[w.length-1]?.uuid:void 0,{mutate:j}=Zle({reason:r}),R=!1,P=p.trim().length>0?{parentUuids:[],rootFilesOnly:!1}:{parentUuids:T?[T]:[],rootFilesOnly:!T},{data:N,isLoading:I}=n$e({connectionTypes:n,status:g?[g]:[],pageSize:za,searchKeyword:p,...P,cursor:S,pollingEnabled:!0,fileRepoInfo:m,reason:r}),{files:D,nextCursor:F}=f.useMemo(()=>({files:N?.files||[],nextCursor:N?.next_cursor}),[N]),B=!!F,V=M.length>0,$=u?l:!0,G=f.useCallback(()=>{h(""),y(null)},[]),X=f.useCallback(J=>{y(J)},[]),Y=f.useCallback(J=>{h(J)},[h]),W=f.useCallback(()=>{j({fileUuids:v,fileRepoInfo:m}),x([]),_(!1)},[j,v,m]),H=f.useCallback(J=>{_(J),x(J?D.map(te=>te.uuid):[])},[D,x]),Z=f.useCallback((J,te)=>{G(),C(se=>[...se,{uuid:J,name:te}])},[G]),re=f.useCallback(()=>{F&&(k(J=>[...J,S??""]),E(F))},[F,S]),q=f.useCallback(()=>{M.length>0&&k(J=>{const te=[...J],se=te.pop()??null;return E(se),te})},[M.length]);return f.useEffect(()=>{E(null),k([])},[p,g,T]),i.jsxs($P,{onDrop:Rn,disabled:!$,children:[i.jsx(Gce,{allowEditSources:$,searchTerm:p,statusToFilter:g,selectedFiles:v,handleDeleteFiles:W,handleOnSearchValueChange:Y,handleSelectStatus:X,isAudioVideoFilesEnabled:R,collectionSlugOverride:t,connectionTypes:n}),i.jsx(nce,{files:D,fileRepoInfo:m,isLoadingConnectorFiles:I,allowEditSources:$,selectedFiles:v,currentPath:w,isHeaderCheckboxChecked:b,setSelectedFiles:x,setCurrentPath:C,handleSelectAll:H,handleFolderClick:Z,handleResetSearch:G}),i.jsx(Jce,{fileRepoInfo:m,hasPreviousPage:V,hasNextPage:B,handlePrevPage:q,handleNextPage:re,shouldShowPlaceholder:I||!D.length})]})});bGe.displayName="ConnectorsSourceSection";function Dh({reason:e,collectionSlugOverride:t}){const n=xi(),r=t??(Array.isArray(n?.slug)?n.slug[0]:n?.slug),{collection:s}=kl({collectionSlug:r,reason:e}),a=s?pGe(s.user_permission):!1,o=s?yGe(s.user_permission):!1,l=s?gGe(s.user_permission):!1,c=s?hGe(s.user_permission):!1,u=s?tue(s.user_permission):!1;return f.useMemo(()=>({isUserOwner:a,isUserInvited:o,isUserReader:l,isUserAtLeastReader:c,isUserAtLeastWriter:u}),[c,u,o,a,l])}const LDt=e=>e?.[0]?.article_info?.is_live;function DDt(e){return e.length==1&&e[0]?.article_info?.is_auto_generated}const zP=e=>e?.toLowerCase(),H_=e=>zP(e.status)==="pending",FDt=e=>zP(e.status)==="staged",UDt=e=>zP(e.status)==="completed",_Ge=e=>e.find(t=>H_(t)&&t.backend_uuid),wGe=e=>!!(e&&ea(e)&&"blocks"in e[0]),BDt=e=>{const t=/##\s*([^\n]+)/,n=e.match(t);return n&&n.length>1&&n[1]?n[1].trim():e.trim()},CGe=async({slugOrUUID:e,headers:t,reason:n})=>{const{data:r,error:s}=await ne.GET("/rest/article/{article_uuid_or_slug}",n,{params:{path:{article_uuid_or_slug:e}},headers:t,timeoutMs:Pe({productionMs:3e3}),numRetries:1});if(s)throw new Ee("API_CLIENTS_ERROR",{cause:s});if(r.status!=="success")throw new Ee("API_CLIENTS_ERROR",{cause:r});return r.entries},VDt=async({reason:e})=>{const t="signOutAllSessions";try{const r=await(await sr({urlPath:"/rest/user/sign-out-all",headers:{"X-Perplexity-CSRF-Protection":"1"},method:"POST",numRetries:1,reason:e})).json();return r.status!=="success"?(ee.log(`Unsuccessful ${t} call:`,r),!1):!0}catch(n){return ee.log(`Error in ${t}:`,n),!1}},WDt=async({articleUUID:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/page/get_related_pages",t,{params:{query:{context_uuid:e}},numRetries:1});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r});if(n.status!=="success")throw new Ee("API_CLIENTS_ERROR",{cause:n});return n.related_pages},hG=e=>e[0]?.article_info?{title:e[0].article_info.title||"",summary:e[0].article_info.summary||"",suggested_sections:e[0].article_info.suggested_sections||[],audience:e[0].article_info.audience||"anyone",read_time:e[0].article_info.read_time,emphasize_sources:e[0].article_info.emphasize_sources??!1,num_sections:e.length,should_index:e[0].should_index??!1}:null,SGe={isBlocksApi:!1,article:[],heroSection:void 0,isLoading:!1,isPublished:!1,isOrgInternal:!1,inFlight:!1,inFlightLatest:!1,currentlyStreamingSection:void 0,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},threadMetadata:{rwToken:void 0,contextUUID:void 0,frontendContextUUID:void 0,title:void 0,first_query:void 0,focus:void 0,author_id:void 0,author_username:void 0,author_image:void 0,parent_info:void 0,mode:void 0,personalized:!1,collection:void 0,thread_access:0,thread_url_slug:void 0,updated_datetime:void 0,expiry_time:void 0,privacy_state:Cp.NONE},articleMetadata:{title:"",summary:"",suggested_sections:[],audience:"anyone",read_time:0,emphasize_sources:!1,num_sections:0,should_index:!1},articleMedia:[],articleWebResults:[],relatedPages:[],articleLocalState:{isEditModeEnabled:!1,setEditModeEnabled:()=>{},isCreating:!1,setIsCreating:()=>{},isTitleVisible:!0,setTitleVisible:()=>{},clickedImage:null,setClickedImage:()=>{},clickedImageIndex:0,isRewritingSection:!1,setRewritingSection:()=>{}},refetch:()=>{}},nue=f.createContext(SGe),EGe=A.memo(({relatedPages:e=le,children:t,slug:n})=>{const r="article-results-provider",[s,a]=f.useState(!1),[o,l]=f.useState(!1),[c,u]=f.useState(null),[d,m]=f.useState(!0),[p,h]=f.useState(!1),{isEnterprise:g}=gn({reason:r}),y=mt(),x=Dt()?.get("newFrontendContextUUID"),[b,_]=f.useState(y.getQueryData(J$(n||"")));f.useEffect(()=>{if(x){_(x);return}const G=y.getQueryData(J$(n||""));_(G)},[x,y,n]);const{data:w,isLoading:C}=$e({enabled:!!n&&n!=="new",queryKey:nP(b||""),queryFn:()=>CGe({slugOrUUID:n,reason:r}),refetchOnMount:!0,placeholderData:Ch}),S=wGe(w),E=f.useMemo(()=>{if(!w||S)return;const G=w[w.length-1];return{inFlight:w.some(H_),inFlightLatest:G&&H_(G)}},[w,S]),M=E?.inFlight??!1,k=E?.inFlightLatest??!1,T=f.useMemo(()=>{if(!(!w||S))return _Ge(w)},[w,S]),j=f.useMemo(()=>{if(!w||w.length===0)return null;const G=w[0];if(H_(G))return null;const X=G.social_info;return jA(X||Bie)},[w]),R=f.useMemo(()=>!w||w.length===0?U_():U_(w[0]),[w]),O=f.useMemo(()=>w?hG(w):null,[w]),P=f.useMemo(()=>{const G=[];return w?.forEach(X=>{if(X.article_info.layout==="media-only"){const W=(X.article_info.user_selected_media_items??[])?.filter(H=>H.medium==="image");G.push(...W)}else{const Y=X?.media_items??[],W=X?.featured_images??[];X.article_info.layout!=="text"&&(ea(W)&&W[0].medium==="image"?G.push(W[0]):ea(Y)&&Y[0].medium==="image"&&G.push(Y[0]))}}),G},[w]),N=f.useMemo(()=>{if(!c)return 0;const G=P.findIndex(X=>X?.image===c?.image);return G>-1?G:0},[c,P]),I=f.useMemo(()=>{const G=new Map;return!w||w.length===0?[]:(w?.forEach(X=>{const Y=un.parseAskTextField(X);Y?.web_results&&Y.web_results.forEach(W=>{G.has(W.url)?G.get(W.url).count+=1:G.set(W.url,{...W,count:1})})}),Array.from(G.values()).sort((X,Y)=>Y.count-X.count).map(X=>({...X,count:void 0})))},[w]),D={isEditModeEnabled:s,setEditModeEnabled:a,isTitleVisible:d,setTitleVisible:m,isCreating:o,setIsCreating:l,clickedImage:c,setClickedImage:u,clickedImageIndex:N,isRewritingSection:p,setRewritingSection:h},F=R??U_(),B=g&&!!F.collection&&F.thread_access===gt.COLLECTION_READ,V=!!g&&F.thread_access===gt.ORG_READ,$=B||V||F.thread_access===gt.PUBLIC_READ;return i.jsx(nue.Provider,{value:{isBlocksApi:S,article:w??[],isLoading:C,heroSection:w?.[0],lastSection:w?.[w.length-1],socialStats:j,isPublished:$,isOrgInternal:V,inFlight:M,inFlightLatest:k,currentlyStreamingSection:T,threadMetadata:F,articleMetadata:O??hG([]),articleLocalState:D,articleMedia:P,articleWebResults:I,relatedPages:e},children:t})});EGe.displayName="ArticleResultsProvider";const rue=()=>{const e=f.useContext(nue);if(!e)throw new Error("useArticleResults must be used within ArticleResultsContext");return e},MGe=({enabled:e,reason:t})=>{const n=async()=>J$e({reason:t}),{data:r}=$e({enabled:e,queryKey:aVe(),queryFn:n,networkMode:"always"});return r??{isGovernmentRequestOrigin:void 0}};function kGe(e,t){return $e({enabled:!!e,queryKey:oVe(e),queryFn:async()=>K$e({profileName:e,reason:t})})}function Or(){const e=MGe({enabled:!0,reason:"user-capabilities"}),t=e.isGovernmentRequestOrigin?"us_government_or_military":"",{data:n}=kGe(t,"user-capabilities");return f.useMemo(()=>{const s=e.isGovernmentRequestOrigin,a={unlimitedProSearch:!!n?.unlimitedProSearch,maxModelSelection:!!n?.maxModelSelection,unlimitedResearch:!!n?.unlimitedResearch,fileUpload:!!n?.fileUpload};return{isGovernmentRequestOrigin:s,specialCapabilities:a}},[e.isGovernmentRequestOrigin,n])}const{Context:TGe,useTrackedState:NGe}=f1("LocalUserSettings"),AGe=({trackEvent:e,initialLocalUserSettings:t})=>Po()(gte(n=>({...t,actions:{setIsSplashPageDismissed:(r,s)=>{SBe(r,s),n({isSplashPageDismissed:r})},setColorScheme:r=>{n({colorScheme:r})},setIsSidebarPinned:r=>{n({isSidebarPinned:r}),Qt("isSidebarPinned",String(r),{expires:Sr})},setSidebarHiddenHubs:r=>{n({sidebarHiddenHubs:r}),Qt("sidebarHiddenHubs",JSON.stringify(r),{expires:Sr})},setIsCollapsed:r=>{e("sidebar toggled",{is_collapsed:r}),Qt("isCollapsed",String(r),{expires:Sr}),n({isCollapsed:r})},setIsIncognito:async r=>{const s=await Xv.getSession(),a=s!==null&&typeof s<"u";a&&dte(),a&&(CBe(r),n({isIncognitoLocal:r}))},setIsDiscoverInterestBoxDismissed:r=>{EBe(r),n({isDiscoverInterestBoxDismissed:r})},setIsEnterpriseAdDismissed:r=>{kBe(r),n({isEnterpriseAdDismissed:r})},setIsSuggestionsDisabled:r=>{e("auto suggestion setting toggled",{isEnabled:!r}),TBe(r),n({isSuggestionsDisabled:r})},setIsHomepageWidgetsDisabled:r=>{e("homepage widgets setting toggled",{isEnabled:!r}),NBe(r),n({isHomepageWidgetsDisabled:r})},setIsSportsIosCtaDismissed:r=>{RBe(r),n({isSportsIosCtaDismissed:r})},setPreferredSearchMode(r){r?Qt(IA,r,{expires:Sr}):Hd(IA),n({preferredSearchMode:r})},setIsMaxAssistantModeEnabled:r=>{e("max assistant mode toggled",{isEnabled:r}),Qt(ole,String(r),{expires:Sr}),n({isMaxAssistantMode:r})},setPreferredSearchModel(r,s){n(a=>{const{preferredSearchModels:o={}}=a;s?o[r]=s:r&&delete o[r];try{Qt(ale,JSON.stringify(o),{expires:Sr})}catch{}finally{a.preferredSearchModels=o}return a})},setWelcomeBackGateImpressions:r=>{ABe(r),n({welcomeBackGateImpressions:r})},setShareGateImpressions:r=>{jBe(r),n({shareGateImpressions:r})},setIsSidebarConnectorsAdDismissed:r=>{OBe(r),n({isSidebarConnectorsAdDismissed:r})},setIsStudentReferralBannerDismissed:r=>{FBe(r),n({isStudentReferralBannerDismissed:r})},setIsStudentSpaceUpsellDismissed:r=>{UBe(r),n({isStudentSpaceUpsellDismissed:r})},setStudentSpaceUpsellImpressions:r=>{BBe(r),n({studentSpaceUpsellImpressions:r})}}}))),jGe=({children:e,initialLocalUserSettings:t})=>{const{trackEvent:n}=Me(),[r]=A.useState(()=>AGe({trackEvent:n,initialLocalUserSettings:t}));return LP(Zw,s=>{s&&r.setState({isIncognitoLocal:JSON.parse(s.value)})}),i.jsx(TGe.Provider,{value:r,children:e})},dn=NGe,xu={DEFAULT:"DEFAULT",GOVERNMENT:"GOVERNMENT"},oa=({reason:e})=>{const{organization:t}=gn({reason:e}),{isGovernmentRequestOrigin:n}=Or(),r=t?.settings?.always_incognito,{isIncognitoLocal:s}=dn(),a=r||(s??n??!1),o=n?xu.GOVERNMENT:xu.DEFAULT;return{isIncognito:a,incognitoType:o}},pm="recentCollections",sue=({reason:e})=>{const{isIncognito:t}=oa({reason:e}),{inFlightLatest:n}=Ht(),{session:r}=Ct(),s=r?.user?.email,{data:a,refetch:o}=$e({queryKey:[pm,s],queryFn:async()=>s?await KWe({reason:e}):[],enabled:!t&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!1,initialData:null});return f.useEffect(()=>{n||o({cancelRefetch:!1})},[n,o]),f.useMemo(()=>!s||t?{data:[]}:{data:a},[a,s,t])},$Dt=async({collectionUUID:e,reason:t})=>{const n=await ne.POST("/rest/spaces/bookmarks",t,{body:{collection_uuid:e},timeoutMs:Pe(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create space bookmark");return r},HDt=async({query:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/spaces/bookmarks",t,{params:{query:e}});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to list bookmarked spaces",cause:r});return n},aue=async({params:e,reason:t})=>{const n=await ne.GET("/rest/spaces",t,{params:{query:{limit:e.limit,offset:e.offset,category:e.category,version:wi}},timeoutMs:Pe()});if(n.error)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to list spaces",cause:n.error});return n.data},RGe=async({reason:e})=>{const t=await ne.GET("/rest/spaces/mentions",e,{timeoutMs:Pe()});if(t.error)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to list at mention spaces",cause:t.error});return t.data},zDt=async({collectionUUID:e,reason:t})=>{const n=await ne.POST("/rest/spaces/org/pins",t,{body:{collection_uuid:e},timeoutMs:Pe(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create org pinned space");return r},GDt=async({query:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/spaces/org/pins",t,{params:{query:e},timeoutMs:Pe()});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to list org pinned spaces",cause:r});return n},qDt=async({spaceUuid:e,reason:t})=>{const n=await ne.GET("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to get space subscription status");return r.subscribed},IGe=async({reason:e})=>{const t=await ne.GET("/rest/collections/list_space_templates",e,{timeoutMs:Pe(),numRetries:1});if(t.error)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to list space templates",cause:t.error});return t.data},$A=10,gG=["invited","private","shared","saved","organization"];function hm(e){return["spaces","list",e]}function gm(){return["spaces","list","all"]}const PGe=({reason:e})=>{const t=mt(),{data:n,isLoading:r}=$e({queryKey:gm(),queryFn:()=>aue({params:{offset:0,limit:$A,category:void 0},reason:e})});return f.useEffect(()=>{n&&(n.private_spaces&&t.setQueryData(hm("private"),s=>({...s,pages:[n.private_spaces||[]],pageParams:[0]})),n.shared_spaces&&t.setQueryData(hm("shared"),s=>({...s,pages:[n.shared_spaces||[]],pageParams:[0]})),n.saved_spaces&&t.setQueryData(hm("saved"),s=>({...s,pages:[n.saved_spaces||[]],pageParams:[0]})),n.organization_spaces&&t.setQueryData(hm("organization"),s=>({...s,pages:[n.organization_spaces||[]],pageParams:[0]})),n.invited_spaces&&t.setQueryData(hm("invited"),s=>({...s,pages:[n.invited_spaces||[]],pageParams:[0]})))},[n,t]),f.useMemo(()=>({data:n,isLoading:r}),[n,r])},OGe=({category:e,reason:t})=>Cc({queryKey:hm(e),queryFn:async({pageParam:n})=>{const r=await aue({params:{offset:n,limit:$A,category:e},reason:t});switch(e){case"private":return r.private_spaces;case"shared":return r.shared_spaces;case"saved":return r.saved_spaces;case"organization":return r.organization_spaces;case"invited":return r.invited_spaces;default:throw new Error("Invalid category")}},enabled:!1,getNextPageParam:(n,r,s)=>(s??0)+$A,initialPageParam:0}),GP={searchTerm:"",updateUserInput:e=>{}},oue=f.createContext(GP),LGe=({children:e})=>{const[t,n]=f.useState(GP),r=a=>{n(o=>({...o,...a}))},s=f.useMemo(()=>({...t,updateUserInput:r}),[t.searchTerm]);return i.jsx(oue.Provider,{value:s,children:e})},qP=()=>{const e=f.useContext(oue);return e||GP},KDt=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,DGe=(e,t)=>e.getQueryData(["results"])?.find(r=>r.frontend_context_uuid===t)?.collection_info,FGe=(e,t)=>e.getQueryData(nP(t))?.find(r=>r.frontend_context_uuid===t)?.collection_info,UGe=(e,t,n)=>{e.setQueryData(nP(t),r=>r&&r.map(n))},BGe=[gt.OWNER_ONLY,gt.PRIVATE_READ,gt.COLLECTION_READ],yG=(e,t,n,r,s)=>{const{entryUUID:a,frontendContextUUID:o,newCollectionUUID:l,newCollectionTitle:c,newCollectionEmoji:u,newCollectionSlug:d,newCollectionAccess:m,newCollectionUserPermission:p}=t,h={collection_info:{uuid:l,title:c,emoji:u,slug:d,access:m,user_permission:p},bookmark_state:"BOOKMARKED"};o&&(s(g=>g?g.map(y=>y.frontend_context_uuid===o?{...y,...h}:y):[]),e.setQueryData([r,{frontend_context_uuid:o}],g=>g?g.map(y=>y.frontend_context_uuid===o?{...y,...h}:y):[])),e.setQueryData(n,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(v=>v.map(x=>x.uuid===a?{...x,collection:{...x.collection,...h.collection_info}}:x));return{...g,pages:y}})},Fh=({reason:e})=>{const{searchTerm:t}=qP(),n=mt(),{isEnterprise:r}=gn({reason:e}),{threadMetadata:s}=rue(),a=Oo(),o=Nt();let l="results";const c=[tf,{search_term:t??""}],u=[tf,{search_term:t??""}];let d=c,m=cVe,p=DGe;const h=VS();let g=f.useCallback((R,O,P)=>{h(N=>N&&N.map(P))},[h]);(o?.startsWith("/page")||o?.startsWith("/discover"))&&(l="articleResults",d=u,m=uVe,p=FGe,g=UGe);const y=f.useCallback(R=>{const O=!a&&!s?.rwToken;!r||O||h(P=>{if(P)return P.map(N=>{let I=!1,D=gt.PRIVATE_READ;return R==="add"?(I=BGe.includes(N.thread_access??null),D=un.isArticleMode(N)?gt.PRIVATE_READ:gt.COLLECTION_READ):(I=N.thread_access!==gt.COLLECTION_READ,D=gt.PRIVATE_READ),{...N,thread_access:I?N.thread_access:D}})})},[a,s?.rwToken,r,h]),{mutate:v}=bt({mutationFn:async({title:R,description:O,emoji:P,instructions:N,accessLevel:I,existingCollection:D,enableWebByDefault:F,closeModal:B})=>(B(),P$e({collectionUuid:D.uuid,changes:{title:R,description:O,emoji:P,instructions:N,accessLevel:I,enableWebByDefault:F},reason:e})),onMutate:async R=>{const N=["get_collection",{collection_slug:R.existingCollection.slug.slice(-22)}];await n.cancelQueries({queryKey:N});const I=n.getQueryData(N);return n.setQueryData(N,D=>({...D,title:R.title,description:R.description,emoji:R.emoji,instructions:R.instructions,access:R.accessLevel,enable_web_by_default:R.enableWebByDefault})),{previousCollection:I}},onSettled:(R,O,P,N)=>{const D=["get_collection",{collection_slug:P.existingCollection.slug.slice(-22)}];O?n.setQueryData(D,N?.previousCollection):(n.setQueryData(D,F=>({...F,...R})),n.setQueryData(an,F=>F?.pages?{...F,pages:F.pages.map(B=>B.map(V=>V.uuid===P.existingCollection.uuid?{...V,...R}:V))}:F),n.invalidateQueries({queryKey:gm()}),n.invalidateQueries({queryKey:yy()}))}}),{mutate:x}=bt({mutationFn:async({accessLevel:R,collectionUuid:O})=>{await XWe({params:{collection_uuid:O,updated_access:R},reason:e})},onMutate:async R=>{const N=["get_collection",{collection_slug:R.collectionSlug.slice(-22)}];await n.cancelQueries({queryKey:N});const I=n.getQueryData(N);return n.setQueryData(N,D=>({...D,access:R.accessLevel})),{previousCollection:I}},onSettled:async(R,O,P,N)=>{if(O)n.setQueryData(an,N?.previousCollection);else{const I=P.collectionSlug.slice(-22);await n.invalidateQueries({queryKey:["org_pinned_spaces_query_key"]}),await n.invalidateQueries({queryKey:["get_collection",{collection_slug:I}]}),n.invalidateQueries({queryKey:gm()})}}}),{mutate:b}=bt({mutationFn:async({entryUUID:R,title:O,description:P,emoji:N,instructions:I,accessLevel:D,callback:F,frontendContextUUID:B})=>{const V=await vH({params:{title:O,description:P,emoji:N,instructions:I,accessLevel:D},reason:e});return await lb({params:{new_collection_uuid:V.uuid,entry_uuid:R,return_collection:!1,return_thread:!1},reason:e}),F(V),y("add"),{title:O,description:P,emoji:N,instructions:I,accessLevel:D,newCollection:V}},onMutate:async({entryUUID:R,frontendContextUUID:O,...P})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:an});const N=n.getQueryData(d),I=n.getQueryData(an);n.setQueryData(an,F=>{F=F||{pages:[],pageParams:[]};const B=(F&&F.pages&&F.pages[0])??[],$={...B?.length>0?B[0]:[],...P,uuid:Dc,thread_count:1};return{...F,pages:[[$,...B]]}}),n.setQueryData(d,F=>{F=F||{pages:[],pageParams:[]};const B=F.pages.map(V=>V.map($=>$.uuid===R?{...$,collection:{...$.collection,description:P.description,uuid:Dc,title:P.title,emoji:P.emoji}}:$));return{...F,pages:B}}),n.setQueryData(m(R),F=>{const B=F?.collection_info??{};return{...F,collection_info:{...B,uuid:Dc,description:P.description,title:P.title,emoji:P.emoji}}});let D=null;return O&&(D=p(n,O)??null,g(n,O,F=>F.frontend_context_uuid===O?{...F,collection_info:{...F.collection_info,uuid:Dc,title:P.title,emoji:P.emoji},bookmark_state:"BOOKMARKED"}:F)),{previousThreads:N,previousCollections:I,previousCollectionInfo:D}},onSettled:(R,O,P,N)=>{O?(n.setQueryData(d,N.previousThreads),n.setQueryData(an,N.previousCollections),P.frontendContextUUID&&g(n,P.frontendContextUUID,I=>I.frontend_context_uuid===P.frontendContextUUID?{...I,collection_info:N?.previousCollectionInfo??null,bookmark_state:N?.previousCollectionInfo?"BOOKMARKED":"NOT_BOOKMARKED"}:I)):(n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:an}),n.invalidateQueries({queryKey:[pm]}),n.invalidateQueries({queryKey:yy()}),n.invalidateQueries({queryKey:gm()}),P.frontendContextUUID&&g(n,P.frontendContextUUID,I=>I.frontend_context_uuid===P.frontendContextUUID?{...I,collection_info:{...I.collection_info,uuid:R?.newCollection?.uuid,title:R?.newCollection?.title,emoji:R?.newCollection?.emoji,slug:R?.newCollection?.slug},bookmark_state:"BOOKMARKED"}:I))}}),{mutate:_}=bt({mutationFn:async({title:R,description:O,emoji:P,instructions:N,accessLevel:I,template_id:D,callback:F})=>{const B=await vH({params:{title:R,description:O,emoji:P,instructions:N,accessLevel:I,template_id:D},reason:e});return F(B),{collection:B}},onMutate:async({...R})=>{n.setQueryData(an,O=>{O=O||{pages:[],pageParams:[]};const P=O.pages[0]||[],N={...P.length>0?P[0]:{},...R,uuid:Dc,thread_count:0};return{...O,pages:[[N,...P]]}})},onSuccess:async()=>{n.refetchQueries({queryKey:an}),n.invalidateQueries({queryKey:[pm]}),n.invalidateQueries({queryKey:yy()}),n.invalidateQueries({queryKey:gm()})}}),{mutate:w}=bt({mutationFn:async({entryUUID:R})=>{const O=await lb({params:{entry_uuid:R,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),O},onMutate:async({entryUUID:R,topic:O})=>{const P=n.getQueryData(Vl(O));let N;for(const I of P?.pages??[])for(const D of I.threads)if(D.uuid===R){N=D.collection;break}return n.setQueryData(Vl(O),I=>{if(I)return{pageParams:I.pageParams,pages:I.pages.map(D=>({...D,threads:D.threads.map(F=>({...F,collection:F.uuid===R?{uuid:Dc,title:"Bookmarks",emoji:"1f516",slug:Dc}:F.collection}))}))}}),{previousCollection:N}},onSettled:(R,O,P,N)=>{const{entryUUID:I,topic:D}=P;if(O||!R)N?.previousCollection&&n.setQueryData(Vl(D),F=>{if(F)return{pageParams:F.pageParams,pages:F.pages.map(B=>({...B,threads:B.threads.map(V=>({...V,collection:V.uuid===I?N.previousCollection:V.collection}))}))}});else{const{updated_collection:F}=R,{uuid:B,title:V,emoji:$,slug:G}=F;n.setQueryData(Vl(D),X=>{if(X)return{pageParams:X.pageParams,pages:X.pages.map(Y=>({...Y,threads:Y.threads.map(W=>({...W,collection:W.uuid===I?{uuid:B,title:V,emoji:$,slug:G}:W.collection}))}))}})}}}),{mutate:C}=bt({mutationFn:async({entryUUID:R,topic:O,oldCollectionUUID:P})=>(await pH({collectionUUID:P,entryUUID:R,reason:e}),{topic:O}),onMutate:async({entryUUID:R,topic:O})=>{const P=n.getQueryData(Vl(O));let N;for(const I of P?.pages??[])for(const D of I.threads)if(D.uuid===R){N=D.collection;break}return n.setQueryData(Vl(O),I=>{if(I)return{pageParams:I.pageParams,pages:I.pages.map(D=>({...D,threads:D.threads.map(F=>({...F,collection:F.uuid===R?void 0:F.collection}))}))}}),{previousCollection:N}},onSettled:(R,O,P,N)=>{const{entryUUID:I,topic:D}=P;O&&N?.previousCollection&&n.setQueryData(Vl(D),F=>{if(F)return{pageParams:F.pageParams,pages:F.pages.map(B=>({...B,threads:B.threads.map(V=>({...V,collection:V.uuid===I?N.previousCollection:V.collection}))}))}})}}),{mutate:S}=bt({mutationFn:async({entryUUID:R,frontendContextUUID:O})=>{const P=await lb({params:{entry_uuid:R,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),{response:P,entryUUID:R,frontendContextUUID:O}},onMutate:async({frontendContextUUID:R})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:an}),h(O=>O&&O.map(P=>P.frontend_context_uuid===R?{...P,bookmark_state:"BOOKMARKED",collection_info:{uuid:null,title:"Bookmarks",emoji:"1f516",slug:null,access:null,user_permission:js.OWNER_DEFAULT_BOOKMARKS}}:P))},onSettled:async(R,O)=>{if(!R||!R.response?.updated_collection)return;const P=R.response.updated_collection,N=R.entryUUID,I=R.frontendContextUUID,{uuid:D,title:F,emoji:B=null,slug:V,access:$,user_permission:G}=P;await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:an}),yG(n,{entryUUID:N,frontendContextUUID:I,newCollectionUUID:D,newCollectionTitle:F,newCollectionEmoji:B,newCollectionSlug:V,newCollectionAccess:$,newCollectionUserPermission:G},d,l,h),n.invalidateQueries({queryKey:an}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:I}]})}}),{mutate:E}=bt({mutationFn:async({entryUUID:R,currentCollectionUUID:O,newCollectionTitle:P,newCollectionUUID:N,newCollectionSlug:I,newCollectionAccess:D,closeModal:F,callback:B})=>{if(N!==Dc)return F(),await lb({params:{new_collection_uuid:N,entry_uuid:R,return_collection:!1,return_thread:!1},reason:e}),B?.(),y("add"),{entryUUID:R,currentCollectionUUID:O,newCollectionTitle:P,newCollectionUUID:N,newCollectionSlug:I,newCollectionAccess:D,closeModal:F}},onMutate:async({entryUUID:R,frontendContextUUID:O,currentCollectionUUID:P,newCollectionUUID:N,newCollectionTitle:I,newCollectionEmoji:D,newCollectionSlug:F,newCollectionAccess:B,newCollectionUserPermission:V})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:an});const $=n.getQueryData(d),G=n.getQueryData(an);return yG(n,{entryUUID:R,frontendContextUUID:O,newCollectionUUID:N,newCollectionTitle:I,newCollectionEmoji:D,newCollectionSlug:F,newCollectionAccess:B,newCollectionUserPermission:V},d,l,h),n.setQueryData(an,X=>{X=X||{pages:[],pageParams:[]};const Y=X.pages.map(W=>W.map(H=>H.uuid===P?{...H,thread_count:H.thread_count-1}:H.uuid===N?{...H,thread_count:H.thread_count+1}:H));return{...X,pages:Y}}),{previousThread:$,previousCollections:G}},onSettled:(R,O,P,N)=>{if(O)n.setQueryData(d,N.previousThread),n.setQueryData(an,N.previousCollections);else{const D={collection_slug:P.existingCollectionSlug?.slice(-22)},F={collection_slug:P.newCollectionSlug.slice(-22)},B=[Zl,D],V=[Zl,F];n.invalidateQueries({queryKey:["get_collection",F]}),n.invalidateQueries({queryKey:B}),n.refetchQueries({queryKey:V}),n.refetchQueries({queryKey:m(P.entryUUID)}),n.invalidateQueries({queryKey:an}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:P.frontendContextUUID}]}),n.invalidateQueries({queryKey:[pm]})}}}),{mutate:M}=bt({mutationFn:async({entryUUID:R,oldCollectionUUID:O,callback:P})=>{if(O)return await pH({collectionUUID:O,entryUUID:R,reason:e}),P?.(),y("remove"),{entryUUID:R,oldCollectionUUID:O}},onMutate:async({entryUUID:R,oldCollectionUUID:O,frontendContextUUID:P,collectionSlug:N})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:an});const I=n.getQueryData(d),D=n.getQueryData(an);return P&&(h(F=>F?F.map(B=>B.frontend_context_uuid===P?{...B,collection_info:void 0,bookmark_state:"NOT_BOOKMARKED"}:B):[]),n.setQueryData([l,{frontend_context_uuid:P}],F=>F?F.map(B=>B.frontend_context_uuid===P?{...B,collection_info:null,bookmark_state:"NOT_BOOKMARKED"}:B):[])),n.setQueryData(d,F=>{F=F||{pages:[],pageParams:[]};const B=F.pages.map(V=>V.map($=>R===$.uuid&&$.collection?.uuid===O?{...$,collection:null}:$));return{...F,pages:B}}),n.setQueryData(an,F=>{F=F||{pages:[],pageParams:[]};const B=F.pages.map(V=>V.map($=>$.uuid===O?{...$,thread_count:$.thread_count-1}:$));return n.setQueryData(m(R),V=>V&&Array.isArray(V.pages)?{...V,pages:V.pages.map($=>$.map(G=>G.uuid===R?{...G,collection_info:null}:G))}:{...V,collection_info:null}),{...F,pages:B}}),N&&n.setQueryData([Zl,{collection_slug:N.slice(-22)}],(F={pages:[],pageParams:[]})=>({...F,pages:F.pages.map(B=>B.filter(V=>V.uuid!==R))})),{previousThreads:I,previousCollections:D}},onSettled:(R,O,P,N)=>{if(O)n.setQueryData(d,N.previousThreads),n.setQueryData(an,N.previousCollections);else if(n.invalidateQueries({queryKey:m(P.entryUUID)}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:an}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[pm]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:P.frontendContextUUID}]}),P.collectionSlug){const I={collection_slug:P.collectionSlug.slice(-22)},D=[Zl,I];n.invalidateQueries({queryKey:D}),n.invalidateQueries({queryKey:["get_collection",I]})}}}),{mutate:k}=bt({mutationFn:async R=>{await O$e({collectionUuid:R,reason:e})},onSuccess:(R,O)=>{n.invalidateQueries({queryKey:an}),n.invalidateQueries({queryKey:[pm]}),n.invalidateQueries({queryKey:yy()}),n.invalidateQueries({queryKey:gm()}),n.setQueryData(an,P=>!P||!P.pages?P:{...P,pages:P.pages.map(N=>N.filter(I=>I.uuid!==O))})}}),{mutate:T}=bt({mutationFn:async({collectionUuid:R,link:O,reason:P})=>{const N=await sr({urlPath:"/rest/collections/focused_web_config/links",timeoutMs:Pe(),method:"POST",body:JSON.stringify({collection_uuid:R,link:O}),headers:{"content-type":"application/json"},numRetries:1,reason:P});if(!N.ok){const I=await N.json();throw new Error(I.detail||"Failed to add link")}return N},onSettled:(R,O,P,N)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:P.collectionSlug.slice(-22)}]})}}),{mutate:j}=bt({mutationFn:async({collectionUuid:R,link:O,reason:P})=>{await sr({urlPath:"/rest/collections/focused_web_config/links",timeoutMs:Pe(),method:"DELETE",body:JSON.stringify({collection_uuid:R,link:O}),headers:{"content-type":"application/json"},numRetries:1,reason:P})},onSettled:(R,O,P,N)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:P.collectionSlug.slice(-22)}]})}});return f.useMemo(()=>({updateCollectionInfo:v,updateCollectionAccessLevel:x,createCollectionForThread:b,createCollection:_,bookmarkFromFeed:w,removeBookmarkFromFeed:C,firstTimeBookmark:S,swapThreadCollection:E,removeThreadFromCollection:M,deleteCollection:k,addLink:T,removeLink:j}),[T,w,b,_,k,S,C,j,M,E,x,v])},VGe=({reason:e})=>$e({queryKey:["list_space_templates"],queryFn:()=>IGe({reason:e})}),iue=({collectionSlug:e,reason:t})=>{const{data:n,isLoading:r}=VGe({reason:t});return f.useMemo(()=>!n?.templates||!e?{templateSpace:void 0,isLoading:r}:{templateSpace:n.templates.find(s=>s.collection.slug===e),isLoading:r},[e,n?.templates,r])},YDt=({template:e,reason:t})=>{const n=_t(),{$t:r}=Q(),{trackEvent:s}=Me(),{openToast:a}=xn(),{createCollection:o,addLink:l}=Fh({reason:t}),{collection:c,tags:u}=e,d=f.useCallback(()=>{c&&(s("space template copied",{collectionSlug:c.slug??"",templateTitle:c?.title??"",tags:Array.from(u)}),o({...c,title:c.title??"",description:c.description??"",instructions:c.instructions??"",emoji:c.emoji??"",accessLevel:gt.PRIVATE_READ,callback:async m=>{c.focused_web_config?.link_configs&&await Promise.all(c.focused_web_config.link_configs.map(p=>l({collectionUuid:m.uuid,link:p.link??"",collectionSlug:m.slug,reason:t}))),n.push(`/spaces/${m.slug}`),a(r({defaultMessage:"Space is ready to customize",id:"AWqOucIdz5"}),"success",3)}}))},[n,c,u,o,a,r,s,l,t]);return f.useMemo(()=>({handleCopyTemplate:d}),[d])},lue=({reason:e,onSuccess:t})=>{const{$t:n}=Q(),{openToast:r}=xn();return bt({mutationFn:async({file_url:s})=>(await R$e({request:{file_url:s,view_mode:!1},reason:e})).file_url,onSuccess:(s,{tab_id:a})=>{t?t(s,a):window.open(s,"_blank"),r(n({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)},onError:s=>{s instanceof wP?r(n({defaultMessage:"Downloads are disabled for files in this organization.",id:"NfM+Ayxvc6"}),"error",8):s instanceof CP?r(n({defaultMessage:"PDF downloads are restricted",id:"aJYvzl3Lq5"}),"error",8):s instanceof SP?r(n({defaultMessage:"This file belongs to a different organization",id:"lo7Bg402Jd"}),"error",8):r(n({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}})},a2=async({fileRepositoryType:e,ownerId:t,limit:n,offset:r,searchTerm:s,email:a,reason:o})=>{const[l,c]=await Promise.all([DA({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:n,offset:r,searchTerm:s,fileStates:["COMPLETE"],email:a},reason:o}),DA({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:100,offset:0,searchTerm:"",fileStates:["PROCESSING","FAILED"],email:a},reason:o})]),u=d=>({name:d.filename,file_uuid:d.file_uuid,file_s3_url:d.file_s3_url??"",file_title:d.file_title,file_description:d.file_description,uploadedBy:d.uploaded_by,state:d.file_state,size:d.file_size??0,date:new Date(d.time_created).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),error:d.error??void 0,isOptimistic:!1});if(l||c){const d=l?.files?.map(u)||[],m=c?.files?.map(u)||[];return{completedFiles:d,processingFiles:m.filter(p=>p.state==="PROCESSING"),failedFiles:m.filter(p=>p.state==="FAILED"),numTotalFiles:l?.numTotalFiles||0}}return{completedFiles:[],processingFiles:[],failedFiles:[],numTotalFiles:0}},WGe=({fileRepositoryType:e,limit:t,offset:n,searchTerm:r,ownerId:s,reason:a})=>{const o=mt(),{session:l}=Ct(),c=l?.user?.email??"",{isEnterprise:u}=gn({reason:a}),d=!!(e==="COLLECTION"&&s||e==="ORG"&&u),m=zS(e,s,t,n,r),p=$e({queryKey:m,queryFn:()=>d?a2({fileRepositoryType:e,ownerId:s,limit:t,offset:n,searchTerm:r,email:c,reason:a}):Promise.reject(),enabled:d,placeholderData:Ch,staleTime:5*60*1e3,gcTime:10*60*1e3});return f.useEffect(()=>{d&&(p.data?.numTotalFiles??0)>n+t&&o.prefetchQuery({queryKey:m,queryFn:()=>a2({fileRepositoryType:e,ownerId:s,limit:t,offset:n+t,searchTerm:r,email:c,reason:a}),staleTime:5*60*1e3,gcTime:10*60*1e3})},[m,d,o,e,t,n,r,p.data?.numTotalFiles,c,s,a]),p},$Ge=({fileRepositoryType:e,limit:t,searchTerm:n,ownerId:r,reason:s})=>{const{session:a}=Ct(),o=a?.user?.email??"",{isEnterprise:l}=gn({reason:s}),c=!!(e==="COLLECTION"&&r||e==="ORG"&&l),u=zS(e,r,t,void 0,n,!0);return Cc({enabled:c,initialPageParam:0,queryKey:u,queryFn:({pageParam:m})=>!c||m===void 0?Promise.reject():a2({fileRepositoryType:e,ownerId:r,limit:t,offset:m,searchTerm:n,email:o,reason:s}),getNextPageParam:(m,p)=>{const g=p.length*t+t;if(!(g>=m.numTotalFiles))return g}})},QDt=({fileRepoInfo:e,offset:t,setOffset:n,searchTerm:r,reason:s})=>{const a=e.file_repository_type,o=e.owner_id,{data:l,isLoading:c}=WGe({fileRepositoryType:a,limit:za,offset:t,searchTerm:r,ownerId:o,reason:s}),{completedFiles:u,processingFiles:d,failedFiles:m,totalFiles:p}=f.useMemo(()=>({completedFiles:l?.completedFiles||[],processingFiles:l?.processingFiles||[],failedFiles:l?.failedFiles||[],totalFiles:l?.numTotalFiles??0}),[l]),h=t>0,g=p>t+za,y=Math.floor(t/za)+1,v=Math.max(1,Math.ceil(p/za)),x=f.useCallback(()=>{h&&n(Math.max(0,t-za))},[h,t,n]),b=f.useCallback(()=>{g&&n(t+za)},[g,t,n]);return f.useMemo(()=>({completedFiles:u,processingFiles:d,failedFiles:m,totalFiles:p,isLoadingFileDirectory:c,hasPreviousPage:h,hasNextPage:g,searchTerm:r,offset:t,currentPage:y,totalPages:v,setOffset:n,handlePrevPage:x,handleNextPage:b}),[u,y,m,b,x,g,h,c,t,d,r,n,p,v])},HGe=({fileRepoInfo:e,searchTerm:t,limit:n=za,reason:r})=>{const s=e.file_repository_type,a=e.owner_id,{data:o,isLoading:l,hasNextPage:c,fetchNextPage:u}=$Ge({fileRepositoryType:s,limit:n,searchTerm:t,ownerId:a,reason:r}),{completedFiles:d,processingFiles:m,failedFiles:p,totalFiles:h}=f.useMemo(()=>{const g=o?o.pages[o.pages.length-1]:null;return{completedFiles:o?.pages.map(y=>y.completedFiles).flat()||[],processingFiles:o?.pages.map(y=>y.processingFiles).flat()||[],failedFiles:o?.pages.map(y=>y.failedFiles).flat()||[],totalFiles:g?.numTotalFiles??0}},[o]);return f.useMemo(()=>({completedFiles:d,processingFiles:m,failedFiles:p,totalFiles:h,isLoading:l,hasNextPage:c,searchTerm:t,fetchNextPage:u}),[d,p,u,c,l,m,t,h])},KP=({title:e,actionIcon:t=rr,onAction:n,testId:r,children:s})=>i.jsxs(z,{children:[i.jsxs("div",{className:"my-xs py-xs pl-sm flex items-center justify-between",children:[i.jsx(L,{variant:"smallBold",children:e}),n&&i.jsx(Te,{variant:"common",size:"small",icon:t,pill:!0,onClick:n,"data-testid":r})]}),s]}),zGe=({reason:e,collectionSlug:t})=>{const{variation:n}=oE(!1),{openModal:r}=vt(),{fileRepoInfo:s}=Do({reason:e,collectionSlugOverride:t}),{data:a}=qce({fileRepoInfo:s,reason:e}),o=f.useCallback(()=>{r("spaceUploadFilesModal",{initialTab:n?"files":"connectors",collectionSlug:t})},[t,r,n]),l=a?.summary?.error_files??0;return f.useMemo(()=>({errorCount:l,handleSeeDetails:o}),[l,o])},vG=dt({errorCount:{defaultMessage:"{errorCount, plural, one {# file failed to upload} other {# files failed to upload}}",id:"5s+s5GJuN7"},seeDetails:{defaultMessage:"See details",id:"RQfEXO7ZCr"}}),GGe=({collectionSlug:e})=>{const t="upload-error-banner",{$t:n}=Q(),{errorCount:r,handleSeeDetails:s}=zGe({reason:t,collectionSlug:e});return r<=0?null:i.jsxs(z,{variant:"subtle",className:"px-sm py-xs flex items-baseline gap-2 rounded-md",children:[i.jsx(L,{color:"red",className:"self-center",children:i.jsx(me,{icon:Hv,size:"md"})}),i.jsx(L,{variant:"small",color:"default",children:i.jsx(pe,{...vG.errorCount,values:{errorCount:r}})}),i.jsx("div",{className:"ml-auto",children:i.jsx(Te,{variant:"noBackground",size:"small",text:n(vG.seeDetails),onClick:s})})]})},YP=A.memo(({width:e="w-14",fillColor:t="fill-max",svgClassName:n,...r})=>{const s=U("h-auto group",e);return i.jsx("div",{className:s,...r,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 36",className:n,children:[i.jsx("path",{className:t,d:"M50.0858 22.3525C50.0858 23.9034 51.4144 24.8675 53.5527 24.8675C55.1684 24.8675 56.5468 24.3911 57.5393 23.4903C58.5991 22.5277 59.1595 21.1074 59.1595 19.3821V19.3262L53.1962 19.956C51.1311 20.147 50.0858 20.9534 50.0858 22.3525Z"}),i.jsx("path",{className:t,d:"M96.7015 8.60077C95.1033 5.76707 92.7331 3.49361 89.8477 2.02806C87.198 0.682565 84.1956 0 80.925 0H4.46551C1.9767 0.000755049 -0.00527674 2.02051 1.0554e-05 4.5084V36H80.925C83.8489 36 86.556 35.4503 88.9904 34.3736L78.7837 21.1444H78.5571L72.8105 28.5922H67.2136V27.4883L75.0795 17.6697L67.2136 7.851V6.74712H72.8105L78.5571 14.1949H78.7837L84.5302 6.74712H90.1264V7.851L82.2612 17.6697L93.3728 31.5407C94.6878 30.3568 95.8171 28.9675 96.7023 27.3977C98.2266 24.6946 99 21.5355 99 18.0102C99 14.4849 98.2266 11.3054 96.7015 8.60077ZM40.5936 28.593H35.122V14.6268C35.122 13.5886 34.8214 12.7392 34.2518 12.1699C33.6612 11.5794 32.8009 11.2804 31.6951 11.2804C30.0009 11.2804 27.1586 11.926 27.1586 16.2517V28.593H21.687V14.6268C21.687 13.5886 21.3863 12.7392 20.8168 12.1699C20.2262 11.5794 19.3658 11.2804 18.26 11.2804C16.5658 11.2804 13.7228 11.926 13.7228 16.2517V28.593H8.29124V7.35569H13.5649V9.06814C13.5649 9.20934 13.7402 9.27276 13.8308 9.16479C14.25 8.66721 14.7236 8.2693 15.2788 7.94236C16.3883 7.29 17.8182 6.96005 19.5275 6.96005C21.2368 6.96005 22.8419 7.38212 24.0602 8.21418C24.9538 8.82426 25.5248 9.54835 25.8828 10.1554C25.938 10.2498 26.0739 10.2543 26.1358 10.1645C27.5997 8.0375 29.88 6.9608 32.9232 6.9608C35.1363 6.9608 37.0239 7.60184 38.3812 8.81445C39.8277 10.1063 40.5928 11.9932 40.5928 14.2704L40.5936 28.593ZM64.5518 28.593H59.2781V26.5407C59.2781 26.4033 59.1074 26.3361 59.016 26.4388C57.5076 28.1316 55.3406 28.9894 52.5625 28.9894C47.7344 28.9894 44.6149 26.5083 44.6149 22.6696C44.6149 20.7261 45.3718 19.1699 46.8658 18.0449C48.1733 17.0596 49.9838 16.4503 52.249 16.2321L59.1603 15.5148V14.8647C59.1603 12.2658 57.806 11.0033 55.0203 11.0033C53.1093 11.0033 50.6885 11.6119 50.366 14.5105L50.3282 14.8458H45.1097C45.1097 14.8458 45.0863 14.4154 45.1746 13.8129C45.7978 9.61102 49.7542 6.91927 55.0989 6.91927C60.93 6.91927 64.5525 10.0852 64.5525 15.181L64.5518 28.593Z"})]})})});YP.displayName="Max";const Rt=A.memo(({size:e="medium",user:t,showEdit:n,onChange:r,anon:s,altText:a,defaultIcon:o=zMe,rounded:l=!0,showBackground:c=!0,showProBadge:u,showMaxBadge:d,className:m,proBadgeClassName:p,badgeProps:h})=>{const g=s?HMe:o,y="65%",v=f.useCallback(()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=b=>{const _=b.target.files?.[0];if(_){const w=new FileReader;w.onload=C=>{r&&r(C.target?.result)},w.readAsDataURL(_)}},x.click()},[r]);return i.jsx("div",{className:U("text-inverse relative",m),children:i.jsxs("div",{className:U("relative flex aspect-square shrink-0 items-center justify-center",c?"bg-subtler":"bg-transparent",{"rounded-full":l,"size-3":e==="tiny","size-4":e==="mini","size-5":e==="small","size-6":e==="base","size-8":e==="medium","size-10":e==="large","size-20":e==="xlarge","ring-super border-inverse border-2 ring-[1.5px]":u,"ring-max border-inverse border-2 ring-[1.5px]":d}),children:[h?.show&&i.jsx("div",{className:U("absolute right-0 top-0 size-3 -translate-y-1/4 translate-x-1/4 select-none rounded-full border-2",h?.className)}),t&&!s?i.jsx("img",{alt:a??"User avatar",className:U("size-full object-cover",{"rounded-full":l}),src:t}):i.jsx(L,{color:"light",className:"flex items-center justify-center",children:i.jsx(g,{width:y,height:y})}),n&&e!=="small"&&i.jsx("div",{className:"absolute -bottom-1 -right-2",children:i.jsx(ge,{ariaLabel:"Edit avatar",variant:t?"common":"primary",size:e!=="xlarge"?"tiny":"small",pill:!0,icon:t?wc:rr,onClick:v})}),u&&i.jsx("div",{className:U("absolute top-full mt-[-6px] w-[24px] rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-lg mt-[-10px]":e==="xlarge"},p),children:i.jsx(AS,{fillColor:"fill-super",width:"w-full",sizeVariant:"small"})}),d&&i.jsx("div",{className:U("absolute left-1/2 top-full mt-[-6px] flex w-[28px] -translate-x-1/2 items-center justify-center rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-xl mt-[-10px]":e==="xlarge"}),children:i.jsx(YP,{width:"w-full"})})]})})});Rt.displayName="Avatar";const rf=(e,t)=>{const n=t?.isOverlapping??!1,r=t?.stackDirection??"left";if(!e.length)return i.jsx(me,{icon:Gd,size:"sm"});const s=Math.max(1,t?.maxVisuals??3),a=d=>{if(!(!n||d))switch(t?.size){case"sm":return"-0.25rem";case"md":return"-0.375rem";case"lg":return"-0.5rem";case"xl":return"-0.625rem";default:return}},o=()=>{const d=U("relative flex items-center justify-center",{"rounded-full":t?.shape==="circle"||!t?.shape,"rounded-none":t?.shape==="square","size-4":t?.size==="sm","size-5":t?.size==="md","size-6":t?.size==="lg","size-7":t?.size==="xl"});return!n||!e||e.length<=1?d:U(d,t?.overlappingClassName??"bg-base ring-subtlest",{"ring-1":t?.size==="sm"||t?.size==="md","ring-2":t?.size==="lg"||t?.size==="xl"})},l=(t?.showRemainderCount??!0)&&e.length>s,c=s===1&&e.length>1&&l?0:l?s-1:Math.min(s,e.length),u=e.slice(0,c).map((d,m)=>i.jsx("div",{className:o(),style:{zIndex:r==="left"?e.length-m-1:e.length+m,marginLeft:a(m===0)},children:d},m));return i.jsxs("div",{className:t?.containerClass??"my-xs flex items-center",children:[i.jsxs("div",{className:t?.innerClassName??U("flex items-center",{"gap-2":!n}),children:[u,l&&i.jsx("div",{className:U(o(),{"mx-1":c===0}),style:{zIndex:r==="left"?-1:e.length+s,marginLeft:a(c===0)},children:i.jsxs(L,{variant:"tinyMono",color:"light",inline:!0,children:["+",e.length-c]})})]}),t?.rightText&&i.jsx("div",{className:"ml-2",children:t.rightText})]})},qGe=({totalLocalFiles:e,totalRepoFiles:t,isFileManagerUiRedesignEnabled:n})=>{const r=t-e;return n?"files":e===0&&r>0?"connectors":(e>0&&r===0||e>0&&r>0,"localFiles")},QP=A.memo(({icon:e,badge:t})=>{const n=f.useMemo(()=>t&&i.jsx(Rt,{size:"tiny",showBackground:!1,rounded:!1,user:t}),[t]);return i.jsx(me,{icon:e,size:18,stroke:2,color:"#64645F",badge:n})});QP.displayName="BadgedIconFactory";const cue=({collection:e,onSourcesEdit:t})=>{const n=Q(),r="files-section",{isUserInvited:s,isUserAtLeastWriter:a}=Dh({collectionSlugOverride:e.slug,reason:r}),{variation:o}=oE(!1),l=f.useRef(null),{fileRepoInfo:c}=Do({reason:r,collectionSlugOverride:e.slug}),{searchTerm:u}=hce({reason:r}),{completedFiles:d,totalFiles:m,hasNextPage:p,fetchNextPage:h}=HGe({fileRepoInfo:c,searchTerm:u,limit:hH,reason:r}),{data:g,hasNextPage:y,fetchNextPage:v}=r$e({connectionTypes:[Tt.GOOGLE_DRIVE,Tt.ONEDRIVE,Tt.SHAREPOINT,Tt.DROPBOX,Tt.BOX],status:["READY"],fileRepoInfo:c,pageSize:hH,fileTypes:["FILE"],reason:r}),{connectorFiles:x,totalRepoFiles:b}=f.useMemo(()=>{const T=g?g.pages[g.pages.length-1]:null;return{connectorFiles:g?.pages.map(j=>j.files).flat()||[],totalRepoFiles:T?.files_in_repo??0}},[g]),_=f.useMemo(()=>ta(()=>{p?h():y&&v()},500),[p,h,y,v]);aE(l,_,{threshold:.5});const w=f.useCallback(()=>{if(!t)return;const T=qGe({totalLocalFiles:m,totalRepoFiles:b,isFileManagerUiRedesignEnabled:o});t(T)},[t,m,b,o]),C=p||y,S=f.useCallback(()=>{const T=a?n.formatMessage({defaultMessage:"Upload or sync files to be used as sources in every search.",id:"yF+cGexY2F"}):n.formatMessage({defaultMessage:"No files included.",id:"wZ9qntul+a"});let j=null;if(a){const R=[i.jsx(Rt,{user:CS,showBackground:!1,size:"small"},"gdrive"),i.jsx(Rt,{user:ES,showBackground:!1,size:"small"},"onedrive"),i.jsx(Rt,{user:MS,showBackground:!1,size:"small"},"sharepoint"),i.jsx(me,{icon:mh,size:"sm"},"upload")];j=rf(R,{isOverlapping:!0,maxVisuals:4,size:"xl",stackDirection:"right"})}return i.jsxs(z,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:[j&&i.jsx(z,{className:"mb-xs",children:j}),i.jsx(L,{variant:"small",color:"light",className:"text-center",children:T})]})},[n,a]),E=b===0,M=!s&&a,k=n.formatMessage({defaultMessage:"Files",id:"m4vqJl0/FT"});return i.jsx(KP,{title:b?`${k} (${b})`:k,onAction:M?w:void 0,testId:"space-context-files-add-button",children:E?S():i.jsxs("div",{className:"gap-y-sm flex flex-col",children:[i.jsx(GGe,{collectionSlug:e.slug}),i.jsxs("div",{children:[i.jsx(uue,{localFiles:d}),i.jsx(due,{connectorFiles:x}),C&&i.jsx(ko,{ref:l,size:"small",className:"my-xs"})]})]})})};cue.displayName="FilesSection";const uue=({localFiles:e})=>{const t="local-files-list",{mutate:n}=lue({reason:t}),r=f.useCallback(s=>s.file_s3_url?()=>n({file_url:s.file_s3_url}):null,[n]);return e.map((s,a)=>{const o=i.jsx(z,{className:"flex size-6 flex-none items-center justify-center",children:i.jsx(QP,{icon:Sf,badge:null})}),l=r(s);return i.jsx(z,{children:l?i.jsx(Te,{variant:"positive",text:s.name,leadingComponent:o,onClick:l,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0}):i.jsxs(z,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:[o,i.jsx(L,{variant:"small",color:"light",className:"line-clamp-1 pl-px",children:s.name})]})},`local-${a}`)})};uue.displayName="LocalFilesList";const due=({connectorFiles:e})=>{const t=f.useCallback(n=>()=>{n.connection_file_url&&window.open(n.connection_file_url,"_blank")},[]);return e.map((n,r)=>{const s=i.jsx(z,{className:"flex size-6 flex-none items-center justify-center",children:i.jsx(QP,{icon:Ate,badge:Ha(n.connection_type)})}),a=t(n);return i.jsx(z,{children:i.jsx(Te,{variant:"positive",text:n.name,leadingComponent:s,onClick:a,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0})},`connector-${r}`)})};due.displayName="ConnectorFilesList";const KGe=({collection:e,onEdit:t})=>{const n=Q(),r="instructions-section",{isUserInvited:s,isUserAtLeastWriter:a}=Dh({collectionSlugOverride:e.slug,reason:r}),o=!s&&a,l=!e.instructions,c=f.useMemo(()=>{const u=n.formatMessage({defaultMessage:"Add instructions to format, scope, and add relevance to your search results.",id:"JnYU6ctsCn"});return i.jsx(z,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:i.jsx(L,{variant:"small",color:"light",className:"text-center",children:u})})},[n]);return i.jsx(KP,{title:n.formatMessage({defaultMessage:"Instructions",id:"sV2v5LjRpX"}),actionIcon:wc,onAction:o?t:void 0,testId:"space-context-instructions-edit-button",children:l?c:i.jsx(z,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:i.jsx(L,{variant:"small",color:"light",className:"line-clamp-4 pl-px",children:e.instructions})})})},YGe=({collection:e,onSourcesEdit:t})=>{const n=Q(),r="links-section",{isUserInvited:s,isUserAtLeastWriter:a}=Dh({collectionSlugOverride:e.slug,reason:r}),{focusedWebLinks:o,totalFocusedWebLinks:l}=f.useMemo(()=>{const h=e.focused_web_config?.link_configs??[];return{focusedWebLinks:h,totalFocusedWebLinks:h.length}},[e.focused_web_config?.link_configs]),c=f.useCallback(h=>()=>window.open(`https://${h.link}`,"_blank"),[]),u=f.useCallback(()=>{t&&t("links")},[t]),d=f.useCallback(()=>{const h=a?n.formatMessage({defaultMessage:"Add URLs to be used as sources in every search.",id:"FTItpgdarF"}):n.formatMessage({defaultMessage:"No links included.",id:"Qid6Kgk2jz"});return i.jsx(z,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:i.jsx(L,{variant:"small",color:"light",className:"text-center",children:h})})},[n,a]),m=l===0,p=!s&&a;return i.jsx(KP,{title:n.formatMessage({defaultMessage:"Links",id:"qCcwo3DU78"}),onAction:p?u:void 0,testId:"space-context-links-add-button",children:m?d():i.jsx(i.Fragment,{children:o.map((h,g)=>{const y=i.jsx(z,{className:"flex size-6 flex-none items-center justify-center",children:i.jsx(me,{icon:Mf,size:18,stroke:2,color:"#64645F"})}),v=c(h);return i.jsx(z,{children:i.jsx(Te,{variant:"positive",text:h.link,leadingComponent:y,onClick:v,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0})},g)})})})},fue=A.memo(({collectionSlug:e,handleSpaceEdit:t,handleSourcesEdit:n})=>{const r="space-context",{collection:s}=kl({collectionSlug:e,reason:r}),{isUserAtLeastWriter:a,isUserInvited:o,isUserReader:l}=Dh({collectionSlugOverride:e,reason:r}),{templateSpace:c}=iue({collectionSlug:e??"",reason:r}),d=!o&&a||l&&!!c;return s?i.jsxs(z,{className:"hideScroll h-full flex-col overflow-y-auto",children:[d&&i.jsxs(i.Fragment,{children:[i.jsx(KGe,{collection:s,onEdit:t}),i.jsx("hr",{className:"my-sm"})]}),i.jsx(cue,{collection:s,onSourcesEdit:n}),i.jsx("hr",{className:"my-sm"}),i.jsx(YGe,{collection:s,onSourcesEdit:n})]}):null});fue.displayName="SpaceContext";const mue=A.memo(({closeModal:e,isOpen:t,collectionSlug:n})=>{const r="space-context-modal",s=Q(),{openModal:a}=vt(),{collection:o}=kl({collectionSlug:n,reason:r}),{isUserAtLeastWriter:l,isUserAtLeastReader:c}=Dh({reason:r,collectionSlugOverride:n}),u=mt(),d=f.useCallback(()=>{if(n){const g=["get_collection",{collection_slug:n.slice(-22)}];u.invalidateQueries({queryKey:g})}e()},[e,n,u]),m=f.useCallback(()=>{o&&a("spaceSettings",{existingSpace:o})},[o,a]),p=f.useCallback(g=>{o&&a("spaceUploadFilesModal",{initialTab:g,collectionSlug:n})},[o,n,a]),h=f.useMemo(()=>i.jsx(L,{variant:"section-title",className:"px-sm",children:s.formatMessage({defaultMessage:"Context",id:"V2qutIKrxy"})}),[s]);return i.jsx(Xt,{variant:"side-sheet",isOpen:t,onClose:d,includeBlur:!1,titleContent:h,modalClassname:"!min-w-[365px] !w-[25vw]",closeButtonClassname:"right-sm absolute",fixedTitle:!0,children:i.jsx(fue,{collectionSlug:n,handleSpaceEdit:l?m:void 0,handleSourcesEdit:c?p:void 0})})});mue.displayName="SpaceContextModal";const QGe=({children:e,title:t,handleClose:n,experimentalImageDesign:r})=>{const{image:s,imageAlt:a}=r;return i.jsx(z,{variant:"background",className:"max-w-[400px] overflow-hidden rounded-xl md:flex md:max-w-[960px]",children:i.jsxs(z,{variant:"subtler",className:"inset-0 md:flex",children:[i.jsx("div",{className:"md:w-[55%]",children:i.jsx("img",{src:s,alt:a,className:"md:object-cover"})}),i.jsxs("div",{className:"p-lg md:p-xl relative flex flex-col md:w-[45%]",children:[i.jsx(jS,{testId:"close-modal",variant:"common",size:"small",onClick:n}),i.jsx("div",{className:"mb-lg grow",children:i.jsx(L,{color:"default",variant:"page-title",className:"font-editorial my-sm text-center text-[2rem] font-light leading-none tracking-tight",children:t})}),e]})]})})};let pue=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function XGe(e,t){const n=xG(e),r=xG(t);return n.major>r.major?!0:n.major<r.major?!1:n.minor>r.minor?!0:n.minor<r.minor?!1:n.patch>r.patch?!0:!(n.patch<r.patch)}function xG(e){const[t,n,r]=e.split(".").map(Number);return{major:t,minor:n,patch:r}}function ZGe(e){return XGe(hue(),e)}function Qy(e,t){return ZGe(t)?!0:(console.warn(`[todesktop-client] ${e} not called. ${e} was introduced in ${t}. You are running version ${hue()}.`),!1)}const hue=()=>typeof window.todesktop=="object"&&window.todesktop.desktopifyVersion,oc=typeof window<"u"&&window.todesktop,JGe=e=>async(t,n)=>{const r=pue(),s=t==="*"?Object.keys(e):[t];for(const o of s){const l=e[o];oc?.on(l,n,r)}const a=gue(e);return async()=>a(t,n,r)},eqe=e=>async(t,n)=>{const r=pue(),s=t==="*"?Object.keys(e):[t];for(const o of s){const l=e[o];oc?.on(l,n,r)}const a=gue(e);return async()=>a(t,n,r)},gue=e=>(t,n,r)=>{const s=t==="*"?Object.keys(e):[t];for(const a of s){const o=e[a];oc?.off(o,n,r)}};function tqe(e,t){const n={package:{name:e,version:t},invoke:{version:"1.0.0"}};function r(o){const l={metadata:n,payload:{command:o}};return window.todesktop.invoke(l)}function s(o){const l={metadata:n,payload:{command:Object.assign(Object.assign({},o),{method:":new"})}};return window.todesktop.invoke(l)}function a(o){if(Qy("releaseMemory","4.6.0")){if(!o?.length){console.log("No memory references to release");return}return window.todesktop.releaseMemory(o)}}return{invoke:r,construct:s,releaseMemory:a}}const{invoke:Ma,construct:yue}=tqe("client-core","1.0.0-dev"),nqe={openProtocolURL:"open-protocol-url"},rqe=eqe(nqe);var ik;const lk=typeof window<"u"&&window.todesktop,sqe=(e,t)=>{const n=async(a,o,{ref:l,preventDefault:c}={})=>{if(t&&!Qy(`${e} addEventListener`,t))return;const u=await Ma({instanceRef:l,namespace:e,eventName:a,eventOptions:{preventDefault:c}});return window.todesktop.on(u,(d,...m)=>{if(cqe(m[0])){const[,...p]=m;return o(...p)}else return o(...m)}),()=>r(a,{eventId:u,ref:l})},r=async(a,...o)=>{const{eventId:l,ref:c}=o[0]||{};t&&!Qy(`${e} removeEventListener`,t)||(await Ma({instanceRef:c,namespace:e,eventName:a,eventId:l}),window.todesktop.off(l))};return{removeAllListeners:async(a,{ref:o}={})=>{t&&!Qy(`${e} removeAllListeners`,t)||(await Ma({instanceRef:o,namespace:e,method:"removeAllListeners",args:[a]}),window.todesktop.off(a))},on:n}};function aqe(e){console.warn(`[todesktop-client] ${e} is a legacy event and may be removed in future.
        Contact support or look through our typescript files to find a suitable replacement.`)}function oqe(e,t){const n=e[0],r=n in t;return r&&aqe(n),r}const iqe=(e,t)=>oqe(e,t),lqe=(e,t)=>{const n=sqe(t),r=(...s)=>iqe(s,e)?JGe(e)(...s):n.on(...s);return{removeAllListeners:n.removeAllListeners,on:r}};(ik=lk?.env)===null||ik===void 0||ik.NODE_ENV;const cqe=e=>uqe(e)&&"preventDefault"in e&&"sender"in e,uqe=e=>e===null?!1:typeof e=="function"||typeof e=="object";async function dqe(e,t){return window.todesktop.shortcut.register(e,t)}async function ck(e){return window.todesktop.shortcut.unregister(e)}async function fqe(e){return yue({namespace:"BrowserWindow",args:[e]})}async function mqe({ref:e,viewRef:t}){return Ma({instanceRef:e,namespace:"BrowserWindow",method:"setBrowserView",args:[t]})}async function pqe({ref:e}={}){return Ma({instanceRef:e,namespace:"BrowserWindow",method:"getSize",args:[]})}async function XP({ref:e}={}){return Ma({instanceRef:e,namespace:"BrowserWindow",method:"focus",args:[]})}async function HA({ref:e}={}){return Ma({instanceRef:e,namespace:"BrowserWindow",method:"isVisible",args:[]})}async function hqe({ref:e}={}){return Ma({instanceRef:e,namespace:"BrowserWindow",method:"hide",args:[]})}async function ZP({ref:e}={}){return Ma({instanceRef:e,namespace:"BrowserWindow",method:"show",args:[]})}async function gqe({ref:e}={}){return await Ma({instanceRef:e,namespace:"BrowserWindow",property:"webContents"})}async function yqe({ref:e}={},...t){return Ma({instanceRef:e,namespace:"BrowserWindow",method:"setPosition",args:t})}const vqe={enterFullscreen:"window.enter-full-screen",exitFullscreen:"window.leave-full-screen"},vue=lqe(vqe,"BrowserWindow"),vy=vue.on,zA=vue.removeAllListeners;async function bG({id:e}){if(Qy(`${_G}:retrieve`,"4.18.0"))return window.todesktop[_G]({action:"retrieve",payload:{id:e}})}const _G="objectStore";async function o2(e){return window.todesktop.contents.openUrlInBrowser(e)}async function xqe(){return Ma({namespace:"screen",method:"getCursorScreenPoint",args:[]})}async function bqe(e){return Ma({namespace:"screen",method:"getDisplayNearestPoint",args:[e]})}async function _qe(e){return yue({namespace:"BrowserView",args:[e]})}async function wqe({ref:e},...t){return Ma({instanceRef:e,namespace:"WebContents",method:"loadURL",args:t})}const Cqe="pkce_verifier",Sqe=5/(24*60),Eqe=128,Mqe=e=>{const t=Math.ceil(e*.75),n=new Uint8Array(t);return crypto.getRandomValues(n),btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"").slice(0,e)},kqe=async e=>{const n=new TextEncoder().encode(e);try{let r;typeof window<"u"&&window.crypto?.subtle?r=await window.crypto.subtle.digest("SHA-256",n):r=new TextEncoder().encode(e);const s=Array.from(new Uint8Array(r)),a=String.fromCharCode(...s);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw ee.error("Failed to generate code challenge: "+r),new Error("Failed to generate code challenge: "+r)}},Tqe=e=>{Qt(Cqe,e,{secure:!0,sameSite:"Lax",expires:Sqe,path:"/"})},wG=async()=>{const e=Mqe(Eqe);return Tqe(e),kqe(e)},uk={cacheName:{prefix:"pplx",suffix:"v2",runtime:"runtime"}},Nqe=[uk.cacheName.prefix,uk.cacheName.runtime,uk.cacheName.suffix].join("-");async function CG(){const e=Sa();if("serviceWorker"in navigator){const{Workbox:t}=await ae(async()=>{const{Workbox:s}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:s}},[]),n=new URL("/service-worker.js",window.location.origin);e.version&&n.searchParams.set("v",e.version);const r=new t(n.toString());try{await r.register()}catch(s){ee.error("Error registering service worker",s)}}}async function Aqe(){"serviceWorker"in navigator&&await navigator.serviceWorker.getRegistrations().then(e=>Promise.all(e.map(t=>t.unregister())))}async function iE(){if("serviceWorker"in navigator){await caches.delete(Nqe);return}}const xy=async(...e)=>(await iE(),Xv.signIn(...e)),jqe=async({email:e,reason:t})=>{let n=null;try{n=await cle({email:e,reason:t})}catch(r){return ee.log(r),null}return n?.workos_org_id??null},Rqe=async({email:e,reason:t})=>{let n=null;try{n=await cle({email:e,reason:t})}catch(r){return ee.log(r),null}return n?.force_sso??!1},Iqe=({email:e,onError:t,onClose:n,redirectUrl:r,reason:s})=>{const{$t:a}=Q(),{trackEvent:o}=Me(),{device:{isWindowsApp:l}}=Et(),c=_t(),{locale:u}=Q(),d=f.useMemo(()=>e.length>0&&e.includes("@")&&e.includes(".")&&e.indexOf("@")<e.lastIndexOf(".")&&e.indexOf("@")>0,[e]),m=f.useCallback(async y=>{o("login with third party clicked",{thirdParty:y});const v=window.location.origin;if(l){const x=await wG(),b=`${v}/auth/${Uw}/${y}?code_challenge=${x}&desktopRedirect=${encodeURIComponent(r)}&client_id=${XW}`;return o2(b),b}return await xy(y,{callbackUrl:r})},[o,r,l]),p=f.useCallback(async()=>{const y=await jqe({email:e,reason:s});if(!y){t(`SSO not available for email ${e}`);return}if(n(),l){const v=window.location.origin,x=await wG(),b=`${v}/auth/${Uw}/workos?code_challenge=${x}&desktopRedirect=${r}&organization=${y}&login_hint=${e}&client_id=${XW}`;o2(b);return}await xy("workos",{callbackUrl:r},{organization:y,login_hint:e})},[e,n,t,r,l,s]),h=f.useCallback(async()=>{const y=e?.toLowerCase();if(await Rqe({email:y,reason:s})){await p();return}const x=yBe({redirect:r});o("login with email clicked",{email:y});let b=`${x}#locale=${u}`;l&&(b=`${x}?windows-app-redirect-token=${U7e}#locale=${u}`);const _=await xy("email",{email:y,callbackUrl:b,redirect:!1,useNumericOtp:!0});if(_?.ok){e4(`email request POST successful for ${y}`);const w=encodeURIComponent(y),C=encodeURIComponent(x),S=`/auth/verify-request?email=${w}&redirectUrl=${C}`;c.push(S)}else if(_?.status===429)e4(`email sign in rate limited for ${y}`),c.push("/auth/email-rate-limited");else{const w=`email sign in generic error: ${y} Response(status=${_?.status}, error=${_?.error}, ok=${_?.ok}, url=${_?.url})`;e4(w),ee.error(new Error(w)),t(a({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"}))}},[e,r,c,o,u,p,t,a,l,s]),g=f.useCallback(async(y,v)=>{const x={callbackUrl:r};switch(y){case"basic":x.pro=!1;break;case"pro":x.pro=!0;break;case"enterpriseMember":x.enterprise_member=!0;break;case"enterpriseAdmin":x.enterprise_admin=!0;break;case"enterpriseBillingAdmin":x.enterprise_billing_admin=!0;break;case"script":x.script=!0;break;case"frontendTest":x.fe_test=!0;break;case"example.com":x.email_handle=v??"pplx-dev";break}return await xy("devlogin",x)},[r]);return f.useMemo(()=>({emailIsValid:d,handleThirdPartySignIn:m,handleMagicLinkEmailSignIn:h,handleSSOSignIn:p,handleDevSignIn:g}),[d,g,h,p,m])},i2=(e,t)=>e==="highlightPrimary"?t?"primary":"common":e==="highlightBackToSchool"?t?"orange":"common":"inverted",Pqe=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=Q();return i.jsx(ge,{fullWidth:!0,leadingComponent:i.jsx(GMe,{className:"left-two relative -top-px",size:18}),extraCSS:"h-11",variant:i2(t,!1),text:n({defaultMessage:"Continue with {apple}",id:"Iy1YQBJ5Tk"},{apple:"Apple"}),onClick:()=>e("apple")})},Oqe=({onClick:e})=>{const{$t:t}=Q();return i.jsx(Te,{fullWidth:!0,variant:"noBackground",extraCSS:"border-none text-inverse",text:t({defaultMessage:"Close",id:"rbrahOGMC3"}),onClick:e})},Lqe=({autoFocus:e=!1,isSSO:t,email:n,emailInFlight:r,handleEmailClick:s,inputRef:a,handleKeyDown:o,setEmail:l,error:c,setError:u,placeholder:d,loginButtonsStyle:m})=>{const{$t:p}=Q(),{isMobileUserAgent:h}=ye(),g="regular",y="w-full h-11",v=U("h-11 border-none rounded-lg","!bg-offsetPlus");return i.jsxs(z,{className:"space-y-xs",children:[i.jsx(ra,{autoFocus:e,isMobileUserAgent:h,type:"email",name:"email",className:v,pill:!1,errorText:c,placeholder:d||p(t?{defaultMessage:"Enter your work email",id:"jAgre55Zsn"}:{defaultMessage:"Enter your email",id:"5MDGuMLnEB"}),value:n,onKeyDown:o,onChange:x=>{u(""),l(x)},ref:a,disabled:r,errorPlacement:Ld.LABEL}),i.jsx("div",{className:"flex justify-center",children:t?i.jsx(ge,{chevron:!0,chevronIcon:_r,size:g,text:p(t?{defaultMessage:"Continue with SSO",id:"qank7+0V6w"}:{defaultMessage:"Continue with email",id:"l6yCDglZqT"}),extraCSS:U(y,"mt-xs"),variant:i2(m,!0),onClick:s,isLoading:r,disabled:n===""||r}):i.jsx(ge,{size:g,text:p({defaultMessage:"Continue with email",id:"l6yCDglZqT"}),onClick:s,isLoading:r,disabled:n===""||r,extraCSS:"w-full h-11 mt-xs",variant:i2(m,!0)})})]})},Dqe=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=Q();return i.jsx(ge,{fullWidth:!0,leadingComponent:i.jsx(qMe,{size:18}),text:n({defaultMessage:"Continue with {google}",id:"Fc2NqN6N7A"},{google:"Google"}),onClick:()=>e("google"),extraCSS:"h-11",variant:i2(t,!0)})},Fqe=({internalItems:e,isMobileStyle:t})=>{const{$t:n}=Q();return i.jsx(z,{children:i.jsx(Jt,{items:e.map(r=>({type:"default",...r})),isMobileStyle:t,children:i.jsx(ge,{icon:KMe,text:n({defaultMessage:"Internal Login",id:"waIOTqSbxu"}),chevron:!0,fullWidth:!0,variant:"rejected"})})})},Uqe=({onClick:e})=>{const{$t:t}=Q();return i.jsx(Te,{size:"tiny",variant:"noBackground",text:t({defaultMessage:"Single sign-on (SSO)",id:"TI79WvQ5kU"}),onClick:e})},xue={SIDEBAR:"sidebar",LOGIN_MODAL:"login-modal"},Bs={ANSWER_MODE_TABS_ROOT:"answer-mode-tabs",ANSWER_MODE_TABS:{ANSWER:e=>`answer-mode-tabs-tab-${e}`,SEARCH:"answer-mode-tabs-tab-search",RESEARCH:"answer-mode-tabs-tab-research",SHOPPING:"answer-mode-tabs-tab-shopping",ASSETS:"answer-mode-tabs-tab-assets",JOBS:"answer-mode-tabs-tab-jobs",HOTELS:"answer-mode-tabs-tab-hotels",PLACES:"answer-mode-tabs-tab-places",IMAGES:"answer-mode-tabs-tab-images",VIDEOS:"answer-mode-tabs-tab-videos",SOURCES:"answer-mode-tabs-tab-sources",APPS:"answer-mode-tabs-tab-apps",TASKS:"answer-mode-tabs-tab-tasks",CHAT:"answer-mode-tabs-tab-chat"},ANSWER_MODE_JOBS:{FILTERS_ROOT:"jobs-filters"},ANSWER_MODE_VIDEO:{VIDEO_PREVIEW:"jobs-video-preview"},ANSWER_MODE_IMAGE:{IMAGE_PREVIEW:"jobs-image-preview"},ANSWER_MODE_SHOPPING:{SHOPPING_ITEM:"shopping-item"},ANSWER_MODE_PLACES:{PLACE_ITEM:"place-item"},ANSWER_MODE_HOTELS:{HOTEL_ITEM:"hotel-item"}},Bqe=e=>e?.includes("Chrome")??!1,bue=e=>(e?.includes("Mobile")&&!e?.includes("iPad"))??!1,Vqe=e=>e?.includes("Android")??!1,Wqe=e=>(e?.includes("iPhone")||e?.includes("iPad"))??!1,$qe=e=>(e?.includes("Macintosh")||e?.includes("iPad"))??!1,Hqe=e=>e?.includes("Mobile Safari")??!1,zqe=e=>e?.includes("Firefox")??!1,b1=e=>e?.includes("WindowsApp")??!1,Gqe=e=>e?.includes("Windows")??!1,qqe=e=>e?.includes("FBAN")||e?.includes("FBAV")||e?.includes("Instagram"),Kqe=e=>e?.includes("SamsungBrowser")??!1,Yqe=e=>(e.includes("wv")||e.includes("version/"))??!1,Qqe=e=>/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e),Xqe=e=>Yqe(e)||Qqe(e),Zqe=({autoFocus:e,showInternal:t,disallowedMethods:n,className:r,email:s,setEmail:a,error:o,onClose:l,setError:c,handleEmailClick:u,handleKeyDown:d,emailInFlight:m,handleThirdPartySignIn:p,isSSO:h,setIsSSO:g,internalItems:y,envHasDevLogins:v,isMobileStyle:x,placeholder:b,showCloseButton:_,loginButtonsStyle:w})=>{const C=A.useRef(null),S=navigator.userAgent,E=!n?.includes("google")&&!Xqe(S),M=!n?.includes("apple"),k=!h&&!n?.includes("sso"),T=f.useMemo(()=>[...E?["google"]:[],...M?["apple"]:[],...t&&v?["internal"]:[]],[E,M,t,v]),j=f.useMemo(()=>({google:i.jsx(Dqe,{handleThirdPartySignIn:p,loginButtonsStyle:w}),apple:i.jsx(Pqe,{handleThirdPartySignIn:p,loginButtonsStyle:w}),internal:i.jsx(Fqe,{internalItems:y,isMobileStyle:x})}),[p,y,x,w]),R=f.useCallback(()=>{c(""),g(!0)},[c,g]);return i.jsxs("div",{className:r,"data-testid":xue.LOGIN_MODAL,children:[h&&i.jsx("div",{className:"absolute left-0 top-0 z-40",children:i.jsx(Te,{size:"small",icon:AR,onClick:()=>{g(!1),c(void 0)}})}),i.jsxs("div",{className:"mx-auto max-w-sm",children:[!h&&i.jsxs(i.Fragment,{children:[T.length>0&&i.jsx("div",{className:"space-y-sm mx-auto w-[90%]",children:T.map(O=>i.jsx(A.Fragment,{children:j[O]},O))}),T.length>0&&i.jsx(z,{className:"mx-auto my-4 h-0 w-[90%] shrink-0 border-t"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"mx-auto w-[90%]",children:i.jsx(Lqe,{autoFocus:e||h,isSSO:h,email:s,emailInFlight:m,handleEmailClick:u,inputRef:C,handleKeyDown:d,setError:c,setEmail:a,error:o,placeholder:b,loginButtonsStyle:w})}),k&&i.jsx("div",{className:"mt-md flex justify-center",children:i.jsx(Uqe,{onClick:R})}),_&&i.jsxs(i.Fragment,{children:[i.jsx(z,{className:"my-4 h-0 w-full shrink-0"}),i.jsx(Oqe,{onClick:l})]})]})]})]})},_ue="comet-sidecar-threads-by-id",rn=()=>!!Fo(),JP=()=>{const e=Fo();return!!(e?.android_version||e?.ios_version)},Jqe=e=>!(e.defaultPrevented||!rn()||e.ctrlKey||e.metaKey),eKe=e=>{const t=Ae.getItem(_ue);if(t){const n=JSON.parse(t);for(const[r,{url:s,updatedAt:a}]of Object.entries(n))e.getState().actions.setSidecarUrlById(r,s,a)}},SG=e=>{const t=e.getState().sidecarUrlById,n={};t.forEach((r,s)=>{s!=="-1"&&(r.url==="/sidecar/"||r.url==="/sidecar"||(n[s]={url:r.url,updatedAt:r.updatedAt}))}),Ae.setItem(_ue,JSON.stringify(n))},tKe=(e,t)=>{const n=e.getState().sidecarSourceTab,r=ev(n.tabId,n.secondaryTab?.tabId),s=e.getState().sidecarUrlById.get(r)?.url;!s||new URL(window.location.href).pathname===s||t.replace(s,"Sidecar thread restored from cache")},tv=({autoFocus:e=!1,onClose:t=Rn,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,preEnteredEmail:o,placeholder:l,showCloseButton:c=!0,loginButtonsStyle:u="allInverted"})=>{const d="login-modal-inner",[m,p]=A.useState(o??""),[h,g]=A.useState(),[y,v]=A.useState(!1),{emailIsValid:x,handleThirdPartySignIn:b,handleMagicLinkEmailSignIn:_,handleSSOSignIn:w,handleDevSignIn:C}=Iqe({email:m,onClose:t,redirectUrl:n??"/",onError:g,reason:d}),{env:{envHasDevLogins:S}}=Et(),{isMobileStyle:E}=ye(),{$t:M}=Q(),{getEppoTypedVariation:k}=ju(),[T,j]=A.useState(!1),{closeModal:R}=vt(),O=f.useCallback(async()=>{if(!rn())return!1;try{if(await k((F,...B)=>F.getBooleanAssignment(...B),{flag:"comet-enterprise-login-block",defaultValue:!1,extraAttributes:{email:m},subjectType:"visitor_id"}))return g(M({defaultMessage:"Your organization has not approved you to use Comet with this account.",id:"Jz4Ffdr9RN"})),!0}catch(D){ee.warn("Failed to check comet enterprise login block:",D)}return!1},[m,k,M]),P=f.useCallback(async()=>{if(!x){g(M({defaultMessage:"Please enter a valid email address",id:"oLpv295HWX"}));return}if(!(y||await O())){if(v(!0),m.endsWith("@example.com")&&S&&!T){t(),await C("example.com",m.split("@")[0]),v(!1);return}T?await w():(await _(),await R()),v(!1)}},[x,y,m,S,T,O,M,t,C,w,_,R]),N=f.useCallback(D=>{So.isEnterKeyWithoutShift(D)&&P()},[P]),I=[{icon:kte,text:"Basic",onClick:()=>C("basic")},{icon:jR,text:"Pro",onClick:()=>C("pro")},{icon:bi,text:"Enterprise Member",onMouseDown:D=>D.preventDefault(),onClick:()=>C("enterpriseMember")},{icon:wN,text:"Enterprise Admin",onMouseDown:D=>D.preventDefault(),onClick:()=>C("enterpriseAdmin")},{icon:wN,text:"Enterprise Billing Admin",onMouseDown:D=>D.preventDefault(),onClick:()=>C("enterpriseBillingAdmin")},{icon:xw,text:"Script Default User",onClick:()=>C("script")},{icon:xw,text:"FE Test User",onClick:()=>C("frontendTest")}];return i.jsx(Zqe,{autoFocus:e,onClose:t,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,email:m,setEmail:p,handleEmailClick:P,handleKeyDown:N,error:h,setError:g,emailInFlight:y,setEmailInFlight:v,emailIsValid:x,handleThirdPartySignIn:b,isSSO:T,setIsSSO:j,handleDevSignIn:C,internalItems:I,envHasDevLogins:S,isMobileStyle:E,placeholder:l,showCloseButton:c,loginButtonsStyle:u})},eO=A.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=le,variant:o="centered-sheet",onClose:l,noPadding:c,onIsClosing:u,footerContent:d,overlayVariant:m,titleLeadingButtonProps:p,showCloseButton:h=!0,...g})=>{const[y,v]=f.useState(!1),[x,b]=f.useState(!1),_=f.useMemo(()=>U("shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"bg-none dark:bg-none bg-backdrop/25 backdrop-blur-sm":o==="full-sheet-blurred","bg-gradient-to-t from-base from-45% to-transparent":o==="bottom-sheet-gradient","w-screen md:h-screen h-[100dvh] flex flex-col":o==="full-sheet-blurred"||o==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0 bg-none dark:bg-none bg-backdrop/70 backdrop-blur-md":o==="bottom-sheet-blurred","flex items-center justify-end w-screen h-[100dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":o==="bottom-sheet-gradient","animate-in slide-in-from-bottom ease-in":o==="bottom-sheet-blurred"&&!x,"animate-out slide-out-to-bottom ease-out":o==="bottom-sheet-blurred"&&x,"animate-in fade-in ease-in duration-300":o==="bottom-sheet-gradient"&&!x,"animate-out fade-out ease-out duration-300":o==="bottom-sheet-gradient"&&x,"bg-base":o==="full-sheet","bg-base rounded-lg md:min-w-[600px] max-w-screen-lg max-h-[100vh]":o==="centered-sheet","bg-base rounded-2xl max-w-[90dvw] max-h-[90dvh]":o==="inset-centered-sheet"}),[o,x]),w=f.useMemo(()=>U("p-md grow flex flex-col",{"justify-center":o!=="bottom-sheet-gradient","justify-end":o==="bottom-sheet-gradient","md:pt-lg":e===void 0,"md:pb-lg":a?.length===0,"px-0":c,"py-0":c}),[a?.length,c,e,o]),C=f.useMemo(()=>a.map(({text:j,onClick:R,variant:O,disabled:P,isLoading:N,testId:I,icon:D},F)=>{const B={key:F,text:j,chevron:D!==void 0,disabled:P,isLoading:N,onClick:R,testId:I,chevronIcon:D};return O?f.createElement(ge,{fullWidthMobile:!0,variant:O,...B,key:B.key}):f.createElement(ge,{fullWidthMobile:!0,...B,key:B.key})}),[a]),S=f.useCallback(()=>{u?.(),b(!0)},[b,u]),E=f.useCallback(()=>{b(!1),v(!1),l?.()},[b,v,l]),M=f.useCallback(()=>{b(!1),v(!1),l?.()},[v,b,l]),k=f.useMemo(()=>{switch(o){case"full-sheet-blurred":return"full-sheet";case"full-sheet":return"full-sheet";case"bottom-sheet-blurred":case"bottom-sheet-gradient":return"bottom-sheet";default:return"default"}},[o]),T=f.useMemo(()=>o==="bottom-sheet-blurred"||o==="bottom-sheet-gradient",[o]);return i.jsx(Sh,{transparent:T,canOutsideClickClose:!0,childVariant:k,shouldClose:y,onIsClosing:S,onClose:E,variant:m,...g,children:i.jsx("div",{children:i.jsxs("div",{className:_,children:[i.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),i.jsxs(z,{className:U("flex h-full grow flex-col rounded-none md:w-[unset] md:grow-[unset]",o==="inset-centered-sheet"?"w-[90dvw]":"w-screen",{"border-t":o!=="bottom-sheet-gradient"}),children:[i.jsxs(z,{variant:"transparent",className:U("px-md py-sm md:py-md sticky top-0 z-[22] w-full shrink-0",{"border-b":e&&!r,"text-center":r,"h-8":!e&&h}),children:[i.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[p&&i.jsx(Te,{extraCSS:"-ml-sm",...p,size:"small",variant:"common"}),e&&i.jsx(L,{variant:"page-title",className:U("line-clamp-1 md:line-clamp-2",{"pt-lg grow":r,"mr-lg":!r}),children:e}),!T&&o!=="full-sheet-blurred"&&h&&i.jsx(jS,{onClick:M,testId:"close-modal"})]}),t&&i.jsx(L,{variant:"base",color:"light",className:U("mt-xs line-clamp-3",n),children:t})]}),i.jsx("div",{className:w,children:s}),(C?.length>0||d)&&i.jsxs(z,{variant:"background",className:U("gap-x-sm p-sm pb-md md:pb-sm sticky bottom-0 z-10 flex items-center border-t",{"justify-end":!d},{"justify-between":d}),children:[d,C]})]})]})})})});eO.displayName="SheetModal";const GA=e=>{const t=Number(e);return isNaN(t)?(console.log(`formatNumber number failed on: ${e}`),"0"):t.toLocaleString("en-US")},ja=()=>dr(),XDt={status:"PENDING",uuid:ja()},ZDt=(e,t,n)=>{if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);return r.length==s.length&&r.every(a=>n?n(e[a],t[a]):e[a]===t[a])},l2=(e,t)=>{const n=new URL(e);return n.searchParams.delete("source"),n.searchParams.delete("s"),t&&(n.hash=t),n.searchParams.sort(),n.href};function wue(e){return e.charAt(0).toUpperCase()+e.slice(1)}function nKe(e,t){try{const n=new Date(e.replace(/-/g,"/")).toLocaleString(t,{weekday:"long",hour:"numeric",minute:"numeric",hour12:!0});return wue(n)}catch(n){console.log(n)}return null}function tO(e,t,n="short"){const s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(e.toLowerCase());if(s===-1)return"";const a=new Date,o=new Date(a.setDate(a.getDate()-a.getDay()+s)),l=Intl.DateTimeFormat(t,{weekday:n}).format(o);return wue(l)}function rKe(e){return e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:12})}function lE(e,t,n){const r=new URL(e),s=r.searchParams;return s.set(t,n),r.search=s.toString(),r.toString()}const JDt=e=>{let t;if(typeof e=="string"){if(t=parseFloat(e),isNaN(t))throw new Error("Invalid input: not a number")}else if(typeof e=="number")t=e;else throw new Error("Invalid input: not a string or number");return t.toLocaleString("en-US")},sKe=/\[(\d{1,3})(,\s*\{ts:\d+\})?\]/g,aKe=/(\n*^(("""+|'''+|```+)[A-Za-z0-9]*|#+ .*)$|^- |\*\*|\$\$|\||`|[-|]{3,})/gm;function oKe(e){return e.replace(sKe,"")}function iKe(e){return e.replace(aKe,"")}function jp(e,t){const n=oKe(iKe(e)).trim();if(n.length<=t)return n;{const r=n.slice(0,t).trim(),s=r.lastIndexOf(" ");return s*2>t&&s<t-1?r.slice(0,s)+"...":r+"..."}}const Cue=A.memo(({pitchMessage:e,origin:t,isOpen:n,closeModal:r,closeCallback:s,experimentalImageDesign:a,sheetModalDesign:o,overrideRedirectUrl:l,disallowedMethods:c,loginButtonsStyle:u})=>{const{$t:d}=Q(),m=Qe(),[p,h]=f.useState(""),{trackEvent:g}=Me(),{isMobileStyle:y}=ye(),v=e?.title??d({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),[x]=f.useState(!1),b=f.useCallback(()=>{r(),s?.()},[r,s]);return f.useEffect(()=>{n&&g("login modal opened",{origin:t})},[n,t,g]),f.useEffect(()=>{!m&&t&&h(lE(l??window.location.href,Sl,t))},[m,t,l]),i.jsx(i.Fragment,{children:a?i.jsx(Xt,{isOpen:n,onClose:b,centerTitle:!!e,actionList:le,variant:"hide-chrome",children:i.jsx(QGe,{title:v,handleClose:b,experimentalImageDesign:a,children:i.jsx(tv,{autoFocus:!0,onClose:b,redirectUrl:p,disallowedMethods:c,loginButtonsStyle:u,showCloseButton:!1})})}):i.jsx(eO,{isOpen:n,onClose:b,shouldClose:x,centerTitle:!!e,actionList:le,variant:o,children:i.jsxs("div",{onClick:_=>_.stopPropagation(),children:[i.jsxs("div",{className:"px-lg mx-auto max-w-sm md:max-w-lg",children:[i.jsx(L,{variant:"page-title",className:"font-editorial text-pretty text-center !font-light !leading-snug tracking-tight md:text-4xl",children:e?.title??i.jsx(pe,{defaultMessage:"Sign up below to <italic>unlock</italic> the full {br} potential of Perplexity",id:"exZDTeIaG0",values:{italic:_=>i.jsx("span",{className:"italic",children:_}),br:i.jsx("br",{})}})}),i.jsx(L,{className:"mt-md text-pretty text-center",children:e?.description?e.description:i.jsx(pe,{defaultMessage:"By continuing, you agree to our {privacyPolicyLink}.",id:"cE5rUKm7fb",values:{privacyPolicyLink:i.jsx(Ye,{className:"underline",target:"_blank",href:"https://www.perplexity.ai/hub/legal/privacy-policy",children:i.jsx(pe,{defaultMessage:"privacy policy",id:"LIDXd2UwSl"})})}})}),i.jsx("div",{className:"mt-lg"})]}),i.jsx(tv,{autoFocus:!y,onClose:b,redirectUrl:p,showInternal:!0,disallowedMethods:c,loginButtonsStyle:u})]})})})});Cue.displayName="LoginModal";function lKe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qA(){return qA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qA.apply(this,arguments)}function EG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function MG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EG(Object(n),!0).forEach(function(r){lKe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EG(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cKe(e,t){if(e==null)return{};var n,r,s=function(o,l){if(o==null)return{};var c,u,d={},m=Object.keys(o);for(u=0;u<m.length;u++)c=m[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function qg(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var s=[],a=!0,o=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done)&&(s.push(c.value),!r||s.length!==r);a=!0);}catch(d){o=!0,l=d}finally{try{a||u.return==null||u.return()}finally{if(o)throw l}}return s}}(e,t)||function(n,r){if(n){if(typeof n=="string")return kG(n,r);var s=Object.prototype.toString.call(n).slice(8,-1);if(s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set")return Array.from(n);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return kG(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kG(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var by={},TG=function(e){var t=document.querySelector('script[src="'.concat(e,'"]'));if(t)return by[e]={loading:!1,error:null,scriptEl:t}},NG=typeof window<"u"&&window.document!==void 0,AG=function(e){return e?.linkToken!==void 0},Sue=function(e){var t=qA({},e),n=function(d){var m=d.src,p=d.checkForExisting,h=p!==void 0&&p,g=cKe(d,["src","checkForExisting"]),y=m?by[m]:void 0;!y&&h&&m&&NG&&(y=TG(m));var v=qg(f.useState(y?y.loading:!!m),2),x=v[0],b=v[1],_=qg(f.useState(y?y.error:null),2),w=_[0],C=_[1],S=qg(f.useState(!1),2),E=S[0],M=S[1];return f.useEffect(function(){if(NG&&m&&!E&&!w){var k;!(y=by[m])&&h&&(y=TG(m)),y?k=y.scriptEl:((k=document.createElement("script")).src=m,Object.keys(g).forEach(function(R){k[R]===void 0?k.setAttribute(R,g[R]):k[R]=g[R]}),y=by[m]={loading:!0,error:null,scriptEl:k});var T=function(){y&&(y.loading=!1),b(!1),M(!0)},j=function(R){y&&(y.error=R),C(R)};return k.addEventListener("load",T),k.addEventListener("error",j),document.body.appendChild(k),function(){k.removeEventListener("load",T),k.removeEventListener("error",j),y&&y.loading&&(k.remove(),delete by[m])}}},[m]),[x,w]}({src:"https://ah-cdn.merge.dev/initialize.js",checkForExisting:!0}),r=qg(n,2),s=r[0],a=r[1],o=qg(f.useState(!1),2),l=o[0],c=o[1],u=!(typeof window>"u")&&!!window.AgentHandlerLink&&!s&&!a&&AG(t);return f.useEffect(function(){u&&window.AgentHandlerLink&&AG(t)&&window.AgentHandlerLink.initialize(MG(MG({},t),{},{onReady:function(){return c(!0)}}))},[u,t]),{open:f.useCallback(function(){window.AgentHandlerLink&&window.AgentHandlerLink.openLink(t)},[t]),isReady:l,error:a}};function uKe({reason:e}){const t=mt(),n=HS();return bt({mutationKey:["publishArticleMutation"],mutationFn:async({connectorName:r,connectionUUID:s,deleteFiles:a})=>{let o;return s&&!a?o=await M$e({connectionUUID:s,reason:e}):s&&a?o=await k$e({connectionUUID:s,reason:e}):o=await E$e({connectorName:r,reason:e}),o},onSettled:async()=>{await t.refetchQueries({queryKey:n})},onMutate:async({connectorName:r,connectionUUID:s})=>{t.setQueryData(n,a=>{if(!a)return a;const o=a.connectors.connectors.map(l=>l.name===r&&(!s||l.connection_uuid===s)?{...l,connected:!1}:l);return{...a,connectors:{connectors:o}}})}})}const nO=()=>{const{$t:e}=Q(),t=_t(),{createCollection:n,createCollectionForThread:r}=Fh({reason:"create-new-space"}),s=f.useCallback(()=>{const o=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});n({title:o,description:"",emoji:"",instructions:"",accessLevel:Ow,enableWebByDefault:!0,callback:l=>{t.push(`/spaces/${l.slug}`)}})},[n,e,t]),a=f.useCallback((o,l)=>{const c=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});r({title:c,description:"",emoji:"",instructions:"",accessLevel:Ow,enableWebByDefault:!0,entryUUID:o,frontendContextUUID:l,callback:u=>{t.push(`/spaces/${u.slug}`)}})},[r,e,t]);return f.useMemo(()=>({handleCreateNewSpace:s,handleCreateNewSpaceForThread:a}),[s,a])};function rO(){const{value:e}=At({flag:"spaces-creation-redesign",subjectType:"user_nextauth_id",defaultValue:!1});return e}const Eue=()=>{const{openModal:e}=vt(),{isMobileUserAgent:t}=ye(),n=JP(),r=f.useCallback(({origin:s,sheetModalVariant:a,closeCallback:o})=>{!t||n||e("installModal",{origin:s,sheetModalVariant:a,closeCallback:o})},[n,t,e]);return f.useMemo(()=>({openInstallUpsell:r}),[r])};var jG={};const Xn=({enabled:e})=>{const{openModal:t}=vt(),{keysRequiringRerender:n,removeKeyRequiringRerender:r}=ju(),{isMobileUserAgent:s}=ye(),a=Qe(),{openInstallUpsell:o}=Eue(),l=f.useCallback(({title:u,description:d,origin:m,image:p,imageAlt:h,closeCallback:g,loginButtonsStyle:y})=>{!e||a||jG.NEXT_PUBLIC_IS_SIDECAR_BUILD||t("loginModal",{pitchMessage:u?{title:u,description:d}:void 0,origin:m,experimentalImageDesign:{image:p,imageAlt:h},closeCallback:g,loginButtonsStyle:y})},[e,t,a]),c=f.useCallback(({title:u,description:d,origin:m,sheetModalVariant:p,closeCallback:h,overrideRedirectUrl:g,disallowedMethods:y,overrideMobileVariant:v=!1})=>{if(!e||a||jG.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;let x="full-sheet";(v||!s)&&p&&(x=p),t("loginModal",{pitchMessage:u?{title:u,description:d}:void 0,origin:m,sheetModalDesign:x,closeCallback:h,overrideRedirectUrl:g,disallowedMethods:y})},[e,s,t,a]);return f.useEffect(()=>{e&&(n.includes("visitor-gate")&&(s&&!fp()?o({origin:Ie.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:Ie.VISITOR_GATE,sheetModalVariant:"bottom-sheet-gradient"}),r("visitor-gate")),n.includes("visitor-gate-ii")&&(s&&!fp()?o({origin:Ie.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:Ie.VISITOR_GATE}),r("visitor-gate-ii")))},[e,c,n,r,s,o]),f.useMemo(()=>({openVisitorLoginUpsell:c,openVisitorLoginImageUpsell:l}),[l,c])};function dKe(e){const t=new Uint8Array(e);return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("")}async function fKe(e){const n=new TextEncoder().encode(e);return await crypto.subtle.digest("SHA-256",n)}async function mKe(e){const t=await fKe(e);return dKe(t)}const pKe=async({reason:e})=>{try{const{data:t,error:n}=await ne.POST("/rest/attribution/comet/session",e,{timeoutMs:Pe(),numRetries:1});if(n)throw n;return{success:t.success}}catch(t){return ee.error("Failed to start Comet session",t),{success:!1}}},hKe=async({eventName:e,reason:t})=>{try{const{data:n,error:r}=await ne.POST("/rest/attribution/comet/event/{event_name}",t,{timeoutMs:Pe(),params:{path:{event_name:e}}});if(r)throw r;return{success:n?.success??!1}}catch(n){return ee.error("Failed to send Comet event",n),{success:!1}}},Mue=f.createContext({sendQueryEventSingular:()=>Promise.resolve(),maybeSendNthQueryEventSingular:()=>Promise.resolve(),sendSubscribedEventSingular:()=>Promise.resolve(),sendSubscribedPayingEventSingular:()=>Promise.resolve(),sendAppDownloadClickedEventSingular:()=>Promise.resolve(),sendResurrectedActivationEventSingular:()=>Promise.resolve(),sendCometDownloadPageLoadEventSingular:()=>Promise.resolve(),sendCometDownloadPageSignInEventSingular:()=>Promise.resolve(),sendCometDownloadedEventSingular:()=>Promise.resolve(),sendCometDownloadButtonClickedEventSingular:()=>Promise.resolve(),sendCometWaitlistButtonClickedEventSingular:()=>Promise.resolve(),sendCometDownloadLinkEmailEventSingular:()=>Promise.resolve(),sendSubscribedMaxEventSingular:()=>Promise.resolve()}),RG={1:"activated",3:"true activated",5:"quality activated",10:"super activated"},IG={1:"first comet query",3:"third comet query"},gKe="ai.testing.perplexity",yKe="ai.perplexity",kue=async(e,t)=>{if(!e)return null;const n=new Date;n.setMilliseconds(0);const r=`${e}-${n.toISOString()}-${t}`;return await mKe(r)},vKe=async({productId:e,visitorId:t,userId:n})=>{const{SingularConfig:r,singularSdk:s}=await ae(async()=>{const{SingularConfig:c,singularSdk:u}=await import("./singular-sdk-CHVvA4e9.js").then(d=>d.s);return{SingularConfig:c,singularSdk:u}},[]),a=new r("perplexity_ai_039eb8fb","1e0179ca95965b57a3e91c1cf3049b64",e);n&&a.withCustomUserId(n),s.init(a);const o="initialized singular",l=await kue(t,o);return s.event(o,{visitorId:t,eventId:l}),s},xKe=({children:e})=>{const{session:t}=Ct(),n=Tn(Cw),{env:{isProduction:r,isStaging:s},device:{isMobile:a}}=Et(),o=f.useRef([]),l=f.useRef([]),c=Dt(),[u,d]=f.useState(void 0);f.useEffect(()=>{const g=t?.user?.id,y=r||s?yKe:gKe;n&&vKe({userId:g,productId:y,visitorId:n}).then(v=>{!v||(d({sdk:v}),!g||!Za())||yN()>1||pKe({reason:"comet attribution"})})},[r,s,t?.user?.id,n]);const m=f.useCallback(async(g,y)=>{if(!u){o.current.push({name:g,extraArguments:y});return}if(!n)return;const v=await kue(n,g),x={...y,visitorId:n,eventId:v,isMobile:a};l.current.includes(g)||(u.sdk.event(g,x),l.current.push(g))},[u,n,a]),p=f.useCallback(async({isCometBrowser:g})=>{const y=bR(),v=yN(),x=mte();y&&RG[y]&&await m(RG[y]),v&&IG[v]&&await m(IG[v]),g&&x===1&&hKe({eventName:"activated",reason:"comet attribution"})},[m]),h=f.useCallback(async g=>{await m("user sign in",{isNewUser:g}),t?.user?.id&&u&&u.sdk.login(t.user.id)},[t?.user?.id,u,m]);return f.useEffect(()=>{u&&o.current.length>0&&(o.current.filter((y,v,x)=>v===x.findIndex(b=>b.name===y.name)).forEach(({name:y,extraArguments:v})=>{m(y,v)}),o.current=[])},[u,m]),f.useEffect(()=>{if(c?.get(Sl)&&c?.get(KW)){const g=c?.get(KW)==="true";h(g),g?(m("new user sign in"),t?.user?.id&&u?.sdk.setMatchID(t.user.id)):m("existing user sign in"),Za()&&m("comet user sign in")}},[c,h,m,t?.user?.id,u?.sdk]),i.jsx(Mue.Provider,{value:f.useMemo(()=>({sendQueryEventSingular:()=>m("query submitted"),maybeSendNthQueryEventSingular:p,sendSubscribedEventSingular:()=>m("user subscribed"),sendSubscribedPayingEventSingular:()=>m("user subscribed paying"),sendAppDownloadClickedEventSingular:g=>m("app download button clicked",{origin:g}),sendResurrectedActivationEventSingular:()=>m("resurrected activated"),sendCometDownloadPageLoadEventSingular:g=>m(`${g} page loaded`),sendCometDownloadPageSignInEventSingular:g=>m(`${g} page signed in`),sendCometDownloadedEventSingular:()=>m("download-comet comet downloaded"),sendCometDownloadButtonClickedEventSingular:g=>m(`${g} download button clicked`),sendCometWaitlistButtonClickedEventSingular:g=>m(`${g} waitlist button clicked`),sendCometDownloadLinkEmailEventSingular:g=>m(`${g} send download link`),sendSubscribedMaxEventSingular:()=>m("user subscribed max")}),[m,p]),children:e})},sO=()=>{const e=f.useContext(Mue);if(!e)throw new Error("useSingularAttribution must be used within SingularAttributionContext");return e},bKe=(e,t)=>{const{fetchVariation:n}=sE({flag:"comet-download-success-message",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id",skip:!0});return f.useMemo(()=>({fetchVariation:n}),[n])};var _Ke={};const wKe=e=>{e=e??"mac_arm64";const t={channel:"stable",platform:e};e.includes("win")&&(t.mini="1");const n=new URLSearchParams(t),r=new URL(_Ke.NEXT_PUBLIC_COMET_DOWNLOAD_URL??"https://www.perplexity.ai/rest/browser/download");return r.search=n.toString(),r},eFt=async({reason:e})=>(await ne.POST("/rest/browser/invites/status",e,{params:{},timeoutMs:Kt.MEDIUM,numRetries:1})).data,Tue=async({reason:e})=>(await ne.GET("/rest/browser/invites/",e,{headers:{"content-type":"application/json"},timeoutMs:Pe()})).data??null,PG=async({reason:e})=>(await ne.POST("/rest/browser/invites/create",e,{timeoutMs:Kt.NONE,numRetries:1})).data,CKe=async({reason:e,inviteCode:t,email:n})=>(await ne.POST("/rest/browser/invites/send",e,{body:{recipient_email:n,invite_code:t},timeoutMs:Kt.MEDIUM,numRetries:1})).data,SKe=({isUnsupportedDevice:e,isWindows:t})=>{const{trackEvent:n}=Me(),{sendCometDownloadedEventSingular:r,sendCometDownloadButtonClickedEventSingular:s}=sO(),{fetchVariation:a}=bKe("control"),{openToast:o}=xn(),{openModal:l}=vt(),{$t:c}=Q(),u=f.useCallback(async(h,g)=>{const y=h?"toast":await a();y==="toast"?o(c({defaultMessage:"Comet download started. Look for Comet in Downloads.",id:"cWKaRwkkE8"}),"success",5):y==="instructions-modal"&&l("cometDownloadInstructionsModal",{requestedPlatform:g})},[a,o,c,l]),d=f.useCallback(async(h,{upsellName:g,partnerCode:y,useToastForSuccess:v})=>{u(v,h),n("click download comet",{requestedPlatform:h,upsellName:g,installPartner:y}),r(),setTimeout(()=>dl(wKe(h).href,"Comet download"),250)},[n,r,u]),m=f.useCallback(({upsellName:h,partnerCode:g,useToastForSuccess:y})=>{if(!e)return t?d("win_x64",{upsellName:h,partnerCode:g,useToastForSuccess:y}):d("mac_arm64",{upsellName:h,partnerCode:g,useToastForSuccess:y})},[d,t,e]),p=f.useCallback(({upsellName:h,partnerCode:g})=>{s("download-comet"),m({upsellName:h,partnerCode:g})},[s,m]);return{handleDownload:m,handleDownloadClick:p}},EKe=(e,t)=>{const{value:n,loading:r}=At({flag:"enterprise-max-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function Nue(){const{variation:e,loading:t}=EKe(!1);return{isEnterpriseMaxUiEnabled:e,isEnterpriseMaxUiEnabledLoading:t}}const co=()=>{const e=Qe(),{isMax:t,isEnterprisePro:n,isEnterpriseMax:r}=yt(),{openModal:s}=vt(),{isEnterpriseMaxUiEnabled:a,isEnterpriseMaxUiEnabledLoading:o}=Nue();return f.useCallback(c=>{if(!e){ee.warn("User is not logged in, skipping paywall upsell",c);return}if(t){ee.warn("User is on Max tier, skipping paywall upsell",c);return}if(n&&!a&&!o){ee.warn("User is on Enterprise Pro tier and Enterprise Max is not yet enabled, skipping paywall upsell",c);return}if(r){ee.warn("User is on Enterprise Max tier, skipping paywall upsell",c);return}s("pricingModal",c)},[e,s,t,a,n,r,o])};var OG;(function(e){e.SPRING_2025="SPRING_2025",e.GIVE_1_MONTH_FREE="GIVE_1MO_GET_1MO"})(OG||(OG={}));const MKe={EMAIL_ALREADY_REGISTERED:"Promo not valid for existing users",INVALID_REFERRAL_CODE:"Invalid referral code",UNKNOWN:"An unknown error occurred",EMAIL_RATE_LIMIT_EXCEEDED:"Too many emails sent to this address"},tFt=async({reason:e})=>{try{const{data:t,error:n}=await ne.GET("/rest/academic/student-partner-config",e,{timeoutMs:Pe()});if(n)throw new Error("Failed to get student partner config");return{countryOffers:t.country_offers||{},countryNames:t.country_names||{},defaultMonths:t.default_months||1}}catch(t){return ee.error("Failed to get student partner config",t),{countryOffers:{BR:3,PH:3,MY:1,ID:1},countryNames:{BR:"Brazil",PH:"Philippines",MY:"Malaysia",ID:"Indonesia"},defaultMonths:1}}},kKe=async({email:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/referrals/validate-email",t,{params:{query:{email:e}},timeoutMs:Pe()});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to validate referral email",cause:r});return{valid:n.is_valid,error:!1}}catch(n){return ee.error(n),{valid:!1,error:!0}}},nFt=async({referralCode:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/referrals/get-user-from-referral-code",t,{params:{query:{referral_code:e}}});if(r)throw new Error("Failed to get user from referral code");return n}catch(n){return ee.error("Failed to get user from referral code",n),{email:null,is_student:null,is_active:!1}}},rFt=async({toEmail:e,referralType:t,reason:n})=>{try{const{error:r}=await ne.POST("/rest/referrals/send-referral-email",n,{body:{to_email:e,referral_type:t},timeoutMs:8e4});return r?{success:!1,error:r.detail?.[0]?.msg||r.detail}:{success:!0,error:null}}catch(r){return ee.error("Failed to send referral email",r),{success:!1,error:MKe.UNKNOWN}}},sFt=async({headers:e,email:t,reason:n})=>{const{data:r,error:s}=await ne.GET("/rest/referrals/",n,{headers:e,params:{query:{email:t}}});if(s)throw new Error("Failed to get user referral status");return r},TKe=async({verificationId:e,reason:t})=>{try{if(!e)throw new Error("Verification ID is required");const{data:n,error:r}=await ne.GET("/rest/referrals/student-reward-details",t,{params:{query:{verification_id:e}},timeoutMs:Pe()});if(r)throw new Error("Failed to get student reward details");return n}catch(n){return ee.error("Failed to get student reward details",n),{months_awarded:1,reward_type:"default",organization:null,country_label:null}}},cE=({email:e,reason:t})=>{const{data:n,isLoading:r}=$e({queryKey:["user_student",e,t],queryFn:()=>kKe({email:e,reason:t}),enabled:!!e});return f.useMemo(()=>({isStudent:n?.valid??null,loading:r}),[n?.valid,r])},NKe=(e,t)=>{const{value:n,loading:r}=At({flag:"maybe-student-domains-regex",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},AKe=async({reason:e,headers:t})=>{try{return(await ne.GET("/rest/landing-page/academic/tile-data",e,{timeoutMs:Kt.MEDIUM,headers:t})).data}catch(n){return ee.error("Failed to get academic tile data",n),null}},jKe=async({reason:e,headers:t})=>{try{return(await ne.GET("/rest/landing-page/academic/primer-queries",e,{timeoutMs:Kt.MEDIUM,headers:t})).data}catch(n){return ee.error("Failed to get academic primer queries",n),null}},aFt=({reason:e})=>$e({queryKey:mVe(),queryFn:()=>AKe({reason:e})}),oFt=({reason:e})=>$e({queryKey:pVe(),queryFn:()=>jKe({reason:e})}),RKe=async({reason:e,headers:t})=>{try{return(await ne.GET("/rest/academic/check-edu-institution",e,{timeoutMs:Kt.HIGH,headers:t})).data}catch(n){return ee.error("Failed to check institution",n),null}},IKe=({reason:e})=>$e({queryKey:hVe(),queryFn:()=>RKe({reason:e})}),Aue=({reason:e})=>{const{session:t}=Ct(),n=t?.user?.email??"",{isStudent:r,loading:s}=cE({email:n,reason:e}),{variation:a,loading:o}=NKe(!1),{data:l,isLoading:c}=IKe({reason:e});return f.useMemo(()=>c||o||s?{isLoading:!0,signals:{isVerifiedStudent:null,isPossibleStudentByEmail:null,isPossibleStudentByIP:null}}:{isLoading:!1,signals:{isVerifiedStudent:!!r,isPossibleStudentByEmail:!!a,isPossibleStudentByIP:!!l?.institution}},[c,o,s,a,r,l?.institution])},iFt=["onboarding-pro","onboarding-mobile"],PKe=({searchParams:e,cleanRedirect:t})=>{if(!e)return null;const r=e.get("redirect");let s=null;try{s=r&&new URL(r).searchParams.get(Sl)}catch{return null}return s?s===Ie.GROW_COMET_STUDENTS_COUNTRY?Ie.GROW_COMET_STUDENTS_COUNTRY:s===Ie.GROW_COMET_STUDENTS?Ie.GROW_COMET_STUDENTS:null:null},OKe=()=>{const e=Dt();return f.useMemo(()=>{const t=e?.get(Sl),n=!!PKe({searchParams:e,cleanRedirect:!1}),r=t===Ie.STUDENT_REFERRAL_LANDING_PAGE,s=t===Ie.STUDENT_LANDING_PAGE,a=t===Ie.GROW_COMET_STUDENTS_COUNTRY;return{loginSource:t,isFromStudentCometGrowth:n,isFromStudentCometGrowthCountry:a,isFromStudentReferral:r,isFromStudentLanding:s,isFromStudentFlow:n||r||s||a}},[e])},LKe={currentStep:null,currentIndex:0,steps:[],handleNext:()=>null,handleComplete:()=>null,insertStep:()=>null,insertStepAndNavigate:()=>null,experimentVariationsMeta:{},setCurrentIndex:()=>null},jue=f.createContext(LKe),lFt=({steps:e,experimentVariationsMeta:t,handleFinish:n,initialIndex:r=0,children:s})=>{const[a,o]=f.useState(r),[l,c]=f.useState(e),[u,d]=f.useState(null),[m,p]=f.useState(t),{trackEventTyped:h}=Me();f.useEffect(()=>{c(e)},[e]),f.useEffect(()=>{p(t)},[t]),f.useEffect(()=>{l[a]!==void 0&&h("step visited",{step:l[a],experimentVariationsMeta:m})},[a,m,l,h]),f.useEffect(()=>{if(u!==null){if(o(u),d(null),l[a]===void 0||l[u]===void 0)return;h("step transition",{sourceStep:l[a],destinationStep:l[u],isFinish:!1,experimentVariationsMeta:m})}},[a,m,u,l,h]);const g=(_,w)=>{const C=[...l];C.splice(w,0,_),c(C)},y=(_,w)=>{g(_,w),d(w)},v=()=>{if(l.length)if(a===l.length-1){if(n?.(),l[a]===void 0)return;h("step transition",{sourceStep:l[a],isFinish:!0,experimentVariationsMeta:m})}else{if(o(a+1),l[a]===void 0||l[a+1]===void 0)return;h("step transition",{sourceStep:l[a],destinationStep:l[a+1],isFinish:!1,experimentVariationsMeta:m})}},x=()=>{n?.(),l[a]!==void 0&&h("step transition",{sourceStep:l[a],isFinish:!0,experimentVariationsMeta:m})},b=f.useMemo(()=>l[a],[a,l]);return i.jsx(jue.Provider,{value:{currentStep:b,insertStep:g,insertStepAndNavigate:y,handleNext:v,handleComplete:x,currentIndex:a,steps:l,setCurrentIndex:o,experimentVariationsMeta:m},children:s})};function DKe(){const e=f.useContext(jue);if(!e)throw new Error("useMultiStep must be used within MultiStepContext");return e}const FKe=(e,t)=>t.isFromStudentCometGrowthCountry?Ie.GROW_COMET_STUDENTS_COUNTRY:t.isFromStudentCometGrowth?Ie.GROW_COMET_STUDENTS:t.isFromStudentReferral?Ie.STUDENT_REFERRAL_LANDING_PAGE:t.isFromStudentLanding?Ie.STUDENT_LANDING_PAGE:e,UKe=({origin:e,customCallbacks:t})=>{const{$t:n}=Q(),r=Qe(),{trackEvent:s}=Me(),{openVisitorLoginUpsell:a}=Xn({enabled:!r}),{insertStepAndNavigate:o,currentIndex:l,handleComplete:c}=DKe(),{openModal:u}=vt(),d=OKe(),{signals:m,isLoading:p}=Aue({reason:"combined_paywall"}),h=f.useCallback(x=>{if(x){if(d.isFromStudentCometGrowth){c();return}typeof window<"u"&&window.location.pathname==="/onboarding"?(bs.setItem("student_verification_id",x),o("onboarding-student-referrals",l+1)):setTimeout(()=>{u("studentReferrals",{verificationId:x})},150)}},[o,l,u,d,c]),g=f.useCallback(x=>{s("sheerid form redirect",{verificationLocationSource:FKe(e,d),verificationRoleType:x}),u("sheerIdModal",{type:x,onSuccess:t?.onSuccess??h,onClose:t?.onClose})},[h,e,s,d,u,t]),y=f.useCallback(x=>{if(!r){a({title:n({defaultMessage:"Sign in to unlock Education Pro",id:"UNeU1Y4Zdu"}),origin:e,disallowedMethods:["apple"]});return}g(x)},[r,a,g,n,e]),v=d.isFromStudentFlow||!!m.isVerifiedStudent||!!m.isPossibleStudentByEmail||!!m.isPossibleStudentByIP;return{isLoading:!!p,isVerifiedStudent:!!m.isVerifiedStudent,handleStudentTierClick:y,handleVerificationSuccess:h,shouldDefaultToStudent:v,signals:m}},BKe=(e,t)=>{const{value:n,loading:r}=At({flag:"comet-sidecar-thread-per-tab",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},VKe="npclhjbddhklpbnacpjloidibaggcgon",WKe="entropy-agent-extension-main";function LG({onMessage:e,extensionId:t,name:n}){let r,s;const a=()=>{r&&clearTimeout(r),r=setTimeout(c,1e3)},o=()=>{ee.warn("Disconnected. Attempting to reconnect...",{extensionId:t}),a()},l=()=>{if(s){s.onMessage.removeListener(e),s.onDisconnect.removeListener(o),clearTimeout(r);try{s.disconnect()}catch{}s=void 0}};function c(){if(l(),typeof chrome>"u"||!chrome.runtime){Za()&&(a(),ee.error("Comet browser is missing chrome.runtime"));return}try{s=chrome.runtime.connect(t,{name:n}),s.onMessage.addListener(e),s.onDisconnect.addListener(o)}catch(u){a(),ee.error("Failed to connect to extension",{err:u,extensionId:t})}}return Za()&&(c(),Ql("web.frontend.comet_extension_connected",{extensionId:t,startTime:performance.timeOrigin,duration:performance.now()})),{sendMessage:u=>(!s&&Za()&&ee.warn("Attempting to send message while main port is not connected",{extensionId:t}),$Ke(t,u)),sendMessageToPort:u=>{if(!Za())return()=>{};s||ee.warn("Attempting to send message to port while main port is not connected",{extensionId:t});const d=chrome.runtime.connect(t,{name:`${n}_${dr()}`});return d.postMessage(u),()=>{try{d.disconnect()}catch{}}}}}async function $Ke(e,t){return new Promise((n,r)=>{if(!Za()){r(new Yy("INVALID_BROWSER_ERROR"));return}if(typeof chrome>"u"||!chrome.runtime){r(new Yy("MISSING_RUNTIME_ERROR"));return}chrome.runtime.sendMessage(e,t,s=>{if(chrome.runtime.lastError){r(new Yy("RUNTIME_LAST_ERROR",{message:chrome.runtime.lastError.message,cause:chrome.runtime.lastError}));return}n(s)})})}function HKe(){const e="node";try{return{html:t(document.documentElement).innerHTML.trim(),url:window.location.href}}catch(h){return{html:"",url:window.location.href,error:h instanceof Error?h.message:"Unknown error while getting HTML"}}function t(h=document.body){const g=[h],y=n(h);if(!y)return console.error("Failed to process DOM. Fallback to original DOM"),h;const v=[y];for(;g.length>0;){const x=g.pop(),b=v.pop();if(!x||!b)break;x.childNodes.forEach(_=>{const w=n(_);w!==null&&(b.appendChild(w),v.push(w),g.push(_))})}return y}function n(h){if(!c(h))return null;const g=h.cloneNode();if(d(h)){if(l(h)){if(!h.hasAttribute(e)){const y=s();h.setAttribute(e,y),g.setAttribute(e,y)}r(h,g)}return a(g)}return g}function r(h,g){const y=["value"],v=["checked","disabled","hidden","readonly","required","selected"];for(const x of y)typeof h[x]<"u"&&g.setAttribute(x,h[x]);for(const x of v)typeof h[x]<"u"&&(h[x]?g.setAttribute(x,""):g.removeAttribute(x))}function s(){return globalThis.__idCounter||(globalThis.__idCounter=0),`${globalThis.__idCounter++}`}function a(h){const g=h.getAttributeNames();for(const y of g){if(y=="href"){const v=h.getAttribute(y)||"";v.startsWith("http:")||v.startsWith("https:")||h.removeAttribute(y);continue}if(y==="name"&&h.getAttribute(y).length>128){h.removeAttribute(y);continue}o(y)||h.removeAttribute(y)}return h}function o(h){return["alt","aria-checked","aria-description","aria-disabled","aria-expanded","aria-hidden","aria-label","aria-readonly","aria-required","aria-role","aria-selected","checked","content","default","disabled","name","placeholder","readonly","required","role","selected","title","type","value",e].includes(h)}function l(h){const g=["A","BUTTON","DETAILS","EMBED","INPUT","MENU","MENUITEM","OBJECT","SELECT","TEXTAREA","SUMMARY"],y=["button","menu","menuitem","link","checkbox","radio","slider","tab","tabpanel","textbox","combobox","grid","listbox","option","progressbar","scrollbar","searchbox","switch","tree","treeitem","spinbutton","tooltip"],v=["menu","menuitem","button"],x=["onclick","tabindex","autofocus"],b=h.tagName,_=h.getAttribute("role"),w=h.getAttribute("aria-role");return g.includes(b)||x.some(C=>h.hasAttribute(C))||_&&y.includes(_)||w&&v.includes(w)}function c(h){return d(h)?m(h)?!0:!p(h):u(h)}function u(h){return h.nodeType===Node.TEXT_NODE&&!!h.textContent?.trim()}function d(h){return h.nodeType===Node.ELEMENT_NODE}function m(h){const g=["HEAD","TITLE"],y=["description"];return g.includes(h.tagName)||h.tagName==="META"&&y.some(v=>h.getAttribute("name")===v)}function p(h){return h.hidden||h.getAttribute("aria-hidden")==="true"?!0:!(h.checkVisibility({contentVisibilityAuto:!0,opacityProperty:!0,visibilityProperty:!0})||h.computedStyleMap().get("display").value==="contents")}}function DG({selector:e,value:t,submit:n}){const r=document.querySelector(e);if(!r)return{success:!1,reason:"not found"};if(r.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),r instanceof HTMLElement&&r.focus(),r.tagName==="INPUT"||r.tagName==="TEXTAREA")r.value=t;else if(r instanceof HTMLElement&&r.isContentEditable)r.innerText=t;else return{success:!1,reason:"not editable"};if(r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0})),n){let s=null;"closest"in r&&(s=r.closest("form")),!s&&(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)&&(s=r.form),s?.requestSubmit?.()??s?.submit?.()}return{success:!0}}function zKe({selector:e}){const t=document.querySelector(e);return t instanceof HTMLElement&&t.offsetParent!==null?(t.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),t.click(),{success:!0,outerHTML:t.outerHTML,text:t.innerText,tag:t.tagName}):{success:!1,reason:t?"invisible":"not found"}}function GKe({scrollDirection:e}){const t=window.innerHeight,n=Math.round(t*4);return window.scrollBy({top:e===uA.DOWN?n:-n,left:0,behavior:"smooth"}),{scrolledBy:e===uA.DOWN?n:-n,scrollTop:window.scrollY}}function qKe({url:e}){window.location.href=e}const KKe=async(e,t)=>new QKe(e,t).start();class YKe{bridge;constructor(t){this.bridge=t}async GetPageState(t){const n=t.tab_id,r=await this.bridge.tabs_get({id:n}),{result:s}=await this.bridge.agent_execute_js({id:n,js:`(${HKe.toString()})()`});return console.log("[agent] GetPageState content:",{result:s}),ee.log("[agent] GetPageState content:",{result:s}),{page_state:{html:s.html,title:r.tab?.title??"",url:r.tab?.url??"",screenshot:void 0}}}async RunActions(t){console.log("[agent] RunActions request:",t),ee.log("[agent] RunActions request:",t);for(const n of t.actions){const r=t.tab_id;if(n.type===Gf.CLICK){const s=await this.executeJs(r,zKe,{selector:n.selector??""});console.log("[agent] Click action result:",s),ee.log("[agent] Click action result:",s)}else n.type===Gf.WAIT?await new Promise(s=>setTimeout(s,n.duration||1e3)):n.type===Gf.SCROLL_PAGE?await this.executeJs(r,GKe,{scrollDirection:n.scroll_direction??uA.DOWN}):n.type===Gf.NAVIGATE?await this.executeJs(r,qKe,{url:n.value??""}):n.type===Gf.FILL?await this.executeJs(r,DG,{selector:n.selector??"",value:n.value??"",submit:!1}):n.type===Gf.SEARCH?await this.executeJs(r,DG,{selector:n.selector??"",value:n.value??"",submit:!0}):(console.warn("[agent] Unknown action type:",n.type),ee.warn("[agent] Unknown action type:",n.type));await this.bridge.agent_wait_idle({id:r}),await new Promise(s=>setTimeout(s,500))}return this.GetPageState({tab_id:t.tab_id,capture_screenshot:t.capture_screenshot})}async ShowMessage(t){return console.log("[agent] ShowMessage request:",t),ee.log("[agent] ShowMessage request:",t),{}}async ReportTaskProgress(t){return console.log("[agent] ReportTaskProgress request:",t),ee.log("[agent] ReportTaskProgress request:",t),{}}async ReportTaskComplete(t){return console.log("[agent] ReportTaskComplete request:",t),ee.log("[agent] ReportTaskComplete request:",t),{}}async executeJs(t,n,...r){return(await this.bridge.agent_execute_js({id:t,js:`(${n.toString()})(${r.map(a=>JSON.stringify(a)).join(",")})`})).result}}class QKe{payload;bridge;browserService;socket;constructor(t,n){this.payload=t,this.bridge=n,this.browserService=new YKe(n)}async start(){ee.log("[agent] Starting agent task:",this.payload),console.log("[agent] Starting agent task:",this.payload);const t=performance.now();let n=()=>{},r=()=>{};const s=new Promise((c,u)=>{n=c,r=u}),a=this.payload.base_url+"/agent";this.socket=new WebSocket(a),this.socket.onopen=n,this.socket.onerror=r,this.socket.onmessage=this.handleRpcMessage.bind(this),await s;const{tab:o}=await this.bridge.tabs_create({url:this.payload.start_url,hidden:!1,agent:!0});await this.bridge.agent_wait_idle({id:o.id});const l=await this.browserService.GetPageState({tab_id:o.id,capture_screenshot:!1});return this.socket.send(JSON.stringify({start_agent:{page_state:l.page_state,tab_id:o.id,task:this.payload.task,task_uuid:this.payload.uuid,extra_headers:this.payload.extra_headers,extension_version:"0.0.1",vision:this.payload.vision,url:this.payload.start_url,client_start_time_ms:Math.round(performance.now()-t),attachments:this.payload.attachments}})),()=>{this.socket?.close(),this.bridge.tabs_close({id:o.id})}}async handleRpcMessage(t){const n=JSON.parse(t.data),r=n.request_id,s=a=>{this.socket?.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify({rpc_response:a})):(console.warn("[agent] Socket is not open, cannot send response:",a),ee.warn("[agent] Socket is not open, cannot send response:",a))};try{if(!n.method||!(n.method in this.browserService))throw ee.error("[agent] Unknown method:",n.method),console.error("[agent] Unknown method:",n.method),new Error(`Unknown method: ${n.method}`);const a=n.request?JSON.parse(n.request):void 0,o=n.method,l=await this.browserService[o]({...a});s({request_id:r,response:JSON.stringify(l)})}catch(a){const o=JSON.stringify({status:"error",error:`${a}`});s({request_id:r,response:o}),ee.error("[agent] Error handling RPC message:",a,n),console.error("[agent] Error handling RPC message:",a,n)}}}class XKe{requests=new Map;bridge;constructor(){this.bridge=new Proxy({},{get:(t,n)=>r=>{const s=dr(),a={request_id:s,[n]:r??{}};return new Promise((o,l)=>{this.requests.set(s,c=>{"error"in c?l(new Error(String(c.error))):o(c)}),window.cometBridge?.postMessage(JSON.stringify(a))})}}),this.startListenMessages()}startListenMessages(){window.cometBridge&&(window.cometBridge.onmessage=t=>{const n=t.data;if(n)try{const r=JSON.parse(n),s=this.requests.get(r.request_id);s?(this.requests.delete(r.request_id),s(r)):(console.warn("No callback found for requestId",r.request_id,r),ee.warn("No callback found for requestId",r.request_id,r))}catch(r){console.warn("Failed to parse bridge response",n,r),ee.warn("Failed to parse bridge response",n,r)}})}}class FG{bridge;constructor(){this.bridge=new Proxy({},{get:(t,n)=>async r=>{const a={request_id:dr(),[n]:r??{}},o=await window.webkit?.messageHandlers?.cometBridge?.postMessage(JSON.stringify(a));if(!o)throw new Error("No response from cometBridge");return JSON.parse(o)}})}}const _y="mcp_tools_settings_v1";function ZKe(){return Po((e,t)=>({platformInfo:void 0,sidecarSourceTab:{url:"/",title:"",tabId:-1,secondaryTab:null},screenshotToolEnabled:!0,sidecarUrlById:new Map,tasksState:{},navigationResults:{},classifierResults:{},omniboxInput:{},navigationMeta:{},taskScreenshots:{},userSelection:void 0,mcpStdioServers:void 0,mcpTools:void 0,mcpDisabledServers:void 0,installedDxts:void 0,taskTabs:void 0,mcpToolsSettings:void 0,pendingTasks:new Map,actions:{setPlatformInfo:n=>{e({platformInfo:n})},setSidecarUrlById:(n,r,s)=>{const a=t().sidecarUrlById;a.set(n,{url:r,updatedAt:s??Date.now()}),e({sidecarUrlById:a})},deleteSidecarUrlById:n=>{const r=t().sidecarUrlById;r.delete(n),e({sidecarUrlById:r})},setSourceTab:n=>{let r=!0;try{const s=new URL(n.url);r=!((s.protocol==="chrome:"||s.protocol==="comet:")&&s.hostname!=="newtab")}catch{}e({sidecarSourceTab:n,screenshotToolEnabled:r})},setLastOmniboxInput:(n,r)=>{e(s=>({omniboxInput:{...s.omniboxInput,[n]:r}}))},addNavigationResults:(n,{results:r,classifierResult:s,...a})=>{r?.length&&e(o=>{const l={navigationResults:{...o.navigationResults,[n]:r}};return s&&(l.classifierResults={...o.classifierResults,[n]:s}),a&&!o.navigationMeta[n]&&(l.navigationMeta={...o.navigationMeta,[n]:a}),l})},setTaskScreenshot:(n,r)=>{e(s=>({taskScreenshots:{...s.taskScreenshots,[n]:r}}))},setTaskState:(n,r)=>{e(s=>{const a={...s.tasksState};return r===void 0?delete a[n]:a[n]={is_paused:r},{tasksState:a}})},setUserSelection:n=>{e({userSelection:n})},clearUserSelection:()=>{e({userSelection:void 0})},setMcpStdioServers:n=>{e({mcpStdioServers:n})},setMcpTools:(n,r)=>{e(s=>({mcpTools:{...s.mcpTools,[n]:r}}))},removeMcpTools:n=>{e(r=>{const s={...r.mcpTools};return delete s[n],{mcpTools:s}})},setMcpDisabledServers:n=>{e({mcpDisabledServers:n}),Ae.setItem("mcp_disabled_servers_v1",JSON.stringify(Array.from(n)))},setMcpToolsSettings:n=>{e({mcpToolsSettings:n}),Ae.setItem(_y,JSON.stringify(n))},setMcpToolEnabled:(n,r,s)=>{e(a=>{const o=a.mcpToolsSettings||{},l={...o[n]||{}},c=l[r]??{enabled:!0,executePermissions:"always-ask"},u={...l,[r]:{...c,enabled:s}},d={...o,[n]:u};return Ae.setItem(_y,JSON.stringify(d)),{mcpToolsSettings:d}})},setMcpToolExecutePermissions:(n,r,s)=>{e(a=>{const o=a.mcpToolsSettings||{},l={...o[n]||{}},c=l[r]??{enabled:!0,executePermissions:"always-ask"},u={...l,[r]:{...c,executePermissions:s}},d={...o,[n]:u};return Ae.setItem(_y,JSON.stringify(d)),{mcpToolsSettings:d}})},renameMcpServerInToolsSettings:(n,r)=>{e(s=>{const a=s.mcpToolsSettings||{};if(!a[n]||n===r)return s;const o={...a},l=a[n];return o[r]={...l},delete o[n],Ae.setItem(_y,JSON.stringify(o)),{mcpToolsSettings:o}})},setInstalledDxts:n=>{e({installedDxts:n})},setTaskTabs:n=>{e({taskTabs:n})},setPendingTask:(n,r)=>{e(s=>{const a=new Map(s.pendingTasks);return a.set(n,r),{pendingTasks:a}})},deletePendingTask:n=>{e(r=>{const s=new Map(r.pendingTasks);return s.delete(n),{pendingTasks:s}})},getPendingTask:n=>t().pendingTasks.get(n)}}))}const JKe="mcjlamohcooanphmebaiigheeeoplihb",eYe="streamId",tYe=Object.freeze([]);class nYe{tools;mobileProxy=new FG;isTestDebugMode=!1;platform="web";store=ZKe();mainExtension;agentExtension;taskTeardowns=new Map;emitter=wie();pendingServerRename;constructor(){const t=Fo();t?.android_version&&(this.platform="android"),t?.ios_version&&(this.platform="ios"),this.mainExtension=LG({onMessage:this.handleMessage,extensionId:JKe,name:"entropy_client_context"}),this.agentExtension=LG({onMessage:this.handleAgentExtensionMessage,extensionId:VKe,name:WKe}),this.tools=rYe(this.agentExtension),this.platform==="web"?this.mainExtension.sendMessage({type:"INIT"}).then(n=>{n&&(this.isTestDebugMode=!!n.isTestDebugMode)},n=>{if(Za())throw n}):this.mobileProxy=this.platform==="android"?new XKe:new FG,_ze()}getStore(){return this.store}async openNewTab(t){const n=new URL(t);n.searchParams.delete("erp"),n.pathname=n.pathname.replace("/sidecar",""),await this.openTab({url:n.toString(),request_id:"openNewTab",key:"openNewTab"})}_getNavigationResults(t){return this.store.getState().navigationResults[t]??tYe}async closeSideCar(){return this.send({type:"HIDE_SIDECAR"})}async openTab(t){if(this.platform!=="web"){const s=(await this.mobileProxy?.bridge.tabs_create({url:t.url,hidden:!1})).tab;return{is_success:!0,_metadata:{time:1},result:{tab_id:s.id,url:s.url,title:s.title,last_accessed:s.last_accessed}}}return{is_success:!0,result:(await this.tools.OpenTab({key:t.key??"unknown",request_id:t.request_id??"unknown",url:t.url,tab_id:t.tabId})).tab}}async injectSearchResults(t,n,r={}){try{const s=ac(),a={streamId:n,...r};To("web.frontend.comet_navigation_run_inject",a);const o=this.platform==="web"?await this.send({type:"NAV_SEARCH",payload:{query:t,streamId:n}}):await this.mobileProxy.bridge.fetch_navigation_search_results({query:t,stream_id:n});if(this.isWebNavigationPayload(o)&&!o.is_success)throw new Error("Failed to inject search results");const l=this.extractNavigationData(o);this.store.getState().actions.addNavigationResults(n,l);const u={type:l.type??"unknown",...a};s.addTiming("web.frontend.comet_navigation_search_results",u);const d=s.getAbsoluteStartTime(),m={...u,startTime:d};this.isWebNavigationPayload(o)&&(o._metadata?.time&&Ql("web.frontend.comet_navigation_extension_processing",{duration:o._metadata.time,...m}),o.searchTime&&Ql("web.frontend.comet_navigation_search_time",{duration:o.searchTime,...m}),o.classifyTime&&Ql("web.frontend.comet_navigation_classify_time",{duration:o.classifyTime,...m}),o.networkingTime&&Ql("web.frontend.comet_navigation_networking_time",{duration:o.networkingTime,...m}))}catch(s){ee.error(new Yy("NAV_RESULTS_INJECTION_FAILED",{details:{streamId:n},cause:s}))}}async getIsCometDefaultBrowser(t){try{const n=await this.send({type:"GET_IS_DEFAULT_BROWSER",key:t});return n.is_success?n.isDefault:null}catch{return null}}async setCometAsDefaultBrowser(t){return this.send({type:"SET_AS_DEFAULT_BROWSER",key:t})}async getDidSkipCookieImportOnboarding(t){const r=(await this.send({type:"GET_ONBOARDING_IMPORT_STATUS",key:t})).importStatus==="NOT_IMPORTED";return ee.info("[getDidSkipCookieImportOnboarding]",r),r}subscribeCometNavigate(t){const n=r=>{const s=new URL(r.detail.url);if(delete window.pplxNavIntentEvent,this.store.getState().actions.clearUserSelection(),To("comet_navigate"),s.pathname==="/search"&&s.searchParams.has("q")&&(s.pathname="/search/new"),s.pathname==="/search/new"){const a=dr(),o=r.detail.text||"",l=s.searchParams.get("q")??"";s.searchParams.set(eYe,a),this.injectSearchResults(l,a,{omnisearch:!0}),this.store.getState().actions.setLastOmniboxInput(a,o)}t({url:s})};return window.pplxNavIntentEvent&&n(window.pplxNavIntentEvent),document.addEventListener("comet-navigate",n),()=>{document.removeEventListener("comet-navigate",n)}}subscribeToCometQuery(t){const n=r=>{const s=r.detail.query;delete window.pplxCometQuery,t(s)};return window.pplxCometQuery&&n(window.pplxCometQuery),document.addEventListener("comet-query",n),()=>{document.removeEventListener("comet-query",n)}}getLastOmniboxInput(t){return this.store.getState().omniboxInput[t]}async searchTabs(t){if(this.platform!=="web"){const{tabs:r}=await this.mobileProxy.bridge.tabs_query();return{is_success:!0,tabs:r.map(s=>({tabId:s.id,title:s.title??"",url:s.url,isCurrent:!1,lastAccess:s.last_accessed??0,snippet:""})),_metadata:{time:1}}}return{is_success:!0,tabs:(await this.tools.SearchBrowser({queries:[],sources:["OPEN_TABS"],key:t,history_max_results:0,open_tabs_max_results:500,closed_tabs_max_results:0,request_id:t})).open_tabs_results.map(r=>({...r,tabId:r.tab_id,lastAccess:r.last_accessed}))}}async ungroupTabs(t,n,r){return{is_success:!0,tabIds:(await this.tools.UngroupTabs({group_ids:t.groupIds,tab_ids:t.tabIds,key:n,request_id:r})).ungrouped_tabs.map(a=>({id:a.tab_id,error:a.error})),groupIds:t.groupIds.map(a=>({id:a}))}}showNotification(){this.send({type:"SHOW_NOTIFICATION"}).catch(()=>{})}sendThreadStatusToMobile(t){const{status:n,streamId:r,text:s}=t;this.mobileProxy.bridge.thread_status({type:n,text:s,stream_id:r}).catch(a=>{ee.error("Failed to send thread status to mobile bridge",a)})}sendVoiceStatusToMobile(t){const{status:n,text:r}=t;this.mobileProxy.bridge.voice_status({type:n,text:r}).catch(s=>{ee.error("Failed to send voice status to mobile bridge",s)})}subscribeToMobileCommands(t){const n=r=>{t?t(r.detail):r.detail.cmd==="stop"&&r.detail.subject==="thread"?this.emitter.emit("BROWSER_TASK_STOP"):ee.warn("[comet-mobile] Unknown mobile command",r.detail.cmd)};return document.addEventListener("comet-mobile-cmd",n),()=>{document.removeEventListener("comet-mobile-cmd",n)}}setTabProgress(t){this.send({type:"SET_TAB_PROGRESS",payload:t}).catch(()=>{})}async searchTabGroups(t,n,r){return{is_success:!0,results:(await this.tools.SearchTabGroups({queries:t.queries,request_id:r,key:n})).tab_groups.map(a=>({...a,color:a.color,tabs:a.tabs.map(o=>({...o,tabId:o.tab_id,isCurrent:o.is_current_tab??!1}))}))}}showFeedbackForm(){this.send({type:"SHOW_FEEDBACK_FORM"}).catch(()=>{})}subscribeScreenshotCaptured(t){return this.emitter.on("SCREENSHOT_CAPTURED",t)}handleAgentExtensionMessage=t=>{try{ns(t).with({type:"SCREENSHOT_CAPTURED"},async({payload:{screenshot:n}})=>{const s=await(await fetch(n)).blob(),a=new File([s],"screenshot.png",{type:s.type});ee.info("Screenshot captured"),this.emitter.emit("SCREENSHOT_CAPTURED",a)}).with({type:"BROWSER_TASK_PROGRESS_SCREENSHOT"},async({payload:{screenshot:n,taskUuid:r}})=>{this.store.getState().actions.setTaskScreenshot(r,`data:image/png;base64,${n}`)}).with({type:"BROWSER_TASK_PROGRESS"},({payload:{taskUuid:n,progress:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s?.onProgress&&s.onProgress(r),this.emitter.emit("BROWSER_TASK_PROGRESS",n,r)}).with({type:"BROWSER_TASK_COMPLETE"},({payload:{taskUuid:n,result:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s&&(this.store.getState().actions.deletePendingTask(n),s.resolve(r)),this.emitter.emit("BROWSER_TASK_COMPLETE",n,r)}).with({type:"BROWSER_TASK_STOP"},({payload:n})=>{ee.info("Browser task stopped"),this.emitter.emit("BROWSER_TASK_STOP",n.entryId)}).with({type:"BROWSER_TASK_PAUSE_RESUME_FRONTEND"},({payload:n})=>{ee.info("Browser task paused/resumed"),this.store.getState().actions.setTaskState(n.task_uuid,n.is_paused)}).with({type:"AGENT_TASK_FAILURE"},({payload:{taskUuid:n,extraHeaders:r,error:s}})=>{Ice({clientPayloadCacheKey:n,errorType:s,errorMsg:"Agent task failure."},r,"CometAdapter").catch(a=>{ee.error("Error sending tool failure",a)})}).with({type:"USER_SELECTION_CAPTURED"},({payload:{selection:n}})=>{this.store.getState().actions.setUserSelection(n)}).with({type:"MOVE_THREAD_TO_SIDECAR"},({payload:{url:n,task_tab_ids:r}})=>{const s=new URL(n);s.pathname="/sidecar"+s.pathname;const a=s.toString();r.forEach(o=>{this.store.getState().actions.setSidecarUrlById(ev(o,void 0),s.pathname)}),document.dispatchEvent(new CustomEvent("comet-navigate",{detail:{url:a,text:""}}))}).with({type:"GET_TASK_TABS"},({payload:{tabs:n}})=>{this.store.getState().actions.setTaskTabs(n)}).with({type:"MCP_STDIO_SERVER_CHANGED"},({payload:{serverName:n,changes:r,server:s}})=>{this.handleMcpStdioServerChanged(n,r,s)}).otherwise(n=>{ee.log("Unknown message type",n)})}catch(n){ee.error("Error parsing entropy message",n)}};async fetchOpenedTabs(){const t=await this.searchTabs("fetch_opened_tabs");return t.is_success?t.tabs.filter(n=>(n.url.startsWith("https://")||n.url.startsWith("file://"))&&!n.isCurrent).sort((n,r)=>r.lastAccess-n.lastAccess):[]}async getPersonalSuggestions(t,n){return this.send({type:"GET_PERSONAL_SUGGESTIONS",payload:t,key:n})}async getTopMostVisitedUrls(t,n){return this.send({type:"GET_TOP_MOST_VISITED_URLS",payload:t,key:n})}getQuickActions(t){return this.send({type:"GET_QUICK_ACTIONS",key:t})}async getInitialHistorySummary(t,n,r){return this.SearchBrowser({queries:[],sources:["HISTORY"],key:t,request_id:"",start_time:n*24*60*60*1e3,history_max_results:r,open_tabs_max_results:r,closed_tabs_max_results:r})}async getHistorySummary(t,n=[],r=14,s=20){return this.SearchBrowser({queries:n,sources:["HISTORY"],key:t,request_id:"",start_time:r*24*60*60*1e3,history_max_results:s,open_tabs_max_results:s,closed_tabs_max_results:s})}async GetContent(t){return this.platform!=="web"?{contents:(await Promise.allSettled(t.pages.map(async r=>r.id?(await this.mobileProxy.bridge.tabs_get_content({id:r.id})).tab_content:(await this.mobileProxy.bridge.tabs_get_url_content({url:r.url})).tab_content))).map(r=>r.status==="fulfilled"?r.value:void 0).filter(r=>r!==void 0).map(r=>({html:"",id:r.id,url:r.url,title:r.title??"",og_meta:r.og_meta??{},markdown:r.markdown??""}))}:this.tools.GetContent(t)}async GetVisibleTabScreenshot(t){return this.tools.GetVisibleTabScreenshot(t)}async SearchBrowser(t){if(this.platform!=="web"){const n=t.sources.includes("HISTORY")?Promise.allSettled((t.queries.length?t.queries:[""]).map(async o=>await this.mobileProxy.bridge.history_search({text:o,max_results:t.history_max_results,start_time:t.start_time,end_time:t.end_time}))):[],[{tabs:r},s]=await Promise.all([t.sources.includes("OPEN_TABS")?this.mobileProxy.bridge.tabs_query():{tabs:[]},n]),a=s.map(o=>o.status==="fulfilled"?o.value.history_items:[]).flat().map(o=>({title:o.title??"",url:o.url,last_accessed:o.last_visit_time??Date.now(),visit_count:o.visit_count??1}));return{closed_tabs_results:[],history_results:a,open_tabs_results:r.map(o=>({tab_id:o.id,title:o.title??"",url:o.url,last_accessed:o.last_accessed??0}))}}return this.tools.SearchBrowser(t)}async GetSidecarContext(t){return this.tools.GetSidecarContext(t)}async closeTabs(t,n,r){if(this.platform!=="web"){const{tabs:a}=await this.mobileProxy.bridge.tabs_query(),o=t.tabIds??[],l=a.filter(c=>o.includes(c.id));return l.forEach(c=>{this.mobileProxy.bridge.tabs_close({id:c.id})}),{is_success:!0,result:l.map(c=>({id:c.id,url:c.url,title:c.title??""}))}}return{is_success:!0,result:(await this.tools.CloseTabs({tab_ids:t.tabIds??[],key:n,request_id:r})).tabs.map(a=>({id:a.tab_id,...a}))}}async groupTabs(t,n,r){const s=await this.tools.GroupTabs({...t,tab_ids:t.tabIds,group_id:t.groupId,key:n,request_id:r});if(!s.tab_group)throw new Error("[GroupTabs] Tab group not found");return{is_success:!0,tabGroup:{id:s.tab_group.id,title:s.tab_group.title,collapsed:s.tab_group.collapsed??!1,color:s.tab_group.color}}}async maybeSendSearchResult(t,n,r){if(!this.isTestDebugMode||!t)return;const a=[...t.web_results??[],...t.extra_web_results??[]].map(o=>({name:o.name,snippet:o.snippet,url:o.url,isClientContext:!!o.is_client_context}));return this.send({type:"PERPLEXITY_SEARCH_RESULT",payload:{answer:t.answer,webResults:a,isPending:r,steps:n.map(o=>o.step_type)}})}submitTask(t,n){return new Promise((r,s)=>{const a=t.entryId,o=t.uuid;this.store.getState().actions.setPendingTask(o,{entryId:t.entryId,uuid:t.uuid,resolve:r,reject:s,onProgress:n});const l=this.taskTeardowns.get(a)??[];if(this.taskTeardowns.set(a,l),this.platform!=="web"){const c=KKe(t,this.mobileProxy.bridge);l.push(()=>c.then(u=>{u(),this.store.getState().actions.setTaskState(t.uuid,void 0)})),r({message:"Mobile task started",success:!0});return}l.push(this.agentExtension.sendMessageToPort(t))})}moveThreadToSidecar(t,n,r){this.agentExtension.sendMessage({type:"MOVE_THREAD_TO_SIDECAR",payload:{active_task_uuid:t,is_mission_control:n,entry_id:r}})}getTaskTabs(){this.agentExtension.sendMessage({type:"GET_TASK_TABS"})}async sendMissionControlStatus(t){await this.agentExtension.sendMessage({type:"MISSION_CONTROL_STATUS",payload:t})}async makeTaskVisible(t){const n=await this.agentExtension.sendMessage({type:"MAKE_TASK_VISIBLE",payload:{task_uuid:t}});if(n.tab_ids){const r=new URL(window.location.href).pathname;n.tab_ids.forEach(s=>{this.store.getState().actions.setSidecarUrlById(ev(s,void 0),r)})}}cleanupTasks(t){if(!t)return;const n=this.taskTeardowns.get(t);n&&(n.forEach(r=>r()),this.taskTeardowns.delete(t))}captureSourceTabScreenshotV2({sourceTabUrl:t=""}){this.agentExtension.sendMessage({type:"CAPTURE_SCREENSHOT_V2",payload:{tabId:void 0,sourceTabUrl:t}})}deactivateScreenshotTool(){this.agentExtension.sendMessage({type:"DEACTIVATE_SCREENSHOT_TOOL",payload:{tabId:void 0}})}subscribeToSidecarBrowserTaskStop(t){return this.emitter.on("BROWSER_TASK_STOP",t)}subscribeForceSubmitQuery(t){return this.emitter.on("FORCE_SUBMIT_QUERY",t)}subscribeQuickActionButtonFired(t){return this.emitter.on("QUICK_ACTION_BUTTON_FIRED",t)}getMcpTools(t){return this.sendToAgent({type:"GET_MCP_TOOLS",payload:{serverName:t}})}callMcpTool(t,n){return this.sendToAgent({type:"CALL_MCP_TOOL",payload:t,context:n})}getMcpStdioServers(){const t=this.sendToAgent({type:"GET_STDIO_MCP_SERVERS",payload:void 0});return t.then(n=>{this.getStore().getState().actions.setMcpStdioServers(n)}).catch(()=>{}),t}addMcpStdioServer(t){return this.sendToAgent({type:"ADD_STDIO_MCP_SERVER",payload:t})}async updateMcpStdioServer(t,n){return n.name&&n.name!==t?this.pendingServerRename={oldName:t,newName:n.name}:this.pendingServerRename=void 0,await this.removeMcpStdioServer(t),this.addMcpStdioServer(n)}async removeMcpStdioServer(t){await this.sendToAgent({type:"REMOVE_STDIO_MCP_SERVER",payload:{name:t}}),this.clearStateAfterRemovingMcpServer(t)}installDxt(t){return this.sendToAgent({type:"INSTALL_DXT",payload:{url:t}})}async uninstallDxt(t){await this.sendToAgent({type:"UNINSTALL_DXT",payload:{name:t}}),this.clearStateAfterRemovingMcpServer(t)}getInstalledDxts(){const t=this.sendToAgent({type:"GET_INSTALLED_DXT"});return t.then(n=>{this.getStore().getState().actions.setInstalledDxts(n)}).catch(()=>{}),t}async refreshDxtAndMcpState(){await Promise.all([this.getMcpStdioServers(),this.getInstalledDxts()])}handleMcpStdioServerChanged(t,n,r){const s=this.getStore().getState(),a=s.mcpStdioServers??[],o=a.findIndex(c=>c.name===t);if(o===-1)return;const l=[...a];l[o]=r,s.actions.setMcpStdioServers(l)}isWebNavigationPayload(t){return this.platform==="web"&&typeof t=="object"&&t!==null&&"_metadata"in t}isMobileNavigationPayload(t){return this.platform!=="web"&&typeof t=="object"&&t!==null&&"nav_search_response"in t}extractNavigationData(t){if(this.isWebNavigationPayload(t))return t;if(this.isMobileNavigationPayload(t))return t.nav_search_response;throw new Error("Invalid navigation payload format")}async send(t){return this.mainExtension.sendMessage(t).then(n=>(n.is_success=!n.errorType,n))}async sendToAgent(t){return this.agentExtension.sendMessage(t).then(n=>{if(!n.success)throw new Error(n.error);return n.response})}handleMessage=t=>{try{ns(t).with({type:"UPDATE_SOURCE_TAB"},r=>{this.store.getState().actions.setSourceTab(r.payload),r.payload.url!==this.store.getState().sidecarSourceTab.url&&this.store.getState().actions.clearUserSelection()}).with({type:"FORCE_SUBMIT_QUERY"},r=>{this.isTestDebugMode&&this.emitter.emit("FORCE_SUBMIT_QUERY",r.payload)}).with({type:"QUICK_ACTION_BUTTON_FIRED"},()=>{this.emitter.emit("QUICK_ACTION_BUTTON_FIRED")}).with({type:"INIT"},r=>{this.isTestDebugMode=!!r.payload.isTestDebugMode,this.store.getState().actions.setPlatformInfo(r.payload.platform),this.store.getState().actions.setSourceTab({tabId:r.payload.sourceTabId??-1,url:r.payload.sourceTabUrl??"",title:r.payload.sourceTabTitle??"",secondaryTab:r.payload.sourceSecondaryTab??null})}).otherwise(r=>{ee.log("Unknown message type",r)})}catch(n){ee.error("Error parsing entropy message",n)}};clearStateAfterRemovingMcpServer(t){const n=this.getStore().getState(),r=n.mcpDisabledServers??new Set;if(r.has(t)){const a=new Set(r);a.delete(t),n.actions.setMcpDisabledServers(a)}if(this.pendingServerRename&&this.pendingServerRename.oldName===t){n.actions.renameMcpServerInToolsSettings(this.pendingServerRename.oldName,this.pendingServerRename.newName),this.pendingServerRename=void 0;return}const s=n.mcpToolsSettings??{};if(s[t]){const a={...s};delete a[t],n.actions.setMcpToolsSettings(a)}}}const rYe=e=>new Proxy({},{get(t,n){return r=>e.sendMessage({type:"CALL_TOOL",method:n,request:r}).then(({success:s,response:a})=>{if(!s)throw a;return a}).catch(s=>{throw ee.error("Error calling tool",s),"errorType"in s?s:{errorType:"unhandled",errorMsg:"Proxy error."}})}});var UG={};const Hl=new nYe,{Provider:sYe,useTrackedState:aYe}=Th("CometState",()=>Hl.getStore()),Rue=f.createContext(void 0),oYe=({children:e})=>{const t=_t(),n=aMe(),r=rn(),{variation:s}=BKe(!0);return f.useLayoutEffect(()=>{const a=Sa();a.erp&&(document.documentElement.dataset.erp=a.erp);const o=Hl.subscribeCometNavigate(({url:m})=>{if(m.origin===window.location.origin&&m.pathname.startsWith(t.base)&&(m.pathname=m.pathname.replace(t.base,""),n(m.pathname))){const h=m.searchParams.toString(),g=`${m.pathname}${h?`?${h}`:""}`;t.push(g,void 0,"Comet navigate");return}if(UG.NEXT_PUBLIC_IS_SIDECAR_BUILD){ee.error("Invalid soft navigation in Sidecar",{url:m}),Hl.openTab({url:m.toString()});return}const p=m.toString();window.location.href=p});if(!UG.NEXT_PUBLIC_IS_SIDECAR_BUILD||s===!1)return o;const l=Hl.getStore(),c=setInterval(()=>{l.getState().sidecarUrlById.forEach((p,h)=>{p.updatedAt<Date.now()-1e3*60*60*24*7&&l.getState().actions.deleteSidecarUrlById(h)}),SG(l)},1e3*60*60*6);eKe(l),tKe(l,t);let u=l.getState().sidecarSourceTab;const d=l.subscribe((m,p)=>{if(m.sidecarSourceTab===p.sidecarSourceTab)return;const h=m.sidecarSourceTab;if(h.tabId===u.tabId&&h.secondaryTab?.tabId===u.secondaryTab?.tabId)return;const g=new URL(window.location.href).pathname;l.getState().actions.setSidecarUrlById(ev(u.tabId,u.secondaryTab?.tabId),g);const y=ev(h.tabId,h.secondaryTab?.tabId),x=l.getState().sidecarUrlById.get(y)?.url??"/";u=h,x!==g&&(t.replace(x,"Sidecar source tab changed"),SG(l))});return()=>{clearInterval(c),o(),d()}},[t,n,s]),f.useEffect(()=>Hl.subscribeToSidecarBrowserTaskStop(a=>{a&&(Sp({entryUUID:a,reason:"terminate-from-comet-adapter"}),Hl.cleanupTasks(a))}),[]),i.jsx(sYe,{children:i.jsxs(Rue.Provider,{value:Hl,children:[e,r&&i.jsx(iYe,{})]})})};function wr(e=!0){const t=f.useContext(Rue);if(!t&&e)throw new Error("useEntropyBrowser must be used inside EntropyBrowserProvider");return t}const Fs=aYe,iYe=()=>{const e=Fs();return f.useEffect(()=>{Hl.refreshDxtAndMcpState().catch(()=>{})},[]),f.useEffect(()=>{if(!e.mcpDisabledServers)try{const t=Ae.getItem("mcp_disabled_servers_v1"),n=t?JSON.parse(t):[];e.actions.setMcpDisabledServers(new Set(n))}catch{e.actions.setMcpDisabledServers(new Set)}},[e.mcpDisabledServers,e.actions]),f.useEffect(()=>{if(!e.mcpToolsSettings)try{const t=Ae.getItem(_y),n=t?JSON.parse(t):{};e.actions.setMcpToolsSettings(n)}catch{e.actions.setMcpToolsSettings({})}},[e.mcpToolsSettings,e.actions]),i.jsx(i.Fragment,{children:e.mcpStdioServers?.map(t=>i.jsx(lYe,{server:t},t.name))})},lYe=({server:e})=>{const t=Fs(),{data:n}=$e({queryKey:["comet/mcp_tools",e.name],queryFn:async()=>(await Hl.getMcpTools(e.name).catch(()=>[])).map(s=>({...s,mcp_server:e.name,mcp_server_type:dPe.MCP_SERVER_TYPE_LOCAL})),enabled:!!e.name});return f.useEffect(()=>{if(n)return t.actions.setMcpTools(e.name,n),()=>{t.actions.removeMcpTools(e.name)}},[n,t.actions,e.name]),null};function cYe(e){return e.blocks?.some(t=>t.intended_usage==="ask_text")??!1}function uYe(e,t,n=[]){return t===ce.DEFAULT||n.length>0&&n[n.length-1]?.step_type==="FINAL"||e?.some(s=>s.markdown_block||s.entity_list_block||gie(s.entity_group_block)||yie(s.inline_entity_block))}function Er(e){const t=e?.toLowerCase();return Aa[t]??oe.SEARCH}var dYe={};const Iue=()=>{const e=rn(),t=wr(),n=f.useCallback(r=>{const s=!!r.last_backend_uuid,a=Er(r.model_preference)===oe.RESEARCH||Er(r.model_preference)===oe.STUDIO;return(r.sources?.some(l=>l==="web")??!0)&&e&&!s&&!dYe.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!a&&!r.override_no_search},[e]);return f.useCallback((r,s,a)=>{!r||!n(s)||t.injectSearchResults(r,a)},[t,n])},fYe=["presentpicker"],Pue=e=>e?fYe.includes(e):!1;function mYe(e){const t=Dt(),n=Qe(),{hasAccessToProFeatures:r}=yt(),{trackEvent:s}=Me(),{actions:a,preferredSearchModels:o,preferredSearchMode:l}=dn(),{isMaxUpsellEnabled:c}=Nc(),u=t?.get("copilot"),d=t?.get("pro"),m=t?.get("utm_source"),p=u==="false"||d==="false",h=!p&&(u==="true"||d==="true"||Pue(m??void 0)),g=o[oe.SEARCH];g&&(Aa[g]!==oe.SEARCH?(o[oe.SEARCH]=ce.PRO,a.setPreferredSearchModel(oe.SEARCH,ce.PRO)):g===ce.DEFAULT&&r&&a.setPreferredSearchModel(oe.SEARCH,void 0));const y=t?.get("model_id")==="pplx_alpha"?null:t?.get("model_id");let v;y&&(y==="deep_research"?v=ce.ALPHA:Object.values(ce).includes(y)&&(v=y));let x;return p?x=ce.DEFAULT:v?x=v:h&&(x=ce.PRO),x&&v&&v==x&&s("search mode utm",{mode:Aa[x]}),f.useMemo(()=>{let b=ce.DEFAULT;if(!n)return b;if(x)return x;if(!c)return b=o[oe.SEARCH]??ce.PRO,b;switch(l){case oe.RESEARCH:b=o[oe.RESEARCH]??ce.ALPHA;break;case oe.STUDIO:b=o[oe.STUDIO]??ce.BETA;break;case oe.SEARCH:default:b=o[oe.SEARCH]??ce.PRO;break}return b},[n,c,x,l,o])}const Oue={isCopilot:!1,sources:["web"],gpt4Limit:0,gpt4Total:0,pplxAlphaLimit:0,pplxBetaLimit:0,uploadRateLimit:void 0,createLimit:0,recency:null,askInputReasoningMode:!1,askInputReasoningModelPreference:null,setAskInputReasoningMode:()=>{},setAskInputReasoningModelPreference:()=>{},setConfiguredModel(){},setSources:()=>{},setIsCopilot:()=>{},decrementCreateLimit:()=>{},setGPT4Limit:()=>{},setPplxAlphaLimit:()=>{},setPplxBetaLimit:()=>{},setRecency:()=>{},setUploadRateLimit:()=>{},configuredModel:ce.DEFAULT,configuredSearchMode:oe.SEARCH,setConfiguredSearchMode(){}},Lue=f.createContext(Oue),pYe=({children:e,shouldFetchSettings:t})=>{const r=Ds({enabled:t,reason:"thread-settings-provider"}),{organization:s}=gn({reason:"thread-settings-provider"}),a=dn(),{isMax:o}=yt();let l=a.preferredSearchMode;const c=l?Object.values(oe).includes(l):!1,{isMaxUpsellEnabled:u}=Nc();!u&&l!==oe.SEARCH&&(l=void 0,a.actions.setPreferredSearchMode(void 0));const d=mYe(),[m,p]=f.useState({...Oue,gpt4Limit:r.gpt4Limit,gpt4Total:r.gpt4Total,pplxAlphaLimit:r.pplxAlphaLimit,pplxBetaLimit:r.pplxBetaLimit,configuredModel:d,configuredSearchMode:Aa[d]??oe.SEARCH}),h=f.useCallback(k=>p(T=>({...T,configuredModel:k,configuredSearchMode:Aa[k]??T.configuredSearchMode})),[]),g=f.useCallback(()=>{h(ce.DEFAULT),a.actions.setPreferredSearchMode(oe.SEARCH)},[h,a.actions]),y=f.useCallback(k=>{p(T=>({...T,sources:k}))},[]),v=f.useCallback(k=>{p(T=>({...T,recency:k}))},[]),x=f.useCallback(k=>{p(T=>({...T,askInputReasoningModelPreference:k,askInputReasoningMode:!!k}))},[]),b=f.useCallback(k=>{p(T=>({...T,askInputReasoningMode:k}))},[]);f.useEffect(()=>{r.createLimit!==null&&p(k=>({...k,createLimit:r.createLimit}))},[r.createLimit]),f.useEffect(()=>{r.uploadLimit!==null&&r.uploadLimit!==void 0&&p(k=>({...k,uploadRateLimit:r.uploadLimit}))},[r.uploadLimit]),f.useEffect(()=>{r.gpt4Limit!==null&&p(k=>({...k,gpt4Limit:r.gpt4Limit}))},[r.gpt4Limit]),f.useEffect(()=>{r.gpt4Total!==null&&p(k=>({...k,gpt4Total:r.gpt4Total}))},[r.gpt4Total]),f.useEffect(()=>{r.pplxAlphaLimit!==null&&p(k=>({...k,pplxAlphaLimit:r.pplxAlphaLimit}))},[r.pplxAlphaLimit]),f.useEffect(()=>{r.pplxBetaLimit!==null&&p(k=>({...k,pplxBetaLimit:r.pplxBetaLimit}))},[r.pplxBetaLimit]),f.useEffect(()=>{r.hasLoadedSettings&&((m.configuredModel!==ce.DEFAULT&&r.gpt4Limit<=0||Er(m.configuredModel)===oe.RESEARCH&&r.pplxAlphaLimit<=0&&!o||Er(m.configuredModel)===oe.STUDIO&&r.pplxBetaLimit<=0&&!o)&&g(),(m.askInputReasoningMode||m.askInputReasoningModelPreference)&&r.gpt4Limit<=0&&g())},[g,r.gpt4Limit,r.pplxAlphaLimit,r.pplxBetaLimit,r.hasLoadedSettings,m.askInputReasoningMode,m.askInputReasoningModelPreference,m.configuredModel,o]),f.useEffect(()=>{const k=s?.settings?.disabled_model_preferences??[];c&&l&&k?.includes(l)&&g()},[c,s?.settings?.disabled_model_preferences,l,g,h]);const _=f.useCallback(()=>{const k=Math.max(m.createLimit-1,0);p(T=>({...T,createLimit:k}))},[m.createLimit]),w=f.useCallback((k=1)=>{if(m.uploadRateLimit==null)return;const T=Math.max(m.uploadRateLimit-k,0);p(j=>({...j,uploadRateLimit:T}))},[m.uploadRateLimit]),M={...m,setConfiguredModel:h,setSources:y,decrementCreateLimit:_,setUploadRateLimit:w,setGPT4Limit:k=>{p(T=>({...T,gpt4Limit:k}))},setPplxAlphaLimit:k=>{p(T=>({...T,pplxAlphaLimit:k}))},setPplxBetaLimit:k=>{p(T=>({...T,pplxBetaLimit:k}))},setRecency:v,askInputReasoningMode:m.askInputReasoningMode,isCopilot:m.configuredModel!==ce.DEFAULT,setAskInputReasoningMode:b,setAskInputReasoningModelPreference:x,configuredSearchMode:m.configuredSearchMode,setConfiguredSearchMode:k=>{p(T=>({...T,configuredSearchMode:k}))}};return i.jsx(Lue.Provider,{value:M,children:e})},Hn=()=>{const e=f.useContext(Lue);if(!e)throw new Error("useThreadConfig must be used within ThreadSettingsContext");return e};function Uh(){const{isMax:e,isPro:t}=yt(),{isMaxUpsellEnabled:n}=Nc(),{gpt4Limit:r,pplxAlphaLimit:s,pplxBetaLimit:a}=Hn();return f.useMemo(()=>l=>{let c=!1;return l===oe.RESEARCH?c=Math.min(r,s)<=0:c=Math.min(r,a)<=0,n&&!e&&t&&c&&(l===oe.RESEARCH||l===oe.STUDIO)},[n,e,t,r,s,a])}function Nc(){const{isEnterprise:e}=gn({reason:"max-tier"}),{isEnterpriseMaxUiEnabled:t}=Nue(),{value:n,loading:r}=At({flag:"max-upsell",defaultValue:!1,subjectType:"visitor_id",extraAttributes:{isEnterprise:e??!1}});return f.useMemo(()=>({isMaxUpsellEnabled:e&&t?!0:n,loading:r}),[n,r,e,t])}var hYe={};function Pa(){const{configuredModel:e,configuredSearchMode:t}=Hn();return f.useMemo(()=>t||(hYe.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e===ce.DEFAULT?oe.SEARCH:Aa[e]),[t,e])}const Bh=f.createContext({markTTV:()=>{},addPageTiming:()=>{},getPageStartTime:()=>0,getPageTimer:()=>ac(),addPageTimingOnce:()=>{}});function gYe({children:e}){const{startTimeFromTimeOriginRef:t}=_t(),n=f.useRef({}),{markTTV:r}=oMe(),s=f.useCallback(()=>(n.current[t.current]||(n.current[t.current]=ac(void 0,{nowFromTimeOrigin:t.current})),n.current[t.current]),[t]),a=f.useMemo(()=>({markTTV:()=>r(t.current),addPageTiming:(o,l={})=>s().addTiming(o,l),addPageTimingOnce:(o,l={})=>s().addTimingOnce(o,l),getPageStartTime:()=>t.current,getPageTimer:s}),[r,t,s]);return i.jsx(Bh.Provider,{value:a,children:e})}function yYe(){const{markTTV:e}=f.useContext(Bh);return e}function vYe(){const{addPageTiming:e}=f.useContext(Bh);return e}function Due(){const{getPageStartTime:e}=f.useContext(Bh);return e}function Fue(){const{getPageTimer:e}=f.useContext(Bh);return e}const Uue=f.createContext({markTTV:()=>{}});function dk({children:e,modules:t}){const{markTTV:n,addPageTimingOnce:r,getPageTimer:s}=f.useContext(Bh),a=s(),o=Ah(a),l=f.useRef(new Set),c=f.useCallback(d=>{r(`web.ttv.${d}`),l.current?.add(d),t.every(m=>l.current?.has(m))&&(n(),l.current.clear())},[n,t,r]);f.useEffect(()=>{!o||o===a||l.current.clear()},[a,o]);const u=f.useMemo(()=>({markTTV:c}),[c]);return i.jsx(Uue.Provider,{value:u,children:e})}function xYe(){const{markTTV:e}=f.useContext(Uue);return e}function cFt(e={}){const t=yYe();f.useEffect(()=>{e.skip||t()},[e.skip,t])}function _1(e,t={}){const n=xYe();f.useEffect(()=>{t.skip||n(e)},[n,e,t.skip])}const bYe=["ppl-ai-file-upload","ppl-ai-sandbox-file-upload","ppl-ai-experimental-file-upload"],Bue=e=>bYe.some(t=>e.url.includes(`${t}.s3.amazonaws.com/web/direct-files`));var KA;(function(e){e.token_limit_exceeded="token_limit_exceeded",e.parsing_error="parsing_error",e.unknown_error="unknown_error",e.unauthorized="unauthorized",e.no_data_received="no_data_received",e.file_type_not_supported="file_type_not_supported",e.image_failed_moderation="image_failed_moderation"})(KA||(KA={}));var Xy;(function(e){e.generic_upload_error="generic_upload_error",e.unsupported_type="unsupported_type",e.too_large="too_large",e.too_small="too_small",e.no_name="no_name",e.failed_moderation="failed_moderation",e.rate_limited="rate_limited",e.over_file_count="over_file_count",e.over_image_count="over_image_count"})(Xy||(Xy={}));const z_=e=>{if(C1(e))return"application/pdf";const n=e.split("?")[0].split("#")[0].split(".").pop()?.toLowerCase();return n&&{png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jp2:"image/jp2",gif:"image/gif",bmp:"image/bmp",tiff:"image/tiff",tif:"image/tiff",svg:"image/svg+xml",webp:"image/webp",ico:"image/x-icon",avif:"image/avif",heic:"image/heic",heif:"image/heif",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",csv:"text/csv",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",md:"text/markdown"}[n]||"application/octet-stream"},_Ye=e=>{const t=e.meta_data?.repo_type;return e.is_attachment&&!t&&!e.meta_data?.file_uuid},wYe=e=>{if(!e)return!1;try{return new URL(e).hostname.includes("s3.amazonaws.com")}catch{return!1}},ji=dt({token_limit_exceeded:{id:"cnFlyTXVDl",defaultMessage:"File {filename} exceeds the model's token limit."},parsing_error:{id:"RdRRX8+YG/",defaultMessage:"Failed to parse file {filename}."},file_type_not_supported:{id:"IaflMSTTq6",defaultMessage:"File type not supported for {filename}."},unknown_error:{id:"zhy7qBi3Eu",defaultMessage:"Unknown error for file {filename}."},unauthorized:{id:"6bOe+cTUhc",defaultMessage:"User not authorised to access file {filename}."},no_data_received:{id:"34PXW7VvKh",defaultMessage:"No data received for file {filename}."},generic_upload_error:{id:"xVFvYDY5wK",defaultMessage:"File upload failed"},unsupported_type:{id:"VUOyYEDS96",defaultMessage:"The file type you uploaded is not supported."},too_large:{id:"XBcIjOYq8V",defaultMessage:"File too large: {max} maximum."},too_small:{id:"ZUyiNCx0Aw",defaultMessage:"File too small."},no_name:{id:"IkAmckATMw",defaultMessage:"File name is required."},image_failed_moderation:{id:"YCCLnMQDPb",defaultMessage:"File {filename} failed moderation."},failed_moderation:{id:"hnN6c9ExET",defaultMessage:"File upload failed moderation."},rate_limited:{id:"el7NlqcDQZ",defaultMessage:"You have reached the daily upload limit for your plan."},over_file_count:{id:"2+5sg16GUy",defaultMessage:"You are allowed up to {maxNumFiles, plural, one {# file} other {# files}} at once."},over_image_count:{id:"FIudmpgA1s",defaultMessage:"You are allowed up to {maxNumImages, plural, one {# image} other {# images}} at once."}}),CYe=e=>{if(e.startsWith("/rest/connectors/wiley/"))return"WILEY";if(e.includes("drive.google.com")||e.includes("connectors/google-drive")||e.includes("docs.google.com"))return"GOOGLE_DRIVE";if(e.includes("onedrive.live.com")||e.includes("1drv.ms")||e.includes("connectors/onedrive"))return"ONEDRIVE";if(e.includes(".sharepoint.com")||e.includes("connectors/sharepoint"))return"SHAREPOINT";if(e.includes("dropbox.com/preview")||e.includes("connectors/dropbox"))return"DROPBOX";if(e.includes("app.box.com/file")||e.includes("connectors/box"))return"BOX"},Vue=e=>!!(e?.meta_data?.connection_type&&e?.meta_data.connection_type!=="LOCAL")||e.is_attachment&&!!CYe(e.url),Vh=e=>e.is_attachment&&(Bue(e)||Km(e.url)||C1(e.url)),Wue=e=>e.trim().replace(/\/+$/,"").replace(/^(?:https?:\/\/)?(?:www\.)?/,""),uFt=e=>!!new RegExp("^((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,})(\\/[\\w\\-._~:/@!$&'()*+,;=%.]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e);function Zs(e){const t=/(?:https?:\/\/)?(?:www\.)?([a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*(?:\.[a-zA-Z]{2,})?|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::\d+)?/,n=e.match(t);return n&&n.length>0?n[1]||n[0]:"unknown"}function $ue(e){const t=Zs(e);return t==="unknown"?"unknown":t.replace(/\.[^.]*$/,"")}function w1(e){return e.includes("calendar.google.com")||e.includes("google.com/calendar")?"https://calendar.google.com":e.includes("mail.google.com")||e.includes("google.com/mail")?"https://mail.google.com":EYe(e)?"www.perplexity.ai":Zs(e)}function dFt(e){return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`}function Wh(e){const t=["(?:youtube?\\.com\\/","(?:[^/\\n\\s]+\\/\\S+\\/","|(?:v|e(?:mbed)?)\\/","|\\S*?[?&]v=",")","|youtu\\.be\\/",")([a-zA-Z0-9_-]{11})"].join(""),n=new RegExp(t),r=e.match(n);if(r&&r[1].length==11)return r[1]}const fFt=e=>e.indexOf("unsplash.com")>-1;function Km(e){return e.startsWith("https://pplx-res.cloudinary.com/")||e.startsWith("https://api.cloudinary.com/v1_1/pplx/image/download")}function C1(e){return e.startsWith("https://image-ppubs.uspto.gov/")}function mFt(e){return e.includes("code-interpreter-files.s3.amazonaws.com")||e.includes("pplx_code_interpreter")}function pFt(e){return e.includes("user-gen-media-assets")}function YA(e){return e.replace(/\/s--[^/]+--\/v\d+\//,"/")}function aO(e){return!Vh(e)&&!!e.url&&!Wh(e.url)&&!Km(e.url)&&!e.is_memory&&!e.is_conversation_history}const oO=e=>{try{const r=new URL(e).pathname.replace(/^\//,"").split("/"),s=r[r.length-1];return decodeURIComponent(s)}catch{return"File"}},SYe=e=>{const t=e,n=t.indexOf("/"),r=Math.max(23,n+16);return t.length>r?t.substring(0,r-1)+"":t},hFt=(e,t)=>`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent([e,t].filter(Boolean).join(", "))}`,gFt=(e,t)=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent([e,t].filter(Boolean).join(", "))}`;function Hue(e,t){let n=e;const r=e.match(/{([^}]+)}/g)||[];for(const s of r){const a=s.slice(1,-1);t[a]!==void 0?n=n.replace(s,t[a]):n=n.replace(s,"")}try{return new URL(n).toString()}catch{return n}}function yFt(e){return e.includes("https://openai.com/index/image-generation-api/")}function EYe(e){return e.startsWith("chrome://")||e.startsWith("chrome-extension://")||e.startsWith("browser-extension://")||e.startsWith("browser://")||e.startsWith("comet://")}const vFt=e=>e.replace("comet://","chrome://"),zue=e=>{if(!e)return null;try{return new URL(e)}catch{return null}},xFt=async e=>{const t=[];return await Promise.all(e.map(async n=>{try{(await fetch(n,{method:"HEAD"})).ok&&t.push(n)}catch(r){console.debug(`URL ${n} is not reachable:`,r)}})),t},iO=e=>{try{const t=new URL(e);return["AWSAccessKeyId","Signature","Expires"].every(n=>t.searchParams.has(n))}catch{return!1}},QA=e=>{if(!e)return"";const t=e.indexOf("?");return(t===-1?e:e.substring(0,t)).replace(/\/+$/,"")},bFt=e=>{try{return new URL(e).origin===window.location.origin}catch{return!1}};var BG={};const MYe=e=>{try{return new URL(e),!0}catch{return!1}},kYe=({inPageOverride:e,dslQuery:t,existingEntryUUID:n,existingUuid:r,deletedUrls:s,redoSearch:a,collection:o,isRelatedQuery:l,isSponsored:c,relatedQueryUUID:u,inDomain:d,inPage:m,newFrontendContextUUID:p,promptSource:h,querySource:g,timeFromFirstType:y,utmSource:v,disableWidgets:x,isNavSuggestionsDisabled:b,entropyBrowser:_,clientPayloadUUID:w,isIncognito:C,sessionId:S,modelPreferenceSubmit:E,lastBackendUUID:M,deviceLocation:k,newAttachments:T,threadMetadataRwToken:j,forceNew:R,finalSources:O,finalRecency:P,mode:N,frontendUUID:I,isWindowsApp:D,browserHistorySummaryNumDays:F,mentions:B,reason:V,side_by_side_metadata:$,skipSearchEnabled:G,browserHistorySummaryMaxResults:X,sidecarTabId:Y,sidecarUrl:W,sidecarTitle:H,sidecarSecondaryTabId:Z,sidecarSecondaryUrl:re,sidecarSecondaryTitle:q,isFirstEntry:J,alwaysSearchOverride:te,overrideNoSearch:se,cometMaxAssistantEnabled:de,resumingQuery:fe,resumeFromUuid:ve,cometIsMissionControl:ue,mcpTools:ie})=>{const be=k?{location_lat:k.latitude,location_lng:k.longitude,name:""}:null,Se=m1(),ke=Sa().erp,Re=rn(),je=Re?{source:l7,client_payload_cache_key:w}:{},ct=D?{source:$m}:{};let tt=!1,ut="",we="";if(Re&&(tt=!0,J&&(ut=vze({entropyBrowser:_,browserHistorySummaryNumDays:F,browserHistorySummaryMaxResults:X,reason:V}),we=_.getLastOmniboxInput(I)??""),g==="default_search"&&(MYe(we)&&(tt=!1,ee.info("[comet] Local search disabled due to URL input in omnibox",{lastOmniboxInput:we})),!we))){const pt=zue(document.referrer);(!pt||pt.origin!==location.origin||pt.pathname!=="/.well-known/comet-omnibox-text"&&pt.pathname!=="/b/try-assistant")&&(tt=!1,ee.info("[comet] Local search disabled due to unsecure referer",{lastOmniboxInput:we,parsedReferrer:pt}))}const Ue=g==="followup"?"followup-sidecar":"sidecar";let Ot;return Re&&(Ot=ke==="sidecar"?{rendering_place:ke,sidecar_tab_id:Y,sidecar_url:W,sidecar_title:H,sidecar_secondary_tab_id:Z,sidecar_secondary_url:re,sidecar_secondary_title:q}:{rendering_place:ke??"unknown"}),{last_backend_uuid:M??void 0,read_write_token:R?void 0:j,existing_entry_uuid:R?void 0:n,deleted_urls:s??void 0,attachments:T,language:nu(),timezone:i7,in_page:e??m,in_domain:d,search_focus:O.length===0?"writing":"internet",sources:O,search_recency_filter:P,frontend_uuid:r??I,redo_search:a,mode:N,target_collection_uuid:o?.uuid,model_preference:E??void 0,is_related_query:l??!1,is_sponsored:c??!1,related_query_uuid:u,visitor_id:Se??void 0,user_nextauth_id:S??void 0,frontend_context_uuid:p??void 0,prompt_source:h??void 0,query_source:BG.NEXT_PUBLIC_IS_SIDECAR_BUILD?Ue:g??"",browser_history_summary_key:ut||void 0,is_incognito:C,time_from_first_type:y??void 0,local_search_enabled:tt,use_schematized_api:!0,send_back_text_in_streaming_api:!1,supported_block_use_cases:Wae,utm_source:v,client_coordinates:be,mentions:B,dsl_query:t,skip_search_enabled:G,is_nav_suggestions_disabled:b||!!BG.NEXT_PUBLIC_IS_SIDECAR_BUILD,...g==="followup"?{followup_source:"link"}:{},...je,...ct,...x?{disable_widgets:x}:{},always_search_override:te??!1,override_no_search:se??!1,comet_info:Ot,...$&&{side_by_side_metadata:$},client_search_results_cache_key:Re&&I?`nav-${I}`:void 0,comet_max_assistant_enabled:de,resuming_query:fe,resume_from_uuid:ve,comet_is_mission_control:ue,mcp_tools:ie}},Gue=()=>{const e=Nt();return rn()&&e?.startsWith("/b/home")},TYe=["/?","/search","/discover"],NYe=["/"],lO=e=>e?!NYe.some(t=>e===t)&&!TYe.some(t=>e.startsWith(t)):!0,XA=()=>bs.getItem("signUpBannerDismissed")!=="true",AYe=()=>bs.setItem("signUpBannerDismissed","true"),jYe=()=>bs.setItem("signUpBannerDismissed","reset"),que=A.memo(({portalTarget:e})=>{const{$t:t}=Q(),[n,r]=f.useState(!1),s=Nt(),{trackEvent:a}=Me(),{keysRequiringRerender:o,removeKeyRequiringRerender:l,addKeyRequiringRerender:c}=ju(),u=Gue(),[d,m]=f.useState(""),p=f.useCallback(()=>{m(lE(window.location.href,Sl,Ie.FLOATING_SIGNUP))},[]);if(f.useEffect(()=>{p()},[p]),f.useEffect(()=>{r(XA())},[]),f.useEffect(()=>{o.includes("floating-signup")&&(r(XA()),p()),l("floating-signup")},[l,o]),f.useEffect(()=>{n&&a("floating sign up shown",{})},[n,a]),lO(s)&&!u||!n)return null;const h=()=>{r(!1),AYe(),a("floating sign up dismissed",{}),c("sidebar-sign-in-button")};return i.jsx(Nu,{portalTarget:e??void 0,children:i.jsx("div",{className:"bottom-md right-md fixed hidden w-[300px] md:block",children:i.jsx(z,{variant:"background",className:U("px-md py-lg animate-in fade-in ring-offsetPlus rounded-lg shadow-md ring-1 duration-300 ease-out"),children:i.jsxs("div",{children:[i.jsx("div",{className:"absolute right-0 top-0",children:i.jsx(Te,{pill:!0,size:"small",icon:Lt,onClick:h,testId:"floating-signup-close-button"})}),i.jsx("div",{className:"pb-md flex justify-center",children:i.jsx(Na,{variant:"mark",color:"super",size:"small"})}),i.jsx(L,{variant:"baseSemi",className:"mb-xs text-center",children:t({defaultMessage:"Sign in or create an account",id:"eN8MTJfuKA"})}),i.jsx(L,{variant:"small",color:"light",className:"text-center",children:t({defaultMessage:"Unlock {proSearch} and History",id:"azC54WXvtr"},{proSearch:"Pro Search"})}),i.jsx("div",{className:"mt-md",children:i.jsx(tv,{onClose:h,redirectUrl:d,showCloseButton:!1,autoFocus:!1,loginButtonsStyle:"highlightPrimary"})})]})})})})});que.displayName="FloatingSignUp";const RYe=async({eventName:e,isDeferred:t,clickId:n,reason:r})=>{try{const{data:s,error:a}=await ne.POST("/rest/attribution/dub/lead",r,{timeoutMs:Pe(),body:{event_name:e,is_deferred:t,click_id:n}});if(a)throw a;return{success:s?.success??!1}}catch(s){return ee.error("Failed to track Dub lead event",s),{success:!1}}},IYe=2,PYe=10,OYe=({response:e,isUserLoggedIn:t,submissionCount:n,session:r,queryCountMobile:s,isWindowsApp:a,addKeyRequiringRerender:o,setSubmissionCount:l,trackEvent:c,setShouldShowProductFeedback:u,setFeedbackEntryUUID:d,setShouldShowRecruitmentBanner:m,sendQueryEventSingular:p,maybeSendNthQueryEventSingular:h,recruitmentBannerEnabled:g,reason:y})=>{const v=rn();if(v&&iMe(t),e?.backend_uuid){const b=e.backend_uuid;fPe({entryUUID:e.backend_uuid,params:{query:e.query_str||"",sources:e.sources?.sources??[]},reason:y}).then(_=>{u(_),_&&c("query feedback shown",{entry_uuid:b})}),g&&yPe({entryUUID:b,reason:y}).then(_=>{m(_),_&&c("power user recruitment banner shown",{})}),d(b)}!t&&n===IYe-1&&(jYe(),o("floating-signup")),t&&r?.user?.id&&s===0&&n===PYe-1&&o("floating-mobile-download"),a?o("floating-milestone-refetch-legacy"):t&&o("floating-milestone-refetch"),l(n+1),p(),h({isCometBrowser:v});const x=mte();v&&x===1&&(RYe({eventName:"activated",isDeferred:!1,clickId:null,reason:"comet attribution"}),c("first comet query finished",{}))},LYe=({inPage:e})=>e?window.getSelection()?.toString():void 0;function DYe(){const{value:e}=Wze({flag:"client-context-max-chars",subjectType:"visitor_id",defaultValue:5e4});return e}function cO(){const{value:e}=Hze({flag:"max-file-upload-count",subjectType:"user_nextauth_id",defaultValue:10});return e}const FYe=({isFollowup:e,isInSameThread:t,sourcesOverride:n,firstResultSources:r,firstResultRecency:s,defaultSources:a,defaultRecency:o})=>n?{finalSources:n,finalRecency:o}:!e||!t?{finalSources:a,finalRecency:o}:{finalSources:Array.isArray(r)?r:[],finalRecency:s};var fk,VG;function UYe(){if(VG)return fk;VG=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof Ya=="object"&&Ya&&Ya.Object===Object&&Ya,u=typeof self=="object"&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),m=Object.prototype,p=m.toString,h=Math.max,g=Math.min,y=function(){return d.Date.now()};function v(C,S,E){var M,k,T,j,R,O,P=0,N=!1,I=!1,D=!0;if(typeof C!="function")throw new TypeError(e);S=w(S)||0,x(E)&&(N=!!E.leading,I="maxWait"in E,T=I?h(w(E.maxWait)||0,S):T,D="trailing"in E?!!E.trailing:D);function F(Z){var re=M,q=k;return M=k=void 0,P=Z,j=C.apply(q,re),j}function B(Z){return P=Z,R=setTimeout(G,S),N?F(Z):j}function V(Z){var re=Z-O,q=Z-P,J=S-re;return I?g(J,T-q):J}function $(Z){var re=Z-O,q=Z-P;return O===void 0||re>=S||re<0||I&&q>=T}function G(){var Z=y();if($(Z))return X(Z);R=setTimeout(G,V(Z))}function X(Z){return R=void 0,D&&M?F(Z):(M=k=void 0,j)}function Y(){R!==void 0&&clearTimeout(R),P=0,M=O=k=R=void 0}function W(){return R===void 0?j:X(y())}function H(){var Z=y(),re=$(Z);if(M=arguments,k=this,O=Z,re){if(R===void 0)return B(O);if(I)return R=setTimeout(G,S),F(O)}return R===void 0&&(R=setTimeout(G,S)),j}return H.cancel=Y,H.flush=W,H}function x(C){var S=typeof C;return!!C&&(S=="object"||S=="function")}function b(C){return!!C&&typeof C=="object"}function _(C){return typeof C=="symbol"||b(C)&&p.call(C)==n}function w(C){if(typeof C=="number")return C;if(_(C))return t;if(x(C)){var S=typeof C.valueOf=="function"?C.valueOf():C;C=x(S)?S+"":S}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var E=a.test(C);return E||o.test(C)?l(C.slice(2),E?2:8):s.test(C)?t:+C}return fk=v,fk}var BYe=UYe();const WG=io(BYe);var Kue=typeof window<"u"?f.useLayoutEffect:f.useEffect;function c2(e,t,n,r){const s=f.useRef(t);Kue(()=>{s.current=t},[t]),f.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const o=l=>{s.current(l)};return a.addEventListener(e,o,r),()=>{a.removeEventListener(e,o,r)}},[e,n,r])}function u2(e){const t=f.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return Kue(()=>{t.current=e},[e]),f.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[t])}var mk=typeof window>"u";function uE(e,t,n={}){const{initializeWithValue:r=!0}=n,s=f.useCallback(p=>n.serializer?n.serializer(p):JSON.stringify(p),[n]),a=f.useCallback(p=>{if(n.deserializer)return n.deserializer(p);if(p==="undefined")return;const h=t instanceof Function?t():t;let g;try{g=JSON.parse(p)}catch(y){return console.error("Error parsing JSON:",y),h}return g},[n,t]),o=f.useCallback(()=>{const p=t instanceof Function?t():t;if(mk)return p;try{const h=window.localStorage.getItem(e);return h?a(h):p}catch(h){return console.warn(`Error reading localStorage key ${e}:`,h),p}},[t,e,a]),[l,c]=f.useState(()=>r?o():t instanceof Function?t():t),u=u2(p=>{mk&&console.warn(`Tried setting localStorage key ${e} even though environment is not a client`);try{const h=p instanceof Function?p(o()):p;window.localStorage.setItem(e,s(h)),c(h),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}catch(h){console.warn(`Error setting localStorage key ${e}:`,h)}}),d=u2(()=>{mk&&console.warn(`Tried removing localStorage key ${e} even though environment is not a client`);const p=t instanceof Function?t():t;window.localStorage.removeItem(e),c(p),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))});f.useEffect(()=>{c(o())},[e]);const m=f.useCallback(p=>{p.key&&p.key!==e||c(o())},[e,o]);return c2("storage",m),c2("local-storage",m),[l,u,d]}function S1(e){const t=f.useRef(e);t.current=e,f.useEffect(()=>()=>{t.current()},[])}function _Ft(e,t=500,n){const r=f.useRef();S1(()=>{r.current&&r.current.cancel()});const s=f.useMemo(()=>{const a=WG(e,t,n),o=(...l)=>a(...l);return o.cancel=()=>{a.cancel()},o.isPending=()=>!!r.current,o.flush=()=>a.flush(),o},[e,t,n]);return f.useEffect(()=>{r.current=WG(e,t,n)},[e,t,n]),s}function Yue({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:s=!1,onChange:a}={}){var o;const[l,c]=f.useState(null),[u,d]=f.useState(()=>({isIntersecting:s,entry:void 0})),m=f.useRef();m.current=a;const p=((o=u.entry)==null?void 0:o.isIntersecting)&&r;f.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||p)return;const y=new IntersectionObserver(v=>{const x=Array.isArray(y.thresholds)?y.thresholds:[y.thresholds];v.forEach(b=>{const _=b.isIntersecting&&x.some(w=>b.intersectionRatio>=w);d({isIntersecting:_,entry:b}),m.current&&m.current(_,b)})},{threshold:e,root:t,rootMargin:n});return y.observe(l),()=>{y.disconnect()}},[l,JSON.stringify(e),t,n,p,r]);const h=f.useRef(null);f.useEffect(()=>{var y;!l&&((y=u.entry)!=null&&y.target)&&!r&&!p&&h.current!==u.entry.target&&(h.current=u.entry.target,d({isIntersecting:s,entry:void 0}))},[l,u.entry,r,p,s]);const g=[c,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function Que(){const[e,t]=f.useState(!1);return f.useEffect(()=>{t(!0)},[]),e}function VYe(){const e=f.useRef(!1);return f.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),f.useCallback(()=>e.current,[])}var $G={width:void 0,height:void 0};function WYe(e){const{ref:t,box:n="content-box"}=e,[{width:r,height:s},a]=f.useState($G),o=VYe(),l=f.useRef({...$G}),c=f.useRef(void 0);return c.current=e.onResize,f.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const u=new ResizeObserver(([d])=>{const m=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",p=HG(d,m,"inlineSize"),h=HG(d,m,"blockSize");if(l.current.width!==p||l.current.height!==h){const y={width:p,height:h};l.current.width=p,l.current.height=h,c.current?c.current(y):o()&&a(y)}});return u.observe(t.current,{box:n}),()=>{u.disconnect()}},[n,t,o]),{width:r,height:s}}function HG(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}var pk=typeof window>"u";function uO(e,t,n={}){const{initializeWithValue:r=!0}=n,s=f.useCallback(p=>n.serializer?n.serializer(p):JSON.stringify(p),[n]),a=f.useCallback(p=>{if(n.deserializer)return n.deserializer(p);if(p==="undefined")return;const h=t instanceof Function?t():t;let g;try{g=JSON.parse(p)}catch(y){return console.error("Error parsing JSON:",y),h}return g},[n,t]),o=f.useCallback(()=>{const p=t instanceof Function?t():t;if(pk)return p;try{const h=window.sessionStorage.getItem(e);return h?a(h):p}catch(h){return console.warn(`Error reading sessionStorage key ${e}:`,h),p}},[t,e,a]),[l,c]=f.useState(()=>r?o():t instanceof Function?t():t),u=u2(p=>{pk&&console.warn(`Tried setting sessionStorage key ${e} even though environment is not a client`);try{const h=p instanceof Function?p(o()):p;window.sessionStorage.setItem(e,s(h)),c(h),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))}catch(h){console.warn(`Error setting sessionStorage key ${e}:`,h)}}),d=u2(()=>{pk&&console.warn(`Tried removing sessionStorage key ${e} even though environment is not a client`);const p=t instanceof Function?t():t;window.sessionStorage.removeItem(e),c(p),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))});f.useEffect(()=>{c(o())},[e]);const m=f.useCallback(p=>{p.key&&p.key!==e||c(o())},[e,o]);return c2("storage",m),c2("session-storage",m),[l,u,d]}const $h=()=>{const[e,t]=uE("deviceLocation",void 0),n=f.useCallback(a=>{t(a),a?(Qt("lat",a.latitude.toString()),Qt("long",a.longitude.toString())):(Hd("lat"),Hd("long"))},[t]),[r,s]=f.useState(void 0);return f.useEffect(()=>{if(!navigator.geolocation||!("permissions"in navigator))return;const a=()=>{navigator.geolocation.getCurrentPosition(o=>{n({latitude:o.coords.latitude,longitude:o.coords.longitude})},null,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};navigator.permissions.query({name:"geolocation"}).then(o=>{s(o.state),o.state==="granted"?a():n(void 0),o.addEventListener("change",()=>{s(o.state),o.state==="denied"?n(void 0):o.state==="granted"&&a()})}).catch(()=>{})},[n]),f.useMemo(()=>({location:e,permissionStatus:r,isPreciseLocationEnabled:r==="granted"&&!isNaN(e?.latitude??0)&&!isNaN(e?.longitude??0)}),[e,r])},Zy=/<q>(.*?)<\/q>/s,zG=(e,t)=>{if(!e||!t)return e;const n=e.trim(),r=n[n.length-1];return r&&!["!","?",".",":",";"].includes(r)?`${n}. ${t}`:`${n} ${t}`};function hc(e,t){if(!e)return{quote:null,actualQuery:null};if(!Zy.test(e)){const l=t?.join(" ").trim();return{quote:null,actualQuery:l?zG(e,l):e}}const s=e.match(Zy)?.[1]||null;let a=e.replace(Zy,"").trim();const o=t?.join(" ").trim();return o&&(a=zG(a,o)),{quote:s,actualQuery:a}}function $Ye(e,t){const n=t.trim();return n?Zy.test(e)?e.replace(Zy,`<q>${n}</q>`):e.length===0?n:`<q>${n}</q> ${e}`:e}var hk={};const HYe={submitQuery:()=>{ee.error("submitQuery must be used within PerplexityQueryStateProvider")},handleBotStep:()=>{ee.error("handleBotStep must be used within PerplexityQueryStateProvider")},deleteLastResult:()=>{ee.error("deleteLastResult must be used within PerplexityQueryStateProvider")},shouldShowProductFeedback:!1,shouldShowRecruitmentBanner:!1,feedbackEntryUUID:null,quote:null,setQuote:()=>{},updateLocalStatePostStream:()=>{}},zYe=3,GYe=6,qYe=2,Xue=f.createContext(HYe),KYe=(e,t,n,r,s)=>{if(!(n&&!r)&&!(e&&!t))return r?r.backend_uuid:s},YYe=({children:e,shouldFetchSettings:t})=>{const n="perplexity-query-state-provider",r=_t(),{trackEvent:s}=Me(),{session:a}=Ct(),o=wr(),{location:l}=$h(),[c,u]=f.useState(null),{device:{isWindowsApp:d,isMobile:m,isSamsungBrowser:p}}=Et(),h=Pa(),g=Fue(),{isMaxAssistantMode:y}=dn(),{sources:v,recency:x,isCopilot:b,setAskInputReasoningMode:_,setAskInputReasoningModelPreference:w,configuredModel:C}=Hn(),{specialCapabilities:S}=Or(),E=Oo(),{firstResult:M,lastResult:k,actions:{setCurrentStreamId:T}}=Ht(),{hasAiProfile:j,queryCountMobile:R}=Ds({enabled:t,reason:n}),[O,P]=f.useState(!1),[N,I]=f.useState(!1),[D,F]=f.useState(null),B=Qe(),{addKeyRequiringRerender:V}=ju(),{value:$}=At({flag:"skip-search-button",subjectType:"visitor_id",defaultValue:!1}),G=DYe(),{isIncognito:X}=oa({reason:n}),[Y,W]=f.useState(0),{sendQueryEventSingular:H,maybeSendNthQueryEventSingular:Z,sendResurrectedActivationEventSingular:re}=sO(),q=Fs(),J=XUe(),{value:te}=jr({flag:"power-user-recruitment-banner",defaultValue:!1}),{isMaxUpsellEnabled:se}=Nc(),{isMax:de}=yt(),{value:{max_results:fe,num_days:ve}}=FP({flag:"browser-history-summary-settings",defaultValue:{max_results:500,num_days:7}}),ue=cO(),ie=Iue(),be=f.useCallback(({rawQuery:Re,dslQuery:je,fork:ct,inPageOverride:tt,copilotOverride:ut,existingEntryUUID:we,existingUuid:Ue,deletedUrls:Ot,redoSearch:pt,attachments:Mt,collection:qe,modelPreferenceOverride:Be,isRelatedQuery:Oe,isSponsored:nt,relatedQueryUUID:St,inDomain:Yt,inPage:Ft,newFrontendContextUUID:Gt,existingFrontendContextUUID:Cn,promptSource:ln,querySource:Ke,sourcesOverride:He,submitFromArticleOverride:st,timeFromFirstType:Vt,utmSource:en,disableWidgets:On,isNavSuggestionsDisabled:_e,deviceLocation:Ge,shouldRedirectToBackendUUID:We,onThreadSlugReceived:rt,incognitoOverride:et,mentions:kt=[],shouldUsePageStartTime:_n,side_by_side_metadata:tn,frontendUUID:cn=dr(),alwaysSearchOverride:Mr,overrideNoSearch:La,resumingQuery:mo,resumeFromUuid:qo,resumeFromPlaceholder:$u,cometIsMissionControl:Uf})=>{if(Re.trim().length===0&&!c){ee.error("Submit failed: empty query");return}const ht=kt.filter(Ln=>Ln.type==="tab").map(Ln=>({id:Number(Ln.id),url:Ln.url}));if(!B&&!p&&!S.unlimitedProSearch){const Ln=Y+1;m&&!fp()?Ln%qYe===1&&V("visitor-gate"):Ln%GYe===0?V("visitor-gate-ii"):Ln%zYe===0&&V("visitor-gate")}const pr=!!Gt,Ni=[...new Set([...Mt??[]])].slice(0,ue).filter(Ln=>!Ot?.includes(Ln)),Pc=rn()&&(!!hk.NEXT_PUBLIC_IS_SIDECAR_BUILD||!!ht?.length),ca=Pc?ja():void 0,xg=(ut??b)||!!hk.NEXT_PUBLIC_IS_SIDECAR_BUILD||S.unlimitedProSearch,Al=xg?"copilot":"concise";let Da=C??ce.DEFAULT;Da===ce.DEFAULT&&S.unlimitedProSearch&&(Da=ce.PRO),(h===oe.RESEARCH||h===oe.STUDIO||h===oe.STUDY)&&(Da=h===oe.RESEARCH?ce.ALPHA:h===oe.STUDIO?ce.BETA:ce.STUDY,se&&de&&(Da=C));const zu=Koe.some(Ln=>Ln.is_reasoning_model&&Ln.search_model===Da);Be?Da=Be:(_(zu),zu||w(null));const bg=KYe(pr,ct??!1,M?.backend_uuid===we,st??null,k?.backend_uuid??null);lMe(),cMe(()=>{s("resurrected activated"),re()}),Er(Da)===oe.RESEARCH?uMe():Er(Da)===oe.STUDIO&&dMe();const Lx=!!bg,Dx=M?.frontend_context_uuid===Cn,_g=FYe({isFollowup:Lx,isInSameThread:Dx,sourcesOverride:He,firstResultSources:M?.sources?.sources,firstResultRecency:M?.search_recency_filter,defaultSources:v??[],defaultRecency:x??null}),{finalRecency:Gu,finalSources:wg}=_g;let Ai;q.mcpTools&&(Ai=Object.entries(q.mcpTools).filter(([Ln])=>!q.mcpDisabledServers?.has(Ln)).flatMap(([Ln,Bx])=>{const Vx=q.mcpToolsSettings?.[Ln]??{};return Bx.filter(Cg=>{const Wx=Cg.tool?.name??Cg.id??"",Sg=Vx[Wx];return Sg?Sg.enabled!==!1:!0})}));const Vf=LYe({inPage:tt??Ft})||c,Oc=(Vf?$Ye(Re,Vf):Re).trim();if(!Oc){ee.error("Submit failed: empty query");return}const L5=we==M?.backend_uuid||!bg,D5=hUe({rawQuery:Oc,fork:ct,existingEntryUUID:we,existingUuid:Ue,collection:qe,isRelatedQuery:Oe,newFrontendContextUUID:Gt,existingFrontendContextUUID:Cn,submitFromArticleOverride:st,isNavSuggestionsDisabled:_e,isCopilot:xg,modelPreferenceSubmit:Da,newAttachments:Ni,firstResultFrontendContextUUID:M?.frontend_context_uuid,isPersonalized:j,forceNew:pr,querySource:Ke,lastResultBackendUUID:k?.backend_uuid,finalSources:wg,finalRecency:Gu??void 0,uuid:cn,threadMetadataTitle:M?.thread_title,threadMetadataThreadUrlSlug:M?.thread_url_slug,side_by_side_metadata:tn}),Wf=kYe({redoSearch:pt,collection:qe,dslQuery:je,isRelatedQuery:Oe,isSponsored:nt,relatedQueryUUID:St,inDomain:Yt,inPage:Ft,newFrontendContextUUID:Gt,promptSource:ln,querySource:Ke,timeFromFirstType:Vt,utmSource:en,disableWidgets:On,isNavSuggestionsDisabled:_e,isWindowsApp:d,isIncognito:et??X,sessionId:a?.user?.id,modelPreferenceSubmit:Da,clientPayloadUUID:ca,lastBackendUUID:bg,deviceLocation:Ge=Ge??l,newAttachments:Ni,threadMetadataRwToken:E,forceNew:pr,finalSources:wg,finalRecency:Gu,mode:Al,frontendUUID:cn,entropyBrowser:o,existingEntryUUID:we,deletedUrls:Ot,browserHistorySummaryNumDays:ve,mentions:kt,side_by_side_metadata:tn,reason:n,skipSearchEnabled:$,browserHistorySummaryMaxResults:fe,sidecarTabId:q.sidecarSourceTab.tabId,sidecarTitle:q.sidecarSourceTab.title,sidecarUrl:q.sidecarSourceTab.url,sidecarSecondaryTabId:q.sidecarSourceTab.secondaryTab?.tabId,sidecarSecondaryUrl:q.sidecarSourceTab.secondaryTab?.url,sidecarSecondaryTitle:q.sidecarSourceTab.secondaryTab?.title,isFirstEntry:L5,alwaysSearchOverride:Mr,overrideNoSearch:La,cometMaxAssistantEnabled:y,resumingQuery:mo,resumeFromUuid:qo,cometIsMissionControl:Uf,mcpTools:Ai});Gt&&ie(Oc,Wf,Wf.frontend_uuid),u(null);const Fx={params:{...Wf,version:wi},query_str:Oc};function F5(Ln){if(rt){if(!Ln.thread_url_slug)throw new Error("thread_url_slug is required on first message");rt(Ln.thread_url_slug)}We&&r.push(`/search/${Ln.thread_url_slug}`)}const Ux=J(Fx,{onFirstMessageReceived:F5,placeholderChunk:$u||{...D5,backend_uuid:we||vie},timer:_n?g():ac(void 0,{nowFromTimeOrigin:performance.now()}),reason:n});Pc&&ca&&fze({clientPayloadCacheKey:ca,cometBrowser:o,maxChars:G,attachedTabs:ht,includeSidecar:!!hk.NEXT_PUBLIC_IS_SIDECAR_BUILD,reason:n,cometState:q,requestId:Ux.id.description}),T(Ux.id.description)},[c,B,ue,b,C,h,k?.backend_uuid,M?.frontend_context_uuid,M?.sources?.sources,M?.search_recency_filter,M?.thread_title,M?.thread_url_slug,M?.backend_uuid,v,x,j,d,X,a?.user,l,E,o,ve,$,fe,q,J,g,T,Y,m,p,V,se,de,_,w,s,re,ie,G,r,y,S]),Se=f.useCallback(Re=>{OYe({response:Re,isUserLoggedIn:B,submissionCount:Y,session:a??void 0,queryCountMobile:R,isWindowsApp:d,addKeyRequiringRerender:V,setSubmissionCount:W,setShouldShowProductFeedback:P,setShouldShowRecruitmentBanner:I,setFeedbackEntryUUID:F,trackEvent:s,sendQueryEventSingular:H,maybeSendNthQueryEventSingular:Z,recruitmentBannerEnabled:te,reason:n})},[V,B,d,R,H,Z,a,Y,s,te]),Ce=VS(),ke=f.useCallback(async()=>{const Re=k?.backend_uuid;!Re||!E||(s("delete last result",{entryUUID:Re}),await ne.DELETE("/rest/entry/delete-ask-entry/{entry_uuid}",n,{params:{path:{entry_uuid:Re}},body:{read_write_token:E}}),Ce(je=>{if(!je)return;const ct=je??[];if(ct.length<1){r.push("/",void 0,"Delete last result");return}return ct.slice(0,-1)}))},[k?.backend_uuid,E,s,Ce,r]);return i.jsx(Xue.Provider,{value:{submitQuery:be,deleteLastResult:ke,shouldShowProductFeedback:O,feedbackEntryUUID:D,quote:c,setQuote:u,shouldShowRecruitmentBanner:N,updateLocalStatePostStream:Se},children:e})},Oa=()=>{const e=f.useContext(Xue);if(!e)throw new Error("usePerplexityQueryState must be used within PerplexityQueryStateContext");return e},QYe="/account/connectors",GG={GCAL_CONNECT:"gcal_connect",CONNECTOR_COMPLETE:"connector_complete"},XYe={UPSELL_CONNECTOR:"upsell-connector-channel"},wFt="18334363285",dO=(e,t)=>{const{value:n,loading:r}=At({flag:"email-assistant-onboarding",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},dE=async(e,t)=>{try{const{error:n}=await ne.POST("/rest/homepage-widgets/upsell/interacted","homepage upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:Pe(),numRetries:1});n&&ee.error("Failed to mark upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ee.error("Error marking upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}},ZYe=async(e,t)=>{try{const{error:n}=await ne.POST("/rest/ntp/upsell/interacted","comet ntp upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:Pe(),numRetries:1});n&&ee.error("Failed to mark NTP upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ee.error("Error marking NTP upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}},JYe=(e,t)=>e.filter(n=>n.name===t).map(n=>n.connection_uuid).filter(n=>n!=null),eQe=e=>({google_drive:"GOOGLE_DRIVE",onedrive:"ONEDRIVE",sharepoint:"SHAREPOINT",dropbox:"DROPBOX",box:"BOX",notion:"NOTION",notion_mcp:"NOTION_MCP",linear:"LINEAR",linear_alt:"LINEAR_ALT",wiley:"WILEY",gcal:"GCAL",outlook:"OUTLOOK",slack:"SLACK",github_mcp_direct:"GITHUB_MCP_DIRECT",asana_mcp_direct:"ASANA_MCP_DIRECT",asana_mcp_merge:"ASANA_MCP_MERGE",atlassian_mcp_direct:"ATLASSIAN_MCP_DIRECT",slack_direct:"SLACK_DIRECT",factset:null,crunchbase:null,edgar:null})[e]??null,tQe=e=>e==="LINEAR"||e==="NOTION_MCP"||e==="LINEAR_ALT"||e==="SLACK"||e==="GITHUB_MCP_DIRECT"||e==="ASANA_MCP_DIRECT"||e==="ASANA_MCP_MERGE"||e==="ATLASSIAN_MCP_DIRECT"||e==="SLACK_DIRECT",CFt=e=>["gcal","outlook","factset","linear","linear_alt","notion_mcp","slack","github_mcp_direct","asana_mcp_direct","asana_mcp_merge","atlassian_mcp_direct","slack_direct"].includes(e);var Kg={};const nQe={logged_out_image_generation:Ie.IMAGE_GENERATION_IN_THREAD,logged_out_video_generation:Ie.VIDEO_GENERATION_IN_THREAD,subscription_upgrade_video_generation:Ie.VIDEO_GENERATION_IN_THREAD,missing_out_on_pro:Ie.MISSING_OUT_ON_PRO_IN_THREAD,auto_upgrade_to_pro:Ie.AUTO_UPGRADE_TO_PRO,pro_feature_limit_queries:Ie.PRO_FEATURE_LIMIT_BANNER,pro_feature_limit_files:Ie.PRO_FEATURE_LIMIT_BANNER,login_for_comet_agent_queries:Ie.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD,comet_agent_queries_rate_limited:Ie.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD,pro_upgrade:Ie.PRO_UPGRADE_IN_SIDE_HOMEPAGE,max_feature_limit_labs_queries:Ie.PRO_FEATURE_LIMIT_BANNER,enterprise_max_side:Ie.ENTERPRISE_MAX_UPSELL},E1=(e,t,n)=>{const r=Qe(),{openVisitorLoginUpsell:s}=Xn({enabled:!r}),{trackEvent:a}=Me(),{lastResult:o}=Ht(),{openModal:l}=vt(),c=rn(),u="?handle_upsell=true",{submitQuery:d}=Oa(),m=wr(),{handleVerificationSuccess:p}=UKe({origin:Ie.STUDENT_VERIFICATION_UPSELL}),h=Kg.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":c?"search_results_page":void 0,{subscriptionTier:g}=yt(),{device:{isWindowsOS:y,isMacOS:v}}=Et(),{variation:x}=dO(!1),b=_t(),{handleConnect:_}=XS({reason:"upsell"}),{mutateAsync:w}=uKe({reason:"upsell"}),C=rO(),{handleCreateNewSpaceForThread:S}=nO(),{connectors:E}=Ds({reason:"upsell"}),{handleDownloadClick:M}=SKe({isWindows:y,isUnsupportedDevice:!v&&!y}),k=co(),T=e?.cta_information?.merge_auth_token,j=e?.cta_information?.merge_auth_callback_uuid,R=V=>{if(V)try{return JSON.parse(V)}catch{return V}},{open:O,isReady:P}=Sue({linkToken:R(T),onSuccess:()=>{j&&rVe({uuid:j,success:!0,reason:"Account successfully connected"}),b.push(window.location.pathname+u)}}),N=f.useCallback(async()=>{try{await m.setCometAsDefaultBrowser("set_default_browser")}catch{}},[m]);f.useEffect(()=>{if(!Kg.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const V=new BroadcastChannel(XYe.UPSELL_CONNECTOR);return V.onmessage=$=>{$.data.type===GG.CONNECTOR_COMPLETE&&(window.focus(),window.location.href=window.location.pathname+u)},()=>{V.close()}},[u]);const I=f.useCallback(()=>{if(e)switch(e.app_location){case $l.MODAL:a("upsell modal opened",{entryUUID:o?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:h,subscriptionTier:g});break;case $l.IN_THREAD:case $l.IN_THREAD_BOTTOM:case $l.IN_THREAD_INPUT:a("thread upsell banner clicked",{entryUUID:o?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:h,subscriptionTier:g});break;case $l.SIDEBAR:case $l.SIDE_CARD:a("side upsell clicked",{upsellType:e.upsell_type,upsellName:e.name,cometSurface:h});break}},[o,a,e,h,g]),D=f.useCallback(()=>{o?.query_str&&d({rawQuery:o.query_str,existingEntryUUID:o.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:o.frontend_context_uuid,promptSource:"user",querySource:"rewrite-upsell",attachments:[],modelPreferenceOverride:e?.cta_information?.model_preference??"pplx_pro"})},[o,d,e]),F=f.useCallback(()=>{if(!e)return;const{permalink_new_tab:V,permalink:$}=e.cta_information??{};$&&(V?window.open($,"_blank"):window.location.href=$)},[e]);return f.useCallback(()=>{if(!e)return;const V=e.cta===ua.SHORTCUT_MODAL?e.cta_information?.recommended_shortcut?.name:void 0;dE(e.name,V),I();const $=nQe[e.name]??Ie.UNSPECIFIED_GENERALIZED_UPSELL;let G=o?.thread_url_slug?x?`/assistant?oauth_complete=true&advance_step=true&redirect_path=search/${o.thread_url_slug}${u}`:`/search/${o.thread_url_slug}${u}`:void 0;window.location.pathname.startsWith("/b/mission-control")&&(G=`/b/mission-control${u}`);const Y=o?.thread_url_slug?`/search/${o.thread_url_slug}`:void 0;switch(e.cta){case ua.SIGN_UP_OR_LOGIN:if(Kg.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;s({title:e.title,description:e.description,origin:$});break;case ua.PRO_UPGRADE:k({pitchMessage:e.cta_information?.upgrade_paywall_title?{title:e.cta_information.upgrade_paywall_title}:void 0,origin:$});break;case ua.THREAD_TO_SPACE:{if(!o?.backend_uuid)return;C?S(o?.backend_uuid,o?.frontend_context_uuid):l("spaceCreateForThread",{entryUUID:o?.backend_uuid,frontendContextUUID:o?.frontend_context_uuid});break}case ua.CONNECTOR:if(!Kg.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"){const W="gcal",H=JYe(E?.connectors??[],W);for(const Z of H)w({connectorName:W,connectionUUID:Z});_({connectorName:W,redirectPath:G,unauthedRedirectPath:Y})}else Kg.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"?window.open(`${window.location.origin}${QYe}?connector_type=${GG.GCAL_CONNECT}`,"_blank"):ee.error("Unhandled upsell connector type",{connectorType:e.cta_information?.connector_type});break;case ua.REWRITE_ANSWER:t&&o?.backend_uuid?Sp({entryUUID:o?.backend_uuid,reason:"rewrite-upsell"}).catch(()=>{ee.error("Error terminating entry")}).finally(D):D();break;case ua.PERMALINK:{F();break}case ua.SET_DEFAULT_BROWSER:{N();break}case ua.IMAGE_ANNOUNCEMENT_MODAL:{if(!e.image_asset||!e.image_asset_low_res||!e.button_text)return;let W=e.cta;e.upsell_type===dA.DOWNLOAD_COMET&&(W=ua.COMET_DOWNLOAD),l("announcementImageModal",{imageUrlHd:e.image_asset,imageUrlLowRes:e.image_asset_low_res,title:e.title??"",description:e.description??"",upsellInformation:{...e,cta:W}});break}case ua.COMET_DOWNLOAD:{M({upsellName:e.name});break}case ua.MERGE_AUTH_CONNECTOR:{T&&P&&O();break}case ua.SHORTCUT_MODAL:{const W=e.cta_information?.recommended_shortcut;l("taskShortcutModal",{source:"thread_upsell_create",onCreated:n?.hideUpsell,shortcut:W?{title:W.name,prompt:W.prompt}:void 0});break}case ua.OPEN_SHEERID_MODAL:{a("sheerid form redirect",{verificationLocationSource:Ie.STUDENT_VERIFICATION_UPSELL,verificationRoleType:"student"}),l("sheerIdModal",{onSuccess:p,type:"student"});break}}},[e,I,o?.thread_url_slug,o?.backend_uuid,o?.frontend_context_uuid,u,s,k,l,t,C,S,E?.connectors,_,w,D,F,N,M,p,x,T,P,O,n?.hideUpsell,a])},fE=A.memo(({upsellInformation:e,inFlight:t,position:n,onButtonClick:r,isLoading:s,textButtonIfSecondary:a=!1,hideUpsell:o,verticalLayout:l=!1})=>{const{$t:c}=Q(),u=E1(e,t,{hideUpsell:o}),d=f.useCallback(()=>{r?.(),u()},[r,u]),m=f.useMemo(()=>{if(n==="router_steps")return"inverted";switch(e?.button_color){case eb.MAX_COLOR:return"maxGold";case eb.PRIMARY_COLOR:return"primary";case eb.INVERTED:return"inverted";default:return"common"}},[e?.button_color,n]),p=f.useCallback(h=>{let g;e?.icon_reference==="labs"?g=i.jsx(me,{icon:rr,size:"sm"}):e?.icon_reference==="comet_download"&&(g=i.jsx(ph,{size:16}));const y={size:h?"regular":"small",onClick:d,text:e?.button_text,leadingComponent:g,textClassName:h?"!text-sm":void 0,fullWidth:!0,isLoading:s};return a&&e?.button_color===eb.SECONDARY_COLOR?i.jsx(Te,{...y,variant:"super",noPadding:!0}):i.jsx(ge,{...y,variant:m})},[m,d,e?.button_color,e?.button_text,e?.icon_reference,a,s]);if(e?.cta_information?.secondary_permalink){const h=e.cta_information.secondary_permalink,g=e.cta_information.secondary_permalink_new_tab,y=i.jsx(Te,{text:c({defaultMessage:"Learn more",id:"TdTXXf940t"}),fullWidth:!0,variant:"super",textClassName:"!text-sm",noPadding:!0,onClick:()=>{g?window.open(h,"_blank"):dl(h,"Learn more from upsell")}});return i.jsx("div",{className:`gap-md flex ${l?"flex-col":"flex-row"}`,children:l?i.jsxs(i.Fragment,{children:[p(!0),y]}):i.jsxs(i.Fragment,{children:[y,p(!0)]})})}return p(!1)});fE.displayName="UpsellButton";function rQe({onClose:e,announcementImageModal:t}){const{imageUrlHd:n,imageUrlLowRes:r,title:s,description:a,upsellInformation:o}=t,[l,c]=f.useState(!1),[u,d]=f.useState(!1);return f.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>d(!0);const p=new Image;return p.src=n,p.onload=()=>c(!0),()=>{m.onload=null,p.onload=null}},[r,n]),i.jsx(Xt,{isOpen:!0,onClose:e,variant:"hide-chrome",actionList:le,children:i.jsxs(z,{variant:"background",className:U("p-sm mx-auto flex w-[32rem] max-w-lg flex-col overflow-hidden rounded-xl transition-opacity duration-150 ease-in",{"opacity-100":u,"opacity-0":!u}),children:[i.jsxs("div",{className:"relative w-full overflow-hidden rounded-lg",children:[i.jsx("img",{src:r,alt:s,className:"w-full scale-[1.01] blur-[0.5px]"}),i.jsx("img",{src:n,alt:s,className:U("absolute inset-0 w-full transition-opacity duration-200 ease-out",{"opacity-100":l,"opacity-0":!l})})]}),i.jsxs("div",{className:"p-md gap-sm flex flex-col items-center text-center",children:[s&&i.jsx(L,{variant:"entry-title-200",children:s}),a&&i.jsx(L,{variant:"small",color:"light",className:"mb-sm px-1",children:a}),i.jsx("div",{className:"w-1/2",children:i.jsx(fE,{upsellInformation:o,hideUpsell:e,verticalLayout:!0})})]})]})})}function Zue(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}const sQe=({children:e,className:t,delimiter:n="",...r})=>{const s=A.Children.toArray(e),a=s.map((o,l)=>{if(A.isValidElement(o)&&o.type===Jue){const c=o.props.id;return i.jsxs(A.Fragment,{children:[o,l!==s.length-1&&i.jsxs(L,{className:"inline-flex !text-inherit",children:[" ",n," "]})]},c)}return null});return i.jsx("div",{className:`gap-sm flex items-center ${t}`,...r,children:a})},Jue=({children:e})=>i.jsx(i.Fragment,{children:e}),gc=sQe,br=Jue,aQe=1080;function Ja(e){return typeof e=="string"?z_(e).startsWith("image/"):e.type.startsWith("image/")}const ede=(e,t=32)=>`https://www.google.com/s2/favicons?sz=${t}&domain=${e}`,oQe=(e,t,n)=>{const r=Math.min(e,t);if(r<=n)return{width:e,height:t};const s=n/r;return{width:Math.round(e*s),height:Math.round(t*s)}},iQe=(e,t=aQe,n=.98)=>new Promise((r,s)=>{if(!Ja(e)){s(new Error("File is not an image."));return}const a=document.createElement("canvas"),o=a.getContext("2d",{alpha:!0,colorSpace:"srgb"}),l=new Image,c=URL.createObjectURL(e);if(!o){s(new Error("Could not get canvas context"));return}o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",l.onload=()=>{const u=oQe(l.width,l.height,t);a.width=u.width,a.height=u.height;const d="image/jpeg",m=n;o.fillStyle="#fff",o.fillRect(0,0,a.width,a.height),o.drawImage(l,0,0,u.width,u.height),a.toBlob(p=>{if(!p){s(new Error("Failed to create blob from canvas"));return}const g=e.name.replace(/\.[^/.]+$/,"")+".jpg",y=new File([p],g,{type:d});URL.revokeObjectURL(c),r(y)},d,m)},l.onerror=()=>{URL.revokeObjectURL(c),s(new Error("Failed to load image."))},l.src=c}),lQe={"my.apps.factset.com":"www.factset.com"},fl=A.memo(({domain:e,overrideIconUrl:t,size:n=16,hideBorder:r=!1,className:s,...a})=>{const o=lQe[e]||e,l=ede(o,128),c=f.useMemo(()=>t||l,[t,l]),[u,d]=f.useState(!0);f.useEffect(()=>{d(!0)},[c]);const m=f.useMemo(()=>({width:n,height:n}),[n]),p=f.useMemo(()=>({width:n*.7,height:n*.7}),[n]);return i.jsxs("div",{style:{width:n,height:n},className:U("relative shrink-0 overflow-hidden rounded-full",s),...a,children:[u?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:U("rounded-inherit absolute inset-0",!r&&"bg-white")}),i.jsx("img",{className:"relative block",src:c,alt:`${e} favicon`,width:n,height:n,onLoad:h=>{const g=h.target,y=t!==void 0||g.naturalWidth!==16||g.naturalHeight!==16;d(y||e!==o)},onError:()=>{d(!1)},style:{width:n,height:n}})]}):i.jsx(z,{variant:"subtler",style:m,className:"flex items-center justify-center",children:i.jsx(L,{color:"ultraLight",children:i.jsx(me,{icon:kf,className:"relative block",style:p})})}),!r&&i.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})});fl.displayName="CitationFavicon";const yo={PDF:"pdf",TXT:"txt",CSV:"csv",XLSX:"xlsx",DOCX:"docx",PPTX:"pptx",MARKDOWN:"md",JSON:"json",JPG:"jpg",JPEG:"jpeg",PNG:"png"},SFt=e=>!!(p1(e)===yo.PDF||C1(e)),cQe=e=>{const t=p1(e);if(C1(e))return bw;switch(t){case yo.TXT:return $a;case yo.MARKDOWN:return $a;case yo.PDF:return bw;case yo.XLSX:return jte;case yo.CSV:return XMe;case yo.DOCX:return QMe;case yo.PPTX:return YMe;case yo.JPG:case yo.JPEG:case yo.PNG:return zv;default:return Sf}},uQe={[Tt.GOOGLE_DRIVE]:r4e,[Tt.ONEDRIVE]:n4e,[Tt.SHAREPOINT]:Ite,[Tt.DROPBOX]:t4e,[Tt.BOX]:e4e,[Tt.GENERATED_IMAGE]:zv,[Tt.GENERATED_VIDEO]:Rte,[Tt.NOTION]:JMe,[Tt.WILEY]:ZMe,[Tt.LOCAL]:Sf},fO=A.memo(({url:e,isConversationHistory:t,isMemory:n,isInlineAttachment:r,connectionType:s,isAttachment:a,isPatent:o,isClientContext:l})=>{const c=f.useMemo(()=>{const u=w1(e),d=a?cQe(e):null;if(t)return i.jsx(me,{icon:Tf,size:"xs"});if(o)return i.jsx(me,{icon:Pte,size:"xs"});if(n)return i.jsx(me,{icon:Xi,size:"xs"});if(r)return i.jsx(me,{icon:RR,size:"xs"});if(s){const m=uQe[s];return m?i.jsx(me,{icon:m}):i.jsx(fl,{domain:u})}else return a?i.jsx(me,{icon:d||Sf,size:"xs"}):l?i.jsx(me,{icon:s4e,size:"xs"}):i.jsx(fl,{domain:u})},[e,t,n,r,s,a,o,l]);return i.jsx("div",{className:"flex size-4 items-center justify-center",children:c})});fO.displayName="Icon";const mO=A.memo(({url:e,source:t,isAttachment:n,connectionType:r,isConversationHistory:s})=>{const a=Q(),o=f.useMemo(()=>{if(s)return a.formatMessage({defaultMessage:"library",id:"B7J+pmy9R5"});if(t!=null)return t;let l;return n?l=oO(e):r?l=yP(r):l=Zs(e),l.replace(/\.[^.]*$/,"")},[e,t,n,r,s,a]);return i.jsx(i.Fragment,{children:o})});mO.displayName="Source";const tde=A.memo(({url:e,source:t,isAttachment:n,isClientContext:r,variant:s="small",color:a="default",truncate:o=!0,className:l,connectionType:c,isInlineAttachment:u,isMemory:d,isPatent:m,isConversationHistory:p,name:h,snippet:g,...y})=>i.jsxs(z,{className:"flex items-center gap-x-1.5",children:[i.jsx(L,{variant:s,className:"relative -mt-px flex-none",color:d||p?"light":a,children:i.jsx(fO,{url:e,isConversationHistory:p,isMemory:d,isInlineAttachment:u,connectionType:c,isAttachment:n,isPatent:m,isClientContext:r})}),h&&i.jsx(L,{variant:s,color:a,...y,className:U(l,"min-w-0 truncate"),children:h}),i.jsx(L,{variant:s,color:h?"light":a,className:U("line-clamp-1 min-w-0 grow break-all transition-all duration-300",{"max-w-[150px]":t!=null&&o},l),...y,children:i.jsx(mO,{url:e,source:t,isAttachment:n,connectionType:c,isMemory:d,isConversationHistory:p})})]}));tde.displayName="CitationDomainRoot";const bu=Object.assign(tde,{Icon:fO,Source:mO}),M1=A.memo(({isOpen:e,onClose:t,imgProps:n,alt:r,width:s,height:a,origin:o,onDownload:l,footer:c})=>{const{url:u,name:d,showCitation:m=!0}=o||{},p=Ls(),h=f.useCallback(g=>{g.stopPropagation(),l?.()},[l]);return i.jsxs(Xt,{onClose:t,isOpen:e,variant:"hide-chrome",disableAnimation:!1,removeScroll:!p,modalClassname:"z-[100]",children:[i.jsx("div",{className:"flex h-screen w-screen place-content-center",onClick:t,children:i.jsxs("div",{className:U("gap-md p-md md:p-lg flex w-full flex-col",{"md:pb-md":m&&(u||l)}),children:[i.jsx("div",{className:"relative grow",children:i.jsx("div",{className:U("absolute inset-0 size-full",{"bg-white":n?.src&&(n.src.toLowerCase().includes(".png")||n.src.toLowerCase().includes(".webp")||n.src.toLowerCase().includes("format=png")||n.src.toLowerCase().includes("format=webp"))}),children:i.jsx("img",{width:s,height:a,...n,alt:r,className:"size-full object-contain"})})}),m&&(u||l)?i.jsxs("div",{className:"gap-sm flex w-full flex-row justify-center",children:[u&&i.jsx(Ye,{href:u,target:"_blank",children:i.jsxs(z,{variant:"offsetPlus",className:"gap-x-xs bg-subtlest p-sm flex items-center rounded-full",children:[i.jsx(bu,{url:u,source:d,isAttachment:!1}),i.jsx(L,{variant:"small",className:"pr-xs",children:i.jsx(me,{icon:no,size:"xs"})})]})}),l&&i.jsx(z,{as:"button",onClick:h,variant:"offsetPlus",className:"gap-x-xs bg-subtlest p-sm flex !aspect-square w-9 items-center justify-center rounded-full",children:i.jsx(me,{icon:ph,size:"sm"})})]}):null,c]})}),i.jsx(ge,{onClick:t,icon:Lt,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});M1.displayName="LightboxImage";const is=A.memo(({src:e,lightboxSrc:t,alt:n,fadeIn:r,fallbackSrc:s,fallback:a,hasShadow:o=!1,includeLightBoxModal:l=!0,lightboxFooter:c,origin:u,draggable:d=!0,imageClassName:m,maskClassName:p,containerClassName:h,rounded:g="md",onClick:y,AIProps:v,authorName:x,authorUrl:b,onLoad:_,onFail:w,softBlockSaveImage:C=!1,imageRef:S,imageProps:E,testId:M,onDownload:k,...T})=>{const[j,R]=f.useState(!1),[O,P]=f.useState(!1),[N,I]=f.useState(!1),D=f.useRef(null),{isAI:F,AILabel:B}=v||{isAI:!1,AILabel:""},V=f.useCallback(()=>{R(!0),w?.()},[]),$=f.useCallback(()=>{P(!0),_?.()},[P,_]);f.useEffect(()=>{if(D.current){if(D.current.complete){$();return}D.current.src||(D.current.src=e)}},[e,$,D]);const G=U(m,"transition-all ease-in-out",{"opacity-100 duration-200 scale-100":O&&r,"opacity-0 scale-[0.98]":!O&&r,"hidden opacity-0":j&&!s,"max-h-[90vh]":l,"cursor-zoom-in hover:shadow-lg duration-200 ":l&&!N}),X=f.useMemo(()=>({className:G,src:e,alt:n,onError:V,onClick:()=>I(!0),...E}),[n,G,E,V,e]),Y=f.useMemo(()=>({ref:D,onLoad:$,...X}),[$,X]),W=f.useMemo(()=>({...X,src:t??e}),[t,X,e]),H=f.useCallback(q=>{q.stopPropagation()},[]),Z=i.jsxs(i.Fragment,{children:[i.jsx(L,{variant:"tiny",color:"white",className:"px-xs py-two h-5 rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:i.jsxs(gc,{className:"gap-xs",children:[i.jsx(br,{id:"authorName",children:x}),b?i.jsx(br,{id:"authorDomain",children:Zs(b)}):null]})}),i.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"})]}),re=f.useCallback(()=>I(!1),[]);if(j){if(s&&D.current)D.current.src=s;else if(a!==void 0)return a}return i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:y,className:h,"data-testid":M,children:i.jsxs("div",{className:U("bg-subtler group relative size-full overflow-hidden",p,{"shadow-md":o&&O,"transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg":o,"rounded-sm":g==="sm","rounded-md":g==="md",rounded:g===!0}),children:[F&&i.jsxs("div",{className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:[i.jsx("div",{children:i.jsx(L,{variant:"tiny",color:"white",className:"gap-x-two px-xs py-two flex h-5 items-center rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:i.jsx("span",{children:B})})}),i.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"}),i.jsx("div",{children:i.jsx(L,{variant:"tiny",color:"white",className:"gap-x-two p-two flex h-5 items-center rounded-md bg-black/60",children:i.jsx(me,{icon:a4e,size:"xs"})})})]}),x&&(b?i.jsx(Ye,{href:b??"",target:"_blank",onClick:H,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:Z}):i.jsx("div",{onClick:H,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:Z})),C&&!F&&i.jsx("div",{className:"absolute inset-0",onClick:l?()=>I(!0):void 0}),i.jsx("img",{width:T.width,height:T.height,alt:n,...Y,ref:Zue([S,D]),draggable:d})]})}),l&&i.jsx(M1,{onClose:re,isOpen:N,imgProps:W,origin:u,width:T.width,height:T.height,alt:n,onDownload:k,footer:c})]})});is.displayName="Image";const nde=A.memo(({isOpen:e,onClose:t,onCapture:n})=>{const r=f.useRef(null),s=f.useRef(null),a=f.useRef(null),[o,l]=f.useState(!1),[c,u]=f.useState(null),[d,m]=f.useState(null),p=f.useCallback(async()=>{try{a.current&&a.current.getTracks().forEach(w=>w.stop());const _=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});a.current=_,r.current&&(r.current.srcObject=_,l(!0),m(null))}catch{m("Unable to access camera. Please check your permissions."),l(!1)}},[]),h=f.useCallback(()=>{a.current&&(a.current.getTracks().forEach(_=>_.stop()),a.current=null,l(!1)),r.current&&(r.current.srcObject=null)},[]),g=f.useCallback(()=>{if(r.current&&s.current){const _=r.current,w=s.current,C=w.getContext("2d");if(C){w.width=_.videoWidth,w.height=_.videoHeight,C.drawImage(_,0,0,w.width,w.height);const S=w.toDataURL("image/jpeg",.95);u(S),h()}}},[h]),y=f.useCallback(()=>{u(null),p()},[p]),v=f.useCallback(()=>{m(null),p()},[p]),x=f.useCallback(()=>{h(),u(null),m(null),t()},[h,t]),b=f.useCallback(async()=>{if(c)try{const w=await(await fetch(c)).blob(),C=new File([w],"selfie.jpg",{type:"image/jpeg"});n(C),x()}catch{m("Failed to process the image. Please try again.")}},[c,n,x,m]);return f.useEffect(()=>(e&&!c&&!d&&p(),()=>{h()}),[e,c,d,p,h]),i.jsxs(Xt,{isOpen:e,onClose:x,title:"Take a Selfie",children:[i.jsx("div",{className:"p-lg",children:d?i.jsxs("div",{className:"gap-md flex h-[400px] flex-col items-center justify-center",children:[i.jsx(L,{variant:"base",color:"red",children:d}),i.jsx(ge,{text:"Try again",variant:"primary",onClick:v})]}):c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-subtler relative aspect-video overflow-hidden rounded-lg",children:i.jsx(is,{src:c,alt:"Captured selfie",className:"size-full object-contain"})}),i.jsxs("div",{className:"mt-lg gap-sm flex justify-center",children:[i.jsx(ge,{text:"Retake",variant:"border",onClick:y}),i.jsx(ge,{text:"Use this photo",variant:"primary",onClick:b})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-subtler relative aspect-video overflow-hidden rounded-lg",children:[i.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"size-full object-contain"}),!o&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(L,{variant:"small",color:"light",children:"Starting camera..."})})]}),i.jsxs("div",{className:"mt-md gap-xs flex flex-col items-center",children:[i.jsx(L,{variant:"small",color:"light",className:"text-center",children:"Position your face in the center of the frame"}),i.jsx(L,{variant:"tiny",color:"ultraLight",className:"text-center",children:"Make sure your face is well-lit and clearly visible"})]}),i.jsx("div",{className:"mt-lg flex justify-center",children:i.jsx(ge,{text:"Take photo",icon:IR,variant:"primary",onClick:g,disabled:!o})})]})}),i.jsx("canvas",{ref:s,className:"hidden"})]})});nde.displayName="CameraCaptureModal";function qG(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function ml({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=f.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=f.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=f.useRef(!1);f.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,p,h]=f.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:b,top:_,width:w,height:C,bottom:S,right:E,x:M,y:k}=l.current.element.getBoundingClientRect(),T={left:b,top:_,width:w,height:C,bottom:S,right:E,x:M,y:k};l.current.element instanceof HTMLElement&&r&&(T.height=l.current.element.offsetHeight,T.width=l.current.element.offsetWidth),Object.freeze(T),d.current&&!pQe(l.current.lastBounds,T)&&o(l.current.lastBounds=T)};return[x,u?qG(x,u):x,c?qG(x,c):x]},[o,r,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",h,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function y(){l.current.element&&(l.current.resizeObserver=new s(h),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",h,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{h()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const v=x=>{!x||x===l.current.element||(g(),l.current.element=x,l.current.scrollContainers=rde(x),y())};return fQe(h,!!t),dQe(p),f.useEffect(()=>{g(),y()},[t,h,p]),f.useEffect(()=>g,[]),[v,a,m]}function dQe(e){f.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function fQe(e,t){f.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function rde(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some(a=>a==="auto"||a==="scroll")&&t.push(e),[...t,...rde(e.parentElement)]}const mQe=["x","y","top","bottom","left","right","width","height"],pQe=(e,t)=>mQe.every(n=>e[n]===t[n]),Pn=A.memo(({children:e,header:t,fullBleed:n,roundedClass:r,shadow:s,fullBleedBorderClassname:a,...o})=>i.jsxs(i.Fragment,{children:[t,i.jsxs(z,{...o,variant:o.variant??"raised",className:U("relative",{border:!n&&!o.variant,[r||"rounded-xl"]:!o.variant,"shadow-[0_1px_2px_0_rgba(0,0,0,0.03)]":s},o.className),children:[n&&i.jsx("div",{className:U("rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5",a)}),e]})]}));Pn.displayName="CanonicalCard";const wy=async({request:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/deeper-research/download-asset",t,{body:e,timeoutMs:2e3,numRetries:1});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n});return r.file_url},hQe=async({request:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/deeper-research/export-asset",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to export asset",cause:n});return r},gQe=async({request:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/deeper-research/export-all-assets",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to export all assets",cause:n});return r},sde=({reason:e})=>{const{$t:t}=Q(),{openToast:n}=xn(),r=f.useCallback(async o=>{try{const l=await wy({request:o,reason:e});window.open(l,"_blank"),n(t({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)}catch(l){ee.error("Failed to download S3 asset",{error:l,request:o,errorMessage:l instanceof Error?l.message:"Unknown error"}),n(t({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}},[e,t,n]),s=f.useCallback(async(o,l="media",c=document.body)=>{try{const u=await fetch(o,{mode:"cors",cache:"no-cache"});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const d=await u.blob(),m=URL.createObjectURL(d),p=document.createElement("a");p.href=m,p.download=l,c.appendChild(p),p.click(),c.removeChild(p),URL.revokeObjectURL(m);const h=l.toLowerCase().includes(".mp4")||l.toLowerCase().includes(".mov")||l.toLowerCase().includes(".avi")||d.type.startsWith("video/"),g=t(h?{defaultMessage:"Video downloaded",id:"WHvofOjBQO"}:{defaultMessage:"Image downloaded",id:"nS5vxnEXaW"});n(g,"success",3)}catch(u){const d=l.toLowerCase().includes(".mp4")||l.toLowerCase().includes(".mov")||l.toLowerCase().includes(".avi");ee.error("Failed to download media asset",{error:u,mediaUrl:o,errorMessage:u instanceof Error?u.message:"Unknown error",errorType:u instanceof TypeError&&u.message.includes("Failed to fetch")?"CORS":"Unknown"});const m=t(d?{defaultMessage:"Failed to download video",id:"g8uGrbPLMV"}:{defaultMessage:"Failed to download image",id:"YPAbL/7UuZ"});n(m,"error",3)}},[t,n]),a=f.useCallback(async(o,l="image.jpg",c=document.body)=>s(o,l,c),[s]);return f.useMemo(()=>({downloadS3Asset:r,downloadImageAsset:a,downloadMediaAsset:s}),[a,r,s])},ade=({assetType:e,entryUUID:t,answerMode:n,reason:r,skip:s})=>{const{trackEventOnce:a}=Me();f.useEffect(()=>{s||a("generated asset viewed",{assetType:e,entryUUID:t,answerMode:n,reason:r})},[a,e,t,n,r,s])},ode=A.memo(({videoUrl:e,hideTimeline:t=!0,aspectRatio:n=16/9,className:r,onLoadedData:s,isGenerated:a=!1,entryUUID:o,autoPlay:l=!1,muted:c=!0})=>{const u=f.useRef(null),[d,m]=f.useState(!1),[p,h]=f.useState(c),[g,y]=f.useState(0),[v,x]=f.useState(!1),[b,_]=f.useState(!1),[w,C]=f.useState(!0),{trackEvent:S}=Me();ade({assetType:Bn.GENERATED_VIDEO,entryUUID:o??"",answerMode:"search",reason:"video-player",skip:!a}),f.useEffect(()=>{if(b&&u.current){const Y=u.current,W=Y.mozHasAudio||!!Y.webkitAudioDecodedByteCount||!!(Y.audioTracks&&Y.audioTracks.length);C(W)}},[b,u]);const E=f.useCallback(Y=>{Y.stopPropagation(),u.current&&(u.current.paused?u.current.play():u.current.pause(),m(!d))},[d]),M=f.useCallback(Y=>{Y.stopPropagation(),u.current&&(u.current.muted=!p,h(!p))},[p]),k=f.useCallback(Y=>{if(Y.stopPropagation(),u.current){const W=Y.currentTarget.getBoundingClientRect(),re=(Y.clientX-W.left)/W.width*u.current.duration;u.current.currentTime=re}},[]);f.useEffect(()=>{const Y=setInterval(()=>{if(!u.current)return;const W=u.current.currentTime,H=u.current.duration;y(W/H)},16);return()=>clearInterval(Y)},[]);const{$t:T}=Q(),[j,R]=f.useState(!1),O=f.useCallback(()=>R(!0),[]),P=f.useCallback(()=>R(!1),[]),{trackEventOnce:N}=Me(),{openToast:I}=xn(),{isMobileStyle:D}=ye(),{downloadMediaAsset:F}=sde({reason:"GeneratedVideoCard"}),B=f.useCallback(()=>{e&&(N("generated video reported",{video_url:e}),I(T({defaultMessage:"Video reported",id:"Ir50ThCD/C"}),"success",3))},[T,e,I,N]),V=f.useCallback(async Y=>{Y.stopPropagation(),e&&(await F(e,"video.mp4",document.body),a&&S("generated asset downloaded",{assetType:Bn.GENERATED_VIDEO,answerMode:"search",entryUUID:o??"",reason:"video-player"}))},[e,F,a,o,S]),$=f.useMemo(()=>[{type:"default",text:T({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:_w,onClick:B}],[T,B]),G=f.useCallback(Y=>{Y.stopPropagation(),u.current&&(u.current.requestFullscreen?u.current.requestFullscreen():u.current.webkitEnterFullscreen?u.current.webkitEnterFullscreen():u.current.mozRequestFullScreen?u.current.mozRequestFullScreen():u.current.msRequestFullscreen&&u.current.msRequestFullscreen())},[]),X=f.useMemo(()=>({aspectRatio:n}),[n]);return i.jsx(Pn,{fullBleed:!0,className:U("group relative w-full overflow-hidden",r),style:X,children:i.jsxs("div",{className:"relative size-full overflow-hidden",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[i.jsx("video",{ref:u,loop:!0,autoPlay:l,playsInline:!0,muted:p,className:U("size-full object-cover",{"opacity-0":!b}),onPlay:()=>m(!0),onPause:()=>m(!1),onClick:E,onLoadedData:()=>{_(!0),s?.()},src:e+"#t=0.001"}),i.jsx("div",{className:U("absolute inset-0 flex flex-col justify-end transition-opacity duration-200",v||j||!d?"opacity-100":"opacity-0",b?"":"pointer-events-none opacity-0"),onClick:E,children:i.jsxs("div",{className:U("p-md flex w-full flex-col bg-gradient-to-t from-black/60 to-transparent pb-0",t?"pb-md":"pb-0"),children:[i.jsxs("div",{className:"gap-md flex",children:[i.jsx(z,{as:"button",onClick:E,children:i.jsx(L,{color:"white",children:i.jsx(me,{icon:d?Ote:Lte})})}),i.jsx(pn,{showTooltip:a&&!w,tooltipLayout:"right",tooltipText:T({defaultMessage:"This video does not have audio.",id:"V7VF0Hgi7t"}),asChild:!0,children:i.jsx(z,{as:"button",onClick:w?M:Y=>Y.stopPropagation(),className:U({"opacity-50":!w}),children:i.jsx(L,{color:"white",children:i.jsx(me,{icon:p?Dte:Fte})})})}),i.jsx(z,{as:"button",className:"ml-auto",onClick:V,children:i.jsx(L,{color:"white",children:i.jsx(me,{icon:ph})})}),i.jsx(z,{as:"button",onClick:G,children:i.jsx(L,{color:"white",children:i.jsx(me,{icon:o4e})})}),i.jsx(Jt,{isMobileStyle:D,items:$,onOpen:O,onClose:P,wrapperClassName:"flex",children:i.jsx(z,{as:"button",className:"size-[20px]",children:i.jsx(L,{color:"white",children:i.jsx(me,{icon:Ute})})})})]}),!t&&i.jsx("div",{className:"py-md cursor-pointer",onClick:k,children:i.jsx("div",{className:"relative h-0.5 flex-1 shrink-0 cursor-pointer overflow-hidden rounded-full bg-white/30",children:i.jsx("div",{className:"absolute left-0 top-0 size-full bg-white",style:{transformOrigin:"left",transform:`scaleX(${g})`}})})})]})})]})})});ode.displayName="VideoPlayer";const ide=A.memo(({loading:e,size:t=30})=>{const[n,{width:r,height:s}]=ml(),[a,o]=f.useState(0),[l,c]=f.useState(0),u=Ta(0,0,.58,1),d=Ta(.19,1,.22,1);f.useEffect(()=>{if(r&&s){const g=Math.ceil(r/t),y=Math.ceil(s/t);o(g),c(y)}},[r,s,t]);function m(g,y){const v=Math.ceil(g),x=Math.floor(y);return Math.floor(Math.random()*(x-v)+v)}const h=r?((g,y)=>{let v=Math.floor(y/g);return v%2!==0&&(v=v-1),v=Math.max(2,v),y/v})(t,r):t;return i.jsx("div",{ref:n,style:{gridTemplateColumns:`repeat(auto-fill, ${h}px)`,gridTemplateRows:`repeat(auto-fill, ${h}px)`},className:U("pointer-events-none absolute inset-0 z-[5] grid size-full gap-0",{"bg-raised":a===0||l===0}),children:i.jsx(it,{children:[...Array(a*l)].map((g,y)=>e?i.jsx(xe.div,{animate:{opacity:[.9,0],transition:{repeat:1/0,duration:.5,delay:m(0,10)/10,repeatType:"mirror",ease:u}},exit:{opacity:0,transition:{duration:1,ease:d}},className:"bg-base relative",children:i.jsx("div",{className:"bg-raised inset-0 size-full"})},y):null)})})});ide.displayName="BlinkingGrid";const yQe="IMAGE_GEN_PLACEHOLDER",vQe="VIDEO_GEN_PLACEHOLDER",lde=A.memo(({sourceImage:e,media:t,generating:n,square:r=!1,type:s="image",onMediaLoad:a,entryUUID:o})=>{const l=Ta(.19,1,.22,1),[c,u]=f.useState(void 0),[d,m]=f.useState(!1),[p,h]=f.useState(!n),[g,y]=f.useState(!0),[v,{width:x}]=ml();f.useEffect(()=>{const S=s==="video"?vQe:yQe;t&&t.name!==S&&u(t)},[t,s]),f.useEffect(()=>{g&&y(!1)},[g]),f.useEffect(()=>{n&&(m(!1),h(!1))},[n]),f.useEffect(()=>{if(d&&!n){const S=setTimeout(()=>{h(!0)},1e3);return()=>clearTimeout(S)}},[d,n]);const _=((S,E)=>{let M=Math.floor(E/S);return M%2!==0&&(M=M-1),M=Math.max(2,M),E/M})(30,x),w=f.useCallback(()=>{m(!0),a?.()},[a]),C=f.useMemo(()=>({url:c?.url,name:c?.name,showCitation:!1}),[c?.url,c?.name]);return i.jsx("div",{ref:v,className:"relative size-full shrink-0",children:_!==0?i.jsxs(i.Fragment,{children:[i.jsx(ide,{loading:!p,size:_}),i.jsx(xe.div,{className:"relative size-full",style:{maskSize:`${_}px ${_}px`,maskPosition:"top left",maskRepeat:"repeat"},initial:{maskImage:p?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},animate:{maskImage:p?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},transition:{duration:1,ease:l},children:i.jsx(Pn,{className:U(`relative size-full overflow-hidden !rounded-md ${p?"cursor-pointer":""}`,{"!rounded-none":r}),fullBleed:!0,children:i.jsx(xe.div,{animate:{filter:!p&&e?"blur(20px) saturate(2)":"none"},transition:{duration:1,ease:l},className:"grid size-full",children:i.jsx("div",{className:"relative w-full bg-black/40 dark:bg-white/40",children:i.jsxs(it,{children:[(e?.startsWith("http")||e?.startsWith("blob"))&&!p&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1,ease:l},className:"absolute inset-0 size-full",children:i.jsx("img",{src:e,alt:"Source",className:"block size-full object-cover"})},"source"),c?.image?.startsWith("http")&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:p?1:0},exit:{opacity:0},transition:{duration:1,ease:l},className:"absolute inset-0 size-full",children:s==="image"?i.jsxs(i.Fragment,{children:[i.jsx(is,{src:c.image||c.thumbnail,alt:c.name||"Generated Image",origin:C,includeLightBoxModal:!!p,maskClassName:U("!bg-transparent",{"!rounded-none":r}),imageClassName:"block w-full h-full max-h-[100%] object-contain !bg-transparent",containerClassName:"w-full h-full absolute inset-0 z-10 !bg-transparent",onLoad:w}),i.jsx("img",{src:c.image||c.thumbnail,alt:c.name||"Generated Image",className:"absolute inset-0 block size-full object-cover blur-[20px] saturate-150"})]}):i.jsx(ode,{videoUrl:c.image,isGenerated:!0,aspectRatio:11/6,onLoadedData:w,className:"absolute inset-0 block size-full !rounded-none object-cover",entryUUID:o})},"generated")]})})})})})]}):null})});lde.displayName="GeneratedMediaLoader";const cde=A.memo(({setViewState:e})=>{const{$t:t}=Q(),n=f.useCallback(()=>e("create_avatar"),[e]);return i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"mb-lg relative -mx-6 h-[600px] overflow-hidden rounded-lg",children:[i.jsx(is,{src:"https://r2cdn.perplexity.ai/virtual-tryon-intro-avatars.png",alt:"Avatar preview",imageClassName:"h-full w-full object-cover object-top pointer-events-none bg-base",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),i.jsxs("div",{className:"from-base gap-md p-lg absolute inset-x-0 bottom-0 flex h-1/2 flex-col items-center justify-end bg-gradient-to-t from-35% to-transparent",children:[i.jsx("span",{className:"font-editorial text-3xl font-light",children:i.jsx(pe,{defaultMessage:"Skip the guesswork",id:"xUwopw2/ud"})}),i.jsx(L,{variant:"small",className:"max-w-[350px] text-pretty text-center",color:"light",children:i.jsx(pe,{defaultMessage:"Upload a photo, create your avatar, and explore how outfits look on your digital self.",id:"Mtc6VpYStx"})})]})]}),i.jsx("div",{className:"-mt-md flex justify-center",children:i.jsx(ge,{text:t({defaultMessage:"Create your avatar",id:"pkptzIeNWN"}),variant:"primary",onClick:n})})]})});cde.displayName="IntroView";const ude=A.memo(({setViewState:e,uploadSelfie:t,setLocalPreviewUrl:n,isSelfieUploading:r})=>{const{$t:s}=Q(),[a,o]=f.useState(!1),l=f.useCallback(async m=>{const p=m.target.files?.[0];if(p){const h=URL.createObjectURL(p);n(h),await t(p)&&e("choose_body")}m.target.value=""},[t,n,e]),c=f.useCallback(async m=>{const p=URL.createObjectURL(m);n(p),await t(m)&&e("choose_body")},[t,n,e]),u=f.useCallback(()=>{o(!0)},[]),d=f.useCallback(()=>{o(!1)},[]);return i.jsxs("div",{className:"gap-lg -mb-sm -mt-md flex flex-col",children:[i.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[i.jsx(dde,{step:2,totalSteps:4}),i.jsx("span",{className:"font-editorial text-3xl font-light",children:i.jsx(pe,{defaultMessage:"Take a selfie",id:"0H3vV1IwP1"})}),i.jsx(L,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:i.jsx(pe,{defaultMessage:"To create a personalized avatar, please upload a well lit, front-facing selfie.",id:"2hp5WUjFRc"})})]}),i.jsxs("div",{className:"gap-sm grid grid-cols-2 grid-rows-4",children:[i.jsx(hde,{image:"https://r2cdn.perplexity.ai/virtual-tryon-selfie.png",title:s({defaultMessage:"Front facing selfie",id:"v5qKOPNOwM"}),description:s({defaultMessage:"Simple front facing photo is all we need.",id:"7sBIYn49Jb"}),className:"!col-start-1 !row-span-4 !row-start-1"}),i.jsx(Cy,{title:s({defaultMessage:"Face fully visible",id:"I+I2q2Gn3a"}),icon:_0}),i.jsx(Cy,{title:s({defaultMessage:"Looking Forward",id:"79tlG9DGSR"}),icon:WC}),i.jsx(Cy,{title:s({defaultMessage:"Even natural light",id:"2OWeBoZV0d"}),icon:i4e}),i.jsx(Cy,{title:s({defaultMessage:"No harsh shadows",id:"vXaeUswXsx"}),icon:l4e})]}),i.jsx("div",{className:"gap-sm flex justify-center",children:r?i.jsxs("div",{className:"px-md py-sm gap-sm bg-offsetPlus flex items-center rounded-lg",children:[i.jsx(as,{}),i.jsx(L,{variant:"baseSemi",children:i.jsx(pe,{defaultMessage:"Uploading...",id:"JEsxDwhXPG"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"shopping-try-on-file-input",onChange:l}),i.jsx(ge,{text:s({defaultMessage:"Take a selfie",id:"0H3vV1IwP1"}),icon:IR,variant:"common",onClick:u}),i.jsxs("label",{htmlFor:"shopping-try-on-file-input",className:"px-md py-sm gap-sm bg-super active:ease-outExpo group flex origin-center transform-gpu cursor-pointer select-none flex-row items-center whitespace-nowrap rounded-lg duration-300 hover:opacity-80 active:scale-[0.97] active:duration-150",children:[i.jsx(L,{children:i.jsx(me,{icon:mh,size:"md",className:"text-white dark:text-black"})}),i.jsx(L,{variant:"baseSemi",color:"defaultInverted",children:i.jsx(pe,{defaultMessage:"Upload a selfie",id:"bODqv8TA31"})})]})]})}),i.jsx(nde,{isOpen:a,onClose:d,onCapture:c})]})});ude.displayName="CreateAvatarView";const dde=({step:e,totalSteps:t})=>{const n=e/t*100;return i.jsx(z,{className:"py-xs flex flex-row items-center justify-center rounded",children:i.jsx("div",{className:"bg-offsetPlus w-xl h-xs relative overflow-hidden rounded-full",children:i.jsx("div",{className:"bg-dark h-full transition-all duration-300",style:{width:`${n}%`}})})})},fde=A.memo(({setViewState:e,generateDefaultAvatar:t,selfieUrl:n,uploadPhoto:r,generateCustomAvatar:s,setLocalPreviewUrl:a})=>{const{$t:o}=Q(),[l,c]=f.useState("default"),[u,d]=f.useState(!1),m=f.useCallback(()=>{n&&(e("generating_avatar"),t(n))},[e,t,n]),p=f.useCallback(()=>{const x=document.getElementById("choose-body-file-input");x&&x.click()},[]),h=f.useCallback(()=>{l==="default"?m():p()},[l,m,p]),g=f.useCallback(()=>{c("default")},[]),y=f.useCallback(()=>{c("your")},[]),v=f.useCallback(async x=>{const b=x.target.files?.[0];if(b){if(!n)return;const _=URL.createObjectURL(b);a(_);try{d(!0);const w=await r(b);w&&(e("generating_avatar"),s(n,w))}finally{d(!1)}}x.target.value=""},[r,s,n,a,e]);return i.jsxs("div",{className:"gap-xl flex flex-col",children:[i.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[i.jsx(dde,{step:4,totalSteps:4}),i.jsx("span",{className:"font-editorial text-3xl font-light",children:i.jsx(pe,{defaultMessage:"Choose your avatar body",id:"+VyjlR/lAC"})}),i.jsx(L,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:i.jsx(pe,{defaultMessage:"You can continue with a default body or create a more personalized avatar with your body.",id:"cWLZ08Ydju"})})]}),i.jsxs("div",{className:"gap-md grid grid-cols-2",children:[i.jsx(KG,{onClick:g,title:o({defaultMessage:"Default body",id:"vO54ZADRPV"}),description:o({defaultMessage:"Uses a generic body shape, no photo needed",id:"ZuGM1SxB8y"}),selected:l==="default"}),i.jsx(KG,{onClick:y,title:o({defaultMessage:"Your body",id:"7ZKFrdUySm"}),description:o({defaultMessage:"Uses a full body photo to create a custom body",id:"ddPGzyfCV3"}),selected:l==="your"})]}),i.jsxs("div",{className:"flex justify-center",children:[i.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"choose-body-file-input",onChange:v}),i.jsx(ge,{text:o(u?{defaultMessage:"Uploading full body photo...",id:"Xg5+S5kxLh"}:l==="default"?{defaultMessage:"Continue with default",id:"zlYIh9m2kM"}:{defaultMessage:"Upload full body photo",id:"VD13bqnxFO"}),icon:l==="default"?_0:mh,isLoading:u,disabled:u,variant:"primary",onClick:h})]})]})});fde.displayName="ChooseBodyView";const KG=({onClick:e,title:t,description:n,selected:r})=>i.jsxs(z,{className:U("gap-xs p-md !ring-super relative flex cursor-pointer flex-col rounded-xl border duration-150",r?"!border-transparent ring-2":"ring-0"),onClick:e,children:[i.jsx("div",{className:"mb-sm aspect-square overflow-hidden rounded-md",children:i.jsx(is,{src:"/static/images/tryon/avatar_body.png",alt:"Default body",imageClassName:"size-full object-contain invert opacity-10",containerClassName:"size-full",maskClassName:"bg-transparent",includeLightBoxModal:!1,draggable:!1})}),i.jsx(L,{variant:"baseSemi",className:"text-center",children:t}),i.jsx(L,{variant:"small",className:"px-md text-pretty text-center",color:"light",children:n})]}),mde=A.memo(({status:e,onClose:t,onBack:n,resultUrl:r,saveAvatar:s,onSuccessfulOnboarding:a})=>{const{$t:o}=Q(),[l,c]=f.useState(!1),u=f.useCallback(async()=>{if(r&&e==="success"&&!l){c(!0);const d=await s(r);t(),c(!1),a(d)}else c(!1),t()},[t,r,e,s,a,l]);return i.jsxs("div",{className:"gap-lg flex flex-col",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(z,{className:U("gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border"),children:r&&i.jsx(is,{src:r,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{variant:"page-title",className:"text-center",children:i.jsx(pe,{defaultMessage:"Your new virtual you",id:"LoEf9iMkXR"})}),i.jsx(L,{variant:"small",className:"text-center",color:"light",children:i.jsx(pe,{defaultMessage:"Your personalized avatar is ready",id:"MLiXNgEouW"})})]}),i.jsxs("div",{className:"gap-sm flex justify-center",children:[i.jsx(ge,{text:o({defaultMessage:"Retry",id:"62nsdyMyIO"}),variant:"border",onClick:n,disabled:l}),i.jsx(ge,{text:o({defaultMessage:"Start Shopping",id:"BRgXJINE++"}),variant:"primary",onClick:u,disabled:e!=="success"||l,isLoading:l})]})]})});mde.displayName="ConfirmAvatarView";const pde=A.memo(({localPreviewUrl:e,onClose:t})=>{const{$t:n}=Q(),r=f.useMemo(()=>{if(e)return{image:e,name:"Avatar Preview",status:uPe.IN_PROGRESS,type:"image",medium:"image",author_name:"PPLX",author_url:"https://pplx.ai",image_width:100,image_height:100,url:e,source:"pplx",thumbnail:e,dark_image_url:e,locations:[],thumbnail_height:100,thumbnail_width:100,sponsored_uuid:"",ad_content_uuid:"",modal_url:"",low_res_image:""}},[e]);return i.jsxs("div",{className:"gap-lg flex flex-col",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{variant:"page-title",className:"text-center",children:i.jsx(pe,{defaultMessage:"Working on your avatar",id:"9nXG80mtI6"})}),i.jsx(L,{variant:"small",className:"text-center",color:"light",children:i.jsx(pe,{defaultMessage:"You can continue shopping while we create your virtual you. It shouldn't be long.",id:"Z5TNVvv3SP"})})]}),i.jsxs("div",{className:"gap-lg flex flex-col items-center",children:[i.jsx(z,{className:"gap-sm relative isolate flex aspect-[252/336] w-full max-w-[400px] flex-col overflow-hidden rounded-lg border",children:i.jsx(lde,{generating:!0,media:r})}),i.jsx(ge,{text:n({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"}),variant:"primary",onClick:t})]})]})});pde.displayName="GeneratingAvatarView";const Cy=A.memo(({title:e,icon:t})=>i.jsx(z,{className:"gap-sm p-sm flex flex-col items-center justify-center rounded-lg border",children:i.jsxs(L,{variant:"smallBold",className:"gap-xs flex flex-row items-center",children:[i.jsx(me,{icon:t,size:"md"}),e]})}));Cy.displayName="InfoCell";const hde=A.memo(({image:e,title:t,className:n,description:r})=>i.jsxs(z,{className:U("gap-sm relative col-start-2 row-start-2 flex flex-col overflow-hidden rounded-lg border",n),children:[e&&i.jsx(is,{src:e,alt:"Intro",imageClassName:"w-full object-cover object-top pointer-events-none max-h-[175px]",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),i.jsxs("div",{className:"from-base gap-xs p-md absolute inset-0 flex flex-col items-center justify-end bg-gradient-to-t from-5% to-transparent",children:[i.jsx(L,{variant:"smallBold",className:"flex items-end justify-center text-center",children:t}),r&&i.jsx(L,{variant:"tinyRegular",className:"text-pretty text-center leading-tight",color:"light",children:r})]})]}));hde.displayName="InstructionCell";async function xQe({request:e,reason:t}){const{data:n,error:r}=await ne.POST("/rest/shopping/generate-shopping-try-on",t,{body:e,timeoutMs:35e3,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}async function YG({request:e,reason:t}){const{data:n,error:r}=await ne.POST("/rest/shopping/try-on-photo/generate-avatar",t,{body:e,timeoutMs:4e4,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}const bQe=async({reason:e,try_on_photo_url:t})=>{try{const n=await ne.PUT("/rest/shopping/try-on-photo/save",e,{body:{try_on_photo_url:t},timeoutMs:Pe()});return n.data?n.data:{status:"error",user_try_on_photo_url:""}}catch(n){return ee.error("Failed to save user try on photo",n),{status:"error",user_try_on_photo_url:""}}},_Qe=async({reason:e})=>{try{const t=await ne.DELETE("/rest/shopping/try-on-photo/delete",e,{timeoutMs:Pe()});return t.data?t.data:{status:"error"}}catch(t){return ee.error("Failed to delete user try on photo",t),{status:"error"}}},pO=async({file:e,fileSource:t,forceImage:n,reason:r})=>{const s=await ne.POST("/rest/uploads/create_upload_url",r,{body:{filename:e.name,content_type:e.type,source:t??"default",file_size:e.size,force_image:n??!1},timeoutMs:Kt.MEDIUM,retries:2});return s.data?s.data:null},wQe=async({remote_file_id:e,connection_type:t,source:n,reason:r})=>{const s=await ne.POST("/rest/connectors/attachments/upload",r,{body:{remote_file_id:e,connection_type:t,source:n??"default"},timeoutMs:Kt.VERY_HIGH,retries:2});return s.data?s.data:null};async function CQe({request:e,reason:t}){return new Promise((n,r)=>{ne.SSE("/rest/sse/attachment_processing/subscribe",t,{params:e,handlers:{message:s=>{n(s)}}}).catch(r)})}const gde=({reason:e,productImageUrl:t})=>{const{$t:n}=Q(),{openToast:r}=xn(),{openModal:s,closeModal:a}=vt(),o=mt(),[l,c]=f.useState({status:"idle",error:null,resultUrl:null,selfieUrl:null});f.useEffect(()=>{if(t){const E=o.getQueryData(n4(t));E&&c(M=>({...M,resultUrl:E}))}},[t,o]);const u=f.useRef(!1),d=f.useCallback(()=>{c({status:"idle",error:null,resultUrl:null,selfieUrl:null})},[]),m=f.useCallback(E=>{c(M=>({...M,status:"error",error:E}))},[]),p=f.useCallback(async E=>{if(!E.type.startsWith("image/"))return m(n({defaultMessage:"Only image files are supported.",id:"f4sVsu2Ean"})),null;const M=10*1024*1024;if(E.size>M)return m(n({defaultMessage:"Image size exceeds 10MB limit.",id:"/lVoGk8eeX"})),null;try{c(O=>({...O,status:"uploading"}));const k=await pO({file:E,fileSource:"shopping_try_on",forceImage:!0,reason:e});if(!k?.fields||!k?.s3_bucket_url)throw k?.rate_limited?new Error("File upload failed due to rate limit."):new Error("Failed to get upload URL");const T=new FormData;Object.entries(k.fields).forEach(([O,P])=>{T.append(O,P)}),T.append("file",E);const j=await fetch(k.s3_bucket_url,{method:"POST",body:T});if(!j.ok)throw new Error("Failed to upload file");let R=null;try{const O=await j.json();O?.secure_url?R=O.secure_url:O?.eager?.[0]?.secure_url&&(R=O.eager[0].secure_url),R&&Km(R)&&(R=YA(R))}catch{k.s3_object_url&&(R=k.s3_object_url)}if(!R)throw new Error("Failed to get image URL from upload response");return c(O=>({...O,status:"idle"})),R}catch(k){return m(k instanceof Error?k.message:n({defaultMessage:"Failed to upload image.",id:"+eCvtPyOJg"})),null}},[n,e,m]),h=f.useCallback(async E=>{const M=await p(E);return M&&c(k=>({...k,selfieUrl:M})),M},[p]),g=f.useCallback(()=>{s("shoppingTryOnOnboardingModal",{onSuccessfulOnboarding:E=>{o.setQueryData(Jw(),{try_on_photo_url:E}),o.setQueryData(Zu(),!1),r(n({defaultMessage:"Avatar updated successfully!",id:"tjpCN5PY48"}),"success",3)},onClose:()=>{a()}})},[s,a,o,r,n]),y=f.useCallback(async E=>{try{const{user_try_on_photo_url:M}=await bQe({reason:e,try_on_photo_url:E});return M}catch(M){return r(n({defaultMessage:"Failed to save avatar. Please try again.",id:"Z5lnZQ5t8Q"}),"error",5),ee.error("Failed to save avatar",M),""}},[e,n,r]),v=f.useCallback(async()=>{try{await _Qe({reason:e})}catch(E){ee.error("Failed to delete avatar",E)}},[e]),x=f.useCallback(E=>{u.current=E},[]),b=f.useCallback(async E=>{const M=await y(E);o.setQueryData(Jw(),{try_on_photo_url:M}),r(n({defaultMessage:"Your avatar has been generated! You can now try on clothes.",id:"moiCrokdKs"}),"success",10,"",n({defaultMessage:"Check it out",id:"IjqWGw+QT1"}),()=>{s("avatarManagementModal",{source:"toast",onRetry:g})})},[y,n,r,o,s,g]),_=f.useCallback(async E=>{try{c(k=>({...k,status:"processing",resultUrl:null,error:null})),o.setQueryData(Zu(),!0);const M=await YG({request:{user_image_url:E},reason:e});if(M.status==="failed")throw o.setQueryData(Zu(),!1),new Error("Failed to generate avatar");c(k=>({...k,status:"success",resultUrl:M.image_url})),u.current&&await b(M.image_url),o.setQueryData(Zu(),!1)}catch(M){m(M instanceof Error?M.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,o]),w=f.useCallback(async(E,M)=>{try{c(T=>({...T,status:"processing",resultUrl:null,error:null})),o.setQueryData(Zu(),!0);const k=await YG({request:{user_image_url:M,selfie_image_url:E},reason:e});if(k.status==="failed")throw o.setQueryData(Zu(),!1),new Error("Failed to generate avatar");c(T=>({...T,status:"success",resultUrl:k.image_url})),u.current&&await b(k.image_url),o.setQueryData(Zu(),!1)}catch(k){m(k instanceof Error?k.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,o]),C=f.useCallback(async(E,M)=>{try{c(T=>({...T,status:"processing",resultUrl:null,error:null}));const k=await xQe({request:{image_url:E,product_image_url:M},reason:e});if(k.status==="error")throw new Error("Failed to generate try-on");c(T=>({...T,status:"success",resultUrl:k.image_url})),M&&o.setQueryData(n4(M),k.image_url)}catch(k){m(k instanceof Error?k.message:n({defaultMessage:"Failed to generate try-on.",id:"ptEP5MGDf6"}))}},[e,n,m,o]),S=f.useCallback(()=>{t&&o.removeQueries({queryKey:n4(t)}),c(E=>({...E,resultUrl:null}))},[t,o]);return f.useMemo(()=>({status:l.status,error:l.error,resultUrl:l.resultUrl,selfieUrl:l.selfieUrl,uploadPhoto:p,uploadSelfie:h,generateDefaultAvatar:_,generateCustomAvatar:w,tryOnProduct:C,saveAvatar:y,resetState:d,deleteAvatar:v,setShouldAutoSaveAvatar:x,clearCachedTryOn:S,handleRetry:g}),[l.status,l.error,l.resultUrl,l.selfieUrl,p,h,_,w,C,y,d,v,x,S,g])},yde=A.memo(({isOpen:e,onClose:t,onSuccessfulOnboarding:n})=>{const r="shopping-try-on-onboarding",{status:s,resultUrl:a,selfieUrl:o,uploadSelfie:l,generateDefaultAvatar:c,generateCustomAvatar:u,uploadPhoto:d,saveAvatar:m,resetState:p,setShouldAutoSaveAvatar:h}=gde({reason:r}),[g,y]=f.useState("intro"),[v,x]=f.useState(null),[b,_]=f.useState(null),w=f.useCallback(k=>{x(T=>(T&&T!==k&&URL.revokeObjectURL(T),k))},[]),C=f.useCallback(()=>{s==="processing"&&g==="generating_avatar"?h(!0):p(),y("intro"),_(null),t()},[t,p,s,g,h]);f.useEffect(()=>{!e&&v&&(URL.revokeObjectURL(v),x(null))},[e,v]),f.useEffect(()=>{g==="generating_avatar"&&(s==="success"&&a?y("confirm_avatar"):s==="error"&&(y("choose_body"),_(null)))},[g,s,a]);const S=f.useCallback(()=>y("create_avatar"),[]),E=f.useCallback(k=>(_("selfie"),l(k)),[l]),M=f.useCallback(k=>(_("body"),d(k)),[d]);return i.jsx(Xt,{isOpen:e,onClose:C,modalClassname:"light",children:i.jsxs("div",{className:"size-full",children:[g==="intro"&&i.jsx(cde,{setViewState:y}),g==="create_avatar"&&i.jsx(ude,{setViewState:y,uploadSelfie:E,setLocalPreviewUrl:w,isSelfieUploading:s==="uploading"&&b==="selfie"}),g==="choose_body"&&i.jsx(fde,{setViewState:y,generateDefaultAvatar:c,selfieUrl:o,uploadPhoto:M,generateCustomAvatar:u,setLocalPreviewUrl:w}),g==="generating_avatar"&&i.jsx(pde,{localPreviewUrl:v,onClose:C}),g==="confirm_avatar"&&i.jsx(mde,{status:s,onClose:C,onBack:S,resultUrl:a,saveAvatar:m,onSuccessfulOnboarding:n})]})})});yde.displayName="ShoppingTryOnOnboardingModal";const hO=Th("AskInputProvider",()=>Po((e,t)=>({activeMenu:null,fileUploadUpsellTooltipOpen:!1,suggestions:le,blankStateSuggestions:{[oe.SEARCH]:null,[oe.RESEARCH]:null,[oe.STUDIO]:null,[oe.STUDY]:null},showSuggestDropdown:!1,actions:{onActiveMenuChange:n=>{e({activeMenu:n})},setFileUploadUpsellTooltipOpen:n=>{e({fileUploadUpsellTooltipOpen:n})},setSuggestions:n=>{e({suggestions:n})},setBlankStateSuggestions:(n,r)=>{const s=t().blankStateSuggestions;e({blankStateSuggestions:{...s,[r]:n}})},setShowSuggestDropdown:n=>{e({showSuggestDropdown:n})}},inputRef:f.createRef()}))),sf=hO.Provider,SQe=hO.useSelector,EQe=hO.useTrackedState,jo=()=>SQe(e=>e.actions),ws=EQe,gO=A.memo(()=>i.jsx("div",{className:"bg-base fixed inset-0 z-[999] flex h-screen w-screen items-center justify-center opacity-50"}));gO.displayName="VoiceToVoiceModalLoader";const yO=A.memo(function(t){const{className:n,children:r,result:s,trackEvent:a,...o}=t,l=U("group flex size-full cursor-pointer items-stretch",n);return aO(s)?i.jsx(Ye,{target:"_blank",rel:"noopener",className:l,href:s.url,...o,children:i.jsx("div",{className:"w-full",children:r})}):i.jsx(i.Fragment,{children:r})});yO.displayName="CitationCardLink";const vO=A.memo(({variant:e="medium",searchType:t})=>{const n=t==="memory",s=U("flex items-center justify-between w-full",e==="small"?"mb-0":"mb-2");return i.jsxs("div",{className:s,children:[i.jsxs(L,{className:"flex items-center gap-2",variant:"tiny",color:"light",children:[i.jsx(me,{icon:n?Xi:Tf,size:"sm"}),n?i.jsx(pe,{defaultMessage:"Memory",id:"dVx3yznM2C"}):i.jsx(pe,{defaultMessage:"Library",id:"StcK672jB9"})]}),i.jsx(L,{variant:"tiny",color:"ultraLight",children:i.jsx(me,{icon:ww,size:"sm"})})]})});vO.displayName="MemorySearchCitationCardTitle";const vde=e=>e.is_scrubbed??!1,MQe=e=>xO(e)?vde(e):!1,xO=e=>e.is_memory||e.is_conversation_history,kQe=e=>e.is_memory,mE=e=>{const t=e.is_client_context,n=MQe(e);return t||n},xde=A.memo(function(t){const{$t:n}=Q(),{result:r,additionalMetadata:s,variant:a}=t,o=r.url,l=r.meta_data?.generated_file_description??r.snippet,c=r.meta_data?.generated_file_title??r.name,u=r?.is_client_context,d=!!r.meta_data?.connection_type,m=typeof r.meta_data?.quoteBeforeContext=="string"?r.meta_data?.quoteBeforeContext:"",p=typeof r.meta_data?.quoteEmphasisText=="string"?r.meta_data?.quoteEmphasisText:"",h=typeof r.meta_data?.quoteAfterContext=="string"?r.meta_data?.quoteAfterContext:"",g=m.length>0||p.length>0||h.length>0,y=a!=="grid"&&l&&g,v=r.meta_data?.repo_type,x=typeof r.meta_data?.wiley_book_uuid=="string",b=typeof r.meta_data?.domain_name=="string"?r.meta_data?.domain_name:void 0,_=_Ye(r),w=()=>{if(d&&r.meta_data?.connection_type!==Tt.WILEY)return yP(r.meta_data?.connection_type);if(r.is_attachment){if(v=="USER")return n({defaultMessage:"Local Files",id:"FBnEWaGOHR"});if(v=="ORG")return n({defaultMessage:"Org Files",id:"DaFSYzpM1Q"});if(v=="COLLECTION")return n({defaultMessage:"Files",id:"m4vqJl0/FT"});if(r?.meta_data?.patent_name)return r.meta_data.patent_name;if(!r?.meta_data?.file_uuid)return n({defaultMessage:"Attachment",id:"eLCAEP8LHj"})}return b},C=xO(r),S=r.is_memory,E=mE(r);return i.jsxs("div",{className:U("gap-xs pointer-events-none relative flex h-full max-w-full select-none flex-col",{"px-sm pb-sm pt-sm w-full":a==="grid"},{"p-md":a!=="grid"}),children:[i.jsxs("div",{className:"flex w-full items-center justify-between",children:[C&&!E?i.jsx(vO,{variant:"small",searchType:S?"memory":"conversation-history"}):i.jsxs("div",{className:"space-x-xs flex",children:[s||null,i.jsx(bu,{variant:"tiny",color:"light",url:o,isAttachment:r.is_attachment,connectionType:r.meta_data?.connection_type,source:w(),isInlineAttachment:_,isPatent:!!r?.meta_data?.patent_name})]}),i.jsxs("div",{children:[x&&i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(me,{size:"sm",icon:Bte})}),u&&a==="grid"?i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(me,{size:"sm",icon:Vte})}):null]})]}),i.jsx(L,{variant:a==="grid"?"tiny":a==="list"?"small":"base",className:U("",{"":a==="grid","pr-1":a==="list"}),children:S&&!E?i.jsx(L,{variant:"tiny",className:"line-clamp-2 h-8",children:r?.snippet}):i.jsx("span",{className:"line-clamp-1 text-left md:line-clamp-2 md:h-8",children:c||i.jsx("div",{children:""})})}),c!==r.name?i.jsx(L,{variant:"small",color:"light",className:"line-clamp-1",children:r.name}):null,y&&i.jsxs(L,{variant:a==="list"?"tiny":"small",className:"mt-two border-super line-clamp-[8] border-l-4 pl-2 font-normal",children:[i.jsx("span",{children:m}),i.jsx("span",{className:"bg-super/30",children:p}),i.jsx("span",{children:h})]}),a!=="grid"&&l&&!g&&i.jsx(L,{variant:a==="list"?"tiny":"small",className:"mt-two line-clamp-1 font-normal md:line-clamp-4",children:l}),E&&a!=="grid"?i.jsxs(z,{className:"gap-xs pt-sm mt-xs flex items-center border-t",children:[i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(me,{size:"sm",icon:ww})}),i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(pe,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})});xde.displayName="CitationDefaultCard";const bde=A.memo(function(t){const{result:n,imageURL:r,citationNumber:s,useLightBoxModal:a=!0}=t,o=U(" w-full relative max-h-[76px]");return i.jsxs("div",{className:o,children:[i.jsx(is,{includeLightBoxModal:a,alt:n.name,containerClassName:"w-full h-full p-xs",imageClassName:"object-cover object-center w-full h-full rounded-md",src:r}),s&&i.jsx(L,{className:"bottom-sm left-sm px-xs absolute z-[1] inline-flex rounded-sm bg-black/50",variant:"tiny",color:"white",children:s})]})});bde.displayName="CitationImageCard";function pE(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function G_(e){return!isNaN(new Date(e).getTime())}function EFt(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function TQe(e){const t=new Date;return t.setDate(t.getDate()-1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function _de(e){const t=new Date;return t.setDate(t.getDate()+1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function hE(e,t,n={numeric:"auto",style:"long"},r=1e3*60*60*24){if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return"";const a=s.getTime()-Date.now(),o=Math.abs(a);return o<=1e3?"":o<1e3*60?e.formatRelativeTime(Math.round(a/1e3),"second",n):o<1e3*60*60?e.formatRelativeTime(Math.round(a/(1e3*60)),"minute",n):o<r&&o<1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60)),"hour",n):o<r&&o>=1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60*24)),"day",n):e.formatDate(s,{month:"short",day:"numeric",year:"numeric"})}const gE=A.memo(e=>{const{children:t,timestamp:n,timestampProps:r,includeIcon:s=!0}=e,a=Q();if(!n)return null;const o=n?.endsWith("Z")?n:`${n}Z`;return i.jsxs(z,{className:"gap-x-xs flex",children:[s?i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(me,{icon:Wte,size:"xs"})}):null,i.jsxs(L,{variant:"tinyRegular",color:"light",...r,children:[t&&i.jsxs(i.Fragment,{children:[t," "]}),hE(a,o)]})]})});gE.displayName="CitationUpdatedAt";class NQe extends Date{constructor(t){const n=t?new Date(t):new Date,r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds());super(r)}getTimezoneOffset(){return 0}}class yE{static isRecentlyTrending(t,n=432e5){return t.meta_data?.client!=="trending"?!1:new Date().getTime()-new NQe(t.meta_data?.published_date).getTime()<n}static normalizeUrl(t){return t.replace(/\/$/,"")}static dedupWebResults(t,n,r=!1){if(!t)return[];if(r)return t.filter(a=>a.is_attachment);if(!n)return t;const s=new Set(n.map(a=>this.normalizeUrl(a.url)));return t.filter(a=>!s.has(this.normalizeUrl(a.url)))}}const wde=A.memo(e=>{const{result:t,imageURL:n}=e,r=t.url,s=Q(),a=f.useMemo(()=>({color:"white"}),[]),o=f.useMemo(()=>i.jsx(gE,{recentlyUpdatedLabel:s.$t({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:t.meta_data?.published_date,timestampProps:a,includeIcon:!1,children:s.$t({defaultMessage:"Updated",id:"xrk6zgu9jU"})}),[s,t.meta_data?.published_date,a]);return i.jsxs("div",{className:U("p-sm gap-sm flex h-full max-h-[190px]"),children:[i.jsxs("div",{className:"gap-xs flex flex-col",children:[i.jsxs("div",{className:"space-x-xs flex justify-between",children:[i.jsx(bu,{variant:"tiny",color:"light",url:r,isAttachment:t.is_attachment}),yE.isRecentlyTrending(t)?i.jsx(pn,{tooltipText:o,children:i.jsx(Wte,{className:"text-super size-3.5"})}):null]}),i.jsx("div",{children:i.jsx(L,{variant:"tiny",className:"line-clamp-2",children:t.name})})]}),n?i.jsx("div",{className:"relative -my-1 -mr-1 size-[60px] shrink-0",children:i.jsx(is,{includeLightBoxModal:!1,alt:t.name,containerClassName:"w-full h-full",imageClassName:"object-cover object-center w-full h-full  rounded-md",src:n})}):null]})});wde.displayName="CitationTrendingCard";var gk={exports:{}},yk,QG;function AQe(){if(QG)return yk;QG=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return yk=e,yk}var vk,XG;function jQe(){if(XG)return vk;XG=1;var e=AQe();function t(){}function n(){}return n.resetWarningCache=t,vk=function(){function r(o,l,c,u,d,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},vk}var ZG;function bO(){return ZG||(ZG=1,gk.exports=jQe()()),gk.exports}var RQe=bO();const Le=io(RQe);var xk,JG;function IQe(){return JG||(JG=1,xk=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var o=a[s];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),xk}var PQe=IQe();const OQe=io(PQe);var bb={exports:{}},bk,eq;function LQe(){if(eq)return bk;eq=1;var e;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/return e=function(){var t={},n={};return t.on=function(r,s){var a={name:r,handler:s};return n[r]=n[r]||[],n[r].unshift(a),a},t.off=function(r){var s=n[r.name].indexOf(r);s!==-1&&n[r.name].splice(s,1)},t.trigger=function(r,s){var a=n[r],o;if(a)for(o=a.length;o--;)a[o].handler(s)},t},bk=e,bk}var _b={exports:{}},_k,tq;function DQe(){if(tq)return _k;tq=1,_k=function(s,a,o){var l=document.head||document.getElementsByTagName("head")[0],c=document.createElement("script");typeof a=="function"&&(o=a,a={}),a=a||{},o=o||function(){},c.type=a.type||"text/javascript",c.charset=a.charset||"utf8",c.async="async"in a?!!a.async:!0,c.src=s,a.attrs&&e(c,a.attrs),a.text&&(c.text=""+a.text);var u="onload"in c?t:n;u(c,o),c.onload||t(c,o),l.appendChild(c)};function e(r,s){for(var a in s)r.setAttribute(a,s[a])}function t(r,s){r.onload=function(){this.onerror=this.onload=null,s(null,r)},r.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+this.src),r)}}function n(r,s){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,s(null,r))}}return _k}var nq;function FQe(){return nq||(nq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=DQe(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default=function(a){var o=new Promise(function(l){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){l(window.YT);return}else{var c=window.location.protocol==="http:"?"http:":"https:";(0,r.default)(c+"//www.youtube.com/iframe_api",function(d){d&&a.trigger("error",d)})}var u=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){u&&u(),l(window.YT)}});return o},e.exports=t.default}(_b,_b.exports)),_b.exports}var wb={exports:{}},Cb={exports:{}},Sb={exports:{}},wk,rq;function UQe(){if(rq)return wk;rq=1;var e=1e3,t=e*60,n=t*60,r=n*24,s=r*365.25;wk=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return a(u);if(m==="number"&&isNaN(u)===!1)return d.long?l(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(d){var m=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function o(u){return u>=r?Math.round(u/r)+"d":u>=n?Math.round(u/n)+"h":u>=t?Math.round(u/t)+"m":u>=e?Math.round(u/e)+"s":u+"ms"}function l(u){return c(u,r,"day")||c(u,n,"hour")||c(u,t,"minute")||c(u,e,"second")||u+" ms"}function c(u,d,m){if(!(u<d))return u<d*1.5?Math.floor(u/d)+" "+m:Math.ceil(u/d)+" "+m+"s"}return wk}var sq;function BQe(){return sq||(sq=1,function(e,t){t=e.exports=s.debug=s.default=s,t.coerce=c,t.disable=o,t.enable=a,t.enabled=l,t.humanize=UQe(),t.names=[],t.skips=[],t.formatters={};var n;function r(u){var d=0,m;for(m in u)d=(d<<5)-d+u.charCodeAt(m),d|=0;return t.colors[Math.abs(d)%t.colors.length]}function s(u){function d(){if(d.enabled){var m=d,p=+new Date,h=p-(n||p);m.diff=h,m.prev=n,m.curr=p,n=p;for(var g=new Array(arguments.length),y=0;y<g.length;y++)g[y]=arguments[y];g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var v=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;v++;var w=t.formatters[_];if(typeof w=="function"){var C=g[v];b=w.call(m,C),g.splice(v,1),v--}return b}),t.formatArgs.call(m,g);var x=d.log||t.log||console.log.bind(console);x.apply(m,g)}}return d.namespace=u,d.enabled=t.enabled(u),d.useColors=t.useColors(),d.color=r(u),typeof t.init=="function"&&t.init(d),d}function a(u){t.save(u),t.names=[],t.skips=[];for(var d=(typeof u=="string"?u:"").split(/[\s,]+/),m=d.length,p=0;p<m;p++)d[p]&&(u=d[p].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function o(){t.enable("")}function l(u){var d,m;for(d=0,m=t.skips.length;d<m;d++)if(t.skips[d].test(u))return!1;for(d=0,m=t.names.length;d<m;d++)if(t.names[d].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}}(Sb,Sb.exports)),Sb.exports}var aq;function VQe(){return aq||(aq=1,function(e,t){var n={};t=e.exports=BQe(),t.log=a,t.formatArgs=s,t.save=o,t.load=l,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function s(u){var d=this.useColors;if(u[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+u[0]+(d?"%c ":" ")+"+"+t.humanize(this.diff),!!d){var m="color: "+this.color;u.splice(1,0,m,"color: inherit");var p=0,h=0;u[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(p++,g==="%c"&&(h=p))}),u.splice(h,0,m)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(u){try{u==null?t.storage.removeItem("debug"):t.storage.debug=u}catch{}}function l(){var u;try{u=t.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}t.enable(l());function c(){try{return window.localStorage}catch{}}}(Cb,Cb.exports)),Cb.exports}var Eb={exports:{}},oq;function WQe(){return oq||(oq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default}(Eb,Eb.exports)),Eb.exports}var Mb={exports:{}},iq;function $Qe(){return iq||(iq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default}(Mb,Mb.exports)),Mb.exports}var kb={exports:{}},Tb={exports:{}},lq;function HQe(){return lq||(lq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default}(Tb,Tb.exports)),Tb.exports}var cq;function zQe(){return cq||(cq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=HQe(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default={pauseVideo:{acceptableStates:[r.default.ENDED,r.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[r.default.ENDED,r.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[r.default.ENDED,r.default.PLAYING,r.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default}(kb,kb.exports)),kb.exports}var uq;function GQe(){return uq||(uq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=VQe(),r=d(n),s=WQe(),a=d(s),o=$Qe(),l=d(o),c=zQe(),u=d(c);function d(h){return h&&h.__esModule?h:{default:h}}var m=(0,r.default)("youtube-player"),p={};p.proxyEvents=function(h){var g={},y=function(E){var M="on"+E.slice(0,1).toUpperCase()+E.slice(1);g[M]=function(k){m('event "%s"',M,k),h.trigger(E,k)}},v=!0,x=!1,b=void 0;try{for(var _=l.default[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var C=w.value;y(C)}}catch(S){x=!0,b=S}finally{try{!v&&_.return&&_.return()}finally{if(x)throw b}}return g},p.promisifyPlayer=function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y={},v=function(M){g&&u.default[M]?y[M]=function(){for(var k=arguments.length,T=Array(k),j=0;j<k;j++)T[j]=arguments[j];return h.then(function(R){var O=u.default[M],P=R.getPlayerState(),N=R[M].apply(R,T);return O.stateChangeRequired||Array.isArray(O.acceptableStates)&&O.acceptableStates.indexOf(P)===-1?new Promise(function(I){var D=function F(){var B=R.getPlayerState(),V=void 0;typeof O.timeout=="number"&&(V=setTimeout(function(){R.removeEventListener("onStateChange",F),I()},O.timeout)),Array.isArray(O.acceptableStates)&&O.acceptableStates.indexOf(B)!==-1&&(R.removeEventListener("onStateChange",F),clearTimeout(V),I())};R.addEventListener("onStateChange",D)}).then(function(){return N}):N})}:y[M]=function(){for(var k=arguments.length,T=Array(k),j=0;j<k;j++)T[j]=arguments[j];return h.then(function(R){return R[M].apply(R,T)})}},x=!0,b=!1,_=void 0;try{for(var w=a.default[Symbol.iterator](),C;!(x=(C=w.next()).done);x=!0){var S=C.value;v(S)}}catch(E){b=!0,_=E}finally{try{!x&&w.return&&w.return()}finally{if(b)throw _}}return y},t.default=p,e.exports=t.default}(wb,wb.exports)),wb.exports}var dq;function qQe(){return dq||(dq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},r=LQe(),s=u(r),a=FQe(),o=u(a),l=GQe(),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}var d=void 0;t.default=function(m){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=(0,s.default)();if(d||(d=(0,o.default)(g)),p.events)throw new Error("Event handlers cannot be overwritten.");if(typeof m=="string"&&!document.getElementById(m))throw new Error('Element "'+m+'" does not exist.');p.events=c.default.proxyEvents(g);var y=new Promise(function(x){if((typeof m>"u"?"undefined":n(m))==="object"&&m.playVideo instanceof Function){var b=m;x(b)}else d.then(function(_){var w=new _.Player(m,p);return g.on("ready",function(){x(w)}),null})}),v=c.default.promisifyPlayer(y,h);return v.on=g.on,v.off=g.off,v},e.exports=t.default}(bb,bb.exports)),bb.exports}var KQe=qQe();const YQe=io(KQe);var QQe=Object.defineProperty,XQe=Object.defineProperties,ZQe=Object.getOwnPropertyDescriptors,fq=Object.getOwnPropertySymbols,JQe=Object.prototype.hasOwnProperty,eXe=Object.prototype.propertyIsEnumerable,mq=(e,t,n)=>t in e?QQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZA=(e,t)=>{for(var n in t||(t={}))JQe.call(t,n)&&mq(e,n,t[n]);if(fq)for(var n of fq(t))eXe.call(t,n)&&mq(e,n,t[n]);return e},JA=(e,t)=>XQe(e,ZQe(t)),tXe=(e,t,n)=>new Promise((r,s)=>{var a=c=>{try{l(n.next(c))}catch(u){s(u)}},o=c=>{try{l(n.throw(c))}catch(u){s(u)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,o);l((n=n.apply(e,t)).next())});function nXe(e,t){var n,r;if(e.videoId!==t.videoId)return!0;const s=((n=e.opts)==null?void 0:n.playerVars)||{},a=((r=t.opts)==null?void 0:r.playerVars)||{};return s.start!==a.start||s.end!==a.end}function pq(e={}){return JA(ZA({},e),{height:0,width:0,playerVars:JA(ZA({},e.playerVars),{autoplay:0,start:0,end:0})})}function rXe(e,t){return e.videoId!==t.videoId||!OQe(pq(e.opts),pq(t.opts))}function sXe(e,t){var n,r,s,a;return e.id!==t.id||e.className!==t.className||((n=e.opts)==null?void 0:n.width)!==((r=t.opts)==null?void 0:r.width)||((s=e.opts)==null?void 0:s.height)!==((a=t.opts)==null?void 0:a.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title}var aXe={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},oXe={videoId:Le.string,id:Le.string,className:Le.string,iframeClassName:Le.string,style:Le.object,title:Le.string,loading:Le.oneOf(["lazy","eager"]),opts:Le.objectOf(Le.any),onReady:Le.func,onError:Le.func,onPlay:Le.func,onPause:Le.func,onEnd:Le.func,onStateChange:Le.func,onPlaybackRateChange:Le.func,onPlaybackQualityChange:Le.func},q_=class extends A.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=t=>{var n,r;return(r=(n=this.props).onReady)==null?void 0:r.call(n,t)},this.onPlayerError=t=>{var n,r;return(r=(n=this.props).onError)==null?void 0:r.call(n,t)},this.onPlayerStateChange=t=>{var n,r,s,a,o,l,c,u;switch((r=(n=this.props).onStateChange)==null||r.call(n,t),t.data){case q_.PlayerState.ENDED:(a=(s=this.props).onEnd)==null||a.call(s,t);break;case q_.PlayerState.PLAYING:(l=(o=this.props).onPlay)==null||l.call(o,t);break;case q_.PlayerState.PAUSED:(u=(c=this.props).onPause)==null||u.call(c,t);break}},this.onPlayerPlaybackRateChange=t=>{var n,r;return(r=(n=this.props).onPlaybackRateChange)==null?void 0:r.call(n,t)},this.onPlayerPlaybackQualityChange=t=>{var n,r;return(r=(n=this.props).onPlaybackQualityChange)==null?void 0:r.call(n,t)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const t=JA(ZA({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=YQe(this.container,t),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(n=>{this.props.title&&n.setAttribute("title",this.props.title),this.props.loading&&n.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var t;(t=this.internalPlayer)==null||t.getIframe().then(n=>{this.props.id?n.setAttribute("id",this.props.id):n.removeAttribute("id"),this.props.iframeClassName?n.setAttribute("class",this.props.iframeClassName):n.removeAttribute("class"),this.props.opts&&this.props.opts.width?n.setAttribute("width",this.props.opts.width.toString()):n.removeAttribute("width"),this.props.opts&&this.props.opts.height?n.setAttribute("height",this.props.opts.height.toString()):n.removeAttribute("height"),this.props.title?n.setAttribute("title",this.props.title):n.setAttribute("title","YouTube video player"),this.props.loading?n.setAttribute("loading",this.props.loading):n.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var t,n,r,s;if(typeof this.props.videoId>"u"||this.props.videoId===null){(t=this.internalPlayer)==null||t.stopVideo();return}let a=!1;const o={videoId:this.props.videoId};if((n=this.props.opts)!=null&&n.playerVars&&(a=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(o.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(o.endSeconds=this.props.opts.playerVars.end)),a){(r=this.internalPlayer)==null||r.loadVideoById(o);return}(s=this.internalPlayer)==null||s.cueVideoById(o)},this.refContainer=t=>{this.container=t},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return tXe(this,null,function*(){sXe(e,this.props)&&this.updatePlayer(),rXe(e,this.props)&&(yield this.resetPlayer()),nXe(e,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return A.createElement("div",{className:this.props.className,style:this.props.style},A.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},vE=q_;vE.propTypes=oXe;vE.defaultProps=aXe;vE.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var hq=vE;const gq={fadeIn:{opacity:1},fadeOut:{opacity:0}},iXe={width:"100%",height:"100%",playerVars:{autoplay:1,color:"white",playsinline:1}},k1=A.memo(e=>{const{isOpen:t,name:n,setisOpen:r,url:s}=e,a=s?Wh(s):void 0,o=f.useRef(void 0),[l,c]=f.useState(!1),u=f.useCallback(p=>{o.current=p.target,c(!0)},[o]),d=f.useCallback(p=>{if(o.current)switch(p.key){case" ":{o.current.getPlayerState()===hq.PlayerState.PLAYING?o.current.pauseVideo():o.current.playVideo();break}case"ArrowRight":{o.current.seekTo(o.current.getCurrentTime()+5,!0);break}case"ArrowLeft":{o.current.seekTo(o.current.getCurrentTime()-5,!0);break}}},[o]);f.useEffect(()=>(t?window.addEventListener("keydown",d):window.removeEventListener("keydown",d),()=>{window.removeEventListener("keydown",d)}),[d,t]);const m=f.useCallback(p=>{r(p)},[r]);return a?i.jsx(A7,{open:t,onOpenChange:m,children:i.jsx(Coe,{className:"z-10",asChild:!0,children:i.jsxs(xe.div,{className:"bg-backdrop/65 fixed inset-0 flex items-center justify-center backdrop-blur-md",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",variants:gq,transition:{duration:.2},children:[i.jsx(vOe,{asChild:!0,children:i.jsx(ge,{extraCSS:"!fixed top-md right-md shadow-sm",icon:Lt,pill:!0,size:"small",variant:"common"})}),i.jsxs(PS,{className:"grid outline-none","aria-describedby":void 0,children:[i.jsx(l1,{children:i.jsx(OS,{children:n})}),i.jsxs(it,{children:[!l&&i.jsx(xe.div,{className:"grid place-items-center [grid-area:1/-1]",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",transition:{duration:.2},variants:gq,children:i.jsx(as,{size:24})},"youtube-player-loading"),i.jsx(xe.div,{className:U("aspect-video overflow-hidden rounded-2xl shadow-lg [grid-area:1/-1] *:size-full","w-[calc(100dvw-(2*var(--size-md)))] sm:w-[75vw]"),initial:{opacity:0},animate:{opacity:l?1:0},transition:{duration:.2},children:i.jsx(hq,{onReady:u,opts:iXe,title:n,videoId:a})},"youtube-player-content")]})]})]},"youtube-player-overlay")})}):null});k1.displayName="YoutubeVideoPlayer";const _O=A.memo(({result:e,idx:t,isSelected:n,testId:r,additionalMetadata:s,isTrendingLayout:a=!1,trackEvent:o,downloadCitation:l,getImageUrl:c,variant:u,isSidecar:d,onClick:m,useLightBoxModal:p=!0})=>{const h=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":"sourceCard";f.useEffect(()=>{const O=setTimeout(()=>o?.("source card viewed",{citation_url:e.url,position:t,title:e.name,source:h}),100);return()=>clearTimeout(O)},[o,e.name,e.url,t,h]);const g=e.url,[y,v]=f.useState(()=>!e.is_memory&&iO(e.url)?e.url:null),[x,b]=f.useState(!1),_=f.useMemo(()=>g&&!d&&Wh(g),[g,d]),[w,C]=f.useState(!1),S=Vue(e),E=Ja(e.url),M=!_&&!e.is_attachment&&!E,k=a&&e.meta_data?.client==="trending",T=f.useMemo(()=>k?i.jsx(wde,{result:e,authors:e.meta_data?.authors,imageURL:e.meta_data?.images?.[0]}):E&&y?i.jsx(bde,{result:e,imageURL:y,useLightBoxModal:p}):E&&!y?i.jsx(ko,{blockCount:1,size:"large"}):i.jsx(xde,{result:e,variant:u,additionalMetadata:s,isSelected:n}),[k,E,y,e,p,u,s,n]),j=f.useCallback((O,P)=>{b(P),v(O)},[]),R=f.useRef(null);return f.useEffect(()=>{const O=new IntersectionObserver(N=>{N.forEach(I=>{I.isIntersecting&&E&&y===null&&!x&&c?.(e,j)})},{threshold:.1}),P=R.current;return P&&E&&O.observe(P),()=>{P&&E&&O.unobserve(P)}},[R,g,c,e,y,j,x,E]),i.jsxs(yO,{result:e,trackEvent:o,children:[i.jsx("div",{ref:R,onClick:O=>{const P=typeof e.meta_data?.quoteBeforeContext=="string"?e.meta_data?.quoteBeforeContext:"",N=typeof e.meta_data?.quoteEmphasisText=="string"?e.meta_data?.quoteEmphasisText:"",I=typeof e.meta_data?.quoteAfterContext=="string"?e.meta_data?.quoteAfterContext:"",D=P.length>0||N.length>0||I.length>0;if(_&&!w&&C(!0),S&&typeof window<"u"){const F=window.open(g,"_blank");F&&F.focus()}else l&&!E?(O.preventDefault(),l(e)):m?.(O);o?.("click citation",{source:h,citation_url:g}),D&&o?.("click check sources citation",{source:h,citation_url:g,quoteBeforeContext:P,quoteEmphasisText:N,quoteAfterContext:I})},className:U("group relative flex w-full items-stretch",{"h-full":u==="grid","cursor-pointer":!!l||!!_||!!m}),"data-test-id":r,children:i.jsx(z,{variant:"subtler",bgHover:M||_?"offsetPlus":void 0,className:U("flex w-full rounded-lg",{"bg-super/10 ring-super/80 hover:!bg-super/10 dark:bg-super/20 dark:ring-super/80 dark:hover:!bg-super/20 ring-1":n}),children:T},e.name)}),_&&g&&e.name&&i.jsx(k1,{isOpen:w,name:e.name,url:g,setisOpen:C})]})});_O.displayName="CitationCard";const lXe=he(async()=>{const{MarkSpinner:e}=await ae(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>QEe);return{MarkSpinner:t}},void 0);return{default:e}}),Cde=A.memo(({entryUUID:e,frontendContextUUID:t,contextUUID:n,webResults:r,isOpen:s,onClose:a,extendedBeforeContext:o,beforeContext:l,selectedText:c,afterContext:u,state:d})=>{const{$t:m}=Q(),{isMobileStyle:p}=ye(),{trackEvent:h}=Me(),g=f.useCallback((b,_)=>{h(b,{entryUUID:e,frontendContextUUID:t,contextUUID:n,selectedTextExtendedBeforeContext:o,selectedTextBeforeContext:l,selectedText:c,selectedTextAfterContext:u,..._})},[e,t,n,o,l,c,u,h]),y=r?.length??0,v=d==="completed"?y===0?m({defaultMessage:"No sources",id:"tN3HZvczgp"}):m({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:y}):m(d==="loading"?{defaultMessage:"Checking...",id:"1SvspNS1us"}:{defaultMessage:"Error",id:"KN7zKn8z4F"}),x=f.useMemo(()=>i.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[i.jsx(lXe,{size:32,shouldAnimate:d==="loading"}),i.jsx(L,{variant:"page-title",className:U("mr-lg line-clamp-1 md:line-clamp-2"),children:v})]}),[d,v]);return i.jsxs(Xt,{isOpen:s,variant:p?"bottom-left-sheet":"side-sheet",onClose:a,titleContent:x,children:[i.jsxs(L,{children:[i.jsx("span",{children:l}),i.jsx("span",{className:"bg-super/30 font-bold",children:c}),i.jsx("span",{children:u})]}),i.jsx("hr",{className:"border-subtlest my-4 w-full border-t"}),i.jsx(z,{className:"gap-md flex h-full flex-col items-start",children:r?.map((b,_)=>i.jsx("div",{className:"gap-sm flex w-full min-w-0 flex-row-reverse",children:i.jsx(_O,{result:b,idx:_,isSelected:!1,variant:"modal",trackEvent:g})},_))})]})});Cde.displayName="CheckSourcesModal";const MFt=3,cXe=120,uXe=1.5,kFt=2,TFt=4;function Sde(e){return"article_info"in e}const NFt=(e,t)=>({backend_uuid:"",context_uuid:"",frontend_context_uuid:"",knowledge_cards:void 0,widget_data:void 0,query_str:e,status:cr.STAGED.toLowerCase(),uuid:t,article_info:{title:e,summary:"",has_changed_title:!1,layout:"text",format:"paragraph",length:"concise",suggested_sections:[],user_selected_media_items:[],audience:"anyone",read_time:0,hero_offset:-1,emphasize_sources:!1,is_live:!1,is_auto_generated:!1},prompt_source:"page_suggestion",final:!1,mode:Hm.ARTICLE.toLowerCase(),sources:{sources:[]},should_index:!1,updated_datetime:void 0,thread_url_slug:void 0,expiry_time:null,thread_access:0,privacy_state:Cp.NONE}),AFt=e=>e?e.image_width&&e.image_height?e.image_width<cXe?!1:e.image_width>=uXe*e.image_height:!0:!1,jFt=(e,t,n,r)=>{const s=[...e],a=t.find(o=>o.image===n);return a&&r<s.length&&s.splice(r,1,a),s},RFt=(e,t,n)=>{const r=[...e],s=r.findIndex(a=>a.image===t);if(s!==-1&&n<r.length){const a=r[n],o=r[s];a&&o&&(r[n]=o,r[s]=a)}return r},Hh=()=>{const{session:e}=Ct(),t=rn(),{firstResult:{backend_uuid:n,context_uuid:r}={}}=Ht(),s=f.useCallback((a,o)=>{oi({name:a,data:{entryUUID:n,threadUUID:r,...o,isPerplexityBrowser:t},session:e??void 0})},[n,r,t,e]);return f.useMemo(()=>({trackEvent:s}),[s])};var xE="Checkbox",[dXe,IFt]=Ra(xE),[fXe,wO]=dXe(xE);function mXe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:m}=e,[p,h]=_i({prop:n,defaultProp:s??!1,onChange:c,caller:xE}),[g,y]=f.useState(null),[v,x]=f.useState(null),b=f.useRef(!1),_=g?!!o||!!g.closest("form"):!0,w={checked:p,disabled:a,setChecked:h,control:g,setControl:y,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:su(s)?!1:s,isFormControl:_,bubbleInput:v,setBubbleInput:x};return i.jsx(fXe,{scope:t,...w,children:pXe(m)?m(w):r})}var Ede="CheckboxTrigger",Mde=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:g}=wO(Ede,e),y=In(s,d),v=f.useRef(c);return f.useEffect(()=>{const x=a?.form;if(x){const b=()=>m(v.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[a,m]),i.jsx(nn.button,{type:"button",role:"checkbox","aria-checked":su(c)?"mixed":c,"aria-required":u,"data-state":Rde(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:y,onKeyDown:Pt(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Pt(n,x=>{m(b=>su(b)?!0:!b),g&&h&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});Mde.displayName=Ede;var kde=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...m}=e;return i.jsx(mXe,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>i.jsxs(i.Fragment,{children:[i.jsx(Mde,{...m,ref:t,__scopeCheckbox:n}),p&&i.jsx(jde,{__scopeCheckbox:n})]})})});kde.displayName=xE;var Tde="CheckboxIndicator",Nde=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=wO(Tde,n);return i.jsx(Os,{present:r||su(a.checked)||a.checked===!0,children:i.jsx(nn.span,{"data-state":Rde(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Nde.displayName=Tde;var Ade="CheckboxBubbleInput",jde=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:m,bubbleInput:p,setBubbleInput:h}=wO(Ade,e),g=In(n,h),y=fP(a),v=dS(r);f.useEffect(()=>{const b=p;if(!b)return;const _=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(_,"checked").set,S=!s.current;if(y!==a&&C){const E=new Event("click",{bubbles:S});b.indeterminate=su(a),C.call(b,su(a)?!1:a),b.dispatchEvent(E)}},[p,y,a,s]);const x=f.useRef(su(a)?!1:a);return i.jsx(nn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:m,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});jde.displayName=Ade;function pXe(e){return typeof e=="function"}function su(e){return e==="indeterminate"}function Rde(e){return su(e)?"indeterminate":e?"checked":"unchecked"}const T1=A.memo(({checked:e,toggleChecked:t,className:n="",variant:r="default",unselectedCheckboxClassName:s,...a})=>i.jsx(kde,{className:U("inline-flex cursor-pointer items-center justify-center duration-150",{"size-[24px]":r==="large","size-[18px]":r==="default","size-[14px]":r==="small"},n),checked:e,onCheckedChange:t,...a,children:i.jsx(z,{variant:e?"super":"background",noBorder:!0,className:U("border-subtle inline-flex size-full items-center justify-center rounded border",{"!border-super bg-super":e},!e&&s),children:i.jsx(Nde,{children:i.jsx(it,{children:e&&i.jsx(xe.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{type:"spring",bounce:.2,duration:.2},children:i.jsx(me,{icon:Rr,size:r==="small"?"xs":"sm",className:"text-inverse"})})})})})}));T1.displayName="Checkbox";const Ide=A.memo(({onSelect:e,isSelected:t,result:n,idx:r})=>{const s=o=>{e?.(o)},{trackEvent:a}=Me();return i.jsxs("div",{className:"gap-sm flex w-full flex-row-reverse",children:[i.jsx("div",{className:"w-full min-w-0",children:i.jsx(_O,{result:n,idx:r,isSelected:t,variant:"modal",trackEvent:a})}),e&&i.jsx("div",{className:"mt-[6px] shrink-0",children:i.jsx(T1,{checked:t,toggleChecked:s.bind(null,n.url)})})]})});Ide.displayName="ManageCitationRow";const CO=A.memo(({webResults:e,isOpen:t,submit:n,onClose:r,entry:s})=>{const{$t:a}=Q(),{isMobileStyle:o}=ye(),[l,c]=f.useState([]),{trackEvent:u}=Hh(),d=b=>{c(_=>_.includes(b)?_.filter(w=>w!==b):_.concat(b))},m=f.useCallback(()=>{c([]),r()},[c,r]),p=f.useCallback(b=>{u("click apply curation",{toDelete:b,entryUUID:s?.backend_uuid??void 0}),n?.(b)},[u,s,n]),h=f.useCallback(()=>{l.length>0&&p([...l]),m()},[l,m,p]),g=f.useMemo(()=>l.length>0?[{text:l.length===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {Remove # source} other {Remove # sources}}",id:"aRfiMe0V3R"},{sources:l.length}),disabled:l.length===0,onClick:h}]:[],[l.length,a,h]),y=s?.query_str??"";let v=y?hc(y).actualQuery:"";s&&Sde(s)&&s.article_info?.title&&(v=s.article_info.title);const x=e?.length??0;return i.jsx(Xt,{actionList:g,title:x===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:x}),subtitle:v??void 0,isOpen:t,variant:o?"bottom-left-sheet":"side-sheet",onClose:m,icon:Gd,children:i.jsx(z,{className:"gap-md flex h-full flex-col items-start",children:e?.map((b,_)=>i.jsx(Ide,{onSelect:s&&n?d:void 0,isSelected:l.includes(b.url),idx:_,result:b},b.url))})})});CO.displayName="CitationListModal";const ls=()=>{const[e,t]=A.useState(!1);return A.useEffect(()=>{t(!0)},[]),e},hXe=({children:e,initial:t=!1,mode:n="wait",className:r,transition:s,supportZeroHeight:a=!0,...o})=>{const[l,{height:c}]=ml(),u=ls(),d=a||c>0?c:"auto";return i.jsx(xe.div,{animate:{height:u?d:"auto"},className:r,transition:s,...o,children:i.jsx("div",{ref:l,children:i.jsx(it,{mode:n,initial:t,children:e})})})},hn=Ta(.16,1,.3,1),PFt=Ta(.7,0,.84,0),gXe=({children:e,initial:t={opacity:0},animate:n={opacity:1},exit:r,transition:s,className:a,style:o,ref:l})=>i.jsx(xe.div,{initial:t,animate:n,exit:r??t,transition:s,ref:l,className:a,style:o,children:e}),Uo=hXe,so=gXe,qi={outOfDate:K({defaultMessage:"Out of date",id:"osuyeDna3D"}),inaccurate:K({defaultMessage:"Inaccurate",id:"nzRZzFiqUd"}),irrelevant:K({defaultMessage:"Irrelevant",id:"yi63oZJMHr"}),upToDate:K({defaultMessage:"Up to date",id:"aOfyGCCmT0"}),accurate:K({defaultMessage:"Accurate",id:"wrxp13nnhA"}),relevant:K({defaultMessage:"Relevant",id:"XpZsjM22T8"}),successToast:K({defaultMessage:"Thank you for your detailed feedback!",id:"ZrHT928df5"}),positivePrompt:K({defaultMessage:"What did you like about this memory? (optional)",id:"xNH2PHiuYB"}),negativePrompt:K({defaultMessage:"What didn't you like about this memory? (optional)",id:"gEOv/lEKfP"}),placeholder:K({defaultMessage:"Add specific details",id:"HY/Q6ifj24"})},yXe={out_of_date:qi.outOfDate,inaccurate:qi.inaccurate,irrelevant:qi.irrelevant},vXe={up_to_date:qi.upToDate,accurate:qi.accurate,relevant:qi.relevant},Pde=A.memo(({type:e,message:t,onFeedbackClick:n})=>{const s=Q().formatMessage,a=f.useCallback(()=>{n(e)},[e,n]);return i.jsx(ge,{size:"small",variant:"common",text:s(t),onClick:a,extraCSS:"w-full justify-start text-left"})});Pde.displayName="FeedbackOption";const Ode=A.memo(({isPositive:e,onFeedbackClick:t,onFreeformVisible:n})=>{const r=e?vXe:yXe,s=f.useMemo(()=>Object.entries(r).map(([a,o])=>i.jsx(Pde,{type:a,message:o,onFeedbackClick:t},a)),[r,t]);return i.jsxs("div",{className:"gap-sm flex flex-col",children:[s,i.jsx(ge,{size:"small",variant:"common",text:"Other...",onClick:n,extraCSS:"w-full justify-start text-left"})]})});Ode.displayName="FeedbackOptions";const Lde=A.memo(({onSubmit:e,feedbackState:t,setFeedbackState:n,onDismiss:r,isPositive:s})=>{const{openToast:a}=xn(),l=Q().formatMessage,{isMobileStyle:c,isMobileUserAgent:u}=ye(),[d,m]=f.useState(!1),p=f.useCallback(()=>{a(l(qi.successToast),"success",2)},[a,l]),h=f.useCallback(C=>{p(),e(C)},[p,e]),g=f.useCallback(()=>{t&&h(t)},[t,h]),y=f.useCallback(C=>{const S={type:C};n(S),h(S)},[n,h]),v=f.useCallback(()=>{m(!1)},[m]),x=f.useCallback(()=>{m(!0)},[m]),b=f.useCallback(C=>{n({type:"comment",comment:C})},[n]),_=f.useCallback(C=>{So.isEnterKeyWithoutShift(C)&&g()},[g]),w=f.useMemo(()=>[{type:"button",buttonProps:{variant:"primary",size:"small",icon:PR,onClick:g,disabled:!t?.comment,extraCSS:"aspect-square min-h-md h-md w-md",pill:!0}}],[g,t?.comment]);return i.jsx("div",{className:"mt-lg animate-in fade-in w-full duration-500",children:i.jsxs(z,{className:"gap-sm p-md pt-sm relative flex w-full flex-col rounded-md border",children:[i.jsx("div",{className:U("absolute bottom-full flex size-0 items-end",s?"left-2":"left-10"),children:i.jsx(z,{variant:"background",className:"size-3 shrink-0 origin-bottom-left rotate-45 border border-b-0 border-r-0"})}),i.jsxs("div",{className:U("ease-outExpo flex items-center pr-8 duration-150",{"pl-4":d}),children:[i.jsx(Te,{size:"tiny",onClick:v,pill:!0,icon:AR,extraCSS:U("!absolute duration-150",{"opacity-0 pointer-events-none":!d,"top-xs left-xs":d})}),i.jsx(L,{variant:"small",color:"light",children:l(s?qi.positivePrompt:qi.negativePrompt)})]}),i.jsx(Uo,{mode:"popLayout",transition:{duration:.2,ease:hn},children:i.jsx(so,{initial:{opacity:0,x:d?10:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:d?-10:10},transition:{duration:.2,ease:hn},children:d?i.jsx("div",{className:"gap-x-sm flex items-end",children:i.jsx("div",{className:"flex-1",children:i.jsx(cl,{className:"pr-md w-full",placeholder:l(qi.placeholder),value:t?.comment||"",minRows:3,isOptional:!0,onChange:b,onKeyDown:_,autoFocus:!0,isMobileStyle:c,isMobileUserAgent:u,rightItems:w})})}):i.jsx(Ode,{isPositive:s,onFeedbackClick:y,onFreeformVisible:x})},d?"visible":"hidden")}),i.jsx(Te,{size:"tiny",onClick:r,pill:!0,icon:Lt,extraCSS:"!absolute top-xs right-xs"})]})})});Lde.displayName="MemoryFeedbackInput";const xXe=20,bXe=async({queryParams:e,headers:t={},reason:n})=>{const r="getMemories";try{const s=await ne.GET("/rest/memories/list",n,{params:{query:{limit:e.limit,offset:e.offset,query:e.query},timeoutMs:Kt.MEDIUM},headers:t});return s.data?{memories:s.data.memories,totalCount:s.data.total_memory_count}:{memories:[],totalCount:0}}catch(s){return ee.log(`Error in ${r}:`,s),{memories:[],totalCount:0}}},_Xe=(e,t)=>{const n=t.reduce((r,s)=>r+s.memories.length,0);if(n<e.totalCount)return n},OFt=({initialPageParam:e=0,searchQuery:t,reason:n})=>Cc({queryKey:rP(t),queryFn:async({pageParam:r})=>bXe({queryParams:{limit:xXe,offset:r??0,query:t},reason:n}),getNextPageParam:_Xe,initialPageParam:e,refetchOnMount:"always",placeholderData:r=>r}),wXe=async({memoryKey:e,reason:t})=>{try{return(await ne.DELETE("/rest/memories/delete",t,{params:{query:{memory_key:e}}})).data}catch(n){ee.log("Error in deleteMemory:",n);return}},CXe=({reason:e})=>{const t=mt();return bt({mutationFn:n=>wXe({memoryKey:n,reason:e}),onMutate:async n=>{await t.cancelQueries({queryKey:["memories"]});const r=t.getQueryData(["memories"]);try{t.setQueryData(["memories"],s=>{if(!s)return s;const a=s.pages.map(o=>({totalCount:o.totalCount-1,memories:o.memories.filter(l=>l.memory_key!==n)}));return{...s,pages:a}})}catch(s){ee.log(`Error in onMutate deleteMemories (${rP()}):`,s)}return{previousData:r}},onError:(n,r,s)=>{s?.previousData&&t.setQueryData(["memories"],s.previousData)},onSettled:()=>{t.invalidateQueries({queryKey:["memories"]})}})},SXe=async({reason:e})=>{try{return(await ne.DELETE("/rest/memories/delete-all",e)).data}catch(t){ee.log("Error in deleteAllMemories:",t);return}},EXe=()=>{const e=mt();return bt({mutationFn:SXe,onMutate:async()=>{await e.cancelQueries({queryKey:["memories"]});const t=e.getQueryData(["memories"]);try{e.setQueryData(["memories"],()=>({pages:[{memories:[],totalCount:0}],pageParams:[0]}))}catch(n){ee.log(`Error in onMutate deleteAllMemories (${rP()}):`,n)}return{previousData:t}},onError:(t,n,r)=>{r?.previousData&&e.setQueryData(["memories"],r.previousData)},onSuccess:()=>{e.invalidateQueries({queryKey:["memories"]})}})},MXe=async({memoryKey:e,shouldForget:t,feedback:n,feedbackEntryUuid:r,reason:s})=>{try{return(await ne.POST("/rest/memories/toggle_memory_feedback",s,{params:{query:{memory_key:e,should_forget:t===null?void 0:t,feedback:n,feedback_entry_uuid:r}}})).data}catch(a){ee.log("Error in forgetMemory:",a);return}},kXe=({memoryKey:e,reason:t})=>{const n=mt();return bt({mutationFn:({shouldForget:r,feedback:s,feedbackEntryUuid:a})=>MXe({memoryKey:e,shouldForget:r,feedback:s,feedbackEntryUuid:a,reason:t}),onMutate:async({shouldForget:r})=>{await n.cancelQueries({queryKey:fm(e)});const s=n.getQueryData(fm(e));return n.setQueryData(fm(e),r),{previousFeedback:s}},onError:(r,s,a)=>{a?.previousFeedback!==void 0&&n.setQueryData(fm(e),a.previousFeedback)},onSuccess:()=>{n.invalidateQueries({queryKey:fm(e)})}})},TXe=async({entryUuid:e,shouldForget:t,feedback:n,feedbackEntryUuid:r,reason:s})=>{try{return(await ne.POST("/rest/memories/toggle_entry_feedback",s,{params:{query:{entry_uuid:e,should_forget:t===null?void 0:t,feedback:n,feedback_entry_uuid:r}}})).data}catch(a){ee.log("Error in forgetEntry:",a);return}},NXe=({entryUuid:e,reason:t})=>{const n=mt();return bt({mutationFn:({shouldForget:r,feedback:s,feedbackEntryUuid:a})=>TXe({entryUuid:e,shouldForget:r,feedback:s,feedbackEntryUuid:a,reason:t}),onMutate:async({shouldForget:r})=>{await n.cancelQueries({queryKey:mm(e)});const s=n.getQueryData(mm(e));return n.setQueryData(mm(e),r),{previousFeedback:s}},onError:(r,s,a)=>{a?.previousFeedback!==void 0&&n.setQueryData(mm(e),a.previousFeedback)},onSuccess:()=>{n.invalidateQueries({queryKey:mm(e)})}})},AXe=async({memoryKey:e,reason:t})=>{try{return(await ne.GET("/rest/memories/get",t,{params:{query:{memory_key:e}}})).data?.memories?.[0]?.is_thumbs_down}catch(n){ee.log("Error in getMemory:",n);return}},jXe=({memoryKey:e,enabled:t,reason:n})=>$e({queryKey:fm(e??""),queryFn:()=>e?AXe({memoryKey:e,reason:n}):null,enabled:!!e&&t}),RXe=async({entryUuid:e,reason:t})=>{try{return(await ne.GET("/rest/memories/get_entries",t,{params:{query:{entry_uuid:e}}})).data?.entries?.[0]?.is_thumbs_down}catch(n){ee.log("Error in getEntry:",n);return}},IXe=({entryUuid:e,enabled:t,reason:n})=>$e({queryKey:mm(e??""),queryFn:()=>e?RXe({entryUuid:e,reason:n}):null,enabled:!!e&&t}),PXe=async({memoryKey:e,reason:t})=>{try{return(await ne.GET("/rest/memories/get",t,{params:{query:{memory_key:e}}})).data?.memories?.[0]}catch(n){ee.log("Error in getMemoryDetail:",n);return}},LFt=({memoryKey:e,enabled:t,reason:n})=>$e({queryKey:["memory-detail",e],queryFn:()=>e?PXe({memoryKey:e,reason:n}):null,enabled:!!e&&t,retry:2}),Dde=e=>{if(!e)return;const t=e.split("/").filter(Boolean);return t.length>0?t[t.length-1]:void 0},Fde=e=>{const t=e.is_memory?"memory":"conversation_history",n=e.is_memory?e.url:void 0,r=e.is_conversation_history?Dde(e.url):void 0;return{snippet:e.snippet,url:e.url??"",title:e.name,type:t,memoryKey:n,entryUuid:r,timestamp:e.timestamp??""}},Ude=A.memo(({isOpen:e,onClose:t,snippet:n,type:r,url:s,memoryKey:a,entryUuid:o,title:l,timestamp:c})=>{const{formatDate:u}=Q(),d=Ls(),m=r==="conversation_history",p=r==="memory",{trackEvent:h}=Me(),{openStackedModal:g}=vt(),y=f.useCallback(()=>{h("navigated to manage memory",{memory_key:a}),g("memoryListModal",{isMemoryEnabled:!0})},[a,h,g]),v=f.useMemo(()=>i.jsx(L,{variant:"small",children:i.jsx(pe,{defaultMessage:"Manage",id:"0AzlrbMWV9"})}),[]),x=f.useMemo(()=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(me,{icon:m?Tf:Xi}),i.jsx(L,{variant:"baseSemi",children:m?i.jsx(pe,{defaultMessage:"Library",id:"StcK672jB9"}):i.jsx(pe,{defaultMessage:"Memory",id:"dVx3yznM2C"})})]}),[m]);return i.jsxs(Xt,{variant:d?"bottom-sheet":"side-sheet",isOpen:e,onClose:t,modalClassname:"md:!max-w-[400px] md:!min-w-[400px]",modalContentClassname:"justify-between",titleContent:x,children:[i.jsxs(z,{className:"flex size-full flex-col items-start",children:[l&&c&&i.jsxs(i.Fragment,{children:[i.jsx(L,{variant:"baseSemi",children:l}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"pb-sm",children:u(c,{dateStyle:"long"})})]}),i.jsxs("div",{className:"inline",children:[i.jsx(L,{variant:"small",className:"inline",children:n}),i.jsx(L,{variant:"smallBold",className:"ml-1 inline",color:"super",children:m&&i.jsx(Ye,{href:s,target:"_blank",rel:"noopener",className:"whitespace-nowrap",children:i.jsx(pe,{defaultMessage:"See more",id:"yoLwRWw99S"})})})]}),i.jsx(Bde,{entryUuid:o??"",memoryKey:a??"",type:r})]}),p&&i.jsxs(z,{className:"flex w-full items-center justify-center gap-1",children:[i.jsx(L,{variant:"small",className:"inline",color:"light",children:i.jsx(pe,{defaultMessage:"See all your memories.",id:"h0JAuR900y"})}),i.jsx(Te,{onClick:y,size:"small",variant:"common",noPadding:!0,text:v})]})]})});Ude.displayName="MemorySearchHistoryModal";const Bde=A.memo(({entryUuid:e,memoryKey:t,type:n})=>{const r="feedback-container",{$t:s}=Q(),a=f.useMemo(()=>{if(typeof window>"u")return;const M=Dde(window.location.pathname);if(M)return M.split("-").pop()},[]),{mutate:o}=NXe({entryUuid:e??"",reason:r}),{mutate:l}=kXe({memoryKey:t??"",reason:r}),{trackEvent:c}=Me(),{data:u}=jXe({memoryKey:t,enabled:!!t&&n==="memory",reason:r}),{data:d}=IXe({entryUuid:e??"",enabled:!!e&&n==="conversation_history",reason:r}),[m,p]=f.useState(!1),[h,g]=f.useState(!1),[y,v]=f.useState(null),x=f.useMemo(()=>n==="memory"?u:d,[n,u,d]),b=f.useCallback((M,k)=>{n==="conversation_history"&&e&&o({shouldForget:M,feedback:k,feedbackEntryUuid:a}),n==="memory"&&t&&l({shouldForget:M,feedback:k,feedbackEntryUuid:a})},[n,e,t,o,l,a]),_=f.useCallback(M=>{c("memory search history feedback",{type:n,isHelpful:!M,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),b(M),g(!M),p(!0)},[n,e,t,c,b]),w=f.useCallback(()=>{if(x===!1){b(null),p(!1);return}_(!1)},[x,b,_]),C=f.useCallback(()=>{if(x===!0){b(null),p(!1);return}_(!0)},[x,b,_]),S=f.useCallback(M=>{const k=M.type==="comment"?M.comment:M.type;b(!h,k),c("memory search history feedback",{type:n,isHelpful:h,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),p(!1),v(null)},[n,e,t,c,h,b]),E=f.useCallback(()=>{p(!1),v(null)},[]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(Te,{size:"small",icon:LXe(x??null),onClick:w,toolTip:s({defaultMessage:"Helpful",id:"5vwKkgYwrE"}),pill:!0}),i.jsx(Te,{size:"small",icon:OXe(x??null),onClick:C,toolTip:s({defaultMessage:"Not helpful",id:"04tuTF23S7"}),pill:!0})]}),x===!0&&i.jsx(L,{variant:"tinyRegular",color:"light",children:i.jsx(pe,{defaultMessage:"This {type} will not be referenced in future searches.",id:"167AKZjMm1",values:{type:n==="memory"?"memory":"entry"}})}),m&&i.jsx(Lde,{onSubmit:S,feedbackState:y,setFeedbackState:v,onDismiss:E,isPositive:h})]})});Bde.displayName="FeedbackContainer";const OXe=e=>e===null?_w:e===!0?c4e:_w,LXe=e=>e===null?CN:e===!1?u4e:CN,hd={linear_alt:{name:"Linear",tagline:K({defaultMessage:"Plan and track projects, issues, and team workflows in Linear",id:"6u9Zf65BGW"}),bullets:[K({defaultMessage:"Search across Linear issues, projects, and teams",id:"MicGE6HssU"}),K({defaultMessage:"Create and update Linear issues and projects",id:"scUqB1LbKr"}),K({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),K({defaultMessage:"Data is retrieved from and written back to Linear whenever you query in Perplexity",id:"b/8mLQxIqE"})],developer:K({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.linear.com",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167711-linear-connector-for-enterprise-pro",footnote:{link:"https://www.perplexity.ai/help-center/en/articles/12167711-linear-connector-for-enterprise-pro",text:K({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},google_drive:{name:"Google Drive",tagline:K({defaultMessage:"Get in-depth answers from your Google Drive content",id:"CDmY5AQsRD"}),bullets:[K({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),K({defaultMessage:"Updates to your Google Drive files are automatically synced to Perplexity",id:"k0B4qzv3NH"}),K({defaultMessage:"File and folder selection is based on your existing Google Drive permissions",id:"J1Fu/3n3pb"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://drive.google.com",supportUrl:null,documentationUrl:null,footnote:null},sharepoint:{name:"SharePoint",tagline:K({defaultMessage:"Get in-depth answers from your SharePoint content",id:"H/XGo2cLQi"}),bullets:[K({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),K({defaultMessage:"Updates to your SharePoint files are automatically synced to Perplexity",id:"3asA6JKlOn"}),K({defaultMessage:"File and folder selection is based on your existing SharePoint permissions",id:"m2/iFnRhkg"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://microsoft.sharepoint.com/",supportUrl:null,documentationUrl:null,footnote:null},onedrive:{name:"OneDrive",tagline:K({defaultMessage:"Get in-depth answers from your OneDrive content",id:"6HI2ZlxJGV"}),bullets:[K({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),K({defaultMessage:"Updates to your OneDrive files are automatically synced to Perplexity",id:"gCHhNKes4R"}),K({defaultMessage:"File and folder selection is based on your existing OneDrive permissions",id:"YCVPoXax40"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.microsoft.com/en-us/microsoft-365/onedrive/online-cloud-storage",documentationUrl:null,supportUrl:null,footnote:null},box:{name:"Box",tagline:K({defaultMessage:"Get in-depth answers from your Box content",id:"vj5W7AIDE6"}),bullets:[K({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),K({defaultMessage:"Updates to your Box files are automatically synced to Perplexity",id:"tkl3HRlwOf"}),K({defaultMessage:"File and folder selection is based on your existing Box permissions",id:"LuX1iT7lFa"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.box.com/",documentationUrl:null,supportUrl:null,footnote:null},dropbox:{name:"Dropbox",tagline:K({defaultMessage:"Get in-depth answers from your Dropbox content",id:"+RPvqEE51/"}),bullets:[K({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),K({defaultMessage:"Updates to your Dropbox files are automatically synced to Perplexity",id:"Qnsbs8527p"}),K({defaultMessage:"File and folder selection is based on your existing Dropbox permissions",id:"kzOZ3ZFcW4"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.dropbox.com/",documentationUrl:null,supportUrl:null,footnote:null},notion_mcp:{name:"Notion",tagline:K({defaultMessage:"Search and create content on your Notion pages",id:"rXdfDrSVlj"}),bullets:[K({defaultMessage:"Search across your pages and data ",id:"Ib2j2yH5wv"}),K({defaultMessage:"Create new pages in your teamspace from Perplexity",id:"Ltbp+B60OB"}),K({defaultMessage:"Update your data on existing pages directly from Perplexity",id:"ldpNlZAKLQ"}),K({defaultMessage:"Data is retrieved from and written back to Notion whenever you query in Perplexity",id:"nbLEAiWYzT"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.notion.so/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167654-notion-connector-for-enterprise-pro",footnote:null},github_mcp_direct:{name:"GitHub",tagline:K({defaultMessage:"Search and manage your GitHub repositories ",id:"4miSrKjLad"}),bullets:[K({defaultMessage:"Search, analyze, and summarize your repositories and issues",id:"hi8CvW/ld8"}),K({defaultMessage:"Create, update, and manage issues and pull requests ",id:"6eZgVvjZEw"}),K({defaultMessage:"Monitor workflows ",id:"EduR5immBI"}),K({defaultMessage:"Search and manage notifications to streamline communication",id:"+zOuCOpAH8"}),K({defaultMessage:"Data is retrieved from and written back to GitHub whenever you query in Perplexity",id:"9EQO9mj0sd"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://github.com/",supportUrl:"https://www.perplexity.ai/help-center/en/articles/12275669-github-connector-for-enterprise",documentationUrl:null,footnote:null},asana_mcp_direct:{name:"Asana",tagline:K({defaultMessage:"Plan and track projects, tasks, and team workflows in Asana",id:"9AhVP0Y+6c"}),bullets:[K({defaultMessage:"Search across Asana tasks, projects, and teams",id:"GKC+Sx/2dm"}),K({defaultMessage:"Create and update Asana tasks and projects",id:"TnQ0Far/ZY"}),K({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),K({defaultMessage:"Data is retrieved from and written back to Asana whenever you query in Perplexity",id:"9NNVAEg7U3"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://asana.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:null},asana_mcp_merge:{name:"Asana (Merge)",tagline:K({defaultMessage:"Plan and track projects, tasks, and team workflows in Asana",id:"9AhVP0Y+6c"}),bullets:[K({defaultMessage:"Search across Asana tasks, projects, and teams",id:"GKC+Sx/2dm"}),K({defaultMessage:"Create and update Asana tasks and projects",id:"TnQ0Far/ZY"}),K({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),K({defaultMessage:"Data is retrieved from and written back to Asana whenever you query in Perplexity",id:"9NNVAEg7U3"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://asana.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:null},atlassian_mcp_direct:{name:"Atlassian",tagline:K({defaultMessage:"Plan and track projects, tasks, and team workflows in Atlassian",id:"OKCrVfJwqD"}),bullets:[K({defaultMessage:"Search across Atlassian tasks, projects, and teams",id:"3UDuuWRtR5"}),K({defaultMessage:"Create and update Atlassian tasks and projects",id:"u+44P4c8w+"}),K({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),K({defaultMessage:"Data is retrieved from and written back to Atlassian whenever you query in Perplexity",id:"7gmOJCXim3"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:null},gcal:{name:"Gmail with Calendar",tagline:K({defaultMessage:"Search, create, and manage your emails and calendar events",id:"R3VofVJjT+"}),bullets:[K({defaultMessage:"Search your Gmail and calendar",id:"GCr38D/MA3"}),K({defaultMessage:"Draft and send emails",id:"rMtvi6WyKE"}),K({defaultMessage:"Manage and monitor emails and events",id:"p70DVe/3eQ"}),K({defaultMessage:"Create and update calendar events",id:"ZLhGXocN5/"}),K({defaultMessage:"Data is retrieved from and written back to Gmail and Gcal whenever you query in Perplexity",id:"HsjdaQ7NYa"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://accounts.google.com/InteractiveLogin?emr=1&ltmpl=default&nojavascript=1&rm=false&service=mail&ss=1",documentationUrl:null,supportUrl:null,footnote:null},outlook:{name:"Outlook",tagline:K({defaultMessage:"Search your emails and calendar events",id:"zNVRcAj90b"}),bullets:[K({defaultMessage:"Search your Outlook e-mail and calendar",id:"z5Tw6ljNsF"}),K({defaultMessage:"Manage and monitor emails and events",id:"p70DVe/3eQ"}),K({defaultMessage:"Data is retrieved from and written back to Outlook whenever you query in Perplexity",id:"xX8KEtSv2M"})],developer:K({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.microsoft.com/en-us/microsoft-365/outlook/log-in",documentationUrl:null,supportUrl:null,footnote:null}},DXe=e=>e in hd,FXe=({connectorName:e,connectorAvatar:t,showModal:n,setShowModal:r,handleEnable:s})=>{const{$t:a}=Q(),o=hd[e].websiteUrl,l=hd[e].documentationUrl,c=hd[e].tagline,u=hd[e]?.supportUrl??"https://www.perplexity.ai/help-center/en/articles/10672063-introduction-to-file-connectors-for-enterprise-organizations",d=hd[e].footnote,m=[{label:"Website",url:o,icon:Mf},{label:"Documentation",url:l,icon:w0},{label:"Support",url:u,icon:$te}];return i.jsx(Xt,{isOpen:n,onClose:()=>r(!1),variant:"large",modalContentClassname:"!py-0 w-full",modalClassname:"!max-w-2xl !w-screen",wrapperClassname:"w-full",noPadding:!0,children:i.jsxs(z,{className:"flex flex-col gap-6 px-3 pb-6 pt-2",children:[i.jsxs(z,{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[t&&i.jsx(z,{variant:"subtler",className:"border-subtlest shrink-0 rounded-lg border",children:i.jsx("img",{src:t,alt:$s(e)??void 0,width:60,height:60,className:"object-contain"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{variant:"section-title",children:$s(e)}),c&&i.jsx(L,{variant:"small",color:"light",className:"text-pretty",children:a(c)})]})]}),i.jsx(ge,{text:a({defaultMessage:"Add connector",id:"QDa8Q+GNMs"}),size:"small",variant:"primary",onClick:s,extraCSS:"rounded-full sm:ml-auto"})]}),i.jsxs("section",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"baseSemi",children:a({defaultMessage:"Overview:",id:"75gRjsa29W"})}),i.jsx("ul",{children:hd[e].bullets.map((p,h)=>i.jsx(L,{variant:"small",as:"li",className:"mb-xs ml-4 list-disc text-pretty last:mb-0",children:a(p)},h))})]}),i.jsxs("section",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"baseSemi",children:a({defaultMessage:"Links",id:"qCcwo3DU78"})}),i.jsx("ul",{className:"flex flex-col gap-2",children:m.map((p,h)=>{if(!p.url)return null;const g=p.icon;return i.jsx("li",{className:"text-super group w-fit",children:i.jsxs(Ye,{href:p.url,target:"_blank",className:"flex items-center gap-1",children:[i.jsx(me,{icon:g,size:14}),i.jsx(L,{variant:"small",className:"text-inherit group-hover:underline",children:p.label})]})},h)})})]}),d&&i.jsx("section",{className:"border-t py-2",children:i.jsxs(L,{variant:"tinyRegular",className:"text-pretty",children:[i.jsx(L,{as:"span",variant:"tinyRegular",color:"light",children:a(d.text)}),i.jsx(Ye,{href:d.link,target:"_blank",className:"text-super ml-1",children:a({defaultMessage:"Learn more",id:"TdTXXf940t"})})]})})]})})};function UXe({isOpen:e,onContinue:t,onClose:n}){return i.jsx(Xt,{isOpen:e,onClose:n,title:"",variant:"small",children:i.jsxs(z,{className:"mx-auto w-full rounded-2xl px-4 py-0",children:[i.jsx(L,{variant:"section-title",className:"mb-2",children:i.jsx(pe,{defaultMessage:"We need more access to help with your Google calendar and email",id:"qfQz160ySM"})}),i.jsx(L,{variant:"small",color:"light",className:"mb-6",children:i.jsx(pe,{defaultMessage:"These permissions let us help you schedule meetings, find important messages, manage your inbox, and provide personalized assistance based on your real schedule and communication needs.",id:"yN/31P429t"})}),i.jsx(L,{variant:"small",color:"light",className:"mb-6",children:i.jsx(pe,{defaultMessage:"Important: Please select <b>all permission boxes</b> on the next screen to enable these features.",id:"sr/jqAmxMK",values:{b:r=>i.jsx("span",{className:"font-semibold",children:r})}})}),i.jsx(ge,{text:i.jsx(pe,{defaultMessage:"Grant access to calendar and email",id:"SLN8GewG3+"}),variant:"primary",size:"regular",onClick:t,extraCSS:"w-full rounded-xl mb-4"})]})})}const BXe=({isOpen:e,onClose:t})=>{const n="delete-all-memories-modal",r=Q(),{mutate:s}=EXe(),{trackEvent:a}=Me(),o=f.useMemo(()=>[{text:r.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common"},{text:r.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{a("cleared all memories",{}),s({reason:n}),t()},variant:"rejected"}],[s,r,t,a]);return i.jsx(Xt,{isOpen:e,onClose:t,actionList:o,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 max-w-[324px] p-0",headerClassname:"pt-6 px-6  md:px-6 border-b-0 !pb-0",modalContentClassname:"pt-0",footerClassname:"border-t-0 pt-2 px-6 !pb-6 md:pt-2 md:px-6 md:pb-6",title:r.formatMessage({defaultMessage:"Delete all memories",id:"wViT4HVZZG"}),children:i.jsx("div",{className:"w-full justify-start px-2 py-1",children:i.jsx(L,{variant:"tinyRegular",children:r.formatMessage({defaultMessage:"Are you sure you want to delete all of your memories? Memories cannot be recovered once deleted.",id:"2xMxdqIgTQ"})})})})},VXe=({isOpen:e,onClose:t,memoryId:n,onDeleteSuccess:r})=>{const s="delete-memory-modal",a=Q(),{mutate:o}=CXe({reason:s}),{trackEvent:l}=Me(),{isMobileStyle:c}=ye(),u=f.useMemo(()=>[{text:a.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common",shouldShowConfirmDialog:!0},{text:a.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{n&&(l("delete memory",{memoryId:n}),o(n,{onSuccess:()=>{r?.(),t()}}))},variant:"rejected"}],[o,a,n,t,r,l]);return i.jsx(Xt,{isOpen:e,onClose:t,actionList:u,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 p-0",variant:c?"bottom-sheet":"default",title:a.formatMessage({defaultMessage:"Delete memory",id:"767lMfHCVm"}),children:i.jsx("div",{className:"w-full",children:i.jsx(L,{variant:"small",children:a.formatMessage({defaultMessage:"Are you sure you want to delete this memory? Memories cannot be recovered once deleted.",id:"bJP46nmx6X"})})})})},yq=50,Jy={title:K({defaultMessage:"Watchlist",id:"b+DoOaU7zT"}),saveWatchlist:K({defaultMessage:"Save",id:"jvo0vs3nF0"}),cancel:K({defaultMessage:"Cancel",id:"47FYwba+bI"}),settingsTitle:K({defaultMessage:"Categories",id:"VKb1MSJZP+"}),sports:dt({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add teams",id:"kapmPqUzuB"},searchPlaceholder:{defaultMessage:"Search for a team",id:"yve+fFGCVl"},widgetDescription:{defaultMessage:"Choose your teams",id:"6ZVPGK17cb"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}}),finance:dt({title:{defaultMessage:"Finance",id:"Fm3M+yFIbr"},settingsCtaText:{defaultMessage:"Add stocks",id:"IrqguKbukF"},searchPlaceholder:{defaultMessage:"Search...",id:"0BUTMvePvK"},widgetDescription:{defaultMessage:"Set your watchlist",id:"Uh4Ex766Qm"},settingsDescription:{defaultMessage:"Set your watchlist for daily updates and summaries",id:"7SMcHmFldb"},modalDescription:{defaultMessage:"Updates and news about stocks and more",id:"uJAhXQDitL"}}),f1:dt({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add drivers",id:"R9U03Vy8bO"},searchPlaceholder:{defaultMessage:"Search for a driver",id:"lE7oUWeeV1"},widgetDescription:{defaultMessage:"Choose your drivers",id:"sCVGGM0Ka3"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}})},WXe=({symbol:e})=>i.jsx(L,{color:"light",children:i.jsx("span",{className:"font-mono opacity-70",children:e.slice(0,1)})}),Vde=({image:e,imageDark:t,alt:n,watchlistType:r,className:s,imageClassName:a})=>{const o=r==="FINANCE",{colorScheme:l}=Pr(),c=o&&l==="dark"&&t?t:e,[u,d]=f.useState(()=>{if(!c)return!1;const g=new Image;return g.src=c,g.complete&&g.naturalWidth>0}),[m,p]=f.useState(!1),h=!u||m;return i.jsxs("div",{className:U("relative flex size-6 items-center justify-center",{"bg-subtler":h},s),children:[h&&i.jsx(WXe,{symbol:n??""}),!m&&i.jsx("div",{className:U("absolute",a),children:i.jsx("img",{src:c,alt:n,width:32,height:32,className:U("inset-0 size-full object-contain",{"opacity-0":!u}),onLoad:()=>d(!0),onError:()=>p(!0)})})]})},Wde=async({query:e,watchlistType:t,limit:n,category:r,cometRenderPlace:s,reason:a})=>{const o=encodeURIComponent(e),{data:l,error:c}=await ne.GET("/rest/homepage-widgets/watchlist/list-autosuggest",a,{params:{query:{type:t,query:o,limit:n,category:r,entropy_render_place:s}},timeoutMs:1500,numRetries:1});if(c)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get watchlist autosuggestions",cause:c});return l.results??le},$Xe=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/homepage-widgets/watchlist/subscription",t,{params:{query:{type:e}},headers:{"content-type":"application/json"},numRetries:1});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get watchlist subscriptions",cause:n});return r.results??[]}catch(n){return ee.error(n),[]}},HXe=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/homepage-widgets/watchlist/categories",t,{params:{query:{type:e}},numRetries:1});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get watchlist categories",cause:n});return r?.results??[]}catch(n){return ee.error(n),[]}},zXe=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await ne.PUT("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t??"",category:n}},headers:{"content-type":"application/json"}});if(s)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to add watchlist subscription",cause:s});return!0}catch(s){return ee.error(s),!1}},GXe=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await ne.DELETE("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t,category:n}},headers:{"content-type":"application/json"}});if(s)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to remove watchlist subscription",cause:s});return!0}catch(s){return ee.error(s),!1}},qXe=async({watchlistType:e,identifier:t,order:n,reason:r})=>{try{const{error:s}=await ne.PATCH("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t}},body:{order:n},headers:{"content-type":"application/json"}});if(s)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to update watchlist subscription order",cause:s});return!0}catch(s){return ee.error(s),!1}},bE=e=>["watchlist",e,"subscriptions"],KXe=e=>["watchlist",e,"addSubscription"],YXe=e=>["watchlist",e,"removeSubscription"],QXe=e=>["watchlist",e,"updateSubscription"],SO=({watchlistType:e,reason:t})=>{const n=Qe(),r=bE(e);return $e({queryKey:r,queryFn:()=>$Xe({watchlistType:e,reason:t}),staleTime:0,enabled:n})},$de=({watchlistType:e,queryClient:t,reason:n})=>{const r=bE(e);return bt({mutationKey:KXe(e),mutationFn:async s=>zXe({watchlistType:e,reason:n,...s}),onMutate:async({identifier:s,category:a,description:o,image:l,title:c})=>{await t.cancelQueries({queryKey:r});const u=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(d=[])=>{const m={identifier:s??"",category:a,description:o??"",image_url:l??"",title:c??"",subscribed:!0,order:Date.now()},p=d.filter(h=>h.identifier!==s);return[m,...p]}),{previousSubscriptions:u}},onError:(s,a,o)=>{ee.error("Error adding watchlist subscription",s),t.setQueryData(r,o?.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},Hde=({watchlistType:e,queryClient:t,reason:n})=>{const r=bE(e);return bt({mutationKey:YXe(e),mutationFn:async s=>GXe({watchlistType:e,reason:n,...s}),onSuccess:()=>{t.invalidateQueries({queryKey:r})},onMutate:async({identifier:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(o=[])=>o.filter(l=>l.identifier!==s)),{previousSubscriptions:a}},onError:(s,a,o)=>{ee.error("Error removing watchlist subscription",s),t.setQueryData(r,o?.previousSubscriptions)}})},XXe=({watchlistType:e,queryClient:t,reason:n})=>{const r=bE(e);return bt({mutationKey:QXe(e),mutationFn:async s=>qXe({watchlistType:e,reason:n,...s}),onMutate:async({newOrderedList:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(r);return t.setQueryData(r,s),{previousSubscriptions:a}},onError:(s,a,o)=>{ee.error("Error updating watchlist subscription order",s),o?.previousSubscriptions&&t.setQueryData(r,o.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},vq={nba:A_,nfl:OR,cricket:f4e,ncaam:A_,ncaaw:A_},Ck=d4e,ZXe=({watchlistType:e,selectedCategory:t,setSelectedCategory:n})=>{const r="watchlist-category-dropdown",{isMobileStyle:s}=ye(),{$t:a}=Q(),[o,l]=f.useState([]);f.useEffect(()=>{(async()=>{const m=await HXe({watchlistType:e,reason:r});l(m)})()},[e]);const c=a({defaultMessage:"All Categories",id:"1X6HtI/EN/"}),u=f.useMemo(()=>[{text:c,icon:Ck,onClick:()=>n(void 0),type:"default",active:t===void 0,size:Wt.tiny},...o.map(m=>({text:m.display_name,icon:vq[m.category]||Ck,onClick:()=>n(m),type:"default",active:t?.category===m.category,size:Wt.tiny}))],[o,n,t,c]);return o.length===0?null:i.jsx(Jt,{isMobileStyle:s,items:u,placement:"bottom-end",children:i.jsx(ge,{icon:vq[t?.category]||Ck,size:Wt.tiny,text:t?.display_name??c})})},wn=({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:o="default"})=>{const[l,c]=f.useState(!1),u=a?l:r;return A.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:U({shimmer:u&&o==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&o==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)},zde=e=>e?.includes("perplexity.ai/finance")??!1,Gde=e=>e==="https://www.perplexity.ai/finance",qde=A.memo(({query:e,completion:t,inputsAndCompletions:n,description:r,highlightPrefix:s,url:a,title:o,shouldShowTitle:l})=>{const c=zde(a),u=Gde(a),d=l&&o?o:e,m=c?d.toUpperCase():d,{$t:p}=Q(),h=c?t?.toUpperCase():t;return u?i.jsx(L,{variant:"small",inline:!0,children:p({defaultMessage:"{perplexity} Finance",id:"LnL5Kdg1cp"},{perplexity:"Perplexity"})},"perplexity-finance"):i.jsxs(i.Fragment,{children:[!r&&n?.length&&s?n.map(([g,y],v)=>g?i.jsx(L,{color:"light",variant:"small",className:"inline",as:"div",children:g},`${v}-${g}`):i.jsx(L,{className:"inline whitespace-pre",variant:"small",as:"div",children:y},`${v}-${y}`)):r?i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{variant:"small",inline:!0,children:m}),i.jsx(L,{variant:"tinyRegular",className:"!text-quiet opacity-70",inline:!0,children:r})]}):i.jsx(L,{inline:!0,color:"light",variant:"small",children:m}),t&&s&&!n?.length&&i.jsx(L,{className:"whitespace-pre",inline:!0,variant:"small",children:h}),t&&!s&&i.jsx(L,{color:"light",inline:!0,variant:"small",children:h})]})});qde.displayName="DefaultQueryContentComponent";const Kde=A.memo(({onClick:e,query:t,completion:n,inputsAndCompletions:r,url:s,suggestionIndex:a,keyboardFocusedIndex:o,setKeyboardFocusedIndex:l,leftIcon:c,rightIcon:u,className:d,description:m,title:p,shouldShowTitle:h,highlightPrefix:g=!0,category:y,QueryContentComponent:v=qde,metadata:x,actionHandler:b})=>{const{isMobileUserAgent:_}=ye(),w="group-hover:opacity-100 group-data-[focused=self]:opacity-100",C="opacity-0 group-data-[focused=other]:opacity-0",S=f.useCallback(()=>{l?.(-1)},[l]),E=f.useCallback(M=>h&&p&&t?i.jsx(pn,{tooltipText:t,bodyClassName:"max-w-[300px]",showTooltip:!0,asChild:!0,tooltipLayout:"right",children:M}):M,[h,p,t]);return i.jsx(it,{children:E(i.jsx("div",{"data-focused":o===void 0||o===-1?"none":o===a?"self":"other",className:U("group flex cursor-pointer flex-row items-center rounded-lg p-[8px]",d),onPointerDown:()=>{b?b():e(n?t+n:t)},onPointerLeave:S,children:i.jsxs("div",{className:"flex w-full min-w-0 flex-row whitespace-pre leading-tight",children:[i.jsx(L,{className:"-mr-three",color:"light",inline:!0,variant:"small",children:c}),i.jsx(L,{variant:"small",className:_?"truncate":"line-clamp-2 text-wrap",children:s?i.jsx(Ye,{href:s,target:"_blank",rel:"noopener",children:i.jsx(v,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:x,title:p,shouldShowTitle:h})}):i.jsx(v,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:x,title:p,shouldShowTitle:h})}),u&&i.jsx(L,{variant:"smallBold",color:"super",inline:!0,className:U("pr-xs ml-auto",w,{[C]:!s}),children:u})]})}))})});Kde.displayName="SuggestionCard";const e8={ticker:{order:0,showHeader:!1,highlightPrefix:!1},suggestion:{order:1,showHeader:!1,highlightPrefix:!0},news:{displayName:"Latest News",order:2,showHeader:!0,highlightPrefix:!1},related_question:{displayName:"Related Questions",order:3,showHeader:!0,highlightPrefix:!1},shortcuts:{displayName:"Shortcuts",order:4,showHeader:!0,highlightPrefix:!0}},JXe=e=>{const t={};return e.forEach(n=>{const r=n.category||"suggestion";t[r]||(t[r]=[]),t[r].push(n)}),t},eZe=e=>Object.keys(e).sort((t,n)=>{const r=e8[t]?.order??Number.MAX_SAFE_INTEGER,s=e8[n]?.order??Number.MAX_SAFE_INTEGER;return r-s}),xq=e=>{const{metadata:t}=e;return!!t&&t.type==="price"&&!!t.price_info&&typeof t.price_info.currentPrice=="number"&&!!t.price_info.change&&!!t.price_info.changePercentage},tZe=e=>[...e].sort((t,n)=>{const r=xq(t),s=xq(n);return r&&!s?-1:!r&&s?1:0}),Yde=A.memo(e=>{const{text:t,show:n,className:r}=e;return n?i.jsxs(i.Fragment,{children:[i.jsx(z,{className:U("my-sm sm:mx-sm border-b first:hidden",r)}),t&&i.jsx(z,{variant:"transparent",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:i.jsx(L,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});Yde.displayName="GroupItemSeparator";const Qde=A.memo(({category:e,suggestions:t,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:o,indexOffset:l,LeftIconComponent:c,RightIconComponent:u,QueryContentComponent:d,onFillButtonClick:m,titleClassName:p})=>{const h=f.useMemo(()=>e==="ticker"?tZe(t):t,[e,t]);return t.length?i.jsxs(i.Fragment,{children:[i.jsx(Yde,{show:n.showHeader,text:n.displayName,className:p}),h.map((g,y)=>i.jsx(Xde,{suggestion:g,index:y,category:e,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:o,indexOffset:l,LeftIconComponent:c,RightIconComponent:u,onFillButtonClick:m,QueryContentComponent:d,highlightPrefix:n.highlightPrefix??!0},`${e}-${g.input+g.completion+g.description||g.query_uuid}`))]}):null});Qde.displayName="SuggestionGroup";const Xde=A.memo(({suggestion:{input:e,completion:t,query_uuid:n,image:r,imageDark:s,url:a="",description:o,identifier:l="",category:c,title:u="",subscribed:d=!1,metadata:m,submission_query:p,inputs_and_completions:h,icon_name:g,shouldShowTitle:y,actionHandler:v,isPersonalized:x},index:b,LeftIconComponent:_,QueryContentComponent:w,RightIconComponent:C,highlightPrefix:S,focusedIndex:E,handleSubmit:M,indexOffset:k,onFillButtonClick:T,setFocusedIndex:j,value:R})=>{const O=f.useCallback(D=>M({query:D,query_uuid:n,url:a,identifier:l,category:c,description:o,image:r,imageDark:s,title:u,subscribed:d,submission_query:p,isPersonalized:x},b+k),[c,o,M,l,r,s,b,k,n,p,d,u,a,x]),P=f.useCallback(()=>{T(e+t,a)},[t,e,T,a]),N=f.useMemo(()=>i.jsx(_,{image:r,imageDark:s,alt:e+R,url:a,category:c,iconName:g,value:R}),[_,c,g,r,s,e,a,R]),I=f.useMemo(()=>i.jsx(C,{onClick:P,url:a,isSelected:d,metadata:m,category:c}),[C,P,a,d,m,c]);return i.jsx(Kde,{onClick:O,query:e,completion:t,inputsAndCompletions:h,url:a,suggestionIndex:b+k,keyboardFocusedIndex:E,setKeyboardFocusedIndex:j,description:o,title:u,shouldShowTitle:y,highlightPrefix:S,className:U("hover:bg-subtler","data-[focused=self]:bg-subtler","dark:data-[focused=self]:bg-subtler","hover:data-[focused=other]:bg-raised","dark:hover:data-[focused=other]:bg-subtler"),category:c,QueryContentComponent:w,metadata:m,leftIcon:N,rightIcon:I,actionHandler:v})});Xde.displayName="SuggestionCardFactory";var nZe={};const rZe=60,sZe=2e3,aZe=6,oZe=4,iZe=5,Ym=(e,t)=>e?oZe:t?iZe:aZe,lZe=e=>!(e.length===0||e.includes(`
`)),cZe=e=>e.map(t=>({query:t.text,image:t.image_url,url:t.url,title:t.title})),uZe=e=>e.sort((t,n)=>t.url?-1:n.url?1:t.image?-1:n.image?1:0),t8=(e,t,n)=>{let r=e;(t||nZe.NEXT_PUBLIC_IS_SIDECAR_BUILD)&&(r=e.filter(o=>!o.url));const s=vte(r,"query");if(n){const o=s.findIndex(l=>l.query===n);if(~o){const l=s[o];s.splice(o,1),s.unshift(l)}}const a=uZe(s);return[a,a.slice(0,Ym(t))]},Zde=(e,t,n)=>{const r=n?e.replace(/\s+/g,"").toLocaleLowerCase():e,s=t.query;let a=0,o=0;for(;a<r.length&&o<s.length;)r[a]===s[o]?.toLocaleLowerCase()&&a++,o++;return[a===r.length,o]},dZe=(e,t)=>{const n=e.replace(/\s+/g,""),r=[];let s="",a="",o=0,l=0;for(;o<n.length&&l<t.length;)n[o]?.toLocaleLowerCase()===t[l]?.toLocaleLowerCase()?(a&&(r.push(["",a]),a=""),s+=t[l],o++,l++):(s&&(r.push([s,""]),s=""),a+=t[l],l++);return s&&r.push([s,""]),a&&r.push(["",a]),l<t.length&&r.push(["",t.slice(l)]),r},fZe={calendar:zC,"report-search":Gte,browser:h4e,mail:$v,"shopping-bag":SN,message:LR,"user-heart":zte,play:Hte,globe:p4e,music:m4e,book:w0,plane:HC,plus:rr};var mZe={};const Jde=A.memo(({image:e,alt:t,url:n,iconName:r,value:s,category:a})=>{const o=s.length===0,[l,c]=f.useState(!1),{sidecarSourceTab:{url:u}}=Fs(),d=Pa(),m=f.useMemo(()=>{if(mZe.NEXT_PUBLIC_IS_SIDECAR_BUILD&&u&&o)return J0(u);if(e)return e;if(n)return ede(n)},[e,n,u,o]),p=r?fZe[r]:null,h=o?MDe[d]??Ts:Ts;return a==="shortcuts"&&!r?i.jsx(me,{icon:g4e,size:"sm",className:"mt-two mr-2 w-5 shrink-0"}):Gde(n)?i.jsx("div",{className:"mr-2 flex size-5 shrink-0 items-center justify-center",children:i.jsx(me,{icon:Gv,size:"sm",className:"text-foreground"})}):m&&!l?i.jsx("div",{className:"relative mr-2 size-5 shrink-0 overflow-hidden rounded-sm",children:i.jsx("img",{src:m,alt:t??"suggestion",className:"object-cover",sizes:"24px",onError:()=>c(!0)})}):i.jsx(me,{icon:l&&n?kf:p??h,size:"sm",className:"mt-two mr-2 w-5 shrink-0"})});Jde.displayName="LeftIcon";const efe=A.memo(({onClick:e,url:t,category:n})=>n==="shortcuts"?null:zde(t)?i.jsx("div",{className:"flex h-full items-center",children:i.jsx(me,{icon:_r,size:"sm",className:"text-quiet"})}):i.jsx("button",{className:"appearance-none",onPointerDown:r=>{r.stopPropagation(),r.preventDefault(),e(r)},type:"button",children:i.jsx(me,{icon:t?y4e:no,size:"sm",className:"-mb-xs"})}));efe.displayName="RightIcon";const tfe=A.memo(()=>{const{$t:e}=Q();return i.jsxs("div",{className:"flex w-full min-w-0 flex-row items-center whitespace-pre p-[8px] leading-tight",children:[i.jsx(L,{className:"-mr-three px-three shrink-0",color:"super",inline:!0,variant:"small",children:i.jsx(me,{size:"xs",icon:ro})}),i.jsx(L,{variant:"tinyMono",color:"super",className:"ml-2",children:e({defaultMessage:"Comet Assistant",id:"ML678gEBQ1"})})]})});tfe.displayName="CometAssistantRow";const zh=A.memo(({isOpen:e,suggestedQueries:t,focusedIndex:n,setFocusedIndex:r,handlePasteQuery:s,handleSubmit:a,dropdownClassName:o,dropdownType:l="query",components:c,value:u,children:d,popoverClassName:m,categoryTitleClassName:p,userInputQuery:h,portalTarget:g,placement:y="bottom",allowNonSequentialMatch:v=!1,isCometHome:x,scrollableShards:b=[],floatingStrategy:_,shouldEnableStacking:w=!1})=>{const{trackEvent:C}=Me(),{RightIconComponent:S=efe,LeftIconComponent:E=Jde,QueryContentComponent:M}=c??{},k=f.useMemo(()=>t.map(({query:Y,query_uuid:W,image:H,imageDark:Z,url:re,title:q,description:J="",identifier:te="",category:se,subscribed:de=!1,metadata:fe,submission_query:ve,icon:ue,is_comet_assistant:ie,shouldShowTitle:be,actionHandler:Se,isPersonalized:Ce},ke,Re)=>{if(l==="select")return{input:Y,completion:"",query_uuid:W,title:q,image:H,imageDark:Z,url:re,description:J,identifier:te,category:se,subscribed:de,submission_query:ve,icon_name:ue,is_comet_assistant:ie,shouldShowTitle:be,actionHandler:Se,isPersonalized:Ce};const je=h?n===-1?u:h:u;return je.length>0&&Y.startsWith(je)?{input:je,completion:Y.slice(je.length),query_uuid:W,title:q,image:H,imageDark:Z,url:re,category:se,metadata:fe,...(se==="ticker"||se==="news")&&{description:J},submission_query:ve,icon_name:ue,is_comet_assistant:ie,shouldShowTitle:be,actionHandler:Se,isPersonalized:Ce}:v&&!J&&je.length>0&&je.length<=Y.length&&Re[ke]&&Zde(je,Re[ke],!0)[0]?{input:"",completion:Y,inputs_and_completions:dZe(je,Y),query_uuid:W,title:q,image:H,url:re,category:se,metadata:fe,...(se==="ticker"||se==="news")&&{description:J},submission_query:ve,icon_name:ue,is_comet_assistant:ie,shouldShowTitle:be,actionHandler:Se,isPersonalized:Ce}:{input:Y,completion:"",query_uuid:W,title:q,image:H,imageDark:Z,url:re,category:se,metadata:fe,...(se==="ticker"||se==="news")&&{description:J},submission_query:ve,icon_name:ue,is_comet_assistant:ie,shouldShowTitle:be,actionHandler:Se,isPersonalized:Ce}}),[t,u,l,h,n,v]),T=f.useMemo(()=>JXe(k),[k]),j=f.useMemo(()=>eZe(T),[T]),R=f.useMemo(()=>j.some(Y=>T[Y]?.some(W=>W.is_comet_assistant)),[j,T]),O=f.useCallback((Y,W)=>{if(W){window.open(W,"_blank");return}C("auto suggestion filled",{}),s(Y)},[s,C]),P=U("!block w-full",y==="bottom"?"mt-[-5px]":"mb-[-5px]",m),N=y==="bottom"?"rounded-b-2xl":"rounded-t-2xl",I=f.useRef(null),[D,F]=f.useState(null),B=!e||t.length===0;WYe({ref:I,onResize:Y=>{F(Y?.height??null)}});const V=f.useMemo(()=>({portalTarget:g??void 0,removeScroll:!0,shards:b}),[g,b]),$=f.useMemo(()=>i.jsx("div",{className:U(y==="bottom"?"!border-t-subtlest shadow-super/10 rounded-b-2xl shadow-md dark:shadow-lg dark:shadow-black/10":"!border-b-subtler rounded-t-2xl","border-subtle border","bg-raised p-3",o),children:i.jsx(xe.div,{animate:{height:B?0:D??"auto"},initial:{height:0},transition:{height:{type:"spring",bounce:.1,duration:.05}},style:{overflow:"hidden"},children:i.jsxs("div",{ref:I,className:"flex flex-col items-stretch",children:[x&&R?i.jsx(tfe,{}):null,j.map((Y,W)=>{const H=T[Y],Z=e8[Y]||{order:999,showHeader:!1};let re=0;for(let q=0;q<W;q++){const J=j[q]??"";re+=T[J]?.length||0}return H?.length?i.jsx(Qde,{category:Y,suggestions:H||[],categoryConfig:Z,value:u,focusedIndex:n,setFocusedIndex:r,handleSubmit:a,indexOffset:re,LeftIconComponent:E,RightIconComponent:S,QueryContentComponent:M,onFillButtonClick:O,titleClassName:p},Y):null})]})})}),[E,M,S,p,D,o,n,T,a,R,x,O,y,B,r,j,u]),G=f.useMemo(()=>_?{strategy:_}:void 0,[_]),X=f.useMemo(()=>w?{className:"flex z-[1]"}:void 0,[w]);return i.jsx(lo,{isOpen:e,matchTargetWidth:!0,disableAnimation:!0,placement:y,childrenClassName:"grow block",contentClassName:P,borderRadius:N,avoidCollisions:!1,disableShadow:!0,overlayProps:V,content:$,floatingElementProps:X,...G&&{customFloatingUIOptions:G},children:d})});zh.displayName="SuggestDropdown";const Rp="homepage-widgets",EO="homepage/weather",pZe="homepage-widgets/dismiss",hZe=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),gZe=(e,t,n)=>{let r="existing";return t<3?r="new":t<10&&(r="activated"),`/rest/homepage-widgets/public?isComet=${e}&lifecycle=${r}&lang=${n}`},yZe=async({headers:e,urlPath:t="/rest/homepage-widgets",params:n,reason:r})=>{if(n){const s=t.split("?"),a=new URLSearchParams(s[1]??"");new URLSearchParams(n).forEach((l,c)=>{a.set(c,l)}),t=s[0]+"?"+a.toString()}try{const s=await sr({urlPath:t,method:"GET",timeoutMs:Pe({productionMs:2e3,clientSideMs:2e3,devMs:4e3}),numRetries:1,headers:{"content-type":"application/json",...e},reason:r}),a=await s.json();if(!s.ok)throw new Error("Homepage widget fetch failed");return a.widgets}catch(s){return ee.error("Failed to get homepage widgets",s),[]}},vZe=async({widgetUuid:e,reason:t})=>{try{return(await ne.POST("/rest/homepage-widgets/dismiss/{widget_uuid}",t,{params:{path:{widget_uuid:e}},numRetries:1})).data}catch(n){return ee.error("Failed to dismiss homepage widget",n),null}},xZe=({widget:e,reason:t})=>{const n=mt();return bt({mutationKey:[pZe],mutationFn:()=>vZe({widgetUuid:e.uuid??"",reason:t}),onMutate:async()=>{e.size==="ROW"&&n.setQueryData([Rp],r=>r.filter(s=>s.uuid!==e.uuid))}})},nfe=async({location:e,locale:t,reason:n})=>{const r={...e?hZe(e):{},"accept-language":t},s=await ne.GET("/rest/homepage-widgets/weather",n,{headers:r});if(!s.response.ok||!s.data)throw new Error("Failed to get weather");return s.data.data[0]},bZe=he(async()=>{const{WatchlistSelections:e}=await ae(async()=>{const{WatchlistSelections:t}=await import("./WatchlistSelections-oarSW3wz.js");return{WatchlistSelections:t}},__vite__mapDeps([2,3,1,4,5,6]));return{default:e}},{loading:()=>i.jsx(rfe,{})}),_Ze=5,wZe=e=>{const{isSelected:t}=e;return i.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:i.jsx(Te,{icon:t?Rr:rr,size:"small",pill:!0})})},CZe=({onClear:e})=>i.jsx(Te,{icon:Lt,size:"tiny",pill:!0,onClick:e}),SZe=({isOpen:e,onClose:t,watchlistType:n,origin:r})=>{const{isMobileStyle:s,isMobileUserAgent:a}=ye(),o="watchlist-modal",{$t:l}=Q(),c=mt(),{trackEvent:u}=Me(),{openToast:d}=xn(),m=f.useRef(null),[p,h]=f.useState(""),[g,y]=f.useState(le),[v,x]=f.useState(-1),[b,_]=f.useState(!1),[w,C]=f.useState(!1),[S,E]=f.useState();f.useEffect(()=>{u("watchlist modal viewed",{origin:r,watchlistType:n})},[r,n,u]);const k=(te=>te==="sports"||te==="finance"||te==="f1")(S?.category)?S.category:n.toLowerCase(),T=f.useCallback(()=>{b&&c.invalidateQueries({queryKey:[Rp]}),t()},[b,c,t]),{data:j,isLoading:R}=SO({watchlistType:n,reason:o}),{mutate:O}=$de({watchlistType:n,queryClient:c,reason:o}),{mutate:P}=Hde({watchlistType:n,queryClient:c,reason:o}),{mutate:N}=XXe({watchlistType:n,queryClient:c,reason:"watchlist-reorder"}),I=n==="FINANCE",D=[{text:l({defaultMessage:"Done",id:"JXdbo8Vnlw"}),variant:"inverted",onClick:T}],F=f.useCallback(async(te,se)=>{const fe=Sa().erp,ue=(await c.fetchQuery({queryKey:["watchlist",n,te,se?.category],queryFn:()=>Wde({query:te,watchlistType:n,limit:_Ze,category:se?.category,cometRenderPlace:fe,reason:o}),staleTime:0})).map(ie=>({query:ie.title,title:ie.title,image:ie.image_url??void 0,imageDark:ie.image_url_dark??void 0,description:ie.description,identifier:ie.identifier,category:ie.category??void 0,subscribed:ie.subscribed}));y(ue)},[c,n]),B=ta(F,100,{leading:!0,trailing:!0}),V=f.useCallback((te,se)=>{B(te,se)},[B]),$=()=>{C(!0),V(p,S)},G=()=>{C(!1)},X=f.useCallback(te=>{const se=te;h(se),V(se,S)},[V,S]),Y=()=>{h(""),y([])},W=(te,se)=>{Z(te),h(""),y([]),C(!1)},H=U("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-offsetPlus p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&g.length>0}),Z=f.useCallback(te=>{if(_(!0),y(le),h(""),(j?.length??0)>=yq){d(l({defaultMessage:"Watchlist full (max {maxItems} items).",id:"mdbFzAw6E5"},{maxItems:yq}),"error",2);return}te.subscribed||O(te)},[O,j?.length,d,l]),re=f.useCallback((te,se)=>{P({identifier:te,category:se}),_(!0)},[P]),q=f.useCallback((...te)=>{N(...te),_(!0)},[N]),J=f.useMemo(()=>({image:te,imageDark:se,alt:de})=>i.jsx(Vde,{image:te,imageDark:se,alt:de,watchlistType:n,className:"mr-sm bg-subtler !size-8 overflow-hidden rounded",imageClassName:"inset-xs"}),[n]);return i.jsx(Xt,{isOpen:e,onClose:T,title:l(Jy[k].title),titleTextVariant:"baseSemi",subtitle:l(Jy[k].settingsDescription),subtitleClassname:"text-sm",actionList:D,variant:s?"bottom-sheet":"medium",renderCloseButton:!1,delayClose:!1,noPadding:!0,children:i.jsxs("div",{className:"pt-md flex h-[50vh] min-h-0 shrink-0 flex-col",children:[i.jsx("div",{className:"px-md flex flex-row items-center justify-between",children:i.jsx(ZXe,{watchlistType:n,selectedCategory:S,setSelectedCategory:E})}),i.jsxs("div",{className:"h-full",children:[i.jsx("div",{className:"px-md",children:i.jsx(zh,{isOpen:w&&g.length>0,suggestedQueries:g,focusedIndex:v,setFocusedIndex:x,handlePasteQuery:Rn,handleSubmit:W,value:p,components:{RightIconComponent:wZe,LeftIconComponent:J},dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:i.jsx(ra,{onFocus:$,onBlur:G,className:H,pill:!1,ref:m,isMobileUserAgent:a,placeholder:l(Jy[k].searchPlaceholder),value:p,onChange:X,ClearIcon:CZe,...p.length>0?{onClear:Y}:{}})})}),R?i.jsx(rfe,{}):i.jsx(bZe,{subscriptions:j??le,onRemove:re,onUpdateOrder:q,watchlistType:n,selectedCategory:S,isReorderingEnabled:I,isMobile:s})]})]})})},rfe=()=>i.jsx(wn,{children:i.jsx("div",{style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},className:"flex flex-col items-center",children:Array.from({length:4}).map((e,t)=>i.jsx(EZe,{},t))})}),EZe=()=>i.jsx(z,{className:"gap-sm mt-2 flex w-full flex-col px-6 py-2",children:i.jsx(z,{variant:"offsetPlus",className:"h-10 w-full rounded-md"})});async function DFt({headers:e,reason:t}){const n=await ne.GET("/rest/shopping/user-orders",t,{timeoutMs:Pe({productionMs:5e3}),headers:e});if(n.error)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch shopping orders",cause:n.error});return n.data?.orders??le}const FFt=async({shipping_address:e,amount:t,reason:n})=>{const{data:r,error:s}=await ne.POST("/rest/shopping/calculate-tax-and-shipping",n,{body:{shipping_address:e,amount:t},timeoutMs:Pe(),numRetries:1});if(s)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to calculate tax and shipping",cause:s});return r},MZe=async({reason:e})=>{const{data:t,error:n}=await ne.GET("/rest/shopping/retrieve-customer-shopping-info",e,{timeoutMs:Pe({productionMs:5e3})});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get customer shopping info",cause:n});return t};async function UFt({body:e,reason:t}){const n="createShoppingOrder";try{const r=await ne.POST("/rest/shopping/create-shopping-order",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:1e4,numRetries:0});if(r.error)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to create shopping order",cause:r.error});return r.data}catch(r){throw ee.log(`Error in ${n}:`,r),r}}const BFt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/create-shopping-payment-intent",t,{body:e,timeoutMs:6e3,numRetries:0});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to create shopping payment intent",cause:r});if(n.status!=="success")throw new Ee("API_CLIENTS_ERROR",{message:"Failed to create payment intent",cause:n});return n},VFt=async({orderId:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/update-shopping-order",t,{body:{order_id:e,order_status:"cancelled"},timeoutMs:2e4});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to cancel shopping order",cause:r});return n},WFt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/create-firmly-cart",t,{body:e,timeoutMs:Pe({clientSideMs:5e3})});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to create firmly cart",cause:r});return n},$Ft=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/set-firmly-shipping-info",t,{body:e,timeoutMs:Pe({clientSideMs:7e3})});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to set firmly shipping info",cause:r});return n},kZe=async({reason:e})=>{const{data:t,error:n}=await ne.GET("/rest/shopping/create-firmly-session",e,{timeoutMs:Pe()});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to create firmly session",cause:n});return t},HFt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/stripe/update-customer-shipping-address",t,{body:e,timeoutMs:Pe()});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to update customer shipping address",cause:r});return n},zFt=async({optionKey:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/fetch-product-details",t,{body:{option_key:e},timeoutMs:4e3});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch product details",cause:r});return n},GFt=async({query:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/autosuggest/shopping/list-autosuggest",t,{timeoutMs:Kt.MEDIUM,params:{query:{query:e}}});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get shopping suggestions",cause:n});return r.results??le}catch(n){return ee.error("Failed to get shopping suggestions",n),[]}},qFt=async({page:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/shopping/landing-page/tile-data",t,{timeoutMs:Kt.MEDIUM,params:e!==void 0?{query:{page:e}}:void 0});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get shopping tile data",cause:r});return n.shopping_tile_data.length===0&&ee.error("Empty shopping tile data"),n.shopping_tile_data},KFt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/search-shopping-for-entry",t,{body:{query:e.query,read_write_token:e.read_write_token,entry_uuid:e.entry_uuid},timeoutMs:Kt.HIGH});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to search for additional products",cause:r});return!n||n.status==="failure"?[]:[...n.shopping_widgets]},TZe=async({reason:e})=>{const{error:t,data:n}=await ne.GET("/rest/shopping/try-on-photo/get",e,{timeoutMs:Pe()});return t?{status:"error",try_on_photo_url:null}:n},NZe=({reason:e})=>{const{data:t,isLoading:n,refetch:r}=$e({queryKey:Jw(),queryFn:()=>TZe({reason:e})});return f.useMemo(()=>({userTryOnPhotoUrl:t?.try_on_photo_url??null,isUserTryOnPhotoLoading:n,refetchUserTryOnPhoto:r}),[t,n,r])},_E=A.memo(({message:e,subtitle:t,...n})=>i.jsx(Xt,{title:e,subtitle:t,closeButtonClassname:"right-sm top-md flex self-start justify-end grow",...n}));_E.displayName="ConfirmationModal";const AZe=({isOpen:e,onClose:t,config:n})=>{const{$t:r}=Q(),s=mt(),[a,o]=f.useState(!1),{userTryOnPhotoUrl:l,isUserTryOnPhotoLoading:c}=NZe({reason:"avatar_management"}),{deleteAvatar:u}=gde({reason:"avatar_management"}),d=async()=>{await u(),s.setQueryData(Jw(),{try_on_photo_url:null}),o(!1),t()},m=()=>{t(),n?.onRetry&&n.onRetry()},p=()=>{t()},h=n?.source==="toast";return i.jsxs(i.Fragment,{children:[i.jsx(Xt,{isOpen:e,onClose:t,title:r({defaultMessage:"Your avatar photo",id:"fXPKMrv34o"}),centerTitle:!0,modalClassname:"max-w-lg mx-auto",children:i.jsxs("div",{className:"flex flex-col items-center gap-6 p-6",children:[c?i.jsx(as,{}):l?i.jsx(z,{className:"gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border",children:l&&i.jsx(is,{src:l,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})}):i.jsx(L,{variant:"smallMono",children:r({defaultMessage:"No avatar uploaded",id:"RDTTX4AfZg"})}),i.jsx("div",{className:"flex gap-3",children:h?i.jsxs(i.Fragment,{children:[i.jsx(ge,{variant:"border",onClick:m,text:r({defaultMessage:"Retry",id:"62nsdyMyIO"})}),i.jsx(ge,{variant:"primary",onClick:p,text:r({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"})})]}):l&&i.jsx(ge,{variant:"common",onClick:()=>o(!0),text:r({defaultMessage:"Delete",id:"K3r6DQW7h+"})})})]})}),i.jsx(_E,{isOpen:a,onClose:()=>o(!1),message:r({defaultMessage:"Are you sure you want to delete?",id:"y7o4RnAvXG"}),subtitle:r({defaultMessage:"Once deleted, your avatar cannot be recovered.",id:"CtPvgMBMh3"}),children:i.jsxs("div",{className:"-mb-lg flex justify-center gap-3 p-6",children:[i.jsx(ge,{variant:"common",onClick:()=>o(!1),text:r({defaultMessage:"No",id:"oUWADlOjJt"})}),i.jsx(ge,{variant:"primary",onClick:d,text:r({defaultMessage:"Yes",id:"a5msuh5ORp"})})]})})]})},jZe=()=>{const e=Dt();return f.useMemo(()=>{const n=e?.get("pt")||KBe();if(n)try{const r=atob(n);return JSON.parse(r).title}catch{return}},[e])},RZe="https://api.whatsapp.com/send/?phone=18334363285&text&type=phone_number&app_absent=0",N1=({origin:e})=>{const{trackEvent:t}=Me();return f.useCallback(()=>{FC(),t("whatsapp button clicked",{origin:e}),window.open(RZe,"_blank")},[t,e])},IZe="https://perplexity.sng.link/A6awk/ppas?_smtype=3&pvid=",YFt="https://perplexity.sng.link/A6awk/rcv6y?_smtype=3&pvid=",Nf=(e,t=IZe)=>{const n=m1(),[r,s]=f.useState(t),{sendAppDownloadClickedEventSingular:a}=sO(),o=Nt(),l=f.useMemo(()=>{const u=new URLSearchParams;return u.set("origin",e),n&&u.set("pvid",n),o&&u.set("pathname",o),u.toString()},[n,e,o]);f.useEffect(()=>{(async()=>{const{singularSdk:d}=await ae(async()=>{const{singularSdk:h}=await import("./singular-sdk-CHVvA4e9.js").then(g=>g.s);return{singularSdk:h}},[]);for(;!d._isInitialized;)await new Promise(h=>setTimeout(h,100));let m=null;o&&(m=`perplexity-app://${o.startsWith("/")?o.slice(1):o}`);const p=d.buildWebToAppLink(`${t}${n}&_ios_dl=${m}&_android_dl=${m}`,m,l,m);s(p)})()},[n,o,l,t]);const c=f.useCallback(()=>{FC(),a(e),window.location.href=r},[r,e,a]);return f.useMemo(()=>({downloadAppLink:r,handleAppDownloadClicked:c}),[r,c])},PZe=["sso"],wE=A.memo(()=>i.jsxs("div",{className:"flex flex-row items-center",children:[i.jsx(Na,{variant:"mark",color:"foreground",size:"small"}),i.jsx("div",{className:"ml-2",children:i.jsx(Na,{variant:"text",color:"foreground",size:"small"})})]}));wE.displayName="PerplexityLogo";const OZe=A.memo(({headerTextLineOne:e="Get answers, not links.",headerTextLineTwo:t="Search smarter today.",modalOrigin:n=Ie.MARKETING_LANDING_PAGE})=>{const{isMobileStyle:r}=ye(),[s,a]=f.useState("");return f.useEffect(()=>{typeof window<"u"&&a(lE(window.location.origin,Sl,n))},[n]),i.jsxs("div",{className:"px-lg py-xl flex min-h-screen flex-col items-center justify-between overflow-y-auto",children:[i.jsx(wE,{}),i.jsxs("div",{className:"py-2xl flex flex-col items-center justify-center",children:[e&&i.jsx(L,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:e}),t&&i.jsx(L,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:t}),i.jsx(L,{variant:"base",color:"light",className:"mt-4 max-w-[400px] text-center",children:i.jsx(pe,{defaultMessage:"Join millions who have switched to Perplexity, the modern search engine.",id:"n7AYVi1U68"})}),i.jsx(tv,{autoFocus:!0,redirectUrl:s,showInternal:!0,className:"mt-xl w-full",disallowedMethods:PZe})]}),i.jsxs(L,{variant:"small",color:"light",children:[" ",new Date().getFullYear()," Perplexity AI"]})]})});OZe.displayName="MainContent";const LZe=async({stringProperties:e,headers:t,reason:n})=>{if(!t["accept-language"])return ee.warn("No accept-language header provided for translation request"),e;const r=await ne.POST("/rest/translation/translate",n,{body:{texts:e},headers:{...t}});return r.response.ok?r.data?.translated_texts??[]:(ee.error(`Failed to fetch translations for ${e.join(", ")}}`),[])},DZe=e=>e==null||e==="";async function sfe({originalContent:e,keysToTranslate:t,reason:n}){const r=nu();if(r===pu)return e;const s=t.map(o=>e[o]);if(s.some(DZe))return e;const a=await LZe({stringProperties:s,headers:{"accept-language":r},reason:n});if(a.length===s.length){const o={...e};return t.forEach((l,c)=>{o[l]=a[c]}),o}return e}const afe=({extraCss:e="",variant:t="subtler"})=>i.jsx(z,{variant:t,className:U("shimmer aspect-square w-[144px] rounded-lg",e)}),MO=f.memo(({className:e,innerClassName:t,gridClassName:n,children:r,fadeOut:s,dotClassName:a,highlightClassName:o,animate:l=!0,gridSize:c=22,count:u=20,style:d})=>{const[m,{width:p,height:h}]=ml(),[g,y]=f.useState([]),[v,x]=f.useState(0),[b,_]=f.useState(0),w=f.useRef(null),C=f.useRef(new Set),S=f.useCallback(()=>{const M=Math.floor(Math.random()*v)+1,k=Math.floor(Math.random()*b)+1,T=`${M}-${k}`;if(C.current.has(T))return;const j={col:M,row:k,id:T,duration:Math.floor(Math.random()*1001)+1e3,isSuper:Math.floor(Math.random()*5)%5===0};y(R=>{const O=[j,...R];if(O.length>u){const P=O.pop();P&&C.current.delete(P.id)}return C.current.add(T),O})},[v,b,u]);f.useEffect(()=>{if(l)return w.current=setInterval(S,100),()=>{w.current&&clearInterval(w.current)}},[S,l]),f.useEffect(()=>{x(Math.floor(p/c)),_(Math.floor(h/c))},[p,h,c]);const E=s?{maskImage:"radial-gradient(black, transparent)"}:void 0;return i.jsxs("div",{className:U("bg-base dotGridContainer pointer-events-none relative isolate",e),ref:m,style:d,children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:E,children:[i.jsx("div",{className:U("dotHighlightGrid bg-inverse/20 absolute inset-0",o),children:g.map(M=>i.jsx(ofe,{item:M,className:a},M.id))}),i.jsx("div",{className:U("dotGrid absolute inset-0",n)})]}),i.jsx("div",{className:U("relative",t),children:r})]})});MO.displayName="DotGrid";const ofe=f.memo(({item:e,className:t})=>i.jsx("div",{className:U("gridDot text-foreground",t,{highlight:e.isSuper}),style:{gridColumn:e.col,gridRow:e.row,animationDuration:`${e.duration}ms`}}));ofe.displayName="GridDot";const CE=(e,t)=>{const n=t?.detail,r=n&&typeof n=="object"&&"error_code"in n&&n.error_code||e;return new Ee("API_CLIENTS_ERROR",{message:r,cause:t,details:{errorDetail:n}})},ife=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/user/promotions",e,{timeoutMs:Pe({productionMs:2e3})});if(t)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch user promotions",cause:t});return n}catch{return{campaign:null,offer:null,institution:null}}},kO=async({locale:e,headers:t,reason:n})=>{let r="";e&&(r=`?locale=${e}`);try{const a=await(await sr({urlPath:`/rest/billing/get-customer-portal${r}`,method:"GET",headers:t,timeoutMs:3e3,reason:n})).json();return a.status!=="success"||a.url===null||a.url===""?null:a.url}catch{return null}};async function lfe({currency:e,reason:t,subscriptionTier:n}){const{error:r,data:s}=await ne.GET("/rest/stripe/prices",t,{timeoutMs:Kt.NONE,params:{query:{currency:e,subscription_tier:n}}});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch prices",cause:r});return s}const n8=({currency:e,reason:t,subscriptionTier:n})=>$e({queryKey:["prices",e,n],queryFn:()=>lfe({currency:e,reason:t,subscriptionTier:n}),gcTime:5*60*1e3,staleTime:2*60*1e3}),cfe=async({request:e,reason:t})=>{const n=yS(),r=m1(),s={"content-type":"application/json",...n?{"Screen-Dimensions":n}:{}};try{const o=await(await sr({urlPath:"/rest/stripe/checkout-session",method:"POST",body:JSON.stringify({referral_code:e.referralCode,discount_code:e.discountCode,origin:e.origin,tier:e.tier,locale:e.locale,visitor_id:r,embedded:e.embedded,subscription_tier:e.subscriptionTier,success_redirect_url:e.success_redirect_url}),timeoutMs:5e3,headers:s,reason:t})).json();return{subscriptionStatus:o.subscription_status,status:o.status,url:o.url,clientSecret:o.client_secret,errorCode:o.error_code,subscriptionTier:o.subscription_tier}}catch{return}},FZe=async({request:e,headers:t,reason:n})=>{try{return{clientSecret:(await(await sr({urlPath:"/rest/stripe/create-setup-intent",method:"POST",body:JSON.stringify({is_updating:e.isUpdating}),timeoutMs:Pe({productionMs:2500}),headers:{...t,"content-type":"application/json"},reason:n})).json()).client_secret}}catch{return}},UZe=async({request:e,headers:t,reason:n})=>{if(e.orgId)try{return{clientSecret:(await(await sr({urlPath:`/rest/pplx-api/v2/groups/${e.orgId}/setup-intent`,method:"POST",timeoutMs:Pe({productionMs:2500}),headers:{...t,"content-type":"application/json"},reason:n})).json()).client_secret}}catch{return}},BZe=async({headers:e,reason:t})=>{try{const r=await(await sr({urlPath:"/rest/stripe/create-setup-intent-and-customer-session",method:"POST",timeoutMs:Pe({productionMs:3e3}),headers:{...e,"content-type":"application/json"},reason:t})).json();return{customerId:r.customer_id,clientSecret:r.client_secret,customerSessionClientSecret:r.customer_session_client_secret}}catch{return}};var r8;(function(e){e.WINDOWSAPP="windowsapp",e.MACAPP="macapp",e.COMET="comet"})(r8||(r8={}));const VZe=async({reason:e})=>{const t="createBillingCustomer";try{return await(await sr({urlPath:"/rest/pplx-api/create-billing-customer",method:"POST",timeoutMs:9e3,headers:{"content-type":"application/json"},reason:e})).json()}catch(n){throw ee.log(`Error in ${t}:`,n),n}},WZe=async({credits:e,apiOrgId:t,reason:n})=>{const{error:r,data:s}=await ne.POST("/rest/pplx-api/v2/groups/{api_org_id}/topup",n,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{credits:e}});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to topup customer balance",cause:r});return s},$Ze=async({amount:e,apiOrgId:t,threshold:n=2,enabled:r=!0,reason:s})=>{const{error:a,data:o}=await ne.POST("/rest/pplx-api/v2/groups/{api_org_id}/auto-topup",s,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{amount:e,threshold:n,enabled:r}});if(a)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to auto topup customer balance",cause:a});return o};async function ufe({locale:e,reason:t}){try{const{error:n,data:r}=await ne.GET("/rest/billing/get-milestone-progress",t,{timeoutMs:Kt.NONE,params:{header:{"accept-language":e}}});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch milestones",cause:n});return r}catch{return null}}const dfe=async({displayName:e,address:t,description:n,contactInfo:r,reason:s})=>{try{const{error:a,data:o}=await ne.POST("/rest/pplx-api/v2/groups",s,{timeoutMs:9e3,headers:{"content-type":"application/json"},body:{display_name:e,address:t,description:n,contact_info:r}});if(a)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to create API group",cause:a});return o.org}catch(a){return ee.log(a),null}},ffe=async({reason:e})=>{const t="getAPIGroupsV2";try{return(await(await sr({urlPath:"/rest/pplx-api/v2/groups",method:"GET",headers:{"content-type":"application/json"},timeoutMs:1e4,numRetries:1,reason:e})).json())?.orgs??[]}catch(n){return ee.log(`Error in ${t}:`,n),[]}},mfe=async({orgId:e,reason:t})=>{if(!e)return{};try{const{error:n,data:r}=await ne.GET("/rest/pplx-api/v2/groups/{api_org_id}",t,{timeoutMs:1e4,headers:{"content-type":"application/json"},params:{path:{api_org_id:e}}});if(n)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch API group customer info",cause:n});return{apiOrganization:r.apiOrganization,customerInfo:r.customerInfo,hasDefaultPaymentMethod:r.hasDefaultPaymentMethod,taxInfo:r.taxInfo}}catch(n){return ee.log(n),{}}},HZe=async({orgId:e,reason:t})=>{const n="getAPIGroupAPIKeys";if(!e)return{};try{return{apiKeys:(await(await sr({urlPath:`/rest/pplx-api/v2/groups/${e}/api-keys`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:1e4,numRetries:1,reason:t})).json())?.apiKeys}}catch(r){return ee.log(`Error in ${n}:`,r),{}}},pfe=async({reason:e})=>{try{const t=await sr({urlPath:"/rest/billing/create-government-subscription",method:"POST",timeoutMs:6e3,headers:{"content-type":"application/json"},reason:e}),n=await t.json();return t.ok?{status:n.status,error_code:n.error_code,message:n.message}:void 0}catch{return}},zZe=async({headers:e,reason:t})=>{const{error:n,data:r}=await ne.GET("/rest/stripe/upgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:Kt.HIGH});if(n)throw CE("Failed to fetch upgrade subscription preview",n);return r},GZe=async({headers:e,reason:t})=>{const{error:n,data:r}=await ne.GET("/rest/stripe/downgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:Kt.HIGH});if(n)throw CE("Failed to fetch downgrade subscription preview",n);return r},hfe=({reason:e,enabled:t})=>$e({queryKey:gVe(),queryFn:()=>zZe({reason:e}),gcTime:0,staleTime:0,enabled:t}),gfe=({reason:e})=>$e({queryKey:["downgrade-subscription-preview"],queryFn:()=>GZe({reason:e}),gcTime:0,staleTime:0}),qZe=async({headers:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/stripe/upgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:Kt.HIGH});if(n)throw CE("Failed to upgrade subscription",n);return r},yfe=({reason:e},t)=>{const n="useUpgradeSubscription";return bt({retry:!1,mutationFn:()=>qZe({reason:e}),onError:r=>{ee.error(`Error in ${n}:`,r)},...t})},KZe=async({headers:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/stripe/downgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:Kt.HIGH});if(n)throw CE("Failed to downgrade subscription",n);return r},vfe=({reason:e},t)=>{const n="useDowngradeSubscription";return bt({mutationFn:()=>KZe({reason:e}),onError:r=>{ee.error(`Error in ${n}:`,r)},...t})},YZe=async({reason:e})=>{const{error:t,data:n}=await ne.GET("/rest/stripe/subscription-changes",e,{headers:{"content-type":"application/json"},timeoutMs:Kt.HIGH});if(t)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch subscription changes",cause:t});return n},QZe=({reason:e,enabled:t})=>$e({queryKey:["subscription-changes"],queryFn:()=>YZe({reason:e}),gcTime:0,staleTime:0,enabled:t}),XZe=async()=>{const e=await ne.GET("/rest/billing/braintree/subscription-details","braintree-modal-fetch-details",{timeoutMs:5e3});if(e.error)throw e.error;return e.data},ZZe=async({payment_method_type:e})=>{const t=await ne.POST("/rest/billing/braintree/cancel-subscription","braintree-modal-cancel",{timeoutMs:5e3,body:{payment_method_type:e}});if(t.error)throw t.error;return t.data},JZe=async({payment_method_type:e})=>{const t=await ne.POST("/rest/billing/braintree/renew-subscription","braintree-modal-renew",{timeoutMs:3e3,body:{payment_method_type:e}});if(t.error)throw t.error;return t.data},bq=Object.freeze(Object.defineProperty({__proto__:null,get PlatformType(){return r8},autoTopupCustomerBalance:$Ze,cancelBraintreeSubscription:ZZe,createApiGroupV2:dfe,createBillingCustomer:VZe,createCheckoutSession:cfe,createGovernmentSubscription:pfe,createSetupIntent:FZe,createSetupIntentAndCustomerSession:BZe,createSetupIntentV2:UZe,fetchBraintreeSubscriptionDetails:XZe,getAPIGroupAPIKeys:HZe,getAPIGroupCustomerInfo:mfe,getAPIGroupsV2:ffe,getCustomerPortal:kO,getMilestoneProgress:ufe,getPrices:lfe,getUserPromotions:ife,renewBraintreeSubscription:JZe,topupCustomerBalance:WZe,useDowngradeSubscription:vfe,useGetDowngradeSubscriptionPreview:gfe,useGetPrices:n8,useGetSubscriptionChanges:QZe,useGetUpgradeSubscriptionPreview:hfe,useUpgradeSubscription:yfe},Symbol.toStringTag,{value:"Module"}));function eJe(){Gh(void 0)}function Ip(e={}){const t=new URL(window.location.href);for(const[n,r]of Object.entries(e))typeof r>"u"?t.searchParams.delete(n):t.searchParams.set(n,r);Gh(Object.fromEntries(t.searchParams))}function Gh(e){const t=new URL(window.location.href),r=(e?new URLSearchParams(e):new URLSearchParams).toString();r!==t.searchParams.toString()&&window.history.replaceState({},"",`?${r}`)}function xfe(){return uE("pplx.partner_banner",null,{initializeWithValue:!1})}function bfe(){return uE("pplx.partner_discount_code",null,{initializeWithValue:!1})}he(()=>ae(()=>import("./AppDownloadQR-CDgEYZtw.js"),__vite__mapDeps([7,3,1])),{loading:()=>i.jsx(afe,{})});const tJe=({displayAs:e,className:t,allowBgImage:n=!0})=>{const r=["/static/images/app-icons/nasa.png","/static/images/app-icons/jungle.png","/static/images/app-icons/flower.png","/static/images/app-icons/sf.png","/static/images/app-icons/books.png","/static/images/app-icons/cat.png"],s=f.useMemo(()=>r[Math.floor(Math.random()*r.length)],[]);return i.jsxs("div",{className:U("bg-dark relative inline-flex aspect-square size-20 items-center justify-center overflow-hidden shadow-lg",{"p-md rounded-[20px]":e==="ios","p-md rounded-full":e==="android"},t),children:[n&&i.jsx("img",{className:U("absolute inset-0 opacity-50 duration-150"),src:s,suppressHydrationWarning:!0,alt:""}),i.jsx("div",{className:"relative flex items-center justify-center",children:i.jsx(Na,{variant:"mark",size:"md",color:"white"})}),i.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/20 dark:border-white/10"})]})},_fe=()=>{const{device:{isAndroid:e}}=Et();return i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>i.jsx(me,{icon:tu,size:16,className:"text-super"},`rating-star-full-${n}`))}),i.jsx("div",{children:i.jsx(L,{variant:"tiny",color:"light",className:"mt-2xs flex items-end text-center",children:i.jsx(pe,{defaultMessage:"{amount} Ratings",id:"8lpjhgQpdU",values:{amount:e?"960K":"252K"}})})})]})},wfe=A.memo(({campaignData:e,dismiss:t,translated:n})=>{const r="reviews",{device:{isIOS:s}}=Et(),[a,o]=f.useState(!!n),[l,c]=f.useState(e),{trackEvent:u}=Me();f.useEffect(()=>{if(n)return;(async()=>{const v=await sfe({originalContent:e,keysToTranslate:["title_1","subtext_1","button_text"],reason:r});c(v),o(!0)})()},[e,n]),f.useEffect(()=>{u("mweb splash page viewed",{})},[u]);const{title_1:d,subtext_1:m,button_text:p,button_link:h}=l,g=f.useCallback(()=>{u("app download button selected",{downloadAppDestination:"mobile",origin:"marketingLandingPage"}),FC(),window.open(h,"_blank")},[h,u]);return i.jsxs("div",{className:U("p-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[t&&i.jsx("div",{className:"right-sm top-sm absolute",children:i.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:Lt,extraCSS:"text-foreground md:hover:text-quiet ",onClick:t})}),i.jsx(wE,{}),i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx(tJe,{displayAs:s?"ios":"android",allowBgImage:!1}),i.jsxs("div",{className:U("flex flex-col items-center"),children:[i.jsx(it,{children:a?i.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex flex-col items-center",children:[i.jsx(L,{variant:"entry-title",color:"default",textCenter:!0,children:d}),i.jsx(L,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:m})]}):i.jsxs("div",{className:"invisible flex flex-col items-center",children:[i.jsx(L,{variant:"entry-title",color:"default",textCenter:!0,children:e.title_1}),i.jsx(L,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:e.subtext_1})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(_fe,{})})]})]}),i.jsx("div",{className:"flex w-full flex-col items-center",children:i.jsx(it,{children:a?i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex w-full flex-col items-center",children:i.jsx(ge,{variant:"inverted",size:"large",text:p,icon:s?qv:DR,fullWidth:!0,extraCSS:"max-w-xs rounded-xl mx-auto",onClick:g})}):i.jsx("div",{className:"invisible flex w-full flex-col items-center",children:i.jsx(ge,{variant:"inverted",size:"large",text:e.button_text})})})})]})});wfe.displayName="Reviews";const nJe=({origin:e})=>{const{device:{isIOS:t}}=Et(),{downloadAppLink:n}=Nf(e),{$t:r}=Q();return i.jsx(Ye,{href:n,children:i.jsxs("div",{className:"gap-x-md py-lg flex items-center justify-center",children:[i.jsx("div",{"data-color-scheme":"dark",className:U("border-subtler bg-base inline-block border",{"p-sm rounded-xl":t,"p-md rounded-full":!t}),children:i.jsx("div",{className:"flex aspect-square w-12 items-center justify-center",children:i.jsx(Na,{variant:"mark",size:"md",color:"white"})})}),i.jsxs("div",{className:"-mt-xs",children:[i.jsx(L,{variant:"baseSemi",children:"Perplexity"}),i.jsx(L,{variant:"small",color:"light",children:r({defaultMessage:"Search and discovery with AI",id:"n3oaAt293P"})}),i.jsx(_fe,{})]})]})})},A1=()=>{const{value:e,loading:t}=jr({flag:"mweb-upsell-to-whatsapp",defaultValue:!1});return f.useMemo(()=>({mwebUpsellWhatsApp:e,loadingMwebUpsellWhatsApp:t}),[e,t])},rJe=({origin:e,isOpen:t,onClose:n,sheetModalVariant:r})=>{const{trackEventOnce:s,trackEvent:a}=Me(),{$t:o}=Q(),{handleAppDownloadClicked:l}=Nf("install-gate-modal-upsell"),c=jZe(),u=N1({origin:"install-gate"}),{mwebUpsellWhatsApp:d}=A1();f.useEffect(()=>{s("install modal opened",{origin:e})},[e,s]);const m=f.useCallback(()=>{a("install modal closed",{origin:e}),n()},[n,e,a]);return i.jsx(eO,{isOpen:t,onClose:m,variant:r,showCloseButton:!1,overlayVariant:"default-less-blur",children:d?i.jsxs(i.Fragment,{children:[i.jsx(L,{variant:"section-title",className:"px-sm text-center",children:i.jsx(pe,{defaultMessage:"Keep the conversation going.",id:"4/VUgNnQik"})}),i.jsx(L,{variant:"section-title",className:"px-sm text-center",children:i.jsx(pe,{defaultMessage:"Try Perplexity on WhatsApp",id:"YTg7pt2IE4"})}),i.jsxs("div",{className:"mt-md mb-lg flex flex-row items-center justify-center gap-4",children:[i.jsx("div",{className:"aspect-square size-10 overflow-hidden rounded-full shadow-lg",children:i.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{children:"Perplexity"}),i.jsx(L,{variant:"smallMono",color:"super",textCenter:!0,children:"+1 (833) 436-3285"})]})]}),i.jsx(ge,{variant:"primary",text:o({defaultMessage:"Continue on WhatsApp",id:"I7Lrfco0vS"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("whatsapp button clicked",{origin:"install-gate"}),u()}})]}):i.jsxs(i.Fragment,{children:[i.jsx(L,{variant:"page-title",className:"px-sm text-center",children:c??i.jsx(pe,{defaultMessage:"One verified answer to any question",id:"C+F6JBwTvO"})}),i.jsx(nJe,{origin:"install-gate-modal-upsell"}),i.jsx(ge,{variant:"primary",text:o({defaultMessage:"Open Perplexity app",id:"u0MSV+x6J3"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("app download button clicked",{origin:"install-gate"}),l()}})]})})},sJe={xlarge:[64,"h-[64px] w-auto leading-[64px]"],large:[48,"h-[48px] w-auto leading-[48px]"],regular:[32,"h-[32px] w-auto leading-[32px]"],small:[18,"h-[18px] w-auto leading-[18px]"],tiny:[12,"h-[12px] w-auto leading-[12px]"]},aJe=he(async()=>{const{Emoji:e}=await ae(async()=>{const{Emoji:t}=await import("./emoji-picker-react.esm-BLhsW2XR.js");return{Emoji:t}},__vite__mapDeps([8,3,1]));return{default:e}},{nextFrame:!0}),Ru=A.memo(({unified:e,size:t})=>{const[n,r]=sJe[t]??[];return e?i.jsx("div",{className:`relative align-middle ${r}`,children:i.jsx(aJe,{emojiStyle:"native",unified:e,size:n})}):null});Ru.displayName="PerplexityEmoji";const oJe=he(()=>ae(()=>import("./emoji-picker-react.esm-BLhsW2XR.js"),__vite__mapDeps([8,3,1])),{nextFrame:!0}),Cfe=A.memo(({emoji:e,setEmoji:t,size:n="large"})=>{const{$t:r}=Q(),{colorScheme:s}=Pr(),[a,o]=f.useState(!1),l=f.useCallback(g=>{o(!1),t(g.unified)},[t]),c={small:"h-8 w-8",medium:"h-11 w-11",large:"h-14 w-14"},u=f.useCallback(()=>o(!1),[]),d=f.useMemo(()=>({showPreview:!1}),[]),m=f.useMemo(()=>i.jsx(oJe,{emojiStyle:"native",onEmojiClick:l,autoFocusSearch:!0,width:"100%",theme:s==="dark"?"dark":"light",previewConfig:d}),[s,l,d]),p=f.useCallback(()=>t(""),[t]),h=f.useCallback(()=>o(g=>!g),[]);return i.jsxs("div",{className:"relative",children:[i.jsx(L,{variant:"smallBold",children:r({defaultMessage:"Emoji",id:"34NuzGC3+4"})}),i.jsxs("div",{className:"mt-sm relative inline-block",children:[e!==""&&i.jsx("div",{className:"-right-sm -top-sm absolute",children:i.jsx(ge,{pill:!0,size:"tiny",icon:Lt,onClick:p})}),i.jsx(lo,{isOpen:a,onClose:u,content:m,hasInteractiveContent:!0,children:i.jsx(z,{onClick:h,variant:"subtler",bgHover:"offsetPlus",className:`p-sm flex cursor-pointer items-center justify-center rounded-full ${c[n]}`,children:e===""?i.jsx("div",{className:"flex size-full items-center justify-center",children:i.jsx(me,{icon:rr,size:"md"})}):i.jsx("div",{className:"flex size-full items-center justify-center",children:i.jsx(Ru,{unified:e,size:"regular"})})})})]})]})});Cfe.displayName="CollectionEmojiPicker";const iJe={in:{opacity:1,scale:1},out:{opacity:0,scale:.9}},Sfe=A.memo(e=>{const{cancelButton:t,confirmButton:n,description:r,title:s,ref:a}=e,{handleCancel:o,handleConfirm:l}=bOe();return i.jsx(PS,{asChild:!0,onEscapeKeyDown:c=>{c.stopPropagation()},ref:a,children:i.jsxs(xe.div,{animate:"in",className:"border-subtlest bg-base p-lg rounded-lg border shadow-lg",exit:"out",initial:"out",transition:{duration:.2},variants:iJe,children:[i.jsxs(l1,{children:[i.jsx(OS,{children:s}),i.jsx(N7,{children:r})]}),i.jsxs("div",{className:"gap-md flex flex-col items-center",children:[i.jsx(L,{children:r}),i.jsxs("div",{className:"gap-md mx-auto flex",children:[i.jsx(ge,{variant:"common",onClick:o,testId:"confirm-close-modal-cancel-button",...t}),i.jsx(ge,{variant:"rejected",onClick:l,testId:"confirm-close-modal-confirm-button",...n})]})]})]},"confirm-close-modal-content")})});Sfe.displayName="ConfirmCloseModalContent";const Efe=A.memo(e=>{const{children:t,className:n="",motionProps:r,ref:s}=e;return i.jsx(Coe,{asChild:!0,ref:s,children:i.jsx(xe.div,{className:U("bg-backdrop/25 fixed inset-0 flex flex-col items-center justify-center backdrop-blur-[1px]",n),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},...r,children:t},"confirm-close-modal-overlay")})});Efe.displayName="ConfirmCloseModalOverlay";const Mfe=A.memo(function(){const{$t:t}=Q(),n=f.useMemo(()=>({text:t({defaultMessage:"Cancel",id:"47FYwba+bI"}),testId:"default-confirm-modal-cancel-button"}),[t]),r=f.useMemo(()=>({text:t({defaultMessage:"Discard",id:"nmpevlUATU"}),testId:"default-confirm-modal-discard-button"}),[t]);return i.jsx(Efe,{children:i.jsx(Sfe,{cancelButton:n,confirmButton:r,description:t({defaultMessage:"Discard any unsaved changes?",id:"p7u+eL35XP"}),title:t({defaultMessage:"Discard changes?",id:"41zpq3nBvm"})})})});Mfe.displayName="DefaultConfirmModal";const s8=A.memo(({isOpen:e,closeModal:t,existingCollection:n,entryUUID:r,frontendContextUUID:s,onCreate:a,content:o})=>{const l="space-create-modal",{$t:c}=Q(),{isMobileStyle:u,isMobileUserAgent:d}=ye(),{createCollection:m,createCollectionForThread:p}=Fh({reason:l}),[h,g]=f.useState({title:o?.title??n?.title??"",description:o?.description??n?.description??"",instructions:o?.instructions??n?.instructions??"",emoji:o?.emoji??n?.emoji??"",accessLevel:n?.access??Ow,enableWebByDefault:n?.enable_web_by_default??!0}),[y,v]=f.useState(!1),{title:x,description:b,emoji:_,instructions:w}=h,C=x?.length===0||x?.length>VW||b?.length>WW||w?.length>BW,S=N=>{g(I=>({...I,...N})),v(!0)},E=_t(),M=f.useCallback(N=>{S({title:"",description:"",instructions:"",emoji:"",accessLevel:Ow}),t(),E.push(`/spaces/${N.slug}`),a?.(N)},[t,E,a]),k=f.useCallback(()=>{r?p({...h,entryUUID:r,frontendContextUUID:s??"",callback:M}):m({...h,callback:M})},[r,p,h,s,M,m]),T=f.useMemo(()=>[{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:t,shouldShowConfirmDialog:!0},{text:c({defaultMessage:"Continue",id:"acrOozm08x"}),variant:"primary",disabled:C,onClick:()=>k()}],[t,c,C,k]),j=f.useCallback(N=>S({title:N}),[]),R=f.useCallback(N=>S({emoji:N}),[]),O=f.useCallback(N=>S({description:N}),[]),P=f.useCallback(N=>S({instructions:N}),[]);return i.jsx(Xt,{title:c({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),isOpen:e,onClose:t,actionList:T,confirmOnClose:y?i.jsx(Mfe,{}):void 0,children:i.jsxs("div",{className:"space-y-md",children:[i.jsxs("div",{className:"space-x-sm flex items-center",children:[i.jsx("div",{className:"grow",children:i.jsx(ra,{isMobileUserAgent:d,label:c({defaultMessage:"Title",id:"9a9+wwWy4u"}),value:x,autoFocus:!0,onChange:j,placeholder:c({defaultMessage:"Team Space...",id:"CR3RufeyCu"}),maxLength:VW})}),i.jsx("div",{className:"shrink-0",children:i.jsx(Cfe,{emoji:_,setEmoji:R,size:"medium"})})]}),i.jsx(cl,{isMobileStyle:u,isMobileUserAgent:d,placeholder:c({defaultMessage:"A collaborative space for discussing latest insights...",id:"r+xI8TGuu9"}),label:c({defaultMessage:"Description",id:"Q8Qw5BZ1VA"}),isOptional:!0,minRows:2,value:b,onChange:O,maxLength:WW}),i.jsx(cl,{isMobileStyle:u,isMobileUserAgent:d,placeholder:c({defaultMessage:"Always respond in a formal tone and prioritize data-driven insights...",id:"ERATUnZFe3"}),label:c({defaultMessage:"Custom Instructions",id:"nRK52SgZ/p"}),subtitle:c({defaultMessage:"Give instructions to the AI that affects every thread in this space.",id:"6peDHp5LgI"}),isOptional:!0,value:w,minRows:2,onChange:P,maxLength:BW})]})})});s8.displayName="SpaceCreateModal";const lJe=e=>e?ETe(e):void 0,ym=(e,t)=>{if(!e)return"";const n=lJe(e.currency);return n==null?"":t(e.price_minor_units/n,{style:"currency",currency:e.currency})},cJe=({billingInterval:e})=>e==="monthly"?i.jsx(pe,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):e==="yearly"?i.jsx(pe,{defaultMessage:"/ year",id:"8hNOud/igo"}):e==="unknown"?i.jsx(pe,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):null,d2=({planName:e,price:t,formatNumber:n,isHighlighted:r=!1,className:s="",billingInterval:a})=>i.jsxs(z,{variant:"subtler",className:`px-md h-xl my-sm flex items-center justify-between rounded-md ${s}`,children:[i.jsx(L,{variant:"baseSemi",color:r?"default":"light",children:i.jsx(pe,{...e})}),i.jsxs("div",{className:"gap-xs flex items-center",children:[i.jsx(L,{variant:"small",children:t?ym(t,n):""}),i.jsx(L,{variant:"tinyRegular",children:i.jsx(cJe,{billingInterval:a})})]})]}),uJe=({isOpen:e,onClose:t})=>{const{data:n}=gfe({reason:"downgrade-modal"}),{update:r}=Ct(),{currentOpenModals:s}=vt(),{openToast:a}=xn(),{formatNumber:o,formatDate:l,$t:c}=Q(),{trackEvent:u}=Me();f.useEffect(()=>{e&&u("subscription downgrade modal rendered")},[e,u]);const d=f.useCallback(async()=>{await MP({reason:"downgrade-to-pro-modal"}),await r(),t(),u("subscription downgrade success"),s.length>0&&t(),Ip({downgrade:"success"}),a(c({defaultMessage:"Subscription updated",id:"Eq5gCUdVyJ"}),"success",5)},[t,s,r,a,c,u]),{mutate:m,isPending:p}=vfe({reason:"downgrade-modal"},{onSuccess:d}),h=n?.next_billing_start_ts,g=h?l(h*1e3):"";return i.jsx(Xt,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:i.jsxs(z,{className:"p-ml",children:[i.jsx(L,{variant:"baseSemi",children:i.jsx(pe,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),i.jsx(d2,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:n?.old_product_price,formatNumber:o,billingInterval:n?.old_product_interval}),i.jsx(z,{children:i.jsxs(L,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[i.jsx("div",{className:"border-subtlest flex-1 border-t"}),i.jsx(pe,{defaultMessage:"Downgrade",id:"SduMNm+0em"}),i.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),i.jsx(d2,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:n?.new_product_price,formatNumber:o,billingInterval:n?.new_product_interval,isHighlighted:!0,className:"mb-0 !rounded-b-none rounded-t-md"}),i.jsx(z,{variant:"subtler",className:"px-md pb-sm flex items-center justify-between rounded-b-md",children:i.jsx(L,{variant:"small",color:"light",children:i.jsx(pe,{defaultMessage:"Your current Max subscription will remain active until {date} when it will change to Pro.",id:"2C6tgt4MMg",values:{date:g}})})}),i.jsxs(z,{className:"gap-sm mt-ml flex justify-end",children:[i.jsx(Te,{text:i.jsx(pe,{defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),i.jsx(ge,{variant:"primary",text:i.jsx(pe,{defaultMessage:"Confirm",id:"N2IrpMDHDB"}),disabled:p,onClick:()=>m()})]})]})})},dJe=async()=>{try{return(await ne.GET("/rest/homepage-widgets/upsell/","get upsells",{timeoutMs:Pe()})).data?.upsell_information??null}catch(e){return ee.error("Error getting homepage upsells",{error:e}),null}},fJe=async()=>{try{return(await ne.GET("/rest/ntp/upsell/","get ntp upsells",{timeoutMs:Pe()})).data?.upsell_information??null}catch(e){return ee.error("Error getting NTP upsells",{error:e}),null}},TO=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=$e({enabled:e,queryKey:iVe(),queryFn:dJe,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}},Gl={pro:v4e,collection:Ca,research:kR,labs:BC,comet_login:ro,invite:$v},mJe=()=>{const{data:e}=TO(),{trackEvent:t,trackEventOnce:n}=Me(),r=E1(e??void 0),[s,a]=f.useState(!1);f.useEffect(()=>{e&&e.app_location==="BANNER"&&(a(!0),n("banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const o=f.useCallback(()=>{e&&(t("banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),a(!1),dE(e.name))},[e,t]),l=f.useMemo(()=>{if(e&&e.icon_reference&&e.icon_reference in Gl)return Gl[e.icon_reference]},[e]);return f.useMemo(()=>({show:s&&!!e,onDismiss:o,onClick:r,icon:l,title:e?.title,actionLabel:e?.button_text}),[o,r,s,l,e])},_q={RAMP:"Welcome Ramp members. Your 6 month Perplexity Pro free trial starts now!",FREEATT:"Welcome ATT Employees.  Your complimentary 1-year subscription starts now!",FREEAWS:"Welcome AWS Employees.  Your complimentary 1-year subscription starts now!",RABBIT:"Welcome r1 owners.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEUT:"Welcome UT Staff.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEDATABRICKS:"Welcome Databricks team.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREESRA:"Welcome SRA team. Your complimentary 1-year Perplexity Pro subscription starts now!",HBSTECH:"Welcome HBS Tech Conference Attendees.  Your complimentary 6 month Perplexity Pro subscription starts now!",HBSSTAFF:"Welcome HBS Tech Conference Attendees.  Your complimentary 1 year Perplexity Pro subscription starts now!",FREENEWSROOM:"Welcome Friends!  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEINKITT:"Welcome Inkitt Writers!  Your complimentary 1-year subscription to Perplexity Pro starts now!",FREETIME:"Welcome Time team!  Your complimentary 1-year subscription to Perplexity Pro starts now!",FREETMOBILE:"Welcome T-Mobile team!  Your complimentary 1-year subscription to Perplexity Pro starts now!","11LABS":"Welcome! Your complimentary 3-month subscription to Perplexity Pro starts now!",FREECAVS:"Welcome Cavs team! Your complimentary 1-year Perplexity Pro subscription starts now!",NOTHING6:"Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",FREENOTHING6:"Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",NOTHING1:"Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",FREENOTHING1:"Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",HOOHACKS:"Welcome HooHacks Community. Your 1-year Perplexity Pro free trial starts now!",NJED:"Welcome NJ ED Community. Your 1-year Perplexity Pro free trial starts now!",COPYAI:"Welcome Copy AI customers! Your 6-month complimentary Perplexity Pro subscription starts now!",RAYCAST6:"Welcome Raycast users! Your 6-month complimentary Perplexity Pro subscription starts now!",RAYCAST3:"Welcome Raycast users! Your 3-month complimentary Perplexity Pro subscription starts now!",FREEMAGENTALOVE:"Welcome Deutsche Telekom!  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEPPLXVIP:"Welcome friend of Perplexity! Your complimentary 1-year Perplexity Pro subscription starts now.",FREEUTA1:"Welcome UTA team! Your complimentray 1-year Perplexity Pro subscription starts now.",DT:"Willkommen Deutsche Telekom Kunde! Sie erhalten dank Magenta Moments ein kostenloses 1-Jahres-Abonnement fr Perplexity Pro.",MY:"Welcome! Your complimentary 1-year Perplexity Pro subscription starts now."},Nb="pplx.discount_code",Sk="pplx.discount_code_expiry",pJe=()=>{const[e,t]=f.useState(null),[n,r]=f.useState(null),s=_t(),a=Dt(),o=Nt(),l=a?.get("discount_code"),{$t:c}=Q(),u=Array.isArray(l)?l[0]:l,[d,m]=f.useState(u||null),{hasAccessToProFeatures:p}=yt(),h=f.useCallback(()=>{Ae.removeItem(Nb),Ae.removeItem(Sk),r(null),t(null)},[]),g=f.useCallback(()=>{h(),m(null)},[h]),y=f.useCallback(()=>{if(n&&e)return;const b=Ae.getItem(Nb);b?.startsWith("REPLIT")?(t("/static/images/replit.svg"),r("/static/images/replit_dark.svg")):b?.startsWith("BREX")?(t("/static/images/brex.svg"),r("/static/images/brex_dark.svg")):(r(null),t(null))},[n,e]),v=f.useCallback(()=>{const b=Ae.getItem(Nb),_=Ae.getItem(Sk);if(p){h();return}if(!(!b&&!u)){if(_&&new Date(_)<new Date){h();return}if(!b||u&&u!==b){const w=new Date;w.setDate(w.getDate()+2),Ae.setItem(Nb,String(u)),Ae.setItem(Sk,w.toString()),m(String(u)),y(),o==="/pro"&&s.push("/",void 0,"Pro page");return}if(b){m(b),y();return}}},[u,y,p,o,h,s]),x=f.useCallback(b=>{for(const _ in _q)if(b&&b.startsWith(_))return _q[_];return c({defaultMessage:"Redeem your promo code {discountCode}. Get started",id:"Vapo/CiOwF"},{discountCode:b})},[c]);return f.useEffect(()=>{v()},[u,v]),f.useMemo(()=>({discountCode:d,setDiscountCode:m,partnerLogoDark:n,partnerLogoLight:e,message:x(d??""),clearDiscountCode:g}),[g,d,x,n,e])},kfe=({reason:e})=>{const{$t:t}=Q(),{data:n,isLoading:r}=$e({queryKey:sVe(),queryFn:()=>ife({reason:e})}),s=!!n?.institution;let a=n?.offer?.discount_str??void 0;!a&&s&&(a=t({defaultMessage:"$4.99",id:"ngR/pJs1LV"}));const o=n?.offer?.discount_type??void 0;return f.useMemo(()=>({userPromotionsLoading:r,discountPrice:a,discountType:o,showStudentDiscountContent:s,campaignId:n?.campaign?.id,institution:n?.institution}),[n?.campaign?.id,n?.institution,a,o,r,s])},Yg="clicked enterprise ad",Qg="https://www.perplexity.ai/enterprise",NO=()=>{const{trackEvent:e}=Me(),t=_t(),{hasAccessToProFeatures:n}=yt(),r=f.useCallback(async h=>{h.preventDefault(),e(Yg,{source:"sidebarAd",isSubscribed:n}),t.push(Qg)},[e,t,n]),s=f.useCallback(async h=>{h?.preventDefault(),e(Yg,{source:"settingsHeader"}),t.push(Qg)},[e,t]),a=f.useCallback(async h=>{h.preventDefault(),h.stopPropagation(),e(Yg,{source:"footer"}),t.push(Qg)},[e,t]),o=f.useCallback(async h=>{h.preventDefault(),e(Yg,{source:"pricingTable"}),t.push(Qg)},[e,t]),l=f.useCallback(async h=>{h.preventDefault(),e(Yg,{source:"paywall"}),t.push(Qg)},[e,t]),c=f.useCallback(({orgName:h,success:g})=>{e("org created",{orgName:h,success:g})},[e]),u=f.useCallback(({invitedEmail:h,source:g,orgUUID:y,inviteType:v})=>{e("org user invited",{invitedEmail:h,source:g,orgUUID:y,inviteType:v})},[e]),d=f.useCallback(({orgUUID:h})=>{e("org invite step completed",{orgUUID:h})},[e]),m=f.useCallback(({orgUUID:h,source:g,intent:y,success:v})=>e("org payment portal entered",{orgUUID:h,source:g,intent:y,success:v}),[e]),p=f.useCallback(({orgUUID:h,success:g})=>{e("sso enabled",{orgUUID:h,success:g})},[e]);return f.useMemo(()=>({handleSidebarAdClick:r,handleSettingsHeaderAdClick:s,handleFooterAdClick:a,handlePricingTableAdClick:o,handlePaywallAdClick:l,trackOrgCreated:c,trackOrgUserInvited:u,trackOrgInviteStepCompleted:d,trackOrgPaymentPortalEntered:m,trackSSOEnabled:p}),[a,l,o,s,r,c,d,m,u,p])},hJe=({reason:e})=>{const t=_t(),{organization:n}=gn({reason:e}),{trackOrgPaymentPortalEntered:r}=NO(),s=f.useCallback(async({source:l})=>{const c=await XBe({source:l,locale:nu(),reason:e});c?(r({orgUUID:n?.uuid,source:l,intent:"portal",success:!0}),t.push(c)):(r({orgUUID:n?.uuid,source:l,intent:"portal",success:!1}),ee.log("could not open Stripe portal"))},[r,n?.uuid,t,e]),a=f.useCallback(({interval:l="monthly",subscriptionTier:c,source:u,onErrorCallback:d,reason:m})=>{const p=nu();ZBe({subscriptionTier:c==="enterprise_pro"?Mn.PRO:Mn.MAX,interval:l,origin:u,locale:p,reason:m}).then(h=>{h&&h.status==="success"&&h.url!=null&&h.url!==""?(r({orgUUID:n?.uuid,source:u,intent:"checkout",success:!0}),h.url&&t.push(h.url)):(r({orgUUID:n?.uuid,source:u,intent:"checkout",success:!1}),d?.())})},[t,n?.uuid,r]),o=f.useCallback(async({interval:l,subscriptionTier:c,collectionMethod:u,source:d,billingAddress:m,reason:p})=>{const h=nu(),g=await JBe({interval:l,subscriptionTier:c==="enterprise_pro"?Mn.PRO:Mn.MAX,origin:d,locale:h,collectionMethod:u,billingAddress:m,reason:p});return await ule({reason:p}),g},[]);return f.useMemo(()=>({manageExistingBillingClick:s,navigateToCheckout:a,createInvoicedSubscription:o}),[o,s,a])},gJe={good:"super",bad:"red",info:"subtler",orange:"orange"},qh=A.memo(({variant:e,title:t,actionLabel:n,onClick:r,onClose:s,toolTip:a,icon:o,isMobileStyle:l,isLoading:c})=>{const u=e==="info"?"default":"white",d=e==="info"?"super":u,m=f.useCallback(h=>{h.stopPropagation(),s?.(h)},[s]),p=i.jsxs(z,{className:U("h-bannerHeight erp-tab:rounded-none md:rounded-md lg:rounded-lg","gap-xs px-md md:gap-sm relative flex w-full cursor-pointer items-center transition duration-200 hover:opacity-80",e==="info"?"md:justify-between":"md:justify-center",{"px-lg":s}),variant:gJe[e],onClick:r,children:[c?i.jsx(L,{color:u,children:i.jsx(as,{})}):o&&i.jsx(L,{color:u,className:"mr-xs md:mr-0",children:i.jsx(me,{icon:o,size:l?"sm":"md"})}),i.jsx(L,{color:u,className:"leading-[1.1]",variant:l?"tiny":"small",children:t}),i.jsxs("div",{className:"flex items-center gap-1",children:[n&&i.jsx(L,{color:d,variant:l?"tiny":"small",className:U("hidden font-bold decoration-white/30 md:inline-flex",{"underline underline-offset-2":e!=="info"}),children:n}),r&&e!=="info"&&i.jsx(L,{color:u,className:"inline-flex",children:i.jsx(me,{icon:GC,size:"xs"})})]}),s&&i.jsx(Te,{icon:Lt,extraCSS:U("!absolute right-sm opacity-50",e==="info"?"text-foreground dark:!text-white":"!text-white"),variant:"noHover",size:"tiny",onClick:m})]});return a?i.jsx(pn,{tooltipText:a,children:p}):p});qh.displayName="SiteBanner";const yJe=({orgStripeStatus:e})=>{const t="org-billing-banner",n=_t(),{$t:r}=Q(),{navigateToCheckout:s}=hJe({reason:t}),{isMobileStyle:a}=ye(),[o,l]=f.useState(!1),{openModal:c}=vt();if(bs.getItem(V7e))return null;const d=()=>{if(!o){if(e==="none"){c("pricingModal",{origin:Ie.ENTERPRISE_BILLING_BANNER,showFreeTier:!0,pitchMessage:{title:r({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}});return}l(!0),s({source:"banner",subscriptionTier:"enterprise_pro",onErrorCallback:()=>{n.refresh("Org billing banner"),l(!1)},reason:t})}},m=r(e==="past_due"?{defaultMessage:"Please complete your invoice payment to use Enterprise features",id:"e4FA3jvBUQ"}:{defaultMessage:"Please complete the payment process to use Enterprise features",id:"bNYGI9HBI3"}),p=r({defaultMessage:"May take up to a minute to reflect payment status changes",id:"+w47QOW1fc"});return i.jsx(qh,{onClick:d,isLoading:o,variant:"bad",title:m,toolTip:p,icon:x4e,isMobileStyle:a})},vJe=()=>{const e=_t(),{trackEvent:t}=Me(),n=f.useCallback(async({origin:r,discountCode:s,tier:a,referralCode:o,subscriptionTier:l="pro"})=>{const c=new URL(`/${l}/payment`,window.location.origin);return c.searchParams.set("plan",a),c.searchParams.set("origin",r),s&&c.searchParams.set("promotion_code",s),t("pro checkout started",{subscriptionTier:l,origin:r,discountCode:s??"",referralCode:o??"",tier:"monthly",flowType:"embedded_checkout"}),e.push(c.toString()),!0},[e,t]);return f.useMemo(()=>({navigateToPayment:n}),[n])},xJe=({message:e,discountCode:t,clearDiscountCode:n})=>{const r="discount-code-banner",s=Qe(),{trackEvent:a}=Me(),{$t:o}=Q(),{isMobileStyle:l}=ye(),[c,u]=f.useState(!1),[d,m]=f.useState(null),{openVisitorLoginUpsell:p}=Xn({enabled:!s}),{navigateToPayment:h}=vJe(),g=Ie.DISCOUNT_CODE_BANNER;f.useEffect(()=>{a("promo code banner shown",{discountCode:t})},[a,t]);const y=f.useCallback(()=>{const b=new URL(window.location.href);b.searchParams.delete("discount_code"),Gh(Object.fromEntries(b.searchParams)),n()},[n]),v=f.useCallback(async()=>{if(a("promo code banner clicked",{discountCode:t}),!c){if(d){y(),m(null);return}if(s){if(u(!0),a("get started button clicked from discount banner",{tier:"monthly"}),await h({origin:g,discountCode:t,tier:"monthly"})){n();return}a("pro checkout started",{subscriptionTier:"pro",origin:g,discountCode:t??"",referralCode:"",tier:"monthly",flowType:"stripe_checkout"}),cfe({request:{subscriptionTier:"pro",tier:"monthly",referralCode:"",discountCode:t,origin:g,locale:nu()},reason:r}).then(b=>{b?.url?dl(b.url,"Discount code banner checkout"):(b?.errorCode==="PROMO_CODE_CUSTOMER_NOT_FIRST_TIME"?m(o({defaultMessage:"This code is only valid for first-time customers. Click to dismiss.",id:"xTWJg0ueMJ"})):m(o({defaultMessage:"There was an error with your code. Please double-check your code and click to try again.",id:"CdOiX2ylN6"})),u(!1))})}else p({title:o({defaultMessage:"Get started with your Pro discount",id:"XTa2YrANRF"}),origin:g})}},[o,n,t,d,c,s,h,p,g,a,y]),x=b=>{y(),b.preventDefault()};return i.jsx(qh,{onClick:v,isLoading:c,icon:d?qte:Kte,variant:d?"bad":"good",title:d||e,isMobileStyle:l,onClose:x})},bJe="back_to_school_winner",Tfe="EDUFREEYEAR",wq=({partnerCode:e,partnerDiscountCode:t,bannerVariant:n})=>{const{$t:r}=Q(),{session:s}=Ct(),{hasActiveSubscription:a}=yt(),o=e==="edu"&&t===Tfe?!1:a,[,,l]=xfe(),[,,c]=bfe(),[u,d]=f.useState(!1),{isMobileStyle:m}=ye(),{data:p}=$e({queryKey:["partner",e],queryFn:()=>fetch(`/api/subscription/config?partnerCode=${e}`).then(C=>C.json())}),h=_t();if(!e)return null;const g=p?.messages??tae,y=o?r({defaultMessage:"Welcome to Perplexity Pro",id:"dcD7kilsgv"}):g?.bannerMessage??"",v=o?r({defaultMessage:"Learn More",id:"7DIW6+rckr"}):e.startsWith("edu")?r({defaultMessage:"Redeem Now",id:"EiBCDsh1sP"}):r({defaultMessage:"Get Started",id:"9QXm1EW9qz"}),x=o?void 0:Kte,b=o?`/join/p/${e}/welcome`:s&&t?`/join/p/${e}/${t}`:`/join/p/${e}`,_=C=>{l(),c(),C.preventDefault()},w=()=>{u||(d(!0),h.push(b))};return p?.maskPromoCodeFromQueryParams?null:i.jsx(qh,{icon:x,isMobileStyle:m,title:y,actionLabel:v,onClick:w,isLoading:u,variant:n??"good",onClose:_})},_Je="https://www.perplexity.ai/hub/blog/eligible-uber-one-members-can-now-unlock-a-complimentary-full-year-of-perplexity-pro",wJe=()=>{const{$t:e}=Q(),t=_t(),{isMobileStyle:n}=ye(),[r,s]=f.useState(!1),a=()=>{r||(s(!0),t.push(_Je))};return i.jsx(qh,{variant:"good",title:e({defaultMessage:"{uberOne} members in the United States and Canada can redeem one free year of {perplexityPro}",id:"jo9fEuRnKx"},{uberOne:"Uber One",perplexityPro:"Perplexity Pro"}),onClick:a,isLoading:r,isMobileStyle:n})};var f2;(function(e){e.NONE="none",e.ACTIVE="active",e.TRIALING="trialing",e.PAST_DUE="past_due",e.INVOICE_PAST_DUE="invoice_past_due",e.WHITE_GLOVE_PAST_DUE="white_glove_past_due",e.CANCELED="canceled"})(f2||(f2={}));const QFt=[{label:"N/A",value:""},{label:"AD NRT",value:"ad_nrt"},{label:"AE TRN",value:"ae_trn"},{label:"AL TIN",value:"al_tin"},{label:"AM TIN",value:"am_tin"},{label:"AO TIN",value:"ao_tin"},{label:"AR CUIT",value:"ar_cuit"},{label:"AU ABN",value:"au_abn"},{label:"AU ARN",value:"au_arn"},{label:"BA TIN",value:"ba_tin"},{label:"BB TIN",value:"bb_tin"},{label:"BG UIC",value:"bg_uic"},{label:"BH VAT",value:"bh_vat"},{label:"BO TIN",value:"bo_tin"},{label:"BR CNPJ",value:"br_cnpj"},{label:"BR CPF",value:"br_cpf"},{label:"BS TIN",value:"bs_tin"},{label:"BY TIN",value:"by_tin"},{label:"CA BN",value:"ca_bn"},{label:"CA GST/HST",value:"ca_gst_hst"},{label:"CA PST BC",value:"ca_pst_bc"},{label:"CA PST MB",value:"ca_pst_mb"},{label:"CA PST SK",value:"ca_pst_sk"},{label:"CA QST",value:"ca_qst"},{label:"CD NIF",value:"cd_nif"},{label:"CH UID",value:"ch_uid"},{label:"CH VAT",value:"ch_vat"},{label:"CL TIN",value:"cl_tin"},{label:"CN TIN",value:"cn_tin"},{label:"CO NIT",value:"co_nit"},{label:"CR TIN",value:"cr_tin"},{label:"DE STN",value:"de_stn"},{label:"DO RCN",value:"do_rcn"},{label:"EC RUC",value:"ec_ruc"},{label:"EG TIN",value:"eg_tin"},{label:"ES CIF",value:"es_cif"},{label:"EU OSS VAT",value:"eu_oss_vat"},{label:"EU VAT",value:"eu_vat"},{label:"GB VAT",value:"gb_vat"},{label:"GE VAT",value:"ge_vat"},{label:"GN NIF",value:"gn_nif"},{label:"HK BR",value:"hk_br"},{label:"HR OIB",value:"hr_oib"},{label:"HU TIN",value:"hu_tin"},{label:"ID NPWP",value:"id_npwp"},{label:"IL VAT",value:"il_vat"},{label:"IN GST",value:"in_gst"},{label:"IS VAT",value:"is_vat"},{label:"JP CN",value:"jp_cn"},{label:"JP RN",value:"jp_rn"},{label:"JP TRN",value:"jp_trn"},{label:"KE PIN",value:"ke_pin"},{label:"KH TIN",value:"kh_tin"},{label:"KR BRN",value:"kr_brn"},{label:"KZ BIN",value:"kz_bin"},{label:"LI UID",value:"li_uid"},{label:"LI VAT",value:"li_vat"},{label:"MA VAT",value:"ma_vat"},{label:"MD VAT",value:"md_vat"},{label:"ME PIB",value:"me_pib"},{label:"MK VAT",value:"mk_vat"},{label:"MR NIF",value:"mr_nif"},{label:"MX RFC",value:"mx_rfc"},{label:"MY FRP",value:"my_frp"},{label:"MY ITN",value:"my_itn"},{label:"MY SST",value:"my_sst"},{label:"NG TIN",value:"ng_tin"},{label:"NO VAT",value:"no_vat"},{label:"NO VOEC",value:"no_voec"},{label:"NP PAN",value:"np_pan"},{label:"NZ GST",value:"nz_gst"},{label:"OM VAT",value:"om_vat"},{label:"PE RUC",value:"pe_ruc"},{label:"PH TIN",value:"ph_tin"},{label:"RO TIN",value:"ro_tin"},{label:"RS PIB",value:"rs_pib"},{label:"RU INN",value:"ru_inn"},{label:"RU KPP",value:"ru_kpp"},{label:"SA VAT",value:"sa_vat"},{label:"SG GST",value:"sg_gst"},{label:"SG UEN",value:"sg_uen"},{label:"SI TIN",value:"si_tin"},{label:"SN NINEA",value:"sn_ninea"},{label:"SR FIN",value:"sr_fin"},{label:"SV NIT",value:"sv_nit"},{label:"TH VAT",value:"th_vat"},{label:"TJ TIN",value:"tj_tin"},{label:"TR TIN",value:"tr_tin"},{label:"TW VAT",value:"tw_vat"},{label:"TZ VAT",value:"tz_vat"},{label:"UA VAT",value:"ua_vat"},{label:"UG TIN",value:"ug_tin"},{label:"US EIN",value:"us_ein"},{label:"UY RUC",value:"uy_ruc"},{label:"UZ TIN",value:"uz_tin"},{label:"UZ VAT",value:"uz_vat"},{label:"VE RIF",value:"ve_rif"},{label:"VN TIN",value:"vn_tin"},{label:"ZA VAT",value:"za_vat"},{label:"ZM TIN",value:"zm_tin"},{label:"ZW TIN",value:"zw_tin"}],CJe=e=>["/onboarding/org/create"].includes(e);function Nfe(){const e="app-banner-inner",{isMobileUserAgent:t}=ye(),{message:n,discountCode:r,clearDiscountCode:s}=pJe(),{hasAccessToProFeatures:a}=yt(),[o]=xfe(),[l]=bfe(),c=Nt(),{organization:u,orgUser:d}=gn({reason:e}),m=[f2.NONE,f2.PAST_DUE],p=u?.stripe_status&&m.includes(u.stripe_status),h=d?.role==="ADMIN",g=Dt(),v=kfe({reason:e}).campaignId===bJe,{show:x,onDismiss:b,onClick:_,icon:w,title:C,actionLabel:S}=mJe();return x&&C&&S?i.jsx(xe.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2},children:i.jsx(qh,{icon:w,isMobileStyle:t,title:C,actionLabel:S,onClick:_,variant:"good",onClose:b})}):h&&p&&!CJe(c??"")&&!t?i.jsx(yJe,{orgStripeStatus:u?.stripe_status}):/(^\/$)|(^\/search)/.test(c??"")&&o?i.jsx(wq,{partnerCode:o,partnerDiscountCode:l}):r&&!a&&!o?i.jsx(xJe,{message:n,discountCode:r,clearDiscountCode:s}):g?.get("utm_campaign")==="morningbrew_083024"&&g?.get("utm_source")==="newsletter"?i.jsx(wJe,{}):v?i.jsx(wq,{partnerCode:"edu",partnerDiscountCode:Tfe,bannerVariant:"orange"}):null}const SJe=()=>{const e=f.useCallback(n=>{const r=document.documentElement,s=n??Tn("colorSchemeTheme"),a=Cne(s);a?r.setAttribute("data-theme",a):r.removeAttribute("data-theme")},[]),t=f.useMemo(()=>ta(e,100),[e]);LP("colorSchemeTheme",n=>{t(n?.value)}),f.useEffect(()=>{e()},[e])},Afe=f.createContext(void 0),Ac=()=>{const e=f.useContext(Afe);if(!e)throw new Error("useAppLayout must be used within an AppLayoutProvider");return e},EJe=({children:e})=>{const[t,n]=f.useState(!1);return SJe(),i.jsx(Afe.Provider,{value:{isMobileSidebarOpen:t,setMobileSidebarOpen:n},children:e})},MJe=({children:e})=>{const{isMobileSidebarOpen:t,setMobileSidebarOpen:n}=Ac(),{$t:r}=Q();return i.jsx(x7,{open:t,onOpenChange:n,children:i.jsxs(_7,{forceMount:!0,children:[i.jsx(l1,{children:i.jsx(E7,{children:r({defaultMessage:"Mobile Sidebar",id:"37aIxgWRuh"})})}),i.jsx(it,{children:t&&i.jsxs(i.Fragment,{children:[i.jsx(w7,{asChild:!0,children:i.jsx(xe.div,{className:"fixed inset-0 bg-black/20 dark:bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}},"mobile-sidebar-overlay")}),i.jsx(C7,{asChild:!0,children:i.jsx(xe.div,{className:"bg-base fixed inset-y-0 left-0",initial:{x:"-100%"},animate:{x:"0%"},exit:{x:"-100%"},transition:{duration:.2,ease:hn},children:e},"mobile-sidebar-content")})]})})]})})},AO=({className:e})=>{const{isMobileSidebarOpen:t,setMobileSidebarOpen:n}=Ac();return i.jsx(Te,{icon:b4e,pill:!0,onClick:()=>n(!t),extraCSS:e})},Am=72,m2=200,jfe=()=>{const{isGovernmentRequestOrigin:e}=Or();return e===void 0},kJe=()=>zBe()==="firefox"?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("pc")==="firefox",Cq="partnerships",TJe=()=>qBe()===Cq?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("utm_source")===Cq,pl=f.memo(({isSamsungBrowser:e,isWindowsApp:t,isComet:n,isFirefoxDefaultSearch:r,isPartnershipCampaign:s,isGovernment:a,children:o})=>{const l=rn(),c=kJe(),u=TJe(),{isGovernmentRequestOrigin:d}=Or(),{device:{isWindowsApp:m,isSamsungBrowser:p}}=Et(),h=jfe();return f.useMemo(()=>!!(n&&l||t&&m||e&&p||r&&c||s&&u||a&&(h||d)),[l,m,p,n,e,t,r,c,s,u,a,d,h])?null:o});pl.displayName="OmitUpsellIf";const Rfe=A.memo(({})=>{const{$t:e}=Q(),{trackEvent:t}=Me(),n=f.useCallback(()=>{t("click logo",{})},[t]),{device:{isIOS:r}}=Et(),{handleAppDownloadClicked:s}=Nf("mobile-header"),a=N1({origin:"mobile-header"}),{mwebUpsellWhatsApp:o,loadingMwebUpsellWhatsApp:l}=A1(),c=f.useMemo(()=>o?FR:r?qv:DR,[o,r]);return i.jsx(z,{variant:"background",className:"px-sm h-headerHeight sticky inset-x-0 top-0 z-10 flex w-full items-center md:mb-0",children:i.jsxs("div",{className:"gap-x-sm pl-xs flex w-full items-center justify-between md:hidden",children:[i.jsxs("div",{className:"gap-x-sm flex items-center",children:[i.jsx(AO,{className:"-ml-sm"}),i.jsx(Ye,{href:"/",onClick:n,children:i.jsx(Na,{variant:"text",size:"small"})})]}),!l&&i.jsx(pl,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:i.jsx("div",{className:"animate-in fade-in duration-300",children:i.jsx(ge,{size:"small",pill:!0,variant:"primary",icon:c,text:e(o?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:o?a:s})})})]})})});Rfe.displayName="MobileProductHeader";const Ife=f.createContext(null),NJe=({children:e,scrollContainerRef:t})=>i.jsx(Ife.Provider,{value:{scrollContainerRef:t},children:e}),Bo=()=>{const e=f.useContext(Ife);if(!e)throw new Error("useScrollContainerRef must be used within a ScrollContainerRefProvider");return e},jO=A.memo(e=>{const{children:t,inRenderingPlace:n}=e,s=Sa().erp;return n&&n===s||!n&&s!==void 0?null:i.jsx(i.Fragment,{children:t})});jO.displayName="HideInEntropy";const AJe=/^\/b\//;function Pfe(e){return e&&AJe.test(e)}function jJe(e){return e?new URL(window.location.href).pathname.endsWith(`/search/${e}`):!1}function RJe(e){return e?.startsWith("/collections")||e?.startsWith("/spaces")}function IJe(){return rn()?"/b/home":"/"}const Kh=()=>{const{locale:e}=Q();return Tae(e)==="rtl"},PJe=({children:e,ref:t})=>i.jsx(EJe,{children:i.jsx(z,{variant:"underlay",children:i.jsx("div",{className:"isolate flex h-dvh",ref:t,children:e})})}),OJe=({children:e})=>{const{isMobileStyle:t}=ye({evaluateOnInit:!0});return t?i.jsx(MJe,{children:e}):i.jsx(i.Fragment,{children:e})},LJe=({children:e,fillHeight:t=!0,hasSidebar:n,ref:r})=>{const{isSidebarPinned:s}=dn(),{isMobileStyle:a}=ye({evaluateOnInit:!0}),o=Nt(),l=n&&!Pfe(o),c=s&&!a&&l,u=Za(),d=Kh(),m=f.useMemo(()=>d?{paddingRight:c?m2:0}:{paddingLeft:c?m2:0},[d,c]);return i.jsxs(xe.div,{initial:m,animate:m,transition:{duration:.2,ease:hn},className:"erp-tab:p-0 md:gap-xs erp-tab:gap-0 lg:py-sm lg:pe-sm isolate flex h-auto max-h-screen min-w-0 grow flex-col",ref:r,children:[i.jsx(jO,{inRenderingPlace:"sidecar",children:i.jsx(Nfe,{})}),i.jsxs(z,{variant:"background",className:"@container/main erp-tab:rounded-none erp-tab:shadow-none relative isolate min-h-0 flex-1 overflow-clip bg-clip-border shadow-sm lg:rounded-lg",children:[i.jsx("div",{className:U("mx-auto flex w-full flex-col",{"h-full":t}),children:e}),i.jsx(z,{className:U("rounded-inherit pointer-events-none absolute inset-0 z-20 hidden md:dark:block",l&&"md:erp-tab:!border-y-0 md:erp-tab:!border-r-0",!u&&"md:dark:border")})]})]})},j1=({children:e,childrenWidth:t,containerClassName:n=""})=>{const r=ns(t).with("small",()=>"max-w-screen-sm px-md md:px-lg").with("default",()=>"max-w-screen-md px-md md:px-lg").with("static",()=>"max-w-screen-lg px-md py-lg md:px-xl").with("large",()=>"max-w-threadWidth px-md md:px-lg").with("none",()=>"max-w-none").otherwise(()=>"max-w-screen-md px-md md:px-lg"),s=f.useRef(null);return i.jsx(NJe,{scrollContainerRef:s,children:i.jsx("div",{ref:s,className:"scrollable-container scrollbar-subtle flex flex-1 basis-0 overflow-auto [scrollbar-gutter:stable]",children:i.jsx("div",{className:U("mx-auto size-full",r,n),children:e})})})},XFt=({children:e,mobileHeader:t=!0})=>{const{isMobileStyle:n}=ye();return i.jsxs(i.Fragment,{children:[i.jsx("div",{children:t&&n&&i.jsx(Rfe,{})}),e]})};function Sq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function jm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sq(Object(n),!0).forEach(function(r){Ofe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sq(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K_(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?K_=function(t){return typeof t}:K_=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K_(e)}function Ofe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DJe(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function FJe(e,t){if(e==null)return{};var n=DJe(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function p2(e,t){return UJe(e)||BJe(e,t)||VJe(e,t)||WJe()}function UJe(e){if(Array.isArray(e))return e}function BJe(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function VJe(e,t){if(e){if(typeof e=="string")return Eq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eq(e,t)}}function Eq(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wa=function(t,n,r){var s=!!r,a=A.useRef(r);A.useEffect(function(){a.current=r},[r]),A.useEffect(function(){if(!s||!t)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return t.on(n,o),function(){t.off(n,o)}},[s,n,t,a])},nv=function(t){var n=A.useRef(t);return A.useEffect(function(){n.current=t},[t]),n.current},af=function(t){return t!==null&&K_(t)==="object"},$Je=function(t){return af(t)&&typeof t.then=="function"},HJe=function(t){return af(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},Mq="[object Object]",a8=function e(t,n){if(!af(t)||!af(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(t)===Mq,o=Object.prototype.toString.call(n)===Mq;if(a!==o)return!1;if(!a&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var m=0;m<c.length;m+=1)u[c[m]]=!0;var p=Object.keys(u);if(p.length!==l.length)return!1;var h=t,g=n,y=function(x){return e(h[x],g[x])};return p.every(y)},Lfe=function(t,n,r){return af(t)?Object.keys(t).reduce(function(s,a){var o=!af(n)||!a8(t[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?jm(jm({},s||{}),{},Ofe({},a,t[a])):s},null):null},Dfe="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",kq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dfe;if(t===null||HJe(t))return t;throw new Error(n)},Ffe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dfe;if($Je(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return kq(s,n)})};var r=kq(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},Ufe=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),t.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},SE=A.createContext(null);SE.displayName="ElementsContext";var Bfe=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},zJe=function(t){var n=t.stripe,r=t.options,s=t.children,a=A.useMemo(function(){return Ffe(n)},[n]),o=A.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=p2(o,2),c=l[0],u=l[1];A.useEffect(function(){var p=!0,h=function(y){u(function(v){return v.stripe?v:{stripe:y,elements:y.elements(r)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(g){g&&p&&h(g)}):a.tag==="sync"&&!c.stripe&&h(a.stripe),function(){p=!1}},[a,c,r]);var d=nv(n);A.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var m=nv(r);return A.useEffect(function(){if(c.elements){var p=Lfe(r,m,["clientSecret","fonts"]);p&&c.elements.update(p)}},[r,m,c.elements]),A.useEffect(function(){Ufe(c.stripe)},[c.stripe]),A.createElement(SE.Provider,{value:c},s)};zJe.propTypes={stripe:Le.any,options:Le.object};var GJe=function(t){var n=A.useContext(SE);return Bfe(n,t)},ZFt=function(){var t=GJe("calls useElements()"),n=t.elements;return n};Le.func.isRequired;var qJe=["on","session"],EE=A.createContext(null);EE.displayName="CheckoutSdkContext";var Vfe=function(t,n){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return t},RO=A.createContext(null);RO.displayName="CheckoutContext";var KJe=function(t,n){if(!t)return null;t.on,t.session;var r=FJe(t,qJe);return n?jm(jm({},r),n):jm(jm({},r),t.session())},YJe="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",QJe=function(t){var n=t.stripe,r=t.options,s=t.children,a=A.useMemo(function(){return Ffe(n,YJe)},[n]),o=A.useState(null),l=p2(o,2),c=l[0],u=l[1],d=A.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,checkoutSdk:null}}),m=p2(d,2),p=m[0],h=m[1],g=function(w,C){h(function(S){return S.stripe&&S.checkoutSdk?S:{stripe:w,checkoutSdk:C}})},y=A.useRef(!1);A.useEffect(function(){var _=!0;return a.tag==="async"&&!p.stripe?a.stripePromise.then(function(w){w&&_&&!y.current&&(y.current=!0,w.initCheckout(r).then(function(C){C&&(g(w,C),C.on("change",u))}))}):a.tag==="sync"&&a.stripe&&!y.current&&(y.current=!0,a.stripe.initCheckout(r).then(function(w){w&&(g(a.stripe,w),w.on("change",u))})),function(){_=!1}},[a,p,r,u]);var v=nv(n);A.useEffect(function(){v!==null&&v!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[v,n]);var x=nv(r);A.useEffect(function(){var _,w;if(p.checkoutSdk){r.clientSecret&&!af(x)&&!a8(r.clientSecret,x.clientSecret)&&console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var C=x==null||(_=x.elementsOptions)===null||_===void 0?void 0:_.appearance,S=r==null||(w=r.elementsOptions)===null||w===void 0?void 0:w.appearance;S&&!a8(S,C)&&p.checkoutSdk.changeAppearance(S)}},[r,x,p.checkoutSdk]),A.useEffect(function(){Ufe(p.stripe)},[p.stripe]);var b=A.useMemo(function(){return KJe(p.checkoutSdk,c)},[p.checkoutSdk,c]);return p.checkoutSdk?A.createElement(EE.Provider,{value:p},A.createElement(RO.Provider,{value:b},s)):null};QJe.propTypes={stripe:Le.any,options:Le.shape({clientSecret:Le.string.isRequired,elementsOptions:Le.object}).isRequired};var XJe=function(t){var n=A.useContext(EE);return Vfe(n,t)},o8=function(t){var n=A.useContext(EE),r=A.useContext(SE);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n?Vfe(n,t):Bfe(r,t)},JFt=function(){XJe("calls useCheckout()");var t=A.useContext(RO);if(!t)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return t},ZJe=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Lr=function(t,n){var r="".concat(ZJe(t),"Element"),s=function(c){var u=c.id,d=c.className,m=c.options,p=m===void 0?{}:m,h=c.onBlur,g=c.onFocus,y=c.onReady,v=c.onChange,x=c.onEscape,b=c.onClick,_=c.onLoadError,w=c.onLoaderStart,C=c.onNetworksChange,S=c.onConfirm,E=c.onCancel,M=c.onShippingAddressChange,k=c.onShippingRateChange,T=o8("mounts <".concat(r,">")),j="elements"in T?T.elements:null,R="checkoutSdk"in T?T.checkoutSdk:null,O=A.useState(null),P=p2(O,2),N=P[0],I=P[1],D=A.useRef(null),F=A.useRef(null);Wa(N,"blur",h),Wa(N,"focus",g),Wa(N,"escape",x),Wa(N,"click",b),Wa(N,"loaderror",_),Wa(N,"loaderstart",w),Wa(N,"networkschange",C),Wa(N,"confirm",S),Wa(N,"cancel",E),Wa(N,"shippingaddresschange",M),Wa(N,"shippingratechange",k),Wa(N,"change",v);var B;y&&(t==="expressCheckout"?B=y:B=function(){y(N)}),Wa(N,"ready",B),A.useLayoutEffect(function(){if(D.current===null&&F.current!==null&&(j||R)){var $=null;R?$=R.createElement(t,p):j&&($=j.create(t,p)),D.current=$,I($),$&&$.mount(F.current)}},[j,R,p]);var V=nv(p);return A.useEffect(function(){if(D.current){var $=Lfe(p,V,["paymentRequest"]);$&&"update"in D.current&&D.current.update($)}},[p,V]),A.useLayoutEffect(function(){return function(){if(D.current&&typeof D.current.destroy=="function")try{D.current.destroy(),D.current=null}catch{}}},[]),A.createElement("div",{id:u,className:d,ref:F})},a=function(c){o8("mounts <".concat(r,">"));var u=c.id,d=c.className;return A.createElement("div",{id:u,className:d})},o=n?a:s;return o.propTypes={id:Le.string,className:Le.string,onChange:Le.func,onBlur:Le.func,onFocus:Le.func,onReady:Le.func,onEscape:Le.func,onClick:Le.func,onLoadError:Le.func,onLoaderStart:Le.func,onNetworksChange:Le.func,onConfirm:Le.func,onCancel:Le.func,onShippingAddressChange:Le.func,onShippingRateChange:Le.func,options:Le.object},o.displayName=r,o.__elementType=t,o},Dr=typeof window>"u",JJe=A.createContext(null);JJe.displayName="EmbeddedCheckoutProviderContext";var eUt=function(){var t=o8("calls useStripe()"),n=t.stripe;return n};Lr("auBankAccount",Dr);Lr("card",Dr);Lr("cardNumber",Dr);Lr("cardExpiry",Dr);Lr("cardCvc",Dr);Lr("fpxBank",Dr);Lr("iban",Dr);Lr("idealBank",Dr);Lr("p24Bank",Dr);Lr("epsBank",Dr);var tUt=Lr("payment",Dr),nUt=Lr("expressCheckout",Dr);Lr("currencySelector",Dr);Lr("paymentRequestButton",Dr);var rUt=Lr("linkAuthentication",Dr),sUt=Lr("address",Dr);Lr("shippingAddress",Dr);Lr("paymentMethodMessaging",Dr);Lr("affirmMessage",Dr);Lr("afterpayClearpayMessage",Dr);var Wfe="https://js.stripe.com/v3",eet=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var tet=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Wfe,'"]')),n=0;n<t.length;n++){var r=t[n];if(eet.test(r.src))return r}return null},Tq=function(t){var n="",r=document.createElement("script");r.src="".concat(Wfe).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},net=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"5.5.0",startTime:n})},Xg=null,Ab=null,jb=null,ret=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},set=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},aet=function(t){return Xg!==null?Xg:(Xg=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=tet();if(!(s&&t)){if(!s)s=Tq(t);else if(s&&jb!==null&&Ab!==null){var a;s.removeEventListener("load",jb),s.removeEventListener("error",Ab),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=Tq(t)}}jb=set(n,r),Ab=ret(r),s.addEventListener("load",jb),s.addEventListener("error",Ab)}catch(o){r(o);return}}),Xg.catch(function(n){return Xg=null,Promise.reject(n)}))},oet=function(t,n,r){if(t===null)return null;var s=t.apply(void 0,n);return net(s,r),s},Zg,$fe=!1,Hfe=function(){return Zg||(Zg=aet(null).catch(function(t){return Zg=null,Promise.reject(t)}),Zg)};Promise.resolve().then(function(){return Hfe()}).catch(function(e){$fe||console.warn(e)});var aUt=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];$fe=!0;var s=Date.now();return Hfe().then(function(a){return oet(a,n,s)})};const oUt=dt({pro:{defaultMessage:"Enterprise Pro",id:"h/OVAC8xF3"},max:{defaultMessage:"Enterprise Max",id:"tfsuL8YexA"}}),iet=[K({defaultMessage:"Unlimited access to Labs, Research, and Comet Max Assistant",id:"cxCDLl3cHO"}),K({defaultMessage:"Org-wide access to premium security features like data retention settings and usage analytics",id:"YgWIReWPJc"}),K({defaultMessage:"10x more file storage",id:"LgZECYLgEY"}),K({defaultMessage:"Access to our full model suite including o3-pro and Opus 4.1 Thinking",id:"0qp226NKVJ"}),K({defaultMessage:"Enhanced video generation",id:"y2H8HPGbes"}),K({defaultMessage:"Early access to new product features",id:"nFcQ0Wipw7"})],zfe={pro:"pro",max:"max"},iUt=e=>Object.keys(zfe).includes(e),lUt=(e,t)=>{const n=Object.keys(zfe),r=n.indexOf(e),s=n.indexOf(t);return r<s},cet=(e,t)=>{const{value:n,loading:r}=At({flag:"comet-pro-country-allowlist",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},cUt=i.jsx(pe,{defaultMessage:"Start for free, no credit card needed.",id:"uzjbT1FGfk"}),uUt=i.jsx(pe,{defaultMessage:"Upgrade productivity and learning with additional access.",id:"PnQLpmbknU"}),dUt=i.jsx(pe,{defaultMessage:"Unlock the full capabilities of Perplexity at a discount after verifying educational status.",id:"8fdSFzTbg5"}),fUt=i.jsx(pe,{defaultMessage:"Unlock Perplexity's full capabilities with early access to new products.",id:"XvAk63xTH/"}),mUt=i.jsx(pe,{defaultMessage:"Unlock the full capabilities of Perplexity for your team and enjoy new perks as they are added.",id:"fyHXg6ONTT"}),pUt=[i.jsx(pe,{defaultMessage:"Limited file uploads and image generation",id:"Yajq3Us4wf"},"ei4z2Aep9t"),i.jsx(pe,{defaultMessage:"Limited access to Perplexity Research",id:"rxiI86annI"},"Q4n6qAgIjm"),i.jsx(pe,{defaultMessage:"Limited access to advanced AI models",id:"Um2NQaGAN2"},"k+gSVpF51l"),i.jsx(pe,{defaultMessage:"Access to voice mode",id:"yzxI9mX7Ne"},"yzxI9mX7Ne")],uet=i.jsx(pe,{defaultMessage:"Access to Comet, the agentic browser",id:"qcYjBb5TR5"},"qcYjBb5TR5"),h2=[i.jsx(pe,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),i.jsx(pe,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),i.jsx(pe,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),i.jsx(pe,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),i.jsx(pe,{defaultMessage:"Extended access to image generation",id:"YLNO5T8j3R"},"YLNO5T8j3R"),i.jsx(pe,{defaultMessage:"Limited access to video generation",id:"cuh0Xv/sI7"},"cuh0Xv/sI7"),i.jsx(pe,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD")],det=[h2[0],uet,...h2.slice(1)],hUt=()=>{const{variation:e}=cet(!1);return f.useMemo(()=>e?det:h2,[e])},gUt=h2,Gfe=[i.jsx(pe,{defaultMessage:"Unlock free Pro",id:"ce/kjT07p9"},"unlock-free-pro"),i.jsx(pe,{defaultMessage:"Access to Comet, the agentic browser",id:"qcYjBb5TR5"},"access-comet"),i.jsx(pe,{defaultMessage:"Access to Study Mode for interactive flashcards and quizzes",id:"wvFgbv8SQM"},"study-mode"),i.jsx(pe,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),i.jsx(pe,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),i.jsx(pe,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),i.jsx(pe,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),i.jsx(pe,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD"),i.jsx(pe,{defaultMessage:"{credits} in API credits",id:"RDoR9eeHom",values:{credits:i.jsx(TN,{value:5,style:"currency",currency:"USD"})}},"RDoR9eeHom")],yUt=()=>Gfe,vUt=Gfe,xUt=[i.jsx(pe,{defaultMessage:"Everything in Pro",id:"EQO1QOs7ln"},"EQO1QOs7ln"),i.jsx(pe,{defaultMessage:"Early access to Comet, the agentic browser",id:"itbmh6iTsp"},"ju0j9rjkOw"),i.jsx(pe,{defaultMessage:"Unlimited access to Perplexity Labs",id:"Vc+NmvcKpa"},"8jDdpmfeqS"),i.jsx(pe,{defaultMessage:"Unlimited access to Perplexity Research",id:"+tC8PdouYw"},"8jDdpmfeqS"),i.jsx(pe,{defaultMessage:"Use advanced AI models like OpenAI o3-pro and Anthropic Claude Opus 4.1",id:"RrdqLnZKqo"},"RrdqLnZKqo"),i.jsx(pe,{defaultMessage:"Enhanced access to video generation",id:"VSNs3zFEjy"},"VSNs3zFEjy"),i.jsx(pe,{defaultMessage:"Priority support",id:"3sSrKzxPrc"},"3sSrKzxPrc")],bUt=[i.jsx(pe,{defaultMessage:"Unlimited Pro searches",id:"isnJxc1XxM"},"UnlimitedProSearches"),i.jsx(pe,{defaultMessage:"Unlimited uploads for files and images",id:"y5R/L7qsi/"},"UnlimitedUploads"),i.jsx(pe,{defaultMessage:"Unlimited collaborators in Spaces",id:"EZFr73mN/d"},"UnlimitedCollaborators"),i.jsx(pe,{defaultMessage:"Connect Google Drive, Sharepoint, Dropbox, OneDrive, and Box",id:"ALW0u9e/Ps"},"ConnectCloudServices"),i.jsx(pe,{defaultMessage:"Powered by the latest top AI models",id:"ZSiV9iYVeG"},"LatestAIModels"),i.jsx(pe,{defaultMessage:"Dedicated enterprise support",id:"6ojq3KOETz"},"DedicatedSupport"),i.jsx(pe,{defaultMessage:"Integrate with your identity provider",id:"NEWodUzDlf"},"IdentityProvider"),i.jsx(pe,{defaultMessage:"User permissioning",id:"oEuCJfg2fr"},"UserPermissioning"),i.jsx(pe,{defaultMessage:"SOC 2 Type II security compliance",id:"j84mT5pXG7"},"SOC2TypeII")],_Ut=[i.jsx(pe,{defaultMessage:"Everything in Enterprise Pro",id:"agavcX8Joo"},"EverythingInEnterprisePro"),...iet.map(e=>i.jsx(pe,{...e},e.id))],Nq="USD",fet=({lineItems:e})=>{const{$t:t,formatNumber:n}=Q(),r=f.useMemo(()=>{const s=e;return[{title:K({defaultMessage:"Payment method",id:"BVTni9A2ca"}),value:s.payment_method,separator:!0},{title:K({defaultMessage:"Perplexity Max Subscription",id:"zmPIe7d+w+"}),value:s.new_product_price?ym(s.new_product_price,n):""},{title:K({defaultMessage:"Adjustment",id:"LaLTJRqloA"}),value:s.adjustment_price?ym(s.adjustment_price,n):"",separator:!0},{title:K({defaultMessage:"Subtotal",id:"L8seEcJFZ7"}),value:ym(s.subtotal_price,n)},{title:K({defaultMessage:"Taxes",id:"r+dgivP2Od"}),value:ym(s.tax_price,n),separator:!0},{title:K({defaultMessage:"Total due today",id:"MxAykvkF+r"}),value:ym(s.total_due_today_price,n),color:"default",size:"small"}]},[e,n]);return i.jsx("ul",{className:"flex flex-col",children:r.map(s=>i.jsxs("li",{className:`flex items-center justify-between ${s.separator?"border-subtlest py-sm mb-sm border-b":"pb-sm"}`,children:[i.jsx(L,{variant:"tinyRegular",color:"light",children:t(s.title)}),i.jsx(L,{variant:s.size??"tinyRegular",color:s.color??"light",children:s.value})]},s.title.id))})},met=({reason:e})=>{const t=async()=>X$e({reason:e}),{data:n,isLoading:r}=$e({queryKey:["get_user_previous_subscription"],queryFn:t});return f.useMemo(()=>({previousSubscriptionStatus:n?.previous_subscription_status??"none",previousSubscriptionSource:n?.previous_subscription_source??"none",isLoading:r}),[n?.previous_subscription_source,n?.previous_subscription_status,r])},pet=({variant:e="border",fullWidth:t=!1,subscriptionSource:n})=>{const{$t:r}=Q(),s=n==="softbank",a=[{type:"default",text:r({defaultMessage:"SoftBank",id:"mz906WB9pc"}),href:"https://stn.mb.softbank.jp/G4H51",onClick:o=>{o.preventDefault(),window.open("https://stn.mb.softbank.jp/G4H51","_blank")}},{type:"default",text:r({defaultMessage:"Y!mobile",id:"waO5BNtbEl"}),href:"https://stn.mb.softbank.jp/h6C4p",onClick:o=>{o.preventDefault(),window.open("https://stn.mb.softbank.jp/h6C4p","_blank")}},{type:"default",text:r({defaultMessage:"LINEMO",id:"5EeaeTgd/I"}),href:"https://stn.mb.softbank.jp/22m5K",onClick:o=>{o.preventDefault(),window.open("https://stn.mb.softbank.jp/22m5K","_blank")}}];return i.jsx("div",{className:"flex items-center gap-2",children:s?i.jsx(Jt,{items:a,isMobileStyle:!1,placement:"bottom-start",children:i.jsx(ge,{text:r({defaultMessage:"Manage carrier billing",id:"qt9JnrA7Lf"}),size:"small",icon:Qn,variant:e,fullWidth:t})}):i.jsx(ge,{text:r({defaultMessage:"Set up carrier billing",id:"KvLeD+r7rf"}),size:"small",variant:e,fullWidth:t,trailingComponent:i.jsx(me,{icon:no,size:"xs"}),onClick:o=>{o.preventDefault(),window.open("https://stn.mb.softbank.jp/b6O6d","_blank")}})})},het="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",get="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",yet="https://perplexity.sng.link/A6awk/pxdx?_ios_dl=home&_android_dl=singular-perplexity%3A%2F%2Fhome&_smtype=3";function vet(e){switch(e){case"ios":return"https://www.apple.com/app-store/";case"android":return"https://play.google.com/store";default:$t(e)}}const qfe=({text:e,hasPreviousSub:t=!1,origin:n,variant:r="common",fullWidth:s=!1})=>{const a="sub-modal-button",{$t:o,locale:l}=Q(),c=_t(),{hasAccessToProFeatures:u,subscriptionSource:d}=yt(),{revenuecatStatus:m,stripeStatus:p}=Ds({reason:a}),{previousSubscriptionSource:h}=met({reason:a}),{env:{isProduction:g,isBeta:y}}=Et(),{session:v}=Ct(),x=co(),{openModal:b}=vt(),_=f.useCallback(async()=>{if(d==="incentive"){b("incentiveProModal",{origin:n});return}const S=d==="ios"||d==="android",E=h==="ios"||h==="android";if(S||E){E&&h!==d?c.push(vet(h)):c.push(yet);return}if(d==="braintree"){n===Ie.UPGRADE_MODAL?c.push("/max/payment"):b("braintreeSubscriptionModal",{origin:n});return}const k=await kO({locale:l,reason:"sub-modal-button"});k?c.push(k):c.push(g||y?get:het)},[d,h,c,g,y,l,b,n]),w=u||p==="past_due"||t===!0,C=f.useMemo(()=>d==="ios"?o({defaultMessage:"Manage in App Store",id:"3iCRcP8mV0"}):d==="android"?o({defaultMessage:"Manage in Google Play",id:"tiFovnryYO"}):d==="braintree"?n===Ie.UPGRADE_MODAL?o({defaultMessage:"Continue to payment",id:"+g+0OKqjZc"}):o({defaultMessage:"Manage subscription",id:"Oj9Phcvy9M"}):t?o({defaultMessage:"Manage plan",id:"88XpVMnmFe"}):m!=="none"||["ios","android"].includes(h)?o({defaultMessage:"Mobile subscription",id:"EttF2eTvlk"}):o(d==="softbank"?{defaultMessage:"SoftBank, Y!mobile, and LINEMO Customers",id:"i1WJntbsih"}:{defaultMessage:"Manage",id:"0AzlrbMWV9"}),[d,t,m,h,o,n]);return i.jsx("div",{children:w?d==="softbank"?i.jsx(pet,{fullWidth:s,variant:r,subscriptionSource:d}):i.jsx(ge,{fullWidth:s,text:C,size:"small",onClick:_,variant:r,trailingComponent:i.jsx(me,{icon:no,size:"xs"})}):i.jsx(ge,{text:e??o({defaultMessage:"Learn more",id:"TdTXXf940t"}),size:"small",onClick:()=>{v?x({origin:n}):b("loginModal",{origin:Ie.TRY_PRO,pitchMessage:{title:o({defaultMessage:"Sign in to unlock {pro}",id:"HsM7RilrD6"},{pro:"Pro"})}})},icon:no,variant:r})})},xet="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",bet="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",_et=()=>{const e=_t(),{env:{isProduction:t,isBeta:n}}=Et(),r=f.useCallback(async({locale:s,reason:a})=>{const o=await kO({locale:s,reason:a});o?e.push(o):e.push(t||n?bet:xet)},[e,t,n]);return f.useMemo(()=>({navigateToCustomerPortal:r}),[r])};var zs;(function(e){e.UNSUPPORTED="unsupported",e.MISSING_PAYMENT_METHOD="missingPaymentMethod",e.PAYMENT_FAILED="paymentFailed",e.ANDROID="android",e.IOS="ios",e.UPGRADE_TO_CONTINUE="upgradeToContinue",e.GENERIC_PAYMENT_ERROR="genericPaymentError"})(zs||(zs={}));function wet({subscriptionSource:e,isMissingPaymentMethod:t,paymentFailed:n,upgradeError:r}){return e==="android"?zs.ANDROID:e==="ios"?zs.IOS:t?zs.MISSING_PAYMENT_METHOD:n?zs.PAYMENT_FAILED:r?zs.GENERIC_PAYMENT_ERROR:zs.UPGRADE_TO_CONTINUE}function Cet(e){switch(e){case zs.UNSUPPORTED:return K({defaultMessage:"Max subscriptions are not supported by carrier billing.",id:"Ux4ivT++jB"});case zs.MISSING_PAYMENT_METHOD:return K({defaultMessage:"Please add a payment method to upgrade to Max.",id:"W6HVT1BPC8"});case zs.PAYMENT_FAILED:return K({defaultMessage:"Payment failed. Please update payment to continue.",id:"b0rdlbJ3AI"});case zs.ANDROID:return K({defaultMessage:"You subscribed on the Google Play Store. Upgrade your subscription via settings on the Android app.",id:"97MQ1Swe7/"});case zs.IOS:return K({defaultMessage:"You subscribed on the App Store. Upgrade your subscription via settings on the iOS app.",id:"JGkQSWrZEy"});case zs.UPGRADE_TO_CONTINUE:return K({defaultMessage:"You will be charged now and immediately get access to Max.",id:"9x1isMahOJ"});case zs.GENERIC_PAYMENT_ERROR:return K({defaultMessage:"Something went wrong. Please continue to Stripe and complete your payment.",id:"xdKfV2F++4"});default:$t(e)}}const Aq=e=>{if(e){if(e instanceof Ee&&"details"in e){const t=e.details;if(t?.errorDetail&&typeof t.errorDetail=="object"&&"error_code"in t.errorDetail)return t.errorDetail.error_code}return e.message}},jq=6,Eet=()=>i.jsx("ul",{className:"flex flex-col",children:Array.from({length:jq}).map((e,t)=>{const n=t%2===0;return i.jsx("li",{className:U({"border-subtlest py-sm mb-sm border-b":n,"pb-sm":!n}),children:i.jsx(wn,{children:i.jsx(z,{variant:"subtler",className:U("h-4 w-full rounded",{"py-0.5":t===jq-1})})})},t)})}),Met=({isOpen:e,onClose:t})=>{const n=Q(),{session:r}=Ct(),s=r?.user?.subscription_source,a=s==="stripe",{data:o,isLoading:l,status:c,error:u}=hfe({reason:"upgrade-modal",enabled:a}),{data:d,isLoading:m}=n8({currency:Nq,reason:"upgrade-modal",subscriptionTier:"max"}),{data:p,isLoading:h}=n8({currency:Nq,reason:"upgrade-modal",subscriptionTier:"pro"}),{formatNumber:g,locale:y}=Q(),{update:v}=Ct(),{currentOpenModals:x}=vt(),{trackEvent:b}=Me(),{navigateToCustomerPortal:_}=_et(),w=f.useMemo(()=>d?.prices&&d.prices.find(B=>B.tier==="monthly")||null,[d]),C=f.useMemo(()=>p?.prices&&p.prices.find(B=>B.tier==="monthly")||null,[p]),S=f.useMemo(()=>c==="error"?Aq(u):null,[c,u]),E=f.useCallback(async()=>{await MP({reason:"upgrade-to-max-modal"}),await v(),t(),b("subscription upgrade success"),x.length>0&&t(),Ip({upgrade_max:"success"})},[t,x,v,b]),M=yfe({reason:"upgrade-modal"},{onSuccess:E}),k=S==="missing_payment_method",T=S==="stripe_upgrade_payment_error";f.useEffect(()=>{e&&b("subscription upgrade modal rendered")},[e,b]);const j=wet({subscriptionSource:s,isMissingPaymentMethod:k,paymentFailed:T,upgradeError:Aq(M?.error)}),R=f.useCallback(async()=>{await _({locale:y,reason:"upgrade-modal-add-payment"})},[_,y]),O=!!o?.payment_method,P=k||T||!!M.error,N=f.useMemo(()=>!a||M.isPending||!O||l||!!M.error,[a,M.isPending,O,l,M.error]),I=f.useCallback(async()=>{M.isPending||await M.mutateAsync()},[M]),D=f.useMemo(()=>k?i.jsx(pe,{defaultMessage:"Add payment method",id:"+EIsonKmCI"}):M.error?i.jsx(pe,{defaultMessage:"Continue to Stripe",id:"W2hJP+kQGf"}):i.jsx(pe,{defaultMessage:"Update payment method",id:"iIM9E+ynde"}),[k,M.error]);return i.jsx(Xt,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:i.jsxs(z,{className:"p-ml",children:[i.jsx(L,{variant:"baseSemi",children:i.jsx(pe,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),i.jsx(d2,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:c==="error"||!a?C:o?.old_product_price,formatNumber:g,billingInterval:c==="error"||!a?"monthly":o?.old_product_interval}),i.jsx(z,{children:i.jsxs(L,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[i.jsx("div",{className:"border-subtlest flex-1 border-t"}),i.jsx(pe,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"}),i.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),i.jsx(d2,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:k||!a?w:o?.new_product_price,formatNumber:g,billingInterval:k||!a?"monthly":o?.new_product_interval,isHighlighted:!0,className:"mb-ml"}),l?i.jsx(Eet,{}):o&&i.jsx(fet,{lineItems:o}),i.jsxs(z,{variant:"subtler",className:"px-md py-sm mt-ml gap-sm flex flex-col rounded-md",children:[i.jsx(L,{variant:"small",color:"light",children:i.jsx(pe,{...Cet(j)})}),!a&&i.jsx(qfe,{origin:Ie.UPGRADE_MODAL,variant:"primary",fullWidth:!0}),P&&i.jsx(ge,{size:"small",fullWidth:!0,variant:"primary",text:D,onClick:R})]}),i.jsxs(z,{className:"gap-sm mt-ml flex justify-end",children:[i.jsx(Te,{text:n.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),i.jsx(ge,{variant:"primary",text:n.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),isLoading:M.isPending,disabled:N,onClick:I})]})]})})};var ket={};const Fr=A.memo(()=>i.jsx("div",{className:"bg-backdrop/70 fixed inset-0 z-[999] flex items-center justify-center backdrop-blur-sm",children:i.jsx(as,{})}));Fr.displayName="ModalLoader";const Kfe=A.memo(()=>i.jsx("p",{children:"An error has occurred"}));Kfe.displayName="ErrorFallback";const Tet=he(async()=>{const{LocationPermissionModal:e}=await ae(async()=>{const{LocationPermissionModal:t}=await Promise.resolve().then(()=>lAt);return{LocationPermissionModal:t}},void 0);return{default:e}},{loading:()=>i.jsx(Fr,{})}),Rq=he(async()=>{const{FileUploadModal:e}=await ae(async()=>{const{FileUploadModal:t}=await import("./FileUploadModal-DU2WQRnD.js");return{FileUploadModal:t}},__vite__mapDeps([9,3,1,4,10,11,5,6]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Net=he(async()=>{const{CometDownloadInstructionsModal:e}=await ae(async()=>{const{CometDownloadInstructionsModal:t}=await import("./CometDownloadInstructionsModal-Cjt3n7Ii.js");return{CometDownloadInstructionsModal:t}},__vite__mapDeps([12,3,1,4,5,6]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Iq=he(async()=>{const{CollectionCreateEditModal:e}=await ae(async()=>{const{CollectionCreateEditModal:t}=await import("./CollectionCreateEditModal-Bs5ltp3a.js");return{CollectionCreateEditModal:t}},__vite__mapDeps([13,3,1,4,5,14,6]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Aet=he(async()=>{const{CollectionSelectModal:e}=await ae(async()=>{const{CollectionSelectModal:t}=await import("./CollectionSelectModal-3qt70OVa.js");return{CollectionSelectModal:t}},__vite__mapDeps([15,3,1,4,14,5,6]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),jet=he(async()=>{const{OnboardingModal:e}=await ae(async()=>{const{OnboardingModal:t}=await import("./OnboardingModal-ByIPg-GU.js").then(n=>n.a);return{OnboardingModal:t}},__vite__mapDeps([16,3,1,4,6,5,17,18,19,20,21,22,23,24,25,26,27,28,29,30]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Ret=he(async()=>{const{PurchaseConfirmationToast:e}=await ae(async()=>{const{PurchaseConfirmationToast:t}=await import("./PurchaseConfirmationToast-GMe0_Bx_.js");return{PurchaseConfirmationToast:t}},__vite__mapDeps([31,3,1,4,5,6,32]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Iet=he(async()=>{const{ThreadLossAversionModal:e}=await ae(async()=>{const{ThreadLossAversionModal:t}=await Promise.resolve().then(()=>Ett);return{ThreadLossAversionModal:t}},void 0);return{default:e}},{loading:()=>i.jsx(Fr,{})}),Pet=he(async()=>{const{CompanyDataPrivacyModal:e}=await ae(async()=>{const{CompanyDataPrivacyModal:t}=await import("./CompanyDataPrivacyModal-BU7yI58x.js");return{CompanyDataPrivacyModal:t}},__vite__mapDeps([33,3,1,4,6,5]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Oet=he(async()=>{const{SpaceVideoModal:e}=await ae(async()=>{const{SpaceVideoModal:t}=await import("./SpaceVideoModal-56h0d8fN.js");return{SpaceVideoModal:t}},__vite__mapDeps([34,3,1,4,6,5]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Let=he(async()=>{const{PricingTableModal:e}=await ae(async()=>{const{PricingTableModal:t}=await import("./PricingTableModal-DqiiBvha.js");return{PricingTableModal:t}},__vite__mapDeps([35,3,1,6,36,4,20,21,5,27]));return{default:e}}),Det=he(async()=>{const{MapModal:e}=await ae(async()=>{const{MapModal:t}=await import("./MapModal-CCDEVfVm.js");return{MapModal:t}},__vite__mapDeps([37,3,1,38,6,4,5,39]));return{default:e}}),Fet=he(()=>ae(()=>import("./InputPaymentModal-CBGZs_xq.js"),__vite__mapDeps([40,3,1,6,41,4,5]))),Uet=he(()=>ae(()=>import("./ShoppingPaymentModal-BXgfT0aI.js").then(e=>e.b),__vite__mapDeps([42,3,1,4,43,41,44,5,45,46,47,48,49,50,6,51,32])),{loading:()=>i.jsx(Fr,{})}),Bet=he(async()=>{const{ShoppingOnboardingModal:e}=await ae(async()=>{const{ShoppingOnboardingModal:t}=await import("./ShoppingOnboardingModal-DzqhDyAE.js");return{ShoppingOnboardingModal:t}},__vite__mapDeps([52,3,1,4,51,5,42,43,41,44,45,46,47,48,49,50,6,32]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Vet=he(async()=>{const{PurchaseDetailsModal:e}=await ae(async()=>{const{PurchaseDetailsModal:t}=await import("./PurchaseDetailsModal-CX63-Ipy.js");return{PurchaseDetailsModal:t}},__vite__mapDeps([53,3,1,4,51,5,54,6]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Wet=he(async()=>{const{ReservationDetailsModal:e}=await ae(async()=>{const{ReservationDetailsModal:t}=await import("./ReservationDetailsModal-CrR9b3Ny.js");return{ReservationDetailsModal:t}},__vite__mapDeps([55,3,1,4,56,57,5,6]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),$et=he(async()=>{const{SpaceSettingsModal:e}=await ae(async()=>{const{SpaceSettingsModal:t}=await import("./SpaceSettingsModal-BEg3fyjY.js");return{SpaceSettingsModal:t}},__vite__mapDeps([58,3,1,4,6,5]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Het=he(async()=>{const{UsernameModal:e}=await ae(async()=>{const{UsernameModal:t}=await import("./UsernameModal-BKpJgFO-.js");return{UsernameModal:t}},__vite__mapDeps([59,3,1,4,6,5]));return{default:e}}),zet=he(async()=>{const{FullNameModal:e}=await ae(async()=>{const{FullNameModal:t}=await import("./FullNameModal-DLLmOB4h.js");return{FullNameModal:t}},__vite__mapDeps([60,3,1,4,6,5]));return{default:e}}),Get=he(async()=>{const{KeyboardShortcutEditorModal:e}=await ae(async()=>{const{KeyboardShortcutEditorModal:t}=await import("./KeyboardShortcutEditorModal-QHGYoba6.js");return{KeyboardShortcutEditorModal:t}},__vite__mapDeps([61,3,1,4,6,5]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),qet=he(async()=>{const{VoiceToVoiceModal:e}=await ae(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-CuOEL2bt.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([62,3,1,63,4,6,5]));return{default:e}},{loading:()=>i.jsx(gO,{})}),Ket=he(async()=>{const{SearchStepsAssetsModal:e}=await ae(async()=>{const{SearchStepsAssetsModal:t}=await import("./SearchStepsAssetsModal-l_Ie1ivg.js");return{SearchStepsAssetsModal:t}},__vite__mapDeps([64,3,1,4,65,66,17,5,6,18,67]));return{default:e}}),Yet=he(async()=>{const{MemoryListModal:e}=await ae(async()=>{const{MemoryListModal:t}=await import("./MemoryListModal-QAPx6uAZ.js");return{MemoryListModal:t}},__vite__mapDeps([68,3,1,4,69,5,6]));return{default:e}}),Qet=he(async()=>{const{MemoryDetailModal:e}=await ae(async()=>{const{MemoryDetailModal:t}=await import("./MemoryDetailModal-DhQVCS6U.js");return{MemoryDetailModal:t}},__vite__mapDeps([70,3,1,4,6,5]));return{default:e}}),Xet=he(async()=>{const{HotelRoomDetailsModal:e}=await ae(async()=>{const{HotelRoomDetailsModal:t}=await import("./HotelRoomDetailsModal-CxquSgpV.js");return{HotelRoomDetailsModal:t}},__vite__mapDeps([71,3,1,4,72,73,5,6]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Zet=he(async()=>{const{PaymentModal:e}=await ae(async()=>{const{PaymentModal:t}=await import("./PaymentModal-ClOeqcZS.js");return{PaymentModal:t}},__vite__mapDeps([74,3,1,4,21,6,5,46,41]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),Jet=he(async()=>{const{FreeTrialModal:e}=await ae(async()=>{const{FreeTrialModal:t}=await import("./FreeTrialModal-D_Kdmz3t.js");return{FreeTrialModal:t}},__vite__mapDeps([36,3,1,4,20,21,6,5]));return{default:e}}),ett=he(async()=>{const{ProReferralModal:e}=await ae(async()=>{const{ProReferralModal:t}=await import("./ProReferralModal-poeD5Im0.js");return{ProReferralModal:t}},__vite__mapDeps([75,3,1,4,76,5,6]));return{default:e}}),ttt=he(async()=>{const{MeetingDefaultsModal:e}=await ae(async()=>{const{MeetingDefaultsModal:t}=await import("./MeetingDefaultsModal-C8_qnkXr.js");return{MeetingDefaultsModal:t}},__vite__mapDeps([77,3,1,4,5,6]));return{default:e}}),ntt=he(async()=>{const{AvailabilityModal:e}=await ae(async()=>{const{AvailabilityModal:t}=await import("./AvailabilityModal-D4qjy6Rd.js");return{AvailabilityModal:t}},__vite__mapDeps([78,3,1,4,5,79,6]));return{default:e}}),rtt=he(async()=>{const{ProMessageModal:e}=await ae(async()=>{const{ProMessageModal:t}=await import("./ProMessageModal-63BURths.js");return{ProMessageModal:t}},__vite__mapDeps([80,3,1,5,6,4]));return{default:e}}),stt=he(async()=>{const{MemorySearchHistoryIntroModal:e}=await ae(async()=>{const{MemorySearchHistoryIntroModal:t}=await import("./MemorySearchHistoryIntroModal-qYrc1dQr.js");return{MemorySearchHistoryIntroModal:t}},__vite__mapDeps([81,3,1,4,6,5]));return{default:e}}),att=he(async()=>ae(()=>import("./SubSuccessModal-Yo_AMtSj.js"),__vite__mapDeps([82,3,1,4,83,5,6]))),ott=he(async()=>ae(()=>import("./ReferralErrorModal-CoSpU1bk.js"),__vite__mapDeps([84,3,1,4,6,5]))),itt=he(async()=>ae(()=>import("./ReferralSuccessModal-JkKOvVNi.js"),__vite__mapDeps([85,3,1,4,30,6,5]))),ltt=he(async()=>ae(()=>import("./IncentiveProModal-D5hxvr34.js"),__vite__mapDeps([86,3,1,4,6,5]))),ctt=he(async()=>{const{StudentReferralsModal:e}=await ae(async()=>{const{StudentReferralsModal:t}=await import("./StudentReferralsModal-DMTGqx-t.js");return{StudentReferralsModal:t}},__vite__mapDeps([87,3,1,28,4,29,30,5,6]));return{default:e}}),utt=he(async()=>{const{SheerIDModal:e}=await ae(async()=>{const{SheerIDModal:t}=await import("./SheerIDModal-DDKKzPJW.js");return{SheerIDModal:t}},__vite__mapDeps([88,3,1,4,6,5]));return{default:e}}),dtt=he(async()=>ae(()=>import("./BraintreeSubscriptionModal-BXQWgF7a.js"),__vite__mapDeps([89,3,1,4,6,5]))),ftt=he(async()=>{const{RestaurantBookingModal:e}=await ae(async()=>{const{RestaurantBookingModal:t}=await import("./RestaurantBookingModal-eyzYMGpT.js");return{RestaurantBookingModal:t}},__vite__mapDeps([90,3,1,4,76,26,6,5]));return{default:e}},{loading:()=>i.jsx(Fr,{})}),mtt=he(async()=>ae(()=>import("./SheerIdRedirectModal-DkZGfDqm.js"),__vite__mapDeps([91,3,1,4,6,5]))),ptt=he(async()=>{const{EnterprisePremiumSecureUpgradeModal:e}=await ae(async()=>{const{EnterprisePremiumSecureUpgradeModal:t}=await import("./EnterprisePremiumSecureUpgradeModal-CZA-JpUW.js");return{EnterprisePremiumSecureUpgradeModal:t}},__vite__mapDeps([92,3,1,4,93,6,5]));return{default:e}}),htt=he(async()=>{const{ShortcutModal:e}=await ae(async()=>{const{ShortcutModal:t}=await import("./ShortcutModal-BcWtdH_t.js");return{ShortcutModal:t}},__vite__mapDeps([94,3,1,4,6,5]));return{default:e}}),gtt=he(async()=>ae(()=>Promise.resolve().then(()=>o6t),void 0)),ytt=he(async()=>{const{AutomationModal:e}=await ae(async()=>{const{AutomationModal:t}=await Promise.resolve().then(()=>t6t);return{AutomationModal:t}},void 0);return{default:e}}),vtt=he(async()=>{const{FinanceAlertModal:e}=await ae(async()=>{const{FinanceAlertModal:t}=await Promise.resolve().then(()=>r6t);return{FinanceAlertModal:t}},void 0);return{default:e}}),xtt=he(async()=>{const{PlatformOptionsModal:e}=await ae(async()=>{const{PlatformOptionsModal:t}=await import("./PlatformOptionsModal-CzpcP_to.js");return{PlatformOptionsModal:t}},__vite__mapDeps([95,1,3,6,5,4]));return{default:e}}),btt=he(async()=>{const{SharepointSiteModal:e}=await ae(async()=>{const{SharepointSiteModal:t}=await import("./SharepointSiteModal-CMCoyVJL.js");return{SharepointSiteModal:t}},__vite__mapDeps([96,3,1,4,6,5]));return{default:e}}),_tt=he(async()=>{const{MCPServerModal:e}=await ae(async()=>{const{MCPServerModal:t}=await import("./MCPServerModal-v0d5-WHk.js");return{MCPServerModal:t}},__vite__mapDeps([97,3,1,4,5,6]));return{default:e}}),wtt=he(async()=>{const{MemberSetTierModal:e}=await ae(async()=>{const{MemberSetTierModal:t}=await import("./MemberSetTierModal-CGiCCMop.js");return{MemberSetTierModal:t}},__vite__mapDeps([98,3,1,4,83,5,6]));return{default:e}}),Ctt=he(async()=>{const{MCPServiceToolsModal:e}=await ae(async()=>{const{MCPServiceToolsModal:t}=await import("./MCPServiceToolsModal-CJNF0ySh.js");return{MCPServiceToolsModal:t}},__vite__mapDeps([99,3,1,4,5,6]));return{default:e}});function Stt(e){return e?{[e.modalName]:e.arg}:{}}const Yfe=A.memo(({})=>{const{currentOpenModals:e}=vt(),[t,n]=f.useState(e.length);f.useEffect(()=>{setTimeout(()=>{n(e.length)},100)},[e.length]);const r=t!=e.length;return e.map((s,a)=>i.jsx(Qfe,{modal:s,canOutsideClickClose:!r&&a+1==e.length},a))});Yfe.displayName="Modals";const Qfe=A.memo(({modal:e,canOutsideClickClose:t})=>{const n=f.useMemo(()=>({canOutsideClickClose:t}),[t]);return i.jsx(Aoe.Provider,{value:n,children:i.jsx(Xfe,{modal:e})})});Qfe.displayName="SingleModalWrapper";const Xfe=A.memo(({modal:e})=>{const{closeModal:t}=vt(),{hasActiveSubscription:n}=yt(),r=e.modalName,{pricingModal:s,loginModal:a,installModal:o,cometDownloadInstructionsModal:l,requestAccessModal:c,collectionSelectModal:u,collectionCreateOrEdit:d,collectionCreateForThread:m,spaceCreate:p,spaceCreateForThread:h,spaceSettings:g,companyDataPrivacyModal:y,citationListModal:v,checkSourcesModal:x,mapModal:b,inputPaymentModal:_,shoppingPaymentModal:w,purchaseConfirmationModal:C,shoppingOnboardingModal:S,shoppingOrderDetailsModal:E,lossAversionModal:M,spaceVideoModal:k,uploadFilesModal:T,spaceUploadFilesModal:j,spaceContextModal:R,locationPermissionModal:O,watchlistModal:P,reservationDetailsModal:N,deleteMemoryModal:I,memoryDetailModal:D,hotelRoomDetailsModal:F,searchStepsAssetsModal:B,memoryListModal:V,proSubscriptionPaymentModal:$,proMessageModal:G,memorySearchHistoryModal:X,gmailFailedPermissionsModal:Y,subSuccessModal:W,incentiveProModal:H,restaurantBookingModal:Z,sheerIdRedirectModal:re,enterprisePremiumSecureUpgradeModal:q,taskShortcutModal:J,financeAlertModal:te,scheduledTaskModal:se,automationModal:de,referralSuccessModal:fe,sharepointSiteModal:ve,avatarManagementModal:ue,shoppingTryOnOnboardingModal:ie,braintreeSubscriptionModal:be,announcementImageModal:Se,studentReferrals:Ce,sheerIdModal:ke,meetingDefaultsModal:Re,availabilityModal:je,mcpServerModal:ct,mcpServiceToolsModal:tt,memberSetTierModal:ut,connectorsEnableModal:we}=Stt(e),{trackEvent:Ue}=Me();return i.jsxs(i.Fragment,{children:[r==="loginModal"&&a?.origin&&i.jsx(Cue,{pitchMessage:a?.pitchMessage,origin:a.origin,isOpen:r==="loginModal",experimentalImageDesign:a.experimentalImageDesign,sheetModalDesign:a.sheetModalDesign,closeModal:t,closeCallback:a?.closeCallback,overrideRedirectUrl:a?.overrideRedirectUrl,disallowedMethods:a?.disallowedMethods,loginButtonsStyle:a?.loginButtonsStyle}),!ket.NEXT_PUBLIC_IS_SIDECAR_BUILD&&i.jsx(pl,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:r==="installModal"&&o&&i.jsx(rJe,{isOpen:r==="installModal",onClose:()=>{t(),o.closeCallback?.()},origin:o.origin,sheetModalVariant:o.sheetModalVariant})}),r==="cometDownloadInstructionsModal"&&l&&l.requestedPlatform&&i.jsx(Net,{isOpen:r==="cometDownloadInstructionsModal",onClose:t,requestedPlatform:l.requestedPlatform}),r==="pricingModal"&&s&&i.jsx(Let,{isOpen:r==="pricingModal",pitchMessage:s?.pitchMessage,closeModal:t,origin:s.origin,showFreeTier:s.showFreeTier}),r==="collectionSelectModal"&&u?.entryUUID&&i.jsx(Aet,{isOpen:r==="collectionSelectModal",currentCollection:u.currentCollection,entryUUID:u.entryUUID,searchTerm:u.searchTerm,frontendContextUUID:u.frontendContextUUID,closeModal:t}),r==="collectionCreateOrEdit"&&i.jsx(Iq,{isOpen:r==="collectionCreateOrEdit",existingCollection:d?.existingCollection,frontendContextUUID:d?.frontendContextUUID,closeModal:t,onCreate:d?.onCreate}),r==="spaceCreate"&&i.jsx(s8,{isOpen:r==="spaceCreate",closeModal:t,existingCollection:p?.existingCollection,onCreate:p?.onCreate,content:p?.content}),r==="spaceCreateForThread"&&h?.entryUUID&&i.jsx(s8,{isOpen:r==="spaceCreateForThread",closeModal:t,existingCollection:p?.existingCollection,frontendContextUUID:h?.frontendContextUUID,entryUUID:h?.entryUUID,onCreate:h?.onCreate}),r==="spaceSettings"&&i.jsx($et,{isOpen:r==="spaceSettings",existingSpace:g?.existingSpace,closeModal:t}),r==="spaceVideoModal"&&k&&i.jsx(Oet,{isOpen:r==="spaceVideoModal",setIsOpen:t,type:k.type}),r==="uploadFilesModal"&&T&&i.jsx(Rq,{...T,isOpen:r==="uploadFilesModal",closeModal:t}),r==="spaceUploadFilesModal"&&j&&i.jsx(Rq,{...j,connectionTypes:xGe(["LOCAL"]),isOpen:r==="spaceUploadFilesModal",closeModal:t}),r==="spaceContextModal"&&i.jsx(mue,{isOpen:r==="spaceContextModal",closeModal:t,collectionSlug:R?.collectionSlug}),r==="requestAccessModal"&&c?.uuidOrSlug&&i.jsx(Ooe,{isOpen:r==="requestAccessModal",onClose:t,uuidOrSlug:c.uuidOrSlug}),r==="mapModal"&&i.jsx(zr,{fallback:Kfe,children:i.jsx(Det,{isOpen:r==="mapModal",closeModal:t,locations:b&&b.locations,header:b.header,entryUUID:b.entryUUID,searchByLocationOverride:b?.searchByLocationOverride})}),r==="collectionCreateForThread"&&m?.entryUUID&&i.jsx(Iq,{isOpen:r==="collectionCreateForThread",existingCollection:d?.existingCollection,frontendContextUUID:m?.frontendContextUUID,closeModal:t,entryUUID:m?.entryUUID}),r==="inputPaymentModal"&&_&&i.jsx(Fet,{isOpen:r==="inputPaymentModal",closeModal:t,isUpdating:_.isUpdating}),r==="shoppingPaymentModal"&&w&&i.jsx(Uet,{isOpen:r==="shoppingPaymentModal",closeModal:t,product:w.product,onSuccess:w.onSuccess}),r==="companyDataPrivacyModal"&&i.jsx(Pet,{organizationName:y.organizationName,isOpen:r==="companyDataPrivacyModal",closeModal:t,onContinue:y.onContinue}),r==="citationListModal"&&v.webResults&&i.jsx(CO,{isOpen:r==="citationListModal",onClose:t,entry:v.entry,webResults:v.webResults,submit:v.submit}),r==="checkSourcesModal"&&x&&i.jsx(Cde,{isOpen:r==="checkSourcesModal",onClose:t,entryUUID:x.entryUUID,frontendContextUUID:x.frontendContextUUID,contextUUID:x.contextUUID,webResults:x.webResults,extendedBeforeContext:x.extendedBeforeContext,beforeContext:x.beforeContext,selectedText:x.selectedText,afterContext:x.afterContext,state:x?.state}),r==="keyboardShortcutEditorModal"&&i.jsx(Get,{isOpen:r==="keyboardShortcutEditorModal",closeModal:t}),r==="keyboardShortcutHelperModal"&&i.jsx(Qle,{isOpen:r==="keyboardShortcutHelperModal",closeModal:t}),r==="onboardingModal"&&i.jsx(jet,{isOpen:r==="onboardingModal",closeModal:t}),r==="lossAversionModal"&&M&&i.jsx(Iet,{isOpen:r==="lossAversionModal",onClose:()=>{t(),M.callback?.()},origin:M.origin}),r==="shoppingOnboardingModal"&&S&&i.jsx(Bet,{isOpen:r==="shoppingOnboardingModal",onClose:t,onContinue:S.onContinue}),r==="shoppingOrderDetailsModal"&&i.jsx(Vet,{isOpen:r==="shoppingOrderDetailsModal",onClose:t,item:E?.item,userIntercomHash:E?.userIntercomHash}),r==="purchaseConfirmationModal"&&C&&i.jsx(Ret,{isOpen:r==="purchaseConfirmationModal",onClose:t,order:C.order}),r==="watchlistModal"&&P&&i.jsx(SZe,{isOpen:r==="watchlistModal",onClose:t,watchlistType:P.watchlistType,origin:P.origin}),r==="locationPermissionModal"&&O&&i.jsx(Tet,{isOpen:r==="locationPermissionModal",onClose:t,onPermissionGranted:O.onPermissionGranted??Rn,origin:O.origin}),r==="reservationDetailsModal"&&N&&i.jsx(Wet,{isOpen:r==="reservationDetailsModal",onClose:t,reservation:N.reservation,userIntercomHash:N.userIntercomHash}),r==="usernameModal"&&i.jsx(Het,{isOpen:r==="usernameModal",onClose:t}),r==="userFullNameModal"&&i.jsx(zet,{isOpen:r==="userFullNameModal",onClose:t}),r==="deleteMemoryModal"&&i.jsx(VXe,{isOpen:r==="deleteMemoryModal",onClose:t,memoryId:I?.memoryId,onDeleteSuccess:I?.onDeleteSuccess}),r==="deleteAllMemoriesModal"&&i.jsx(BXe,{isOpen:r==="deleteAllMemoriesModal",onClose:t}),r==="voiceToVoiceModal"&&i.jsx(qet,{isOpen:r==="voiceToVoiceModal",onClose:t}),r==="hotelRoomDetailsModal"&&F&&i.jsx(Xet,{isOpen:r==="hotelRoomDetailsModal",onClose:t,...F}),r==="searchStepsAssetsModal"&&B?.backendUUID&&i.jsx(Ket,{isOpen:r==="searchStepsAssetsModal",closeModal:t,...B},`${B.backendUUID}-${B.assetUUID||"default"}`),r==="memoryListModal"&&i.jsx(Yet,{isOpen:r==="memoryListModal",onClose:t,isMemoryEnabled:V?.isMemoryEnabled??!1}),r==="memoryDetailModal"&&D&&i.jsx(Qet,{isOpen:r==="memoryDetailModal",onClose:t,memoryKey:D.memoryKey,displayValue:D.displayValue}),r==="proSubscriptionPaymentModal"&&$&&i.jsx(Zet,{isOpen:r==="proSubscriptionPaymentModal",onClose:t,...$}),r==="proReferralModal"&&i.jsx(ett,{isOpen:r==="proReferralModal",onClose:t}),r==="proMessageModal"&&G&&i.jsx(rtt,{isOpen:r==="proMessageModal",onClose:t,...G}),r==="freeTrialModal"&&i.jsx(Jet,{isOpen:r==="freeTrialModal",onClose:t}),r==="memorySearchHistoryModal"&&i.jsx(Ude,{isOpen:r==="memorySearchHistoryModal",onClose:t,snippet:X?.snippet??"",type:X?.type??"memory",url:X?.url??"",memoryKey:X?.memoryKey,entryUuid:X?.entryUuid,title:X?.title,timestamp:X?.timestamp}),r==="memorySearchHistoryIntroModal"&&i.jsx(stt,{isOpen:r==="memorySearchHistoryIntroModal",onClose:t}),r==="gmailFailedPermissionsModal"&&Y&&i.jsx(UXe,{isOpen:r==="gmailFailedPermissionsModal",onContinue:Y.onContinue??Rn,onClose:t}),r==="subSuccessModal"&&W&&i.jsx(att,{isOpen:r==="subSuccessModal",onClose:t,flowType:W.flowType,upgradeMax:W.upgradeMax,subscriptionTier:W.subscriptionTier,confirmationRedirectsToHomepage:W.confirmationRedirectsToHomepage}),r==="referralErrorModal"&&i.jsx(ott,{isOpen:r==="referralErrorModal",onClose:t}),r==="referralSuccessModal"&&fe&&i.jsx(itt,{isOpen:r==="referralSuccessModal",onClose:t,monthsAwarded:fe.monthsAwarded}),r==="incentiveProModal"&&i.jsx(ltt,{isOpen:r==="incentiveProModal",onClose:t,...H}),r==="braintreeSubscriptionModal"&&be&&i.jsx(dtt,{isOpen:r==="braintreeSubscriptionModal",onClose:t,origin:be.origin}),r==="sheerIdRedirectModal"&&re&&i.jsx(mtt,{isOpen:r==="sheerIdRedirectModal",onContinue:()=>{t(),dl(re.sheerIdUrl,"sheerIdRedirectModal")},onCancel:t}),r==="upgradeModal"&&i.jsx(Met,{isOpen:r==="upgradeModal",onClose:t}),r==="downgradeModal"&&i.jsx(uJe,{isOpen:r==="downgradeModal",onClose:t}),r==="restaurantBookingModal"&&Z&&i.jsx(ftt,{isOpen:r==="restaurantBookingModal",onClose:t,...Z}),r==="bugReportModal"&&i.jsx(Kle,{isOpen:r==="bugReportModal",onClose:t}),r==="enterprisePremiumSecureUpgradeModal"&&i.jsx(ptt,{isOpen:r==="enterprisePremiumSecureUpgradeModal",onClose:t,onUpgradeSuccess:q?.onUpgradeSuccess}),r==="taskShortcutModal"&&J&&i.jsx(htt,{open:r==="taskShortcutModal",onClose:()=>{t(),J.onClose?.()},onCreated:J.onCreated,source:J.source,shortcut:J.shortcut}),r==="financeAlertModal"&&te&&i.jsx(vtt,{isOpen:r==="financeAlertModal",onClose:()=>{t(),te.onClose?.()},symbol:te.symbol,task:te.task}),r==="scheduledTaskModal"&&se&&i.jsx(sf,{children:i.jsx(gtt,{open:r==="scheduledTaskModal",onClose:()=>{t(),se.onClose?.()},onSuccess:se.onSuccess,source:se.source,initial:se.initial,prefill:se.prefill})}),r==="automationModal"&&de&&i.jsx(sf,{children:i.jsx(ytt,{open:r==="automationModal",onClose:()=>{t(),de.onClose?.()},source:de.source,initialConfiguration:de.initial?lie({selectedTask:de.initial}):de.prefill?iie(de.prefill):de.initialConfiguration||z7(n),onSave:Ot=>{de.onSuccess?.(Ot),t(),de.onClose?.()},errorMessage:de.errorMessage,trackEvent:Ue})}),r==="platformOptionsModal"&&i.jsx(xtt,{isOpen:r==="platformOptionsModal",onClose:t}),r==="sharepointSiteModal"&&ve&&i.jsx(btt,{isOpen:r==="sharepointSiteModal",onClose:t,onSelectSite:ve.onSelectSite}),r==="avatarManagementModal"&&ue&&i.jsx(AZe,{isOpen:r==="avatarManagementModal",onClose:t,config:ue??{source:"settings"}}),r==="shoppingTryOnOnboardingModal"&&i.jsx(yde,{isOpen:r==="shoppingTryOnOnboardingModal",onClose:ie?.onClose||t,onSuccessfulOnboarding:ie?.onSuccessfulOnboarding||(()=>{})}),r==="announcementImageModal"&&Se&&i.jsx(rQe,{onClose:t,announcementImageModal:Se}),r==="studentReferrals"&&i.jsx(ctt,{isOpen:r==="studentReferrals",verificationId:Ce?.verificationId}),r==="sheerIdModal"&&i.jsx(utt,{isOpen:r==="sheerIdModal",onClose:()=>{ke?.onClose?.(),t()},onVerificationSuccess:Ot=>{ke?.onSuccess?.(Ot),t()},type:ke?.type||"student"}),r==="meetingDefaultsModal"&&i.jsx(ttt,{currentDuration:Re?.currentDuration,currentBuffer:Re?.currentBuffer,onSave:Re?.onSave}),r==="availabilityModal"&&i.jsx(ntt,{currentAvailability:je?.currentAvailability,onSave:je?.onSave}),r==="mcpServerModal"&&ct&&i.jsx(_tt,{isOpen:r==="mcpServerModal",onClose:t,server:ct.server,onSave:ct.onSave,onDelete:ct.onDelete}),r==="mcpServiceToolsModal"&&tt&&i.jsx(Ctt,{isOpen:r==="mcpServiceToolsModal",onClose:t,server:tt.server,onEditServer:tt.onEditServer,onToggleToolEnabled:tt.onToggleToolEnabled}),r==="memberSetTierModal"&&ut&&i.jsx(wtt,{isOpen:r==="memberSetTierModal",...ut,onClose:()=>{t(),ut.onClose?.()}}),r==="connectorsEnableModal"&&we&&i.jsx(FXe,{connectorName:we.connectorName,connectorAvatar:we.connectorAvatar,showModal:r==="connectorsEnableModal",setShowModal:()=>t(),handleEnable:we.handleEnable})]})});Xfe.displayName="SingleModal";const Zfe=A.memo(e=>{const{$t:t}=Q(),n=f.useMemo(()=>lE(window.location.href,Sl,Ie.LOSS_AVERSION_MODAL),[]),{trackEvent:r}=Me(),[s,a]=f.useState(!1);return f.useEffect(()=>{r("loss aversion modal opened",{origin:e.origin})},[r,e.origin]),i.jsx(Xt,{title:t(s?{defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}:{defaultMessage:"Lose your answer?",id:"BxKmht5dD3"}),actionList:s?void 0:[{text:t({defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}),onClick:()=>{a(!0)},variant:"primary"}],...e,children:i.jsx("div",{className:"grid grid-cols-1 grid-rows-1",children:i.jsx(Uo,{initial:!1,mode:"popLayout",transition:{type:"spring",duration:.2},children:s?i.jsx(so,{transition:{ease:na,duration:.1,delay:.1},children:i.jsxs(xe.div,{className:"relative col-start-1 row-start-1",children:[i.jsx(L,{className:"mb-md",textCenter:!0,children:i.jsx(pe,{defaultMessage:"Log in to save this answer",id:"Ngtk6vEw7T"})}),i.jsx(tv,{redirectUrl:n,showCloseButton:!1})]})},"login"):i.jsx(so,{transition:{ease:na,duration:.1},children:i.jsx(xe.div,{className:"col-start-1 row-start-1",children:i.jsx(L,{children:t({defaultMessage:"To save this answer, sign up or log in.",id:"9Ha7YBI+Yh"})})})},"initial")})})})});Zfe.displayName="ThreadLossAversionModal";const IO=()=>{const e=f.useCallback(r=>{MBe(r)},[]),t=Tn(RA),n=f.useCallback(()=>Hd(RA),[]);return f.useMemo(()=>({lossAversionStatus:t,setLossAversionStatus:e,unsetLossAversion:n}),[t,e,n])},Yh=()=>{const{lossAversionStatus:e,setLossAversionStatus:t}=IO(),n=Nt(),r=Qe(),s=f.useMemo(()=>!r&&e==="allowed"&&n?.startsWith("/search"),[r,e,n]),{openModal:a}=vt(),o=f.useCallback(({args:l,openModalOverride:c})=>{c?c("lossAversionModal",l):a("lossAversionModal",l),t("cooldown")},[a,t]);return f.useMemo(()=>({shouldShowLossAversionModal:s,handleOpenLossAversion:o}),[s,o])},Ett=Object.freeze(Object.defineProperty({__proto__:null,ThreadLossAversionModal:Zfe,useLossAversion:Yh,useLossAversionStorage:IO},Symbol.toStringTag,{value:"Module"})),Jfe=f.createContext({currentOpenModals:[],currentOpenedModal:null,openModal:()=>{},openStackedModal:()=>{},updateModal:()=>{},closeModal:()=>{}}),Mtt=({children:e})=>{const[t,n]=f.useState([]),r=f.useMemo(()=>t.at(-1)?.modalName??null,[t]),{trackEvent:s}=Me(),{device:{isMacOS:a,isWindowsApp:o}}=Et(),{shouldShowLossAversionModal:l,handleOpenLossAversion:c}=Yh(),u=_t(),d=f.useCallback((v,x)=>{n(()=>[{modalName:v,arg:x}])},[]),m=f.useCallback((v,x)=>{n(b=>[...b,{modalName:v,arg:x}])},[]),p=f.useCallback((v,x)=>{n(b=>{const _=b.findLastIndex(w=>w.modalName==v);if(_!=-1){const w=b.slice();return w[_]={modalName:v,arg:x},w}else return b})},[]),h=f.useCallback(()=>{n(v=>v.slice(0,v.length-1))},[]),g=f.useMemo(()=>({currentOpenModals:t,currentOpenedModal:r,openModal:d,openStackedModal:m,updateModal:p,closeModal:h}),[t,d,m,p,h,r]),y=f.useCallback(v=>{if(a?v.metaKey&&v.key==="k":v.ctrlKey&&v.key==="i")v.preventDefault(),l?c({args:{origin:Ie.NEW_THREAD_SHORTCUT,callback:()=>{s("quick ask keyboard shortcut",{}),u.push("/",void 0,"Quick ask keyboard shortcut (loss aversion)")}},openModalOverride:d}):(s("quick ask keyboard shortcut",{}),u.push("/",void 0,"Quick ask keyboard shortcut"));else if(a?v.metaKey&&v.key==="/":v.ctrlKey&&v.key==="/")v.preventDefault(),d(o?"keyboardShortcutEditorModal":"keyboardShortcutHelperModal",null);else if(o&&v.ctrlKey&&v.key==="d"){v.preventDefault();const x=new CustomEvent("toggleDictation");document.dispatchEvent(x)}},[a,o,l,c,d,s,u]);return f.useEffect(()=>(document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}),[y]),i.jsxs(Jfe.Provider,{value:g,children:[e,i.jsx(Yfe,{})]})},vt=()=>{const e=f.useContext(Jfe);if(!e)throw new Error("useModalState must be used within ModalContext");return e};function eme({}){const t=Nt(),n=lO(t),{isMobileUserAgent:r}=ye();return!r&&!n&&!1}const ad=e=>`milestone-progress-dismissed-${e}`,Pq="milestone-success-modal-dismissed",ktt=({reason:e})=>{const[t,n]=f.useState(!1),r=mt(),{keysRequiringRerender:s,removeKeyRequiringRerender:a}=ju(),o=eme({}),{trackEvent:l,trackEventOnce:c}=Me(),{locale:u,$t:d}=Q(),{hasAccessToProFeatures:m}=yt(),{update:p}=Ct(),{openModal:h}=vt(),{data:g}=$e({queryKey:["milestone-progress"],queryFn:()=>ufe({locale:u,reason:e}),enabled:o});f.useEffect(()=>{if(g?.progress_display?.length&&g.progress_display.every(Boolean)&&!m){if(Ae.getItem(Pq))return;h("proMessageModal",{origin:Ie.MILESTONE_ACHIEVED,title:g?.promotion_display.success_modal,buttonText:d({defaultMessage:"Get Started",id:"9QXm1EW9qz"})}),Ae.setItem(Pq,"true"),setTimeout(()=>{p()},1e3)}},[g?.progress_display,g?.promotion_display.success_modal,m,h,p,d]),f.useEffect(()=>{},[s,r,a,o]),f.useEffect(()=>{bs.getItem(ad("session"))||Ae.getItem(ad("lifetime"))||g&&!g.is_eligible&&g.has_incentive},[g,o,c]),f.useEffect(()=>{const v=g?.progress_display.filter(x=>x).length;v&&v>1&&!g.has_incentive&&(bs.removeItem(ad("session")),Ae.removeItem(ad("lifetime")))},[g]);const y=f.useCallback(()=>{if(!g)return;l("milestone progress widget dismissed",{progressCount:g?.progress_display.filter(Boolean).length,requiredCount:g?.progress_display.length,hasIncentive:g?.has_incentive}),n(!1),bs.setItem(ad("session"),"true");const v=g?.progress_display.filter(x=>x).length;v&&v<=1&&Ae.setItem(ad("lifetime"),"true"),g?.has_incentive&&Ae.setItem(ad("lifetime"),"true")},[g,l]);return f.useMemo(()=>({show:t,handleClose:y,data:g}),[g,y,t])},Ttt=A.memo(()=>{const e="floating-milestone-progress",t=Q(),{show:n,handleClose:r,data:s}=ktt({reason:e}),{title:a,description:o}=f.useMemo(()=>s?s.has_incentive?{title:s.promotion_display.title_complete,description:s.promotion_display.description_complete}:s.progress_display.includes(!0)?{title:s.promotion_display.title_progress,description:s.promotion_display.description_progress}:{title:s.promotion_display.title_start,description:s.promotion_display.description_start}:{title:"",description:""},[s]);return!n||!s||!s?.is_eligible?null:i.jsx(z,{variant:"background",className:"animate-in fade-in fixed bottom-[20px] right-[20px] w-[216px] overflow-hidden rounded-lg duration-300 ease-out",children:i.jsxs(z,{variant:"subtler",className:"p-sm border-subtlest inset-0 rounded-lg border",children:[i.jsx("img",{src:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",alt:t.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),className:"bg-offsetPlus size-full rounded-lg object-cover",style:{aspectRatio:"600/350"}}),i.jsx("div",{className:"right-sm top-sm absolute",children:i.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:Lt,extraCSS:"text-light md:hover:text-quiet ",onClick:r})}),i.jsxs("div",{className:"p-xs mt-sm",children:[i.jsx(L,{variant:"baseSemi",children:a}),i.jsx(L,{variant:"small",color:"light",className:"mt-xs",children:o}),i.jsx("div",{className:"mt-xs flex flex-row justify-between",children:s.progress_display.map((l,c)=>i.jsx("div",{className:"gap-xs py-xs flex flex-col items-center",children:l?i.jsx(L,{color:"super",children:i.jsx(me,{size:"lg",icon:_4e})}):i.jsxs(L,{className:"relative",children:[i.jsx(me,{size:"lg",className:"fill-offsetPlus",icon:w4e}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:c+1})]})},c))})]})]})})});Ttt.displayName="FloatingMilestoneProgress";const Oq=e=>`https://plex.it/referrals/${e}`,wUt=({referralLink:e})=>{const[t,n]=f.useState(!1),{trackEvent:r}=Me(),s=f.useCallback(()=>{e&&(navigator.clipboard.writeText(e),r("referral link copied",{referralLink:e}),n(!0),setTimeout(()=>{n(!1)},2e3))},[e,r]),a=f.useCallback(()=>{e&&(navigator.share({url:e,text:"I'm using Perplexity for smarter, faster answers. Sign up using my link and we'll both get 1 month of Pro."}),r("referral link copied",{referralLink:e}))},[e,r]);return f.useMemo(()=>({isCopied:t,handleCopyLink:s,handleNativeShare:a,copyButtonProps:{text:t?"Copied":"Copy link",icon:t?Rr:Mf,onClick:s}}),[t,s,a])},CUt="/static/images/referrals-landing-wide.jpeg",Ntt=(e,t)=>{const n=t?"Get rewards like hoodies, laptops, and more.":"";return e.formatMessage({defaultMessage:"Earn 1 month of Pro for each friend you refer. {prizeText}",id:"vWjWyq4Feg"},{prizeText:n})},Att=({reason:e})=>{const{session:t}=Ct(),n=t?.user?.email??"",{isStudent:r}=cE({email:n??"",reason:e}),{value:s,loading:a}=jr({flag:"spring-2025-referrals-promo",defaultValue:!0});return{isSpringReferralPromoEnabled:!a&&s,isStudent:r}},jtt=()=>{const{value:e}=jr({flag:"student-referral-prizes",defaultValue:!1});return e},tme=({reason:e})=>{const t=dn(),n=ls(),r=Nt(),{isSpringReferralPromoEnabled:s,isStudent:a}=Att({reason:e});return!!(!t.isStudentReferralBannerDismissed&&n&&r==="/"&&s&&a)},nme=A.memo(()=>{const e="floating-referral-invite",t=dn(),n=Q(),[r,s]=f.useState(!1),{referralCode:a}=Ds({reason:e}),o=tme({reason:e}),{trackEvent:l,trackEventOnce:c}=Me(),u=jtt();f.useEffect(()=>{c("referral widget shown",{})},[c]),f.useEffect(()=>{let p;return r&&(l("referral link copied",{referralLink:Oq(a)}),p=setTimeout(()=>{s(!1)},2e3)),()=>{clearTimeout(p)}},[r,a,l]);const d=f.useCallback(()=>{t.actions.setIsStudentReferralBannerDismissed(!0),l("referral widget dismissed",{})},[t.actions,l]),m=f.useCallback(()=>{navigator.clipboard.writeText(Oq(a)),s(!0)},[a]);return a?i.jsx(aae,{shouldShow:!!o,imageSrc:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",imageAlt:n.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),title:n.formatMessage({id:"7vIfWIoBX6",defaultMessage:"Get up to 24 months of free Pro"}),description:Ntt(n,u),primaryAction:i.jsxs("div",{className:"gap-xs flex flex-row",children:[i.jsx(ge,{variant:"common",text:n.formatMessage({id:"TdTXXf940t",defaultMessage:"Learn more"}),href:"/referrals",size:"small"}),i.jsx(ge,{variant:"primaryGhost",icon:r?Yte:Mf,text:r?"Copied":"Copy your link",onClick:m,size:"small"})]}),onDismiss:d,iconXDismiss:!0}):null});nme.displayName="FloatingReferralInvite";const rme=A.memo(({closeCookieConsentPopup:e})=>{const{$t:t}=Q(),{locale:n}=Q(),r=f.useCallback(()=>{Qt(E0,"true",{expires:365}),window.dispatchEvent(new CustomEvent("consentChange",{detail:{consent:"ALLOW"}})),e()},[e]),s=f.useCallback(()=>{Qt(E0,"false",{expires:365}),e()},[e]);return i.jsx(k7,{modal:!1,open:!0,children:i.jsxs(T7,{children:[i.jsxs(YI,{children:[i.jsx(OS,{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})}),i.jsx(N7,{children:i.jsx(pe,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our privacy policy.',id:"VCSjJ9FhMu"})})]}),i.jsx(PS,{children:i.jsxs(z,{id:"cookie-consent",variant:"background",className:"bottom-sm inset-x-sm p-md fixed max-w-md rounded-lg border shadow-sm md:left-auto",children:[i.jsxs(L,{variant:"baseSemi",className:"gap-x-sm flex items-center",children:[i.jsx(me,{icon:C4e,size:"md"}),i.jsx("span",{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})})]}),i.jsx(L,{variant:"small",color:"light",className:"mb-4 text-sm",children:i.jsx(pe,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our <link>privacy policy</link>.',id:"ADl1M4/ost",values:{link:a=>i.jsx(Ye,{href:Hy[n]?.privacyPolicy||Hy.default.privacyPolicy,className:"underline hover:no-underline",target:"_blank",children:a})}})}),i.jsxs(z,{className:"gap-x-sm flex items-center",children:[i.jsx(ge,{size:"small",variant:"primary",onClick:s,text:t({defaultMessage:"Necessary Cookies",id:"Wzr9ADvGqD"})}),i.jsx(ge,{size:"small",onClick:r,text:t({defaultMessage:"Accept All Cookies",id:"JyT5uF/dGC"})})]})]})})]})})});rme.displayName="CookieConsentPopup";function Rtt({reason:e}){const{organization:t}=gn({reason:e}),n=t?.uuid??"",r=Nt(),{value:s}=At({flag:"helper-disabled",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}}),a=r?.startsWith("/apps/"),o=r?.startsWith("/b/zen"),l=r?.startsWith("/b/try-assistant"),c=r?.startsWith("/b/mission-control"),u=r?.startsWith("/spaces/");return s||a||o||l||u||c}const Itt=()=>{const{data:e}=TO(),{trackEvent:t,trackEventOnce:n}=Me(),[r,s]=f.useState(!1);f.useEffect(()=>{e&&e.app_location==="SIDE_CARD"&&(s(!0),n("side upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const a=f.useCallback(()=>{e&&(t("side upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),s(!1),dE(e.name))},[e,t]),o=f.useMemo(()=>e?i.jsx(fE,{upsellInformation:e,textButtonIfSecondary:!0}):null,[e]);return f.useMemo(()=>({show:r&&!!e,title:e?.title,description:e?.description,image:e?.image_asset,button:o,onDismiss:a}),[o,a,r,e])},sme=({userIntercomHash:e,appId:t,data:n,reason:r})=>{const s=!!Fo(),a=Qe(),{session:o}=Ct(),{isPro:l,isMax:c,subscriptionTier:u}=yt(),{orgUser:d,isEnterprise:m}=gn({reason:r}),p=f.useMemo(()=>{const y=s?{comet:!0}:{};return{l2wyozh0:{api_base:"https://api-iam.intercom.io",app_id:"l2wyozh0",name:o?.user?.name,email:o?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:o?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},fl4pfvft:{api_base:"https://api-iam.intercom.io",app_id:"fl4pfvft",name:o?.user?.name,email:o?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:o?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},cajnwzjn:{api_base:"https://api-iam.intercom.io",app_id:"cajnwzjn",name:o?.user?.name,email:o?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:o?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y}}},[o,e,n,s,l,c,m,d?.role,a,u]),h=f.useRef(void 0),g=f.useCallback(async()=>{h.current||(h.current=ae(async()=>{const{show:y,Intercom:v,shutdown:x,update:b}=await import("./index-5FFPV-FM.js").then(_=>_.i);return{show:y,Intercom:v,shutdown:x,update:b}},[]).then(({show:y,Intercom:v,shutdown:x,update:b})=>(v(p[t]),{show:y,update:b,shutdown:x}))),h.current.then(({show:y,update:v})=>{v(p[t]),y()})},[t,p]);return S1(()=>{h.current?.then(({shutdown:y})=>{y()})}),f.useMemo(()=>({show:g}),[g])};sme.displayName="useIntercom";function ame(){const{trackEvent:e}=Me(),{locale:t}=Q(),[n,r]=f.useState(D_.includes(t)?t:pu),s=_Be();return s?D_.includes(s)?n!==s&&r(s):wBe():n!==t&&D_.includes(t)&&r(t),f.useMemo(()=>({locale:n,hasChosenLocale:!!s,saveLocale(a){r(a),bBe(a),e("set locale cookie",{locale:a})}}),[n,s,e])}const Ptt=e=>{};function Ott(e){const{$t:t}=Q(),{onLanguageChange:n=Ptt,button:r}=e,s=_t(),{locale:a,saveLocale:o,hasChosenLocale:l}=ame(),{isMobileStyle:c}=ye(),u=f.useCallback(async h=>{o(h),n(h),await iE(),s.refresh("Interface language select")},[o,n,s]),d=f.useMemo(()=>({text:t({defaultMessage:"Default",id:"lKv8exH0MR"}),value:"default",type:"default",onClick:()=>{o7e(),s.refresh("Interface language reset")}}),[t,s]),m=f.useMemo(()=>[d,...s7e.map(h=>({text:h.label,value:h.locale,type:"default",onClick:()=>{u(h.locale)}}))],[d,u]),p=f.useMemo(()=>l?m.find(h=>h.value===a)?.text:d.text,[m,a,l,d]);return i.jsx(Jt,{isMobileStyle:c,items:m,wrapperClassName:"inline-flex",children:r??i.jsx("div",{className:"w-full md:w-[200px]",children:i.jsx(ge,{size:"small",chevron:!0,chevronIcon:Qn,text:p,layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})})})}async function ome(){const e=await fetch("/api/version",{method:"GET",headers:{"Content-Type":"application/json"}}),{version:t}=await e.json();return t}const Ltt=({hideOnNarrowScreens:e=!1,userIntercomHash:t})=>{const{$t:n}=Q(),{show:r}=sme({appId:"l2wyozh0",userIntercomHash:t,reason:"helper-contact-support"}),{isMobileStyle:s}=ye(),{device:{isWindowsApp:a}}=Et(),{openModal:o}=vt(),{locale:l}=Q(),{trackEvent:c}=Me(),u=wr(),d=Gue(),m=Fo(),p=eS(),{isEnterprise:h}=oP({reason:"helper"}),[g,y]=f.useState(),[v,x]=f.useState(!1);f.useEffect(()=>{p&&async function(){try{y(await ome()??"")}catch{}}()},[p]);const b=l in Hy?Hy[l]:Hy.default,_=f.useMemo(()=>p?[{type:"nested",text:"",label:"Internal (PPLX only)",isSubmenuOpen:v,onSubmenuOpen:()=>x(!0),onSubmenuClose:()=>x(!1),submenu:[{type:"default",text:"",label:g===void 0?"Loading current commit...":"Current commit: "+g,show:!0,href:g&&"https://github.com/ppl-ai/agi/commit/"+g,target:"_blank"},{type:"default",text:"",label:m?`Browser: ${m.browser_version}
Extension: ${m.extension_version}
Agent Extension: ${m.agent_extension_version}`:"Browser info is not defined",show:!!m}]}]:[],[p,g,v,m]),w=f.useMemo(()=>d?"https://www.perplexity.ai/comet/gettingstarted":h?"https://www.perplexity.ai/enterprise/resources":"https://www.perplexity.ai/hub/getting-started#what-is-perplexity",[h,d]),C=f.useMemo(()=>h?"https://www.perplexity.ai/help-center/en/collections/11312901-enterprise-pro":"https://www.perplexity.ai/hub/helpcenter",[h]),S=f.useCallback(()=>{u.showFeedbackForm()},[u]),E=f.useMemo(()=>[{icon:d?ro:Qte,text:n({defaultMessage:"Get started",id:"/aBLH2Kytu"}),show:!0,href:w,target:"_blank",onClick(){c("help menu item clicked",{href:w,isCometHome:d})}},{icon:w0,text:n({defaultMessage:"FAQ",id:"W8nHSdskn0"}),show:d,href:"http://comet-help.perplexity.ai/en",target:"_blank",onClick(){c("help menu item clicked",{href:"http://comet-help.perplexity.ai/en",isCometHome:d})}},{icon:sB,text:n({defaultMessage:"Report an Issue",id:"C8l3hRgoLu"}),show:d,onClick:S},{icon:w0,text:n({defaultMessage:"Help center",id:"BYkLO/XERT"}),show:!d||h,href:C,target:"_blank",onClick(){c("help menu item clicked",{href:C,isCometHome:d})}},{icon:S4e,text:n({defaultMessage:"Changelog",id:"MQcAqlXZ5R"}),show:!d,href:"https://www.perplexity.ai/changelog",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/changelog",isCometHome:d})}},{icon:qC,text:n({defaultMessage:"Blog",id:"tv5FG3fVPd"}),show:!d,href:"/blog",target:"_blank",onClick(){c("help menu item clicked",{href:"/blog",isCometHome:d})}},{icon:j_,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:!a,onClick(){o("keyboardShortcutHelperModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:d})}},{icon:j_,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:a,onClick(){o("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:d})}},{icon:jR,text:n({defaultMessage:"{pplx} {pro}",id:"QDSn6QIReR"},{pplx:"Perplexity",pro:"Pro"}),show:!0,href:"/pro",target:"_blank",onClick(){c("help menu item clicked",{href:"/pro",isCometHome:d})}},{icon:bi,text:n({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),show:!0,href:"https://www.perplexity.ai/enterprise?utm_source=helper",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/enterprise?utm_source=helper",isCometHome:d})}},{icon:xw,text:n({defaultMessage:"Sonar API",id:"m21oy6OJo7"}),show:!0,href:"https://sonar.perplexity.ai/",target:"_blank",onClick(){c("help menu item clicked",{href:"https://sonar.perplexity.ai/",isCometHome:d})}},{icon:E4e,text:n({defaultMessage:"Contact Support",id:"YdQxfwJ5wQ"}),show:!0,onClick(){r()}},{type:"separator",show:!0},{text:"",label:n({defaultMessage:"Careers",id:"yJ1ORHjbX8"}),show:!0,href:"https://www.perplexity.ai/careers",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/careers",isCometHome:d})}},{text:"",label:n({defaultMessage:"Terms of service",id:"FqgDIVw4jF"}),show:!0,href:b.termsOfService,target:"_blank",onClick(){c("help menu item clicked",{href:b.termsOfService,isCometHome:d})}},{text:"",label:n({defaultMessage:"Privacy policy",id:"cPwv2cbzf2"}),show:!0,href:b.privacyPolicy,target:"_blank",onClick(){c("help menu item clicked",{href:b.privacyPolicy,isCometHome:d})}},..._],[d,n,w,S,h,C,a,b.termsOfService,b.privacyPolicy,_,c,o,r]),M=f.useCallback(()=>{o("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal"})},[o,c]),k=f.useCallback(()=>{p&&o("bugReportModal",null)},[o,p]),T=f.useMemo(()=>E.map(j=>({type:"default",...j})),[E]);return i.jsx("div",{className:U("bottom-md right-md m-sm fixed hidden",!e&&"md:block",e&&"lg:block"),children:i.jsxs("div",{className:"gap-sm flex items-center",children:[p&&i.jsx(ge,{toolTip:"Report a bug",ariaLabel:n({defaultMessage:"Internal: Report a bug",id:"mD23B8Qy5J"}),size:"small",pill:!0,variant:"rejecter",icon:sB,onClick:k}),i.jsx("div",{className:"group relative",children:i.jsx(Ott,{button:i.jsx(ge,{toolTip:n({defaultMessage:"Change language",id:"jOuyTp+O9P"}),icon:M4e,ariaLabel:n({defaultMessage:"Language",id:"y1Z3orIe9Z"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle"})})}),a&&i.jsx("div",{className:"hidden lg:block",children:i.jsx(ge,{toolTip:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),ariaLabel:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle",icon:j_,onClick:M})}),i.jsx(Jt,{popoverProps:{childrenClassName:"block"},placement:"top-end",isMobileStyle:s,onOpen:()=>c("help menu opened",{}),items:T,children:i.jsx(ge,{toolTip:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),ariaLabel:n({defaultMessage:"Help menu",id:"HzUkaMxHjy"}),variant:"border",extraCSS:"shadow-subtle ",size:"small",pill:!0,icon:k4e})})]})})},Dtt=()=>bs.getItem("mobilePopupDismissed")!=="true",Ftt=()=>bs.setItem("mobilePopupDismissed","true"),Utt=he(()=>ae(()=>import("./AppDownloadQR-CDgEYZtw.js"),__vite__mapDeps([7,3,1])),{loading:()=>i.jsx(afe,{})}),ime=A.memo(({})=>{const{$t:e}=Q(),[t,n]=f.useState(!1),r=Nt(),{trackEvent:s}=Me(),{keysRequiringRerender:a,removeKeyRequiringRerender:o}=ju(),l=lO(r);if(f.useEffect(()=>{a.includes("floating-mobile-download")&&n(Dtt()&&!l),o("floating-mobile-download")},[a,l,o]),f.useEffect(()=>{t&&s("floating mobile download shown",{})},[t,s]),!t)return null;const c=()=>{n(!1),Ftt(),s("floating mobile download dismissed",{})};return i.jsx(z,{variant:"background",className:"bottom-md right-md p-md animate-in fade-in fixed z-30 hidden w-[350px] rounded-lg border shadow-sm duration-300 ease-out md:block",children:i.jsxs("div",{children:[i.jsx("div",{className:"absolute right-0 top-0",children:i.jsx(Te,{pill:!0,size:"small",icon:Lt,onClick:c})}),i.jsx("div",{className:"pb-md flex justify-center",children:i.jsx("div",{className:"text-super flex justify-center",children:i.jsx(me,{icon:T4e,size:"2xl"})})}),i.jsx(L,{variant:"section-title",className:"text-center",children:e({defaultMessage:"Open on the Perplexity mobile app",id:"QENIXgASKx"})}),i.jsx(L,{className:"text-center",children:e({defaultMessage:"Scan now to install",id:"niKvT5U+3I"})}),i.jsx("div",{className:"mt-sm flex items-center justify-center",children:i.jsx(z,{className:"p-xs rounded-md shadow-md",children:i.jsx(Utt,{})})})]})})});ime.displayName="FloatingAppDownload";function Btt({useCase:e}){return $e({queryKey:["userIntercomHash",e],queryFn:()=>{const t=new URLSearchParams;return t.set("useCase",e),fetch(`/api/intercom?${t.toString()}`).then(n=>n.json())}})}var Lq={};const Vtt=()=>{const e="floating-components",t=Qe(),n=eme({});Xn({enabled:!t});const r=Itt(),{showCookieConsentPopup:s,closeCookieConsentPopup:a}=Ene(),o=Rtt({reason:e}),l=f.useRef(null),{inApp:c}=_l(),u=tme({reason:e}),{currentOpenedModal:d}=vt(),m=Nt(),{data:p}=Btt({useCase:"default"});if(c)return null;if(r.show&&r.title&&r.description&&r.button&&r.onDismiss)return i.jsx(aae,{shouldShow:r.show,imageSrc:r.image,imageAlt:"Side card upsell",title:r.title,description:r.description,primaryAction:r.button,onDismiss:r.onDismiss,iconXDismiss:!0});if(!s&&u)return i.jsx(nme,{});const h=p?.userIntercomHash??null,g=!d&&!t&&!s&&!Lq.NEXT_PUBLIC_IS_SIDECAR_BUILD;return i.jsxs(i.Fragment,{children:[!o&&h&&i.jsx(Ltt,{hideOnNarrowScreens:m?.includes("/search"),userIntercomHash:h}),g&&i.jsx("div",{ref:l,children:i.jsx(pl,{isWindowsApp:!0,isGovernment:!0,children:i.jsx(que,{portalTarget:l.current??void 0},"floating-signup")})}),t&&!Lq.NEXT_PUBLIC_IS_SIDECAR_BUILD&&i.jsx(pl,{isWindowsApp:!0,children:i.jsx(ime,{})}),s&&i.jsx(rme,{closeCookieConsentPopup:a}),t&&n]})},Wtt="pplx.ai",$tt=he(async()=>{const{Analytics:e}=await ae(async()=>{const{Analytics:t}=await import("./index-BHzD4wOK.js");return{Analytics:t}},__vite__mapDeps([100,3,1]));return{default:e}},{prefetch:!1}),Htt="dub_id",ztt="dub_id",Dq=90,Gtt=()=>{const e=Dt();return f.useEffect(()=>{const t=e.get(Htt);t&&Qt(ztt,t,{expires:Dq})},[e]),i.jsx($tt,{domainsConfig:{refer:Wtt},cookieOptions:{expiresInDays:Dq}})},Fq="AW-11209402154",qtt="AW-11209402154/Oz8uCISC_PYZEKrOh-Ep",lme=A.memo(()=>{const{hasConsent:e}=Ene(),n=!!Dt()?.get(Sl),[r,s]=f.useState(!1);return f.useEffect(()=>{if(!r&&e){const a=o=>{if(o.timeRemaining()>0||o.didTimeout){const l=document.createElement("script");l.src=`https://www.googletagmanager.com/gtag/js?id=${Fq}`,l.async=!0,document.head.appendChild(l),l.onload=()=>{window.dataLayer=window.dataLayer||[];function c(...u){window.dataLayer.push(arguments)}c("js",new Date),c("config",Fq),n&&c("event","conversion",{send_to:qtt}),s(!0)}}else window.requestIdleCallback(a)};"requestIdleCallback"in window?window.requestIdleCallback(a,{timeout:5e3}):a({timeRemaining:()=>1/0,didTimeout:!0})}},[e,n,r]),null});lme.displayName="GoogleTagManager";const Ktt=1e3*60,cme=A.memo(()=>(f.useEffect(()=>{To("phone_home");const e=setInterval(()=>To("phone_home"),Ktt);return()=>clearInterval(e)},[]),null));cme.displayName="ET";const ume=f.createContext(null),Ytt=({children:e})=>{const t=f.useRef(null),n=f.useRef(!1),r=Nt(),{device:{isWindowsApp:s}}=Et(),[a,o]=f.useState(!1),l=!!(s&&r?.includes(G0)),c=f.useCallback(async()=>{const h=await HA({ref:t.current});o(h);const g=()=>o(!0),y=()=>o(!1);return vy("show",g,{ref:t.current}),vy("hide",y,{ref:t.current}),()=>{try{t.current&&(zA("show",{ref:t.current}),zA("hide",{ref:t.current}))}catch(v){ee.warn("Error removing window listeners during cleanup",v)}}},[t]),u=f.useCallback(async()=>{if(n.current)return ee.info("Already creating window, skipping"),!1;if(t.current)try{return await HA({ref:t.current}),ee.info("Existing window is still valid, skipping creation"),!0}catch{ee.warn("Existing window reference is invalid, will create new window"),t.current=null}try{ee.info("Starting panel window creation"),n.current=!0;const h=await fqe({width:720,height:350,transparent:!0,show:!1,frame:!1,alwaysOnTop:!0,type:"panel"});if(!h)throw new Error("Failed to create window - no window reference returned");const g=await gqe({ref:h});if(!g)throw new Error("Failed to get web contents");const y=await _qe({webPreferences:{nodeIntegration:!0,contextIsolation:!1}});if(!y)throw new Error("Failed to create view");await mqe({ref:h,viewRef:y});const v=new URL(G0,window.location.origin).toString();await wqe({ref:g},v),t.current=h;const x=await c();if(x){const b=t.current;vy("close",x,{ref:b})}return vy("close",()=>{},{ref:h,preventDefault:!0}),!0}catch(h){return ee.error("Error creating panel window: ",h),t.current=null,!1}finally{n.current=!1}},[c]),d=f.useCallback(async()=>{try{if(!t.current)return ee.info("No panel window to hide"),!1;try{return await hqe({ref:t.current}),!0}catch(h){return ee.warn("Error hiding panel, window may be invalid",h),t.current=null,!1}}catch(h){return ee.warn("Error in hidePanel: ",h),!1}},[]),m=f.useCallback(async()=>{try{if(t.current){if(a){ee.info("Panel window is already visible, skipping centering");return}}else if(!await u())return;const h=await xqe(),g=(await bqe(h)).bounds,[y=0,v]=await pqe({ref:t.current});await yqe({ref:t.current},Math.round(g.x+(g.width-y)/2),Math.round(g.y+g.height*.3)),await ZP({ref:t.current}),await XP({ref:t.current})}catch(h){ee.warn("Error showing panel: ",h)}},[u,a]),p={isVisible:a,isWindowsAppPanelView:l,handleShowPanel:m,handleHidePanel:d,createPanelWindow:u};return i.jsx(ume.Provider,{value:p,children:e})},Af=()=>{const e=f.useContext(ume);if(!e)throw new Error("useWindowsAppPanel must be used within a WindowsAppPanelProvider");return e};var Uq={};const Qtt="pplx.hasUpdated",Xtt=Math.random()*1e3*60*30,Ztt=0,Jtt=1e3*60*30,ent=1e3*60,Bq=1e3*60*60,Vq=1e3*30,dme=A.memo(({version:e})=>{const{session:t}=Ct(),n=t?.user?.email?.endsWith("@perplexity.ai"),r=f.useRef(e),{openToast:s}=xn(),{isWindowsAppPanelView:a}=Af(),{inApp:o}=_l(),{$t:l}=Q(),c=rn(),[u,d]=uO(Qtt,!1),m=f.useRef(!1),p=Uie(),h=f.useRef(Date.now());r.current=e;const g=n?Ztt:Xtt,y=n?ent:Jtt,v=f.useCallback(async()=>{try{if(!m.current){const C=await ome();To("idle_refresh_check_version",{isCometSidecarClient:!!Uq.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:C}),m.current=!!(r.current&&C&&r.current!==C)}if(document.hidden||p()||Date.now()-h.current<Vq)return;m.current&&(!c&&d(!0),await iE(),To("idle_refresh"),hS("Idle refresh"))}catch{ee.log("Error getting build version")}},[c,d,p]),x=f.useMemo(()=>ta(v,g,{maxWait:Bq,leading:!1,trailing:!0}),[v,g]),b=f.useCallback(()=>{m.current?v():x()},[v,x]),_=f.useMemo(()=>ta(b,Vq,{maxWait:Bq,leading:!1,trailing:!0}),[b]),w=f.useCallback(()=>{h.current=Date.now(),_()},[_]);return f.useEffect(()=>{u&&!a&&!o&&(d(!1),s(l({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]),f.useEffect(()=>{const C=Uq.NEXT_PUBLIC_IS_SIDECAR_BUILD?setInterval(b,y):null;return document.addEventListener("visibilitychange",w),window.addEventListener("focus",w),window.addEventListener("keydown",w),window.addEventListener("mousedown",w),()=>{C&&clearInterval(C),document.removeEventListener("visibilitychange",w),window.removeEventListener("focus",w),window.removeEventListener("keydown",w),window.removeEventListener("mousedown",w)}},[b,y,w]),null});dme.displayName="IdleRefresh";const fme=A.memo(function(){const{session:t}=Ct(),n=f.useMemo(()=>{if(t)return{id:t.user.id,name:t.user.name,email:t.user.email,isPro:!!t.user.subscription_status&&t.user.subscription_status!=="none"}},[t]);if(!n)return null;const r=b1(globalThis.navigator?.userAgent??"");return i.jsxs(i.Fragment,{children:[i.jsx(fMe,{session:n,isWindowsApp:r}),i.jsx(mMe,{session:n,isWindowsApp:r})]})});fme.displayName="Instrumentation";async function tnt(){const e=await fetch("https://pplx-next-static-public.perplexity.ai/version/min-version.json",{method:"GET",headers:{"Content-Type":"application/json"}}),{minVersion:t,jitter:n}=await e.json();return{minVersion:t,jitter:n}}var nnt={};const Wq=30,rnt=0,snt=1e3*60*60,Ek=1e3*30,ant="pplx.hasUpdated",mme=A.memo(({minVersion:e})=>{const{session:t}=Ct(),n=t?.user?.email?.endsWith("@perplexity.ai"),r=f.useRef(e),s=f.useRef(0),a=f.useRef(!1),{openToast:o}=xn(),{isWindowsAppPanelView:l}=Af(),{inApp:c}=_l(),{$t:u}=Q(),d=rn(),[m,p]=uO(ant,!1),h=Uie(),{env:{isLocalhost:g}}=Et(),y=f.useRef(Date.now()),v=f.useRef(null);r.current=e;const x=f.useCallback(async()=>{try{if(g)return;if(!a.current){const{minVersion:w,jitter:C}=await tnt();if(To("min_version_refresh_check_version",{isCometSidecarClient:!!nnt.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:w}),s.current=n?rnt:Math.max(C||Wq,Wq),!r.current&&w){r.current=w;return}a.current=!!(w&&r.current&&w>r.current)}if(document.hidden||h()||Date.now()-y.current<Ek)return;a.current&&!v.current&&(v.current=setTimeout(async()=>{if(v.current=null,document.hidden||h()||Date.now()-y.current<Ek){s.current=0;return}!d&&p(!0),await iE(),To("min_version_refresh"),hS("Min version refresh")},Math.random()*s.current*1e3*60))}catch{ee.log("Error getting min version")}},[g,h,d,p,n]);f.useEffect(()=>{m&&!l&&!c&&(p(!1),o(u({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]);const b=f.useMemo(()=>ta(x,Ek,{maxWait:snt,leading:!1,trailing:!0}),[x]),_=f.useCallback(()=>{y.current=Date.now(),b()},[b]);return f.useEffect(()=>(document.addEventListener("visibilitychange",_),window.addEventListener("focus",_),window.addEventListener("keydown",_),window.addEventListener("mousedown",_),()=>{document.removeEventListener("visibilitychange",_),window.removeEventListener("focus",_),window.removeEventListener("keydown",_),window.removeEventListener("mousedown",_)}),[_]),null});mme.displayName="MinVersionRefresh";async function ont(){try{return(await(await fetch("/cdn-cgi/trace")).text()).split(`
`).reduce((n,r)=>{const[s,a]=r.split("=");return n[s]=a??"",n},{loc:"US"})}catch(e){return ee.error("Error getting Cloudflare trace",e),{loc:"US"}}}function jf(){const{data:e}=$e({queryKey:["cloudflare-trace"],queryFn:ont});return f.useMemo(()=>e?.loc??"US",[e])}const int=({children:e,hostname:t})=>{const{session:n}=Ct(),r=jf();return i.jsx(Dze,{hostname:t,session:n??void 0,cfCountry:r,children:e})};class Mk{static cancelOneTap(t=!1){if(typeof window>"u"||!window)return!0;const n=window.location.pathname;return!![{match:"/",condition:()=>t},{match:"/welcome",condition:()=>t},{match:"/search/new"},{match:"/join/",startsWith:!0},{match:"/onboarding",startsWith:!0},{match:"/search/render",startsWith:!0},{match:"/auth/windows-app",startsWith:!0},{match:"/auth/sso",startsWith:!0},{match:"/auth/error",startsWith:!0}].some(({match:s,startsWith:a,condition:o})=>(a?n.startsWith(s):n===s)&&(!o||o()))}static getLoginSource(){if(!window)return Ie.GOOGLE_ONETAP_UNKNOWN;const t=window.location.pathname;return t?t==="/"?Ie.GOOGLE_ONETAP_HOME:t.startsWith("/search/")?Ie.GOOGLE_ONETAP_THREAD:t.startsWith("/page/")?Ie.GOOGLE_ONETAP_PAGE:t.startsWith("/discover")?Ie.GOOGLE_ONETAP_DISCOVER:Ie.GOOGLE_ONETAP_UNKNOWN:Ie.GOOGLE_ONETAP_UNKNOWN}}const $q=500,lnt=4,pme=f.createContext({promptSkipped:!1});function cnt(e){const{children:t}=e,n=f.useRef(0),r=f.useRef(!1),[s,a]=f.useState(!1),o=Qe(),{isMobileUserAgent:l}=ye(),u=Sa().erp,d=f.useCallback(async m=>{if(!m||Mk.cancelOneTap())return;const p=Mk.getLoginSource(),h=typeof window<"u"?new URL(window.location.href):new URL("/","https://www.perplexity.ai"),g=new URLSearchParams({[Sl]:p});h.search=g.toString();const y={credential:m.credential,callbackUrl:h.toString()};await xy("googleonetap",y)},[]);return f.useEffect(()=>{if(typeof window>"u"||o||l||["new_tab","sidecar"].includes(u??""))return;function m(){if(!r.current&&(n.current+=1,!(n.current>lnt))){if(!window.google?.accounts?.id){setTimeout(m,$q);return}r.current=!0,!Mk.cancelOneTap()&&(window.google.accounts.id.initialize({client_id:"60244564555-30175ip7vg79fobh0rk1sur3pdutj9l1.apps.googleusercontent.com",callback:d,auto_select:!0,use_fedcm_for_prompt:!0}),rn()?a(!0):window.google.accounts.id.prompt(h=>{a(h.isSkippedMoment())}))}}const p=setTimeout(m,$q);return()=>{clearTimeout(p)}},[d,l,o,u]),i.jsx(pme.Provider,{value:{promptSkipped:s},children:t})}function unt(){return f.useContext(pme)}const PO=Th("LocalPropsProvider",()=>Po(e=>({tasksModeFocusStepUUID:void 0,actions:{setTasksModeFocusStepUUID:t=>{e({tasksModeFocusStepUUID:t})}}}))),dnt=PO.Provider,fnt=PO.useSelector,mnt=PO.useTrackedState,SUt=()=>fnt(e=>e.actions),EUt=mnt,hme=({reason:e})=>{const{connectors:t}=Ds({reason:e});return f.useMemo(()=>{const n=new Set(t?.connectors?.map(s=>s.name)??[]),r=new Set(t?.connectors?.filter(s=>s.connected===!0)?.map(s=>s.name)??[]);return{isAllowed:s=>n.has(s),isConnected:s=>r.has(s)}},[t])},pnt=e=>e?.length?e.filter(kh):void 0;function gme({reason:e}){const t=Q(),n=_t(),{hasAccessToProFeatures:r}=yt(),{isEnterprise:s,organization:a}=gn({reason:e}),o=UP({reason:e,feature:ru.SOURCES}),l=rn(),{enabledConnectors:c,enabledNonFileConnectors:u,enabledFileConnectors:d}=g1({reason:e}),{sources:m}=Hn(),p=kc(),{isAllowed:h}=hme({reason:e}),[g,y]=f.useState(!1),v=f.useCallback(()=>{y(!0)},[]),x=f.useCallback(()=>{y(!1)},[]),{value:b}=jr({flag:"gcal-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:a?.uuid??""}}),{value:_}=jr({flag:"enable-remote-mcp-tools",defaultValue:!1,extraAttributes:{orgUuid:a?.uuid??""}}),w=_&&r,C=b&&!l,{value:S}=jr({flag:"outlook-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:a?.uuid??""}}),E=f.useCallback(R=>{R.stopPropagation(),n.push(`${p}/files`)},[n,p]),M=f.useMemo(()=>i.jsx("div",{className:"mr-sm flex",children:i.jsx(pn,{tooltipText:t.formatMessage({defaultMessage:"Manage my files",id:"o8eQg7byBv"}),children:i.jsx(L,{color:"light",onClick:E,children:i.jsx(me,{icon:UR,size:"sm"})})})}),[t,E]),k=f.useMemo(()=>{const R=d.map(P=>{const N=P.name,I=ri(N)??"";return i.jsx(Rt,{user:I,rounded:!1,showBackground:!1,size:"small"},N)});let O=null;return R.length>0&&(O=rf(R,{...R.length<=3&&{rightText:i.jsx(L,{color:"light",variant:"tinyRegular",children:t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})})},maxVisuals:R.length,size:"sm"})),{web:{icon:kf,avatar:void 0,text:t.formatMessage({defaultMessage:"Web",id:"B6CB3748fZ"}),description:t.formatMessage({defaultMessage:"Search across the entire Internet",id:"L+Gw+J7uDs"}),type:"toggle"},scholar:{icon:C0,avatar:void 0,text:t.formatMessage({defaultMessage:"Academic",id:"mbxIJyT8C5"}),description:t.formatMessage({defaultMessage:"Search academic papers",id:"IVRQQmrqTD"}),type:"toggle"},...s?{}:{social:{icon:$R,avatar:void 0,text:t.formatMessage({defaultMessage:"Social",id:"qOLogguG/7"}),description:t.formatMessage({defaultMessage:"Discussions and opinions",id:"g9xPuArp4v"}),type:"toggle"}},edgar:{icon:WR,avatar:void 0,text:d7,description:"Search SEC filings",type:"toggle"},...s?{org:{icon:VR,avatar:void 0,text:t.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),description:t.formatMessage({defaultMessage:"Search files from your organization",id:"Ak5CW53mGi"}),type:"toggle"}}:{},...w&&h("linear_alt")?{linear_alt:{icon:void 0,avatar:i.jsx(Rt,{user:Lw,size:"small",rounded:!1,showBackground:!1,altText:kd}),text:kd,description:t.formatMessage({defaultMessage:"Search workspace issues",id:"7GhXgujkn6"}),type:"toggle"}}:{},...w&&h("linear")?{linear:{icon:void 0,avatar:i.jsx(Rt,{user:Lw,size:"small",rounded:!1,showBackground:!1,altText:kd}),text:kd,description:t.formatMessage({defaultMessage:"Search workspace issues",id:"7GhXgujkn6"}),type:"toggle"}}:{},...w&&h("notion_mcp")?{notion_mcp:{icon:void 0,avatar:i.jsx(Rt,{user:TS,size:"small",rounded:!1,showBackground:!1,altText:_p}),text:_p,description:t.formatMessage({defaultMessage:"Search workspace pages",id:"Dfr7kK7JJA"}),type:"toggle"}}:{},...w&&h("slack")?{slack:{icon:void 0,avatar:i.jsx(Rt,{user:Dw,size:"small",rounded:!1,showBackground:!1,altText:B0}),text:B0,description:t.formatMessage({defaultMessage:"Search workspace messages",id:"wc4K5cTYcm"}),type:"toggle"}}:{},...w&&h("github_mcp_direct")?{github_mcp_direct:{icon:void 0,avatar:i.jsx(Rt,{user:m7,size:"small",rounded:!1,showBackground:!1,altText:W0}),text:W0,description:t.formatMessage({defaultMessage:"Search GitHub repositories",id:"PfrUPmxSqk"}),type:"toggle"}}:{},...w&&h("asana_mcp_direct")?{asana_mcp_direct:{icon:void 0,avatar:i.jsx(Rt,{user:Fw,size:"small",rounded:!1,showBackground:!1,altText:$0}),text:$0,description:t.formatMessage({defaultMessage:"Search Asana workspace",id:"nL3T2yHGLc"}),type:"toggle"}}:{},...w&&h("asana_mcp_merge")?{asana_mcp_merge:{icon:void 0,avatar:i.jsx(Rt,{user:Fw,size:"small",rounded:!1,showBackground:!1,altText:H0}),text:H0,description:t.formatMessage({defaultMessage:"Search Asana workspace",id:"nL3T2yHGLc"}),type:"toggle"}}:{},...w&&h("atlassian_mcp_direct")?{atlassian_mcp_direct:{icon:void 0,avatar:i.jsx(Rt,{user:p7,size:"small",rounded:!1,showBackground:!1,altText:z0}),text:z0,description:t.formatMessage({defaultMessage:"Search Atlassian workspace",id:"dgQSAQhgdW"}),type:"toggle"}}:{},...w&&h("slack_direct")?{slack_direct:{icon:void 0,avatar:i.jsx(Rt,{user:Dw,size:"small",rounded:!1,showBackground:!1,altText:V0}),text:V0,description:t.formatMessage({defaultMessage:"Search workspace messages",id:"wc4K5cTYcm"}),type:"toggle"}}:{},...o&&s?{my_files:{icon:BR,avatar:void 0,text:t.formatMessage({defaultMessage:"My files",id:"bYbrKKlKgS"}),description:d.length===0?t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"}):"",bottomElement:O,rightElement:M,type:"toggle"}}:{}}},[d,t,s,w,h,o,M]),T=f.useMemo(()=>({...c?.some(O=>O.name==="crunchbase")?{crunchbase:{icon:void 0,avatar:i.jsx(Rt,{user:bS,rounded:!1,showBackground:!1,size:"small",altText:"Crunchbase"}),text:_S,type:"toggle"}}:{},...c?.some(O=>O.name==="factset")?{factset:{icon:void 0,avatar:i.jsx(Rt,{user:vS,rounded:!1,showBackground:!1,size:"small",altText:"FactSet"}),text:xS,type:"toggle"}}:{},...c?.some(O=>O.connection_type==="GOOGLE_DRIVE")&&o?{google_drive:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.GOOGLE_DRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:xp}),text:xp,type:"toggle"}}:{},...c?.some(O=>O.connection_type==="ONEDRIVE")&&o?{onedrive:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.ONEDRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:hu}),text:hu,type:"toggle"}}:{},...c?.some(O=>O.connection_type==="SHAREPOINT")&&o?{sharepoint:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.SHAREPOINT)||"",rounded:!1,showBackground:!1,size:"small",altText:gu}),text:gu,type:"toggle"}}:{},...c?.some(O=>O.connection_type==="WILEY")&&s?{wiley:{icon:void 0,avatar:i.jsx(Rt,{user:u1,rounded:!1,showBackground:!1,size:"small",altText:"Wiley"}),text:wS,type:"toggle"}}:{},...c?.some(O=>O.connection_type==="DROPBOX")&&o?{dropbox:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.DROPBOX)||"",rounded:!1,showBackground:!1,size:"small",altText:pc}),text:pc,type:"toggle"}}:{},...c?.some(O=>O.connection_type==="GCAL")&&C?{gcal:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.GCAL)||"",rounded:!1,showBackground:!1,size:"small",altText:U0}),text:U0,type:"toggle"}}:{},...c?.some(O=>O.connection_type==="OUTLOOK")&&S?{outlook:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.OUTLOOK)||"",rounded:!1,showBackground:!1,size:"small",altText:wp}),text:wp,type:"toggle"}}:{}}),[c,s,o,C,S]),j=f.useMemo(()=>{const R=u.filter(B=>!(B.connection_type==="OUTLOOK"&&!S||B.connection_type==="GCAL"&&!C)),O=[...new Set(R.map(B=>B.name))],P=O.map(B=>{const V=ri(B)??"";return i.jsx(Rt,{user:V,rounded:!1,showBackground:!1,size:"small"},B)}),I=(m?.filter(B=>R.some(V=>V.name===B))||[]).length>0;let D=null;R.length>0&&(D=rf(P,{rightText:i.jsx(L,{color:"light",variant:"tinyRegular",children:I?t.formatMessage({defaultMessage:"{ num } connected",id:"vKOo9VV7WK"},{num:O.length}):t.formatMessage({defaultMessage:"{ num } available",id:"eEfaubop4a"},{num:O.length})}),maxVisuals:P.length,size:"sm"}));const F=Object.entries(T).filter(([B])=>R.some(V=>V.name===B));return F.length===0?{type:"default",text:t.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),icon:aB,onClick:()=>n.push(`${p}/connectors`),submenuItems:[]}:{type:"nested",isSubmenuOpen:g,onSubmenuOpen:v,onSubmenuClose:x,text:t.formatMessage({defaultMessage:"More connectors",id:"3l4CuVEyHY"}),icon:aB,menuWidth:"300px",bottomElement:D,submenuItems:[...F,{type:"separator"},{type:"default",text:t.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),onClick:()=>n.push(`${p}/connectors`)}]}},[g,t,n,u,T,v,x,p,m,C,S]);return f.useMemo(()=>({RootSources:k,ConnectionSources:T,NestedConnectionSources:j}),[T,j,k])}var Ko={},Hq;function hnt(){if(Hq)return Ko;Hq=1;var e=Ko&&Ko.__awaiter||function(s,a,o,l){function c(u){return u instanceof o?u:new o(function(d){d(u)})}return new(o||(o=Promise))(function(u,d){function m(g){try{h(l.next(g))}catch(y){d(y)}}function p(g){try{h(l.throw(g))}catch(y){d(y)}}function h(g){g.done?u(g.value):c(g.value).then(m,p)}h((l=l.apply(s,a||[])).next())})};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.identify=Ko.subscribe=Ko.publish=void 0;const t=(s,a)=>{window.todesktop.ipc.publish(s,a)};Ko.publish=t;const n=(s,a)=>window.todesktop.ipc.subscribe(s,a);Ko.subscribe=n;const r=()=>e(void 0,void 0,void 0,function*(){return window.todesktop.ipc.identify()});return Ko.identify=r,Ko}var zq=hnt();const ME=()=>{const{device:{isWindowsApp:e}}=Et(),t=f.useRef({}),n=f.useRef({}),r=f.useCallback((a,o)=>{if(e)try{zq.publish(a,o)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c),c.postMessage(o)}else ee.warn("Neither IPC publish nor BroadcastChannel are available in this runtime")}catch(c){ee.warn("Error using BroadcastChannel: ",c)}}},[e]),s=f.useCallback((a,o)=>{if(e)try{return zq.subscribe(a,o)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c);let u=n.current[a];u||(u=new Set,n.current[a]=u);const d=m=>{o(m.data)};return u.add(o),c.addEventListener("message",d),()=>{c.removeEventListener("message",d),u.delete(o),u.size===0&&(c.close(),delete t.current[a],delete n.current[a])}}ee.warn("Neither IPC subscribe nor BroadcastChannel are available in this runtime");return}catch(c){ee.warn("Error using BroadcastChannel: ",c);return}}},[e]);return f.useMemo(()=>({safeWindowsIpcPublish:r,safeWindowsIpcSubscribe:s}),[r,s])};function R1({defaultSource:e,reason:t}){const{sources:n,setSources:r,setRecency:s}=Hn(),a=Dt(),{fileRepoInfo:o}=Do({reason:t}),{RootSources:l,ConnectionSources:c}=gme({reason:t}),{isLoading:u}=gn({reason:t}),{device:{isWindowsApp:d}}=Et(),{safeWindowsIpcPublish:m,safeWindowsIpcSubscribe:p}=ME(),h=o.file_repository_type==="COLLECTION",g=h?`space-${o.owner_id}`:"home",y=xi(),v=Array.isArray(y?.slug)?y.slug[0]:y?.slug,{collection:x,isLoading:b}=kl({collectionSlug:v,reason:t}),_=b?void 0:x?.enable_web_by_default,w=f.useRef(p);f.useEffect(()=>{w.current=p},[p]);const C=f.useRef(Math.random().toString(36).substring(7)),S=f.useCallback(k=>{let T=[];return n?.includes(k)?(T=n.filter(j=>j!==k),k==="web"&&(n.includes("crunchbase")&&(T=n.filter(j=>j!=="crunchbase"&&j!=="web")),s?.(null))):(T=[...n||[]],k==="crunchbase"&&!T.includes("web")&&T.push("web"),T.push(k)),h&&t4(T,g),r(T),d&&m(Hc,{type:Hc,sources:T,windowId:C.current}),T},[h,g,r,s,n,d,m]),E=f.useCallback(k=>{const T=[...k];T.includes("crunchbase")&&!T.includes("web")&&T.push("web"),h&&t4(T,g),r(T),d&&m(Hc,{type:Hc,sources:T,windowId:C.current})},[h,d,g,m,r]);f.useEffect(()=>{if(!d)return;const k=w.current(Hc,T=>{T.type===Hc&&T.windowId!==C.current&&r(T.sources)});return()=>{k?.()}},[d,r,n]);const M=f.useMemo(()=>{if(b)return new Set([]);if(h)return _?new Set(["web"]):new Set([]);if(e)return new Set([e]);const T=(a?.get("sources")??"web").split(",").map(j=>j.trim()).filter(kh);return new Set(T||["web"])},[h,b,_,a,e]);return f.useEffect(()=>{if(u)return;let k=h?IBe(g)||[...M]:[...M];if(h&&_&&!k.includes("web")?k.push("web"):h&&!_&&k.includes("web")&&(k=k.filter(j=>j!=="web")),JSON.stringify(n||[])!==JSON.stringify(k)){const j=k.filter(R=>R in l||R in c);h&&t4(j,g),r(j)}},[u,h,_]),f.useMemo(()=>({DEFAULT_SOURCES:M,isSpace:h,isSpaceEnableWebByDefault:_,updateSources:S,overwriteSources:E}),[M,h,_,E,S])}const gnt=({reason:e})=>{const{safeWindowsIpcPublish:t}=ME(),{actions:n}=dn(),{device:{isWindowsApp:r}}=Et(),s=Qe(),{isPro:a}=yt(),{DEFAULT_SOURCES:o}=R1({reason:e}),l=f.useRef(n),c=f.useRef(t);f.useEffect(()=>{l.current=n,c.current=t},[n,t]);const u=f.useCallback(()=>{dl("/?voice-mode=true","Voice mode")},[]),d=f.useCallback(()=>{dl("/?v2v=true","V2V mode")},[]),m=f.useCallback(g=>{const y=g.searchParams,v=y.get("q"),x=y.get("incognito"),_=(y.get("sources")??"").split(",").map(S=>S.trim()).filter(kh),w=y.get("search_mode"),C=w?kDe[w]:void 0;x!==null&&l.current.setIsIncognito(x==="true"),_&&t(Hc,{type:Hc,sources:_}),C?.model&&C?.mode&&t(km,{type:km,model:C.model,searchMode:C.mode}),v&&c.current(Vae,{query:v,promptSource:"user",querySource:"windows-app-shortcut",incognitoOverride:x,sourcesOverride:_??[]})},[t]),p=f.useCallback(g=>{const y=g.searchParams,v=y.get("type"),x=y.get("callback");if(!v||!x)return;const b=v.split(","),_=new URLSearchParams;b.forEach(C=>{switch(C){case"sources":_.set("sources",Array.from(o).join(","));break;case"search-modes":_.set("search-modes",Object.values(oe).join(","));break;case"sign-in":_.set("sign-in",s?"true":"false");break;case"subscription":_.set("subscription",a?"true":"false");break}});const w=`${x}?${_.toString()}`;window.open(w,"_blank")},[s,a,o]),h=f.useMemo(()=>new Map([["voice-mode",u],["v2v",d],["search",g=>m(g)],["request",g=>p(g)]]),[u,d,m,p]);f.useEffect(()=>{if(!r)return;const g=rqe("openProtocolURL",(v,x)=>{const b=new URL(x.url);for(const[_,w]of h)if(b.toString().includes(_)){x.preventDefault(),w(b);break}}),y=async()=>{await(await g)()};return()=>{y()}},[r,h])},i8="keyboard-shortcuts",ynt=(e,t)=>{const n={[or.NEW_THREAD]:{[Fn.MACOS]:[],[Fn.WINDOWS]:[]},[or.STOP_GENERATING]:{[Fn.MACOS]:[],[Fn.WINDOWS]:[]},[or.TOGGLE_INCOGNITO]:{[Fn.MACOS]:[],[Fn.WINDOWS]:[]},[or.SHOW_SHORTCUTS]:{[Fn.MACOS]:[],[Fn.WINDOWS]:[]},[or.FOCUS_ASK_INPUT]:{[Fn.MACOS]:[],[Fn.WINDOWS]:[]},[or.TOGGLE_DICTATION]:{[Fn.MACOS]:[],[Fn.WINDOWS]:[]},[or.TOGGLE_V2V]:{[Fn.MACOS]:[],[Fn.WINDOWS]:[]}},r=Yle(e,t);[or.NEW_THREAD,or.TOGGLE_V2V].forEach(s=>{const a=r.find(o=>o.type===s);a&&(n[s]={[Fn.MACOS]:a.macos,[Fn.WINDOWS]:a.windows})});try{const s=Ae.getItem(i8);if(s){const a=JSON.parse(s);[or.NEW_THREAD,or.TOGGLE_V2V].forEach(o=>{const l=a.find(c=>c.type===o);l&&(n[o]={[Fn.MACOS]:l.macos,[Fn.WINDOWS]:l.windows})})}}catch(s){ee.warn("Error reading keyboard shortcuts:",s)}return n},vnt=(e,t)=>Po(n=>({globalShortcuts:ynt(e,t),setShortcut:(r,s,a)=>n(o=>{const l={...o.globalShortcuts,[r]:{...o.globalShortcuts[r],[s]:a}};try{const c=Ae.getItem(i8),d=(c?JSON.parse(c):[]).map(m=>m.type===r?{...m,[s]:a}:m);Ae.setItem(i8,JSON.stringify(d))}catch(c){ee.warn("Error saving keyboard shortcuts:",c)}return{globalShortcuts:l}})}));let kk=null;const l8=e=>{const{device:{isWindowsApp:t}}=Et(),n=Q();return kk||(kk=vnt(n,t)),kk(e)},xnt=()=>{const{handleShowPanel:e}=Af(),t=l8(c=>c.setShortcut),{getMainWindowRef:n}=bnt(),r=l8(c=>c.globalShortcuts),s=f.useCallback(async()=>{const c=await n();if(!c)return;await ZP({ref:c}),await XP({ref:c});const u=new CustomEvent("toggleVoiceToVoice");document.dispatchEvent(u)},[n]),a=f.useCallback(async(c,u)=>{try{const d=Array.isArray(c)?c.join("+"):c;let m;switch(u){case or.NEW_THREAD:m=e;break;case or.TOGGLE_V2V:m=s;break;default:return ee.warn(`No handler registered for shortcut type: ${u}`),!1}return d&&d.trim()!==""&&await ck(d),await dqe(d,m),!0}catch(d){return ee.warn("Error registering shortcut:",d),!1}},[e,s]),o=f.useCallback(async(c,u,d)=>{try{const m=c.join("+"),p=u.join("+");if(m===p)return;m&&m.trim()!==""&&await ck(m),await a(p,d)&&t(d,Fn.WINDOWS,u)}catch(m){ee.error("Error updating global shortcut:",m)}},[a,t]),l=f.useCallback(async c=>{const u=c.join("+");u&&u.trim()!==""&&await ck(u)},[]);return f.useMemo(()=>({shortcuts:r,registerShortcut:a,updateGlobalShortcut:o,unregisterShortcut:l}),[a,r,l,o])},yme=f.createContext(null),bnt=()=>{const e=f.useContext(yme);if(!e)throw new Error("useWindowsApp must be used within WindowsAppProvider");return e},_nt=()=>{const e=f.useRef(null);return{getMainWindowRef:f.useCallback(async()=>(e.current||(e.current=(async()=>{let n=await bG({id:"TJmK6yKBLiw389HLDdYy5"});return n||(n=await bG({id:"C195F2RyYDhfB93QW7vui"})),n})()),e.current),[])}},wnt=({children:e,getMainWindowRef:t})=>{const n="windows-app-provider-inner",{device:{isWindowsApp:r}}=Et(),s=Nt(),a=r&&!s?.includes(G0),{submitQuery:o}=Oa(),{isCopilot:l}=Hn(),{createPanelWindow:c,handleHidePanel:u}=Af(),d=Qe(),m=f.useRef(o),p=f.useRef(l),{safeWindowsIpcSubscribe:h}=ME();f.useEffect(()=>{m.current=o},[o]),gnt({reason:n}),f.useEffect(()=>{p.current=l},[l]);const{shortcuts:g,registerShortcut:y,unregisterShortcut:v}=xnt();f.useEffect(()=>{a&&(c(),u())},[a,c,u]);const x=f.useCallback(async b=>{const _=async(E=500)=>{const M=new AbortController,k=setTimeout(()=>M.abort(),E);try{const T=new Promise(j=>{HA().then(R=>{if(R){clearTimeout(k),j(!0);return}vy("show",()=>{clearTimeout(k),j(!0)})})});return await Promise.race([T,new Promise(j=>{M.signal.addEventListener("abort",()=>j(!1))})])}catch(T){return ee.warn("Error ensuring window is ready",{error:T}),!1}finally{clearTimeout(k);try{zA("show")}catch(T){ee.warn("Error removing show listeners during cleanup",T)}}},w=await t();if(await ZP({ref:w}),await XP({ref:w}),!await _())return;const C=b.query.trim();if(!C?.trim())return;const S=ja();m.current({rawQuery:C,copilotOverride:p.current?!0:void 0,attachments:b.attachments,collection:null,newFrontendContextUUID:S,promptSource:b.promptSource??"user",querySource:b.querySource??"home",timeFromFirstType:b.timeFromFirstType,shouldRedirectToBackendUUID:!0})},[t]);return f.useEffect(()=>{if(!a)return;const b=h(Vae,_=>{x(_)});return()=>{b?.()}},[a,x,h]),f.useEffect(()=>{if(!a)return;const b=[or.NEW_THREAD,...d?[or.TOGGLE_V2V]:[]];return b.forEach(_=>{const C=g[_][Fn.WINDOWS].map(mH);y(C,_)}),()=>{b.forEach(_=>{const C=g[_][Fn.WINDOWS].map(mH);v(C)})}},[y,a,g,d,v]),i.jsx(i.Fragment,{children:e})},Cnt=({children:e})=>{const{getMainWindowRef:t}=_nt(),n=f.useMemo(()=>({getMainWindowRef:t}),[t]);return i.jsx(yme.Provider,{value:n,children:i.jsx(Ytt,{children:i.jsx(wnt,{getMainWindowRef:t,children:e})})})};var Snt={};const vme=A.memo(function(){return f.useEffect(()=>{if(Snt.NEXT_PUBLIC_SW_ENABLED_LOCAL){CG();return}const t=Sa();t.env&&t.env!=="local"?CG():Aqe()},[]),null});vme.displayName="ServiceWorker";var Ent={};const Ri=e=>{try{return JSON.parse(e)}catch{return{}}};function Mnt({reason:e}){const t=rn(),n=wr(),r=f.useCallback(async(s,a)=>{if(ee.info("browserStep",s),s.browser_open_tab_content){const o=s.browser_open_tab_content,l=Ri(o.extra_headers);ee.info("browserTool: browser_open_tab",{tool:o},{request_id:l[Cr]}),await mze({url:o.url,cometBrowser:n,stepUuid:s.uuid,extraHeaders:Ri(o.extra_headers),reason:e})}else if(s.search_browser_content){const o=s.search_browser_content,l=Ri(o.extra_headers);ee.info("browserTool: search_browser",{tool:o},{request_id:l[Cr]}),await yze(o,n,s.uuid,l,e)}else if(s.browser_close_tabs_content){const o=s.browser_close_tabs_content,l=o.payload,c=Ri(o.extra_headers);ee.info("browserTool: browser_close_tabs",{tool:o},{request_id:c[Cr]}),await gze(l,n,s.uuid,c,e)}else if(s.browser_group_tabs_content){const o=s.browser_group_tabs_content,l=o.payloads,c=Ri(o.extra_headers);ee.info("browserTool: browser_group_tabs",{tool:o},{request_id:c[Cr]}),await hze(l,n,s.uuid,c,e)}else if(s.entropy_request_content){const o=s.entropy_request_content,l=o.extra_headers;ee.info("browserTool: entropy_request",{tool:o},{request_id:Ri(l)[Cr]}),o.tasks.forEach(c=>n.submitTask({action:"startAgentFromPerplexity",type:"START_AGENT",extra_headers:l,base_url:o.base_url,entryId:a,...c,use_current_page:c.use_current_page&&!!Ent.NEXT_PUBLIC_IS_SIDECAR_BUILD,capture_screenshot:!c.use_current_page,is_mission_control:window.location.pathname.startsWith("/b/mission-control")||o.is_mission_control}))}else if(s.get_url_content_content){const o=s.get_url_content_content,l=Ri(o.extra_headers);if(ee.info("browserTool: get_url_content",{tool:o},{request_id:l[Cr]}),!t)return;const c={...o,key:s.uuid,request_id:l[Cr],pages:[...o.pages||[]]},u=n.GetContent(c);await Qc(u,s.uuid,{request_id:l[Cr]},e)}else if(s.browser_ungroup_content?.payload){const o=s.browser_ungroup_content,l=Ri(o.extra_headers),c={groupIds:o.payload.group_ids,tabIds:o.payload.tab_ids},u=n.ungroupTabs(c,s.uuid,l[Cr]).then(d=>{if(!d.is_success)throw d;return{group_ids:d.groupIds,tab_ids:d.tabIds}});await Qc(u,s.uuid,{request_id:l[Cr]},e)}else if(s.browser_search_tab_groups_content){const o=s.browser_search_tab_groups_content,l=Ri(o.extra_headers),c=n.searchTabGroups(o.payload,s.uuid,l[Cr]).then(u=>{if(!u.is_success)throw u;return{results:u.results.map(d=>({...d,color:Pce(d.color)}))}});await Qc(c,s.uuid,{request_id:l[Cr]},e)}else if(s.browser_get_visible_tab_screenshot_content){const o=s.browser_get_visible_tab_screenshot_content,l=Ri(o.extra_headers),c=n.GetVisibleTabScreenshot({key:s.uuid,request_id:l[Cr],...o}).then(async u=>{const m=await(await fetch(u.data_url)).blob(),p=new File([m],"screenshot."+(o.format??"png"),{type:m.type}),h=await pO({file:p,forceImage:!0,reason:e,fileSource:"entropy"});if(!h||!h?.fields||!h.s3_bucket_url)throw new Error("Failed to create upload URL");const g=new FormData;Object.entries(h.fields).forEach(([x,b])=>{g.append(x,b)}),g.append("file",p);const y=await fetch(h.s3_bucket_url,{method:"POST",body:g});if(!y.ok)throw new Error(`Failed to upload screenshot: ${y.statusText}`);const v=await y.json();if(!v.secure_url)throw ee.error("[GetVisibleTabScreenshot] Upload did not return a secure URL",{response:v}),new Error("Upload did not return a secure URL");return{screenshot_url:v.secure_url}});await Qc(c,s.uuid,{request_id:l[Cr]},e)}else ee.error("[useExecuteBrowserTool] Unknown browser tool step",{browserStep:s},{reason:e,backend_uuid:a})},[n,t,e]);return f.useMemo(()=>({executeBrowserTool:r}),[r])}const xme=A.memo(function(){const{executeBrowserTool:t}=Mnt({reason:"StreamMiddlewares"}),n=f.useCallback(s=>{if(!s||!s.browser_tool)return s;t(s.browser_tool,s.backend_uuid)},[t]),r=f.useMemo(()=>[n],[n]);return i.jsx(Fie,{middlewares:r})});xme.displayName="StreamMiddlewares";const knt=({reason:e})=>{const t=g1({reason:e}),n=kP({reason:e});return f.useMemo(()=>{const r=nB([...t.enabledConnectors,...t.enabledFileConnectors,...t.enabledNonFileConnectors].map(a=>a.name)),s=nB([...n.disabledConnectors,...n.disabledFileConnectors].map(a=>a.name));return{enabled:r,disabled:s}},[t,n])},Tnt=({fileRepoInfo:e,reason:t})=>{const{$t:n}=Q(),r=mt(),s=["list_file_directory",e.file_repository_type,e.owner_id],{openToast:a}=xn(),{session:o}=Ct(),l=o?.user?.email??"",c=bt({mutationFn:async u=>{if(!u.nextURL)throw new Error("File must have a url");const d=await ne.POST("/rest/file-repository/move-attachment-to-persistent-file-path",t,{body:{file_repository_info:e,file_url:u.nextURL},timeoutMs:Kt.MEDIUM,retries:2}),m=d.data;if(m&&await gP({request:{file_repository_info:e,file_index_params:[{file_s3_url:m.file_url_params.s3_object_url,file_size:u.file.size,filename:u.file.name,file_uuid:m.file_url_params.file_uuid,replace_existing:!1}]},reason:t}),!d.response.ok||!d.data)throw new Error("Failed to save file persistently");return d.data},onSuccess:(u,d)=>{const m={name:d.file.name,file_s3_url:u.file_url_params.s3_object_url,file_uuid:u.file_url_params.file_uuid,file_title:d.file.name,file_description:null,uploadedBy:l,date:new Date().toLocaleString(),state:"COMPLETE",size:d.file.size,isOptimistic:!0};r.setQueriesData({queryKey:s},h=>{if(!h)return h;const g=h.completedFiles||[];return{...h,completedFiles:[...g,m]}});const p=sP(e.owner_id,d.file.name);r.invalidateQueries({queryKey:p}),a(n({defaultMessage:"Saved file",id:"2HZW5WnkV3"}),"success",3)},onError:(u,d)=>{a(n({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),ee.error("Error saving file with name",d.file.name,u)},onSettled:async()=>{await r.invalidateQueries({queryKey:s})}});return f.useMemo(()=>({saveFile:c.mutate,isLoading:c.isPending}),[c.isPending,c.mutate])},OO=({fileRepoInfo:e,fileName:t,reason:n})=>{const{session:r}=Ct();return $e({queryKey:sP(e.owner_id,t),refetchOnMount:!0,queryFn:async()=>((await DA({request:{fileRepositoryInfo:e,limit:za,offset:0,searchTerm:t,fileStates:["COMPLETE"],email:r?.user?.email??""},reason:n}))?.files.length??0)>0,enabled:e.file_repository_type==="COLLECTION"&&!!e.owner_id&&t.length>0})},bme=({fileRepoInfo:e,fileExists:t,reason:n})=>{const{openToast:r}=xn(),{session:s}=Ct(),a=f.useMemo(()=>s?.user?.email??"",[s]),o=mt(),{mutate:l}=pce({fileRepoInfo:e,setTotalFilesUploading:()=>1,replaceExisting:t,reason:n}),{mutateAsync:c}=mce({fileRepositoryType:e.file_repository_type,offset:0,searchTerm:"",ownerId:e.owner_id,reason:n}),u=f.useCallback(async(m,p)=>{try{if(!m||!p)return;const h=await mie({thread_uuid:m,format:"md",filename:p,reason:n}),g=atob(h.file_content_64),y=new Array(g.length);for(let _=0;_<g.length;_++)y[_]=g.charCodeAt(_);const v=new Uint8Array(y),x=new Blob([v],{type:"application/md"}),b=new File([x],h.filename,{type:"application/md"});await l([b]),o.setQueryData(["file_exists",e.owner_id,p],!0),t||r("Successfully saved to space","success",3)}catch(h){r(`Failed to save to space: ${h}`,"error",3)}},[l,r,t,e,o,n]),d=f.useCallback(async m=>{try{const h=(await a2({fileRepositoryType:e.file_repository_type,limit:10,offset:0,searchTerm:"",email:a,ownerId:e.owner_id,reason:n}))?.completedFiles.find(g=>g.name.includes(m??""));if(!h?.file_uuid)return;await c([h.file_uuid]),o.setQueryData(["file_exists",e.owner_id,m],!1),r("File removed from space","success",3)}catch(p){r(`Failed to remove from space: ${p}`,"error",3)}},[c,r,o,e.owner_id,a,n,e.file_repository_type]);return f.useMemo(()=>({saveThreadToSpace:u,removeThreadFromSpace:d}),[d,u])},_me=({windowsAppOnly:e=!0}={})=>{const[t,n]=f.useState(()=>globalThis.Notification?globalThis.Notification.permission:"denied"),{device:{isWindowsApp:r}}=Et();f.useEffect(()=>{globalThis.Notification&&globalThis.Notification.permission!==t&&n(globalThis.Notification.permission)},[t]);const s=f.useCallback(async()=>{if(globalThis.Notification){if(t==="granted")return!0;if(t==="denied")return!1;const o=await globalThis.Notification.requestPermission();return n(o),o==="granted"}return!1},[t]),a=f.useCallback(async({title:o,body:l,icon:c="https://r2cdn.perplexity.ai/pplx-desktop-icon.png",onClick:u})=>{if(!(e&&!r||!await s())&&globalThis.Notification){const m=new globalThis.Notification(o,{body:l,icon:c});u&&(m.onclick=()=>{u(),window.focus()})}},[e,r,s]);return f.useMemo(()=>({sendNotification:a,requestPermission:s,permission:t,isWindowsApp:r}),[r,t,s,a])},Y_="v1",Q_="last_results",kE=e=>({backend_uuid:t,thread_url_slug:n})=>t===e||n===e,TE=()=>{const e=Ae.getItem(Q_);let t={version:Y_,results:le};try{e&&(t=JSON.parse(e),t.version!==Y_&&(Ae.removeItem(Q_),t={version:Y_,results:[]}))}catch{Ae.removeItem(Q_)}return t.results},rv=e=>Ae.setItem(Q_,JSON.stringify({version:Y_,results:e})),wme=e=>{const t=kE(e.backend_uuid),r=TE().slice(-49).filter(s=>!t(s));r.push(e),rv(r)||rv([e])},LO=WFe,Cme=LO*10,Nnt=Cme*10+LO,sv="all_results",Ant=({slugOrUUID:e,enabled:t,reason:n})=>{const r=mt(),s=f.useCallback(async(a,o)=>{const l=await pPe({slugOrUUID:a,options:{withParentInfo:!0,supportedBlockUseCases:[...Wae],limit:o?Cme:LO,fromFirst:!0,cursor:o},numRetries:Sc,reason:n});if(!l?.entries?.length||l.status!=="success")return[];const c=[sv,a];r.setQueryData(c,d=>{const m=l.entries,p=new Set(d?.map(g=>g.backend_uuid)),h=m.filter(g=>!p?.has(g.backend_uuid));return[...d??[],...h]});const u=r.getQueryData(c)??[];return l.next_cursor&&u.length<Nnt&&s(a,l.next_cursor),u},[n,r]);return $e({queryKey:[sv,e],enabled:!!e&&t,retry:!1,queryFn:async({queryKey:a})=>await s(a[1]??"")})},jnt=()=>{const e=mt();return f.useCallback(t=>{if(!ea(t))return;const n=t[0],r=n.thread_url_slug??n.backend_uuid;wme(n),e.setQueryData([sv,r],t)},[e])},Rnt=()=>{const e=mt();return f.useCallback(t=>{if(t){const n=kE(t),r=TE();if(r.find(n)){const s=r.filter(a=>!n(a));rv(s)}e.removeQueries({queryKey:[sv,t],exact:!0})}else rv(le),e.removeQueries({queryKey:[sv]})},[e])};function Int({reason:e}){const{setIsCopilot:t,gpt4Limit:n,setGPT4Limit:r,pplxAlphaLimit:s,setPplxAlphaLimit:a,pplxBetaLimit:o,setPplxBetaLimit:l,setAskInputReasoningMode:c}=Hn(),{trackEvent:u}=Me(),d=f.useCallback(async()=>{try{const p=(await ne.GET("/rest/rate-limit/all",e)).data;if(!p)throw new Error("No data returned from rate limit check");const h=p.remaining_pro??0,g=p.remaining_research??0,y=p.remaining_labs??0;n>0&&p.remaining_pro!==null&&h<=0&&u("pro rate limit reached",{}),s>0&&p.remaining_research!==null&&g<=0&&u("pplx alpha rate limit reached",{}),o>0&&p.remaining_labs!==null&&y<=0&&u("pplx beta rate limit reached",{}),r(h),a(g),l(y),h<=0&&(c(!1),t(!1))}catch(m){ee.error("Failed to check rate limit",m)}},[n,r,s,a,o,l,c,t,u,e]);return f.useCallback(()=>{d()},[d])}const Pnt=(e,t)=>{const{value:n,loading:r}=Tc({flag:"sapi-ranking-navigate",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Ont=async({query:e,userIdentity:t,queryClient:n,reason:r,sapiSearchNavigateConfig:s})=>{try{const a=s?[`sapi-ranking-navigate-cfg=${JSON.stringify(s)}`]:[],c=(await(await pMe({resource:"https://suggest.perplexity.ai/search/v2/navigate",method:"POST",options:{headers:{"content-type":"application/json","X-Client-Name":"agi_ui_navigate_v2","X-Client-Env":"production"}},body:JSON.stringify({query:e,user_identity:{lang:t.lang,country:t.country,ab_active_tests:a}}),timeoutMs:1e3,reason:r})).json())?.hit;c&&n.setQueryData(["navigationResults",e],c)}catch(a){ee.error("Failed to fetch navigational search results:",a)}},Lnt=35,Dnt=()=>{const e=mt(),t=jf(),{variation:n,loading:r}=Pnt({});return f.useCallback(({query:s,params:a,reason:o})=>{const l=s.length<=Lnt,c=!!a.last_backend_uuid,u=a.attachments,d=a.sources,m=a.model_preference==="pplx_study";if(l&&!c&&u.length===0&&d&&d.length>0&&!m){const h={lang:a.language,country:t};Ont({query:s,userIdentity:h,queryClient:e,reason:o,sapiSearchNavigateConfig:r?void 0:n})}},[e,t,n,r])};function Fnt({lastResponse:e,backend_uuid:t,trackEvent:n,notificationText:r,sendNotification:s,cometAdapter:a,isMissionControl:o}){if(!t)return ee.error(new Error("No backend_uuid found in response")),!1;if(!e)return ee.error(new Error("No last response found in query client")),!1;(Er(e.display_model)===oe.RESEARCH||Er(e.display_model)===oe.STUDIO)&&r&&s&&document.visibilityState!=="visible"&&s({title:r,body:e.query_str,onClick:()=>{window.focus()}}),e.blocks.filter(c=>c.intended_usage?.endsWith("_markdown")).forEach(c=>{c.markdown_block?.media_items&&n&&c.markdown_block?.media_items.forEach(u=>{n("inline image rendered",{image_url:u.image,entryUUID:t})})});const l=e.blocks.find(c=>c.intended_usage==="knowledge_cards")?.knowledge_card_block?.knowledge_cards?.[0];return l&&n&&n("knowledge card in results",{entryUUID:t,name:l.title,id:l.id,type:l.card_type}),a?.setTabProgress(!1),o||a?.showNotification(),!0}const DO="pplx.activeQuery";function Sme(){const e=bs.getItem(DO);if(!e)return{};try{return JSON.parse(e)}catch{return{}}}function Unt(e){bs.setItem(DO,JSON.stringify(e))}function Bnt(){bs.removeItem(DO)}const Eme=Th("QueryInputState",()=>Po(e=>({userInput:"",userInputJson:void 0,hasStartedTyping:!1,shouldTriggerFocus:!1,actions:{restoreInput:()=>{const t=Sme();t.rawQuery&&e({userInput:t.rawQuery,userInputJson:t.rawQueryJson})},setUserInput:(t,n)=>{e({userInput:t,userInputJson:n}),Unt({rawQuery:t,rawQueryJson:n})},setHasStartedTyping:t=>e({hasStartedTyping:t}),setStartTypingTime:t=>e({startTypingTime:t}),resetInput:()=>{e({userInput:"",userInputJson:void 0}),Bnt()},markInputAsSubmitted:()=>{e({userInput:"",userInputJson:void 0,startTypingTime:void 0})},setShouldTriggerFocus:t=>{e({shouldTriggerFocus:t})}}}))),Vnt=Eme.Provider,Qh=Eme.useSelector,Mme=A.memo(()=>{const{setUserInput:e,resetInput:t}=I1(),n=Nt(),r=Ah(n);return f.useLayoutEffect(()=>{const s=Sme();s.rawQuery&&e(s.rawQuery,s.rawQueryJson)},[e]),f.useLayoutEffect(()=>{!r||r===n||r==="/"&&n?.startsWith("/search/new")||r.startsWith("/search/new")&&n?.startsWith("/search")||t()},[n,r,t]),null});Mme.displayName="QueryInputSideEffects";const FO=()=>Qh(e=>e.userInput),Wnt=()=>Qh(e=>e.userInputJson),kme=()=>Qh(e=>e.hasStartedTyping),$nt=()=>Qh(e=>e.startTypingTime),Hnt=()=>Qh(e=>e.shouldTriggerFocus),I1=()=>Qh(e=>e.actions);class Tme extends Bv{name="PplxStreamError"}const Nme=A.memo(function(){const t="stream-side-effects",n=_t(),r=rn(),{session:s}=Ct(),{trackEvent:a}=Me(),{$t:o}=Q(),l=b1(globalThis.navigator?.userAgent),{sendNotification:c}=_me({windowsAppOnly:!1}),u=Iue(),d=Dnt(),{addKeyRequiringRerender:m}=ju(),p=Sa(),h=wr(),g=Rce(),y=typeof window<"u"&&window.location.pathname.startsWith("/b/mission-control"),{fileRepoInfo:v}=Do({reason:t}),{firstResult:{thread_url_slug:x}={}}=Ht(),{data:b}=OO({fileRepoInfo:v,fileName:x??"",reason:t}),{saveThreadToSpace:_}=bme({fileRepoInfo:v,fileExists:b??!0,reason:t}),w=jnt(),{resetInput:C,restoreInput:S}=I1(),E=FO(),M=f.useRef(E);M.current=E;const k=knt({reason:t}),T=mt(),j=Int({reason:t}),{updateLocalStatePostStream:R}=Oa();return f.useLayoutEffect(()=>Yr.on("created",async({stream:O,query:P,params:N})=>{if(O.isReconnect||!P||!N)return;const I=Fo(),D=l?$m:p.erp??void 0;Z7e(O.id,{name:"perplexity_ask",queryStr:P,queryParams:N,isFollowup:MA(N)&&(N.query_source==="followup"||N.query_source==="followup-sidecar"),isPerplexityBrowser:r,frontendUUID:N.frontend_uuid??"",session:s,browserVersion:I?.browser_version,source:D,connectors:k,mentions:"mentions"in N?N.mentions:[]}),h?.setTabProgress(!0),g&&h.sendThreadStatusToMobile({status:"working",streamId:O.id.description})}),[r,l,s,k,p.erp,h,g]),f.useLayoutEffect(()=>Yr.on("progress",({stream:O,message:P})=>{const{blocks:N,status:I}=P,D=N?.some(V=>!!V?.markdown_block?.chunks?.length),F=N?.some(V=>!!V?.web_result_block?.web_results?.length),B=N?.some(V=>!!V?.sources_mode_block?.rows?.length);if(D&&O.timer.addTimingOnce("web.frontend.first_llm_token_seen"),F&&O.timer.addTimingOnce("web.frontend.first_search_results_seen"),B&&O.timer.addTimingOnce("web.frontend.first_sources_seen"),P.telemetry_data){const{has_displayed_search_results:V,has_first_output_token:$,has_first_token:G,has_widget_data:X,country:Y,is_followup:W,source:H,engine_mode:Z,search_implementation_mode:re,has_useful_renderable_content:q}=P.telemetry_data,J={country:Y,is_followup:W,source:H,engine_mode:Z,search_implementation_mode:re};V&&O.timer.addTimingOnce("web.frontend.first_search_results_latency_ms",J),$&&O.timer.addTimingOnce("web.frontend.first_output_token_latency_ms",J),G&&O.timer.addTimingOnce("web.frontend.first_token_latency_ms",J),X&&O.timer.addTimingOnce("web.frontend.first_widget_data_latency_ms",J),q&&O.timer.addTimingOnce("web.frontend.first_useful_renderable_content_latency_ms",J)}$7e(O.id,{hasLLMToken:D,hasSearchResults:F,hasSources:B},s??void 0),I===cr.FAILED&&ee.error(new Tme("STREAM_FAILED_CHUNK_ERROR"),{message:P})}),[s]),f.useLayoutEffect(()=>Yr.on("progress",({stream:O,isFirstMessage:P})=>{P&&O.placeholderChunk&&O.placeholderChunk.query_source&&!M.current&&C()}),[C]),f.useLayoutEffect(()=>Yr.on("completed",({stream:O})=>{const P=Sa(),N=l?$m:P.erp??void 0;t$(O.id,{name:"SUCCESSFUL response",session:s,source:N})}),[s,l]),f.useLayoutEffect(()=>Yr.on("completed",({stream:O,thread:P})=>{if(!O.threadId||!O.entryId)return;w(P);const N=P?.find(D=>D?.uuid===O.id.description||D?.backend_uuid===O.entryId);let I;Er(N?.display_model)===oe.RESEARCH?I=o({defaultMessage:"Your report is ready",id:"CEIDgftq5U"}):Er(N?.display_model)===oe.STUDIO&&(I=o({defaultMessage:"Your project is ready",id:"UXOU5ST+Nc"})),Fnt({lastResponse:N,backend_uuid:O.entryId,trackEvent:a,sendNotification:c,notificationText:I,cometAdapter:h,isMissionControl:y})}),[o,a,c,w,h,y]),f.useLayoutEffect(()=>Yr.on("completed",async({stream:O})=>{!x||!O.entryId||b&&await _(O.entryId,x)}),[b,_,x]),f.useLayoutEffect(()=>{const O=({stream:I})=>{const{id:D}=I,F=Sa(),B=l?$m:F.erp??void 0,G=new URL(window.location.href).pathname.replace("/search/new/","");t$(D,{name:"FAILED response",session:s,source:B}),G===D.description&&(S(),n.replace(`/?error=${Dd.ThreadStreamError}`,"StreamSideEffects")),h?.setTabProgress(!1)},P=Yr.on("error",O),N=Yr.on("aborted",O);return()=>{P(),N()}},[s,l,S,n,h]),f.useLayoutEffect(()=>Yr.on("created",({query:O,params:P,stream:{isReconnect:N,id:I}})=>{if(!(!O||!P||N||!MA(P))){if(r){u(O,{model_preference:P.model_preference,last_backend_uuid:"last_backend_uuid"in P?P.last_backend_uuid:void 0,sources:P.sources,override_no_search:P.override_no_search},I.description);return}d({query:O,params:P,reason:"streamEvents.on(created)"})}}),[u,d,r]),f.useEffect(()=>{const O=[Yr.on("completed",({stream:P})=>{h.cleanupTasks(P.entryId),g&&h.sendThreadStatusToMobile({status:"ready",streamId:P.id.description})}),Yr.on("aborted",({stream:P})=>{h.cleanupTasks(P.entryId),g&&h.sendThreadStatusToMobile({status:"ready",streamId:P.id.description})}),Yr.on("error",({stream:P})=>{h.cleanupTasks(P.entryId),g&&h.sendThreadStatusToMobile({status:"error",streamId:P.id.description})})];return()=>{O.forEach(P=>P())}},[h,g]),f.useEffect(()=>Yr.on("completed",async({message:O,thread:P})=>{if(!O||(R(O),O.collection_info?.slug&&T.invalidateQueries({queryKey:[Zl,{collection_slug:O.collection_info.slug.slice(-22)}]}),j(),jJe(O.thread_url_slug)))return;const N=!!O.parent_info,I=P.findIndex(D=>D.uuid===O.uuid)>0;(N||!I)&&(m("floating-signup"),T.invalidateQueries({queryKey:[tf],refetchType:"all"}))}),[T,l,m,j,R]),null});Nme.displayName="StreamSideEffects";const Iu=e=>e?.includes("perplexity.ai"),znt=e=>e?.includes("localhost"),Gnt=e=>Iu(e)&&e?.includes("preview"),qnt=e=>Iu(e)&&e?.includes("staging"),Knt=e=>Iu(e)&&(e?.includes("alpha")||e?.includes("beta")),Ynt=e=>Iu(e)&&e?.includes("testing"),Qnt=e=>Iu(e)&&e?.includes("askdev"),Xnt=e=>Iu(e)&&e?.startsWith("dev"),Znt=e=>Iu(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),Jnt=e=>Iu(e)&&!Gnt(e)&&!Ynt(e)&&!Knt(e)&&!Qnt(e)&&!Xnt(e)&&!Znt(e);function Ame(){return Jnt(window.location.hostname)?"beta":qnt(window.location.hostname)?"staging":znt(window.location.hostname)?"local":"testing"}class od{static GC_TIME=1e3*60*5;static STALE_TIME=1/0;static retryDelay(t,n){return Math.min(t>1?2**t*1e3:1e3,30*1e3)}static retryQuery(t,n){return!1}static retryMutation(t,n){return!1}}function ert(){return Yd?Gq():(Tk||(Tk=Gq()),Tk)}function Gq(){return new DIe({queryCache:new hae({onError:e=>{const t=e instanceof gN?e:new gN("FETCHER_UNKNOWN_ERROR",{details:{cause:hMe(e)},cause:gMe(e)?e:void 0});ee.error(t)}}),mutationCache:new yae({onError:e=>{ee.error("Mutation error",e)}}),defaultOptions:{queries:{staleTime:od.STALE_TIME,gcTime:od.GC_TIME,refetchOnReconnect:!0,refetchOnMount:!0,refetchOnWindowFocus:!0,retry:od.retryQuery,retryDelay:od.retryDelay,throwOnError:!1,networkMode:"online"},mutations:{gcTime:od.GC_TIME,retry:od.retryMutation,retryDelay:od.retryDelay,throwOnError:!1,networkMode:"online"}}})}let Tk;const ao={type:"spring",stiffness:700,damping:50},_u=A.memo(({keyProp:e=0,message:t,variant:n,description:r,ctaText:s,ctaOnClick:a,isVisible:o=!1,timeout:l,handleClick:c,handleClose:u,onTimeout:d=Rn,position:m="top",...p})=>{const[h,g]=f.useState(o);f.useEffect(()=>{g(o)},[o]),f.useEffect(()=>{let x;return o&&l&&(x=setTimeout(()=>{g(!1),d()},l*1e3)),()=>{clearTimeout(x)}},[h,l,o,d]);const y=f.useCallback(()=>{g(!1),u?.()},[u]),v=f.useCallback(()=>{a?.(),y()},[a,y]);return i.jsx(it,{children:h&&i.jsx(Nu,{children:i.jsx(xe.div,{className:U(`right-toastHMargin erp-sidecar:top-[114px] fixed ${m==="top"?"top-toastVMargin":"bottom-toastVMargin"} z-30 flex items-center justify-center ${c?"cursor-pointer":""}`),initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:ao,...p,children:i.jsxs(z,{variant:"raised",className:U("gap-x-sm p-md shadow-overlay flex items-center rounded-lg",{"cursor-pointer":n==="refresh"}),onClick:c??Rn,children:[i.jsx(z,{variant:"subtler",className:"p-sm dark:bg-offsetPlus rounded-md",children:i.jsx(L,{variant:"smallBold",color:n==="error"?"red":n==="warning"?"yellow":"super",children:i.jsx(me,{icon:n==="refresh"?TR:n==="error"||n==="warning"?HR:Xte,size:"sm"})})}),i.jsxs(z,{className:"flex-1",children:[i.jsx(L,{variant:"small",color:"default",children:t}),r&&i.jsx(L,{variant:"tinyRegular",color:"light",children:r})]}),s&&a&&i.jsx(Te,{text:s,variant:"offset",onClick:v,size:"small",extraCSS:"ml-xl"}),l===void 0&&i.jsx(Te,{variant:"primary",size:"tiny",icon:Lt,onClick:y,extraCSS:"ml-sm",noPadding:!0})]})},e)})})});_u.displayName="Toast";const jme=A.memo(()=>{const{message:e,variant:t,description:n,ctaText:r,ctaOnClick:s,isVisible:a,timeout:o,handleClick:l,closeToast:c,position:u,keyProp:d}=xn(),m=f.useCallback(()=>{t==="refresh"&&l===void 0?window.location.reload():l&&l()},[t,l]);return i.jsx(_u,{keyProp:d,isVisible:a,variant:t,message:e,description:n,ctaText:r,ctaOnClick:s,timeout:o,handleClick:m,onTimeout:c,position:u},d)});jme.displayName="Toasts";const Rme=A.memo(({children:e})=>i.jsx(cIe,{children:e}));Rme.displayName="TooltipStateProvider";const Ime=A.memo(({children:e,colorScheme:t})=>i.jsx(Lce,{userPreferredColorScheme:t,children:i.jsx(Rme,{children:i.jsxs(Poe,{children:[e,i.jsx(jme,{})]})})}));Ime.displayName="GlobalUXProvider";he(async()=>{const{RenderToolbar:e}=await ae(async()=>{const{RenderToolbar:t}=await import("./RenderToolbar-BcsvHHcv.js");return{RenderToolbar:t}},__vite__mapDeps([101,1,3]));return{default:e}},{prefetch:!1});he(async()=>{const{ReactQueryDevtools:e}=await ae(async()=>{const{ReactQueryDevtools:t}=await import("./index-Ds5yF1gS.js");return{ReactQueryDevtools:t}},[]);return{default:e}},{prefetch:!1});const trt=({children:e,hostname:t,version:n,minVersion:r,spaRoutes:s,strictSpa:a,shouldOpenNonSpaRouteInNewTab:o,base:l,idleRefresh:c,minVersionRefresh:u})=>{const d=Nt(),m=ert(),{colorScheme:p}=dn();return f.useEffect(()=>{!n&&["beta","staging"].includes(Ame())&&ee.error("Version is not set")},[n]),i.jsx(yMe,{ssrPath:d??"/",ssrSearch:"",base:l,children:i.jsx(vMe,{spaRoutes:s,strictSpa:a,openNonSpaRouteInNewTab:o,children:i.jsx(gYe,{children:i.jsxs(Vnt,{children:[i.jsx(fme,{}),i.jsx($Ie,{client:m,children:i.jsxs(oYe,{children:[i.jsx(Ime,{colorScheme:p??void 0,children:i.jsx(int,{hostname:t,children:i.jsx(Oie,{children:i.jsx(uBe,{children:i.jsxs(pYe,{shouldFetchSettings:!0,children:[i.jsx(xKe,{children:i.jsx(YYe,{shouldFetchSettings:!1,children:i.jsx(Cnt,{children:i.jsx(dnt,{children:i.jsx(Mtt,{children:i.jsxs(cnt,{children:[i.jsx(cme,{}),c&&i.jsx(dme,{version:n}),u&&i.jsx(mme,{minVersion:r}),i.jsx(Nme,{}),i.jsx(xme,{}),typeof window<"u"&&i.jsx(Mme,{}),i.jsx(vme,{}),e]})})})})})}),i.jsx(Gtt,{})]})})})})}),!1,i.jsx(lme,{})]})})]})})})})},nrt=["49a618ae-2fee-4bac-9150-81c466a49187"];let qq=!1;const rrt=performance.now();function Pme(e,t){if(qq||typeof document>"u")return;const r="4705c1a2-db1e-42f0-8a66-cd6208ae9e65",s="pub4ecf63e3fd1ad28de1a9027c01181601",a=e.version,o=e.env??"local",l=Fo(),c=t?.email?.endsWith("@perplexity.ai"),u=o==="local",d=o==="testing"||u||l||c?100:2,m=u||c?100:2;if(!nrt.includes(t?.org_uuid??"")){xMe({ddApplicationId:r,ddClientToken:s,version:a,env:o,debug:u,sessionSampleRate:100,sessionReplaySampleRate:m}),bMe({ddClientToken:s,version:a,env:o,debug:u,sessionSampleRate:d});const h=typeof navigator<"u"&&"serviceWorker"in navigator&&!!navigator.serviceWorker.controller;if(eB({useServiceWorker:h}),tB({useServiceWorker:h}),l){const g={cometAgentExtensionVersion:l?.agent_extension_version,cometDeviceId:l.device_id,cometMainExtensionVersion:l.extension_version,cometVersion:l?.browser_version,erp:e.erp};eB(g),tB(g)}Ql("web.frontend.module_exec_start",{startTime:performance.timeOrigin,duration:rrt})}qq=!0}const NE="^/(finance|crypto|app/finance)/?([^/]+)?(?:/([^/]+))?/?$",srt=["^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$","/account/api/files/:repositoryUuid","/account/api/members","/account/api/billing","/account/api/files","/account/api/limits","/account/api/group","/account/api/keys","/account/api","/account/org/user-access","/account/org/permissions","/account/org/connectors","/account/org/insights","/account/org/members","/account/org/details","/account/org/files","/account/org","/account/pro-perks/:name","/account/pro-perks","/account/tasks/:taskId","/account/tasks","/account/site-instructions","/account/reservations","/account/preferences","/account/personalize/memories","/account/personalize","/account/assistant","/account/notifications","/account/purchases","/account/connectors","/account/shortcuts","/account/details","/account/files","/account","/sports/atp/tournaments/:seasonId","/sports/atp/events/:eventId","/sports/atp","/sports/wta/tournaments/:seasonId","/sports/wta/events/:eventId","/sports/wta","/sports/nba/players/:playerId","/sports/nba/events/:eventId","/sports/nba/teams/:teamId","/sports/nba","/sports/nfl/players/:playerId","/sports/nfl/events/:eventId","/sports/nfl/teams/:teamId","/sports/nfl","/sports/championsleague/events/:eventId","/sports/championsleague","/sports/f1/events/:eventId","/sports/f1","/sports/mlb/events/:eventId","/sports/mlb","/sports/ipl/events/:eventId","/sports/ipl","/sports/icc/events/:eventId","/sports/icc","/sports/pga/events/:eventId","/sports/pga","/sports/dpworldtour/events/:eventId","/sports/dpworldtour","/sports/wnba/events/:eventId","/sports/wnba","/sports/ncaam/events/:eventId","/sports/ncaam","/sports/ncaaw/events/:eventId","/sports/ncaaw","/sports/cricket/events/:eventId","/sports","/discover/:topic/:slug","/discover/:topic","/discover","/spaces/templates","/spaces/:slug","/spaces","/hotels/:slug","/page/:slug","/b/mission-control","/b/try-assistant","/b/speak","/b/home","/b/zen","/perplexify_me","/academic","/shopping","/library","/travel","/windows-app/ask/input",NE,"/"],Ome=A.memo(function({error:t}){f.useEffect(()=>{ee.error(t,{digest:t.digest,globalError:!0})},[t]);const n=f.useCallback(r=>{r.preventDefault(),dl("/sidecar","sidecar error")},[]);return i.jsx("div",{className:"bg-subtler flex h-screen items-center justify-center",children:i.jsxs(z,{className:"space-y-md p-lg rounded-md",children:[i.jsx("div",{className:"max-w-[400px]",children:i.jsx(L,{className:"text-center",variant:"section-title",children:t.digest?`Internal Error (${t.digest})`:"Internal Error"})}),i.jsx(L,{className:"text-center underline",variant:"section-title",color:"light",children:i.jsx(Ye,{href:"/sidecar",onClick:n,children:"Return home"})})]})})});Ome.displayName="GlobalError";const art=60*60*24;function ort({children:e,session:t}){return i.jsx(Xv.SessionProvider,{session:t,refetchInterval:art,children:e})}const Lme=f.createContext(void 0),irt=he(async()=>{const{DebugModeActivator:e}=await ae(async()=>{const{DebugModeActivator:t}=await import("./DebugModeActivator-CxCEPJVl.js");return{DebugModeActivator:t}},__vite__mapDeps([102,3,1,6]));return{default:e}}),Dme=A.memo(({children:e})=>{const[t,n]=f.useState(!1),r=eS(),s=f.useMemo(()=>({debugEnabled:t}),[t]);return i.jsxs(Lme.Provider,{value:s,children:[e,r&&i.jsx(irt,{setDebugEnabled:n,isDebugMode:t})]})});Dme.displayName="DebugModeProvider";const lrt=(e,t)=>t?.includes("WindowsApp")?!0:e==="true",crt=e=>e==="light"||e==="dark";function urt(e,{userAgent:t}={}){const n=e.colorScheme,r=crt(n)?n:null;let s=e[IA],a={};try{a=JSON.parse(e[ale]??"{}")}catch{}const o=Object.values(oe).includes(s);(!s||!o)&&(s=oe.SEARCH);const l=e[Vie];return{colorScheme:r,isCollapsed:lrt(e.isCollapsed,t),isSidebarPinned:e.isSidebarPinned==="true",sidebarHiddenHubs:JSON.parse(e.sidebarHiddenHubs??"[]"),isIncognitoLocal:e[Zw]===void 0?void 0:e[Zw]==="true",isDiscoverInterestBoxDismissed:l?l==="true":void 0,isEnterpriseAdDismissed:e[Wie]=="true",isMaxAssistantMode:e[ole]=="true",isSplashPageDismissed:e[$ie]=="true",isSuggestionsDisabled:e[Hie]=="true",isHomepageWidgetsDisabled:e[zie]=="true",isSportsIosCtaDismissed:e[qie]=="true",preferredSearchMode:s,preferredSearchModels:a,welcomeBackGateImpressions:Number(e[Kie])||0,shareGateImpressions:Number(e[Yie])||0,isSidebarConnectorsAdDismissed:e[Qie]=="true",isStudentReferralBannerDismissed:e[Xie]=="true",isStudentSpaceUpsellDismissed:e[Zie]=="true",studentSpaceUpsellImpressions:Number(e[Jie])||0}}function drt(e=""){return!e&&typeof navigator<"u"&&(e=navigator.userAgent),{isChrome:Bqe(e),isMobile:bue(e),isAndroid:Vqe(e),isIOS:Wqe(e),isMacOS:$qe(e),isMobileSafari:Hqe(e),isFirefox:zqe(e),isWindowsApp:b1(e),isWindowsOS:Gqe(e),isMetaBrowser:qqe(e),isSamsungBrowser:Kqe(e),userAgent:e}}const ki=e=>e?.includes("perplexity.ai"),Fme=e=>e?.includes("localhost"),frt=e=>e?.includes("pplx.dev"),Ume=e=>ki(e)&&e?.includes("preview"),Bme=e=>ki(e)&&e?.includes("staging"),Vme=e=>ki(e)&&(e?.includes("alpha")||e?.includes("beta")),Wme=e=>ki(e)&&e?.includes("testing"),mrt=e=>ki(e)&&e?.includes("experimental"),$me=e=>ki(e)&&e?.includes("askdev"),Hme=e=>ki(e)&&e?.startsWith("dev"),zme=e=>ki(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),Gme=e=>ki(e)&&!Ume(e)&&!Wme(e)&&!Vme(e)&&!$me(e)&&!Hme(e)&&!zme(e)&&!mrt(e),prt=e=>ki(e)&&e?.includes("sandbox"),hrt=e=>e?.includes("quokka-gamma.ts.net")||e?.endsWith(".preview.i.perplexity.ai"),grt=e=>{const t="unknown";try{return typeof process<"u"&&process?.env?.DD_ENV?process?.env?.DD_ENV:e?Fme(e)?"local":e==="www.perplexity.ai"?"prod":e.endsWith(".preview.i.perplexity.ai")?e.replace(/\.preview\.i\.perplexity\.ai$/,""):e.endsWith(".perplexity.ai")?e.replace(/\.perplexity\.ai$/,""):t:t}catch{return t}},yrt=e=>e.isTesting||e.isLocalhost||e.isSandbox||e.isDevBox||e.isPplxDev||e.isDevDeployment,vrt=e=>{const t={isPublicDNS:ki(e),isLocalhost:Fme(e),isPplxDev:frt(e),isPreview:Ume(e),isStaging:Bme(e),isBeta:Vme(e),isTesting:Wme(e),isAskDev:$me(e),isDevBox:Hme(e),isNamedDevDomain:zme(e),isProduction:Gme(e),isSandbox:prt(e),isDevDeployment:hrt(e),deployName:grt(e),envHasDevLogins:!1};return t.envHasDevLogins=yrt(t),t},qme=f.memo(({children:e,userAgent:t,hostname:n})=>{const r=f.useMemo(()=>({device:drt(t),env:vrt(n)}),[t,n]);return i.jsx(Rae.Provider,{value:r,children:e})});qme.displayName="WebPlatformProvider";const xrt={},UO=A.memo(({locale:e,children:t,messages:n=xrt})=>{const r=f.useCallback(s=>{s.code!=="MISSING_TRANSLATION"&&ee.error(s)},[]);return i.jsx(MTe,{locale:e,defaultLocale:pu,messages:n,onError:r,children:t})});UO.displayName="TranslationsProvider";const brt=yte(a7e),Kme=A.memo(({locale:e,children:t})=>{const{translations:n,matchedLocale:r}=f.use(brt(e));return i.jsx(UO,{locale:r,messages:n,children:t})});Kme.displayName="InnerClientTranslationsProvider";const _rt={},Yme=A.memo(({children:e,shouldSetHtmlLang:t=!0})=>{const n=f.useMemo(()=>nu(),[]),r=f.useMemo(()=>Tae(n),[n]);return t&&typeof document<"u"&&(document.documentElement.lang!==n&&(document.documentElement.lang=n),document.documentElement.dir!==r&&(document.documentElement.dir=r)),n===pu?i.jsx(UO,{locale:n,messages:_rt,children:e}):i.jsx(f.Suspense,{fallback:null,children:i.jsx(Kme,{locale:n,children:e})})});Yme.displayName="ClientTranslationsProvider";const Qme=A.memo(({host:e,userAgent:t,children:n,session:r})=>{const s=f.useMemo(()=>urt(_Me(),{userAgent:t}),[t]);return i.jsx(Yme,{children:i.jsx(ort,{session:r,children:i.jsx(qme,{hostname:e,userAgent:t,children:i.jsx(jGe,{initialLocalUserSettings:s,children:i.jsx(Dme,{children:n})})})})})});Qme.displayName="RootProviders";function wrt(e,t){if(e?.pathname.startsWith("/sidecar"))return"sidecar";if(e?.pathname.startsWith("/mobile-sidecar"))return"mobile-sidecar";if(t)return"tab"}function Crt(){const{cachedSession:e,sessionFetchPromise:t}=p6e(!0),n=Za(),r=document.querySelector("meta[name='version']")?.getAttribute("content")||"",s=+(document.querySelector("meta[name='min-version']")?.getAttribute("content")||0),a=new URL(window.location.href);return{cachedSession:e,sessionFetchPromise:t.catch(o=>(console.error("Error getting session",o),null)),config:{env:Ame(),version:r,minVersion:s,erp:wrt(a,n)}}}const Xme=A.memo(function({children:t}){const n=Nt(),r=Dt(),[s,a]=f.useState(null),{colorScheme:o}=Pr(),{session:l}=Ct(),c=f.useCallback(d=>d==="/search"&&r?.get("newFrontendContextUUID")||d.startsWith("/page/new")&&r?.get("newFrontendContextUUID")||d==="/search/new",[r]),u=f.useCallback(d=>{if((d?.split("?")[0]??"")===(s?.split("?")[0]??"")||c(d))return;const p=s;a(d),oi({name:"pageview",data:{internalReferrer:p??void 0,colorScheme:o},session:l??void 0})},[o,c,s,l]);return f.useEffect(()=>{n&&u(n)},[u,n]),i.jsx(i.Fragment,{children:t})});Xme.displayName="PageviewTemplate";const Srt=({inviteLink:e,hasCopied:t,onCopyLink:n,email:r,onEmailChange:s,onSendInvitation:a,isSending:o,justSentEmail:l,selectedInvite:c,isMobileUserAgent:u})=>i.jsxs(i.Fragment,{children:[i.jsx(ra,{value:e,onChange:()=>{},disabled:!0,placeholder:"Generating invite link...",isMobileUserAgent:u,pill:!1}),i.jsx(ge,{variant:"primaryGhost",text:t?"Copied!":"Copy invitation link",onClick:n,icon:t?Rr:Mf,fullWidth:!0,disabled:!e}),i.jsxs("div",{className:"flex items-center py-2",children:[i.jsx("div",{className:"h-two from-subtler via-subtler flex-1 bg-gradient-to-l via-75% to-transparent"}),i.jsx(L,{variant:"base",color:"light",className:"px-4",children:"OR"}),i.jsx("div",{className:"h-two from-subtler via-subtler flex-1 bg-gradient-to-r via-75% to-transparent"})]}),i.jsx(ra,{value:r,onChange:s,placeholder:"Enter email address...",type:"email",disabled:!c||!!l,isMobileUserAgent:u,pill:!1,onKeyDown:d=>{d.key==="Enter"&&r.trim()&&!o&&!l&&a()}}),i.jsx(ge,{variant:"border",text:l?"Invitation sent!":"Send invitation",onClick:a,icon:l?Rr:Zte,disabled:!r.trim()||o||!!l||!c,isLoading:o,fullWidth:!0}),i.jsx("div",{className:"my-3",children:i.jsx("div",{className:"h-two via-subtle bg-gradient-to-r from-transparent from-[-10%] via-50% to-transparent to-[110%]"})})]});var Qm;(function(e){e[e.Ungenerated=0]="Ungenerated",e[e.Generating=1]="Generating",e[e.Generated=2]="Generated",e[e.Sent=3]="Sent",e[e.Claimed=4]="Claimed"})(Qm||(Qm={}));const Ert=({className:e="",style:t,onClick:n,invite:r,isModal:s=!1,responsive:a=!1,claimed:o=!1,sent:l=!1})=>{const{session:c}=Ct(),{isMobileStyle:u}=ye(),d=c?.user?.image,[m,p]=f.useState(!1),h=f.useMemo(()=>`/static/images/comet-invite/avatar/${r.code.split("").reduce((G,X)=>G+X.charCodeAt(0),0)%10+1}.png`,[r.code]),g=Wy(.5),y=Wy(.5),v=Wy(0),[x,b]=f.useState({stiffness:150,damping:30,mass:1}),[_,w]=f.useState({stiffness:300,damping:30}),C=f.useRef(!1),S=fd(y,[0,1],[u?-5:-20,u?5:20]),E=fd(g,[0,1],[u?5:20,u?-5:-20]),M=Hf(S,x),k=Hf(E,x),T=fd(g,[0,1],[u?-10:-30,u?10:30]),j=fd(y,[0,1],[u?10:30,u?-10:-30]),R=Hf(0,x),O=Hf(T,x),P=Hf(j,x),N=fd([g,y,v],([V,$,G])=>{const X=V,Y=$,W=G,H=Math.max(Math.abs(X-.5),Math.abs(Y-.5));return W*H*1}),I=Hf(N,_),D=V=>{C.current||(C.current=!0,b({stiffness:150,damping:30,mass:1}),w({stiffness:300,damping:30}));const $=V.currentTarget.getBoundingClientRect(),{width:G,height:X}=$,Y=V.clientX-$.left,W=V.clientY-$.top;g.set(Y/G),y.set(W/X),v.set(1),R.set(50)},F=()=>{C.current=!1,g.set(.5),y.set(.5),v.set(0),R.set(0)},B=i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-sm mb-sm flex shrink-0 items-center justify-between",children:[d&&!o&&!l?i.jsx(Rt,{size:"base",user:d,showBackground:!1,className:"size-6"}):i.jsx("img",{src:h,alt:"Comet avatar",className:"size-6 rounded-full",loading:"lazy"}),i.jsx(me,{icon:ro,size:"base",className:"text-white"})]}),i.jsx("div",{className:"mx-sm flex-1",children:i.jsxs("div",{className:"relative w-full",style:{aspectRatio:"3 / 4"},children:[i.jsx(xe.img,{loading:"lazy",onLoad:()=>p(!0),initial:{opacity:0},animate:{opacity:m?1:0},transition:{duration:.3},src:r.image_url??"/static/images/comet-invite/invite-background.png",className:U("absolute inset-0 size-full rounded-[16px] bg-[#000000] object-cover",{"contrast-75":o||l}),alt:"Invite background",style:{boxShadow:"0px 5px 6px 0px rgba(0, 0, 0, 0.05)"}}),(o||l)&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(me,{icon:o?N4e:Zte,size:"4xl",className:"text-white"})})})]})}),i.jsxs("div",{className:"p-sm mt-sm flex shrink-0 items-center justify-between font-mono text-white",children:[i.jsx("div",{className:"text-xs",children:"Comet Invitation"}),i.jsxs("div",{className:"text-light text-xs opacity-50",children:["#",r.code.slice(-4)]})]}),i.jsx(xe.div,{className:"pointer-events-none absolute inset-0 rounded-[16px] [mix-blend-mode:overlay]",style:{background:fd([g,y],([V,$])=>`radial-gradient(farthest-corner circle at ${V*100}% ${$*100}%, hsla(0, 0%, 100%, 0.9) 10%, hsla(0, 0%, 100%, 0.75) 20%, hsla(0, 0%, 100%, 0) 80%)`),opacity:I}})]});return n?i.jsx(xe.button,{type:"button",layout:!0,layoutId:`card-container-${r.code}`,onClick:n,onMouseMove:D,onMouseLeave:F,style:{...t,width:a?"100%":s?335:235,boxShadow:"0px 520px 146px 0px rgba(0, 0, 0, 0.01), 0px 333px 133px 0px rgba(0, 0, 0, 0.04), 0px 83px 83px 0px rgba(0, 0, 0, 0.26), 0px 21px 46px 0px rgba(0, 0, 0, 0.29)",transformStyle:"preserve-3d",rotateX:M,rotateY:k,x:O,y:P,z:R},className:U("p-sm md:p-md flex cursor-pointer flex-col items-stretch rounded-[16px] border-0 bg-[#1F2121]",e,{"saturate-0":o||l}),"aria-label":`View invite ${r.code.slice(-4)}`,children:B}):i.jsx(xe.div,{layout:!0,layoutId:`card-container-${r.code}`,onMouseMove:D,onMouseLeave:F,style:{...t,width:a?"100%":s?335:235,boxShadow:"0px 520px 146px 0px rgba(0, 0, 0, 0.01), 0px 333px 133px 0px rgba(0, 0, 0, 0.04), 0px 83px 83px 0px rgba(0, 0, 0, 0.26), 0px 21px 46px 0px rgba(0, 0, 0, 0.29)",transformStyle:"preserve-3d",rotateX:M,rotateY:k,x:O,y:P,z:R},className:U("p-sm md:p-md flex flex-col rounded-[16px] bg-[#1F2121]",e,{"saturate-0":o||l}),children:B})},Zme=A.memo(Ert);Zme.displayName="InviteCardContent";const Mrt=({state:e,className:t=""})=>i.jsx("div",{className:`border-subtlest bg-subtler relative flex items-center justify-center rounded-lg border border-dashed ${t}`,style:{width:"235px",height:"350px"},children:e===Qm.Generating?i.jsx(xe.div,{animate:{scale:[1,1.3,1]},transition:{duration:.8,repeat:1/0,ease:"easeInOut"},children:i.jsx(me,{icon:ro,size:"xl",className:"text-foreground"})}):i.jsx(me,{icon:ro,size:"xl",className:"text-foreground"})}),Jme=A.memo(Mrt);Jme.displayName="InviteCardPlaceholder";const krt=({state:e=Qm.Generated,onClick:t,invite:n,isModal:r=!1,responsive:s=!1,claimed:a=!1})=>{const o=e===Qm.Claimed||a,l=e===Qm.Sent;return i.jsx(i.Fragment,{children:n?i.jsx("div",{style:{perspective:"1000px"},children:i.jsx(Zme,{invite:n,onClick:t,isModal:r,responsive:s,claimed:o,sent:l})}):i.jsx(Jme,{state:e})})},epe=A.memo(krt);epe.displayName="InviteCard";const Trt=({reason:e,onNoInvites:t,source:n,onContinue:r})=>{const{trackEvent:s}=Me(),[a,o]=f.useState(null),[l,c]=f.useState(!0),[u,d]=f.useState(null),[m,p]=f.useState(""),[h,g]=f.useState(!1),[y,v]=f.useState(!1),[x,b]=f.useState(!1),[_,w]=f.useState(null),[C,S]=f.useState(0),E=f.useRef(!1),M=f.useRef(!1),k=f.useCallback(I=>{p(I),I.trim()&&v(!0)},[p,v]),T=f.useCallback(()=>{y?s("comet invite flow continued",{source:n}):s("comet invite flow skipped",{source:n}),r?.()},[y,s,n,r]),j=f.useCallback(async I=>{try{const D=await PG({reason:e});D?.invite&&(s("comet invite code generated",{source:n}),d(D.invite),o({...I,one_time_invites:[D.invite,...I.one_time_invites||[]]}))}catch(D){ee.error("Failed to generate invite:",D)}},[e,s,n]),R=f.useCallback(async()=>{c(!0);try{const I=await Tue({reason:e});if(!I||I.remaining_invites===0){t?.();return}if(s("comet invite flow viewed",{source:n}),o(I),M.current||(S(I.remaining_invites),M.current=!0),!E.current){E.current=!0;try{await j(I)}finally{E.current=!1}}c(!1)}catch(I){ee.error("Failed to load or generate invite:",I),t?.()}},[e,s,n,j,t]),O=f.useCallback(()=>{if(!u)return;const I=`https://perplexity.ai/browser/claim/${u.code}`;navigator.clipboard.writeText(I).then(()=>{g(!0),v(!0),s("comet invite link copied",{source:n}),setTimeout(()=>g(!1),2e3)}).catch(D=>{ee.error("Failed to copy invite link:",D)})},[u,s,n]),P=f.useCallback(async()=>{if(!(!u||!m.trim()||x||!a)){b(!0),v(!0);try{await CKe({reason:e,email:m,inviteCode:u.code}),s("comet invite email sent",{source:n});const I=Math.max(0,C-1);S(I);const D=Math.max(0,a.remaining_invites-1),F=a.one_time_invites.map(B=>B.code===u.code?{...B,email_sent:!0}:B);if(o({...a,remaining_invites:D,one_time_invites:F}),w(m),p(""),I>0){setTimeout(()=>{w(null)},1e3);const B=await PG({reason:e});B?.invite&&(s("comet invite code generated",{source:n}),d(B.invite),o(V=>V?{...V,one_time_invites:[B.invite,...F]}:null))}else setTimeout(()=>{t?.()},1500)}catch(I){ee.error("Failed to send invite:",I)}finally{b(!1)}}},[u,m,x,a,s,C,e,n,t]),N=u?`https://perplexity.ai/browser/claim/${u.code}`:"";return{invitesData:a,loading:l,selectedInvite:u,email:m,setEmail:p,hasCopied:h,hasInteracted:y,setHasInteracted:v,isSending:x,justSentEmail:_,availableInvites:C,inviteLink:N,loadInvitesData:R,handleCopyLink:O,handleEmailChange:k,handleSendInvitation:P,handleContinue:T,generateNewInvite:j}},Nrt=({actionsFinished:e,handleNext:t,promptConfirmation:n,fullWidth:r=!1})=>{const{$t:s}=Q(),[a,o]=f.useState(!1),l=f.useCallback(()=>{n?o(!0):t()},[t,n]),c=f.useCallback(()=>{o(!1)},[]),u=f.useCallback(()=>{o(!1),t()},[t]);return i.jsxs(i.Fragment,{children:[i.jsx(ge,{variant:e?"primary":"common",text:s(e?{defaultMessage:"Continue",id:"acrOozm08x"}:{defaultMessage:"Skip for now",id:"WYzHAIKZxl"}),trailingComponent:e?i.jsx(GC,{size:20}):void 0,onClick:l,fullWidth:r}),i.jsx(_E,{isOpen:a,onClose:c,message:s({defaultMessage:"Are you sure you want to skip setup?",id:"IDp4IiGsos"}),subtitle:s({defaultMessage:"Completing these steps makes your Comet Assistant smarter, faster, and unlocks powerful workflows. You may experience suboptimal results if left incomplete.",id:"ZUDl5XeEnm"}),renderCloseButton:!1,variant:"medium",modalClassname:"!max-w-[520px]",footerContent:i.jsxs("div",{className:"gap-sm flex justify-end",children:[i.jsx(Te,{text:s({defaultMessage:"Skip anyway",id:"x3kdOSc6+J"}),onClick:u}),i.jsx(ge,{variant:"primary",text:s({defaultMessage:"Finish setup",id:"G09l5K24Rl"}),onClick:c})]})})]})},Art=({isOpen:e,onClose:t})=>{const{$t:n}=Q(),{isMobileStyle:r,isMobileUserAgent:s}=ye(),{loading:a,selectedInvite:o,email:l,hasCopied:c,hasInteracted:u,isSending:d,justSentEmail:m,availableInvites:p,inviteLink:h,loadInvitesData:g,handleCopyLink:y,handleEmailChange:v,handleSendInvitation:x,handleContinue:b}=Trt({reason:"invite-friends-modal",onNoInvites:t,source:"comet-ntp",onContinue:t});return f.useEffect(()=>{e&&g()},[e,g]),f.useEffect(()=>{if(!e)return;const _=document.documentElement.style.overflow,w=document.body.style.overflow;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",()=>{document.documentElement.style.overflow=_,document.body.style.overflow=w}},[e]),!e||a?null:xs.createPortal(i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"bg-backdrop/80 absolute inset-0 backdrop-blur-sm"}),i.jsxs(xe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-base relative max-h-[90vh] w-full max-w-4xl overflow-auto rounded-2xl px-8 pb-8 pt-12 shadow-2xl",children:[i.jsxs("div",{className:"mb-12 text-center",children:[i.jsx(L,{variant:"display",className:"font-editorial mb-2 text-5xl font-light",children:n({defaultMessage:"Invite a friend to Comet",id:"EnSyt8JS7a"})}),i.jsx(L,{color:"light",children:n({defaultMessage:"Comet is invite-only. Share with friends before your invites expire.",id:"OYCTnCd3rt"})}),i.jsx(L,{color:"light",className:"font-bold",children:n({defaultMessage:"You have {count, plural, one {# invitation} other {# invitations}} left.",id:"yml4YDxsHX"},{count:p})})]}),i.jsxs("div",{className:`flex ${r?"flex-col items-center":"flex-row"} items-start justify-center gap-8 px-14`,children:[i.jsx("div",{className:`flex ${r?"w-auto justify-center":"w-[45%] justify-end"} max-w-xs items-start`,children:o&&i.jsx("div",{className:"-mt-12 scale-[0.81]",children:i.jsx(epe,{invite:o,isModal:!0,responsive:!1})})}),i.jsxs("div",{className:`flex ${r?"w-full px-4":"w-[55%] px-4"} max-w-sm flex-col gap-5`,children:[i.jsx(Srt,{inviteLink:h,hasCopied:c,onCopyLink:y,email:l,onEmailChange:v,onSendInvitation:x,isSending:d,justSentEmail:m,selectedInvite:o,isMobileUserAgent:s}),i.jsx(Nrt,{actionsFinished:u,handleNext:b,fullWidth:!0})]})]})]})]}),document.body)},tpe=A.memo(Art);tpe.displayName="CometInviteModal";const jrt="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart.mp4",Rrt="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama.mp4",Irt="https://r2cdn.perplexity.ai/comet/cmp_find_emails.mp4",Prt="https://r2cdn.perplexity.ai/comet/cmp_find_creatine.mp4",Ort="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping.mp4",Lrt="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage.mp4",Drt="https://r2cdn.perplexity.ai/comet/cmp_walking_route.mp4",Frt="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing.mp4",Urt="https://r2cdn.perplexity.ai/comet/grocery_cart-min.png",Brt="https://r2cdn.perplexity.ai/comet/reddit_ama-min.png",Vrt="https://r2cdn.perplexity.ai/comet/find_emails-min.png",Wrt="https://r2cdn.perplexity.ai/comet/find_creatine-min.png",$rt="https://r2cdn.perplexity.ai/comet/bikes_shipping-min.png",Hrt="https://r2cdn.perplexity.ai/comet/summarize_webpage-min.png",zrt="https://r2cdn.perplexity.ai/comet/tour_plan-min.png",Grt="https://r2cdn.perplexity.ai/comet/v2v_browsing-min.png",qrt="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart_v2.mp4",Krt="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama_v3.mp4",Yrt="https://r2cdn.perplexity.ai/comet/cmp_find_emails_v2.mp4",Qrt="https://r2cdn.perplexity.ai/comet/cmp_find_creatine_v2.mp4",Xrt="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping_v3.mp4",Zrt="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage_v2.mp4",Jrt="https://r2cdn.perplexity.ai/comet/cmp_walking_route_v2.mp4",est="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing_v2.mp4";function tst(){const{$t:e}=Q();return f.useMemo(()=>[{videoSrc:Irt,fullVideoSrc:Yrt,previewSrc:Vrt,label:e({id:"U51r44Fr7z",defaultMessage:"Master Your Inbox and Calendar"})},{videoSrc:jrt,fullVideoSrc:qrt,previewSrc:Urt,label:e({id:"7rWLu0GI8D",defaultMessage:"Delegate the Basics"})},{videoSrc:Lrt,fullVideoSrc:Zrt,previewSrc:Hrt,label:e({id:"0MeQ1Iywio",defaultMessage:"Get the Gist in Seconds"})},{videoSrc:Drt,fullVideoSrc:Jrt,previewSrc:zrt,label:e({id:"zX2SKiQpSn",defaultMessage:"Automate the Clicks"})},{videoSrc:Frt,fullVideoSrc:est,previewSrc:Grt,label:e({id:"k3OgfsBfr6",defaultMessage:"Browse with Your Voice"})},{videoSrc:Prt,fullVideoSrc:Qrt,previewSrc:Wrt,label:e({id:"Fi5Bt5+lYj",defaultMessage:"Quickly Find Answers in Your History"})},{videoSrc:Rrt,fullVideoSrc:Krt,previewSrc:Brt,label:e({id:"HHOfPSzTkI",defaultMessage:"Get Insights in One Click"})},{videoSrc:Ort,fullVideoSrc:Xrt,previewSrc:$rt,label:e({id:"ytn1Ld8ocW",defaultMessage:"Reference Any Tab for Precise Answers"})}],[e])}function nst(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const AE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function BO(e){return"nodeType"in e}function ia(e){var t,n;return e?Xh(e)?e:BO(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function VO(e){const{Document:t}=ia(e);return e instanceof t}function P1(e){return Xh(e)?!1:e instanceof ia(e).HTMLElement}function npe(e){return e instanceof ia(e).SVGElement}function Zh(e){return e?Xh(e)?e.document:BO(e)?VO(e)?e:P1(e)||npe(e)?e.ownerDocument:document:document:document}const mi=AE?f.useLayoutEffect:f.useEffect;function jE(e){const t=f.useRef(e);return mi(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function rst(){const e=f.useRef(null),t=f.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function av(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return mi(()=>{n.current!==e&&(n.current=e)},t),n}function O1(e,t){const n=f.useRef();return f.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function g2(e){const t=jE(e),n=f.useRef(null),r=f.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function y2(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let Nk={};function L1(e,t){return f.useMemo(()=>{if(t)return t;const n=Nk[e]==null?0:Nk[e]+1;return Nk[e]=n,e+"-"+n},[e,t])}function rpe(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=a[c];d!=null&&(a[c]=d+e*u)}return a},{...t})}}const Xm=rpe(1),ov=rpe(-1);function sst(e){return"clientX"in e&&"clientY"in e}function RE(e){if(!e)return!1;const{KeyboardEvent:t}=ia(e.target);return t&&e instanceof t}function ast(e){if(!e)return!1;const{TouchEvent:t}=ia(e.target);return t&&e instanceof t}function v2(e){if(ast(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return sst(e)?{x:e.clientX,y:e.clientY}:null}const of=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[of.Translate.toString(e),of.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Kq="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ost(e){return e.matches(Kq)?e:e.querySelector(Kq)}const ist={display:"none"};function lst(e){let{id:t,value:n}=e;return A.createElement("div",{id:t,style:ist},n)}function cst(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return A.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function ust(){const[e,t]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const spe=f.createContext(null);function dst(e){const t=f.useContext(spe);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function fst(){const[e]=f.useState(()=>new Set),t=f.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[f.useCallback(r=>{let{type:s,event:a}=r;e.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,a)})},[e]),t]}const mst={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},pst={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function hst(e){let{announcements:t=pst,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=mst}=e;const{announce:a,announcement:o}=ust(),l=L1("DndLiveRegion"),[c,u]=f.useState(!1);if(f.useEffect(()=>{u(!0)},[]),dst(f.useMemo(()=>({onDragStart(m){let{active:p}=m;a(t.onDragStart({active:p}))},onDragMove(m){let{active:p,over:h}=m;t.onDragMove&&a(t.onDragMove({active:p,over:h}))},onDragOver(m){let{active:p,over:h}=m;a(t.onDragOver({active:p,over:h}))},onDragEnd(m){let{active:p,over:h}=m;a(t.onDragEnd({active:p,over:h}))},onDragCancel(m){let{active:p,over:h}=m;a(t.onDragCancel({active:p,over:h}))}}),[a,t])),!c)return null;const d=A.createElement(A.Fragment,null,A.createElement(lst,{id:r,value:s.draggable}),A.createElement(cst,{id:l,announcement:o}));return n?xs.createPortal(d,n):d}var Vr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Vr||(Vr={}));function x2(){}function gst(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function yst(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const pi=Object.freeze({x:0,y:0});function WO(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vst(e,t){const n=v2(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function $O(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function xst(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function c8(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function ape(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Yq(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const MUt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=Yq(t,t.left,t.top),a=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=WO(Yq(c),s);a.push({id:l,data:{droppableContainer:o,value:u}})}}return a.sort($O)},bst=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=c8(t),a=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=c8(c),d=s.reduce((p,h,g)=>p+WO(u[g],h),0),m=Number((d/4).toFixed(4));a.push({id:l,data:{droppableContainer:o,value:m}})}}return a.sort($O)};function _st(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=s-r,l=a-n;if(r<s&&n<a){const c=t.width*t.height,u=e.width*e.height,d=o*l,m=d/(c+u-d);return Number(m.toFixed(4))}return 0}const wst=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const c=_st(l,t);c>0&&s.push({id:o,data:{droppableContainer:a,value:c}})}}return s.sort(xst)};function Cst(e,t){const{top:n,left:r,bottom:s,right:a}=t;return n<=e.y&&e.y<=s&&r<=e.x&&e.x<=a}const Sst=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const s=[];for(const a of t){const{id:o}=a,l=n.get(o);if(l&&Cst(r,l)){const u=c8(l).reduce((m,p)=>m+WO(r,p),0),d=Number((u/4).toFixed(4));s.push({id:o,data:{droppableContainer:a,value:d}})}}return s.sort($O)};function Est(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function ope(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:pi}function Mst(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...n})}}const kst=Mst(1);function ipe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Tst(e,t,n){const r=ipe(t);if(!r)return e;const{scaleX:s,scaleY:a,x:o,y:l}=r,c=e.left-o-(1-s)*parseFloat(n),u=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?e.width/s:e.width,m=a?e.height/a:e.height;return{width:d,height:m,top:u,right:c+d,bottom:u+m,left:c}}const Nst={ignoreTransform:!1};function Jh(e,t){t===void 0&&(t=Nst);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=ia(e).getComputedStyle(e);u&&(n=Tst(n,u,d))}const{top:r,left:s,width:a,height:o,bottom:l,right:c}=n;return{top:r,left:s,width:a,height:o,bottom:l,right:c}}function Qq(e){return Jh(e,{ignoreTransform:!0})}function Ast(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function jst(e,t){return t===void 0&&(t=ia(e).getComputedStyle(e)),t.position==="fixed"}function Rst(e,t){t===void 0&&(t=ia(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=t[s];return typeof a=="string"?n.test(a):!1})}function IE(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(VO(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!P1(s)||npe(s)||n.includes(s))return n;const a=ia(e).getComputedStyle(s);return s!==e&&Rst(s,a)&&n.push(s),jst(s,a)?n:r(s.parentNode)}return e?r(e):n}function lpe(e){const[t]=IE(e,1);return t??null}function Ak(e){return!AE||!e?null:Xh(e)?e:BO(e)?VO(e)||e===Zh(e).scrollingElement?window:P1(e)?e:null:null}function cpe(e){return Xh(e)?e.scrollX:e.scrollLeft}function upe(e){return Xh(e)?e.scrollY:e.scrollTop}function u8(e){return{x:cpe(e),y:upe(e)}}var Qr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Qr||(Qr={}));function dpe(e){return!AE||!e?!1:e===document.scrollingElement}function fpe(e){const t={x:0,y:0},n=dpe(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:o,isRight:l,maxScroll:r,minScroll:t}}const Ist={x:.2,y:.2};function Pst(e,t,n,r,s){let{top:a,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Ist);const{isTop:u,isBottom:d,isLeft:m,isRight:p}=fpe(e),h={x:0,y:0},g={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!u&&a<=t.top+y.height?(h.y=Qr.Backward,g.y=r*Math.abs((t.top+y.height-a)/y.height)):!d&&c>=t.bottom-y.height&&(h.y=Qr.Forward,g.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!p&&l>=t.right-y.width?(h.x=Qr.Forward,g.x=r*Math.abs((t.right-y.width-l)/y.width)):!m&&o<=t.left+y.width&&(h.x=Qr.Backward,g.x=r*Math.abs((t.left+y.width-o)/y.width)),{direction:h,speed:g}}function Ost(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function mpe(e){return e.reduce((t,n)=>Xm(t,u8(n)),pi)}function Lst(e){return e.reduce((t,n)=>t+cpe(n),0)}function Dst(e){return e.reduce((t,n)=>t+upe(n),0)}function ppe(e,t){if(t===void 0&&(t=Jh),!e)return;const{top:n,left:r,bottom:s,right:a}=t(e);lpe(e)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Fst=[["x",["left","right"],Lst],["y",["top","bottom"],Dst]];class HO{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=IE(n),s=mpe(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,o,l]of Fst)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),d=s[a]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class e0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Ust(e){const{EventTarget:t}=ia(e);return e instanceof t?e:Zh(e)}function jk(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var xo;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(xo||(xo={}));function Xq(e){e.preventDefault()}function Bst(e){e.stopPropagation()}var mn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(mn||(mn={}));const hpe={start:[mn.Space,mn.Enter],cancel:[mn.Esc],end:[mn.Space,mn.Enter,mn.Tab]},Vst=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case mn.Right:return{...n,x:n.x+25};case mn.Left:return{...n,x:n.x-25};case mn.Down:return{...n,y:n.y+25};case mn.Up:return{...n,y:n.y-25}}};class gpe{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new e0(Zh(n)),this.windowListeners=new e0(ia(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xo.Resize,this.handleCancel),this.windowListeners.add(xo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ppe(r),n(pi)}handleKeyDown(t){if(RE(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=hpe,coordinateGetter:o=Vst,scrollBehavior:l="smooth"}=s,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:pi;this.referenceCoordinates||(this.referenceCoordinates=d);const m=o(t,{active:n,context:r.current,currentCoordinates:d});if(m){const p=ov(m,d),h={x:0,y:0},{scrollableAncestors:g}=r.current;for(const y of g){const v=t.code,{isTop:x,isRight:b,isLeft:_,isBottom:w,maxScroll:C,minScroll:S}=fpe(y),E=Ost(y),M={x:Math.min(v===mn.Right?E.right-E.width/2:E.right,Math.max(v===mn.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(v===mn.Down?E.bottom-E.height/2:E.bottom,Math.max(v===mn.Down?E.top:E.top+E.height/2,m.y))},k=v===mn.Right&&!b||v===mn.Left&&!_,T=v===mn.Down&&!w||v===mn.Up&&!x;if(k&&M.x!==m.x){const j=y.scrollLeft+p.x,R=v===mn.Right&&j<=C.x||v===mn.Left&&j>=S.x;if(R&&!p.y){y.scrollTo({left:j,behavior:l});return}R?h.x=y.scrollLeft-j:h.x=v===mn.Right?y.scrollLeft-C.x:y.scrollLeft-S.x,h.x&&y.scrollBy({left:-h.x,behavior:l});break}else if(T&&M.y!==m.y){const j=y.scrollTop+p.y,R=v===mn.Down&&j<=C.y||v===mn.Up&&j>=S.y;if(R&&!p.x){y.scrollTo({top:j,behavior:l});return}R?h.y=y.scrollTop-j:h.y=v===mn.Down?y.scrollTop-C.y:y.scrollTop-S.y,h.y&&y.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,Xm(ov(m,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gpe.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=hpe,onActivation:s}=t,{active:a}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function Zq(e){return!!(e&&"distance"in e)}function Jq(e){return!!(e&&"delay"in e)}class zO{constructor(t,n,r){var s;r===void 0&&(r=Ust(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:o}=a;this.props=t,this.events=n,this.document=Zh(o),this.documentListeners=new e0(this.document),this.listeners=new e0(r),this.windowListeners=new e0(ia(o)),this.initialCoordinates=(s=v2(a))!=null?s:pi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(xo.Resize,this.handleCancel),this.windowListeners.add(xo.DragStart,Xq),this.windowListeners.add(xo.VisibilityChange,this.handleCancel),this.windowListeners.add(xo.ContextMenu,Xq),this.documentListeners.add(xo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Jq(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Zq(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(xo.Click,Bst,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xo.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:o,options:{activationConstraint:l}}=a;if(!s)return;const c=(n=v2(t))!=null?n:pi,u=ov(s,c);if(!r&&l){if(Zq(l)){if(l.tolerance!=null&&jk(u,l.tolerance))return this.handleCancel();if(jk(u,l.distance))return this.handleStart()}if(Jq(l)&&jk(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===mn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Wst={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class GO extends zO{constructor(t){const{event:n}=t,r=Zh(n.target);super(t,Wst,r)}}GO.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const $st={move:{name:"mousemove"},end:{name:"mouseup"}};var d8;(function(e){e[e.RightClick=2]="RightClick"})(d8||(d8={}));class Hst extends zO{constructor(t){super(t,$st,Zh(t.event.target))}}Hst.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===d8.RightClick?!1:(r?.({event:n}),!0)}}];const Rk={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class zst extends zO{constructor(t){super(t,Rk)}static setup(){return window.addEventListener(Rk.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Rk.move.name,t)};function t(){}}}zst.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var t0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(t0||(t0={}));var b2;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(b2||(b2={}));function Gst(e){let{acceleration:t,activator:n=t0.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:o=5,order:l=b2.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:m,threshold:p}=e;const h=Kst({delta:m,disabled:!a}),[g,y]=rst(),v=f.useRef({x:0,y:0}),x=f.useRef({x:0,y:0}),b=f.useMemo(()=>{switch(n){case t0.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case t0.DraggableRect:return s}},[n,s,c]),_=f.useRef(null),w=f.useCallback(()=>{const S=_.current;if(!S)return;const E=v.current.x*x.current.x,M=v.current.y*x.current.y;S.scrollBy(E,M)},[]),C=f.useMemo(()=>l===b2.TreeOrder?[...u].reverse():u,[l,u]);f.useEffect(()=>{if(!a||!u.length||!b){y();return}for(const S of C){if(r?.(S)===!1)continue;const E=u.indexOf(S),M=d[E];if(!M)continue;const{direction:k,speed:T}=Pst(S,M,b,t,p);for(const j of["x","y"])h[j][k[j]]||(T[j]=0,k[j]=0);if(T.x>0||T.y>0){y(),_.current=S,g(w,o),v.current=T,x.current=k;return}}v.current={x:0,y:0},x.current={x:0,y:0},y()},[t,w,r,y,a,o,JSON.stringify(b),JSON.stringify(h),g,u,C,d,JSON.stringify(p)])}const qst={x:{[Qr.Backward]:!1,[Qr.Forward]:!1},y:{[Qr.Backward]:!1,[Qr.Forward]:!1}};function Kst(e){let{delta:t,disabled:n}=e;const r=y2(t);return O1(s=>{if(n||!r||!s)return qst;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Qr.Backward]:s.x[Qr.Backward]||a.x===-1,[Qr.Forward]:s.x[Qr.Forward]||a.x===1},y:{[Qr.Backward]:s.y[Qr.Backward]||a.y===-1,[Qr.Forward]:s.y[Qr.Forward]||a.y===1}}},[n,t,r])}function Yst(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return O1(s=>{var a;return t==null?null:(a=r??s)!=null?a:null},[r,t])}function Qst(e,t){return f.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...a]},[]),[e,t])}var iv;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(iv||(iv={}));var f8;(function(e){e.Optimized="optimized"})(f8||(f8={}));const eK=new Map;function Xst(e,t){let{dragging:n,dependencies:r,config:s}=t;const[a,o]=f.useState(null),{frequency:l,measure:c,strategy:u}=s,d=f.useRef(e),m=v(),p=av(m),h=f.useCallback(function(x){x===void 0&&(x=[]),!p.current&&o(b=>b===null?x:b.concat(x.filter(_=>!b.includes(_))))},[p]),g=f.useRef(null),y=O1(x=>{if(m&&!n)return eK;if(!x||x===eK||d.current!==e||a!=null){const b=new Map;for(let _ of e){if(!_)continue;if(a&&a.length>0&&!a.includes(_.id)&&_.rect.current){b.set(_.id,_.rect.current);continue}const w=_.node.current,C=w?new HO(c(w),w):null;_.rect.current=C,C&&b.set(_.id,C)}return b}return x},[e,a,n,m,c]);return f.useEffect(()=>{d.current=e},[e]),f.useEffect(()=>{m||h()},[n,m]),f.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),f.useEffect(()=>{m||typeof l!="number"||g.current!==null||(g.current=setTimeout(()=>{h(),g.current=null},l))},[l,m,h,...r]),{droppableRects:y,measureDroppableContainers:h,measuringScheduled:a!=null};function v(){switch(u){case iv.Always:return!1;case iv.BeforeDragging:return n;default:return!n}}}function qO(e,t){return O1(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Zst(e,t){return qO(e,t)}function Jst(e){let{callback:t,disabled:n}=e;const r=jE(t),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return f.useEffect(()=>()=>s?.disconnect(),[s]),s}function PE(e){let{callback:t,disabled:n}=e;const r=jE(t),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return f.useEffect(()=>()=>s?.disconnect(),[s]),s}function eat(e){return new HO(Jh(e),e)}function tK(e,t,n){t===void 0&&(t=eat);const[r,s]=f.useState(null);function a(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=Jst({callback(c){if(e)for(const u of c){const{type:d,target:m}=u;if(d==="childList"&&m instanceof HTMLElement&&m.contains(e)){a();break}}}}),l=PE({callback:a});return mi(()=>{a(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),r}function tat(e){const t=qO(e);return ope(e,t)}const nK=[];function nat(e){const t=f.useRef(e),n=O1(r=>e?r&&r!==nK&&e&&t.current&&e.parentNode===t.current.parentNode?r:IE(e):nK,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function rat(e){const[t,n]=f.useState(null),r=f.useRef(e),s=f.useCallback(a=>{const o=Ak(a.target);o&&n(l=>l?(l.set(o,u8(o)),new Map(l)):null)},[]);return f.useEffect(()=>{const a=r.current;if(e!==a){o(a);const l=e.map(c=>{const u=Ak(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,u8(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{o(e),o(a)};function o(l){l.forEach(c=>{const u=Ak(c);u?.removeEventListener("scroll",s)})}},[s,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,o)=>Xm(a,o),pi):mpe(e):pi,[e,t])}function rK(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const r=e!==pi;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ov(e,n.current):pi}function sat(e){f.useEffect(()=>{if(!AE)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function aat(e,t){return f.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=o=>{a(o,t)},n},{}),[e,t])}function ype(e){return f.useMemo(()=>e?Ast(e):null,[e])}const sK=[];function oat(e,t){t===void 0&&(t=Jh);const[n]=e,r=ype(n?ia(n):null),[s,a]=f.useState(sK);function o(){a(()=>e.length?e.map(c=>dpe(c)?r:new HO(t(c),c)):sK)}const l=PE({callback:o});return mi(()=>{l?.disconnect(),o(),e.forEach(c=>l?.observe(c))},[e]),s}function vpe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return P1(t)?t:e}function iat(e){let{measure:t}=e;const[n,r]=f.useState(null),s=f.useCallback(u=>{for(const{target:d}of u)if(P1(d)){r(m=>{const p=t(d);return m?{...m,width:p.width,height:p.height}:p});break}},[t]),a=PE({callback:s}),o=f.useCallback(u=>{const d=vpe(u);a?.disconnect(),d&&a?.observe(d),r(d?t(d):null)},[t,a]),[l,c]=g2(o);return f.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const lat=[{sensor:GO,options:{}},{sensor:gpe,options:{}}],cat={current:{}},X_={draggable:{measure:Qq},droppable:{measure:Qq,strategy:iv.WhileDragging,frequency:f8.Optimized},dragOverlay:{measure:Jh}};class n0 extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const uat={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new n0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:x2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:X_,measureDroppableContainers:x2,windowRect:null,measuringScheduled:!1},xpe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:x2,draggableNodes:new Map,over:null,measureDroppableContainers:x2},D1=f.createContext(xpe),bpe=f.createContext(uat);function dat(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new n0}}}function fat(e,t){switch(t.type){case Vr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Vr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Vr.DragEnd:case Vr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Vr.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new n0(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Vr.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const o=new n0(e.droppable.containers);return o.set(n,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:o}}}case Vr.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new n0(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function mat(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=f.useContext(D1),a=y2(r),o=y2(n?.id);return f.useEffect(()=>{if(!t&&!r&&a&&o!=null){if(!RE(a)||document.activeElement===a.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const m=ost(d);if(m){m.focus();break}}})}},[r,t,s,o,a]),null}function _pe(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,a)=>a({transform:s,...r}),n):n}function pat(e){return f.useMemo(()=>({draggable:{...X_.draggable,...e?.draggable},droppable:{...X_.droppable,...e?.droppable},dragOverlay:{...X_.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function hat(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const a=f.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;mi(()=>{if(!o&&!l||!t){a.current=!1;return}if(a.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const d=n(u),m=ope(d,r);if(o||(m.x=0),l||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const p=lpe(u);p&&p.scrollBy({top:m.y,left:m.x})}},[t,o,l,r,n])}const OE=f.createContext({...pi,scaleX:1,scaleY:1});var zc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(zc||(zc={}));const gat=f.memo(function(t){var n,r,s,a;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=lat,collisionDetection:m=wst,measuring:p,modifiers:h,...g}=t;const y=f.useReducer(fat,void 0,dat),[v,x]=y,[b,_]=fst(),[w,C]=f.useState(zc.Uninitialized),S=w===zc.Initialized,{draggable:{active:E,nodes:M,translate:k},droppable:{containers:T}}=v,j=E!=null?M.get(E):null,R=f.useRef({initial:null,translated:null}),O=f.useMemo(()=>{var Ke;return E!=null?{id:E,data:(Ke=j?.data)!=null?Ke:cat,rect:R}:null},[E,j]),P=f.useRef(null),[N,I]=f.useState(null),[D,F]=f.useState(null),B=av(g,Object.values(g)),V=L1("DndDescribedBy",o),$=f.useMemo(()=>T.getEnabled(),[T]),G=pat(p),{droppableRects:X,measureDroppableContainers:Y,measuringScheduled:W}=Xst($,{dragging:S,dependencies:[k.x,k.y],config:G.droppable}),H=Yst(M,E),Z=f.useMemo(()=>D?v2(D):null,[D]),re=ln(),q=Zst(H,G.draggable.measure);hat({activeNode:E!=null?M.get(E):null,config:re.layoutShiftCompensation,initialRect:q,measure:G.draggable.measure});const J=tK(H,G.draggable.measure,q),te=tK(H?H.parentElement:null),se=f.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),de=T.getNodeFor((n=se.current.over)==null?void 0:n.id),fe=iat({measure:G.dragOverlay.measure}),ve=(r=fe.nodeRef.current)!=null?r:H,ue=S?(s=fe.rect)!=null?s:J:null,ie=!!(fe.nodeRef.current&&fe.rect),be=tat(ie?null:J),Se=ype(ve?ia(ve):null),Ce=nat(S?de??H:null),ke=oat(Ce),Re=_pe(h,{transform:{x:k.x-be.x,y:k.y-be.y,scaleX:1,scaleY:1},activatorEvent:D,active:O,activeNodeRect:J,containerNodeRect:te,draggingNodeRect:ue,over:se.current.over,overlayNodeRect:fe.rect,scrollableAncestors:Ce,scrollableAncestorRects:ke,windowRect:Se}),je=Z?Xm(Z,k):null,ct=rat(Ce),tt=rK(ct),ut=rK(ct,[J]),we=Xm(Re,tt),Ue=ue?kst(ue,Re):null,Ot=O&&Ue?m({active:O,collisionRect:Ue,droppableRects:X,droppableContainers:$,pointerCoordinates:je}):null,pt=ape(Ot,"id"),[Mt,qe]=f.useState(null),Be=ie?Re:Xm(Re,ut),Oe=Est(Be,(a=Mt?.rect)!=null?a:null,J),nt=f.useRef(null),St=f.useCallback((Ke,He)=>{let{sensor:st,options:Vt}=He;if(P.current==null)return;const en=M.get(P.current);if(!en)return;const On=Ke.nativeEvent,_e=new st({active:P.current,activeNode:en,event:On,options:Vt,context:se,onAbort(We){if(!M.get(We))return;const{onDragAbort:et}=B.current,kt={id:We};et?.(kt),b({type:"onDragAbort",event:kt})},onPending(We,rt,et,kt){if(!M.get(We))return;const{onDragPending:tn}=B.current,cn={id:We,constraint:rt,initialCoordinates:et,offset:kt};tn?.(cn),b({type:"onDragPending",event:cn})},onStart(We){const rt=P.current;if(rt==null)return;const et=M.get(rt);if(!et)return;const{onDragStart:kt}=B.current,_n={activatorEvent:On,active:{id:rt,data:et.data,rect:R}};xs.unstable_batchedUpdates(()=>{kt?.(_n),C(zc.Initializing),x({type:Vr.DragStart,initialCoordinates:We,active:rt}),b({type:"onDragStart",event:_n}),I(nt.current),F(On)})},onMove(We){x({type:Vr.DragMove,coordinates:We})},onEnd:Ge(Vr.DragEnd),onCancel:Ge(Vr.DragCancel)});nt.current=_e;function Ge(We){return async function(){const{active:et,collisions:kt,over:_n,scrollAdjustedTranslate:tn}=se.current;let cn=null;if(et&&tn){const{cancelDrop:Mr}=B.current;cn={activatorEvent:On,active:et,collisions:kt,delta:tn,over:_n},We===Vr.DragEnd&&typeof Mr=="function"&&await Promise.resolve(Mr(cn))&&(We=Vr.DragCancel)}P.current=null,xs.unstable_batchedUpdates(()=>{x({type:We}),C(zc.Uninitialized),qe(null),I(null),F(null),nt.current=null;const Mr=We===Vr.DragEnd?"onDragEnd":"onDragCancel";if(cn){const La=B.current[Mr];La?.(cn),b({type:Mr,event:cn})}})}}},[M]),Yt=f.useCallback((Ke,He)=>(st,Vt)=>{const en=st.nativeEvent,On=M.get(Vt);if(P.current!==null||!On||en.dndKit||en.defaultPrevented)return;const _e={active:On};Ke(st,He.options,_e)===!0&&(en.dndKit={capturedBy:He.sensor},P.current=Vt,St(st,He))},[M,St]),Ft=Qst(d,Yt);sat(d),mi(()=>{J&&w===zc.Initializing&&C(zc.Initialized)},[J,w]),f.useEffect(()=>{const{onDragMove:Ke}=B.current,{active:He,activatorEvent:st,collisions:Vt,over:en}=se.current;if(!He||!st)return;const On={active:He,activatorEvent:st,collisions:Vt,delta:{x:we.x,y:we.y},over:en};xs.unstable_batchedUpdates(()=>{Ke?.(On),b({type:"onDragMove",event:On})})},[we.x,we.y]),f.useEffect(()=>{const{active:Ke,activatorEvent:He,collisions:st,droppableContainers:Vt,scrollAdjustedTranslate:en}=se.current;if(!Ke||P.current==null||!He||!en)return;const{onDragOver:On}=B.current,_e=Vt.get(pt),Ge=_e&&_e.rect.current?{id:_e.id,rect:_e.rect.current,data:_e.data,disabled:_e.disabled}:null,We={active:Ke,activatorEvent:He,collisions:st,delta:{x:en.x,y:en.y},over:Ge};xs.unstable_batchedUpdates(()=>{qe(Ge),On?.(We),b({type:"onDragOver",event:We})})},[pt]),mi(()=>{se.current={activatorEvent:D,active:O,activeNode:H,collisionRect:Ue,collisions:Ot,droppableRects:X,draggableNodes:M,draggingNode:ve,draggingNodeRect:ue,droppableContainers:T,over:Mt,scrollableAncestors:Ce,scrollAdjustedTranslate:we},R.current={initial:ue,translated:Ue}},[O,H,Ot,Ue,M,ve,ue,X,T,Mt,Ce,we]),Gst({...re,delta:k,draggingRect:Ue,pointerCoordinates:je,scrollableAncestors:Ce,scrollableAncestorRects:ke});const Gt=f.useMemo(()=>({active:O,activeNode:H,activeNodeRect:J,activatorEvent:D,collisions:Ot,containerNodeRect:te,dragOverlay:fe,draggableNodes:M,droppableContainers:T,droppableRects:X,over:Mt,measureDroppableContainers:Y,scrollableAncestors:Ce,scrollableAncestorRects:ke,measuringConfiguration:G,measuringScheduled:W,windowRect:Se}),[O,H,J,D,Ot,te,fe,M,T,X,Mt,Y,Ce,ke,G,W,Se]),Cn=f.useMemo(()=>({activatorEvent:D,activators:Ft,active:O,activeNodeRect:J,ariaDescribedById:{draggable:V},dispatch:x,draggableNodes:M,over:Mt,measureDroppableContainers:Y}),[D,Ft,O,J,x,V,M,Mt,Y]);return A.createElement(spe.Provider,{value:_},A.createElement(D1.Provider,{value:Cn},A.createElement(bpe.Provider,{value:Gt},A.createElement(OE.Provider,{value:Oe},u)),A.createElement(mat,{disabled:l?.restoreFocus===!1})),A.createElement(hst,{...l,hiddenTextDescribedById:V}));function ln(){const Ke=N?.autoScrollEnabled===!1,He=typeof c=="object"?c.enabled===!1:c===!1,st=S&&!Ke&&!He;return typeof c=="object"?{...c,enabled:st}:{enabled:st}}}),yat=f.createContext(null),aK="button",vat="Draggable";function xat(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const a=L1(vat),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:m,over:p}=f.useContext(D1),{role:h=aK,roleDescription:g="draggable",tabIndex:y=0}=s??{},v=c?.id===t,x=f.useContext(v?OE:yat),[b,_]=g2(),[w,C]=g2(),S=aat(o,t),E=av(n);mi(()=>(m.set(t,{id:t,key:a,node:b,activatorNode:w,data:E}),()=>{const k=m.get(t);k&&k.key===a&&m.delete(t)}),[m,t]);const M=f.useMemo(()=>({role:h,tabIndex:y,"aria-disabled":r,"aria-pressed":v&&h===aK?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[r,h,y,v,g,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:M,isDragging:v,listeners:r?void 0:S,node:b,over:p,setNodeRef:_,setActivatorNodeRef:C,transform:x}}function wpe(){return f.useContext(bpe)}const bat="Droppable",_at={timeout:25};function wat(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const a=L1(bat),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=f.useContext(D1),d=f.useRef({disabled:n}),m=f.useRef(!1),p=f.useRef(null),h=f.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:v}={..._at,...s},x=av(y??r),b=f.useCallback(()=>{if(!m.current){m.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),h.current=null},v)},[v]),_=PE({callback:b,disabled:g||!o}),w=f.useCallback((M,k)=>{_&&(k&&(_.unobserve(k),m.current=!1),M&&_.observe(M))},[_]),[C,S]=g2(w),E=av(t);return f.useEffect(()=>{!_||!C.current||(_.disconnect(),m.current=!1,_.observe(C.current))},[C,_]),f.useEffect(()=>(l({type:Vr.RegisterDroppable,element:{id:r,key:a,disabled:n,node:C,rect:p,data:E}}),()=>l({type:Vr.UnregisterDroppable,key:a,id:r})),[r]),f.useEffect(()=>{n!==d.current.disabled&&(l({type:Vr.SetDroppableDisabled,id:r,key:a,disabled:n}),d.current.disabled=n)},[r,a,n,l]),{active:o,rect:p,isOver:c?.id===r,node:C,over:c,setNodeRef:S}}function Cat(e){let{animation:t,children:n}=e;const[r,s]=f.useState(null),[a,o]=f.useState(null),l=y2(n);return!n&&!r&&l&&s(l),mi(()=>{if(!a)return;const c=r?.key,u=r?.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,a)).then(()=>{s(null)})},[t,r,a]),A.createElement(A.Fragment,null,n,r?f.cloneElement(r,{ref:o}):null)}const Sat={x:0,y:0,scaleX:1,scaleY:1};function Eat(e){let{children:t}=e;return A.createElement(D1.Provider,{value:xpe},A.createElement(OE.Provider,{value:Sat},t))}const Mat={position:"fixed",touchAction:"none"},kat=e=>RE(e)?"transform 250ms ease":void 0,Tat=f.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:o,rect:l,style:c,transform:u,transition:d=kat}=e;if(!l)return null;const m=s?u:{...u,scaleX:1,scaleY:1},p={...Mat,width:l.width,height:l.height,top:l.top,left:l.left,transform:of.Transform.toString(m),transformOrigin:s&&r?vst(r,l):void 0,transition:typeof d=="function"?d(r):d,...c};return A.createElement(n,{className:o,style:p,ref:t},a)}),Nat=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:a,className:o}=e;if(a!=null&&a.active)for(const[l,c]of Object.entries(a.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(a!=null&&a.dragOverlay)for(const[l,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},Aat=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:of.Transform.toString(t)},{transform:of.Transform.toString(n)}]},jat={duration:250,easing:"ease",keyframes:Aat,sideEffects:Nat({styles:{active:{opacity:"0"}}})};function Rat(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return jE((a,o)=>{if(t===null)return;const l=n.get(a);if(!l)return;const c=l.node.current;if(!c)return;const u=vpe(o);if(!u)return;const{transform:d}=ia(o).getComputedStyle(o),m=ipe(d);if(!m)return;const p=typeof t=="function"?t:Iat(t);return ppe(c,s.draggable.measure),p({active:{id:a,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function Iat(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...jat,...e};return a=>{let{active:o,dragOverlay:l,transform:c,...u}=a;if(!t)return;const d={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},m={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-d.x,y:c.y-d.y,...m},h=s({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[g]=h,y=h[h.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const v=r?.({active:o,dragOverlay:l,...u}),x=l.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(b=>{x.onfinish=()=>{v?.(),b()}})}}let oK=0;function Pat(e){return f.useMemo(()=>{if(e!=null)return oK++,oK},[e])}const kUt=A.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:m,activeNodeRect:p,containerNodeRect:h,draggableNodes:g,droppableContainers:y,dragOverlay:v,over:x,measuringConfiguration:b,scrollableAncestors:_,scrollableAncestorRects:w,windowRect:C}=wpe(),S=f.useContext(OE),E=Pat(m?.id),M=_pe(o,{activatorEvent:d,active:m,activeNodeRect:p,containerNodeRect:h,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:_,scrollableAncestorRects:w,transform:S,windowRect:C}),k=qO(p),T=Rat({config:r,draggableNodes:g,droppableContainers:y,measuringConfiguration:b}),j=k?v.setRef:void 0;return A.createElement(Eat,null,A.createElement(Cat,{animation:T},m&&E?A.createElement(Tat,{key:E,id:m.id,ref:j,as:l,activatorEvent:d,adjustScale:t,className:c,transition:a,rect:k,style:{zIndex:u,...s},transform:M},n):null))});function KO(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Oat(e,t){return e.reduce((n,r,s)=>{const a=t.get(r);return a&&(n[s]=a),n},Array(e.length))}function Rb(e){return e!==null&&e>=0}function Lat(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Dat(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Cpe=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const a=KO(t,r,n),o=t[s],l=a[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Ib={scaleX:1,scaleY:1},TUt=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:o}=e;const l=(t=a[n])!=null?t:r;if(!l)return null;if(s===n){const u=a[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Ib}:null}const c=Fat(a,s,n);return s>n&&s<=o?{x:0,y:-l.height-c,...Ib}:s<n&&s>=o?{x:0,y:l.height+c,...Ib}:{x:0,y:0,...Ib}};function Fat(e,t,n){const r=e[t],s=e[t-1],a=e[t+1];return r?n<t?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Spe="Sortable",Epe=A.createContext({activeIndex:-1,containerId:Spe,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Cpe,disabled:{draggable:!1,droppable:!1}});function Uat(e){let{children:t,id:n,items:r,strategy:s=Cpe,disabled:a=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=wpe(),m=L1(Spe,n),p=l.rect!==null,h=f.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),g=o!=null,y=o?h.indexOf(o.id):-1,v=u?h.indexOf(u.id):-1,x=f.useRef(h),b=!Lat(h,x.current),_=v!==-1&&y===-1||b,w=Dat(a);mi(()=>{b&&g&&d(h)},[b,h,g,d]),f.useEffect(()=>{x.current=h},[h]);const C=f.useMemo(()=>({activeIndex:y,containerId:m,disabled:w,disableTransforms:_,items:h,overIndex:v,useDragOverlay:p,sortedRects:Oat(h,c),strategy:s}),[y,m,w.draggable,w.droppable,_,h,v,c,p,s]);return A.createElement(Epe.Provider,{value:C},t)}const Bat=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return KO(n,r,s).indexOf(t)},Vat=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:a,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!r||l!==a&&s===o?!1:n?!0:o!==s&&t===c},Wat={duration:200,easing:"ease"},Mpe="transform",$at=of.Transition.toString({property:Mpe,duration:0,easing:"linear"}),Hat={roleDescription:"sortable"};function zat(e){let{disabled:t,index:n,node:r,rect:s}=e;const[a,o]=f.useState(null),l=f.useRef(n);return mi(()=>{if(!t&&n!==l.current&&r.current){const c=s.current;if(c){const u=Jh(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}n!==l.current&&(l.current=n)},[t,n,r,s]),f.useEffect(()=>{a&&o(null)},[a]),a}function Gat(e){let{animateLayoutChanges:t=Vat,attributes:n,disabled:r,data:s,getNewIndex:a=Bat,id:o,strategy:l,resizeObserverConfig:c,transition:u=Wat}=e;const{items:d,containerId:m,activeIndex:p,disabled:h,disableTransforms:g,sortedRects:y,overIndex:v,useDragOverlay:x,strategy:b}=f.useContext(Epe),_=qat(r,h),w=d.indexOf(o),C=f.useMemo(()=>({sortable:{containerId:m,index:w,items:d},...s}),[m,s,w,d]),S=f.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:E,node:M,isOver:k,setNodeRef:T}=wat({id:o,data:C,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:j,activatorEvent:R,activeNodeRect:O,attributes:P,setNodeRef:N,listeners:I,isDragging:D,over:F,setActivatorNodeRef:B,transform:V}=xat({id:o,data:C,attributes:{...Hat,...n},disabled:_.draggable}),$=nst(T,N),G=!!j,X=G&&!g&&Rb(p)&&Rb(v),Y=!x&&D,W=Y&&X?V:null,Z=X?W??(l??b)({rects:y,activeNodeRect:O,activeIndex:p,overIndex:v,index:w}):null,re=Rb(p)&&Rb(v)?a({id:o,items:d,activeIndex:p,overIndex:v}):w,q=j?.id,J=f.useRef({activeId:q,items:d,newIndex:re,containerId:m}),te=d!==J.current.items,se=t({active:j,containerId:m,isDragging:D,isSorting:G,id:o,index:w,items:d,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:u,wasDragging:J.current.activeId!=null}),de=zat({disabled:!se,index:w,node:M,rect:E});return f.useEffect(()=>{G&&J.current.newIndex!==re&&(J.current.newIndex=re),m!==J.current.containerId&&(J.current.containerId=m),d!==J.current.items&&(J.current.items=d)},[G,re,m,d]),f.useEffect(()=>{if(q===J.current.activeId)return;if(q!=null&&J.current.activeId==null){J.current.activeId=q;return}const ve=setTimeout(()=>{J.current.activeId=q},50);return()=>clearTimeout(ve)},[q]),{active:j,activeIndex:p,attributes:P,data:C,rect:E,index:w,newIndex:re,items:d,isOver:k,isSorting:G,isDragging:D,listeners:I,node:M,overIndex:v,over:F,setNodeRef:$,setActivatorNodeRef:B,setDroppableNodeRef:T,setDraggableNodeRef:N,transform:de??Z,transition:fe()};function fe(){if(de||te&&J.current.newIndex===w)return $at;if(!(Y&&!RE(R)||!u)&&(G||se))return of.Transition.toString({...u,property:Mpe})}}function qat(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function _2(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Kat=[mn.Down,mn.Right,mn.Up,mn.Left],NUt=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:o,scrollableAncestors:l}}=t;if(Kat.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];a.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const p=s.get(m.id);if(p)switch(e.code){case mn.Down:r.top<p.top&&c.push(m);break;case mn.Up:r.top>p.top&&c.push(m);break;case mn.Left:r.left>p.left&&c.push(m);break;case mn.Right:r.left<p.left&&c.push(m);break}});const u=bst({collisionRect:r,droppableRects:s,droppableContainers:c});let d=ape(u,"id");if(d===o?.id&&u.length>1&&(d=u[1].id),d!=null){const m=a.get(n.id),p=a.get(d),h=p?s.get(p.id):null,g=p?.node.current;if(g&&h&&m&&p){const v=IE(g).some((S,E)=>l[E]!==S),x=kpe(m,p),b=Yat(m,p),_=v||!x?{x:0,y:0}:{x:b?r.width-h.width:0,y:b?r.height-h.height:0},w={x:h.left,y:h.top};return _.x&&_.y?w:ov(w,_)}}}};function kpe(e,t){return!_2(e)||!_2(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Yat(e,t){return!_2(e)||!_2(t)||!kpe(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Qat=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=$e({enabled:e,queryKey:lVe(),queryFn:fJe,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}};function Xat(){const{data:e,isLoading:t}=Qat(),{trackEvent:n,trackEventOnce:r}=Me(),s=E1(e??void 0),[a,o]=f.useState(!1);f.useEffect(()=>{e&&e.name!=="comet_ntp_set_default"&&e.app_location===$l.COMET_NTP_BANNER&&(o(!0),r("ntp banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,r]);const l=f.useCallback(()=>{e&&(n("ntp banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),o(!1),ZYe(e.name))},[e,n]),c=f.useCallback(()=>{e&&(n("ntp banner upsell clicked",{upsellName:e.name,upsellType:e.upsell_type}),s())},[e,n,s]),u=f.useMemo(()=>{if(e?.icon_reference&&e.icon_reference in Gl)return Gl[e.icon_reference]},[e]);return f.useMemo(()=>({show:a&&!!e,onDismiss:l,onClick:c,icon:u,title:e?.title,actionLabel:e?.button_text,isLoading:t,upsellName:e?.name}),[l,c,a,u,e,t])}const Tpe="pplx-top-sites-cache",Zat=()=>{try{const e=Ae.getItem(Tpe);return e?JSON.parse(e):[]}catch{return[]}},Jat=e=>{Ae.setItem(Tpe,JSON.stringify(e))};function Npe({maxUrls:e=15}={}){const t=wr(),n=Zat();return $e({queryKey:["topMostUrls"],queryFn:async()=>{const s=(await pze({cometBrowser:t,maxUrls:e}))?.reduce((o,l)=>{const u=new URL(l.url).hostname;return(!o[u]||o[u].visitCount<l.visitCount)&&(o[u]=l),o},{})??{},a=Object.values(s);return Jat(a),a},placeholderData:n,staleTime:5*60*1e3})}const w2="comet-widgets",lf="comet-widgets-content",YO="default-shortcut-task-id";function eot(e,t){return e.find(n=>n.type===t)}function tot(e){return typeof e=="object"&&e!==null&&"version"in e&&typeof e.version=="number"&&e.version===1&&"taskId"in e&&typeof e.taskId=="string"&&"name"in e&&typeof e.name=="string"&&"query"in e&&typeof e.query=="string"}function Ape({context:e,widgetId:t,defaultQuery:n,defaultName:r}){if(e==="widget"){const s=eg("SHORTCUT",t);if(tot(s))return s}return{version:1,taskId:YO,name:r??"",query:n??""}}function not(){if(Ae.getItem(lf))return;const t=Ae.getItem(w2);if(t)try{const n=JSON.parse(t),r={},s=n.map(a=>{if(a.content){const{content:o,...l}=a;return r[a.id]=o,l}return{id:a.id,type:a.type}});Ae.setItem(w2,JSON.stringify(s)),Ae.setItem(lf,JSON.stringify(r))}catch{}}function jpe(e){not();const t=Ae.getItem(w2);if(!t)return e;try{const n=JSON.parse(t);return!n||!Array.isArray(n)?e:n.every(s=>s.id&&s.type&&typeof s.type=="string")?n:(QO(e),e)}catch{return e}}function QO(e){Ae.setItem(w2,JSON.stringify(e))}function rot(e){const n=jpe([]).filter(r=>r.id!==e);QO(n)}function sot(e){const t=Ae.getItem(lf);if(!t)return!1;try{return!!JSON.parse(t)[e]}catch{return!1}}function eg(e,t){const n=Ae.getItem(lf);if(!n)return null;let r=null;try{r=JSON.parse(n)[t]}catch{return null}return typeof r!="object"||r===null?null:{version:1,...r}}function Rf(e,t,n){const r=Ae.getItem(lf);let s={};if(r)try{s=JSON.parse(r)}catch{s={}}s[t]=n,Ae.setItem(lf,JSON.stringify(s))}function aot(e){const t=Ae.getItem(lf);if(!t)return!1;try{const n=JSON.parse(t);return e.every(s=>!!n[s])}catch{return!1}}function oot(e){return e.startsWith("student-shortcut-")}const iK="widget-analytics-last-sent",iot=6*60*60*1e3;function lot(e){const{trackEvent:t}=Me();f.useEffect(()=>{const n=Date.now(),r=Ae.getItem(iK),s=r?parseInt(r,10):0;if(n-s<iot)return;const a={},o=[];e.forEach(l=>{a[l.type]=(a[l.type]||0)+1,sot(l.id)&&o.push(l.type)}),t("comet home widgets viewed",{enabledWidgets:a,widgetsWithSettings:o}),Ae.setItem(iK,n.toString())},[e,t])}const lK="assistant-promo-config-cached";function cot(){const{value:e,loading:t}=Tc({flag:"assistant-promo-deeplinks",subjectType:"user_nextauth_id",defaultValue:{}}),[n,r]=f.useState(()=>{const a=Ae.getItem(lK);return a?JSON.parse(a):{}});f.useEffect(()=>{const a=e;!t&&JSON.stringify(a)!==JSON.stringify(n)&&(r(a),Ae.setItem(lK,JSON.stringify(a)))},[e,n,t]);const s=!!(n.deeplinkQueries&&n.deeplinkQueries.length>0);return f.useMemo(()=>({config:n,isLoading:t,shouldShowExploreAssistant:s}),[n,t,s])}const cK="explore-assistant-should-show-cached",Z_="explore-assistant-history-cache",Rpe=10*60*1e3,Ik=e=>e!=="unknown"&&!!e,uot=()=>{try{const e=Ae.getItem(Z_);if(!e)return null;const t=JSON.parse(e);return Date.now()-t.timestamp>Rpe?(Ae.removeItem(Z_),null):new Set(t.domainsInHistory)}catch{return Ae.removeItem(Z_),null}},uK=e=>{const t={timestamp:Date.now(),domainsInHistory:Array.from(e)};Ae.setItem(Z_,JSON.stringify(t))},dK={url:"https://www.nytimes.com/games/wordle/index.html",query:"Take control over browser and win Wordle for me"},dot=(e,t)=>!e||!t?`${dK.url}#comet=${encodeURIComponent(dK.query)}`:`${e}#comet=${encodeURIComponent(t)}`;function XO(){const{config:e,isLoading:t}=cot(),n=wr(),[r,s]=f.useState(()=>{const h=Ae.getItem(cK);return h?JSON.parse(h):!1}),a=f.useMemo(()=>e.deeplinkQueries||[],[e]),o=f.useMemo(()=>{const h=new Set;return a.forEach(g=>{if(g.action==="HISTORY_PRESENCE"){const y=Zs(g.url);Ik(y)&&h.add(y)}}),Array.from(h)},[a]),{data:l}=$e({queryKey:["explore-assistant-history",o],queryFn:async()=>{if(!n||o.length===0)return new Set;const h=uot();if(h!==null)return h;try{const g=await n.getHistorySummary("explore-assistant-check",o,14,1),y=new Set;return g.history_results?.forEach(v=>{const x=Zs(v?.url||"");Ik(x)&&o.includes(x)&&y.add(x)}),uK(y),y}catch{return new Yy("PARSE_HISTORY_FAILED",{message:"Explore Assistant failed to parse history"}),uK(new Set),new Set}},staleTime:Rpe,enabled:!0,retry:!1,throwOnError:!1}),c=f.useMemo(()=>l||new Set,[l]),u=f.useMemo(()=>{if(a.length===0)return null;const h=[],g=a.filter(x=>x.action==="ALWAYS");h.push(...g);const y=a.filter(x=>{if(x.action!=="HISTORY_PRESENCE")return!1;const b=Zs(x.url);return Ik(b)&&c.has(b)});if(h.push(...y),h.length===0)return null;const v=Math.floor(Math.random()*h.length);return h[v]||null},[a,c]),d=f.useMemo(()=>dot(u?.url,u?.query),[u]),m=a?.length>0;f.useEffect(()=>{m!==r&&(s(m),Ae.setItem(cK,JSON.stringify(m)))},[m,r]);const p=t?r:m;return f.useMemo(()=>({targetUrl:d,isLoading:t,shouldShowWidget:p}),[d,t,p])}const Ipe="default-widgets-cached";function Ppe(e){return`student-shortcut-${e}`}const m8=Array.from({length:4},(e,t)=>Ppe(t)),p8=e=>[...m8.map(t=>({id:t,type:"SHORTCUT"})),{id:"default-analog-clock",type:"ANALOG_CLOCK"},{id:e?"default-explore-assistant":"default-assistant",type:e?"EXPLORE_ASSISTANT":"ASSISTANT"},{id:"default-stock",type:"STOCK"},{id:"default-weather",type:"WEATHER"},{id:"top-most-urls",type:"TOP_URLS"}],fot=()=>{const e=Ae.getItem(Ipe);if(e)try{return JSON.parse(e)}catch{return p8(!1)}return p8(!1)};function mot(){const{shouldShowWidget:e,isLoading:t}=XO(),[n,r]=f.useState(fot()),s=f.useMemo(()=>p8(e),[e]);f.useEffect(()=>{if(!t){const o=JSON.stringify(s),l=JSON.stringify(n);o!==l&&(r(s),Ae.setItem(Ipe,o))}},[t,s,n]);const a=t?n:s;return f.useMemo(()=>({defaultWidgets:a,isLoading:t}),[a,t])}const If=Pe({productionMs:3e3}),pot=Pe({productionMs:5e3}),fK={TASK_LIMIT_EXCEEDED:"TASK_LIMIT_EXCEEDED",SHORTCUT_NAME_ALREADY_EXISTS:"SHORTCUT_NAME_ALREADY_EXISTS"},LE=async({taskId:e,headers:t,reason:n})=>{const{data:r,error:s}=await ne.GET("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},timeoutMs:Pe(),numRetries:Sc,headers:t});if(s)throw s;return r?.task?oie(r.task):null};async function AUt({headers:e,reason:t,schedulerType:n}){const r="getUserAlerts";try{const a=(await ne.GET("/rest/tasks/",t,{params:{query:{scheduler_type:n}},timeoutMs:Pe(),numRetries:Sc,headers:e})).data?.tasks.map(oie);return a?a.sort((o,l)=>l.createdAt.valueOf()-o.createdAt.valueOf()):[]}catch(s){return ee.log(`Error in ${r}:`,s),[]}}const hot=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/",t,{body:e});if(r)throw r;return n},h8=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ne.PATCH("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},Ope=async({taskId:e,reason:t})=>ne.DELETE("/rest/tasks/{task_id}",t,{params:{path:{task_id:e}},timeoutMs:If}),jUt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/suggest",t,{body:e,timeoutMs:1e4});if(r)throw r;return n},got=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/finance",t,{body:e});if(r)throw r;return n},yot=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ne.PATCH("/rest/tasks/finance/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},vot=async({ticker:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/tasks/finance/tickers/{ticker}",t,{params:{path:{ticker:e}},timeoutMs:Pe(),numRetries:Sc});if(r)throw ee.error("Failed to get finance ticker",r),r;return n},RUt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/shortcuts",t,{body:e,timeoutMs:If});if(r)throw r;return n},IUt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/shortcuts/slug",t,{body:e,timeoutMs:pot});if(r)throw r;return n},PUt=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ne.PATCH("/rest/tasks/shortcuts/{task_id}",n,{body:t,params:{path:{task_id:e}},timeoutMs:If});if(s)throw s;return r},OUt=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await ne.DELETE("/rest/tasks/shortcuts/defaults/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:If});if(r)throw r;return n},LUt=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/tasks/shortcuts/copy/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:If});if(r)throw r;return n},xot=async({copyToken:e,reason:t,headers:n})=>{const{data:r,error:s}=await ne.GET("/rest/tasks/shortcuts/paste/{copy_token}",t,{params:{path:{copy_token:e}},headers:n,timeoutMs:If});if(s)throw s;return r},Lpe=async({reason:e,headers:t})=>{const{data:n,error:r}=await ne.GET("/rest/tasks/shortcuts/mentions",e,{params:{query:{order_by:"created_at"}},timeoutMs:If,numRetries:Sc,headers:t});if(r)throw ee.error("Failed to get shortcut typeahead options",r),r;return n},DE=({reason:e,...t})=>$e({queryKey:yVe(),queryFn:async()=>{const{tasks:n}=await Lpe({reason:e});return n},...t}),Dpe="comet-shortcuts-student-status-cached";function bot(){const e=Ae.getItem(Dpe);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function _ot(e){Ae.setItem(Dpe,JSON.stringify(e))}function wot(e){return e.length>0&&aot(e)}function Cot(){const[e]=f.useState(bot),[t,n]=f.useState(wot(m8)),{data:r,isLoading:s}=DE({reason:"student-widgets-shortcuts"}),a=f.useMemo(()=>r?.filter(p=>p.metadata?.student_only)||[],[r]),o=f.useRef(null),l=f.useMemo(()=>(!o.current&&a.length>0&&(o.current=[...a].sort(()=>Math.random()-.5).slice(0,Math.min(a.length,m8.length))),o.current||[]),[a]),{signals:c,isLoading:u}=Aue({reason:"student-widgets"}),d=f.useMemo(()=>c.isVerifiedStudent||!1,[c.isVerifiedStudent]),m=f.useMemo(()=>u&&e!==null?e:d,[u,e,d]);return f.useEffect(()=>{u||_ot(d)},[u,d]),f.useEffect(()=>{m&&r&&!s&&(l.forEach(({task_id:p,task_name:h,prompt:g},y)=>{Rf("SHORTCUT",Ppe(y),{version:1,taskId:p,name:h||"",query:g||""})}),n(l.length>0))},[m,r,l,s]),{showStudentWidgets:m&&t}}const Fpe=A.memo(({shouldShow:e,onClose:t,onSetDefault:n})=>{const{$t:r}=Q();return i.jsx(z,{className:U("-mt-md col-span-full inline-flex flex-wrap items-center justify-center",{"opacity-100":e,"opacity-0":!e}),children:i.jsxs(z,{variant:"raised",className:"gap-sm pl-xs pr-sm py-xs shadow-subtle flex items-center rounded-full border",children:[i.jsxs("div",{className:"gap-xs group flex items-center",children:[i.jsx(Te,{icon:Lt,onClick:t,size:"small",pill:!0}),i.jsx(L,{variant:"small",color:"super",className:"whitespace-nowrap",children:r({defaultMessage:"{brand} works best as your default browser",id:"uTC0rExpLQ"},{brand:"Comet"})})]}),i.jsx(ge,{variant:"primaryGhost",size:"tiny",pill:!0,text:r({defaultMessage:"Set {brand} as default",id:"VssH9YxzlZ"},{brand:"Comet"}),onClick:n,icon:ro,extraCSS:"border-none"})]})})});Fpe.displayName="DefaultBrowserBanner";const Upe=A.memo(({shouldShow:e,title:t,actionLabel:n,icon:r,onDismiss:s,onClick:a})=>e?i.jsx(xe.div,{className:"-mt-md col-span-full inline-flex flex-wrap items-center justify-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:i.jsxs(z,{variant:"superLight",className:"gap-sm pl-xs pr-sm py-xs shadow-subtle flex cursor-pointer items-center rounded-full border",onClick:a,children:[i.jsxs("div",{className:"gap-xs flex items-center",children:[i.jsx(Te,{icon:Lt,onClick:o=>{o.stopPropagation(),s()},size:"small",pill:!0}),i.jsx(L,{variant:"small",color:"super",className:"whitespace-nowrap",children:t||""})]}),i.jsx(ge,{variant:"primary",size:"tiny",pill:!0,text:n||"",icon:r,extraCSS:"border-none"})]})}):null);Upe.displayName="NtpBanner";const Pu=A.memo(({onClose:e,children:t})=>i.jsx(Nu,{portalTarget:document.body,children:i.jsxs("div",{className:"fixed inset-0 flex size-full flex-col items-center justify-center",children:[i.jsx(xe.div,{onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:ao,className:"bg-backdrop/70 absolute inset-0"}),i.jsx(xe.div,{initial:{y:6,opacity:0},animate:{y:0,opacity:1},exit:{y:6,opacity:0},transition:ao,className:"w-full max-w-[360px]",children:i.jsx(Pn,{className:"shadow-overlay border-none",children:t})})]})}));Pu.displayName="WidgetModal";const Sot=()=>{const{trackEvent:e}=Me(),t=_t(),n="clicked spaces ad",r=f.useCallback(async a=>{a.preventDefault(),e(n,{source:"createSpaceSidebar"}),t.push("/spaces/templates")},[e,t]),s=f.useCallback(async()=>{e("space mentioned in query"),DBe()},[e]);return f.useMemo(()=>({handleCreateSpaceSidebarAdClick:r,handleSubmitQueryWithMention:s}),[r,s])},Bpe=e=>{const t=[];if(!e)return{dslQuery:void 0,mentions:t};let n=0;const r=s=>{let a="";if(s.type==="text"&&"text"in s)a=s.text;else if(s.type==="linebreak")a=`
`;else{if((s.type==="link"||s.type==="autolink")&&"url"in s)return a=`[${"children"in s&&Array.isArray(s.children)&&s.children.map(r).reduce((l,c)=>(l+=c,l),"")||""}](${s.url})`,a;if(s.type==="mention"){const l=s.props;if(l.variant==="tab")return t.push({id:l.uuid,url:l.url??"",type:l.variant}),n++,a=`<attachment citation_id="${n}" />`,a;if(l.variant==="space")return t.push({id:l.uuid,url:"",type:l.variant}),a="",a;if(l.variant==="shortcut")return t.push({id:l.uuid,url:"",type:l.variant}),a=l.queryText??"",a}}return"children"in s&&Array.isArray(s.children)?s.children.map(r).reduce((o,l)=>(o+=l,o),a):a};return{dslQuery:r(e)||void 0,mentions:t}},ZO=3e3;function Vpe({onSubmit:e,immediate:t=!0}){const n=FO(),r=Wnt(),s=kme(),a=$nt(),{setUserInput:o,setHasStartedTyping:l,setStartTypingTime:c,markInputAsSubmitted:u}=I1(),d=f.useRef(!1);f.useEffect(()=>()=>{d.current&&(u(),d.current=!1)},[u,t]);const m=f.useCallback(h=>{ee.info("ask input submitted");const g=a?performance.now()-a:void 0,{dslQuery:y,mentions:v}=Bpe(h.json?.root);e?.({timeFromFirstType:g,...h,dslQuery:y,mentions:h.mentions??v}),t?u():d.current=!0},[t,u,e,a]),p=f.useCallback((h,g)=>{!s&&h&&l(!0),a||c(performance.now()),o(h,g)},[s,o,l,a,c]);return[n,r,f.useMemo(()=>({onChange:p,onSubmit:m,setUserInput:o}),[p,m,o])]}var pa;(function(e){e.EXPOSURE="sbs exposure",e.JUDGMENT="sbs judgment",e.BANNER="sbs banner"})(pa||(pa={}));const C2=-1,Eot="sbs_analytics_",Mot=e=>{const t=e?.experiment_override;return t?JSON.stringify(t):""},kot=(e,t)=>{const n=e.side_by_side_metadata;return{displayPosition:t,experimentRole:n?.experiment_role||`entry_${t}`,entryUUID:e.backend_uuid,experimentOverride:Mot(n)}},Wpe=(e,t)=>`${Eot}${e}_${t}`,Pk=(e,t)=>{try{const n=Wpe(e,t);return Ae.getItem(n)==="true"}catch(n){return ee.error("Error checking localStorage for SBS event:",n),!1}},Ok=(e,t)=>{try{const n=Wpe(e,t);Ae.setItem(n,"true")}catch(n){ee.error("Error setting localStorage for SBS event:",n)}},Tot=({results:e,session:t,trackEvent:n})=>{const r=f.useCallback(()=>{if(!e[0])return null;const c=e[0].side_by_side_metadata;if(!c?.sibling_uuid)return null;const u=c.experiment_override,d=u&&Object.keys(u)[0]||"";return{evaluationUUID:c.sibling_uuid,experimentVariationKey:d,evaluatorID:t?.user?.id||t?.user?.email||"anonymous"}},[e,t?.user?.id,t?.user?.email]),s=f.useCallback(c=>{try{const u=r();if(!u)return null;let d,m;if(c===C2)d=C2,m=void 0;else if(d=c,d>=0&&d<e.length)m=e[d]?.backend_uuid;else return ee.warn(`Invalid SBS selection index: ${c}, results length: ${e.length}`),null;return{eventType:pa.JUDGMENT,timestampMs:Date.now(),eventData:{evaluationUUID:u.evaluationUUID,evaluatorID:u.evaluatorID,preferredPosition:d,entryUUID:m}}}catch(u){return ee.error("Failed to build SBS judgment payload:",u),null}},[r,e]),a=f.useCallback(c=>{try{const u=r();if(!u||Pk(u.evaluationUUID,pa.JUDGMENT))return;const d=s(c);d&&(n(pa.JUDGMENT,d),Ok(u.evaluationUUID,pa.JUDGMENT))}catch(u){ee.error("Failed to track SBS judgment:",u)}},[r,s,n]),o=f.useCallback(()=>{try{const c=r();if(!c||Pk(c.evaluationUUID,pa.BANNER))return;const u={eventType:pa.BANNER,timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,experimentRoles:e.map(d=>d.side_by_side_metadata?.experiment_role||`entry_${e.indexOf(d)}`)}};n(pa.BANNER,u),Ok(c.evaluationUUID,pa.BANNER)}catch(c){ee.error("Failed to track SBS banner exposure:",c)}},[r,e,n]),l=f.useCallback(()=>{try{const c=r();if(!c||Pk(c.evaluationUUID,pa.EXPOSURE))return;const u={eventType:pa.EXPOSURE,timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,entries:e.map(kot)}};n(pa.EXPOSURE,u),Ok(c.evaluationUUID,pa.EXPOSURE)}catch(c){ee.error("Failed to track SBS exposure:",c)}},[r,e,n]);return f.useMemo(()=>({trackJudgment:a,trackBannerExposure:o,trackSBSExposure:l}),[a,o,l])},$pe=({enabled:e,reason:t})=>{const{locale:n}=Q(),r=n?{"accept-language":n}:{},s=async()=>Y$e({headers:r,reason:t}),a=Qe(),{data:o}=$e({enabled:a?typeof e>"u"?!0:e:!1,queryKey:PA(),queryFn:s,networkMode:"always"});return o??fce},Not="side-by-side-experiments";function Aot(e,t={}){const{value:n,loading:r,error:s}=Fze({flag:Not,defaultValue:{side_by_side_config:{}},subjectType:"context_uuid",extraAttributes:t},e);return f.useMemo(()=>({sideBySideOverrides:n,loading:r,error:s}),[n,r,s])}var jot={};const Hpe="sbs_trigger_count",S2="[control]",Rot=[],Iot={isEnabled:!1,sbsVariations:Rot,isLoading:!1,error:null,incrementTriggerCount:()=>{},triggerCount:0},Pot="sbsMaxTriggerCntPerThread";function Oot(e,t,n,r,s,a,o,l){const{isPro:c,isMax:u,hasAccessToProFeatures:d}=e,{isEnterprise:m=!1}=t,p=c||u||m||d,h=c||u||d,g=s?.localeObj?.language||n?.language||null,y=r?.toLowerCase()||null,v=m?"ENTERPRISE":"INDIVIDUAL",x=typeof window<"u"&&window.navigator.userAgent.includes("Mobile");return{isPriority:p,isSubscribed:h,language:g,country:o,searchFocus:y,userCategory:v,isFollowUp:!!l,isMobile:x,appApiClient:"web",[Pot]:a}}const Lot=e=>{const t=n=>n.side_by_side_metadata?.experiment_role?.startsWith(S2)??!1;for(let n=0;n<e.length;n++){const r=e[n];if(r&&t(r))return[r,...e.slice(0,n),...e.slice(n+1)]}return[...e]},Dot=e=>{try{if(!e||!e.side_by_side_config)return!1;const t=e.side_by_side_config;if(!t||typeof t!="object")return!1;const n=!!(t.experiment_flag&&typeof t.experiment_flag=="string"&&t.experiment_flag.length>0),r=!!(t.variations&&Array.isArray(t.variations)&&t.variations.length>0);return n||r}catch{return!1}},Fot=e=>{if(!e||!e.side_by_side_config)return[];const t=e.side_by_side_config;if(!t.experiment_flag||!t.variations||!Array.isArray(t.variations))return[];if(t.variations.length===0)return[];const n=[],r=ja(),s=t.experiment_flag;let a=!1;return t.variations.forEach(o=>{if(!o||!o.identifier)return;const l=o.is_control===!0;l&&(a=!0);const c=l?`${S2}${s}:${o.identifier}`:`${s}:${o.identifier}`,u={[s]:o.attributes_override??{}};n.push({sibling_uuid:r,experiment_role:c,experiment_override:u})}),!a&&ea(n)&&(n[0].experiment_role=`${S2}${s}:${t.variations[0]?.identifier}`),n},mK=e=>{try{const t=bs.getItem(`${Hpe}_${e}`);return t?parseInt(t,10):0}catch{return 0}},Uot=(e,t)=>{try{bs.setItem(`${Hpe}_${e}`,t.toString())}catch{}};function Bot({frontendContextUUID:e,disableSideBySide:t=!1}){const n=Pa(),{sources:r}=Hn(),s=mUe(r||[]),a=yt(),o=gn({reason:"sbs-experiment-attributes"}),l=$pe({reason:"sbs-experiment-attributes"}),c=ame(),u=jf(),d=rn()||!!jot.NEXT_PUBLIC_IS_SIDECAR_BUILD||JP();t=t||n===oe.STUDIO||n===oe.RESEARCH||d||s.length>0;const[m,p]=f.useState(()=>e?mK(e):0),h=e?Oot(a,o,l,n,c,m,u??null,e):{},{sideBySideOverrides:g,loading:y,error:v}=Aot(e||"",h),x=v?String(v):null,b=Dot(g);f.useEffect(()=>{if(e){const w=mK(e);p(Math.max(0,w))}else p(0)},[e]),f.useEffect(()=>{b&&e&&m>0&&Uot(e,m)},[e,m,b]);const _=f.useCallback(()=>{b&&p(w=>Math.max(0,w+1))},[b]);return f.useMemo(()=>{if(t||!b||x)return Iot;const w=Fot(g);return{isEnabled:b,sbsVariations:w,isLoading:y,error:x,incrementTriggerCount:_,triggerCount:m}},[t,x,_,b,y,g,m])}const zpe=e=>{if(!e.length)return[];const t=new Map;return e.forEach(n=>{if(n.side_by_side_metadata?.sibling_uuid&&n.side_by_side_metadata?.selection_status===ti.UNSELECTED)return;const r=n.side_by_side_metadata?.sibling_uuid??n.backend_uuid;t.has(r)||t.set(r,[]),t.get(r).push(n)}),[...t.values()].map(n=>{const r=Lot(n);return r[0]?.side_by_side_metadata?.selection_status===ti.TIE?[r[0]]:r})},Vot=async(e,t,n,r)=>{const s=(a,o)=>{r(l=>l.filter(c=>t.some(u=>u.backend_uuid===c.backend_uuid)?c.backend_uuid===a.backend_uuid:!0).map(c=>c.backend_uuid===a.backend_uuid?{...c,side_by_side_metadata:c.side_by_side_metadata?{...c.side_by_side_metadata,selection_status:o}:void 0}:c))};try{const a=t.map((c,u)=>{let d;return e===C2?d=ti.TIE:d=u===e?ti.SELECTED:ti.UNSELECTED,vPe({entryUUID:c.backend_uuid,params:d,siblingUUID:n,reason:"user-sbs-selection"}).catch(m=>{throw ee.error(`Failed to update selection for entry ${c.backend_uuid}:`,m),m})});await Promise.all(a);let o,l;if(e===C2?(o=t.find(u=>u.side_by_side_metadata?.experiment_role?.startsWith(S2))||t[0],l=ti.TIE):(o=t[e],l=ti.SELECTED),!o)throw new Error("No target result found");s(o,l)}catch(a){throw ee.error("Failed to update entry selection:",a),a}};function Gpe({handleSubmitQuery:e,isHomepage:t,contextUuid:n,disableSideBySide:r=!1}){const{isEnabled:s,sbsVariations:a,incrementTriggerCount:o}=Bot({frontendContextUUID:n,disableSideBySide:r});return f.useCallback(c=>{s?(o(),a.forEach(u=>{const{experiment_override:d,sibling_uuid:m,experiment_role:p}=u,h={experiment_role:p,sibling_uuid:m,experiment_override:d,selection_status:ti.SELECTION_STATUS_UNSPECIFIED},g={...c,...t?{newFrontendContextUUID:n}:{existingFrontendContextUUID:n},side_by_side_metadata:h};e(g)})):e(c)},[e,s,a,o,t,n])}const Br={[oe.SEARCH]:dt({askInputPlaceholder:{defaultMessage:"Ask anything",id:"AUouhaZgFv"},name:{defaultMessage:"Search",id:"xmcVZ0BU63"},description:{defaultMessage:"Fast answers to everyday questions",id:"5Y9Hg4e+zB"}}),[oe.RESEARCH]:dt({askInputPlaceholder:{defaultMessage:"Research anything",id:"PITzDLgm5P"},name:{defaultMessage:"Research",id:"JEe7dVso7F"},description:{defaultMessage:"Deep research on any topic",id:"uH6f+eH2OS"}}),[oe.STUDIO]:dt({askInputPlaceholder:{defaultMessage:"Create anything",id:"pmtrj6Tjm9"},name:{defaultMessage:"Labs",id:"ylFNoY79wa"},description:{defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}}),[oe.STUDY]:dt({askInputPlaceholder:{defaultMessage:"Study anything",id:"UOEDdZ+cnD"},name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"}})},bo={[ce.DEFAULT]:dt({name:{defaultMessage:"Auto",id:"NXI/XLSYwc"},description:{defaultMessage:"Adapts to each query",id:"SsTMNu/s/A"}}),[ce.PRO]:dt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[ce.PPLX_PRO_UPGRADED]:dt({name:{defaultMessage:"Pro",id:"R/eOkjWqNU"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[ce.SONAR]:dt({name:{defaultMessage:"Sonar",id:"sT9VX563o6"},description:{defaultMessage:"Perplexity's fast model",id:"pdbURewz6Q"}}),[ce.GPT_4o]:dt({name:{defaultMessage:"GPT-4o",id:"nebbHBgxX/"},description:{defaultMessage:"OpenAI's versatile model",id:"zdAw82CyOA"}}),[ce.GPT_4_1]:dt({name:{defaultMessage:"GPT-4.1",id:"+LPr/f6Fal"},description:{defaultMessage:"OpenAI's advanced model",id:"+uCLZVt7uh"}}),[ce.GPT_5]:dt({name:{defaultMessage:"GPT-5",id:"VfhmdGpVc7"},description:{defaultMessage:"OpenAI's latest model",id:"5VYr+wSh/Y"}}),[ce.GPT_5_THINKING]:dt({name:{defaultMessage:"GPT-5 Thinking",id:"/IA3KV+qFr"},description:{defaultMessage:"OpenAI's latest model with thinking",id:"r+tIMgEnyZ"}}),[ce.CLAUDE_2]:dt({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[ce.GEMINI_2_FLASH]:dt({name:{defaultMessage:"Gemini 2.5 Pro",id:"hec4NYL1Ib"},description:{defaultMessage:"Google's latest model",id:"XBL8FigIeX"}}),[ce.GROK]:dt({name:{defaultMessage:"Grok 3 Beta",id:"Ybq0GDRm0J"},description:{defaultMessage:"xAI's Grok 3 model",id:"gwIHPQy1c/"}}),[ce.PPLX_REASONING]:dt({name:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},description:{defaultMessage:"Advanced problem solving",id:"4J0akc6m53"}}),[ce.CLAUDE_3_7_SONNET_THINKING]:dt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[ce.CLAUDE_4_0_OPUS]:dt({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[ce.CLAUDE_4_0_OPUS_THINKING]:dt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[ce.CLAUDE_4_1_OPUS]:dt({name:{defaultMessage:"Claude Opus 4.1",id:"aq+8T//8S9"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[ce.CLAUDE_4_1_OPUS_THINKING]:dt({name:{defaultMessage:"Claude Opus 4.1 Thinking",id:"Vd2LxNSW/4"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[ce.GROK_4]:dt({name:{defaultMessage:"Grok 4",id:"+Y775fAOqr"},description:{defaultMessage:"xAI's latest, most powerful reasoning model",id:"pSXVZwl/+g"}}),[ce.O3]:dt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[ce.O3_PRO]:dt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[ce.O4_MINI]:dt({name:{defaultMessage:"o4-mini",id:"BwwjXFHgz7"},description:{defaultMessage:"OpenAI's latest reasoning model",id:"VKonAfIZbf"}}),[ce.ALPHA]:dt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Fast and thorough for routine research",id:"v/MuahlVJE"}}),[ce.O3_RESEARCH]:dt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[ce.O3_PRO_RESEARCH]:dt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[ce.CLAUDE40SONNET_RESEARCH]:dt({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[ce.CLAUDE40SONNETTHINKING_RESEARCH]:dt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[ce.CLAUDE40OPUS_RESEARCH]:dt({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's most advanced model",id:"4l6C+Dcw8g"}}),[ce.CLAUDE40OPUSTHINKING_RESEARCH]:dt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[ce.BETA]:dt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Multi-step tasks with advanced troubleshooting",id:"Sf0AeuilA5"}}),[ce.O3_LABS]:dt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[ce.O3_PRO_LABS]:dt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[ce.CLAUDE40SONNETTHINKING_LABS]:dt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[ce.CLAUDE40OPUSTHINKING_LABS]:dt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[ce.STUDY]:dt({name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}}),[Vs.O3_MINI]:dt({name:{defaultMessage:"o3-mini",id:"GdJwPgWWId"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[Vs.GROK2]:dt({name:{defaultMessage:"Grok-2",id:"9X3jPx+0vk"},description:{defaultMessage:"xAI's latest model",id:"e2CghRZC7d"}}),[Vs.GPT_4]:dt({name:{defaultMessage:"GPT-4",id:"6TGiMlP7f4"},description:{defaultMessage:"OpenAI's previous generation model",id:"U3OQoJ211e"}}),[Vs.CLAUDE_3_OPUS]:dt({name:{defaultMessage:"Claude 3 Opus",id:"gLSCHWGsu1"},description:{defaultMessage:"Anthropic's previous generation model",id:"hAevdn8yGl"}}),[Vs.CLAUDE_3_5_HAIKU]:dt({name:{defaultMessage:"Claude 3.5 Haiku",id:"zEJWYa05R2"},description:{defaultMessage:"Anthropic's smaller model",id:"pQia6E7J8i"}}),[Vs.GEMINI]:dt({name:{defaultMessage:"Gemini",id:"XoqZkcqFZ/"},description:{defaultMessage:"Previous version of Google's Gemini model",id:"9C0LtRWLFh"}}),[Vs.LLAMA_X_LARGE]:dt({name:{defaultMessage:"Llama X Large",id:"2zxgnSWUyX"},description:{defaultMessage:"Meta's large Llama model",id:"+95UnVOxgQ"}}),[Vs.MISTRAL]:dt({name:{defaultMessage:"Mistral",id:"dUBSpMbbs4"},description:{defaultMessage:"Mistral AI model",id:"rYRyt8I2Zr"}}),[Vs.COPILOT]:dt({name:{defaultMessage:"Copilot",id:"b3QbnXgawD"},description:{defaultMessage:"Legacy Pro Search",id:"pg83InaW1o"}}),[Vs.CLAUDE_OMBRE_EAP]:dt({name:{defaultMessage:"Claude Ombre",id:"F12IlTx8R1"},description:{defaultMessage:"Anthropic's research preview",id:"LKt7UBXwdw"}}),[Vs.CLAUDE_LACE_EAP]:dt({name:{defaultMessage:"Claude Lace",id:"8ydOdGYWef"},description:{defaultMessage:"Anthropic's opus research preview",id:"GHW8xWfe9i"}}),[Vs.R1]:dt({name:{defaultMessage:"R1 1776",id:"e8N3MYqmIQ"},description:{defaultMessage:"Perplexity's unbiased reasoning model",id:"R5Tg1hC1um"}}),[Vs.GAMMA]:dt({name:{defaultMessage:"Gamma",id:"Wb9IyuuCJO"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}})};function FE({collection:e,onSubmit:t,redirectToNewThread:n=!0,csrRedirect:r=!1}){const{$t:s}=Q(),{isCopilot:a}=Hn(),{submitQuery:o}=Oa(),{actions:{clearCurrentStreamId:l,clearCurrentThreadId:c}}=Ht(),u=_t(),d=Pa(),{handleSubmitQueryWithMention:m}=Sot(),p=f.useMemo(()=>ja(),[]),h=f.useCallback(C=>{if(C.query.trim()==="")return;t?.(C),C.mentions&&C.mentions.some(E=>E.type==="space")&&m();const S=C.newFrontendContextUUID??ja();n&&(c(),l(),o({rawQuery:C.query,dslQuery:C.dslQuery,mentions:C.mentions,copilotOverride:a?!0:void 0,attachments:C.attachments,collection:e||null,newFrontendContextUUID:S,promptSource:C.promptSource||"user",querySource:C.querySource,timeFromFirstType:C.timeFromFirstType,shouldRedirectToBackendUUID:!r,...C.side_by_side_metadata&&{side_by_side_metadata:C.side_by_side_metadata},onThreadSlugReceived:E=>{if(!r)return;const M=window.location.pathname;M.startsWith(`${u.base}/search/`)&&Sne(M.split("/").pop())&&u.replace(`/search/${E}`,"Home ask input")}}),r&&setTimeout(()=>{u.push(`/search/new/${S}`,void 0,"Home ask input")}))},[t,n,c,l,o,a,e,r,u,m]),g=Gpe({handleSubmitQuery:h,isHomepage:!0,contextUuid:p}),y=f.useRef(!1),v=f.useCallback(C=>{y.current||(y.current=!0,setTimeout(()=>y.current=!1,ZO),g(C))},[g]),[x,b,_]=Vpe({onSubmit:v,immediate:!r}),w=s(Br[d].askInputPlaceholder);return[x,b,f.useMemo(()=>({..._,placeholder:w}),[_,w])]}const JO=ce.PRO,qpe=e=>({id:e.task_id,title:e.task_name,prompt:e.prompt,searchModel:U7(e.model_preference)??JO,sources:bA(e.sources),preconfigured:e.preconfigured});function DUt(e=""){return{title:"",prompt:e,searchModel:JO,sources:["web"],preconfigured:!1}}const Wot=(e,t)=>{const{value:n,loading:r}=At({flag:"shortcut-widget",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},pK="shortcut-widgets-enabled-cache";function $ot(){const{variation:e,loading:t}=Wot(!1),{value:n,loading:r}=jr({flag:"shortcut-tasks",defaultValue:!0}),s=t||r,a=e&&n,[o,l]=f.useState(()=>{const c=Ae.getItem(pK);return c?JSON.parse(c):!1});return f.useEffect(()=>{s||a!==o&&(l(a),Ae.setItem(pK,JSON.stringify(a)))},[a,s,o]),o}function hK(e,t){Rf("SHORTCUT",t,e)}const eL=f.memo(({context:e,widgetId:t,defaultName:n,defaultQuery:r,showSettings:s,setShowSettings:a})=>{const[o,l,{onSubmit:c}]=FE({csrRedirect:!0}),[u,d]=f.useState(()=>Ape({context:e,widgetId:t,defaultQuery:r,defaultName:n})),{data:m}=$e({queryKey:aP(u.taskId),queryFn:()=>LE({taskId:u.taskId,reason:"ShortcutWidget"}),enabled:u.taskId!==YO});f.useEffect(()=>{m&&d(v=>{const x={...v,query:m.prompt,name:m.title};return hK(x,t),x})},[m,t]);const p=f.useCallback(()=>{c({query:u.query,querySource:"homepage_widget",promptSource:"homepage_widget",mentions:[{type:"shortcut",id:u.taskId,url:""}]})},[c,u.query,u.taskId]),h=f.useCallback(()=>{a?.(!1)},[a]),g=f.useCallback(v=>{hK(v,t),d(v),a?.(!1)},[a,t]),y=i.jsxs("div",{className:"flex size-full flex-col p-3",style:{zoom:e==="thumbnail"?.75:1},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(L,{color:"super",children:i.jsx(me,{icon:ro,size:"lg"})}),i.jsxs(L,{variant:"tinyRegular",color:"light",className:"line-clamp-2 break-words",children:["/",u.name]})]}),i.jsx(L,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance break-words",children:u.query})]});return e==="thumbnail"?y:i.jsxs(i.Fragment,{children:[i.jsx(Pn,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:p,children:i.jsx(wn,{hoverOnly:!0,className:"size-full",children:i.jsx(z,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-offsetPlus size-full transition duration-300",children:y})})}),s&&i.jsx(Hot,{shortcut:u,onDone:g,onClose:h})]})});eL.displayName="ShortcutWidget";const Hot=({shortcut:e,onDone:t,onClose:n})=>{const r="shortcut-widget-settings",{$t:s}=Q(),a=Ls(),{openModal:o}=vt(),[l,c]=f.useState(e.taskId),[u,d]=f.useState(null),{data:m}=DE({reason:r}),p=f.useCallback(v=>m?.find(x=>x.task_id===v),[m]),h=f.useMemo(()=>{const v=[];m&&m.forEach(b=>{if(!b.prompt.length)return;const _={type:"default",text:`/${b.task_name}`,tooltipText:b.prompt,rightElement:b.preconfigured?null:i.jsx(zot,{shortcut:b,focused:u===b.task_id}),onMouseEnter:()=>{d(b.task_id)},onClick:()=>{c(b.task_id)}};v.push(_)});const x={type:"default",text:s({defaultMessage:"+ Create a new shortcut",id:"91niw1hBV9"}),onMouseEnter:()=>{d("create")},onClick:()=>{o("taskShortcutModal",{source:"shortcut_widget",onCreated:b=>{c(b.id)}})}};return[...v,x]},[m,s,o,u]),g=f.useMemo(()=>{const v=p(l);return v?`/${v.task_name}`:s({defaultMessage:"Choose or create a shortcut",id:"mtB/vUwddZ"})},[p,l,s]),y=f.useCallback(()=>{const v=p(l);v&&t({...e,query:v.prompt,name:v.task_name,taskId:l})},[t,e,p,l]);return i.jsx(it,{children:i.jsx(Pu,{onClose:n,children:i.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[i.jsxs("div",{children:[i.jsx(L,{variant:"entry-title-300",children:s({defaultMessage:"Shortcuts",id:"7FAwwkYilD"})}),i.jsx(L,{variant:"small",color:"light",children:s({defaultMessage:"Add a shortcut to a query that you use often.",id:"ry+zfkzET+"})})]}),i.jsx(Jt,{items:h,isMobileStyle:a,children:i.jsx(ge,{size:"small",chevron:!0,chevronIcon:Qn,text:g,textClassName:"font-normal",layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})}),i.jsx("div",{className:"flex flex-row justify-end",children:i.jsx(ge,{variant:"primary",size:"small",onClick:y,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})},zot=({shortcut:e,focused:t})=>{const{openModal:n}=vt(),r=f.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:qpe(e)})},[n,e]);return i.jsx("div",{className:U("transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:i.jsx(Te,{icon:wc,size:"tiny",variant:"common",noPadding:!0,onClick:r})})};function Got(e="widget",t,n){if(e==="widget"){const r=eg("ASSISTANT",t);if(r)return{version:1,query:r.query??n??""}}return{version:1,query:n??""}}function gK(e,t="widget",n){t==="widget"&&Rf("ASSISTANT",n,e)}const tL=A.memo(({context:e="widget",defaultQuery:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const a=Got(e,n,t),{$t:o}=Q(),[l,c]=f.useState(a.query||""),[u,d,{onSubmit:m}]=FE({csrRedirect:!0}),p=f.useRef(ta(C=>{gK({query:C.query,version:1},e,n)},1e3));f.useEffect(()=>{const C=p.current.flush;return()=>{C()}},[p]);const h=C=>{const S=C.target.value;c(S),p.current({query:S})},g=i.jsxs("div",{className:U("flex size-full flex-col p-3",{"p-3":e==="thumbnail"}),style:{zoom:e==="thumbnail"?.75:1},children:[i.jsx(L,{color:"super",children:i.jsx(me,{icon:ro,size:"lg"})}),i.jsx(L,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance",children:l||""})]}),y=f.useCallback(()=>{m({query:l,querySource:"homepage_widget",promptSource:"homepage_widget"})},[m,l]),v=f.useCallback(()=>s?.(!1),[s]),x=f.useCallback(()=>{gK({query:l||"",version:1},e,n),s?.(!1)},[s,l,e,n]),b=f.useCallback(()=>c(o({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})),[o]),_=f.useCallback(()=>c(o({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})),[o]),w=f.useCallback(()=>c(o({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})),[o]);return e==="thumbnail"?g:i.jsxs(i.Fragment,{children:[i.jsx(Pn,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:y,children:i.jsx(wn,{hoverOnly:!0,className:"size-full",children:i.jsx(z,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-offsetPlus size-full transition duration-300",children:g})})}),i.jsx(it,{children:r&&i.jsx(Pu,{onClose:v,children:i.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[i.jsxs("div",{children:[i.jsx(L,{variant:"entry-title-300",children:o({defaultMessage:"Assistant query",id:"FyiOOCgH1j"})}),i.jsx(L,{variant:"small",color:"light",children:o({defaultMessage:"Save assistant queries that you use often.",id:"p2agK1deUX"})})]}),i.jsx("div",{children:i.jsxs("div",{className:"text-foreground relative whitespace-pre-wrap break-words px-3 py-2 text-sm after:content-['\\\\200B']",children:[i.jsx("span",{className:"invisible",children:l||""}),i.jsx("textarea",{className:"bg-base text-foreground border-subtler placeholder:text-quiet focus:ring-subtler absolute -inset-px size-full resize-none overflow-hidden rounded-md border px-3 py-2 text-sm outline-none focus:outline-none focus:ring-1",value:l||"",onChange:h})]})}),i.jsx("div",{children:i.jsxs(L,{variant:"tinyRegular",color:"light",children:[o({defaultMessage:"For example",id:"qbXH6UvD6V"}),":"," ",i.jsx(L,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:b,children:o({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})}),","," ",i.jsx(L,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:_,children:o({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})}),","," ",i.jsx(L,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:w,children:o({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})}),"."]})}),i.jsx("div",{className:"flex flex-row justify-end",children:i.jsx(ge,{variant:"primary",size:"small",onClick:x,text:o({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});tL.displayName="AssistantWidget";var Pb={exports:{}},yK;function qot(){return yK||(yK=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default}(Pb,Pb.exports)),Pb.exports}var Ob={exports:{}},vK;function Kot(){return vK||(vK=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}e.exports=t.default}(Ob,Ob.exports)),Ob.exports}function Yot(e,t){var n=Jot(t);return n.formatToParts?Xot(n,e):Zot(n,e)}var Qot={year:0,month:1,day:2,hour:3,minute:4,second:5};function Xot(e,t){try{for(var n=e.formatToParts(t),r=[],s=0;s<n.length;s++){var a=Qot[n[s].type];a>=0&&(r[a]=parseInt(n[s].value,10))}return r}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function Zot(e,t){var n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var Lk={};function Jot(e){if(!Lk[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";Lk[e]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Lk[e]}function Kpe(e,t,n,r,s,a,o){var l=new Date(0);return l.setUTCFullYear(e,t,n),l.setUTCHours(r,s,a,o),l}var xK=36e5,eit=6e4,Dk={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Ype(e,t,n){var r,s;if(!e||(r=Dk.timezoneZ.exec(e),r))return 0;var a;if(r=Dk.timezoneHH.exec(e),r)return a=parseInt(r[1],10),bK(a)?-(a*xK):NaN;if(r=Dk.timezoneHHMM.exec(e),r){a=parseInt(r[2],10);var o=parseInt(r[3],10);return bK(a,o)?(s=Math.abs(a)*xK+o*eit,r[1]==="+"?-s:s):NaN}if(rit(e)){t=new Date(t||Date.now());var l=n?t:tit(t),c=g8(l,e),u=n?c:nit(t,c,e);return-u}return NaN}function tit(e){return Kpe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function g8(e,t){var n=Yot(e,t),r=Kpe(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),s=e.getTime(),a=s%1e3;return s-=a>=0?a:1e3+a,r-s}function nit(e,t,n){var r=e.getTime(),s=r-t,a=g8(new Date(s),n);if(t===a)return t;s-=a-t;var o=g8(new Date(s),n);return a===o?a:Math.max(a,o)}function bK(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var _K={};function rit(e){if(_K[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),_K[e]=!0,!0}catch{return!1}}var sit=qot();const ait=io(sit);var oit=Kot();const wK=io(oit);var iit=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Fk=36e5,CK=6e4,lit=2,Gs={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:iit};function cit(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n={},r=n.additionalDigits==null?lit:ait(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=uit(e),a=dit(s.date,r),o=a.year,l=a.restDateString,c=fit(l,o);if(isNaN(c))return new Date(NaN);if(c){var u=c.getTime(),d=0,m;if(s.time&&(d=mit(s.time),isNaN(d)))return new Date(NaN);if(s.timeZone||n.timeZone){if(m=Ype(s.timeZone||n.timeZone,new Date(u+d)),isNaN(m))return new Date(NaN)}else m=wK(new Date(u+d)),m=wK(new Date(u+d+m));return new Date(u+d+m)}else return new Date(NaN)}function uit(e){var t={},n=Gs.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=Gs.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){var s=Gs.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function dit(e,t){var n=Gs.YYY[t],r=Gs.YYYYY[t],s;if(s=Gs.YYYY.exec(e)||r.exec(e),s){var a=s[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(s=Gs.YY.exec(e)||n.exec(e),s){var o=s[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}return{year:null}}function fit(e,t){if(t===null)return null;var n,r,s,a;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(n=Gs.MM.exec(e),n)return r=new Date(0),s=parseInt(n[1],10)-1,EK(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(n=Gs.DDD.exec(e),n){r=new Date(0);var o=parseInt(n[1],10);return git(t,o)?(r.setUTCFullYear(t,0,o),r):new Date(NaN)}if(n=Gs.MMDD.exec(e),n){r=new Date(0),s=parseInt(n[1],10)-1;var l=parseInt(n[2],10);return EK(t,s,l)?(r.setUTCFullYear(t,s,l),r):new Date(NaN)}if(n=Gs.Www.exec(e),n)return a=parseInt(n[1],10)-1,MK(t,a)?SK(t,a):new Date(NaN);if(n=Gs.WwwD.exec(e),n){a=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return MK(t,a,c)?SK(t,a,c):new Date(NaN)}return null}function mit(e){var t,n,r;if(t=Gs.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),Uk(n)?n%24*Fk:NaN;if(t=Gs.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),Uk(n,r)?n%24*Fk+r*CK:NaN;if(t=Gs.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return Uk(n,r,s)?n%24*Fk+r*CK+s*1e3:NaN}return null}function SK(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var pit=[31,28,31,30,31,30,31,31,30,31,30,31],hit=[31,29,31,30,31,30,31,31,30,31,30,31];function Qpe(e){return e%400===0||e%4===0&&e%100!==0}function EK(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var r=Qpe(e);if(r&&n>hit[t]||!r&&n>pit[t])return!1}return!0}function git(e,t){if(t<1)return!1;var n=Qpe(e);return!(n&&t>366||!n&&t>365)}function MK(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function Uk(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function y8(e,t,n){var r=cit(e,n),s=Ype(t,r,!0),a=new Date(r.getTime()-s),o=new Date(0);return o.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),o.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),o}const yit=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),vit=async e=>{let t;e&&(t=yit(e));const{data:n,error:r}=await ne.GET("/rest/homepage-widgets/clock/current-location","clock-widget-current-location",{headers:t});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to fetch clock current location",cause:r});return n},Xpe="clock-current-location-cache",v8={geonameid:5391959,name:"San Francisco",latitude:37.77493,longitude:-122.41942,countrycode:"US",population:864816,timezone:"America/Los_Angeles",timezone_offset:-25200};function xit(){try{const e=Ae.getItem(Xpe);if(e)return JSON.parse(e)}catch{}return null}function bit(e){try{Ae.setItem(Xpe,JSON.stringify(e))}catch{}}function _it(e="widget",t){if(e==="widget"){const n=eg("ANALOG_CLOCK",t);if(n)return n.version===1?{version:2,city:n.city,useCurrentLocation:!n.city}:n}return{version:2,city:v8,useCurrentLocation:!0}}function kK(e,t="widget",n){t==="widget"&&Rf("ANALOG_CLOCK",n,e)}const wit=()=>{const{location:e}=$h(),t=xit();return $e({queryKey:["clock-current-location",e?.latitude,e?.longitude],queryFn:async()=>{const n=await vit(e);return n&&bit(n),n},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,placeholderData:t})};function Cit(e,t="widget"){const n=_it(t,e),[r,s]=f.useState(n),{data:a,isLoading:o}=wit(),l=f.useMemo(()=>r.useCurrentLocation&&a?{name:a.name||"Your Location",timezone:a.timezone,country:a.country}:r.city||v8,[r.useCurrentLocation,a,r.city]),c=f.useCallback(d=>{const m={...r,...d};s(m),kK(m,t,e)},[r,t,e]),u=f.useCallback((d,m)=>{const p={...r,city:d,useCurrentLocation:d?!1:m??!0};s(p),kK(p,t,e)},[r,t,e]);return f.useMemo(()=>({selectedCity:l,settings:r,currentLocationData:a??null,isLoading:o,updateSettings:c,saveCity:u}),[l,r,a,o,c,u])}const Sit=async({query:e="",limit:t=10,reason:n})=>{try{const{error:r,data:s}=await ne.GET("/rest/homepage-widgets/cities-autosuggests",n,{params:{query:{query:e,limit:t}},timeoutMs:2e3});if(r)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get cities autosuggestions",cause:r});return s.data??[]}catch(r){return ee.error(r),[]}},Eit=({query:e="",limit:t=5,reason:n})=>$e({queryKey:["cities",e,t],queryFn:()=>Sit({query:e,limit:t,reason:n}),enabled:e?.trim().length>0,staleTime:5*60*1e3,gcTime:30*60*1e3}),Mit=100,kit=()=>i.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:i.jsx(Te,{icon:rr,size:"small",pill:!0})}),Tit=()=>i.jsx("div",{className:"w-sm"}),Nit=({onClear:e})=>i.jsx(Te,{icon:Lt,size:"tiny",pill:!0,onClick:e}),nL=A.memo(({widgetId:e,showCity:t=!1,showSettings:n,setShowSettings:r,context:s="widget"})=>{const{$t:a}=Q(),{colorScheme:o}=Pr(),l=o==="dark",c=f.useRef(!0),{isMobileUserAgent:u}=ye(),d="clock-widget-settings",{selectedCity:m,settings:p,updateSettings:h,saveCity:g}=Cit(e,s),y=f.useRef(null),[v,x]=f.useState(m.name??""),[b,_]=f.useState(-1),[w,C]=f.useState(!1);f.useEffect(()=>{x(m.name??"")},[m.name]);const{data:S=[]}=Eit({query:v,limit:Mit,reason:d}),E=f.useMemo(()=>S.map(J=>({query:J.name,title:J.name,description:`${J.countrycode}  ${J.timezone}`,identifier:J.geonameid.toString()})),[S]),[M,k]=f.useState(new Date);f.useEffect(()=>{const J=setInterval(()=>{k(new Date)},1e3);return()=>clearInterval(J)},[]);const T=J=>J*6,j=J=>J*6,R=J=>J*30,O=y8(M,m.timezone),P=T(O.getSeconds()),N=j(O.getMinutes()),I=R(O.getHours()+O.getMinutes()/60),D=f.useCallback(()=>{C(!0)},[]),F=f.useCallback(()=>{C(!1)},[]),B=f.useCallback(J=>{x(J)},[]),V=()=>{x("")},$=f.useCallback(J=>S.find(te=>te.geonameid.toString()===J),[S]),G=f.useCallback(J=>{if(!J.identifier)return;const te=$(J.identifier);te&&(h({city:te,useCurrentLocation:!1}),x(te.name),g(te,!1))},[$,h,g]),X=f.useCallback((J,te)=>{G(J)},[G]);f.useEffect(()=>{if(c.current){c.current=!1;return}},[m,s,e]);const Y=i.jsxs("div",{className:U("relative size-full p-2",{"pb-7 pt-2":t}),children:[i.jsxs("div",{className:"relative mx-auto aspect-square max-h-full max-w-full",children:[s==="widget"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute right-[calc(25%+4px)] top-1/2 -translate-y-1/2 translate-x-1/2",children:i.jsx(L,{variant:"tinyMono",className:"scale-[70%]",children:i.jsx(kTe,{value:M,hour:"numeric",minute:"2-digit",timeZone:m.timezone})})}),i.jsx("div",{className:"absolute left-[calc(25%+4px)] top-1/2 -translate-x-1/2 -translate-y-1/2",children:i.jsx(L,{variant:"tinyMono",className:"scale-[70%] uppercase",children:i.jsx(TTe,{value:M,weekday:"short",timeZone:m.timezone})})})]}),i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[i.jsx("path",{fill:l?"#fff":"#000",d:"M71 130a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5M40.817 122.278a.5.5 0 1 1 .867.5l-5.5 9.527a.5.5 0 0 1-.867-.5zM100.501 122.094a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.683M19.222 100.316a.5.5 0 0 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM122.096 100.499a.5.5 0 0 1 .683-.183l9.527 5.5a.501.501 0 0 1-.5.867l-9.527-5.5a.5.5 0 0 1-.183-.684M11.5 70.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1zM141.5 70.5a.5.5 0 0 1 0 1h-11a.5.5 0 0 1 0-1zM9.513 35.499a.5.5 0 0 1 .682-.183l9.527 5.5a.5.5 0 1 1-.5.867l-9.527-5.5a.5.5 0 0 1-.182-.684M131.806 35.316a.5.5 0 1 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM105.817 9.694a.5.5 0 0 1 .867.5l-5.5 9.527a.501.501 0 0 1-.867-.5zM35.501 9.51a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.682M71 0a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0V.5A.5.5 0 0 1 71 0"}),i.jsx("path",{fill:l?"#444":"#CCC",d:"M63.997 137.633a.5.5 0 0 1 .445.549l-.314 2.984a.5.5 0 1 1-.994-.105l.313-2.983a.5.5 0 0 1 .55-.445M78.004 137.632a.5.5 0 0 1 .55.444l.313 2.984a.5.5 0 1 1-.994.105l-.314-2.984a.5.5 0 0 1 .445-.549M84.932 136.538a.5.5 0 0 1 .593.385l.623 2.934a.5.5 0 1 1-.977.208l-.624-2.934a.5.5 0 0 1 .385-.593M57.07 136.532a.5.5 0 0 1 .385.593l-.624 2.934a.5.5 0 1 1-.979-.208l.624-2.933a.5.5 0 0 1 .593-.386M91.706 134.722a.5.5 0 0 1 .63.321l.927 2.853a.5.5 0 0 1-.95.309l-.928-2.853a.5.5 0 0 1 .32-.63M49.666 135.04a.5.5 0 0 1 .951.309l-.928 2.853a.499.499 0 1 1-.95-.309zM98.25 132.208a.5.5 0 0 1 .661.254l1.221 2.74a.5.5 0 0 1-.914.407l-1.22-2.741a.5.5 0 0 1 .253-.66M43.089 132.46a.5.5 0 0 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM30.92 125.315a.5.5 0 0 1 .81.588l-1.763 2.427a.5.5 0 0 1-.81-.588zM110.383 125.203a.5.5 0 0 1 .698.11l1.764 2.428a.5.5 0 0 1-.81.587l-1.763-2.427a.5.5 0 0 1 .111-.698M115.835 120.79a.5.5 0 0 1 .706.037l2.007 2.229a.5.5 0 1 1-.743.669l-2.007-2.228a.5.5 0 0 1 .037-.707M25.464 120.825a.5.5 0 1 1 .743.669l-2.008 2.229a.5.5 0 0 1-.743-.668zM120.794 115.833a.5.5 0 0 1 .706-.037l2.229 2.007a.499.499 0 1 1-.669.743l-2.229-2.007a.5.5 0 0 1-.037-.706M20.504 115.793a.5.5 0 1 1 .669.743l-2.23 2.007a.5.5 0 0 1-.669-.743zM125.204 110.382a.5.5 0 0 1 .698-.111l2.428 1.764a.5.5 0 0 1-.588.809l-2.428-1.763a.5.5 0 0 1-.11-.699M16.098 110.27a.5.5 0 0 1 .587.809l-2.427 1.764a.5.5 0 1 1-.587-.809zM9.133 97.998a.5.5 0 0 1 .407.913l-2.741 1.221a.5.5 0 0 1-.407-.914zM132.209 98.25a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 0 1-.406.914l-2.741-1.22a.5.5 0 0 1-.253-.66M134.723 91.703a.5.5 0 0 1 .63-.321l2.854.927a.5.5 0 0 1-.31.95l-2.852-.926a.5.5 0 0 1-.322-.63M6.652 91.382a.5.5 0 0 1 .31.95l-2.854.928a.5.5 0 1 1-.308-.952zM137.133 84.545l2.934.623a.501.501 0 0 1-.208.978l-2.934-.624a.5.5 0 1 1 .208-.977M4.873 84.543a.5.5 0 1 1 .208.977l-2.935.624a.5.5 0 0 1-.208-.978zM141.167 77.872a.5.5 0 0 1-.105.995l-2.984-.313a.5.5 0 0 1 .104-.996zM3.818 77.558a.5.5 0 0 1 .105.995l-2.984.313a.5.5 0 0 1-.104-.994zM3.923 63.447a.5.5 0 0 1-.105.995l-2.983-.314a.5.5 0 1 1 .104-.994zM141.062 63.133a.5.5 0 0 1 .105.995l-2.985.313a.5.5 0 0 1-.104-.995zM2.148 55.852l2.935.624a.5.5 0 1 1-.208.979L1.94 56.83a.5.5 0 0 1 .208-.979M139.857 55.85a.5.5 0 0 1 .208.979l-2.934.624a.5.5 0 0 1-.208-.979zM3.477 49.058a.5.5 0 0 1 .631-.32l2.853.927a.5.5 0 1 1-.309.951L3.8 49.688a.5.5 0 0 1-.322-.63M137.898 48.737a.5.5 0 1 1 .309.951l-2.853.927a.5.5 0 0 1-.309-.951zM6.14 42.12a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 1 1-.406.914l-2.742-1.22a.5.5 0 0 1-.253-.66M135.202 41.868a.5.5 0 0 1 .407.914l-2.741 1.22a.5.5 0 1 1-.406-.913zM13.56 29.267a.5.5 0 0 1 .699-.11l2.426 1.764a.5.5 0 0 1-.587.808l-2.427-1.763a.5.5 0 0 1-.112-.699M127.742 29.156a.5.5 0 0 1 .588.809l-2.428 1.763a.5.5 0 0 1-.588-.81zM18.24 23.492a.5.5 0 0 1 .706-.037l2.23 2.008a.5.5 0 0 1-.67.743l-2.229-2.008a.5.5 0 0 1-.037-.706M123.057 23.452a.5.5 0 0 1 .67.743l-2.229 2.008a.5.5 0 0 1-.67-.743zM23.494 18.236a.5.5 0 0 1 .707.037l2.007 2.23a.5.5 0 1 1-.743.669l-2.007-2.23a.5.5 0 0 1 .036-.706M117.804 18.27a.5.5 0 0 1 .743.67l-2.007 2.229a.5.5 0 1 1-.743-.67zM112.035 13.67a.5.5 0 0 1 .809.589l-1.763 2.426a.5.5 0 0 1-.81-.587zM29.268 13.558a.5.5 0 0 1 .699.11l1.763 2.428a.5.5 0 0 1-.81.588l-1.762-2.427a.5.5 0 0 1 .11-.699M42.12 6.139a.5.5 0 0 1 .661.253l1.22 2.74a.5.5 0 0 1-.913.408l-1.22-2.741a.5.5 0 0 1 .253-.66M99.219 6.391a.5.5 0 1 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM49.061 3.476a.5.5 0 0 1 .631.32l.927 2.854a.5.5 0 0 1-.951.31l-.927-2.854a.5.5 0 0 1 .32-.63M92.31 3.795a.5.5 0 1 1 .951.308l-.927 2.854a.5.5 0 1 1-.951-.31zM56.24 1.554a.5.5 0 0 1 .593.384l.624 2.935a.5.5 0 0 1-.979.208l-.623-2.935a.5.5 0 0 1 .385-.592M85.762 1.548a.5.5 0 0 1 .384.593l-.624 2.934a.5.5 0 1 1-.977-.208l.623-2.934a.5.5 0 0 1 .593-.385M78.422.389a.5.5 0 0 1 .445.55l-.314 2.983a.5.5 0 0 1-.995-.105l.314-2.983a.5.5 0 0 1 .55-.445M63.579.388a.5.5 0 0 1 .55.445l.313 2.983a.5.5 0 0 1-.994.105L63.135.937a.5.5 0 0 1 .444-.55"})]}),i.jsx(xe.div,{initial:{rotate:N},animate:{rotate:[N,N+360]},transition:{duration:3600,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:i.jsx("path",{fill:l?"#fff":"#000",fillRule:"evenodd",d:"M71 2a2 2 0 0 1 2 2v60c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V4a2 2 0 0 1 2-2m0 68a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})}),i.jsx(xe.div,{initial:{rotate:I},animate:{rotate:[I,I+360]},transition:{duration:43200,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:i.jsx("path",{fill:l?"#fff":"#000",fillRule:"evenodd",d:"M71 24a2 2 0 0 1 2 2v38c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V26a2 2 0 0 1 2-2m0 46a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})}),i.jsx(xe.div,{initial:{rotate:P},animate:{rotate:[P,P+360]},transition:{duration:60,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[i.jsx("path",{fill:"#FF7323",d:"M71 2a.75.75 0 0 1 .75.75v66.397a2 2 0 0 1 0 3.706v3.397a.75.75 0 0 1-1.5 0v-3.397a1.999 1.999 0 0 1 0-3.706V2.75A.75.75 0 0 1 71 2"}),i.jsx("circle",{cx:71,cy:71,r:1,fill:"#fff"})]})})]}),t&&i.jsx(L,{variant:"tiny",color:"default",className:"pointer-events-none flex h-7 select-none items-center justify-center",children:i.jsx("div",{className:"truncate px-2",children:m.name})})]}),W=U("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&E.length>0,"opacity-50":!!p.useCurrentLocation}),H=f.useMemo(()=>({LeftIconComponent:Tit,RightIconComponent:kit}),[]),Z=f.useCallback(()=>r?.(!1),[r]),re=f.useCallback(J=>{h({useCurrentLocation:J})},[h]),q=f.useCallback(()=>{r?.(!1)},[r]);return s==="thumbnail"?Y:i.jsxs(i.Fragment,{children:[i.jsx(Pn,{shadow:!0,className:"active:!bg-subtler dark:active:!bg-offsetPlus aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:i.jsx(Ye,{draggable:!1,href:`/search/new?q=${a({defaultMessage:"what time is it in {location}",id:"NbMaPyS+lK"},{location:m.name})}`,className:"relative block size-full",children:Y})}),i.jsx(it,{children:n&&i.jsx(Pu,{onClose:Z,children:i.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[i.jsx(L,{variant:"entry-title-300",children:a({defaultMessage:"Select city",id:"twZBdKGll7"})}),i.jsx(zh,{isOpen:w&&E.length>0,suggestedQueries:E,focusedIndex:b,setFocusedIndex:_,handlePasteQuery:Rn,handleSubmit:X,value:v??"",components:H,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:i.jsx(ra,{disable1pass:!0,disabled:p.useCurrentLocation,onFocus:D,onBlur:F,className:W,pill:!1,ref:y,isMobileUserAgent:u,placeholder:a({defaultMessage:"New York, London, Tokyo...",id:"iJ+co77mIp"}),value:v,onChange:B,ClearIcon:Nit,...v.length>0?{onClear:V}:{}})}),i.jsxs("label",{htmlFor:"use-current-location",className:"gap-sm flex w-fit flex-row items-center",children:[i.jsx(T1,{id:"use-current-location",checked:!!p.useCurrentLocation,toggleChecked:re}),i.jsx(L,{variant:"small",color:"light",children:a({defaultMessage:"Use current location",id:"Z2NE7X6xxg"})})]}),i.jsx("div",{className:"mt-sm flex flex-row justify-end",children:i.jsx(ge,{variant:"primary",size:"small",onClick:q,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});nL.displayName="ClockWidget";const Zpe=20,Ait=async({options:e,reason:t})=>{const n=e?.offset??0,r=e?.limit??Zpe,s=e?.topic??null,a=e?.nextToken??null,{data:o,error:l}=await ne.GET("/rest/discover/feed",t,{params:{query:{limit:r,offset:n,next_token:a,topic:s&&s!=="you"?[s]:void 0}},timeoutMs:Pe(),numRetries:1,reason:t});if(l)throw new Ee("API_CLIENTS_ERROR",{cause:l});const c=o;if(c.status!=="success")throw new Ee("API_CLIENTS_ERROR",{cause:c});const u=c?.items??[],d=c?.feed_uuid??null,m=c?.next_token??null;return d&&u.length>0&&u.forEach(p=>{p.feed_uuid=d}),{threads:u,nextToken:m}},jit=async e=>{try{const t=await sr({headers:e,urlPath:`/rest/discover/topics?version=${wi}`,timeoutMs:1500,numRetries:1});if(!t.ok){const r=await t.text();throw new Error(`Bad discover response: ${r}`)}const n=await t.json();return{userSelectedTopics:n?.user_selected_topics??[],allTopics:n?.all_topics??[]}}catch(t){return ee.error("Failed to get discover topics.",t),{userSelectedTopics:[],allTopics:[]}}};function Rit(){return $e({queryKey:dle(),queryFn:()=>jit(),placeholderData:Ch,refetchOnReconnect:!0,refetchOnMount:!1})}const Iit=async({topics:e,reason:t})=>{const{data:n,error:r}=await ne.PUT("/rest/discover/topics",t,{body:{topics:e,return_feed:!0,return_feed_limit:Zpe,return_feed_version:wi},timeoutMs:1500,numRetries:1});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r});const s=n,a=s.feed_items??[],o=s.feed_uuid,l=s.next_token??null;return o&&a?.length>0&&a.forEach(c=>{c.feed_uuid=o}),{status:"success",feedItems:a,nextToken:l}},FUt=async({contextUUID:e,reason:t})=>{const n=await ne.PUT("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},UUt=async({contextUUID:e,reason:t})=>{const n=await ne.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},BUt=async({contextUUID:e,reason:t})=>{const n=await ne.PUT("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},VUt=async({contextUUID:e,reason:t})=>{const n=await ne.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Pit=20,Oit=({pageParam:e,topic:t,reason:n})=>{const r=e.pageNum*Pit;return Ait({options:{offset:r,topic:t,nextToken:e.nextToken},reason:n})},Lit=({initialPage:e,topic:t,reason:n,refetchInterval:r})=>{const s=Cc({queryKey:Vl(t),queryFn:({pageParam:m})=>Oit({pageParam:m,topic:t,reason:n}),refetchOnReconnect:"always",refetchOnMount:!1,initialPageParam:{pageNum:e},refetchInterval:r,getNextPageParam:(m,p,h)=>{if(!(m&&!m.threads?.[0]?.has_next_page))return{pageNum:h.pageNum+1,nextToken:m.nextToken}}}),a=s.data?.pages??[],o=(()=>{const m=new Set;return a.flatMap(p=>p.threads).filter(p=>m.has(p.uuid)?!1:(m.add(p.uuid),!0))})(),l=a[a.length-1]?.threads?.[0]?.has_next_page??!1,c=s.data?.pageParams?.length??1,u=l?c+1:null,d=f.useMemo(()=>({currentPage:c,hasNextPage:l,hasPreviousPage:c>1,getNextPage:()=>s.fetchNextPage(),getPreviousPage:()=>s.fetchPreviousPage()}),[l,c,s]);return f.useMemo(()=>({...s,nextPage:u,paginationInfo:d,threads:o}),[u,d,s,o])},Dit=0,Fit=({topic:e,reason:t,refetchInterval:n})=>{const{threads:r,paginationInfo:s,isLoading:a,isFetching:o,fetchStatus:l,nextPage:c}=Lit({initialPage:Dit,topic:e,reason:t,refetchInterval:n}),u=a||l==="fetching",d=!r?.length&&!a&&l==="idle",m=f.useCallback(()=>{!s.hasNextPage||o||s.getNextPage()},[o,s]);return f.useMemo(()=>({threads:r,paginationInfo:s,isLoading:a,fetchStatus:l,nextPage:c,showLoadingState:u,showEmptyState:d,fetchNextPage:m}),[r,s,a,l,c,u,d,m])},x8=A.memo(({variant:e,className:t,colorVariant:n,text:r,lines:s=1})=>{const o=f.useMemo(()=>({height:"50%"}),[.5]);return i.jsxs("div",{className:`relative grid items-center ${t}`,children:[i.jsx("div",{className:"col-start-1 row-start-1 flex size-full flex-col",children:Array.from({length:s}).map((l,c)=>i.jsx("div",{className:"flex h-full items-center",children:i.jsx(z,{className:U("rounded-full",{"w-full":c!==s-1||s===1,"w-1/2":c===s-1&&s>1}),variant:n??"offsetPlus",style:o})},c))}),i.jsx(L,{variant:e,color:"light",className:"pointer-events-none col-start-1 row-start-1 opacity-0",children:Array.from({length:s}).map((l,c)=>i.jsxs(A.Fragment,{children:[r??i.jsx(i.Fragment,{children:""}),c<s-1&&i.jsx("br",{})]},c))})]})});x8.displayName="TextBlockSkeleton";const rL=A.memo(({showSettings:e,setShowSettings:t,context:n="widget"})=>{const{$t:r}=Q(),s=Q(),[a,o]=f.useState(!1),{threads:l}=Fit({topic:"top",reason:"Discover widget",refetchInterval:n==="thumbnail"?void 0:1e3*60*5}),c=l[0]?.updated_datetime?.endsWith("Z")?l[0]?.updated_datetime:`${l[0]?.updated_datetime}Z`,u=l[0]?.featured_images?.[0]?.thumbnail;f.useEffect(()=>{o(!1)},[u]);const d=l[0]?i.jsx("div",{className:U("size-full transform-gpu rounded-2xl"),children:i.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0",style:{zoom:n==="thumbnail"?.75:1},children:[u&&!a&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:u,alt:"Discover",className:"absolute inset-0 size-full object-cover",onError:()=>{o(!0)}},u),i.jsx("div",{className:"absolute inset-0 bg-black/50"}),i.jsx("div",{className:"absolute inset-0 bg-black",style:{maskImage:"linear-gradient(to bottom, transparent 50%, black)"}})]}),i.jsxs("div",{className:U("absolute inset-0 flex flex-col items-start justify-end gap-1 p-2",{"drop-shadow-md":!a}),children:[i.jsx(L,{variant:"micro",color:a?"default":"white",className:"opacity-60",children:hE(s,new Date(c))}),i.jsx(L,{variant:"smallBold",color:a?"default":"white",className:"w-full break-words",children:l[0].title})]})]})}):i.jsx("div",{className:"bg-subtler size-full",children:i.jsxs("div",{className:"absolute inset-0 flex w-full flex-col items-start justify-end gap-1 p-2",children:[i.jsx(x8,{variant:"micro",colorVariant:"offsetPlus",className:"w-10 opacity-75 dark:opacity-60"}),i.jsx(x8,{variant:"smallBold",colorVariant:"offsetPlus",lines:3,className:"w-full"})]})}),m=f.useCallback(()=>t?.(!1),[t]);return n==="thumbnail"?d:i.jsxs(i.Fragment,{children:[i.jsx(Pn,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:i.jsx(Ye,{href:`/page/${l[0]?.slug}`,className:"block",children:i.jsx("div",{className:"absolute inset-0 select-none",children:d})})}),i.jsx(it,{children:e&&i.jsx(Pu,{onClose:m,children:i.jsx("div",{className:"flex flex-col gap-3 px-5 py-4",children:i.jsx(L,{variant:"entry-title-300",children:r({defaultMessage:"Discover settings",id:"Kf1JUdlcaI"})})})})})]})});rL.displayName="DiscoverWidget";const Uit=()=>{const e=f.useRef(null),t=f.useRef(null),n=f.useCallback((o,l)=>{if(e.current=o,!o||(o.volume=.5,!l))return;const c=o.play();c!==void 0&&(t.current=c,c.catch(()=>{}).finally(()=>{t.current===c&&(t.current=null)}))},[]),r=f.useCallback(()=>{const o=e.current;if(!o)return;const l=o.play();l!==void 0&&(t.current=l,l.catch(()=>{}).finally(()=>{t.current===l&&(t.current=null)}))},[]),s=f.useCallback(()=>{const o=e.current;o&&(t.current?t.current.catch(()=>{}).finally(()=>{o.pause()}):o.pause())},[]),a=f.useCallback(o=>{o?r():s()},[r,s]);return{videoRef:e,setVideoRef:n,playVideo:r,pauseVideo:s,togglePlayback:a}},Bit="https://r2cdn.perplexity.ai/comet/explore-assistant-min.mp4",TK="https://r2cdn.perplexity.ai/comet/eplore-assistant-stop-min.png",Vit=({context:e="widget"})=>{const{targetUrl:t,shouldShowWidget:n}=XO(),{trackEvent:r}=Me(),{setVideoRef:s,togglePlayback:a}=Uit(),o=f.useCallback(m=>{s(m,!1)},[s]),l=f.useCallback(()=>{if(!t)return;const m=Zs(t);r("explore assistant clicked",{domain:m})},[t,r]);if(f.useEffect(()=>{r("explore assistant shown")},[r]),!n||!t)return null;const c=()=>{e==="widget"&&a(!0)},u=()=>{e==="widget"&&a(!1)},d=i.jsx("div",{className:U("relative size-full cursor-pointer select-none",{"active:!bg-subtler dark:active:!bg-offsetPlusDark":e==="widget"}),onMouseEnter:c,onMouseLeave:u,children:i.jsxs("div",{className:"group relative size-full",children:[e==="widget"?i.jsx("video",{ref:o,src:Bit,poster:TK,className:"pointer-events-none absolute inset-0 size-full object-cover",autoPlay:!1,loop:!0,muted:!0,playsInline:!0}):i.jsx("img",{src:TK,alt:"Explore Assistant",className:"pointer-events-none absolute inset-0 size-full object-cover"}),i.jsx("div",{className:"pointer-events-none absolute bottom-0 h-[45px] w-full bg-gradient-to-b from-transparent to-[#02233E]"}),i.jsx("div",{className:"absolute inset-x-0 bottom-2 flex justify-center",children:i.jsx(L,{variant:"tinyMono",color:"white",className:"!text-2xs uppercase drop-shadow-lg",children:e==="widget"?"Try Assistant In Action":"Try Assistant"})})]})});return e==="thumbnail"?d:i.jsx(Pn,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:i.jsx(Ye,{href:t,target:"_blank",rel:"noopener",className:"block size-full cursor-pointer",draggable:!1,onClick:l,children:d})})},Jpe=A.memo(Vit),ehe=e=>{switch(e){case"YELLOW":return"bg-[#fef3c7] dark:bg-[#422006]";case"BLUE":return"bg-[#dbeafe] dark:bg-[#172554]";case"RED":return"bg-[#fee2e2] dark:bg-[#450a0a]";case"GREEN":return"bg-[#d1fae5] dark:bg-[#052e16]";default:return"bg-[#fef3c7] dark:bg-[#422006]"}},Wit=e=>{switch(e){case"YELLOW":return"placeholder-[#eab308] dark:placeholder-[#a16207]";case"BLUE":return"placeholder-[#3b82f6] dark:placeholder-[#1d4ed8]";case"RED":return"placeholder-[#ef4444] dark:placeholder-[#b91c1c]";case"GREEN":return"placeholder-[#22c55e] dark:placeholder-[#15803d]";default:return"placeholder-[#eab308] dark:placeholder-[#a16207]"}},NK=e=>{switch(e){case"YELLOW":return"text-[#a16207] dark:text-[#fef08a]";case"BLUE":return"text-[#1d4ed8] dark:text-[#bfdbfe]";case"RED":return"text-[#b91c1c] dark:text-[#fecaca]";case"GREEN":return"text-[#15803d] dark:text-[#bbf7d0]";default:return"text-[#a16207] dark:text-[#fef08a]"}};function $it(e="widget",t,n){if(e==="widget"){const r=eg("STICKY",t);if(r)return{text:r.text??n??"",color:r.color??"YELLOW"}}return{text:n??"",color:"YELLOW"}}function Hit(e,t="widget",n){t==="widget"&&Rf("STICKY",n,{version:1,text:e.text,color:e.color})}const sL=A.memo(({context:e="widget",defaultText:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const{$t:a}=Q(),o=$it(e,n,t),[l,c]=f.useState(()=>o.text),[u,d]=f.useState(()=>o.color),m=f.useRef(fh(w=>{Hit({...w},e,n)},200));f.useEffect(()=>{const w=m.current.flush;return()=>{w()}},[m]);const p=w=>{const C=w.target.value;c(C),m.current({text:C,color:u})},h=["YELLOW","BLUE","RED","GREEN"],g=a({defaultMessage:"Milk",id:"2ohof39xN+"}),y=a({defaultMessage:"Eggs",id:"rMvDs1YU+D"}),v=a({defaultMessage:"Bread",id:"0n2Uqvcq4W"}),x=i.jsxs("div",{className:"relative flex size-full cursor-pointer flex-col",style:{zoom:e==="thumbnail"?.75:1},children:[i.jsx("div",{className:U("absolute inset-0",ehe(u))}),e==="widget"?i.jsx("textarea",{className:U("scrollbar-none absolute inset-0 z-[1] resize-none bg-transparent p-4 font-sans text-sm focus:outline-none",Wit(u),NK(u)),autoCorrect:"false",placeholder:a({defaultMessage:"New note...",id:"i+imRH5ndN"}),value:l,onChange:p,style:{maskImage:"linear-gradient(to top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 16px, rgba(0,0,0,1) calc(100% - 16px), rgba(0,0,0,0) 100%)"}}):i.jsx("div",{className:"absolute inset-0 p-4",children:i.jsxs(L,{variant:"baseSemi",className:NK(u),children:["- ",g,i.jsx("br",{}),"- ",y,i.jsx("br",{}),"- ",v,i.jsx("br",{})]})})]}),b=f.useCallback(()=>s?.(!1),[s]),_=f.useCallback(()=>s?.(!1),[s]);return e==="thumbnail"?x:i.jsxs(i.Fragment,{children:[i.jsx(Pn,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:x}),i.jsx(it,{children:r&&i.jsx(Pu,{onClose:_,children:i.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[i.jsx(L,{variant:"entry-title-300",children:a({defaultMessage:"Sticky color",id:"d1DnFHvFSU"})}),i.jsx("div",{className:"gap-sm grid w-full grid-cols-4",children:h.map((w,C)=>i.jsx(the,{value:w,color:u,text:l,setColor:d,debouncedSave:m},C))}),i.jsx("div",{className:"mt-sm flex flex-row justify-end",children:i.jsx(ge,{variant:"primary",size:"small",onClick:b,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});sL.displayName="Sticky";function zit({color:e,onClick:t,selected:n}){return i.jsxs(xe.div,{whileTap:{scale:.95},onClick:t,className:U("relative aspect-square size-full cursor-pointer rounded-full",ehe(e)),children:[n&&i.jsx("div",{className:"border-inverse absolute inset-1 rounded-full border-4"}),i.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"})]})}const the=A.memo(({value:e,color:t,text:n,setColor:r,debouncedSave:s})=>{const a=f.useCallback(()=>{r(e),s.current({text:n,color:e})},[s,r,n,e]);return i.jsx(zit,{color:e,onClick:a,selected:e===t})});the.displayName="StickyColorFactory";const au=(e,t,n)=>{const r=document.createElement(e),[s,a]=Array.isArray(t)?[void 0,t]:[t,n];return s&&Object.assign(r,s),a?.forEach(o=>r.appendChild(o)),r},Git=(e,t)=>{var n;return t==="left"?e.offsetLeft:(((n=e.offsetParent instanceof HTMLElement?e.offsetParent:null)==null?void 0:n.offsetWidth)??0)-e.offsetWidth-e.offsetLeft},qit=e=>e.offsetWidth>0&&e.offsetHeight>0,Kit=(e,t)=>{customElements.get(e)!==t&&customElements.define(e,t)};function Yit(e,t,{reverse:n=!1}={}){const r=e.length;for(let s=n?r-1:0;n?s>=0:s<r;n?s--:s++)t(e[s],s)}function Qit(e,t,n,r){const s=t.formatToParts(e);n&&s.unshift({type:"prefix",value:n}),r&&s.push({type:"suffix",value:r});const a=[],o=[],l=[],c=[],u={},d=y=>`${y}:${u[y]=(u[y]??-1)+1}`;let m="",p=!1,h=!1;for(const y of s){m+=y.value;const v=y.type==="minusSign"||y.type==="plusSign"?"sign":y.type;v==="integer"?(p=!0,o.push(...y.value.split("").map(x=>({type:v,value:parseInt(x)})))):v==="group"?o.push({type:v,value:y.value}):v==="decimal"?(h=!0,l.push({type:v,value:y.value,key:d(v)})):v==="fraction"?l.push(...y.value.split("").map(x=>({type:v,value:parseInt(x),key:d(v),pos:-1-u[v]}))):(p||h?c:a).push({type:v,value:y.value,key:d(v)})}const g=[];for(let y=o.length-1;y>=0;y--){const v=o[y];g.unshift(v.type==="integer"?{...v,key:d(v.type),pos:u[v.type]}:{...v,key:d(v.type)})}return{pre:a,integer:g,fraction:l,post:c,valueAsString:m,value:typeof e=="string"?parseFloat(e):e}}const Xit=String.raw,Zit=(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0})(),Jit=typeof CSS<"u"&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),AK=typeof matchMedia<"u"?matchMedia("(prefers-reduced-motion: reduce)"):null,E2="--_number-flow-d-opacity",aL="--_number-flow-d-width",M2="--_number-flow-dx",oL="--_number-flow-d",elt=(()=>{try{return CSS.registerProperty({name:E2,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:M2,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:aL,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:oL,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),tlt="var(--number-flow-char-height, 1em)",Wc="var(--number-flow-mask-height, 0.25em)",jK=`calc(${Wc} / 2)`,b8="var(--number-flow-mask-width, 0.5em)",id=`calc(${b8} / var(--scale-x))`,Lb="#000 0, transparent 71%",RK=Xit`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${tlt} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${aL}) / var(--width));transform:translateX(var(${M2})) scaleX(var(--scale-x));margin:0 calc(-1 * ${b8});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${id},#000 calc(100% - ${id}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${Wc},#000 calc(100% - ${Wc}),transparent 100% ),radial-gradient(at bottom right,${Lb}),radial-gradient(at bottom left,${Lb}),radial-gradient(at top left,${Lb}),radial-gradient(at top right,${Lb});-webkit-mask-size:100% calc(100% - ${Wc} * 2),calc(100% - ${id} * 2) 100%,${id} ${Wc},${id} ${Wc},${id} ${Wc},${id} ${Wc};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${jK} ${b8};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${M2})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${oL})}.digit__num,.number .section::after{padding:${jK} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${E2}))}`,nlt=HTMLElement,rlt=Jit&&Zit&&elt;let Db,nhe=class extends nlt{constructor(){super(),this.created=!1,this.batched=!1;const{animated:t,...n}=this.constructor.defaultProps;this._animated=this.computedAnimated=t,Object.assign(this,n)}get animated(){return this._animated}set animated(t){var n;this.animated!==t&&(this._animated=t,(n=this.shadowRoot)==null||n.getAnimations().forEach(r=>r.finish()))}set data(t){var n;if(t==null)return;const{pre:r,integer:s,fraction:a,post:o,value:l}=t;if(this.created){const c=this._data;this._data=t,this.computedTrend=typeof this.trend=="function"?this.trend(c.value,l):this.trend,this.computedAnimated=rlt&&this._animated&&(!this.respectMotionPreference||!(AK!=null&&AK.matches))&&qit(this),(n=this.plugins)==null||n.forEach(u=>{var d;return(d=u.onUpdate)==null?void 0:d.call(u,t,c,this)}),this.batched||this.willUpdate(),this._pre.update(r),this._num.update({integer:s,fraction:a}),this._post.update(o),this.batched||this.didUpdate()}else{this._data=t,this.attachShadow({mode:"open"});try{this._internals??(this._internals=this.attachInternals()),this._internals.role="img"}catch{}if(typeof CSSStyleSheet<"u"&&this.shadowRoot.adoptedStyleSheets)Db||(Db=new CSSStyleSheet,Db.replaceSync(RK)),this.shadowRoot.adoptedStyleSheets=[Db];else{const c=document.createElement("style");c.textContent=RK,this.shadowRoot.appendChild(c)}this._pre=new PK(this,r,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new slt(this,s,a),this.shadowRoot.appendChild(this._num.el),this._post=new PK(this,o,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el),this.created=!0}try{this._internals.ariaLabel=t.valueAsString}catch{}}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();const t=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(n=>n.finished)).then(()=>{t.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=t}};nhe.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),respectMotionPreference:!0,plugins:void 0,digits:void 0};let slt=class{constructor(t,n,r,{className:s,...a}={}){this.flow=t,this._integer=new IK(t,n,{justify:"right",part:"integer"}),this._fraction=new IK(t,r,{justify:"left",part:"fraction"}),this._inner=au("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=au("span",{...a,part:"number",className:`number ${s??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update({integer:t,fraction:n}){this._integer.update(t),this._fraction.update(n)}didUpdate(){const t=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();const n=this._prevLeft-t.left,r=this.el.offsetWidth,s=this._prevWidth-r;this.el.style.setProperty("--width",String(r)),this.el.animate({[M2]:[`${n}px`,"0px"],[aL]:[s,0]},{...this.flow.transformTiming,composite:"accumulate"})}},rhe=class{constructor(t,n,{justify:r,className:s,...a},o){this.flow=t,this.children=new Map,this.onCharRemove=c=>()=>{this.children.delete(c)},this.justify=r;const l=n.map(c=>this.addChar(c).el);this.el=au("span",{...a,className:`section section--justify-${r} ${s??""}`},o?o(l):l)}addChar(t,{startDigitsAtZero:n=!1,...r}={}){const s=t.type==="integer"||t.type==="fraction"?new ahe(this,t.type,n?0:t.value,t.pos,{...r,onRemove:this.onCharRemove(t.key)}):new alt(this,t.type,t.value,{...r,onRemove:this.onCharRemove(t.key)});return this.children.set(t.key,s),s}unpop(t){t.el.removeAttribute("inert"),t.el.style.top="",t.el.style[this.justify]=""}pop(t){t.forEach(n=>{n.el.style.top=`${n.el.offsetTop}px`,n.el.style[this.justify]=`${Git(n.el,this.justify)}px`}),t.forEach(n=>{n.el.setAttribute("inert",""),n.present=!1})}addNewAndUpdateExisting(t){const n=new Map,r=new Map,s=this.justify==="left",a=s?"prepend":"append";if(Yit(t,o=>{let l;this.children.has(o.key)?(l=this.children.get(o.key),r.set(o,l),this.unpop(l),l.present=!0):(l=this.addChar(o,{startDigitsAtZero:!0,animateIn:!0}),n.set(o,l)),this.el[a](l.el)},{reverse:s}),this.flow.computedAnimated){const o=this.el.getBoundingClientRect();n.forEach(l=>{l.willUpdate(o)})}n.forEach((o,l)=>{o.update(l.value)}),r.forEach((o,l)=>{o.update(l.value)})}willUpdate(){const t=this.el.getBoundingClientRect();this._prevOffset=t[this.justify],this.children.forEach(n=>n.willUpdate(t))}didUpdate(){const t=this.el.getBoundingClientRect();this.children.forEach(s=>s.didUpdate(t));const n=t[this.justify],r=this._prevOffset-n;r&&this.children.size&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}},IK=class extends rhe{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r),this.unpop(r)}),this.addNewAndUpdateExisting(t),n.forEach(r=>{r instanceof ahe&&r.update(0)}),this.pop(n)}},PK=class extends rhe{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r)}),this.pop(n),this.addNewAndUpdateExisting(t)}},_8=class{constructor(t,n,{onRemove:r,animateIn:s=!1}={}){this.flow=t,this.el=n,this._present=!0,this._remove=()=>{var a;this.el.remove(),(a=this._onRemove)==null||a.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&s&&this.el.animate({[E2]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=r}get present(){return this._present}set present(t){if(this._present!==t){if(this._present=t,t?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){t||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",t?"0":"-.999"),this.el.animate({[E2]:t?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),t?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}},she=class extends _8{constructor(t,n,r,s){super(t.flow,r,s),this.section=t,this.value=n,this.el=r}},ahe=class extends she{constructor(t,n,r,s,a){var o,l;const c=(((l=(o=t.flow.digits)==null?void 0:o[s])==null?void 0:l.max)??9)+1,u=Array.from({length:c}).map((m,p)=>{const h=au("span",{className:"digit__num"},[document.createTextNode(String(p))]);return p!==r&&h.setAttribute("inert",""),h.style.setProperty("--n",String(p)),h}),d=au("span",{part:`digit ${n}-digit`,className:"digit"},u);d.style.setProperty("--current",String(r)),d.style.setProperty("--length",String(c)),super(t,r,d,a),this.pos=s,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=u,this.length=c}willUpdate(t){const n=this.el.getBoundingClientRect();this._prevValue=this.value;const r=n[this.section.justify]-t[this.section.justify],s=n.width/2;this._prevCenter=this.section.justify==="left"?r+s:r-s}update(t){this.el.style.setProperty("--current",String(t)),this._numbers.forEach((n,r)=>r===t?n.removeAttribute("inert"):n.setAttribute("inert","")),this.value=t}didUpdate(t){const n=this.el.getBoundingClientRect(),r=n[this.section.justify]-t[this.section.justify],s=n.width/2,a=this.section.justify==="left"?r+s:r-s,o=this._prevCenter-a;o&&this.el.animate({transform:[`translateX(${o}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});const l=this.getDelta();l&&(this.el.classList.add("is-spinning"),this.el.animate({[oL]:[-l,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var t;if(this.flow.plugins)for(const s of this.flow.plugins){const a=(t=s.getDelta)==null?void 0:t.call(s,this.value,this._prevValue,this);if(a!=null)return a}const n=this.value-this._prevValue,r=this.flow.computedTrend||Math.sign(n);return r<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:r>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:n}},alt=class extends she{constructor(t,n,r,s){const a=au("span",{className:"symbol__value",textContent:r});super(t,r,au("span",{part:`symbol ${n}`,className:"symbol"},[a]),s),this.type=n,this._children=new Map,this._onChildRemove=o=>()=>{this._children.delete(o)},this._children.set(r,new _8(this.flow,a,{onRemove:this._onChildRemove(r)}))}willUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect();this._prevOffset=n[this.section.justify]-t[this.section.justify]}update(t){if(this.value!==t){const n=this._children.get(this.value);n&&(n.present=!1);const r=this._children.get(t);if(r)r.present=!0;else{const s=au("span",{className:"symbol__value",textContent:t});this.el.appendChild(s),this._children.set(t,new _8(this.flow,s,{animateIn:!0,onRemove:this._onChildRemove(t)}))}}this.value=t}didUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect()[this.section.justify]-t[this.section.justify],r=this._prevOffset-n;r&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}};const olt=parseInt(f.version.match(/^(\d+)\./)?.[1]),iL=olt>=19,ilt=["data","digits"];class lL extends nhe{attributeChangedCallback(t,n,r){this[t]=JSON.parse(r)}}lL.observedAttributes=iL?[]:ilt;Kit("number-flow-react",lL);const llt={},OK=iL?e=>e:JSON.stringify;function LK(e){const{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:o,plugins:l,...c}=e;return[{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:o,plugins:l},c]}class clt extends f.Component{updateProperties(t){if(!this.el)return;this.el.batched=!this.props.isolate;const[n]=LK(this.props);Object.entries(n).forEach(([r,s])=>{this.el[r]=s??lL.defaultProps[r]}),t?.onAnimationsStart&&this.el.removeEventListener("animationsstart",t.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),t?.onAnimationsFinish&&this.el.removeEventListener("animationsfinish",t.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),iL&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(t){if(this.updateProperties(t),t.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>this.props.group?.didUpdate();if(!this.props.isolate)return this.el?.willUpdate(),()=>this.el?.didUpdate()}return null}componentDidUpdate(t,n,r){r?.()}handleRef(t){this.props.innerRef&&(this.props.innerRef.current=t),this.el=t}render(){const[t,{innerRef:n,className:r,data:s,willChange:a,isolate:o,group:l,digits:c,onAnimationsStart:u,onAnimationsFinish:d,...m}]=LK(this.props);return f.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":a?"":void 0,class:r,...m,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0,digits:OK(c),data:OK(s)})}constructor(t){super(t),this.handleRef=this.handleRef.bind(this)}}const ii=f.forwardRef(function({value:t,locales:n,format:r,prefix:s,suffix:a,...o},l){f.useImperativeHandle(l,()=>c.current,[]);const c=f.useRef(),u=f.useContext(ult);u?.useRegister(c);const d=f.useMemo(()=>n?JSON.stringify(n):"",[n]),m=f.useMemo(()=>r?JSON.stringify(r):"",[r]),p=f.useMemo(()=>{const h=llt[`${d}:${m}`]??=new Intl.NumberFormat(n,r);return Qit(t,h,s,a)},[t,d,m,s,a]);return f.createElement(clt,{...o,group:u,data:p,innerRef:c})}),ult=f.createContext(void 0),yn=0,fn=1,on="finance",XUt=(e,t)=>["finance/topMovers",e,t];async function ZUt({marketType:e,country:t,headers:n}){const r=await ne.GET("/rest/finance/top-movers/{market_type}",on,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:yn,numRetries:fn});if(r.error)throw new Error("Failed to fetch top movers.",{cause:r.error});return r.data}const JUt=async({symbol:e,category:t,period:n})=>{const r=await ne.POST("/rest/finance/financials/{market_identifier}/analysis",on,{params:{path:{market_identifier:e}},body:{category:t,period:n},timeoutMs:1e4,numRetries:fn});if(r.error)throw new Error(`Failed to fetch financial insights for ${e}`,{cause:r.error});return r.data},eBt=async({symbol:e,period:t,interval:n,headers:r})=>{const s=await ne.GET("/rest/finance/history/{market_identifier}",on,{params:{query:{period:t??"1d",interval:n},path:{market_identifier:e}},headers:r,timeoutMs:yn,numRetries:fn});if(s.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:s.error});return s.data},tBt=e=>["finance/coin50/history",e],nBt=async({period:e})=>{const t=await ne.GET("/rest/finance/history/COIN50USD",on,{params:{query:{period:e??"1d"}},timeoutMs:yn,numRetries:fn});if(t.error)throw new Error("Failed to fetch price history for COIN50USD",{cause:t.error});return t.data},rBt=async({symbol:e,period:t,interval:n})=>{const r=await ne.GET("/rest/finance/history/{market_identifier}/csv",on,{parseAs:"blob",params:{path:{market_identifier:e},query:{period:t??"1d",interval:n}}});if(r.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:r.error});return r.data},ohe=({symbol:e,withHistory:t,historyAfterHours:n,historyPeriod:r,historyOffset:s})=>["finance/quote",e,t??null,n??null,r??null,s??null],UE=async({symbol:e,withHistory:t=!1,historyAfterHours:n=!0,historyPeriod:r,historyOffset:s,headers:a})=>{const o=await ne.GET("/rest/finance/quote/{market_identifier}",on,{params:{path:{market_identifier:e},query:{with_history:t,history_period:r,history_offset:s,history_after_hours:n}},headers:a,timeoutMs:yn,numRetries:fn});if(o.response.status===404)return null;if(o.error)throw new Error(`Failed to fetch quote for ${e}`,{cause:o.error});return o.data},sBt=e=>["finance/profile",e],aBt=async({symbol:e,headers:t})=>{const n=await ne.GET("/rest/finance/profile/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.response.status===404)return null;if(n.error)throw new Error(`Failed to fetch profile for ${e}`,{cause:n.error});return n.data},oBt=e=>["finance/profile/description",e],iBt=async({symbol:e,headers:t})=>{const n=await ne.GET("/rest/finance/profile/{market_identifier}/description",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.error)throw new Error(`Failed to fetch profile description for ${e}`,{cause:n.error});return n.data},lBt=(e,t,n="",r="",s)=>["finance/history",t,e,n,r,s],cBt=e=>["finance/financials",e],uBt=async(e,t)=>{const n=await ne.GET("/rest/finance/financials/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.error)throw new Error(`Failed to fetch financials for ${e}`,{cause:n.error});return n.data},dBt=async(e,t)=>{const n=await ne.GET("/rest/finance/estimates/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.error)throw new Error(`Failed to fetch estimates for ${e}`,{cause:n.error});return n.data},fBt=e=>["finance/holders",e],mBt=async(e,t)=>{const n=await ne.GET("/rest/finance/holders/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.error)throw new Error(`Failed to fetch holders for ${e}`,{cause:n.error});return n.data};function pBt(e,t){return["finance/peers",e,t]}async function hBt({symbol:e,headers:t,index:n}){const r=await ne.GET("/rest/finance/peers/{market_identifier}",on,{params:{path:{market_identifier:e},query:{with_index:n}},headers:t,timeoutMs:yn,numRetries:fn});if(r.error)throw new Error(`Failed to fetch peers for ${e}`,{cause:r.error});return r.data}async function gBt({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/bulls-vs-bears-summary/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.error)throw new Error(`Failed to fetch bulls vs bears analysis for ${e}`,{cause:n.error});return n.data}async function yBt({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/timeline/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:0});if(n.error)throw new Error(`Failed to fetch timeline for ${e}`,{cause:n.error});return n.data}async function vBt({eventId:e,symbol:t,headers:n}){const r=await ne.GET("/rest/finance/earnings/{market_identifier}/transcript/{event_id}",on,{headers:n,params:{path:{market_identifier:t,event_id:e}},timeoutMs:yn,numRetries:fn});if(r.response.status===404)return null;if(r.error)throw new Error(`Failed to fetch earnings transcript for ${t}`,{cause:r.error});return r.data}const xBt=(e,t)=>["finance/analysis",e,t];async function bBt({eventId:e,symbol:t,headers:n}){const r=await ne.GET("/rest/finance/earnings/{market_identifier}/analysis/{event_id}",on,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:yn,numRetries:fn});if(r.error)throw new Error(`Failed to fetch earnings analysis for ${t}`,{cause:r.error});return r.data}const _Bt=(e,t)=>["finance/documents",e,t];async function wBt({eventId:e,symbol:t,headers:n}){const r=await ne.GET("/rest/finance/earnings/{market_identifier}/documents/{event_id}",on,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:yn,numRetries:fn});if(r.error)throw new Error(`Failed to fetch earnings documents for ${t}`,{cause:r.error});return r.data}const CBt=e=>["finance/documents",e];async function SBt({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/documents/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.error)throw new Error(`Failed to fetch documents for ${e}`,{cause:n.error});return n.data}const EBt=async(e,t)=>{const n=await ne.GET("/rest/finance/documents/download/{document_id}",on,{params:{path:{document_id:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.error)throw new Error(`Failed to fetch document download url for ${e}`,{cause:n.error});return{errorCode:n.data?.error_code??null,presignedUrl:n.data?.presigned_url??null}},MBt=e=>["finance/earnings",e];async function kBt({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/earnings/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.response.status===404)return[];if(n.error)throw new Error(`Failed to fetch earnings for ${e}`,{cause:n.error});return n.data}async function TBt({marketType:e,headers:t,country:n}){const r=await ne.GET("/rest/finance/{market_type}",on,{headers:t,params:{path:{market_type:e},query:{country:n}},timeoutMs:yn,numRetries:fn});if(r.error)throw new Error(`Failed to fetch finance page shared data for ${e}`,{cause:r.error});return r.data}const dlt=(e,t,n)=>["finance/top-indices",e,t,n];async function flt({groupId:e,headers:t,historyPeriod:n,country:r}){const s=await ne.GET("/rest/finance/top-indices/{group_id}",on,{headers:t,params:{path:{group_id:e},query:{with_history:!0,history_period:n,country:r}},timeoutMs:yn,numRetries:fn});if(s.error)throw new Error("Failed to fetch top indices",{cause:s.error});return s.data}const NBt=(e,t)=>["finance/watchlist-quotes",e??"",t??""];async function ABt({headers:e,country:t}){const n=await ne.GET("/rest/finance/watchlist-quotes",on,{headers:e,timeoutMs:yn,numRetries:fn,params:{query:{country:t}}});if(n.error)throw new Error("Failed to fetch watchlist quotes",{cause:n.error});return n.data}async function jBt(){const e=await ne.GET("/rest/finance/equity-sectors",on,{timeoutMs:yn,numRetries:fn});if(e.error)throw new Error("Failed to fetch equity sectors",{cause:e.error});return e.data}async function RBt(){const e=await ne.GET("/rest/finance/fixed-income",on,{timeoutMs:yn,numRetries:fn});if(e.error)throw new Error("Failed to fetch fixed income",{cause:e.error});return e.data}async function IBt({marketType:e,country:t}){const n=await ne.GET("/rest/finance/market-sentiment/{market_type}",on,{params:{path:{market_type:e},query:{country:t}},timeoutMs:yn,numRetries:fn});if(n.error)throw new Error("Failed to fetch market sentiment",{cause:n.error});return n.data}async function PBt({marketType:e,headers:t,country:n}){const r=await ne.GET("/rest/finance/top-z-scores/{market_type}",on,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:yn,numRetries:fn});if(r.error)throw new Error("Failed to fetch top z scores",{cause:r.error});return r.data}async function OBt({marketIdentifier:e,locale:t}){const n=await ne.GET("/rest/finance/significant-movement-summary/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:{"Accept-Language":t},timeoutMs:yn,numRetries:fn});if(n.error)throw new Error("Failed to fetch significant movement summary",{cause:n.error});return n.data}const LBt=e=>["finance/news",e];async function DBt({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/news/{market_identifier}",on,{params:{path:{market_identifier:e}},headers:t,timeoutMs:yn,numRetries:fn});if(n.error)throw new Error("Failed to fetch news",{cause:n.error});return n.data}async function FBt({marketType:e,country:t,headers:n}){const r=await ne.GET("/rest/finance/market-summary/{market_type}",on,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:yn,numRetries:fn});if(r.error)throw new Error("Failed to fetch market summary",{cause:r.error});return r.data}async function UBt({marketType:e,headers:t,country:n}){const r=await ne.GET("/rest/finance/general-news/{market_type}",on,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:yn,numRetries:fn});if(r.error)throw new Error("Failed to fetch general news",{cause:r.error});return r.data}const BBt=(e,t,n)=>["finance/crypto-leaderboard",e,t,n];async function VBt({sortBy:e="dollarVolume24h",orderBy:t="desc",provider:n="coinbase",headers:r}){const s=await ne.GET("/rest/finance/leaderboard/crypto",on,{params:{query:{sort_by:e,order_by:t,provider:n}},timeoutMs:yn,numRetries:fn,headers:r});if(s.error)throw new Error("Failed to fetch crypto leaderboard",{cause:s.error});return s.data}const WBt=(e,t,n,r)=>["finance/earnings/schedule",e,t,n,r];async function $Bt(e,t,n,r){const s=await ne.GET("/rest/finance/earnings/schedule",on,{params:{query:{start_date:e,end_date:t,timezone:n,country:r}},timeoutMs:yn,numRetries:fn});if(s.error)throw new Error("Failed to fetch earnings schedule",{cause:s.error});return s.data}const HBt=(e,t,n)=>["finance/earnings",e,t,n];async function zBt(e,t,n){const r=await ne.GET("/rest/finance/earnings",on,{params:{query:{date:e,timezone:t,country:n}},timeoutMs:yn,numRetries:fn});if(r.error)throw new Error("Failed to fetch earnings schedule",{cause:r.error});return r.data}async function GBt(){const{data:e,error:t}=await ne.GET("/rest/autosuggest/finance/list-autosuggest",on,{params:{query:{query:""}},timeoutMs:yn,numRetries:fn});if(t)throw new Error("Failed to fetch trending companies",{cause:t});return e.results.filter(n=>n.category==="ticker")}const qBt=(e,t)=>["finance/screener",e,t];async function KBt({query:e,currency:t,headers:n}){const r=await ne.GET("/rest/finance/screener",on,{params:{query:{query:e,currency:t||void 0}},headers:n,timeoutMs:yn,numRetries:fn});if(r.error)throw new Error("Failed to fetch screener data.",{cause:r.error});return r.data}const YBt=(e,t)=>["finance-autosuggest",e,t],mlt=async({query:e,reason:t,country:n})=>{try{const{data:r,error:s}=await ne.GET("/rest/autosuggest/finance/list-autosuggest",t,{params:{query:{query:e,country:n}},timeoutMs:0});if(s)throw new Error("Failed to fetch finance suggestions.",{cause:s});return r.results??le}catch(r){return ee.error(r),[]}},plt=(e,t,n)=>["finance/currency-exchange",e,t,n];async function hlt({sourceCurrency:e,targetCurrency:t,amount:n=1,headers:r}){const s=await ne.GET("/rest/finance/currency-exchange",on,{params:{query:{source_currency:e,target_currency:t,amount:n}},headers:r,timeoutMs:yn,numRetries:fn});if(s.error)throw new Error(`Failed to convert ${e} to ${t}`,{cause:s.error});return s.data}async function QBt(e,t){try{return(await UE({symbol:e,headers:t}))?.currency?.toLowerCase()||"usd"}catch(n){return ee.warn(`Failed to fetch currency for symbol ${e}`,{error:n}),"usd"}}const XBt=(e,t)=>["finance/transcript",e,t];function glt(e){const t=e+"CollectionProvider",[n,r]=Ra(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:v,children:x}=y,b=A.useRef(null),_=A.useRef(new Map).current;return i.jsx(s,{scope:v,itemMap:_,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=P0(l),u=A.forwardRef((y,v)=>{const{scope:x,children:b}=y,_=a(l,x),w=In(v,_.collectionRef);return i.jsx(c,{ref:w,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",m="data-radix-collection-item",p=P0(d),h=A.forwardRef((y,v)=>{const{scope:x,children:b,..._}=y,w=A.useRef(null),C=In(v,w),S=a(d,x);return A.useEffect(()=>(S.itemMap.set(w,{ref:w,..._}),()=>void S.itemMap.delete(w))),i.jsx(p,{[m]:"",ref:C,children:b})});h.displayName=d;function g(y){const v=a(e+"CollectionConsumer",y);return A.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((S,E)=>_.indexOf(S.ref.current)-_.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:h},g,r]}var Bk="rovingFocusGroup.onEntryFocus",ylt={bubbles:!1,cancelable:!0},F1="RovingFocusGroup",[w8,ihe,vlt]=glt(F1),[xlt,BE]=Ra(F1,[vlt]),[blt,_lt]=xlt(F1),lhe=f.forwardRef((e,t)=>i.jsx(w8.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(w8.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(wlt,{...e,ref:t})})}));lhe.displayName=F1;var wlt=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...m}=e,p=f.useRef(null),h=In(t,p),g=qS(a),[y,v]=_i({prop:o,defaultProp:l??null,onChange:c,caller:F1}),[x,b]=f.useState(!1),_=ba(u),w=ihe(n),C=f.useRef(!1),[S,E]=f.useState(0);return f.useEffect(()=>{const M=p.current;if(M)return M.addEventListener(Bk,_),()=>M.removeEventListener(Bk,_)},[_]),i.jsx(blt,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:y,onItemFocus:f.useCallback(M=>v(M),[v]),onItemShiftTab:f.useCallback(()=>b(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(M=>M+1),[]),onFocusableItemRemove:f.useCallback(()=>E(M=>M-1),[]),children:i.jsx(nn.div,{tabIndex:x||S===0?-1:0,"data-orientation":r,...m,ref:h,style:{outline:"none",...e.style},onMouseDown:Pt(e.onMouseDown,()=>{C.current=!0}),onFocus:Pt(e.onFocus,M=>{const k=!C.current;if(M.target===M.currentTarget&&k&&!x){const T=new CustomEvent(Bk,ylt);if(M.currentTarget.dispatchEvent(T),!T.defaultPrevented){const j=w().filter(I=>I.focusable),R=j.find(I=>I.active),O=j.find(I=>I.id===y),N=[R,O,...j].filter(Boolean).map(I=>I.ref.current);dhe(N,d)}}C.current=!1}),onBlur:Pt(e.onBlur,()=>b(!1))})})}),che="RovingFocusGroupItem",uhe=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=e,c=Um(),u=a||c,d=_lt(che,n),m=d.currentTabStopId===u,p=ihe(n),{onFocusableItemAdd:h,onFocusableItemRemove:g,currentTabStopId:y}=d;return f.useEffect(()=>{if(r)return h(),()=>g()},[r,h,g]),i.jsx(w8.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(nn.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Pt(e.onMouseDown,v=>{r?d.onItemFocus(u):v.preventDefault()}),onFocus:Pt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Pt(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=Elt(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let _=p().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")_.reverse();else if(x==="prev"||x==="next"){x==="prev"&&_.reverse();const w=_.indexOf(v.currentTarget);_=d.loop?Mlt(_,w+1):_.slice(w+1)}setTimeout(()=>dhe(_))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:y!=null}):o})})});uhe.displayName=che;var Clt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Slt(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Elt(e,t,n){const r=Slt(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Clt[r]}function dhe(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Mlt(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var fhe=lhe,mhe=uhe,phe="Toggle",hhe=f.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...a}=e,[o,l]=_i({prop:n,onChange:s,defaultProp:r??!1,caller:phe});return i.jsx(nn.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:Pt(e.onClick,()=>{e.disabled||l(!o)})})});hhe.displayName=phe;var Ou="ToggleGroup",[ghe,ZBt]=Ra(Ou,[BE]),yhe=BE(),cL=A.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return i.jsx(klt,{...s,ref:t})}if(n==="multiple"){const s=r;return i.jsx(Tlt,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Ou}\``)});cL.displayName=Ou;var[vhe,xhe]=ghe(Ou),klt=A.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[o,l]=_i({prop:n,defaultProp:r??"",onChange:s,caller:Ou});return i.jsx(vhe,{scope:e.__scopeToggleGroup,type:"single",value:A.useMemo(()=>o?[o]:[],[o]),onItemActivate:l,onItemDeactivate:A.useCallback(()=>l(""),[l]),children:i.jsx(bhe,{...a,ref:t})})}),Tlt=A.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[o,l]=_i({prop:n,defaultProp:r??[],onChange:s,caller:Ou}),c=A.useCallback(d=>l((m=[])=>[...m,d]),[l]),u=A.useCallback(d=>l((m=[])=>m.filter(p=>p!==d)),[l]);return i.jsx(vhe,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:c,onItemDeactivate:u,children:i.jsx(bhe,{...a,ref:t})})});cL.displayName=Ou;var[Nlt,Alt]=ghe(Ou),bhe=A.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:a,dir:o,loop:l=!0,...c}=e,u=yhe(n),d=qS(o),m={role:"group",dir:d,...c};return i.jsx(Nlt,{scope:n,rovingFocus:s,disabled:r,children:s?i.jsx(fhe,{asChild:!0,...u,orientation:a,dir:d,loop:l,children:i.jsx(nn.div,{...m,ref:t})}):i.jsx(nn.div,{...m,ref:t})})}),k2="ToggleGroupItem",_he=A.forwardRef((e,t)=>{const n=xhe(k2,e.__scopeToggleGroup),r=Alt(k2,e.__scopeToggleGroup),s=yhe(e.__scopeToggleGroup),a=n.value.includes(e.value),o=r.disabled||e.disabled,l={...e,pressed:a,disabled:o},c=A.useRef(null);return r.rovingFocus?i.jsx(mhe,{asChild:!0,...s,focusable:!o,active:a,ref:c,children:i.jsx(DK,{...l,ref:t})}):i.jsx(DK,{...l,ref:t})});_he.displayName=k2;var DK=A.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,a=xhe(k2,n),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?o:void 0;return i.jsx(hhe,{...l,...s,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),jlt=cL,Rlt=_he;const wu=[.4,0,.2,1],Ilt=({value:e,onChange:t,id:n,children:r,boxProps:s,className:a=""})=>{const o=l=>{l&&t(l)};return i.jsx(whe.Provider,{value:{activeValue:e},children:i.jsx(wl,{id:n,children:i.jsx(jlt,{onValueChange:o,type:"single",value:e,asChild:!0,children:i.jsx(xe.div,{layout:!0,layoutRoot:!0,children:i.jsx(z,{className:U("border-subtler p-two flex rounded-lg border",a),...s,children:r})})})})})},Plt=({value:e,icon:t,className:n="",children:r})=>{const s="relative text-quiet hover:text-foreground data-[state=on]:text-foreground flex h-[32px] min-w-[32px] p-sm items-center justify-center duration-150 active:scale-95",a=f.useContext(whe);return i.jsx(Rlt,{asChild:!0,value:e,children:i.jsxs("button",{className:U(s,n),children:[i.jsxs("span",{className:"gap-xs relative z-[2] flex",children:[Array.isArray(t)?t.map((o,l)=>i.jsx(me,{icon:o,size:"sm"},l)):t?i.jsx(me,{icon:t,size:"sm"}):null,r]}),a.activeValue===e&&i.jsx(xe.div,{layout:!0,layoutId:"toggle",className:"absolute inset-0 z-[1]",transition:{duration:.15,ease:wu},children:i.jsx("div",{className:"absolute inset-0 rounded-md bg-current opacity-10"})})]})})},whe=Cf("ToggleGroupContext",{activeValue:""}),Olt=Ilt,Llt=Plt,FK={Root:Olt,Item:Llt},J_=["1d","5d","1m","6m","ytd","1y","5y","max"],Dlt={"1d":K({id:"+7PjfVlUMl",defaultMessage:"1 day"}),"5d":K({id:"hZS2DWIcL1",defaultMessage:"5 days"}),"1m":K({id:"p1dNdsvErg",defaultMessage:"1 month"}),"6m":K({id:"AwuN57pzXN",defaultMessage:"6 months"}),ytd:K({id:"zvczgisLv6",defaultMessage:"Year to date"}),"1y":K({id:"rwIPgHMeIl",defaultMessage:"1 year"}),"3m":K({id:"D0xe/T9tyE",defaultMessage:"3 months"}),"5y":K({id:"dFw5uLx5ao",defaultMessage:"5 years"}),max:K({id:"kkjl2vQekD",defaultMessage:"Max"})},JBt=J_.map(e=>({text:e.toUpperCase(),value:e})),eVt=f.memo(function({id:t,periods:n,period:r,setPeriod:s,className:a}){const{isMobileStyle:o}=ye(),{$t:l}=Q(),c=f.useMemo(()=>n.map(d=>({text:l(Dlt[d.value]),value:d.value,active:r===d.value,show:!0,type:"default",onClick:()=>{s(d.value)}})),[n,r,s,l]),u=f.useMemo(()=>n.find(d=>d.value===r),[n,r]);return o?i.jsx(z,{className:U(a,"flex items-center"),variant:"transparent",children:i.jsx(Jt,{items:c,isMobileStyle:o,children:i.jsx(Te,{text:u?.text??"",size:"tiny",variant:"noBackground",chevron:!0})})}):i.jsx(FK.Root,{value:r,className:a,id:`${t}-periods`,onChange:d=>{s(d)},children:n.map(d=>i.jsx(FK.Item,{value:d.value,className:"select-none bg-transparent",children:i.jsx(L,{variant:"tiny",color:r===d.value?"default":"light",className:"translate-y-px whitespace-nowrap duration-150",children:d.text})},`${d.value}`))})}),Fb=new Set;async function Flt({period:e,symbols:t,headers:n,existingFailedPeriods:r=[],reason:s}){const a=J_.indexOf(e),o=[...r].filter(l=>!Fb.has(l));for(let l=a;l<J_.length;l++){const c=J_[l];if(o.includes(c)&&!Fb.has(c))continue;const u=await ne.GET("/rest/finance/prices/{period}/{market_identifiers}",s,{params:{path:{period:c,market_identifiers:t.join(",")}},headers:n,timeoutMs:yn,numRetries:fn});if(u.error){Fb.has(c)||o.push(c),ee.error("Failed to fetch FMP prices",{url:`/rest/finance/prices/${c}/${t.join(",")}`,error:u.error,status:u.response.status,statusText:u.response.statusText});continue}return Fb.add(c),{...u.data.data}}return null}const Che="stock-widget-quote-cache",She="stock-widget-prices-cache",ew="NVDA",Ult=60*1e3,Blt=5*60*1e3,Vlt=60*1e3,Wlt=30*1e3,$lt=5*60*1e3,Hlt=60*1e3,zlt=150,UK=50,Glt=24*60*60*1e3,qlt=.1,Klt=10,Ylt=5;function Qlt(e){try{const t=Ae.getItem(`${Che}-${e}`);if(t){const n=JSON.parse(t);if(Date.now()-n.timestamp<Ult)return n.data}}catch{}return null}function Xlt(e,t){try{const n={symbol:e,data:t,timestamp:Date.now()};Ae.setItem(`${Che}-${e}`,JSON.stringify(n))}catch{}}function Zlt(e,t){try{const n=Ae.getItem(`${She}-${e}-${t}`);if(n){const r=JSON.parse(n);if(Date.now()-r.timestamp<Blt)return r.data}}catch{}return null}function Jlt(e,t,n){try{const r={symbol:e,period:t,data:n,timestamp:Date.now()};Ae.setItem(`${She}-${e}-${t}`,JSON.stringify(r))}catch{}}function ect(e="widget",t="default"){if(e!=="widget")return{version:1,symbol:ew};const n=eg("STOCK",t);return n?{version:1,symbol:n.symbol??ew}:{version:1,symbol:ew}}function tct(e,t="widget",n="default"){t==="widget"&&Rf("STOCK",n,{version:1,symbol:e.symbol})}function nct(e="default",t="widget"){const n=ect(t,e),[r,s]=f.useState(n),a="stock-widget",{data:o}=SO({watchlistType:"FINANCE",reason:a}),l=r.symbol||o?.[0]?.identifier||ew,c=Qlt(l),u=Zlt(l,"1d"),{data:d,isLoading:m}=$e({queryKey:["finance/quote",l],queryFn:async()=>{const E=await UE({symbol:l,withHistory:!0,historyPeriod:"1d",historyOffset:0});return E&&Xlt(l,E),E},refetchInterval:Vlt,staleTime:Wlt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:c}),{data:p,isLoading:h}=$e({queryKey:["finance/prices",l,"1d"],queryFn:async()=>{const E=await Flt({period:"1d",symbols:[l],reason:"stock-widget"});return E&&Jlt(l,"1d",E),E},refetchInterval:$lt,staleTime:Hlt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:u}),g=d||c,y=p||u,v=!!(d&&p),x={symbol:l,price:"---.--",changesPercentage:"--%",change:"--$",exchange:"--",currency:"USD"},b={history:{prices:[{symbol:l,entries:Array.from({length:UK},(E,M)=>({date:new Date(Date.now()-(UK-1-M)*Glt).toISOString(),price:zlt+Math.sin(M*qlt)*Klt+Math.random()*Ylt})),exchange:"--",currency:"USD"}]}},_=g||x,w=y||b,C=f.useMemo(()=>w?.history?.prices?w.history.prices.map(E=>({symbol:E.symbol,entries:E.entries.map(M=>({date:M.date,price:M.price})).sort((M,k)=>new Date(M.date).getTime()-new Date(k.date).getTime()),exchange:E.exchange||_?.exchange||"",currency:E.currency||_?.currency||"USD"})):[],[w,_]),S=f.useCallback(E=>{s(E),tct(E,t,e)},[s,t,e]);return f.useMemo(()=>({symbol:l,quote:_,prices:C,isLoading:m||h,hasError:!1,hasRealData:v,stockSettings:r,updateStockSettings:S}),[l,_,C,m,h,v,r,S])}const Ehe=A.memo(({symbol:e,src:t,srcDark:n,className:r,size:s="lg"})=>{n=n??t;const[a,o]=f.useState(!1),l=f.useRef(null),{colorScheme:c}=Pr(),u=()=>{l.current&&l.current.naturalHeight>0&&o(!1)};f.useEffect(()=>{l.current&&(l.current.complete&&l.current.naturalHeight===0?o(!0):o(!1))},[l]),f.useEffect(()=>{o(!1)},[e]);const d=c==="dark"?n:t;return i.jsx("div",{className:U({"size-lg":s==="lg","size-md":s==="md","size-sm":s==="sm"},"flex shrink-0 items-center justify-center",r),children:a||!d?i.jsx(rct,{symbol:e}):i.jsx("img",{ref:l,src:d,alt:e,className:"rounded-[4px] object-contain",onError:()=>{o(!0)},onLoad:u},e)})});Ehe.displayName="FinanceAssetLogo";const rct=({symbol:e})=>{const t=f.useMemo(()=>e.replace(/[^a-zA-Z0-9]/g,"").slice(0,1).toUpperCase()||"#",[e]);return i.jsx(z,{variant:"offsetPlus",className:"flex size-full items-center justify-center rounded-full",children:i.jsx(L,{color:"light",children:i.jsx("span",{className:"font-mono opacity-70",children:t})})})},sct=10,act=e=>{const{isSelected:t}=e;return i.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:i.jsx(Te,{icon:t?Rr:rr,size:"small",pill:!0})})},oct=({onClear:e})=>i.jsx(Te,{icon:Lt,size:"tiny",pill:!0,onClick:e}),Mhe=A.memo(({onClose:e,onSelectStock:t,currentSymbol:n})=>{const{isMobileUserAgent:r}=ye(),s="stock-settings-modal",{$t:a}=Q(),o=mt(),l=f.useRef(null),[c,u]=f.useState(n),[d,m]=f.useState(le),[p,h]=f.useState(-1),[g,y]=f.useState(!1),v=f.useCallback(()=>{e(),m(le)},[e]),x=f.useCallback(async O=>{if(O.trim().length===0){m(le);return}const N=Sa().erp;try{const D=(await o.fetchQuery({queryKey:["watchlist","FINANCE",O],queryFn:()=>Wde({query:O,watchlistType:"FINANCE",limit:sct,cometRenderPlace:N,reason:s}),staleTime:3600})).map(F=>({query:F.title,title:F.title,image:F.image_url??void 0,imageDark:F.image_url_dark??void 0,description:F.description,identifier:F.identifier,category:F.category??void 0,subscribed:F.subscribed}));m(D)}catch{m(le)}},[o,s]),b=ta(x,250,{leading:!0,trailing:!0}),_=f.useCallback(O=>{b(O)},[b]),w=f.useCallback(()=>{y(!0),_(c)},[c,_]),C=f.useCallback(()=>{y(!1)},[]),S=f.useCallback(O=>{u(O),_(O)},[_]),E=()=>{u(""),m([])},M=f.useCallback(O=>{t(O.identifier??"AAPL"),m(le),u(O.identifier??"AAPL")},[t]),k=f.useCallback((O,P)=>{M(O)},[M]),T=U("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":g&&d.length>0}),j=f.useMemo(()=>({image:O,alt:P})=>i.jsx("div",{className:"mr-3 flex size-6 items-center justify-center overflow-hidden rounded",children:i.jsx(Ehe,{src:O??"",symbol:P??"",size:"lg"})}),[]);f.useEffect(()=>{c||_("")},[c,_]);const R=f.useMemo(()=>({RightIconComponent:act,LeftIconComponent:j}),[j]);return i.jsx(Pu,{onClose:v,children:i.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[i.jsx(L,{variant:"entry-title-300",children:a({defaultMessage:"Select Stock",id:"0MrUZjeA/m"})}),i.jsx(zh,{isOpen:g&&d.length>0,suggestedQueries:d,focusedIndex:p,setFocusedIndex:h,handlePasteQuery:Rn,handleSubmit:k,value:c,components:R,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:i.jsx(ra,{onFocus:w,onBlur:C,className:T,pill:!1,ref:l,isMobileUserAgent:r,placeholder:a({defaultMessage:"Search stocks (e.g., AAPL, TSLA, MSFT)...",id:"TMRxNvCkDS"}),value:c,onChange:S,ClearIcon:oct,...c.length>0?{onClear:E}:{}})}),i.jsx("div",{className:"mt-sm flex flex-row justify-end",children:i.jsx(ge,{variant:"primary",size:"small",onClick:v,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})});Mhe.displayName="StockSettingsModal";var C8=Math.PI,S8=2*C8,gd=1e-6,ict=S8-gd;function E8(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function uo(){return new E8}E8.prototype=uo.prototype={constructor:E8,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,s,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(e,t,n,r,s){e=+e,t=+t,n=+n,r=+r,s=+s;var a=this._x1,o=this._y1,l=n-e,c=r-t,u=a-e,d=o-t,m=u*u+d*d;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(m>gd)if(!(Math.abs(d*l-c*u)>gd)||!s)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var p=n-a,h=r-o,g=l*l+c*c,y=p*p+h*h,v=Math.sqrt(g),x=Math.sqrt(m),b=s*Math.tan((C8-Math.acos((g+m-y)/(2*v*x)))/2),_=b/x,w=b/v;Math.abs(_-1)>gd&&(this._+="L"+(e+_*u)+","+(t+_*d)),this._+="A"+s+","+s+",0,0,"+ +(d*p>u*h)+","+(this._x1=e+w*l)+","+(this._y1=t+w*c)}},arc:function(e,t,n,r,s,a){e=+e,t=+t,n=+n,a=!!a;var o=n*Math.cos(r),l=n*Math.sin(r),c=e+o,u=t+l,d=1^a,m=a?r-s:s-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>gd||Math.abs(this._y1-u)>gd)&&(this._+="L"+c+","+u),n&&(m<0&&(m=m%S8+S8),m>ict?this._+="A"+n+","+n+",0,1,"+d+","+(e-o)+","+(t-l)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=u):m>gd&&(this._+="A"+n+","+n+",0,"+ +(m>=C8)+","+d+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function vn(e){return function(){return e}}var BK=Math.abs,Cs=Math.atan2,ld=Math.cos,lct=Math.max,Vk=Math.min,Ii=Math.sin,Rm=Math.sqrt,ma=1e-12,lv=Math.PI,T2=lv/2,tw=2*lv;function cct(e){return e>1?0:e<-1?lv:Math.acos(e)}function VK(e){return e>=1?T2:e<=-1?-T2:Math.asin(e)}function uct(e){return e.innerRadius}function dct(e){return e.outerRadius}function fct(e){return e.startAngle}function mct(e){return e.endAngle}function pct(e){return e&&e.padAngle}function hct(e,t,n,r,s,a,o,l){var c=n-e,u=r-t,d=o-s,m=l-a,p=m*c-d*u;if(!(p*p<ma))return p=(d*(t-a)-m*(e-s))/p,[e+p*c,t+p*u]}function Ub(e,t,n,r,s,a,o){var l=e-n,c=t-r,u=(o?a:-a)/Rm(l*l+c*c),d=u*c,m=-u*l,p=e+d,h=t+m,g=n+d,y=r+m,v=(p+g)/2,x=(h+y)/2,b=g-p,_=y-h,w=b*b+_*_,C=s-a,S=p*y-g*h,E=(_<0?-1:1)*Rm(lct(0,C*C*w-S*S)),M=(S*_-b*E)/w,k=(-S*b-_*E)/w,T=(S*_+b*E)/w,j=(-S*b+_*E)/w,R=M-v,O=k-x,P=T-v,N=j-x;return R*R+O*O>P*P+N*N&&(M=T,k=j),{cx:M,cy:k,x01:-d,y01:-m,x11:M*(s/C-1),y11:k*(s/C-1)}}function gct(){var e=uct,t=dct,n=vn(0),r=null,s=fct,a=mct,o=pct,l=null;function c(){var u,d,m=+e.apply(this,arguments),p=+t.apply(this,arguments),h=s.apply(this,arguments)-T2,g=a.apply(this,arguments)-T2,y=BK(g-h),v=g>h;if(l||(l=u=uo()),p<m&&(d=p,p=m,m=d),!(p>ma))l.moveTo(0,0);else if(y>tw-ma)l.moveTo(p*ld(h),p*Ii(h)),l.arc(0,0,p,h,g,!v),m>ma&&(l.moveTo(m*ld(g),m*Ii(g)),l.arc(0,0,m,g,h,v));else{var x=h,b=g,_=h,w=g,C=y,S=y,E=o.apply(this,arguments)/2,M=E>ma&&(r?+r.apply(this,arguments):Rm(m*m+p*p)),k=Vk(BK(p-m)/2,+n.apply(this,arguments)),T=k,j=k,R,O;if(M>ma){var P=VK(M/m*Ii(E)),N=VK(M/p*Ii(E));(C-=P*2)>ma?(P*=v?1:-1,_+=P,w-=P):(C=0,_=w=(h+g)/2),(S-=N*2)>ma?(N*=v?1:-1,x+=N,b-=N):(S=0,x=b=(h+g)/2)}var I=p*ld(x),D=p*Ii(x),F=m*ld(w),B=m*Ii(w);if(k>ma){var V=p*ld(b),$=p*Ii(b),G=m*ld(_),X=m*Ii(_),Y;if(y<lv&&(Y=hct(I,D,G,X,V,$,F,B))){var W=I-Y[0],H=D-Y[1],Z=V-Y[0],re=$-Y[1],q=1/Ii(cct((W*Z+H*re)/(Rm(W*W+H*H)*Rm(Z*Z+re*re)))/2),J=Rm(Y[0]*Y[0]+Y[1]*Y[1]);T=Vk(k,(m-J)/(q-1)),j=Vk(k,(p-J)/(q+1))}}S>ma?j>ma?(R=Ub(G,X,I,D,p,j,v),O=Ub(V,$,F,B,p,j,v),l.moveTo(R.cx+R.x01,R.cy+R.y01),j<k?l.arc(R.cx,R.cy,j,Cs(R.y01,R.x01),Cs(O.y01,O.x01),!v):(l.arc(R.cx,R.cy,j,Cs(R.y01,R.x01),Cs(R.y11,R.x11),!v),l.arc(0,0,p,Cs(R.cy+R.y11,R.cx+R.x11),Cs(O.cy+O.y11,O.cx+O.x11),!v),l.arc(O.cx,O.cy,j,Cs(O.y11,O.x11),Cs(O.y01,O.x01),!v))):(l.moveTo(I,D),l.arc(0,0,p,x,b,!v)):l.moveTo(I,D),!(m>ma)||!(C>ma)?l.lineTo(F,B):T>ma?(R=Ub(F,B,V,$,m,-T,v),O=Ub(I,D,G,X,m,-T,v),l.lineTo(R.cx+R.x01,R.cy+R.y01),T<k?l.arc(R.cx,R.cy,T,Cs(R.y01,R.x01),Cs(O.y01,O.x01),!v):(l.arc(R.cx,R.cy,T,Cs(R.y01,R.x01),Cs(R.y11,R.x11),!v),l.arc(0,0,m,Cs(R.cy+R.y11,R.cx+R.x11),Cs(O.cy+O.y11,O.cx+O.x11),v),l.arc(O.cx,O.cy,T,Cs(O.y11,O.x11),Cs(O.y01,O.x01),!v))):l.arc(0,0,m,w,_,v)}if(l.closePath(),u)return l=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-lv/2;return[ld(d)*u,Ii(d)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:vn(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:vn(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:vn(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:vn(+u),c):r},c.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:vn(+u),c):s},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:vn(+u),c):a},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:vn(+u),c):o},c.context=function(u){return arguments.length?(l=u??null,c):l},c}function khe(e){this._context=e}khe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function cf(e){return new khe(e)}function uL(e){return e[0]}function dL(e){return e[1]}function fL(){var e=uL,t=dL,n=vn(!0),r=null,s=cf,a=null;function o(l){var c,u=l.length,d,m=!1,p;for(r==null&&(a=s(p=uo())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(d,c,l),+t(d,c,l));if(p)return a=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:vn(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:vn(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:vn(!!l),o):n},o.curve=function(l){return arguments.length?(s=l,r!=null&&(a=s(r)),o):s},o.context=function(l){return arguments.length?(l==null?r=a=null:a=s(r=l),o):r},o}function yct(){var e=uL,t=null,n=vn(0),r=dL,s=vn(!0),a=null,o=cf,l=null;function c(d){var m,p,h,g=d.length,y,v=!1,x,b=new Array(g),_=new Array(g);for(a==null&&(l=o(x=uo())),m=0;m<=g;++m){if(!(m<g&&s(y=d[m],m,d))===v)if(v=!v)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=m-1;h>=p;--h)l.point(b[h],_[h]);l.lineEnd(),l.areaEnd()}v&&(b[m]=+e(y,m,d),_[m]=+n(y,m,d),l.point(t?+t(y,m,d):b[m],r?+r(y,m,d):_[m]))}if(x)return l=null,x+""||null}function u(){return fL().defined(s).curve(o).context(a)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:vn(+d),t=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:vn(+d),c):e},c.x1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:vn(+d),c):t},c.y=function(d){return arguments.length?(n=typeof d=="function"?d:vn(+d),r=null,c):n},c.y0=function(d){return arguments.length?(n=typeof d=="function"?d:vn(+d),c):n},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:vn(+d),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(n)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(t).y(n)},c.defined=function(d){return arguments.length?(s=typeof d=="function"?d:vn(!!d),c):s},c.curve=function(d){return arguments.length?(o=d,a!=null&&(l=o(a)),c):o},c.context=function(d){return arguments.length?(d==null?a=l=null:l=o(a=d),c):a},c}function vct(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function xct(e){return e}function bct(){var e=xct,t=vct,n=null,r=vn(0),s=vn(tw),a=vn(0);function o(l){var c,u=l.length,d,m,p=0,h=new Array(u),g=new Array(u),y=+r.apply(this,arguments),v=Math.min(tw,Math.max(-tw,s.apply(this,arguments)-y)),x,b=Math.min(Math.abs(v)/u,a.apply(this,arguments)),_=b*(v<0?-1:1),w;for(c=0;c<u;++c)(w=g[h[c]=c]=+e(l[c],c,l))>0&&(p+=w);for(t!=null?h.sort(function(C,S){return t(g[C],g[S])}):n!=null&&h.sort(function(C,S){return n(l[C],l[S])}),c=0,m=p?(v-u*_)/p:0;c<u;++c,y=x)d=h[c],w=g[d],x=y+(w>0?w*m:0)+_,g[d]={data:l[d],index:c,value:w,startAngle:y,endAngle:x,padAngle:b};return g}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:vn(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,n=null,o):t},o.sort=function(l){return arguments.length?(n=l,t=null,o):n},o.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:vn(+l),o):r},o.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:vn(+l),o):s},o.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:vn(+l),o):a},o}var _ct=Nhe(cf);function The(e){this._curve=e}The.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function Nhe(e){function t(n){return new The(e(n))}return t._curve=e,t}function wct(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(Nhe(n)):t()._curve},e}function Cct(){return wct(fL().curve(_ct))}function Bb(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}var M8=Array.prototype.slice;function Sct(e){return e.source}function Ect(e){return e.target}function mL(e){var t=Sct,n=Ect,r=uL,s=dL,a=null;function o(){var l,c=M8.call(arguments),u=t.apply(this,c),d=n.apply(this,c);if(a||(a=l=uo()),e(a,+r.apply(this,(c[0]=u,c)),+s.apply(this,c),+r.apply(this,(c[0]=d,c)),+s.apply(this,c)),l)return a=null,l+""||null}return o.source=function(l){return arguments.length?(t=l,o):t},o.target=function(l){return arguments.length?(n=l,o):n},o.x=function(l){return arguments.length?(r=typeof l=="function"?l:vn(+l),o):r},o.y=function(l){return arguments.length?(s=typeof l=="function"?l:vn(+l),o):s},o.context=function(l){return arguments.length?(a=l??null,o):a},o}function Mct(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,s,r,s)}function kct(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+s)/2,r,n,r,s)}function Tct(e,t,n,r,s){var a=Bb(t,n),o=Bb(t,n=(n+s)/2),l=Bb(r,n),c=Bb(r,s);e.moveTo(a[0],a[1]),e.bezierCurveTo(o[0],o[1],l[0],l[1],c[0],c[1])}function Nct(){return mL(Mct)}function Act(){return mL(kct)}function jct(){var e=mL(Tct);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}function WK(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Ahe(e){this._context=e}Ahe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:WK(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:WK(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rct(e){return new Ahe(e)}function $K(e){return e<0?-1:1}function HK(e,t,n){var r=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(r||s<0&&-0),o=(n-e._y1)/(s||r<0&&-0),l=(a*s+o*r)/(r+s);return($K(a)+$K(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function zK(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Wk(e,t,n){var r=e._x0,s=e._y0,a=e._x1,o=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,s+l*t,a-l,o-l*n,a,o)}function N2(e){this._context=e}N2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wk(this,this._t0,zK(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Wk(this,zK(this,n=HK(this,e,t)),n);break;default:Wk(this,this._t0,n=HK(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};Object.create(N2.prototype).point=function(e,t){N2.prototype.point.call(this,t,e)};function Ict(e){return new N2(e)}function jhe(e){this._context=e}jhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=GK(e),s=GK(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function GK(e){var t,n=e.length-1,r,s=new Array(n),a=new Array(n),o=new Array(n);for(s[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(s[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/a[t];for(a[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function Pct(e){return new jhe(e)}function Pp(e,t){if((o=e.length)>1)for(var n=1,r,s,a=e[t[0]],o,l=a.length;n<o;++n)for(s=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function Op(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Oct(e,t){return e[t]}function pL(){var e=vn([]),t=Op,n=Pp,r=Oct;function s(a){var o=e.apply(this,arguments),l,c=a.length,u=o.length,d=new Array(u),m;for(l=0;l<u;++l){for(var p=o[l],h=d[l]=new Array(c),g=0,y;g<c;++g)h[g]=y=[0,+r(a[g],p,g,a)],y.data=a[g];h.key=p}for(l=0,m=t(d);l<u;++l)d[m[l]].index=l;return n(d,m),d}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:vn(M8.call(a)),s):e},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:vn(+a),s):r},s.order=function(a){return arguments.length?(t=a==null?Op:typeof a=="function"?a:vn(M8.call(a)),s):t},s.offset=function(a){return arguments.length?(n=a??Pp,s):n},s}function Lct(e,t){if((r=e.length)>0){for(var n,r,s=0,a=e[0].length,o;s<a;++s){for(o=n=0;n<r;++n)o+=e[n][s][1]||0;if(o)for(n=0;n<r;++n)e[n][s][1]/=o}Pp(e,t)}}function Dct(e,t){if((c=e.length)>0)for(var n,r=0,s,a,o,l,c,u=e[t[0]].length;r<u;++r)for(o=l=0,n=0;n<c;++n)(a=(s=e[t[n]][r])[1]-s[0])>0?(s[0]=o,s[1]=o+=a):a<0?(s[1]=l,s[0]=l+=a):(s[0]=0,s[1]=a)}function Fct(e,t){if((s=e.length)>0){for(var n=0,r=e[t[0]],s,a=r.length;n<a;++n){for(var o=0,l=0;o<s;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Pp(e,t)}}function Uct(e,t){if(!(!((o=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var n=0,r=1,s,a,o;r<a;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],m=d[r][1]||0,p=d[r-1][1]||0,h=(m-p)/2,g=0;g<l;++g){var y=e[t[g]],v=y[r][1]||0,x=y[r-1][1]||0;h+=v-x}c+=m,u+=h*m}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,Pp(e,t)}}function Bct(e){var t=e.map(Vct);return Op(e).sort(function(n,r){return t[n]-t[r]})}function Vct(e){for(var t=-1,n=0,r=e.length,s,a=-1/0;++t<r;)(s=+e[t][1])>a&&(a=s,n=t);return n}function Rhe(e){var t=e.map(Ihe);return Op(e).sort(function(n,r){return t[n]-t[r]})}function Ihe(e){for(var t=0,n=-1,r=e.length,s;++n<r;)(s=+e[n][1])&&(t+=s);return t}function Wct(e){return Rhe(e).reverse()}function $ct(e){var t=e.length,n,r,s=e.map(Ihe),a=Bct(e),o=0,l=0,c=[],u=[];for(n=0;n<t;++n)r=a[n],o<l?(o+=s[r],c.push(r)):(l+=s[r],u.push(r));return u.reverse().concat(c)}function Hct(e){return Op(e).reverse()}var zct=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function k8(){return k8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k8.apply(this,arguments)}function Gct(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function VE(e){var t=e.children,n=e.id,r=e.from,s=e.to,a=e.x1,o=e.y1,l=e.x2,c=e.y2,u=e.fromOffset,d=u===void 0?"0%":u,m=e.fromOpacity,p=m===void 0?1:m,h=e.toOffset,g=h===void 0?"100%":h,y=e.toOpacity,v=y===void 0?1:y,x=e.rotate,b=e.transform,_=e.vertical,w=_===void 0?!0:_,C=Gct(e,zct),S=a,E=l,M=o,k=c;return w&&!S&&!E&&!M&&!k&&(S="0",E="0",M="0",k="1"),A.createElement("defs",null,A.createElement("linearGradient",k8({id:n,x1:S,y1:M,x2:E,y2:k,gradientTransform:x?"rotate("+x+")":b},C),!!t&&t,!t&&A.createElement("stop",{offset:d,stopColor:r,stopOpacity:p}),!t&&A.createElement("stop",{offset:g,stopColor:s,stopOpacity:v})))}VE.propTypes={id:Le.string.isRequired,from:Le.string,to:Le.string,x1:Le.oneOfType([Le.string,Le.number]),x2:Le.oneOfType([Le.string,Le.number]),y1:Le.oneOfType([Le.string,Le.number]),y2:Le.oneOfType([Le.string,Le.number]),fromOffset:Le.oneOfType([Le.string,Le.number]),fromOpacity:Le.oneOfType([Le.string,Le.number]),toOffset:Le.oneOfType([Le.string,Le.number]),toOpacity:Le.oneOfType([Le.string,Le.number]),rotate:Le.oneOfType([Le.string,Le.number]),transform:Le.string,children:Le.node,vertical:Le.bool};function r0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qct(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function WE(e){let t,n,r;e.length!==2?(t=r0,n=(l,c)=>r0(e(l),c),r=(l,c)=>e(l)-c):(t=e===r0||e===qct?e:Kct,n=e,r=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(l[m],c)<0?u=m+1:d=m}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(l[m],c)<=0?u=m+1:d=m}while(u<d)}return u}function o(l,c,u=0,d=l.length){const m=s(l,c,u,d-1);return m>u&&r(l[m-1],c)>-r(l[m],c)?m-1:m}return{left:s,center:o,right:a}}function Kct(){return 0}function Phe(e){return e===null?NaN:+e}const Yct=WE(r0),tg=Yct.right;WE(Phe).center;function Jl(e,t){let n,r;if(t===void 0)for(const s of e)s!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class qK extends Map{constructor(t,n=Zct){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(KK(this,t))}has(t){return super.has(KK(this,t))}set(t,n){return super.set(Qct(this,t),n)}delete(t){return super.delete(Xct(this,t))}}function KK({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Qct({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Xct({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Zct(e){return e!==null&&typeof e=="object"?e.valueOf():e}var T8=Math.sqrt(50),N8=Math.sqrt(10),A8=Math.sqrt(2);function j8(e,t,n){var r,s=-1,a,o,l;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(l=Ohe(e,t,n))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),u=Math.round(t/l);for(c*l<e&&++c,u*l>t&&--u,o=new Array(a=u-c+1);++s<a;)o[s]=(c+s)*l}else{l=-l;let c=Math.round(e*l),u=Math.round(t*l);for(c/l<e&&++c,u/l>t&&--u,o=new Array(a=u-c+1);++s<a;)o[s]=(c+s)/l}return r&&o.reverse(),o}function Ohe(e,t,n){var r=(t-e)/Math.max(0,n),s=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,s);return s>=0?(a>=T8?10:a>=N8?5:a>=A8?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(a>=T8?10:a>=N8?5:a>=A8?2:1)}function R8(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/s;return a>=T8?s*=10:a>=N8?s*=5:a>=A8&&(s*=2),t<e?-s:s}function Jct(e,t,n=Phe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,a=Math.floor(s),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(s-a)}}function eut(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(s);++r<s;)a[r]=e+r*n;return a}function Vo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const YK=Symbol("implicit");function hL(){var e=new qK,t=[],n=[],r=YK;function s(a){let o=e.get(a);if(o===void 0){if(r!==YK)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new qK;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return hL(t,n).unknown(r)},Vo.apply(s,arguments),s}function gL(){var e=hL().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,a,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function m(){var p=t().length,h=s<r,g=h?s:r,y=h?r:s;a=(y-g)/Math.max(1,p-c+u*2),l&&(a=Math.floor(a)),g+=(y-g-a*(p-c))*d,o=a*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=eut(p).map(function(x){return g+a*x});return n(h?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([r,s]=p,r=+r,s=+s,m()):[r,s]},e.rangeRound=function(p){return[r,s]=p,r=+r,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),m()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),m()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,m()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),m()):d},e.copy=function(){return gL(t(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},Vo.apply(m(),arguments)}function Lhe(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Lhe(t())},e}function tut(){return Lhe(gL.apply(null,arguments).paddingInner(1))}function ng(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function U1(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lu(){}var uf=.7,Lp=1/uf,Zm="\\s*([+-]?\\d+)\\s*",cv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nut=/^#([0-9a-f]{3,8})$/,rut=new RegExp(`^rgb\\(${Zm},${Zm},${Zm}\\)$`),sut=new RegExp(`^rgb\\(${tl},${tl},${tl}\\)$`),aut=new RegExp(`^rgba\\(${Zm},${Zm},${Zm},${cv}\\)$`),out=new RegExp(`^rgba\\(${tl},${tl},${tl},${cv}\\)$`),iut=new RegExp(`^hsl\\(${cv},${tl},${tl}\\)$`),lut=new RegExp(`^hsla\\(${cv},${tl},${tl},${cv}\\)$`),QK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ng(Lu,uv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:XK,formatHex:XK,formatHex8:cut,formatHsl:uut,formatRgb:ZK,toString:ZK});function XK(){return this.rgb().formatHex()}function cut(){return this.rgb().formatHex8()}function uut(){return Dhe(this).formatHsl()}function ZK(){return this.rgb().formatRgb()}function uv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nut.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?JK(t):n===3?new rs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rut.exec(e))?new rs(t[1],t[2],t[3],1):(t=sut.exec(e))?new rs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=aut.exec(e))?Vb(t[1],t[2],t[3],t[4]):(t=out.exec(e))?Vb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iut.exec(e))?nY(t[1],t[2]/100,t[3]/100,1):(t=lut.exec(e))?nY(t[1],t[2]/100,t[3]/100,t[4]):QK.hasOwnProperty(e)?JK(QK[e]):e==="transparent"?new rs(NaN,NaN,NaN,0):null}function JK(e){return new rs(e>>16&255,e>>8&255,e&255,1)}function Vb(e,t,n,r){return r<=0&&(e=t=n=NaN),new rs(e,t,n,r)}function yL(e){return e instanceof Lu||(e=uv(e)),e?(e=e.rgb(),new rs(e.r,e.g,e.b,e.opacity)):new rs}function I8(e,t,n,r){return arguments.length===1?yL(e):new rs(e,t,n,r??1)}function rs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ng(rs,I8,U1(Lu,{brighter(e){return e=e==null?Lp:Math.pow(Lp,e),new rs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?uf:Math.pow(uf,e),new rs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rs(Fd(this.r),Fd(this.g),Fd(this.b),A2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eY,formatHex:eY,formatHex8:dut,formatRgb:tY,toString:tY}));function eY(){return`#${Td(this.r)}${Td(this.g)}${Td(this.b)}`}function dut(){return`#${Td(this.r)}${Td(this.g)}${Td(this.b)}${Td((isNaN(this.opacity)?1:this.opacity)*255)}`}function tY(){const e=A2(this.opacity);return`${e===1?"rgb(":"rgba("}${Fd(this.r)}, ${Fd(this.g)}, ${Fd(this.b)}${e===1?")":`, ${e})`}`}function A2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Td(e){return e=Fd(e),(e<16?"0":"")+e.toString(16)}function nY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ni(e,t,n,r)}function Dhe(e){if(e instanceof ni)return new ni(e.h,e.s,e.l,e.opacity);if(e instanceof Lu||(e=uv(e)),!e)return new ni;if(e instanceof ni)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-s,c=(a+s)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new ni(o,l,c,e.opacity)}function P8(e,t,n,r){return arguments.length===1?Dhe(e):new ni(e,t,n,r??1)}function ni(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ng(ni,P8,U1(Lu,{brighter(e){return e=e==null?Lp:Math.pow(Lp,e),new ni(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uf:Math.pow(uf,e),new ni(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new rs($k(e>=240?e-240:e+120,s,r),$k(e,s,r),$k(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new ni(rY(this.h),Wb(this.s),Wb(this.l),A2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=A2(this.opacity);return`${e===1?"hsl(":"hsla("}${rY(this.h)}, ${Wb(this.s)*100}%, ${Wb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rY(e){return e=(e||0)%360,e<0?e+360:e}function Wb(e){return Math.max(0,Math.min(1,e||0))}function $k(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fhe=Math.PI/180,Uhe=180/Math.PI,j2=18,Bhe=.96422,Vhe=1,Whe=.82521,$he=4/29,Jm=6/29,Hhe=3*Jm*Jm,fut=Jm*Jm*Jm;function zhe(e){if(e instanceof nl)return new nl(e.l,e.a,e.b,e.opacity);if(e instanceof ec)return Ghe(e);e instanceof rs||(e=yL(e));var t=qk(e.r),n=qk(e.g),r=qk(e.b),s=Hk((.2225045*t+.7168786*n+.0606169*r)/Vhe),a,o;return t===n&&n===r?a=o=s:(a=Hk((.4360747*t+.3850649*n+.1430804*r)/Bhe),o=Hk((.0139322*t+.0971045*n+.7141733*r)/Whe)),new nl(116*s-16,500*(a-s),200*(s-o),e.opacity)}function O8(e,t,n,r){return arguments.length===1?zhe(e):new nl(e,t,n,r??1)}function nl(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}ng(nl,O8,U1(Lu,{brighter(e){return new nl(this.l+j2*(e??1),this.a,this.b,this.opacity)},darker(e){return new nl(this.l-j2*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Bhe*zk(t),e=Vhe*zk(e),n=Whe*zk(n),new rs(Gk(3.1338561*t-1.6168667*e-.4906146*n),Gk(-.9787684*t+1.9161415*e+.033454*n),Gk(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Hk(e){return e>fut?Math.pow(e,1/3):e/Hhe+$he}function zk(e){return e>Jm?e*e*e:Hhe*(e-$he)}function Gk(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qk(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mut(e){if(e instanceof ec)return new ec(e.h,e.c,e.l,e.opacity);if(e instanceof nl||(e=zhe(e)),e.a===0&&e.b===0)return new ec(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Uhe;return new ec(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function L8(e,t,n,r){return arguments.length===1?mut(e):new ec(e,t,n,r??1)}function ec(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Ghe(e){if(isNaN(e.h))return new nl(e.l,0,0,e.opacity);var t=e.h*Fhe;return new nl(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ng(ec,L8,U1(Lu,{brighter(e){return new ec(this.h,this.c,this.l+j2*(e??1),this.opacity)},darker(e){return new ec(this.h,this.c,this.l-j2*(e??1),this.opacity)},rgb(){return Ghe(this).rgb()}}));var qhe=-.14861,vL=1.78277,xL=-.29227,$E=-.90649,dv=1.97294,sY=dv*$E,aY=dv*vL,oY=vL*xL-$E*qhe;function put(e){if(e instanceof Ud)return new Ud(e.h,e.s,e.l,e.opacity);e instanceof rs||(e=yL(e));var t=e.r/255,n=e.g/255,r=e.b/255,s=(oY*r+sY*t-aY*n)/(oY+sY-aY),a=r-s,o=(dv*(n-s)-xL*a)/$E,l=Math.sqrt(o*o+a*a)/(dv*s*(1-s)),c=l?Math.atan2(o,a)*Uhe-120:NaN;return new Ud(c<0?c+360:c,l,s,e.opacity)}function D8(e,t,n,r){return arguments.length===1?put(e):new Ud(e,t,n,r??1)}function Ud(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ng(Ud,D8,U1(Lu,{brighter(e){return e=e==null?Lp:Math.pow(Lp,e),new Ud(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uf:Math.pow(uf,e),new Ud(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Fhe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),s=Math.sin(e);return new rs(255*(t+n*(qhe*r+vL*s)),255*(t+n*(xL*r+$E*s)),255*(t+n*(dv*r)),this.opacity)}}));const HE=e=>()=>e;function Khe(e,t){return function(n){return e+n*t}}function hut(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bL(e,t){var n=t-e;return n?Khe(e,n>180||n<-180?n-360*Math.round(n/360):n):HE(isNaN(e)?t:e)}function gut(e){return(e=+e)==1?ss:function(t,n){return n-t?hut(t,n,e):HE(isNaN(t)?n:t)}}function ss(e,t){var n=t-e;return n?Khe(e,n):HE(isNaN(e)?t:e)}const F8=function e(t){var n=gut(t);function r(s,a){var o=n((s=I8(s)).r,(a=I8(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),u=ss(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=e,r}(1);function yut(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=e[s]*(1-a)+t[s]*a;return r}}function vut(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xut(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)s[o]=_L(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=s[o](l);return a}}function but(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function R2(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _ut(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=_L(e[s],t[s]):r[s]=t[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var U8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kk=new RegExp(U8.source,"g");function wut(e){return function(){return e}}function Cut(e){return function(t){return e(t)+""}}function Sut(e,t){var n=U8.lastIndex=Kk.lastIndex=0,r,s,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=U8.exec(e))&&(s=Kk.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:R2(r,s)})),n=Kk.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?Cut(c[0].x):wut(t):(t=c.length,function(u){for(var d=0,m;d<t;++d)l[(m=c[d]).i]=m.x(u);return l.join("")})}function _L(e,t){var n=typeof t,r;return t==null||n==="boolean"?HE(t):(n==="number"?R2:n==="string"?(r=uv(t))?(t=r,F8):Sut:t instanceof uv?F8:t instanceof Date?but:vut(t)?yut:Array.isArray(t)?xut:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_ut:R2)(e,t)}function Yhe(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Qhe(e){return function(t,n){var r=e((t=P8(t)).h,(n=P8(n)).h),s=ss(t.s,n.s),a=ss(t.l,n.l),o=ss(t.opacity,n.opacity);return function(l){return t.h=r(l),t.s=s(l),t.l=a(l),t.opacity=o(l),t+""}}}const Eut=Qhe(bL);var Mut=Qhe(ss);function kut(e,t){var n=ss((e=O8(e)).l,(t=O8(t)).l),r=ss(e.a,t.a),s=ss(e.b,t.b),a=ss(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=s(o),e.opacity=a(o),e+""}}function Xhe(e){return function(t,n){var r=e((t=L8(t)).h,(n=L8(n)).h),s=ss(t.c,n.c),a=ss(t.l,n.l),o=ss(t.opacity,n.opacity);return function(l){return t.h=r(l),t.c=s(l),t.l=a(l),t.opacity=o(l),t+""}}}const Tut=Xhe(bL);var Nut=Xhe(ss);function Zhe(e){return function t(n){n=+n;function r(s,a){var o=e((s=D8(s)).h,(a=D8(a)).h),l=ss(s.s,a.s),c=ss(s.l,a.l),u=ss(s.opacity,a.opacity);return function(d){return s.h=o(d),s.s=l(d),s.l=c(Math.pow(d,n)),s.opacity=u(d),s+""}}return r.gamma=t,r}(1)}const Aut=Zhe(bL);var jut=Zhe(ss);function Rut(e){return function(){return e}}function Jhe(e){return+e}var iY=[0,1];function Ki(e){return e}function B8(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Rut(isNaN(t)?NaN:.5)}function Iut(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Put(e,t,n){var r=e[0],s=e[1],a=t[0],o=t[1];return s<r?(r=B8(s,r),a=n(o,a)):(r=B8(r,s),a=n(a,o)),function(l){return a(r(l))}}function Out(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)s[o]=B8(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=tg(e,l,1,r)-1;return a[c](s[c](l))}}function B1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function zE(){var e=iY,t=iY,n=_L,r,s,a,o=Ki,l,c,u;function d(){var p=Math.min(e.length,t.length);return o!==Ki&&(o=Iut(e[0],e[p-1])),l=p>2?Out:Put,c=u=null,m}function m(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(r),t,n)))(r(o(p)))}return m.invert=function(p){return o(s((u||(u=l(t,e.map(r),R2)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,Jhe),d()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),n=Yhe,d()},m.clamp=function(p){return arguments.length?(o=p?!0:Ki,d()):o!==Ki},m.interpolate=function(p){return arguments.length?(n=p,d()):n},m.unknown=function(p){return arguments.length?(a=p,m):a},function(p,h){return r=p,s=h,d()}}function wL(){return zE()(Ki,Ki)}function Lut(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function I2(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Dp(e){return e=I2(Math.abs(e)),e?e[1]:NaN}function Dut(e,t){return function(n,r){for(var s=n.length,a=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Fut(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Uut=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fv(e){if(!(t=Uut.exec(e)))throw new Error("invalid format: "+e);var t;return new CL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fv.prototype=CL.prototype;function CL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}CL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function But(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var ege;function Vut(e,t){var n=I2(e,t);if(!n)return e+"";var r=n[0],s=n[1],a=s-(ege=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+I2(e,Math.max(0,t+a-1))[0]}function lY(e,t){var n=I2(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const cY={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Lut,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>lY(e*100,t),r:lY,s:Vut,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uY(e){return e}var dY=Array.prototype.map,fY=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Wut(e){var t=e.grouping===void 0||e.thousands===void 0?uY:Dut(dY.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?uY:Fut(dY.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(m){m=fv(m);var p=m.fill,h=m.align,g=m.sign,y=m.symbol,v=m.zero,x=m.width,b=m.comma,_=m.precision,w=m.trim,C=m.type;C==="n"?(b=!0,C="g"):cY[C]||(_===void 0&&(_=12),w=!0,C="g"),(v||p==="0"&&h==="=")&&(v=!0,p="0",h="=");var S=y==="$"?n:y==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",E=y==="$"?r:/[%p]/.test(C)?o:"",M=cY[C],k=/[defgprs%]/.test(C);_=_===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function T(j){var R=S,O=E,P,N,I;if(C==="c")O=M(j)+O,j="";else{j=+j;var D=j<0||1/j<0;if(j=isNaN(j)?c:M(Math.abs(j),_),w&&(j=But(j)),D&&+j==0&&g!=="+"&&(D=!1),R=(D?g==="("?g:l:g==="-"||g==="("?"":g)+R,O=(C==="s"?fY[8+ege/3]:"")+O+(D&&g==="("?")":""),k){for(P=-1,N=j.length;++P<N;)if(I=j.charCodeAt(P),48>I||I>57){O=(I===46?s+j.slice(P+1):j.slice(P))+O,j=j.slice(0,P);break}}}b&&!v&&(j=t(j,1/0));var F=R.length+j.length+O.length,B=F<x?new Array(x-F+1).join(p):"";switch(b&&v&&(j=t(B+j,B.length?x-O.length:1/0),B=""),h){case"<":j=R+j+O+B;break;case"=":j=R+B+j+O;break;case"^":j=B.slice(0,F=B.length>>1)+R+j+O+B.slice(F);break;default:j=B+R+j+O;break}return a(j)}return T.toString=function(){return m+""},T}function d(m,p){var h=u((m=fv(m),m.type="f",m)),g=Math.max(-8,Math.min(8,Math.floor(Dp(p)/3)))*3,y=Math.pow(10,-g),v=fY[8+g/3];return function(x){return h(y*x)+v}}return{format:u,formatPrefix:d}}var $b,SL,tge;$ut({thousands:",",grouping:[3],currency:["$",""]});function $ut(e){return $b=Wut(e),SL=$b.format,tge=$b.formatPrefix,$b}function Hut(e){return Math.max(0,-Dp(Math.abs(e)))}function zut(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dp(t)/3)))*3-Dp(Math.abs(e)))}function Gut(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dp(t)-Dp(e))+1}function qut(e,t,n,r){var s=R8(e,t,n),a;switch(r=fv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=zut(s,o))&&(r.precision=a),tge(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Gut(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Hut(s))&&(r.precision=a-(r.type==="%")*2);break}}return SL(r)}function V1(e){var t=e.domain;return e.ticks=function(n){var r=t();return j8(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return qut(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,a=r.length-1,o=r[s],l=r[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=a,a=u);d-- >0;){if(u=Ohe(o,l,n),u===c)return r[s]=o,r[a]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function nge(){var e=wL();return e.copy=function(){return B1(e,nge())},Vo.apply(e,arguments),V1(e)}function rge(e,t){e=e.slice();var n=0,r=e.length-1,s=e[n],a=e[r],o;return a<s&&(o=n,n=r,r=o,o=s,s=a,a=o),e[n]=t.floor(s),e[r]=t.ceil(a),e}function mY(e){return Math.log(e)}function pY(e){return Math.exp(e)}function Kut(e){return-Math.log(-e)}function Yut(e){return-Math.exp(-e)}function Qut(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Xut(e){return e===10?Qut:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Zut(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function hY(e){return(t,n)=>-e(-t,n)}function Jut(e){const t=e(mY,pY),n=t.domain;let r=10,s,a;function o(){return s=Zut(r),a=Xut(r),n()[0]<0?(s=hY(s),a=hY(a),e(Kut,Yut)):e(mY,pY),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const m=d<u;m&&([u,d]=[d,u]);let p=s(u),h=s(d),g,y;const v=l==null?10:+l;let x=[];if(!(r%1)&&h-p<v){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(g=1;g<r;++g)if(y=p<0?g/a(-p):g*a(p),!(y<u)){if(y>d)break;x.push(y)}}else for(;p<=h;++p)for(g=r-1;g>=1;--g)if(y=p>0?g/a(-p):g*a(p),!(y<u)){if(y>d)break;x.push(y)}x.length*2<v&&(x=j8(u,d,v))}else x=j8(p,h,Math.min(h-p,v)).map(a);return m?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=fv(c)).precision==null&&(c.trim=!0),c=SL(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let m=d/a(Math.round(s(d)));return m*r<r-.5&&(m*=r),m<=u?c(d):""}},t.nice=()=>n(rge(n(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),t}function sge(){const e=Jut(zE()).domain([1,10]);return e.copy=()=>B1(e,sge()).base(e.base()),Vo.apply(e,arguments),e}function gY(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function yY(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function edt(e){var t=1,n=e(gY(t),yY(t));return n.constant=function(r){return arguments.length?e(gY(t=+r),yY(t)):t},V1(n)}function age(){var e=edt(zE());return e.copy=function(){return B1(e,age()).constant(e.constant())},Vo.apply(e,arguments)}function vY(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tdt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ndt(e){return e<0?-e*e:e*e}function rdt(e){var t=e(Ki,Ki),n=1;function r(){return n===1?e(Ki,Ki):n===.5?e(tdt,ndt):e(vY(n),vY(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,r()):n},V1(t)}function EL(){var e=rdt(zE());return e.copy=function(){return B1(e,EL()).exponent(e.exponent())},Vo.apply(e,arguments),e}function sdt(){return EL.apply(null,arguments).exponent(.5)}function xY(e){return Math.sign(e)*e*e}function adt(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function oge(){var e=wL(),t=[0,1],n=!1,r;function s(a){var o=adt(e(a));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(a){return e.invert(xY(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,Jhe)).map(xY)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return oge(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Vo.apply(s,arguments),V1(s)}function ige(){var e=[],t=[],n=[],r;function s(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Jct(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:t[tg(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(r0),s()},a.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return ige().domain(e).range(t).unknown(r)},Vo.apply(a,arguments)}function lge(){var e=0,t=1,n=1,r=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[tg(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return lge().domain([e,t]).range(s).unknown(a)},Vo.apply(V1(o),arguments)}function cge(){var e=[.5],t=[0,1],n,r=1;function s(a){return a!=null&&a<=a?t[tg(e,a,0,r)]:n}return s.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return cge().domain(e).range(t).unknown(n)},Vo.apply(s,arguments)}const Yk=new Date,Qk=new Date;function Gr(e,t,n,r){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<o);return c},s.filter=a=>Gr(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(s.count=(a,o)=>(Yk.setTime(+a),Qk.setTime(+o),e(Yk),e(Qk),Math.floor(n(Yk,Qk))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?o=>r(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const P2=Gr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);P2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Gr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):P2);P2.range;const tc=1e3,Eo=tc*60,nc=Eo*60,yc=nc*24,ML=yc*7,bY=yc*30,Xk=yc*365,rc=Gr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*tc)},(e,t)=>(t-e)/tc,e=>e.getUTCSeconds());rc.range;const GE=Gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tc)},(e,t)=>{e.setTime(+e+t*Eo)},(e,t)=>(t-e)/Eo,e=>e.getMinutes());GE.range;const qE=Gr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Eo)},(e,t)=>(t-e)/Eo,e=>e.getUTCMinutes());qE.range;const KE=Gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tc-e.getMinutes()*Eo)},(e,t)=>{e.setTime(+e+t*nc)},(e,t)=>(t-e)/nc,e=>e.getHours());KE.range;const YE=Gr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*nc)},(e,t)=>(t-e)/nc,e=>e.getUTCHours());YE.range;const rg=Gr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Eo)/yc,e=>e.getDate()-1);rg.range;const W1=Gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yc,e=>e.getUTCDate()-1);W1.range;const uge=Gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yc,e=>Math.floor(e/yc));uge.range;function Pf(e){return Gr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Eo)/ML)}const $1=Pf(0),O2=Pf(1),odt=Pf(2),idt=Pf(3),Fp=Pf(4),ldt=Pf(5),cdt=Pf(6);$1.range;O2.range;odt.range;idt.range;Fp.range;ldt.range;cdt.range;function Of(e){return Gr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ML)}const H1=Of(0),L2=Of(1),udt=Of(2),ddt=Of(3),Up=Of(4),fdt=Of(5),mdt=Of(6);H1.range;L2.range;udt.range;ddt.range;Up.range;fdt.range;mdt.range;const z1=Gr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());z1.range;const QE=Gr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());QE.range;const hi=Gr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());hi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});hi.range;const hl=Gr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});hl.range;function dge(e,t,n,r,s,a){const o=[[rc,1,tc],[rc,5,5*tc],[rc,15,15*tc],[rc,30,30*tc],[a,1,Eo],[a,5,5*Eo],[a,15,15*Eo],[a,30,30*Eo],[s,1,nc],[s,3,3*nc],[s,6,6*nc],[s,12,12*nc],[r,1,yc],[r,2,2*yc],[n,1,ML],[t,1,bY],[t,3,3*bY],[e,1,Xk]];function l(u,d,m){const p=d<u;p&&([u,d]=[d,u]);const h=m&&typeof m.range=="function"?m:c(u,d,m),g=h?h.range(u,+d+1):[];return p?g.reverse():g}function c(u,d,m){const p=Math.abs(d-u)/m,h=WE(([,,v])=>v).right(o,p);if(h===o.length)return e.every(R8(u/Xk,d/Xk,m));if(h===0)return P2.every(Math.max(R8(u,d,m),1));const[g,y]=o[p/o[h-1][2]<o[h][2]/p?h-1:h];return g.every(y)}return[l,c]}const[pdt,hdt]=dge(hl,QE,H1,uge,YE,qE),[gdt,ydt]=dge(hi,z1,$1,rg,KE,GE);function Zk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Jg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vdt(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ey(s),d=ty(s),m=ey(a),p=ty(a),h=ey(o),g=ty(o),y=ey(l),v=ty(l),x=ey(c),b=ty(c),_={a:D,A:F,b:B,B:V,c:null,d:MY,e:MY,f:Vdt,g:Xdt,G:Jdt,H:Fdt,I:Udt,j:Bdt,L:fge,m:Wdt,M:$dt,p:$,q:G,Q:NY,s:AY,S:Hdt,u:zdt,U:Gdt,V:qdt,w:Kdt,W:Ydt,x:null,X:null,y:Qdt,Y:Zdt,Z:eft,"%":TY},w={a:X,A:Y,b:W,B:H,c:null,d:kY,e:kY,f:sft,g:pft,G:gft,H:tft,I:nft,j:rft,L:pge,m:aft,M:oft,p:Z,q:re,Q:NY,s:AY,S:ift,u:lft,U:cft,V:uft,w:dft,W:fft,x:null,X:null,y:mft,Y:hft,Z:yft,"%":TY},C={a:T,A:j,b:R,B:O,c:P,d:SY,e:SY,f:Pdt,g:CY,G:wY,H:EY,I:EY,j:Adt,L:Idt,m:Ndt,M:jdt,p:k,q:Tdt,Q:Ldt,s:Ddt,S:Rdt,u:Cdt,U:Sdt,V:Edt,w:wdt,W:Mdt,x:N,X:I,y:CY,Y:wY,Z:kdt,"%":Odt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(q,J){return function(te){var se=[],de=-1,fe=0,ve=q.length,ue,ie,be;for(te instanceof Date||(te=new Date(+te));++de<ve;)q.charCodeAt(de)===37&&(se.push(q.slice(fe,de)),(ie=_Y[ue=q.charAt(++de)])!=null?ue=q.charAt(++de):ie=ue==="e"?" ":"0",(be=J[ue])&&(ue=be(te,ie)),se.push(ue),fe=de+1);return se.push(q.slice(fe,de)),se.join("")}}function E(q,J){return function(te){var se=Jg(1900,void 0,1),de=M(se,q,te+="",0),fe,ve;if(de!=te.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(J&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(fe=Jk(Jg(se.y,0,1)),ve=fe.getUTCDay(),fe=ve>4||ve===0?L2.ceil(fe):L2(fe),fe=W1.offset(fe,(se.V-1)*7),se.y=fe.getUTCFullYear(),se.m=fe.getUTCMonth(),se.d=fe.getUTCDate()+(se.w+6)%7):(fe=Zk(Jg(se.y,0,1)),ve=fe.getDay(),fe=ve>4||ve===0?O2.ceil(fe):O2(fe),fe=rg.offset(fe,(se.V-1)*7),se.y=fe.getFullYear(),se.m=fe.getMonth(),se.d=fe.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),ve="Z"in se?Jk(Jg(se.y,0,1)).getUTCDay():Zk(Jg(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(ve+5)%7:se.w+se.U*7-(ve+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,Jk(se)):Zk(se)}}function M(q,J,te,se){for(var de=0,fe=J.length,ve=te.length,ue,ie;de<fe;){if(se>=ve)return-1;if(ue=J.charCodeAt(de++),ue===37){if(ue=J.charAt(de++),ie=C[ue in _Y?J.charAt(de++):ue],!ie||(se=ie(q,te,se))<0)return-1}else if(ue!=te.charCodeAt(se++))return-1}return se}function k(q,J,te){var se=u.exec(J.slice(te));return se?(q.p=d.get(se[0].toLowerCase()),te+se[0].length):-1}function T(q,J,te){var se=h.exec(J.slice(te));return se?(q.w=g.get(se[0].toLowerCase()),te+se[0].length):-1}function j(q,J,te){var se=m.exec(J.slice(te));return se?(q.w=p.get(se[0].toLowerCase()),te+se[0].length):-1}function R(q,J,te){var se=x.exec(J.slice(te));return se?(q.m=b.get(se[0].toLowerCase()),te+se[0].length):-1}function O(q,J,te){var se=y.exec(J.slice(te));return se?(q.m=v.get(se[0].toLowerCase()),te+se[0].length):-1}function P(q,J,te){return M(q,t,J,te)}function N(q,J,te){return M(q,n,J,te)}function I(q,J,te){return M(q,r,J,te)}function D(q){return o[q.getDay()]}function F(q){return a[q.getDay()]}function B(q){return c[q.getMonth()]}function V(q){return l[q.getMonth()]}function $(q){return s[+(q.getHours()>=12)]}function G(q){return 1+~~(q.getMonth()/3)}function X(q){return o[q.getUTCDay()]}function Y(q){return a[q.getUTCDay()]}function W(q){return c[q.getUTCMonth()]}function H(q){return l[q.getUTCMonth()]}function Z(q){return s[+(q.getUTCHours()>=12)]}function re(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var J=S(q+="",_);return J.toString=function(){return q},J},parse:function(q){var J=E(q+="",!1);return J.toString=function(){return q},J},utcFormat:function(q){var J=S(q+="",w);return J.toString=function(){return q},J},utcParse:function(q){var J=E(q+="",!0);return J.toString=function(){return q},J}}}var _Y={"-":"",_:" ",0:"0"},cs=/^\s*\d+/,xdt=/^%/,bdt=/[\\^$*+?|[\]().{}]/g;function Nn(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(t)+s:s)}function _dt(e){return e.replace(bdt,"\\$&")}function ey(e){return new RegExp("^(?:"+e.map(_dt).join("|")+")","i")}function ty(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function wdt(e,t,n){var r=cs.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Cdt(e,t,n){var r=cs.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Sdt(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Edt(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Mdt(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function wY(e,t,n){var r=cs.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function CY(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function kdt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Tdt(e,t,n){var r=cs.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Ndt(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function SY(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Adt(e,t,n){var r=cs.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function EY(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function jdt(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Rdt(e,t,n){var r=cs.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Idt(e,t,n){var r=cs.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Pdt(e,t,n){var r=cs.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Odt(e,t,n){var r=xdt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ldt(e,t,n){var r=cs.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Ddt(e,t,n){var r=cs.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function MY(e,t){return Nn(e.getDate(),t,2)}function Fdt(e,t){return Nn(e.getHours(),t,2)}function Udt(e,t){return Nn(e.getHours()%12||12,t,2)}function Bdt(e,t){return Nn(1+rg.count(hi(e),e),t,3)}function fge(e,t){return Nn(e.getMilliseconds(),t,3)}function Vdt(e,t){return fge(e,t)+"000"}function Wdt(e,t){return Nn(e.getMonth()+1,t,2)}function $dt(e,t){return Nn(e.getMinutes(),t,2)}function Hdt(e,t){return Nn(e.getSeconds(),t,2)}function zdt(e){var t=e.getDay();return t===0?7:t}function Gdt(e,t){return Nn($1.count(hi(e)-1,e),t,2)}function mge(e){var t=e.getDay();return t>=4||t===0?Fp(e):Fp.ceil(e)}function qdt(e,t){return e=mge(e),Nn(Fp.count(hi(e),e)+(hi(e).getDay()===4),t,2)}function Kdt(e){return e.getDay()}function Ydt(e,t){return Nn(O2.count(hi(e)-1,e),t,2)}function Qdt(e,t){return Nn(e.getFullYear()%100,t,2)}function Xdt(e,t){return e=mge(e),Nn(e.getFullYear()%100,t,2)}function Zdt(e,t){return Nn(e.getFullYear()%1e4,t,4)}function Jdt(e,t){var n=e.getDay();return e=n>=4||n===0?Fp(e):Fp.ceil(e),Nn(e.getFullYear()%1e4,t,4)}function eft(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Nn(t/60|0,"0",2)+Nn(t%60,"0",2)}function kY(e,t){return Nn(e.getUTCDate(),t,2)}function tft(e,t){return Nn(e.getUTCHours(),t,2)}function nft(e,t){return Nn(e.getUTCHours()%12||12,t,2)}function rft(e,t){return Nn(1+W1.count(hl(e),e),t,3)}function pge(e,t){return Nn(e.getUTCMilliseconds(),t,3)}function sft(e,t){return pge(e,t)+"000"}function aft(e,t){return Nn(e.getUTCMonth()+1,t,2)}function oft(e,t){return Nn(e.getUTCMinutes(),t,2)}function ift(e,t){return Nn(e.getUTCSeconds(),t,2)}function lft(e){var t=e.getUTCDay();return t===0?7:t}function cft(e,t){return Nn(H1.count(hl(e)-1,e),t,2)}function hge(e){var t=e.getUTCDay();return t>=4||t===0?Up(e):Up.ceil(e)}function uft(e,t){return e=hge(e),Nn(Up.count(hl(e),e)+(hl(e).getUTCDay()===4),t,2)}function dft(e){return e.getUTCDay()}function fft(e,t){return Nn(L2.count(hl(e)-1,e),t,2)}function mft(e,t){return Nn(e.getUTCFullYear()%100,t,2)}function pft(e,t){return e=hge(e),Nn(e.getUTCFullYear()%100,t,2)}function hft(e,t){return Nn(e.getUTCFullYear()%1e4,t,4)}function gft(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Up(e):Up.ceil(e),Nn(e.getUTCFullYear()%1e4,t,4)}function yft(){return"+0000"}function TY(){return"%"}function NY(e){return+e}function AY(e){return Math.floor(+e/1e3)}var rm,G1,gge;vft({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vft(e){return rm=vdt(e),G1=rm.format,rm.parse,gge=rm.utcFormat,rm.utcParse,rm}function xft(e){return new Date(e)}function bft(e){return e instanceof Date?+e:+new Date(+e)}function kL(e,t,n,r,s,a,o,l,c,u){var d=wL(),m=d.invert,p=d.domain,h=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),b=u("%b %d"),_=u("%B"),w=u("%Y");function C(S){return(c(S)<S?h:l(S)<S?g:o(S)<S?y:a(S)<S?v:r(S)<S?s(S)<S?x:b:n(S)<S?_:w)(S)}return d.invert=function(S){return new Date(m(S))},d.domain=function(S){return arguments.length?p(Array.from(S,bft)):p().map(xft)},d.ticks=function(S){var E=p();return e(E[0],E[E.length-1],S??10)},d.tickFormat=function(S,E){return E==null?C:u(E)},d.nice=function(S){var E=p();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?p(rge(E,S)):d},d.copy=function(){return B1(d,kL(e,t,n,r,s,a,o,l,c,u))},d}function _ft(){return Vo.apply(kL(gdt,ydt,hi,z1,$1,rg,KE,GE,rc,G1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wft(){return Vo.apply(kL(pdt,hdt,hl,QE,H1,W1,YE,qE,rc,gge).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Cft(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function Sft(e,t){t.range&&("padding"in e,e.range(t.range))}function Eft(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function Mft(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function kft(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function Tft(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function Nft(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var jY={lab:kut,hcl:Tut,"hcl-long":Nut,hsl:Eut,"hsl-long":Mut,cubehelix:Aut,"cubehelix-long":jut,rgb:F8};function Aft(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return jY[e]}var t=e.type,n=e.gamma,r=jY[t];return typeof n>"u"?r:r.gamma(n)}function jft(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=Aft(t.interpolate);e.interpolate(n)}}var Rft=new Date(Date.UTC(2020,1,2,3,4,5)),Ift="%Y-%m-%d %H:%M";function yge(e){var t=e.tickFormat(1,Ift)(Rft);return t==="2020-02-02 03:04"}var RY={day:rg,hour:KE,minute:GE,month:z1,second:rc,week:$1,year:hi},IY={day:W1,hour:YE,minute:qE,month:QE,second:rc,week:H1,year:hl};function Pft(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,s=yge(r);if(typeof n=="string")r.nice(s?IY[n]:RY[n]);else{var a=n.interval,o=n.step,l=(s?IY[a]:RY[a]).every(o);l!=null&&r.nice(l)}}}}function Oft(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function Lft(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function Dft(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(Yhe))}function Fft(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function Uft(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],s=n[1],a=s<r,o=a?[s,r]:[r,s],l=o[0],c=o[1],u=[Math.min(0,l),Math.max(0,c)];e.domain(a?u.reverse():u)}}var vge=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],Bft={domain:Cft,nice:Pft,zero:Uft,interpolate:jft,round:Dft,align:Eft,base:Mft,clamp:kft,constant:Tft,exponent:Nft,padding:Oft,range:Sft,reverse:Lft,unknown:Fft};function la(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),s=vge.filter(function(a){return r.has(a)});return function(o,l){return typeof l<"u"&&s.forEach(function(c){Bft[c](o,l)}),o}}var Vft=la("domain","range","reverse","align","padding","round");function TL(e){return Vft(gL(),e)}var Wft=la("domain","range","reverse","align","padding","round");function NL(e){return Wft(tut(),e)}var $ft=la("domain","range","reverse","clamp","interpolate","nice","round","zero");function Bp(e){return $ft(nge(),e)}var Hft=la("domain","range","clamp","nice","round","unknown");function zft(e){return Hft(oge(),e)}var Gft=la("domain","range","reverse","clamp","interpolate","nice","round");function q1(e){return Gft(_ft(),e)}var qft=la("domain","range","reverse","clamp","interpolate","nice","round");function xge(e){return qft(wft(),e)}var Kft=la("domain","range","reverse","base","clamp","interpolate","nice","round");function AL(e){return Kft(sge(),e)}var Yft=la("domain","range","reverse","clamp","exponent","interpolate","nice","round","zero");function bge(e){return Yft(EL(),e)}var Qft=la("domain","range","reverse","unknown");function jL(e){return Qft(hL(),e)}var Xft=la("domain","range","reverse","nice","zero");function _ge(e){return Xft(lge(),e)}var Zft=la("domain","range","reverse");function wge(e){return Zft(ige(),e)}var Jft=la("domain","range","reverse","clamp","constant","nice","zero","round");function Cge(e){return Jft(age(),e)}var emt=la("domain","range","reverse");function Sge(e){return emt(cge(),e)}var tmt=la("domain","range","reverse","clamp","interpolate","nice","round","zero");function Ege(e){return tmt(sdt(),e)}function nmt(e){if(typeof e<"u"&&"type"in e)switch(e.type){case"linear":return Bp(e);case"log":return AL(e);case"pow":return bge(e);case"sqrt":return Ege(e);case"symlog":return Cge(e);case"time":return q1(e);case"utc":return xge(e);case"quantile":return wge(e);case"quantize":return _ge(e);case"threshold":return Sge(e);case"ordinal":return jL(e);case"point":return NL(e);case"band":return TL(e)}return Bp(e)}var rmt=la.apply(void 0,vge);function smt(e,t){return rmt(e.copy(),t)}function amt(e){return"paddingInner"in e?"band":"padding"in e?"point":"quantiles"in e?"quantile":"base"in e?"log":"exponent"in e?e.exponent()===.5?"sqrt":"pow":"constant"in e?"symlog":"clamp"in e?e.ticks()[0]instanceof Date?yge(e)?"utc":"time":"linear":"nice"in e?"quantize":"invertExtent"in e?"threshold":"ordinal"}function XE(e){if((typeof e=="function"||typeof e=="object"&&e)&&"valueOf"in e){var t=e.valueOf();if(typeof t=="number")return t}return e}function RL(e,t){var n=e;return"ticks"in n?n.ticks(t):n.domain().filter(function(r,s,a){return t==null||a.length<=t||s%Math.round((a.length-1)/t)===0})}function Mge(e){return e?.toString()}var omt=new Set(["linear","pow","quantize","sqrt","symlog"]);function imt(e){return omt.has(e.type)}const lmt=Object.freeze(Object.defineProperty({__proto__:null,coerceNumber:XE,createScale:nmt,getTicks:RL,inferScaleType:amt,scaleBand:TL,scaleCanBeZeroed:imt,scaleLinear:Bp,scaleLog:AL,scaleOrdinal:jL,scalePoint:NL,scalePower:bge,scaleQuantile:wge,scaleQuantize:_ge,scaleRadial:zft,scaleSqrt:Ege,scaleSymlog:Cge,scaleThreshold:Sge,scaleTime:q1,scaleUtc:xge,toString:Mge,updateScale:smt},Symbol.toStringTag,{value:"Module"}));function Kn(e,t){e(t)}var D2={ascending:Rhe,descending:Wct,insideout:$ct,none:Op,reverse:Hct},cmt=Object.keys(D2);function ZE(e){return e&&D2[e]||D2.none}var F2={expand:Lct,diverging:Dct,none:Pp,silhouette:Fct,wiggle:Uct},umt=Object.keys(F2);function JE(e){return e&&F2[e]||F2.none}function IL(e){var t=e===void 0?{}:e,n=t.innerRadius,r=t.outerRadius,s=t.cornerRadius,a=t.startAngle,o=t.endAngle,l=t.padAngle,c=t.padRadius,u=gct();return n!=null&&Kn(u.innerRadius,n),r!=null&&Kn(u.outerRadius,r),s!=null&&Kn(u.cornerRadius,s),a!=null&&Kn(u.startAngle,a),o!=null&&Kn(u.endAngle,o),l!=null&&Kn(u.padAngle,l),c!=null&&Kn(u.padRadius,c),u}function e3(e){var t=e===void 0?{}:e,n=t.x,r=t.x0,s=t.x1,a=t.y,o=t.y0,l=t.y1,c=t.defined,u=t.curve,d=yct();return n&&Kn(d.x,n),r&&Kn(d.x0,r),s&&Kn(d.x1,s),a&&Kn(d.y,a),o&&Kn(d.y0,o),l&&Kn(d.y1,l),c&&d.defined(c),u&&d.curve(u),d}function Lf(e){var t=e===void 0?{}:e,n=t.x,r=t.y,s=t.defined,a=t.curve,o=fL();return n&&Kn(o.x,n),r&&Kn(o.y,r),s&&o.defined(s),a&&o.curve(a),o}function kge(e){var t=e===void 0?{}:e,n=t.startAngle,r=t.endAngle,s=t.padAngle,a=t.value,o=t.sort,l=t.sortValues,c=bct();return(o===null||o!=null)&&c.sort(o),(l===null||l!=null)&&c.sortValues(l),a!=null&&c.value(a),s!=null&&Kn(c.padAngle,s),n!=null&&Kn(c.startAngle,n),r!=null&&Kn(c.endAngle,r),c}function Tge(e){var t=e===void 0?{}:e,n=t.angle,r=t.radius,s=t.defined,a=t.curve,o=Cct();return n&&Kn(o.angle,n),r&&Kn(o.radius,r),s&&o.defined(s),a&&o.curve(a),o}function Nge(e){var t=e.keys,n=e.value,r=e.order,s=e.offset,a=pL();return t&&a.keys(t),n&&Kn(a.value,n),r&&a.order(ZE(r)),s&&a.offset(JE(s)),a}var dmt=["className","data","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","children","innerRef"];function V8(){return V8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V8.apply(this,arguments)}function fmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Age(e){var t=e.className,n=e.data,r=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.startAngle,l=e.endAngle,c=e.padAngle,u=e.padRadius,d=e.children,m=e.innerRef,p=fmt(e,dmt),h=IL({innerRadius:r,outerRadius:s,cornerRadius:a,startAngle:o,endAngle:l,padAngle:c,padRadius:u});return d?A.createElement(A.Fragment,null,d({path:h})):!n&&(o==null||l==null||r==null||s==null)?(console.warn("[@visx/shape/Arc]: expected data because one of startAngle, endAngle, innerRadius, outerRadius is undefined. Bailing."),null):A.createElement("path",V8({ref:m,className:U("visx-arc",t),d:h(n)||""},p))}var mmt=["top","left","transform","className","children","innerRef"];function W8(){return W8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W8.apply(this,arguments)}function pmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function sa(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.transform,o=e.className,l=e.children,c=e.innerRef,u=pmt(e,mmt);return A.createElement("g",W8({ref:c,className:U("visx-group",o),transform:a||"translate("+s+", "+n+")"},u),l)}sa.propTypes={top:Le.number,left:Le.number,transform:Le.string,className:Le.string,children:Le.node,innerRef:Le.oneOfType([Le.string,Le.func,Le.object])};const hmt=Object.freeze(Object.defineProperty({__proto__:null,Group:sa},Symbol.toStringTag,{value:"Module"}));var gmt=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function $8(){return $8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$8.apply(this,arguments)}function ymt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function vmt(e){var t=e.className,n=e.top,r=e.left,s=e.data,a=s===void 0?[]:s,o=e.centroid,l=e.innerRadius,c=l===void 0?0:l,u=e.outerRadius,d=e.cornerRadius,m=e.startAngle,p=e.endAngle,h=e.padAngle,g=e.padRadius,y=e.pieSort,v=e.pieSortValues,x=e.pieValue,b=e.children,_=e.fill,w=_===void 0?"":_,C=ymt(e,gmt),S=IL({innerRadius:c,outerRadius:u,cornerRadius:d,padRadius:g}),E=kge({startAngle:m,endAngle:p,padAngle:h,value:x,sort:y,sortValues:v}),M=E(a);return b?A.createElement(A.Fragment,null,b({arcs:M,path:S,pie:E})):A.createElement(sa,{className:"visx-pie-arcs-group",top:n,left:r},M.map(function(k,T){return A.createElement("g",{key:"pie-arc-"+T},A.createElement("path",$8({className:U("visx-pie-arc",t),d:S(k)||"",fill:w==null||typeof w=="string"?w:w(k)},C)),o?.(S.centroid(k),k))}))}var xmt=["from","to","fill","className","innerRef"];function H8(){return H8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H8.apply(this,arguments)}function bmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function t3(e){var t=e.from,n=t===void 0?{x:0,y:0}:t,r=e.to,s=r===void 0?{x:1,y:1}:r,a=e.fill,o=a===void 0?"transparent":a,l=e.className,c=e.innerRef,u=bmt(e,xmt),d=n.x===s.x||n.y===s.y;return A.createElement("line",H8({ref:c,className:U("visx-line",l),x1:n.x,y1:n.y,x2:s.x,y2:s.y,fill:o,shapeRendering:d?"crispEdges":"auto"},u))}var _mt=["children","data","x","y","fill","className","curve","innerRef","defined"];function z8(){return z8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z8.apply(this,arguments)}function wmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function jge(e){var t=e.children,n=e.data,r=n===void 0?[]:n,s=e.x,a=e.y,o=e.fill,l=o===void 0?"transparent":o,c=e.className,u=e.curve,d=e.innerRef,m=e.defined,p=m===void 0?function(){return!0}:m,h=wmt(e,_mt),g=Lf({x:s,y:a,defined:p,curve:u});return t?A.createElement(A.Fragment,null,t({path:g})):A.createElement("path",z8({ref:d,className:U("visx-linepath",c),d:g(r)||"",fill:l,strokeLinecap:"round"},h))}var Cmt=["className","angle","radius","defined","curve","data","innerRef","children","fill"];function G8(){return G8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G8.apply(this,arguments)}function Smt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Emt(e){var t=e.className,n=e.angle,r=e.radius,s=e.defined,a=e.curve,o=e.data,l=o===void 0?[]:o,c=e.innerRef,u=e.children,d=e.fill,m=d===void 0?"transparent":d,p=Smt(e,Cmt),h=Tge({angle:n,radius:r,defined:s,curve:a});return u?A.createElement(A.Fragment,null,u({path:h})):A.createElement("path",G8({ref:c,className:U("visx-line-radial",t),d:h(l)||"",fill:m},p))}var Mmt=["children","x","x0","x1","y","y0","y1","data","defined","className","curve","innerRef"];function q8(){return q8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q8.apply(this,arguments)}function kmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Tmt(e){var t=e.children,n=e.x,r=e.x0,s=e.x1,a=e.y,o=e.y0,l=e.y1,c=e.data,u=c===void 0?[]:c,d=e.defined,m=d===void 0?function(){return!0}:d,p=e.className,h=e.curve,g=e.innerRef,y=kmt(e,Mmt),v=e3({x:n,x0:r,x1:s,y:a,y0:o,y1:l,defined:m,curve:h});return t?A.createElement(A.Fragment,null,t({path:v})):A.createElement("path",q8({ref:g,className:U("visx-area",p),d:v(u)||""},y))}var Nmt=["x","x0","x1","y","y1","y0","yScale","data","defined","className","curve","innerRef","children"];function K8(){return K8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K8.apply(this,arguments)}function Amt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Vp(e){var t=e.x,n=e.x0,r=e.x1,s=e.y,a=e.y1,o=e.y0,l=e.yScale,c=e.data,u=c===void 0?[]:c,d=e.defined,m=d===void 0?function(){return!0}:d,p=e.className,h=e.curve,g=e.innerRef,y=e.children,v=Amt(e,Nmt),x=e3({x:t,x0:n,x1:r,defined:m,curve:h});return o==null?x.y0(l.range()[0]):Kn(x.y0,o),s&&!a&&Kn(x.y1,s),a&&!s&&Kn(x.y1,a),y?A.createElement(A.Fragment,null,y({path:x})):A.createElement("path",K8({ref:g,className:U("visx-area-closed",p),d:x(u)||""},v))}var jmt=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function Y8(){return Y8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y8.apply(this,arguments)}function Rmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Rge(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,o=e.curve,l=e.defined,c=e.x,u=e.x0,d=e.x1,m=e.y0,p=e.y1,h=e.value,g=e.order,y=e.offset,v=e.color,x=e.children,b=Rmt(e,jmt),_=Nge({keys:s,value:h,order:g,offset:y}),w=e3({x:c,x0:u,x1:d,y0:m,y1:p,curve:o,defined:l}),C=_(a);return x?A.createElement(A.Fragment,null,x({stacks:C,path:w,stack:_})):A.createElement(sa,{top:n,left:r},C.map(function(S,E){return A.createElement("path",Y8({className:U("visx-stack",t),key:"stack-"+E+"-"+(S.key||""),d:w(S)||"",fill:v?.(S.key,E)},b))}))}var Imt=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function U2(){return U2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U2.apply(this,arguments)}function Pmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Omt(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,o=e.curve,l=e.defined,c=e.x,u=e.x0,d=e.x1,m=e.y0,p=e.y1,h=e.value,g=e.order,y=e.offset,v=e.color,x=e.children,b=Pmt(e,Imt);return A.createElement(Rge,U2({className:t,top:n,left:r,keys:s,data:a,curve:o,defined:l,x:c,x0:u,x1:d,y0:m,y1:p,value:h,order:g,offset:y,color:v},b),x||function(_){var w=_.stacks,C=_.path;return w.map(function(S,E){return A.createElement("path",U2({className:U("visx-area-stack",t),key:"area-stack-"+E+"-"+(S.key||""),d:C(S)||"",fill:v?.(S.key,E)},b))})})}var Lmt=["className","innerRef"];function Q8(){return Q8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q8.apply(this,arguments)}function Dmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function sg(e){var t=e.className,n=e.innerRef,r=Dmt(e,Lmt);return A.createElement("rect",Q8({ref:n,className:U("visx-bar",t)},r))}var Fmt=["children","className","innerRef","x","y","width","height","radius","all","top","bottom","left","right","topLeft","topRight","bottomLeft","bottomRight"];function X8(){return X8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X8.apply(this,arguments)}function Umt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Bmt(e){var t=e.all,n=e.bottom,r=e.bottomLeft,s=e.bottomRight,a=e.height,o=e.left,l=e.radius,c=e.right,u=e.top,d=e.topLeft,m=e.topRight,p=e.width,h=e.x,g=e.y;m=t||u||c||m,s=t||n||c||s,r=t||n||o||r,d=t||u||o||d,l=Math.max(1,Math.min(l,Math.min(p,a)/2));var y=2*l,v=("M"+(h+l)+","+g+" h"+(p-y)+`
 `+(m?"a"+l+","+l+" 0 0 1 "+l+","+l:"h"+l+"v"+l)+`
 v`+(a-y)+`
 `+(s?"a"+l+","+l+" 0 0 1 "+-l+","+l:"v"+l+"h"+-l)+`
 h`+(y-p)+`
 `+(r?"a"+l+","+l+" 0 0 1 "+-l+","+-l:"h"+-l+"v"+-l)+`
 v`+(y-a)+`
 `+(d?"a"+l+","+l+" 0 0 1 "+l+","+-l:"v"+-l+"h"+l)+`
z`).split(`
`).join("");return v}function Vmt(e){var t=e.children,n=e.className,r=e.innerRef,s=e.x,a=e.y,o=e.width,l=e.height,c=e.radius,u=e.all,d=u===void 0?!1:u,m=e.top,p=m===void 0?!1:m,h=e.bottom,g=h===void 0?!1:h,y=e.left,v=y===void 0?!1:y,x=e.right,b=x===void 0?!1:x,_=e.topLeft,w=_===void 0?!1:_,C=e.topRight,S=C===void 0?!1:C,E=e.bottomLeft,M=E===void 0?!1:E,k=e.bottomRight,T=k===void 0?!1:k,j=Umt(e,Fmt),R=Bmt({x:s,y:a,width:o,height:l,radius:c,all:d,top:p,bottom:g,left:v,right:b,topLeft:w,topRight:S,bottomLeft:M,bottomRight:T});return t?A.createElement(A.Fragment,null,t({path:R})):A.createElement("path",X8({ref:r,className:U("visx-bar-rounded",n),d:R},j))}function n3(e){if("bandwidth"in e)return e.bandwidth();var t=e.range(),n=e.domain();return Math.abs(t[t.length-1]-t[0])/n.length}var Wmt=["data","className","top","left","x0","x0Scale","x1Scale","yScale","color","keys","height","children"];function Z8(){return Z8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z8.apply(this,arguments)}function $mt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Hmt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x0,o=e.x0Scale,l=e.x1Scale,c=e.yScale,u=e.color,d=e.keys,m=e.height,p=e.children,h=$mt(e,Wmt),g=n3(l),y=t.map(function(v,x){return{index:x,x0:o(a(v)),bars:d.map(function(b,_){var w=v[b];return{index:_,key:b,value:w,width:g,x:l(b)||0,y:c(w)||0,color:u(b,_),height:m-(c(w)||0)}})}});return p?A.createElement(A.Fragment,null,p(y)):A.createElement(sa,{className:U("visx-bar-group",n),top:r,left:s},y.map(function(v){return A.createElement(sa,{key:"bar-group-"+v.index+"-"+v.x0,left:v.x0},v.bars.map(function(x){return A.createElement(sg,Z8({key:"bar-group-bar-"+v.index+"-"+x.index+"-"+x.value+"-"+x.key,x:x.x,y:x.y,width:x.width,height:x.height,fill:x.color},h))}))}))}var zmt=["data","className","top","left","x","y0","y0Scale","y1Scale","xScale","color","keys","width","children"];function J8(){return J8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J8.apply(this,arguments)}function Gmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function qmt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,o=a===void 0?function(){return 0}:a,l=e.y0,c=e.y0Scale,u=e.y1Scale,d=e.xScale,m=e.color,p=e.keys;e.width;var h=e.children,g=Gmt(e,zmt),y=n3(u),v=t.map(function(x,b){return{index:b,y0:c(l(x))||0,bars:p.map(function(_,w){var C=x[_];return{index:w,key:_,value:C,height:y,x:o(C)||0,y:u(_)||0,color:m(_,w),width:d(C)||0}})}});return h?A.createElement(A.Fragment,null,h(v)):A.createElement(sa,{className:U("visx-bar-group-horizontal",n),top:r,left:s},v.map(function(x){return A.createElement(sa,{key:"bar-group-"+x.index+"-"+x.y0,top:x.y0},x.bars.map(function(b){return A.createElement(sg,J8({key:"bar-group-bar-"+x.index+"-"+b.index+"-"+b.value+"-"+b.key,x:b.x,y:b.y,width:b.width,height:b.height,fill:b.color},g))}))}))}function Wo(e){return typeof e?.x=="number"?e?.x:0}function $o(e){return typeof e?.y=="number"?e?.y:0}function Ho(e){return e?.source}function zo(e){return e?.target}function Ige(e){return e?.[0]}function Pge(e){return e?.[1]}var Kmt=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function ej(){return ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ej.apply(this,arguments)}function Ymt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Qmt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,o=e.y0,l=o===void 0?Ige:o,c=e.y1,u=c===void 0?Pge:c,d=e.xScale,m=e.yScale,p=e.color,h=e.keys,g=e.value,y=e.order,v=e.offset,x=e.children,b=Ymt(e,Kmt),_=pL();h&&_.keys(h),g&&Kn(_.value,g),y&&_.order(ZE(y)),v&&_.offset(JE(v));var w=_(t),C=n3(d),S=w.map(function(E,M){var k=E.key;return{index:M,key:k,bars:E.map(function(T,j){var R=(m(l(T))||0)-(m(u(T))||0),O=m(u(T)),P="bandwidth"in d?d(a(T.data)):Math.max((d(a(T.data))||0)-C/2);return{bar:T,key:k,index:j,height:R,width:C,x:P||0,y:O||0,color:p(E.key,j)}})}});return x?A.createElement(A.Fragment,null,x(S)):A.createElement(sa,{className:U("visx-bar-stack",n),top:r,left:s},S.map(function(E){return E.bars.map(function(M){return A.createElement(sg,ej({key:"bar-stack-"+E.index+"-"+M.index,x:M.x,y:M.y,height:M.height,width:M.width,fill:M.color},b))})}))}var Xmt=["data","className","top","left","y","x0","x1","xScale","yScale","color","keys","value","order","offset","children"];function tj(){return tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tj.apply(this,arguments)}function Zmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Jmt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.y,o=e.x0,l=o===void 0?Ige:o,c=e.x1,u=c===void 0?Pge:c,d=e.xScale,m=e.yScale,p=e.color,h=e.keys,g=e.value,y=e.order,v=e.offset,x=e.children,b=Zmt(e,Xmt),_=pL();h&&_.keys(h),g&&Kn(_.value,g),y&&_.order(ZE(y)),v&&_.offset(JE(v));var w=_(t),C=n3(m),S=w.map(function(E,M){var k=E.key;return{index:M,key:k,bars:E.map(function(T,j){var R=(d(u(T))||0)-(d(l(T))||0),O=d(l(T)),P="bandwidth"in m?m(a(T.data)):Math.max((m(a(T.data))||0)-R/2);return{bar:T,key:k,index:j,height:C,width:R,x:O||0,y:P||0,color:p(E.key,j)}})}});return x?A.createElement(A.Fragment,null,x(S)):A.createElement(sa,{className:U("visx-bar-stack-horizontal",n),top:r,left:s},S.map(function(E){return E.bars.map(function(M){return A.createElement(sg,tj({key:"bar-stack-"+E.index+"-"+M.index,x:M.x,y:M.y,height:M.height,width:M.width,fill:M.color},b))})}))}var Oge=function(t){return Math.PI/180*t},ept=["className","children","data","innerRef","path","x","y","source","target"];function nj(){return nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nj.apply(this,arguments)}function tpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Lge(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=Nct();return o.x(r),o.y(s),o.source(t),o.target(n),o(a)}}function npt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.x,l=o===void 0?$o:o,c=e.y,u=c===void 0?Wo:c,d=e.source,m=d===void 0?Ho:d,p=e.target,h=p===void 0?zo:p,g=tpt(e,ept),y=a||Lge({source:m,target:h,x:l,y:u});return n?A.createElement(A.Fragment,null,n({path:y})):A.createElement("path",nj({ref:s,className:U("visx-link visx-link-horizontal-diagonal",t),d:y(r)||""},g))}var rpt=["className","children","data","innerRef","path","x","y","source","target"];function rj(){return rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rj.apply(this,arguments)}function spt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Dge(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=Act();return o.x(r),o.y(s),o.source(t),o.target(n),o(a)}}function apt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.x,l=o===void 0?Wo:o,c=e.y,u=c===void 0?$o:c,d=e.source,m=d===void 0?Ho:d,p=e.target,h=p===void 0?zo:p,g=spt(e,rpt),y=a||Dge({source:m,target:h,x:l,y:u});return n?A.createElement(A.Fragment,null,n({path:y})):A.createElement("path",rj({ref:s,className:U("visx-link visx-link-vertical-diagonal",t),d:y(r)||""},g))}var opt=["className","children","data","innerRef","path","angle","radius","source","target"];function sj(){return sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sj.apply(this,arguments)}function ipt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Fge(e){var t=e.source,n=e.target,r=e.angle,s=e.radius;return function(a){var o=jct();return o.angle(r),o.radius(s),o.source(t),o.target(n),o(a)}}function lpt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.angle,l=o===void 0?Wo:o,c=e.radius,u=c===void 0?$o:c,d=e.source,m=d===void 0?Ho:d,p=e.target,h=p===void 0?zo:p,g=ipt(e,opt),y=a||Fge({source:m,target:h,angle:l,radius:u});return n?A.createElement(A.Fragment,null,n({path:y})):A.createElement("path",sj({ref:s,className:U("visx-link visx-link-radial-diagonal",t),d:y(r)||""},g))}var cpt=["className","children","data","innerRef","path","percent","x","y","source","target"];function aj(){return aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aj.apply(this,arguments)}function upt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Uge(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var l=t(o),c=n(o),u=r(l),d=s(l),m=r(c),p=s(c),h=m-u,g=p-d,y=a*(h+g),v=a*(g-h),x=uo();return x.moveTo(u,d),x.bezierCurveTo(u+y,d+v,m+v,p-y,m,p),x.toString()}}function dpt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.percent,l=o===void 0?.2:o,c=e.x,u=c===void 0?$o:c,d=e.y,m=d===void 0?Wo:d,p=e.source,h=p===void 0?Ho:p,g=e.target,y=g===void 0?zo:g,v=upt(e,cpt),x=a||Uge({source:h,target:y,x:u,y:m,percent:l});return n?A.createElement(A.Fragment,null,n({path:x})):A.createElement("path",aj({ref:s,className:U("visx-link visx-link-horizontal-curve",t),d:x(r)||""},v))}var fpt=["className","children","data","innerRef","path","percent","x","y","source","target"];function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oj.apply(this,arguments)}function mpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Bge(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var l=t(o),c=n(o),u=r(l),d=s(l),m=r(c),p=s(c),h=m-u,g=p-d,y=a*(h+g),v=a*(g-h),x=uo();return x.moveTo(u,d),x.bezierCurveTo(u+y,d+v,m+v,p-y,m,p),x.toString()}}function ppt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.percent,l=o===void 0?.2:o,c=e.x,u=c===void 0?Wo:c,d=e.y,m=d===void 0?$o:d,p=e.source,h=p===void 0?Ho:p,g=e.target,y=g===void 0?zo:g,v=mpt(e,fpt),x=a||Bge({source:h,target:y,x:u,y:m,percent:l});return n?A.createElement(A.Fragment,null,n({path:x})):A.createElement("path",oj({ref:s,className:U("visx-link visx-link-vertical-curve",t),d:x(r)||""},v))}var hpt=["className","children","data","innerRef","path","percent","x","y","source","target"];function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ij.apply(this,arguments)}function gpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Vge(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var l=t(o),c=n(o),u=r(l)-Math.PI/2,d=s(l),m=r(c)-Math.PI/2,p=s(c),h=Math.cos(u),g=Math.sin(u),y=Math.cos(m),v=Math.sin(m),x=d*h,b=d*g,_=p*y,w=p*v,C=_-x,S=w-b,E=a*(C+S),M=a*(S-C),k=uo();return k.moveTo(x,b),k.bezierCurveTo(x+E,b+M,_+M,w-E,_,w),k.toString()}}function ypt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.percent,l=o===void 0?.2:o,c=e.x,u=c===void 0?Wo:c,d=e.y,m=d===void 0?$o:d,p=e.source,h=p===void 0?Ho:p,g=e.target,y=g===void 0?zo:g,v=gpt(e,hpt),x=a||Vge({source:h,target:y,x:u,y:m,percent:l});return n?A.createElement(A.Fragment,null,n({path:x})):A.createElement("path",ij({ref:s,className:U("visx-link visx-link-radial-curve",t),d:x(r)||""},v))}var vpt=["className","children","innerRef","data","path","x","y","source","target"];function lj(){return lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lj.apply(this,arguments)}function xpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Wge(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=t(a),l=n(a),c=r(o),u=s(o),d=r(l),m=s(l),p=uo();return p.moveTo(c,u),p.lineTo(d,m),p.toString()}}function bpt(e){var t=e.className,n=e.children,r=e.innerRef,s=e.data,a=e.path,o=e.x,l=o===void 0?$o:o,c=e.y,u=c===void 0?Wo:c,d=e.source,m=d===void 0?Ho:d,p=e.target,h=p===void 0?zo:p,g=xpt(e,vpt),y=a||Wge({source:m,target:h,x:l,y:u});return n?A.createElement(A.Fragment,null,n({path:y})):A.createElement("path",lj({ref:r,className:U("visx-link visx-link-horizontal-line",t),d:y(s)||""},g))}var _pt=["className","innerRef","data","path","x","y","source","target","children"];function cj(){return cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cj.apply(this,arguments)}function wpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function $ge(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=t(a),l=n(a),c=r(o),u=s(o),d=r(l),m=s(l),p=uo();return p.moveTo(c,u),p.lineTo(d,m),p.toString()}}function Cpt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,o=a===void 0?Wo:a,l=e.y,c=l===void 0?$o:l,u=e.source,d=u===void 0?Ho:u,m=e.target,p=m===void 0?zo:m,h=e.children,g=wpt(e,_pt),y=s||$ge({source:d,target:p,x:o,y:c});return h?A.createElement(A.Fragment,null,h({path:y})):A.createElement("path",cj({ref:n,className:U("visx-link visx-link-vertical-line",t),d:y(r)||""},g))}var Spt=["className","innerRef","data","path","x","y","source","target","children"];function uj(){return uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uj.apply(this,arguments)}function Ept(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Hge(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=t(a),l=n(a),c=r(o)-Math.PI/2,u=s(o),d=r(l)-Math.PI/2,m=s(l),p=Math.cos(c),h=Math.sin(c),g=Math.cos(d),y=Math.sin(d),v=uo();return v.moveTo(u*p,u*h),v.lineTo(m*g,m*y),v.toString()}}function Mpt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,o=a===void 0?Wo:a,l=e.y,c=l===void 0?$o:l,u=e.source,d=u===void 0?Ho:u,m=e.target,p=m===void 0?zo:m,h=e.children,g=Ept(e,Spt),y=s||Hge({source:d,target:p,x:o,y:c});return h?A.createElement(A.Fragment,null,h({path:y})):A.createElement("path",uj({ref:n,className:U("visx-link visx-link-radial-line",t),d:y(r)||""},g))}var kpt=["className","innerRef","data","path","percent","x","y","source","target","children"];function dj(){return dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dj.apply(this,arguments)}function Tpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function zge(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var l=t(o),c=n(o),u=r(l),d=s(l),m=r(c),p=s(c),h=uo();return h.moveTo(u,d),h.lineTo(u+(m-u)*a,d),h.lineTo(u+(m-u)*a,p),h.lineTo(m,p),h.toString()}}function Npt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,o=a===void 0?.5:a,l=e.x,c=l===void 0?$o:l,u=e.y,d=u===void 0?Wo:u,m=e.source,p=m===void 0?Ho:m,h=e.target,g=h===void 0?zo:h,y=e.children,v=Tpt(e,kpt),x=s||zge({source:p,target:g,x:c,y:d,percent:o});return y?A.createElement(A.Fragment,null,y({path:x})):A.createElement("path",dj({ref:n,className:U("visx-link visx-link-horizontal-step",t),d:x(r)||""},v))}var Apt=["className","innerRef","data","path","percent","x","y","source","target","children"];function fj(){return fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fj.apply(this,arguments)}function jpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Gge(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var l=t(o),c=n(o),u=r(l),d=s(l),m=r(c),p=s(c),h=uo();return h.moveTo(u,d),h.lineTo(u,d+(p-d)*a),h.lineTo(m,d+(p-d)*a),h.lineTo(m,p),h.toString()}}function Rpt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,o=a===void 0?.5:a,l=e.x,c=l===void 0?Wo:l,u=e.y,d=u===void 0?$o:u,m=e.source,p=m===void 0?Ho:m,h=e.target,g=h===void 0?zo:h,y=e.children,v=jpt(e,Apt),x=s||Gge({source:p,target:g,x:c,y:d,percent:o});return y?A.createElement(A.Fragment,null,y({path:x})):A.createElement("path",fj({ref:n,className:U("visx-link visx-link-vertical-step",t),d:x(r)||""},v))}var Ipt=["className","innerRef","data","path","x","y","source","target","children"];function mj(){return mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mj.apply(this,arguments)}function Ppt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function qge(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=t(a),l=n(a),c=r(o),u=s(o),d=r(l),m=s(l),p=c-Math.PI/2,h=u,g=d-Math.PI/2,y=m,v=Math.cos(p),x=Math.sin(p),b=Math.cos(g),_=Math.sin(g),w=Math.abs(g-p)>Math.PI?g<=p:g>p;return`
      M`+h*v+","+h*x+`
      A`+h+","+h+",0,0,"+(w?1:0)+","+h*b+","+h*_+`
      L`+y*b+","+y*_+`
    `}}function Opt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,o=a===void 0?Wo:a,l=e.y,c=l===void 0?$o:l,u=e.source,d=u===void 0?Ho:u,m=e.target,p=m===void 0?zo:m,h=e.children,g=Ppt(e,Ipt),y=s||qge({source:d,target:p,x:o,y:c});return h?A.createElement(A.Fragment,null,h({path:y})):A.createElement("path",mj({ref:n,className:U("visx-link visx-link-radial-step",t),d:y(r)||""},g))}var Lpt=["sides","size","center","rotate","className","children","innerRef","points"];function pj(){return pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pj.apply(this,arguments)}function Dpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var Kge={x:0,y:0},Yge=function(t){var n=t.sides,r=n===void 0?4:n,s=t.size,a=s===void 0?25:s,o=t.center,l=o===void 0?Kge:o,c=t.rotate,u=c===void 0?0:c,d=t.side,m=360/r*d-u,p=Oge(m);return{x:l.x+a*Math.cos(p),y:l.y+a*Math.sin(p)}},Qge=function(t){var n=t.sides,r=t.size,s=t.center,a=t.rotate;return new Array(n).fill(0).map(function(o,l){return Yge({sides:n,size:r,center:s,rotate:a,side:l})})};function Fpt(e){var t=e.sides,n=t===void 0?4:t,r=e.size,s=r===void 0?25:r,a=e.center,o=a===void 0?Kge:a,l=e.rotate,c=l===void 0?0:l,u=e.className,d=e.children,m=e.innerRef,p=e.points,h=Dpt(e,Lpt),g=p||Qge({sides:n,size:s,center:o,rotate:c}).map(function(y){var v=y.x,x=y.y;return[v,x]});return d?A.createElement(A.Fragment,null,d({points:g})):A.createElement("polygon",pj({ref:m,className:U("visx-polygon",u),points:g.join(" ")},h))}var Upt=["className","innerRef"];function hj(){return hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hj.apply(this,arguments)}function Bpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Vpt(e){var t=e.className,n=e.innerRef,r=Bpt(e,Upt);return A.createElement("circle",hj({ref:n,className:U("visx-circle",t)},r))}var PY="http://www.w3.org/2000/svg";function Wpt(e){var t=document.getElementById(e);if(!t){var n=document.createElementNS(PY,"svg");n.setAttribute("aria-hidden","true"),n.style.opacity="0",n.style.width="0",n.style.height="0",n.style.position="absolute",n.style.top="-100%",n.style.left="-100%",n.style.pointerEvents="none",t=document.createElementNS(PY,"path"),t.setAttribute("id",e),n.appendChild(t),document.body.appendChild(n)}return t}var $pt="__visx_splitpath_svg_path_measurement_id",OY=function(){return!0};function Hpt(e){var t=e.path,n=e.pointsInSegments,r=e.segmentation,s=r===void 0?"x":r,a=e.sampleRate,o=a===void 0?1:a;try{var l=Wpt($pt);l.setAttribute("d",t);var c=l.getTotalLength(),u=n.length,d=n.map(function(){return[]});if(s==="x"||s==="y")for(var m=n.map(function(O){var P;return(P=O.find(function(N){return typeof N[s]=="number"}))==null?void 0:P[s]}),p=l.getPointAtLength(0),h=l.getPointAtLength(c),g=h[s]>p[s],y=g?m.map(function(O){return typeof O>"u"?OY:function(P){return P>=O}}):m.map(function(O){return typeof O>"u"?OY:function(P){return P<=O}}),v=0,x=0;x<=c;x+=o){for(var b=l.getPointAtLength(x),_=b[s];v<u-1&&y[v+1](_);)v+=1;d[v].push(b)}else{var w=n.map(function(O){return O.length}),C=w.reduce(function(O,P){return O+P},0),S=c/Math.max(1,C-1),E=w.slice(0,u-1);E.unshift(0);for(var M=2;M<u;M+=1)E[M]+=E[M-1];for(var k=0;k<u;k+=1)E[k]*=S;for(var T=0,j=0;j<=c;j+=o){for(var R=l.getPointAtLength(j);T<u-1&&j>=E[T+1];)T+=1;d[T].push(R)}}return d}catch{return[]}}function gj(){return gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gj.apply(this,arguments)}var zpt=function(t){return t.x||0},Gpt=function(t){return t.y||0};function Xge(e){var t=e.children,n=e.className,r=e.curve,s=e.defined,a=e.segmentation,o=e.sampleRate,l=e.segments,c=e.x,u=e.y,d=e.styles,m=f.useMemo(function(){var g=typeof c=="number"||typeof c>"u"?function(){return c}:c,y=typeof u=="number"||typeof u>"u"?function(){return u}:u;return l.map(function(v){return v.map(function(x,b){return{x:g(x,b,v),y:y(x,b,v)}})})},[c,u,l]),p=f.useMemo(function(){var g=Lf({x:c,y:u,defined:s,curve:r});return g(l.flat())||""},[c,u,s,r,l]),h=f.useMemo(function(){return Hpt({path:p,segmentation:a,pointsInSegments:m,sampleRate:o})},[p,a,m,o]);return A.createElement("g",null,h.map(function(g,y){return t?A.createElement(A.Fragment,{key:y},t({index:y,segment:g,styles:d[y]||d[y%d.length]})):A.createElement(jge,gj({key:y,className:n,data:g,x:zpt,y:Gpt},d[y]||d[y%d.length]))}))}Xge.propTypes={segments:Le.arrayOf(Le.array).isRequired,styles:Le.array.isRequired,children:Le.func,className:Le.string};const qpt=Object.freeze(Object.defineProperty({__proto__:null,Arc:Age,Area:Tmt,AreaClosed:Vp,AreaStack:Omt,Bar:sg,BarGroup:Hmt,BarGroupHorizontal:qmt,BarRounded:Vmt,BarStack:Qmt,BarStackHorizontal:Jmt,Circle:Vpt,Line:t3,LinePath:jge,LineRadial:Emt,LinkHorizontal:npt,LinkHorizontalCurve:dpt,LinkHorizontalLine:bpt,LinkHorizontalStep:Npt,LinkRadial:lpt,LinkRadialCurve:ypt,LinkRadialLine:Mpt,LinkRadialStep:Opt,LinkVertical:apt,LinkVerticalCurve:ppt,LinkVerticalLine:Cpt,LinkVerticalStep:Rpt,Pie:vmt,Polygon:Fpt,STACK_OFFSETS:F2,STACK_OFFSET_NAMES:umt,STACK_ORDERS:D2,STACK_ORDER_NAMES:cmt,SplitLinePath:Xge,Stack:Rge,arc:IL,area:e3,degreesToRadians:Oge,getPoint:Yge,getPoints:Qge,line:Lf,pathHorizontalCurve:Uge,pathHorizontalDiagonal:Lge,pathHorizontalLine:Wge,pathHorizontalStep:zge,pathRadialCurve:Vge,pathRadialDiagonal:Fge,pathRadialLine:Hge,pathRadialStep:qge,pathVerticalCurve:Bge,pathVerticalDiagonal:Dge,pathVerticalLine:$ge,pathVerticalStep:Gge,pie:kge,radialLine:Tge,stack:Nge,stackOffset:JE,stackOrder:ZE},Symbol.toStringTag,{value:"Module"})),LY="pplx://www.pplx.com";function PL({href:e,inApp:t,queryParams:n}){if(!t||e==null)return e;const r=new URL(e,LY);return n?.forEach((s,a)=>{r.searchParams.get(a)||r.searchParams.set(a,s??"")}),r.pathname.startsWith("/app")||(r.pathname.startsWith("/")?r.pathname=`/app${r.pathname}`:r.pathname=`/app/${r.pathname}`),r.href.replace(LY,"")}const Du=A.memo(({children:e,href:t,...n})=>{const{inApp:r}=_l(),s=Dt();return i.jsx(Ye,{...n,href:PL({href:t,inApp:r,queryParams:s}),children:e})});Du.displayName="CanonicalLink";const Kpt=A.memo(e=>e.href?i.jsx(Du,{...e}):e.children);Kpt.displayName="CanonicalLinkMaybe";const Ypt=(e,t)=>{const{value:n,loading:r}=At({flag:"finance-india",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Qpt="pplx.finance-country",r3={US:"US",IN:"IN"},Zge=e=>r3[e?.toUpperCase()],Xpt=e=>Zge(e)??r3.US,Jge=f.createContext({country:r3.US,setCountry:()=>{},enabled:!1}),Zpt=()=>{const e=f.useContext(Jge);if(!e)throw new Error("useFinanceCountry must be used within a FinanceCountryProvider");return e},Jpt={US:K({defaultMessage:"US Markets",id:"7T1wl9MB1D"}),IN:K({defaultMessage:"India Markets",id:"ty1NgqpFg/"})},tVt=e=>Jpt[e]??K({defaultMessage:"Markets",id:"sITCHuqY3F"}),nVt=e=>{switch(e){case"IN":return"Asia/Kolkata";case"US":default:return"America/New_York"}},rVt=({children:e})=>{const t=jf(),[n,r]=uE(Qpt,null),{session:s}=Ct(),{variation:a}=Ypt(!0,{userEmail:s?.user?.email??""}),o=Zge(n)??Xpt(t??null);return i.jsx(Jge.Provider,{value:{country:a?o:r3.US,setCountry:r,enabled:a},children:e})},OL=A.memo(({value:e,format:t,suffix:n,animated:r=!0})=>{const{locale:s}=Q();return r?i.jsx(ii,{value:e,format:t,suffix:n}):i.jsx("span",{children:Intl.NumberFormat(s,t).format(e)})});OL.displayName="FinanceNumberFlow";const eht=e=>e===0?"":e>0?"+":"-",tht=(e,t)=>e===0||!t?null:e>0?no:A4e,nht=e=>e===0?"light":e>0?"positive":"negative",B2=A.memo(({change:e,variant:t="small",includeIcon:n=!1,className:r,animated:s=!0,background:a=!0,mono:o=!0,format:l={style:"percent",minimumFractionDigits:0,maximumFractionDigits:e/100>1?0:2}})=>{const c=tht(e,n);return i.jsxs(L,{variant:t,color:nht(e),className:U("flex shrink-0 grow-0 items-center justify-center gap-[0.1em] rounded text-center font-mono",{"bg-positive/10":e>0&&a,"bg-negative/10":e<0&&a,"bg-offsetPlus":e===0&&a,"px-[0.6em] py-[0.15em]":a,"!pl-[0.3em]":a&&n&&e!==0},r),children:[c?i.jsx(me,{icon:c,className:U("inline-flex size-[1.2em]",{"!mt-px":o})}):i.jsx("span",{className:o?"font-mono":"",children:eht(e)}),i.jsx("span",{className:U("whitespace-nowrap",{"font-mono":o}),children:i.jsx(OL,{value:Math.abs(e)/100,format:l,animated:s})})]})});B2.displayName="FinancePriceChange";var LL=Y1(),qt=e=>K1(e,LL),DL=Y1();qt.write=e=>K1(e,DL);var s3=Y1();qt.onStart=e=>K1(e,s3);var FL=Y1();qt.onFrame=e=>K1(e,FL);var UL=Y1();qt.onFinish=e=>K1(e,UL);var ep=[];qt.setTimeout=(e,t)=>{const n=qt.now()+t,r=()=>{const a=ep.findIndex(o=>o.cancel==r);~a&&ep.splice(a,1),Zc-=~a?1:0},s={time:n,handler:e,cancel:r};return ep.splice(eye(n),0,s),Zc+=1,tye(),s};var eye=e=>~(~ep.findIndex(t=>t.time>e)||~ep.length);qt.cancel=e=>{s3.delete(e),FL.delete(e),UL.delete(e),LL.delete(e),DL.delete(e)};qt.sync=e=>{yj=!0,qt.batchedUpdates(e),yj=!1};qt.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,qt.onStart(n)}return r.handler=e,r.cancel=()=>{s3.delete(n),t=null},r};var BL=typeof window<"u"?window.requestAnimationFrame:()=>{};qt.use=e=>BL=e;qt.now=typeof performance<"u"?()=>performance.now():Date.now;qt.batchedUpdates=e=>e();qt.catch=console.error;qt.frameLoop="always";qt.advance=()=>{qt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):rye()};var Xc=-1,Zc=0,yj=!1;function K1(e,t){yj?(t.delete(e),e(0)):(t.add(e),tye())}function tye(){Xc<0&&(Xc=0,qt.frameLoop!=="demand"&&BL(nye))}function rht(){Xc=-1}function nye(){~Xc&&(BL(nye),qt.batchedUpdates(rye))}function rye(){const e=Xc;Xc=qt.now();const t=eye(Xc);if(t&&(sye(ep.splice(0,t),n=>n.handler()),Zc-=t),!Zc){rht();return}s3.flush(),LL.flush(e?Math.min(64,Xc-e):16.667),FL.flush(),DL.flush(),UL.flush()}function Y1(){let e=new Set,t=e;return{add(n){Zc+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Zc-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Zc-=t.size,sye(t,r=>r(n)&&e.add(r)),Zc+=e.size,t=e)}}}function sye(e,t){e.forEach(n=>{try{t(n)}catch(r){qt.catch(r)}})}var sht=Object.defineProperty,aht=(e,t)=>{for(var n in t)sht(e,n,{get:t[n],enumerable:!0})},gi={};aht(gi,{assign:()=>iht,colors:()=>ou,createStringInterpolator:()=>WL,skipAnimation:()=>oye,to:()=>aye,willAdvance:()=>$L});function vj(){}var oht=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Ve={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Wl(e,t){if(Ve.arr(e)){if(!Ve.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Ut=(e,t)=>e.forEach(t);function gl(e,t,n){if(Ve.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var Qs=e=>Ve.und(e)?[]:Ve.arr(e)?e:[e];function s0(e,t){if(e.size){const n=Array.from(e);e.clear(),Ut(n,t)}}var Sy=(e,...t)=>s0(e,n=>n(...t)),VL=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),WL,aye,ou=null,oye=!1,$L=vj,iht=e=>{e.to&&(aye=e.to),e.now&&(qt.now=e.now),e.colors!==void 0&&(ou=e.colors),e.skipAnimation!=null&&(oye=e.skipAnimation),e.createStringInterpolator&&(WL=e.createStringInterpolator),e.requestAnimationFrame&&qt.use(e.requestAnimationFrame),e.batchedUpdates&&(qt.batchedUpdates=e.batchedUpdates),e.willAdvance&&($L=e.willAdvance),e.frameLoop&&(qt.frameLoop=e.frameLoop)},a0=new Set,Co=[],eT=[],V2=0,a3={get idle(){return!a0.size&&!Co.length},start(e){V2>e.priority?(a0.add(e),qt.onStart(lht)):(iye(e),qt(xj))},advance:xj,sort(e){if(V2)qt.onFrame(()=>a3.sort(e));else{const t=Co.indexOf(e);~t&&(Co.splice(t,1),lye(e))}},clear(){Co=[],a0.clear()}};function lht(){a0.forEach(iye),a0.clear(),qt(xj)}function iye(e){Co.includes(e)||lye(e)}function lye(e){Co.splice(cht(Co,t=>t.priority>e.priority),0,e)}function xj(e){const t=eT;for(let n=0;n<Co.length;n++){const r=Co[n];V2=r.priority,r.idle||($L(r),r.advance(e),r.idle||t.push(r))}return V2=0,eT=Co,eT.length=0,Co=t,Co.length>0}function cht(e,t){const n=e.findIndex(t);return n<0?e.length:n}var uht={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},si="[-+]?\\d*\\.?\\d+",W2=si+"%";function o3(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var dht=new RegExp("rgb"+o3(si,si,si)),fht=new RegExp("rgba"+o3(si,si,si,si)),mht=new RegExp("hsl"+o3(si,W2,W2)),pht=new RegExp("hsla"+o3(si,W2,W2,si)),hht=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ght=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,yht=/^#([0-9a-fA-F]{6})$/,vht=/^#([0-9a-fA-F]{8})$/;function xht(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=yht.exec(e))?parseInt(t[1]+"ff",16)>>>0:ou&&ou[e]!==void 0?ou[e]:(t=dht.exec(e))?(sm(t[1])<<24|sm(t[2])<<16|sm(t[3])<<8|255)>>>0:(t=fht.exec(e))?(sm(t[1])<<24|sm(t[2])<<16|sm(t[3])<<8|UY(t[4]))>>>0:(t=hht.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=vht.exec(e))?parseInt(t[1],16)>>>0:(t=ght.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=mht.exec(e))?(DY(FY(t[1]),Hb(t[2]),Hb(t[3]))|255)>>>0:(t=pht.exec(e))?(DY(FY(t[1]),Hb(t[2]),Hb(t[3]))|UY(t[4]))>>>0:null}function tT(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function DY(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,a=tT(s,r,e+1/3),o=tT(s,r,e),l=tT(s,r,e-1/3);return Math.round(a*255)<<24|Math.round(o*255)<<16|Math.round(l*255)<<8}function sm(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function FY(e){return(parseFloat(e)%360+360)%360/360}function UY(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Hb(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function BY(e){let t=xht(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,a=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${a})`}var mv=(e,t,n)=>{if(Ve.fun(e))return e;if(Ve.arr(e))return mv({range:e,output:t,extrapolate:n});if(Ve.str(e.output[0]))return WL(e);const r=e,s=r.output,a=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const d=_ht(u,a);return bht(u,a[d],a[d+1],s[d],s[d+1],c,o,l,r.map)}};function bht(e,t,n,r,s,a,o,l,c){let u=c?c(e):e;if(u<t){if(o==="identity")return u;o==="clamp"&&(u=t)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=a(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function _ht(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var wht={linear:e=>e},pv=Symbol.for("FluidValue.get"),Wp=Symbol.for("FluidValue.observers"),wo=e=>!!(e&&e[pv]),ga=e=>e&&e[pv]?e[pv]():e,VY=e=>e[Wp]||null;function Cht(e,t){e.eventObserved?e.eventObserved(t):e(t)}function hv(e,t){const n=e[Wp];n&&n.forEach(r=>{Cht(r,t)})}var cye=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Sht(this,e)}},Sht=(e,t)=>uye(e,pv,t);function ag(e,t){if(e[pv]){let n=e[Wp];n||uye(e,Wp,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function gv(e,t){const n=e[Wp];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[Wp]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var uye=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),nw=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Eht=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,WY=new RegExp(`(${nw.source})(%|[a-z]+)`,"i"),Mht=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,i3=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,dye=e=>{const[t,n]=kht(e);if(!t||VL())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&i3.test(n))return dye(n);if(n)return n}return e},kht=e=>{const t=i3.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},nT,Tht=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,fye=e=>{nT||(nT=ou?new RegExp(`(${Object.keys(ou).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(a=>ga(a).replace(i3,dye).replace(Eht,BY).replace(nT,BY)),n=t.map(a=>a.match(nw).map(Number)),s=n[0].map((a,o)=>n.map(l=>{if(!(o in l))throw Error('The arity of each "output" value must be equal');return l[o]})).map(a=>mv({...e,output:a}));return a=>{const o=!WY.test(t[0])&&t.find(c=>WY.test(c))?.replace(nw,"");let l=0;return t[0].replace(nw,()=>`${s[l++](a)}${o||""}`).replace(Mht,Tht)}},HL="react-spring: ",mye=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${HL}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Nht=mye(console.warn);function Aht(){Nht(`${HL}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var jht=mye(console.warn);function Rht(){jht(`${HL}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function l3(e){return Ve.str(e)&&(e[0]=="#"||/\d/.test(e)||!VL()&&i3.test(e)||e in(ou||{}))}var Nd=VL()?f.useEffect:f.useLayoutEffect,Iht=()=>{const e=f.useRef(!1);return Nd(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function zL(){const e=f.useState()[1],t=Iht();return()=>{t.current&&e(Math.random())}}function Pht(e,t){const[n]=f.useState(()=>({inputs:t,result:e()})),r=f.useRef(),s=r.current;let a=s;return a?t&&a.inputs&&Oht(t,a.inputs)||(a={inputs:t,result:e()}):a=n,f.useEffect(()=>{r.current=a,s==n&&(n.inputs=n.result=void 0)},[a]),a.result}function Oht(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var GL=e=>f.useEffect(e,Lht),Lht=[];function bj(e){const t=f.useRef();return f.useEffect(()=>{t.current=e}),t.current}var yv=Symbol.for("Animated:node"),Dht=e=>!!e&&e[yv]===e,Ui=e=>e&&e[yv],qL=(e,t)=>oht(e,yv,t),c3=e=>e&&e[yv]&&e[yv].getPayload(),pye=class{constructor(){qL(this,this)}getPayload(){return this.payload||[]}},Q1=class extends pye{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Ve.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Q1(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Ve.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Ve.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},vv=class extends Q1{constructor(e){super(0),this._string=null,this._toString=mv({output:[e,e]})}static create(e){return new vv(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Ve.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=mv({output:[this.getValue(),e]})),this._value=0,super.reset()}},$2={dependencies:null},u3=class extends pye{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return gl(this.source,(n,r)=>{Dht(n)?t[r]=n.getValue(e):wo(n)?t[r]=ga(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Ut(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return gl(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){$2.dependencies&&wo(e)&&$2.dependencies.add(e);const t=c3(e);t&&Ut(t,n=>this.add(n))}},hye=class extends u3{constructor(e){super(e)}static create(e){return new hye(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Fht)),!0)}};function Fht(e){return(l3(e)?vv:Q1).create(e)}function _j(e){const t=Ui(e);return t?t.constructor:Ve.arr(e)?hye:l3(e)?vv:Q1}var $Y=(e,t)=>{const n=!Ve.fun(e)||e.prototype&&e.prototype.isReactComponent;return f.forwardRef((r,s)=>{const a=f.useRef(null),o=n&&f.useCallback(g=>{a.current=Vht(s,g)},[s]),[l,c]=Bht(r,t),u=zL(),d=()=>{const g=a.current;if(n&&!g)return;(g?t.applyAnimatedValues(g,l.getValue(!0)):!1)===!1&&u()},m=new Uht(d,c),p=f.useRef();Nd(()=>(p.current=m,Ut(c,g=>ag(g,m)),()=>{p.current&&(Ut(p.current.deps,g=>gv(g,p.current)),qt.cancel(p.current.update))})),f.useEffect(d,[]),GL(()=>()=>{const g=p.current;Ut(g.deps,y=>gv(y,g))});const h=t.getComponentProps(l.getValue());return f.createElement(e,{...h,ref:o})})},Uht=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&qt.write(this.update)}};function Bht(e,t){const n=new Set;return $2.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new u3(e),$2.dependencies=null,[e,n]}function Vht(e,t){return e&&(Ve.fun(e)?e(t):e.current=t),t}var HY=Symbol.for("AnimatedComponent"),Wht=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new u3(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},a=o=>{const l=zY(o)||"Anonymous";return Ve.str(o)?o=a[o]||(a[o]=$Y(o,s)):o=o[HY]||(o[HY]=$Y(o,s)),o.displayName=`Animated(${l})`,o};return gl(e,(o,l)=>{Ve.arr(e)&&(l=zY(o)),a[l]=a(o)}),{animated:a}},zY=e=>Ve.str(e)?e:e&&Ve.str(e.displayName)?e.displayName:Ve.fun(e)&&e.name||null;function ya(e,...t){return Ve.fun(e)?e(...t):e}var o0=(e,t)=>e===!0||!!(t&&e&&(Ve.fun(e)?e(t):Qs(e).includes(t))),gye=(e,t)=>Ve.obj(e)?t&&e[t]:e,yye=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,$ht=e=>e,d3=(e,t=$ht)=>{let n=Hht;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const a=t(e[s],s);Ve.und(a)||(r[s]=a)}return r},Hht=["config","onProps","onStart","onChange","onPause","onResume","onRest"],zht={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ght(e){const t={};let n=0;if(gl(e,(r,s)=>{zht[s]||(t[s]=r,n++)}),n)return t}function KL(e){const t=Ght(e);if(t){const n={to:t};return gl(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function xv(e){return e=ga(e),Ve.arr(e)?e.map(xv):l3(e)?gi.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function vye(e){for(const t in e)return!0;return!1}function wj(e){return Ve.fun(e)||Ve.arr(e)&&Ve.obj(e[0])}function Cj(e,t){e.ref?.delete(e),t?.delete(e)}function xye(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var qht={default:{tension:170,friction:26}},Sj={...qht.default,mass:1,damping:1,easing:wht.linear,clamp:!1},Kht=class{constructor(){this.velocity=0,Object.assign(this,Sj)}};function Yht(e,t,n){n&&(n={...n},GY(n,t),t={...n,...t}),GY(e,t),Object.assign(e,t);for(const o in Sj)e[o]==null&&(e[o]=Sj[o]);let{frequency:r,damping:s}=e;const{mass:a}=e;return Ve.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*a,e.friction=4*Math.PI*s*a/r),e}function GY(e,t){if(!Ve.und(t.decay))e.duration=void 0;else{const n=!Ve.und(t.tension)||!Ve.und(t.friction);(n||!Ve.und(t.frequency)||!Ve.und(t.damping)||!Ve.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var qY=[],Qht=class{constructor(){this.changed=!1,this.values=qY,this.toValues=null,this.fromValues=qY,this.config=new Kht,this.immediate=!1}};function bye(e,{key:t,props:n,defaultProps:r,state:s,actions:a}){return new Promise((o,l)=>{let c,u,d=o0(n.cancel??r?.cancel,t);if(d)h();else{Ve.und(n.pause)||(s.paused=o0(n.pause,t));let g=r?.pause;g!==!0&&(g=s.paused||o0(g,t)),c=ya(n.delay||0,t),g?(s.resumeQueue.add(p),a.pause()):(a.resume(),p())}function m(){s.resumeQueue.add(p),s.timeouts.delete(u),u.cancel(),c=u.time-qt.now()}function p(){c>0&&!gi.skipAnimation?(s.delayed=!0,u=qt.setTimeout(h,c),s.pauseQueue.add(m),s.timeouts.add(u)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(m),s.timeouts.delete(u),e<=(s.cancelId||0)&&(d=!0);try{a.start({...n,callId:e,cancel:d},o)}catch(g){l(g)}}})}var YL=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?tp(e.get()):t.every(n=>n.noop)?_ye(e.get()):ei(e.get(),t.every(n=>n.finished)),_ye=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),ei=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),tp=e=>({value:e,cancelled:!0,finished:!1});function wye(e,t,n,r){const{callId:s,parentId:a,onRest:o}=t,{asyncTo:l,promise:c}=n;return!a&&e===l&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=d3(t,(v,x)=>x==="onRest"?void 0:v);let d,m;const p=new Promise((v,x)=>(d=v,m=x)),h=v=>{const x=s<=(n.cancelId||0)&&tp(r)||s!==n.asyncId&&ei(r,!1);if(x)throw v.result=x,m(v),v},g=(v,x)=>{const b=new KY,_=new YY;return(async()=>{if(gi.skipAnimation)throw bv(n),_.result=ei(r,!1),m(_),_;h(b);const w=Ve.obj(v)?{...v}:{...x,to:v};w.parentId=s,gl(u,(S,E)=>{Ve.und(w[E])&&(w[E]=S)});const C=await r.start(w);return h(b),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),C})()};let y;if(gi.skipAnimation)return bv(n),ei(r,!1);try{let v;Ve.arr(e)?v=(async x=>{for(const b of x)await g(b)})(e):v=Promise.resolve(e(g,r.stop.bind(r))),await Promise.all([v.then(d),p]),y=ei(r.get(),!0,!1)}catch(v){if(v instanceof KY)y=v.result;else if(v instanceof YY)y=v.result;else throw v}finally{s==n.asyncId&&(n.asyncId=a,n.asyncTo=a?l:void 0,n.promise=a?c:void 0)}return Ve.fun(o)&&qt.batchedUpdates(()=>{o(y,r,r.item)}),y})()}function bv(e,t){s0(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var KY=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},YY=class extends Error{constructor(){super("SkipAnimationSignal")}},Ej=e=>e instanceof QL,Xht=1,QL=class extends cye{constructor(){super(...arguments),this.id=Xht++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Ui(this);return e&&e.getValue()}to(...e){return gi.to(this,e)}interpolate(...e){return Aht(),gi.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){hv(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||a3.sort(this),hv(this,{type:"priority",parent:this,priority:e})}},df=Symbol.for("SpringPhase"),Cye=1,Sye=2,Eye=4,rT=e=>(e[df]&Cye)>0,Uc=e=>(e[df]&Sye)>0,ny=e=>(e[df]&Eye)>0,QY=(e,t)=>t?e[df]|=Sye|Cye:e[df]&=-3,XY=(e,t)=>t?e[df]|=Eye:e[df]&=-5,Zht=class extends QL{constructor(e,t){if(super(),this.animation=new Qht,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Ve.und(e)||!Ve.und(t)){const n=Ve.obj(e)?{...e}:{...t,from:e};Ve.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Uc(this)||this._state.asyncTo)||ny(this)}get goal(){return ga(this.animation.to)}get velocity(){const e=Ui(this);return e instanceof Q1?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return rT(this)}get isAnimating(){return Uc(this)}get isPaused(){return ny(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:a}=r,o=c3(r.to);!o&&wo(r.to)&&(s=Qs(ga(r.to))),r.values.forEach((u,d)=>{if(u.done)return;const m=u.constructor==vv?1:o?o[d].lastPosition:s[d];let p=r.immediate,h=m;if(!p){if(h=u.lastPosition,a.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const y=r.fromValues[d],v=u.v0!=null?u.v0:u.v0=Ve.arr(a.velocity)?a.velocity[d]:a.velocity;let x;const b=a.precision||(y==m?.005:Math.min(1,Math.abs(m-y)*.001));if(Ve.und(a.duration))if(a.decay){const _=a.decay===!0?.998:a.decay,w=Math.exp(-(1-_)*g);h=y+v/(1-_)*(1-w),p=Math.abs(u.lastPosition-h)<=b,x=v*w}else{x=u.lastVelocity==null?v:u.lastVelocity;const _=a.restVelocity||b/10,w=a.clamp?0:a.bounce,C=!Ve.und(w),S=y==m?u.v0>0:y<m;let E,M=!1;const k=1,T=Math.ceil(e/k);for(let j=0;j<T&&(E=Math.abs(x)>_,!(!E&&(p=Math.abs(m-h)<=b,p)));++j){C&&(M=h==m||h>m==S,M&&(x=-x*w,h=m));const R=-a.tension*1e-6*(h-m),O=-a.friction*.001*x,P=(R+O)/a.mass;x=x+P*k,h=h+x*k}}else{let _=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,u.durationProgress>0&&(u.elapsedTime=a.duration*u.durationProgress,g=u.elapsedTime+=e)),_=(a.progress||0)+g/this._memoizedDuration,_=_>1?1:_<0?0:_,u.durationProgress=_),h=y+a.easing(_)*(m-y),x=(h-u.lastPosition)/e,p=_==1}u.lastVelocity=x,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),p=!0)}o&&!o[d].done&&(p=!1),p?u.done=!0:t=!1,u.setValue(h,a.round)&&(n=!0)});const l=Ui(this),c=l.getValue();if(t){const u=ga(r.to);(c!==u||n)&&!a.decay?(l.setValue(u),this._onChange(u)):n&&a.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return qt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Uc(this)){const{to:e,config:t}=this.animation;qt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return Ve.und(e)?(n=this.queue||[],this.queue=[]):n=[Ve.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>YL(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),bv(this._state,e&&this._lastCallId),qt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=Ve.obj(n)?n[t]:n,(n==null||wj(n))&&(n=void 0),r=Ve.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return rT(this)||(e.reverse&&([n,r]=[r,n]),r=ga(r),Ve.und(r)?Ui(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,d3(e,(o,l)=>/^on/.test(l)?gye(o,n):o)),JY(this,e,"onProps"),sy(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return bye(++this._lastCallId,{key:n,props:e,defaultProps:r,state:a,actions:{pause:()=>{ny(this)||(XY(this,!0),Sy(a.pauseQueue),sy(this,"onPause",ei(this,ry(this,this.animation.to)),this))},resume:()=>{ny(this)&&(XY(this,!1),Uc(this)&&this._resume(),Sy(a.resumeQueue),sy(this,"onResume",ei(this,ry(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const l=Mye(e);if(l)return this._update(l,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(tp(this));const r=!Ve.und(e.to),s=!Ve.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(tp(this));const{key:a,defaultProps:o,animation:l}=this,{to:c,from:u}=l;let{to:d=c,from:m=u}=e;s&&!r&&(!t.default||Ve.und(d))&&(d=m),t.reverse&&([d,m]=[m,d]);const p=!Wl(m,u);p&&(l.from=m),m=ga(m);const h=!Wl(d,c);h&&this._focus(d);const g=wj(t.to),{config:y}=l,{decay:v,velocity:x}=y;(r||s)&&(y.velocity=0),t.config&&!g&&Yht(y,ya(t.config,a),t.config!==o.config?ya(o.config,a):void 0);let b=Ui(this);if(!b||Ve.und(d))return n(ei(this,!0));const _=Ve.und(t.reset)?s&&!t.default:!Ve.und(m)&&o0(t.reset,a),w=_?m:this.get(),C=xv(d),S=Ve.num(C)||Ve.arr(C)||l3(C),E=!g&&(!S||o0(o.immediate||t.immediate,a));if(h){const j=_j(d);if(j!==b.constructor)if(E)b=this._set(C);else throw Error(`Cannot animate between ${b.constructor.name} and ${j.name}, as the "to" prop suggests`)}const M=b.constructor;let k=wo(d),T=!1;if(!k){const j=_||!rT(this)&&p;(h||j)&&(T=Wl(xv(w),C),k=!T),(!Wl(l.immediate,E)&&!E||!Wl(y.decay,v)||!Wl(y.velocity,x))&&(k=!0)}if(T&&Uc(this)&&(l.changed&&!_?k=!0:k||this._stop(c)),!g&&((k||wo(c))&&(l.values=b.getPayload(),l.toValues=wo(d)?null:M==vv?[1]:Qs(C)),l.immediate!=E&&(l.immediate=E,!E&&!_&&this._set(c)),k)){const{onRest:j}=l;Ut(egt,O=>JY(this,t,O));const R=ei(this,ry(this,c));Sy(this._pendingCalls,R),this._pendingCalls.add(n),l.changed&&qt.batchedUpdates(()=>{l.changed=!_,j?.(R,this),_?ya(o.onRest,R):l.onStart?.(R,this)})}_&&this._set(w),g?n(wye(t.to,t,this._state,this)):k?this._start():Uc(this)&&!h?this._pendingCalls.add(n):n(_ye(w))}_focus(e){const t=this.animation;e!==t.to&&(VY(this)&&this._detach(),t.to=e,VY(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;wo(t)&&(ag(t,this),Ej(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;wo(e)&&gv(e,this)}_set(e,t=!0){const n=ga(e);if(!Ve.und(n)){const r=Ui(this);if(!r||!Wl(n,r.getValue())){const s=_j(n);!r||r.constructor!=s?qL(this,s.create(n)):r.setValue(n),r&&qt.batchedUpdates(()=>{this._onChange(n,t)})}}return Ui(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,sy(this,"onStart",ei(this,ry(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),ya(this.animation.onChange,e,this)),ya(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Ui(this).reset(ga(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Uc(this)||(QY(this,!0),ny(this)||this._resume())}_resume(){gi.skipAnimation?this.finish():a3.start(this)}_stop(e,t){if(Uc(this)){QY(this,!1);const n=this.animation;Ut(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),hv(this,{type:"idle",parent:this});const r=t?tp(this.get()):ei(this.get(),ry(this,e??n.to));Sy(this._pendingCalls,r),n.changed&&(n.changed=!1,sy(this,"onRest",r,this))}}};function ry(e,t){const n=xv(t),r=xv(e.get());return Wl(r,n)}function Mye(e,t=e.loop,n=e.to){const r=ya(t);if(r){const s=r!==!0&&KL(r),a=(s||e).reverse,o=!s||s.reset;return _v({...e,loop:t,default:!1,pause:void 0,to:!a||wj(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function _v(e){const{to:t,from:n}=e=KL(e),r=new Set;return Ve.obj(t)&&ZY(t,r),Ve.obj(n)&&ZY(n,r),e.keys=r.size?Array.from(r):null,e}function Jht(e){const t=_v(e);return Ve.und(t.default)&&(t.default=d3(t)),t}function ZY(e,t){gl(e,(n,r)=>n!=null&&t.add(r))}var egt=["onStart","onRest","onChange","onPause","onResume"];function JY(e,t,n){e.animation[n]=t[n]!==yye(t,n)?gye(t[n],e.key):void 0}function sy(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var tgt=["onStart","onChange","onRest"],ngt=1,kye=class{constructor(e,t){this.id=ngt++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];Ve.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(_v(e)),this}start(e){let{queue:t}=this;return e?t=Qs(e).map(_v):this.queue=[],this._flush?this._flush(this,t):(Rye(this,t),Mj(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Ut(Qs(t),r=>n[r].stop(!!e))}else bv(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(Ve.und(e))this.start({pause:!0});else{const t=this.springs;Ut(Qs(e),n=>t[n].pause())}return this}resume(e){if(Ve.und(e))this.start({pause:!1});else{const t=this.springs;Ut(Qs(e),n=>t[n].resume())}return this}each(e){gl(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,s0(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const a=!r&&this._started,o=s||a&&n.size?this.get():null;s&&t.size&&s0(t,([l,c])=>{c.value=o,l(c,this,this._item)}),a&&(this._started=!1,s0(n,([l,c])=>{c.value=o,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;qt.onFrame(this._onFrame)}};function Mj(e,t){return Promise.all(t.map(n=>Tye(e,n))).then(n=>YL(e,n))}async function Tye(e,t,n){const{keys:r,to:s,from:a,loop:o,onRest:l,onResolve:c}=t,u=Ve.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),a===!1&&(t.from=null);const d=Ve.arr(s)||Ve.fun(s)?s:void 0;d?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):Ut(tgt,y=>{const v=t[y];if(Ve.fun(v)){const x=e._events[y];t[y]=({finished:b,cancelled:_})=>{const w=x.get(v);w?(b||(w.finished=!1),_&&(w.cancelled=!0)):x.set(v,{value:null,finished:b||!1,cancelled:_||!1})},u&&(u[y]=t[y])}});const m=e._state;t.pause===!m.paused?(m.paused=t.pause,Sy(t.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(t.pause=!0);const p=(r||Object.keys(e.springs)).map(y=>e.springs[y].start(t)),h=t.cancel===!0||yye(t,"cancel")===!0;(d||h&&m.asyncId)&&p.push(bye(++e._lastAsyncId,{props:t,state:m,actions:{pause:vj,resume:vj,start(y,v){h?(bv(m,e._lastAsyncId),v(tp(e))):(y.onRest=l,v(wye(d,y,m,e)))}}})),m.paused&&await new Promise(y=>{m.resumeQueue.add(y)});const g=YL(e,await Promise.all(p));if(o&&g.finished&&!(n&&g.noop)){const y=Mye(t,o,s);if(y)return Rye(e,[y]),Tye(e,y,!0)}return c&&qt.batchedUpdates(()=>c(g,e,e.item)),g}function kj(e,t){const n={...e.springs};return t&&Ut(Qs(t),r=>{Ve.und(r.keys)&&(r=_v(r)),Ve.obj(r.to)||(r={...r,to:void 0}),jye(n,r,s=>Aye(s))}),Nye(e,n),n}function Nye(e,t){gl(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,ag(n,e))})}function Aye(e,t){const n=new Zht;return n.key=e,t&&ag(n,t),n}function jye(e,t,n){t.keys&&Ut(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Rye(e,t){Ut(t,n=>{jye(e.springs,n,r=>Aye(r,e))})}var X1=({children:e,...t})=>{const n=f.useContext(H2),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=Pht(()=>({pause:r,immediate:s}),[r,s]);const{Provider:a}=H2;return f.createElement(a,{value:t},e)},H2=rgt(X1,{});X1.Provider=H2.Provider;X1.Consumer=H2.Consumer;function rgt(e,t){return Object.assign(e,f.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var Iye=()=>{const e=[],t=function(r){Rht();const s=[];return Ut(e,(a,o)=>{if(Ve.und(r))s.push(a.start());else{const l=n(r,a,o);l&&s.push(a.start(l))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Ut(e,r=>r.pause(...arguments)),this},t.resume=function(){return Ut(e,r=>r.resume(...arguments)),this},t.set=function(r){Ut(e,(s,a)=>{const o=Ve.fun(r)?r(a,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return Ut(e,(a,o)=>{if(Ve.und(r))s.push(a.start());else{const l=this._getProps(r,a,o);l&&s.push(a.start(l))}}),s},t.stop=function(){return Ut(e,r=>r.stop(...arguments)),this},t.update=function(r){return Ut(e,(s,a)=>s.update(this._getProps(r,s,a))),this};const n=function(r,s,a){return Ve.fun(r)?r(a,s):r};return t._getProps=n,t};function sgt(e,t,n){const r=Ve.fun(t)&&t;r&&!n&&(n=[]);const s=f.useMemo(()=>r||arguments.length==3?Iye():void 0,[]),a=f.useRef(0),o=zL(),l=f.useMemo(()=>({ctrls:[],queue:[],flush(x,b){const _=kj(x,b);return a.current>0&&!l.queue.length&&!Object.keys(_).some(C=>!x.springs[C])?Mj(x,b):new Promise(C=>{Nye(x,_),l.queue.push(()=>{C(Mj(x,b))}),o()})}}),[]),c=f.useRef([...l.ctrls]),u=[],d=bj(e)||0;f.useMemo(()=>{Ut(c.current.slice(e,d),x=>{Cj(x,s),x.stop(!0)}),c.current.length=e,m(d,e)},[e]),f.useMemo(()=>{m(0,Math.min(d,e))},n);function m(x,b){for(let _=x;_<b;_++){const w=c.current[_]||(c.current[_]=new kye(null,l.flush)),C=r?r(_,w):t[_];C&&(u[_]=Jht(C))}}const p=c.current.map((x,b)=>kj(x,u[b])),h=f.useContext(X1),g=bj(h),y=h!==g&&vye(h);Nd(()=>{a.current++,l.ctrls=c.current;const{queue:x}=l;x.length&&(l.queue=[],Ut(x,b=>b())),Ut(c.current,(b,_)=>{s?.add(b),y&&b.start({default:h});const w=u[_];w&&(xye(b,w.ref),b.ref?b.queue.push(w):b.start(w))})}),GL(()=>()=>{Ut(l.ctrls,x=>x.stop(!0))});const v=p.map(x=>({...x}));return s?[v,s]:v}function Pye(e,t){const n=Ve.fun(e),[[r],s]=sgt(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}function Oye(e,t,n){const r=Ve.fun(t)&&t,{reset:s,sort:a,trail:o=0,expires:l=!0,exitBeforeEnter:c=!1,onDestroyed:u,ref:d,config:m}=r?r():t,p=f.useMemo(()=>r||arguments.length==3?Iye():void 0,[]),h=Qs(e),g=[],y=f.useRef(null),v=s?null:y.current;Nd(()=>{y.current=g}),GL(()=>(Ut(g,P=>{p?.add(P.ctrl),P.ctrl.ref=p}),()=>{Ut(y.current,P=>{P.expired&&clearTimeout(P.expirationId),Cj(P.ctrl,p),P.ctrl.stop(!0)})}));const x=ogt(h,r?r():t,v),b=s&&y.current||[];Nd(()=>Ut(b,({ctrl:P,item:N,key:I})=>{Cj(P,p),ya(u,N,I)}));const _=[];if(v&&Ut(v,(P,N)=>{P.expired?(clearTimeout(P.expirationId),b.push(P)):(N=_[N]=x.indexOf(P.key),~N&&(g[N]=P))}),Ut(h,(P,N)=>{g[N]||(g[N]={key:x[N],item:P,phase:"mount",ctrl:new kye},g[N].ctrl.item=P)}),_.length){let P=-1;const{leave:N}=r?r():t;Ut(_,(I,D)=>{const F=v[D];~I?(P=g.indexOf(F),g[P]={...F,item:h[I]}):N&&g.splice(++P,0,F)})}Ve.fun(a)&&g.sort((P,N)=>a(P.item,N.item));let w=-o;const C=zL(),S=d3(t),E=new Map,M=f.useRef(new Map),k=f.useRef(!1);Ut(g,(P,N)=>{const I=P.key,D=P.phase,F=r?r():t;let B,V;const $=ya(F.delay||0,I);if(D=="mount")B=F.enter,V="enter";else{const W=x.indexOf(I)<0;if(D!="leave")if(W)B=F.leave,V="leave";else if(B=F.update)V="update";else return;else if(!W)B=F.enter,V="enter";else return}if(B=ya(B,P.item,N),B=Ve.obj(B)?KL(B):{to:B},!B.config){const W=m||S.config;B.config=ya(W,P.item,N,V)}w+=o;const G={...S,delay:$+w,ref:d,immediate:F.immediate,reset:!1,...B};if(V=="enter"&&Ve.und(G.from)){const W=r?r():t,H=Ve.und(W.initial)||v?W.from:W.initial;G.from=ya(H,P.item,N)}const{onResolve:X}=G;G.onResolve=W=>{ya(X,W);const H=y.current,Z=H.find(re=>re.key===I);if(Z&&!(W.cancelled&&Z.phase!="update")&&Z.ctrl.idle){const re=H.every(q=>q.ctrl.idle);if(Z.phase=="leave"){const q=ya(l,Z.item);if(q!==!1){const J=q===!0?0:q;if(Z.expired=!0,!re&&J>0){J<=2147483647&&(Z.expirationId=setTimeout(C,J));return}}}re&&H.some(q=>q.expired)&&(M.current.delete(Z),c&&(k.current=!0),C())}};const Y=kj(P.ctrl,G);V==="leave"&&c?M.current.set(P,{phase:V,springs:Y,payload:G}):E.set(P,{phase:V,springs:Y,payload:G})});const T=f.useContext(X1),j=bj(T),R=T!==j&&vye(T);Nd(()=>{R&&Ut(g,P=>{P.ctrl.start({default:T})})},[T]),Ut(E,(P,N)=>{if(M.current.size){const I=g.findIndex(D=>D.key===N.key);g.splice(I,1)}}),Nd(()=>{Ut(M.current.size?M.current:E,({phase:P,payload:N},I)=>{const{ctrl:D}=I;I.phase=P,p?.add(D),R&&P=="enter"&&D.start({default:T}),N&&(xye(D,N.ref),(D.ref||p)&&!k.current?D.update(N):(D.start(N),k.current&&(k.current=!1)))})},s?void 0:n);const O=P=>f.createElement(f.Fragment,null,g.map((N,I)=>{const{springs:D}=E.get(N)||N.ctrl,F=P({...D},N.item,N,I);return F&&F.type?f.createElement(F.type,{...F.props,key:Ve.str(N.key)||Ve.num(N.key)?N.key:N.ctrl.id,ref:F.ref}):F}));return p?[O,p]:O}var agt=1;function ogt(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(a=>{const o=r&&r.find(l=>l.item===a&&l.phase!=="leave"&&!s.has(l));return o?(s.add(o),o.key):agt++})}return Ve.und(n)?e:Ve.fun(n)?e.map(n):Qs(n)}var Lye=class extends QL{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=mv(...t);const n=this._get(),r=_j(n);qL(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Wl(t,n)||(Ui(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&eQ(this._active)&&sT(this)}_get(){const e=Ve.arr(this.source)?this.source.map(ga):Qs(ga(this.source));return this.calc(...e)}_start(){this.idle&&!eQ(this._active)&&(this.idle=!1,Ut(c3(this),e=>{e.done=!1}),gi.skipAnimation?(qt.batchedUpdates(()=>this.advance()),sT(this)):a3.start(this))}_attach(){let e=1;Ut(Qs(this.source),t=>{wo(t)&&ag(t,this),Ej(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Ut(Qs(this.source),e=>{wo(e)&&gv(e,this)}),this._active.clear(),sT(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Qs(this.source).reduce((t,n)=>Math.max(t,(Ej(n)?n.priority:0)+1),0))}};function igt(e){return e.idle!==!1}function eQ(e){return!e.size||Array.from(e).every(igt)}function sT(e){e.idle||(e.idle=!0,Ut(c3(e),t=>{t.done=!0}),hv(e,{type:"idle",parent:e}))}var lgt=(e,...t)=>new Lye(e,t);gi.assign({createStringInterpolator:fye,to:(e,t)=>new Lye(e,t)});var Dye=/^--/;function cgt(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Dye.test(e)&&!(i0.hasOwnProperty(e)&&i0[e])?t+"px":(""+t).trim()}var tQ={};function ugt(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:a,scrollTop:o,scrollLeft:l,viewBox:c,...u}=t,d=Object.values(u),m=Object.keys(u).map(p=>n||e.hasAttribute(p)?p:tQ[p]||(tQ[p]=p.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));a!==void 0&&(e.textContent=a);for(const p in s)if(s.hasOwnProperty(p)){const h=cgt(p,s[p]);Dye.test(p)?e.style.setProperty(p,h):e.style[p]=h}m.forEach((p,h)=>{e.setAttribute(p,d[h])}),r!==void 0&&(e.className=r),o!==void 0&&(e.scrollTop=o),l!==void 0&&(e.scrollLeft=l),c!==void 0&&e.setAttribute("viewBox",c)}var i0={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dgt=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),fgt=["Webkit","Ms","Moz","O"];i0=Object.keys(i0).reduce((e,t)=>(fgt.forEach(n=>e[dgt(n,t)]=e[t]),e),i0);var mgt=/^(matrix|translate|scale|rotate|skew)/,pgt=/^(translate)/,hgt=/^(rotate|skew)/,aT=(e,t)=>Ve.num(e)&&e!==0?e+t:e,rw=(e,t)=>Ve.arr(e)?e.every(n=>rw(n,t)):Ve.num(e)?e===t:parseFloat(e)===t,ggt=class extends u3{constructor({x:e,y:t,z:n,...r}){const s=[],a=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),a.push(o=>[`translate3d(${o.map(l=>aT(l,"px")).join(",")})`,rw(o,0)])),gl(r,(o,l)=>{if(l==="transform")s.push([o||""]),a.push(c=>[c,c===""]);else if(mgt.test(l)){if(delete r[l],Ve.und(o))return;const c=pgt.test(l)?"px":hgt.test(l)?"deg":"";s.push(Qs(o)),a.push(l==="rotate3d"?([u,d,m,p])=>[`rotate3d(${u},${d},${m},${aT(p,c)})`,rw(p,0)]:u=>[`${l}(${u.map(d=>aT(d,c)).join(",")})`,rw(u,l.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new ygt(s,a)),super(r)}},ygt=class extends cye{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Ut(this.inputs,(n,r)=>{const s=ga(n[0]),[a,o]=this.transforms[r](Ve.arr(s)?s:n.map(ga));e+=" "+a,t=t&&o}),t?"none":e}observerAdded(e){e==1&&Ut(this.inputs,t=>Ut(t,n=>wo(n)&&ag(n,this)))}observerRemoved(e){e==0&&Ut(this.inputs,t=>Ut(t,n=>wo(n)&&gv(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),hv(this,e)}},vgt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];gi.assign({batchedUpdates:xs.unstable_batchedUpdates,createStringInterpolator:fye,colors:uht});var xgt=Wht(vgt,{applyAnimatedValues:ugt,createAnimatedStyle:e=>new ggt(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),l0=xgt.animated;function nQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function bgt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nQ(Object(n),!0).forEach(function(r){_gt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nQ(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c0(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c0=function(t){return typeof t}:c0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c0(e)}function _gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z2(){return z2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z2.apply(this,arguments)}function wgt(e,t){if(e){if(typeof e=="string")return rQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rQ(e,t)}}function rQ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fye(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=wgt(e))||t){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}}}function Cgt(e,t){var n=[],r=[];function s(a,o){if(a.length===1)n.push(a[0]),r.push(a[0]);else{for(var l=Array(a.length-1),c=0;c<l.length;c++)c===0&&n.push(a[0]),c===l.length-1&&r.push(a[c+1]),l[c]=[(1-o)*a[c][0]+o*a[c+1][0],(1-o)*a[c][1]+o*a[c+1][1]];s(l,o)}}return e.length&&s(e,t),{left:n,right:r.reverse()}}function Sgt(e){var t={};return e.length===4&&(t.x2=e[2][0],t.y2=e[2][1]),e.length>=3&&(t.x1=e[1][0],t.y1=e[1][1]),t.x=e[e.length-1][0],t.y=e[e.length-1][1],e.length===4?t.type="C":e.length===3?t.type="Q":t.type="L",t}function Egt(e,t){t=t||2;for(var n=[],r=e,s=1/t,a=0;a<t-1;a++){var o=s/(1-s*a),l=Cgt(r,o);n.push(l.left),r=l.right}return n.push(r),n}function Mgt(e,t,n){var r=[[e.x,e.y]];return t.x1!=null&&r.push([t.x1,t.y1]),t.x2!=null&&r.push([t.x2,t.y2]),r.push([t.x,t.y]),Egt(r,n).map(Sgt)}var kgt=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,np={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(np).forEach(function(e){np[e.toLowerCase()]=np[e]});function Tj(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t;return n}function Tgt(e){return"".concat(e.type).concat(np[e.type].map(function(t){return e[t]}).join(","))}function Ngt(e,t){var n={x1:"x",y1:"y",x2:"x",y2:"y"},r=["xAxisRotation","largeArcFlag","sweepFlag"];if(e.type!==t.type&&t.type.toUpperCase()!=="M"){var s={};Object.keys(t).forEach(function(a){var o=t[a],l=e[a];l===void 0&&(r.includes(a)?l=o:(l===void 0&&n[a]&&(l=e[n[a]]),l===void 0&&(l=0))),s[a]=l}),s.type=t.type,e=s}return e}function Agt(e,t,n){var r=[];if(t.type==="L"||t.type==="Q"||t.type==="C")r=r.concat(Mgt(e,t,n));else{var s=z2({},e);s.type==="M"&&(s.type="L"),r=r.concat(Tj(n-1).map(function(){return s})),r.push(t)}return r}function sQ(e,t,n){var r=e.length-1,s=t.length-1,a=r/s,o=Tj(s).reduce(function(c,u,d){var m=Math.floor(a*d);if(n&&m<e.length-1&&n(e[m],e[m+1])){var p=a*d%1<.5;c[m]&&(p?m>0?m-=1:m<e.length-1&&(m+=1):m<e.length-1?m+=1:m>0&&(m-=1))}return c[m]=(c[m]||0)+1,c},[]),l=o.reduce(function(c,u,d){if(d===e.length-1){var m=Tj(u,z2({},e[e.length-1]));return m[0].type==="M"&&m.forEach(function(p){p.type="L"}),c.concat(m)}return c.concat(Agt(e[d],e[d+1],u))},[]);return l.unshift(e[0]),l}function aQ(e){for(var t=(e||"").match(kgt)||[],n=[],r,s,a=0;a<t.length;++a)if(r=np[t[a]],r){s={type:t[a]};for(var o=0;o<r.length;++o)s[r[o]]=+t[a+o+1];a+=r.length,n.push(s)}return n}function jgt(e,t,n){var r=e==null?[]:e.slice(),s=t==null?[]:t.slice(),a=c0(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},o=a.excludeSegment,l=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return[]};var c=(r.length===0||r[r.length-1].type==="Z")&&(s.length===0||s[s.length-1].type==="Z");r.length>0&&r[r.length-1].type==="Z"&&r.pop(),s.length>0&&s[s.length-1].type==="Z"&&s.pop(),r.length?s.length||s.push(r[0]):r.push(s[0]);var u=Math.abs(s.length-r.length);u!==0&&(s.length>r.length?r=sQ(r,s,o):s.length<r.length&&(s=sQ(s,r,o))),r=r.map(function(m,p){return Ngt(m,s[p])});var d=r.map(function(m){return bgt({},m)});return c&&(d.push({type:"Z"}),r.push({type:"Z"})),function(p){if(p===1&&l)return t??[];if(p===0)return r;for(var h=0;h<d.length;++h){var g=r[h],y=s[h],v=d[h],x=Fye(np[v.type]),b;try{for(x.s();!(b=x.n()).done;){var _=b.value;v[_]=(1-p)*g[_]+p*y[_],(_==="largeArcFlag"||_==="sweepFlag")&&(v[_]=Math.round(v[_]))}}catch(w){x.e(w)}finally{x.f()}}return d}}function Rgt(e,t,n){var r=aQ(e),s=aQ(t),a=c0(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},o=a.excludeSegment,l=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return""};var c=jgt(r,s,{excludeSegment:o,snapEndsToInput:l});return function(d){if(d===1&&l)return t??"";var m=c(d),p="",h=Fye(m),g;try{for(h.s();!(g=h.n()).done;){var y=g.value;p+=Tgt(y)}}catch(v){h.e(v)}finally{h.f()}return p}}const sVt=Ict,aVt="geometricPrecision",oVt="pointer-events-none overflow-visible font-sans",Uye=200,iVt="relative isolate select-none touch-none touch-pan-down",lVt={duration:.2,delay:Uye/1e3,ease:_a},cVt={opacity:0,transition:{duration:0,delay:0}},uVt=4,dVt=3,Bye={blue:"oklch(var(--positive-color))",red:"oklch(var(--negative-color))",gray:"oklch(var(--foreground-quieter-color))",black:"oklch(var(--foreground-color))",transparent:"#00000000"},Igt=16,Vye=-5,Pgt={fill:Bye.gray,fontSize:12,dy:`${Vye}px`,textAnchor:"start",fontFamily:"var(--font-family-sans)"},fVt=e=>U("transition-opacity duration-500",{"opacity-0":e}),Ogt=({tick:e,history:t,yScale:n,xScale:r,xOffset:s,yOffset:a,yHeight:o,yWidth:l,yGet:c,baseline:u})=>{if(!t||t.length===0)return!1;const m=n(e)+a,p=m-o;if(Number.isFinite(u)){const g=n(u);if(g>=p&&g<=m)return!0}const h=s+l;for(let g=0;g<t.length;g++){const y=t[g],v=r(Wye(y));if(!v||v<s)continue;if(v>h)break;const x=n(c(y));if(x>=p&&x<=m)return!0}return!1},mVt=({tick:e,history:t,yScale:n,xScale:r,yGet:s,baseline:a})=>({...Pgt,opacity:Ogt({tick:e,history:t,yScale:n,xScale:r,xOffset:Igt+5,yOffset:Vye,yHeight:16,yWidth:25,yGet:s,baseline:a})?.4:1}),pVt={fill:Bye.gray,fontSize:12,textAnchor:"start",dx:"6px",fontFamily:"var(--font-family-sans)"},Im={POSITIVE:"positive",NEGATIVE:"negative",NEUTRAL:"neutral",TRANSPARENT:"transparent"},Nj={[Im.POSITIVE]:"blue",[Im.NEGATIVE]:"red",[Im.NEUTRAL]:"gray",[Im.TRANSPARENT]:"transparent"},hVt=e=>e.date,Lgt=e=>new Date(e),Wye=e=>Lgt(e.date),Dgt=e=>{const t=e.match(/(\d{2}):(\d{2})/);return t?t[0]:void 0},gVt=(e,t)=>t?e.replace(/T\d{2}:\d{2}/,`T${t}`):e,yVt={lunch_break:{valence:Im.TRANSPARENT,backgroundColor:Nj[Im.TRANSPARENT],backgroundOpacity:0,lineOpacity:0},pre_market:{backgroundOpacity:.5},after_hours:{backgroundOpacity:.5}},vVt={lunch_break:K({defaultMessage:"Lunch Break",id:"tHK2Aeii37"}),pre_market:K({defaultMessage:"Pre-Market",id:"8y93h1dAbn"}),after_hours:K({defaultMessage:"After-Hours",id:"19IROpkyrs"})},xVt=(e,t)=>{const n=Dgt(t);if(n)return e?.find(r=>{const s=r.open,a=r.close;return s<=a?n>=s&&n<=a:n>=s||n<=a})},bVt=e=>({backgroundColor:Nj[e],backgroundOpacity:1,lineColor:Nj[e],lineOpacity:1,valence:e}),Fgt={"1d":{0:0,15:5,30:10},"5d":null,"1m":null,"6m":null,"3m":null,ytd:null,"1y":null,"5y":{0:10},max:null};function Ugt(e){if(!Array.isArray(e)||e.length<22)return new Set;const r=[];let s=0,a=0;const o=[],l=u=>{o.push(u);const d=u-s;s+=d/o.length,a+=d*(u-s)},c=()=>{const u=o.shift(),d=u-s;s-=d/o.length,a-=d*(u-s)};for(let u=1;u<=20;u++){const d=Math.log(e[u].close/e[u-1].close);l(d)}for(let u=21;u<e.length;u++){const d=Math.log(e[u].close/e[u-1].close),m=o.length>1?a/o.length:0,p=Math.sqrt(m),h=p>0&&Number.isFinite(p),g=h?Math.abs((d-s)/p):0;h&&g>20&&r.push(u),c(),l(d)}return new Set(r.map(u=>e[u].date))}const Bgt=(e,t=0)=>{if(t===0||!e?.length)return e;const n=[...e];let r=0;for(let s=0;s<e.length;s++){const a=e[s].close;if(r+=a,s>=t){const l=e[s-t].close;r-=l}const o=s<t?s+1:t;s===0||s===e.length-1||(n[s]={...e[s],close:r/o})}return n},Vgt=(e,t)=>{const n=Fgt[t];if(!n)return e;const r=Object.keys(n).reduce((s,a)=>Math.abs(e.length-+s)<Math.abs(e.length-+a)?+s:+a,0);return Bgt(e,n[r]??0)},_Vt=(e,t=!0)=>{const n=f.useRef(e),r=f.useRef(e),s=!t||!n.current||!r.current,[a,o]=Pye(()=>({t:0,immediate:s,easing:wu}));return f.useEffect(()=>{r.current!==e&&(n.current=r.current,r.current=e,t&&o.start({from:{t:0},to:{t:1},config:{duration:Uye}}))},[e,t,o]),t?a.t.to(l=>n.current===r.current?e:Rgt(n.current,r.current)(l)):e},Wgt=e=>e?.includes?.("00:00:00"),wVt=(e,t,n)=>{if(!e)return null;const r=new Date(e),s=!Wgt(e);return r.toLocaleString(t,{month:"short",day:"numeric",timeZone:n,minute:s?"2-digit":void 0,hour:s?"numeric":void 0,year:s?void 0:"numeric",timeZoneName:s?"short":void 0})},CVt=(e,t,n)=>new Intl.NumberFormat(n,{style:t?"currency":"decimal",currency:t??void 0,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),$gt=WE(e=>Wye(e)).left,Hgt=(e,t)=>{if("invert"in e)return e.invert(t);const n=e.step(),r=e.domain(),s=e.range()[0],a=Math.round((t-s)/n);return r[Math.max(0,Math.min(r.length-1,a))]};function SVt(e,t,n){const r=Math.max(0,e),s=$gt(n,Hgt(t,r),0);return{d:n[s]??n[n.length-1],index:s,x:r}}const $p=A.memo(({countryCode:e,square:t,...n})=>{const r=e??"NEU",s=t?`square/${r}`:r;return i.jsx("img",{src:`https://r2cdn.perplexity.ai/images/country_flags/${s}.svg`,alt:e??"NEU",...n})});$p.displayName="CountryFlag";const zgt={COMMODITY:"",FOREX:"FX",INDEX:"INDEX",CRYPTO:"CRYPTO"},Ggt=A.memo(({price:e,currency:t,sign:n,variant:r="small",animated:s=!0,className:a})=>{const o=f.useMemo(()=>({style:t?"currency":"decimal",currency:t||void 0,minimumFractionDigits:e<1e3?2:0,maximumFractionDigits:2,signDisplay:n?"exceptZero":void 0}),[t,e,n]);return i.jsx(L,{variant:r,color:"light",className:a,children:i.jsx(ii,{value:e,format:o,animated:s})})});Ggt.displayName="Price";const EVt=({name:e,variant:t="smallBold"})=>e?i.jsx(L,{variant:t,className:"min-w-0 truncate break-words",as:"span",children:e}):null,qgt=({symbol:e,exchange:t,country:n,gap:r="xs"})=>{const s=f.useMemo(()=>e&&decodeURIComponent(e).split(".")[0],[e]),a=f.useMemo(()=>t&&(zgt[t]??t),[t]);if(!s)return null;if(!a)return s;const o=n||null;return i.jsxs(gc,{className:U("whitespace-nowrap",{"gap-xs":r==="xs","gap-sm":r==="sm"}),children:[i.jsx(br,{id:"symbol",children:s}),i.jsx(br,{id:"exchange",children:a}),o&&i.jsx(br,{id:"country",children:i.jsxs("div",{className:"relative flex w-[1.2em] shrink-0 items-center",children:[i.jsx($p,{countryCode:o}),i.jsx("div",{className:"absolute inset-0 border border-black/10 dark:border-0"})]})})]})},MVt=({symbol:e,children:t,className:n})=>{const{inApp:r}=_l(),s=Dt(),a=PL({href:`/finance/${e}`,inApp:r,queryParams:s});return i.jsx(Ye,{href:a,className:U("py-sm px-md hover:bg-subtler block border-b duration-150 last:border-b-0",n),children:t})},$ye=e=>{const{trackEvent:t}=Me(),n=f.useCallback((r,s)=>{switch(e){case"discover":t("discover home widget clicked",{widgetType:r,destinationUrl:s});break;case"market":case"crypto":t("finance homepage widget clicked",{pageType:e,widgetType:r,destinationUrl:s});break}},[t,e]);return f.useMemo(()=>({onClick:n}),[n])},kVt=({enter:e,exit:t})=>{const{trackEvent:n}=Me(),r=f.useRef(performance.now()),s=f.useRef(!0);f.useEffect(()=>{n(e,{});const a=()=>{s.current&&n(t,{timeOnPageMs:Math.ceil(performance.now()-r.current)})},o=()=>{document.hidden?(a(),s.current=!1):(r.current=performance.now(),s.current=!0)};return document.addEventListener("visibilitychange",o),window.addEventListener("beforeunload",a),()=>{document.removeEventListener("visibilitychange",o),window.removeEventListener("beforeunload",a),a()}},[n,e,t])},Kgt=(e,t,n)=>{const r=()=>{t.removeEventListener("scrollend",r),n?.()};n&&t.addEventListener("scrollend",r),t.scrollTo({top:e,behavior:"smooth"})},Ygt=60;function G2(e){const t=e.scrollHeight,n=e.clientHeight,r=e.scrollTop;return Math.abs(t-n-r)<=1}const Qgt=()=>{const{scrollContainerRef:e}=Bo(),t=f.useCallback(()=>{if(!e?.current)return;const n=e.current,r=n.querySelector("#coin50-section");if(!r)return;const s=r.getBoundingClientRect().top,a=n.scrollTop,o=s+a-Ygt;Kgt(o,n)},[e]);return f.useMemo(()=>({scrollToCoin50Section:t}),[t])},Hye="#1FB8CD",zye="#B4413C",Xgt=[Hye,"#FFC185",zye,"#ECEBD5","#5D878F","#DB4545","#D2BA4C","#964325"],Gye="#20808D",qye="#A84B2F",Zgt=[Gye,qye,"#1B474D","#BCE2E7","#944454","#FFC553","#848456","#6E522B"],Jgt={tickColor:"#2F3031",axisColor:"#2F3031",textColor:"#aaaaaa",colorSchema:Xgt},eyt={tickColor:"#D9D9D0",axisColor:"#D9D9D0",textColor:"#A0A0A0",colorSchema:Zgt},f3=(e="sm")=>{const[t,n]=f.useState(e);f.useEffect(()=>{const c=()=>{window.innerWidth>=1536?n("2xl"):window.innerWidth>=1280?n("xl"):window.innerWidth>=1024?n("lg"):window.innerWidth>=768?n("md"):window.innerWidth>=640&&n("sm")};return window.addEventListener("resize",c),c(),()=>window.removeEventListener("resize",c)},[]);const r=!0,s=["md","lg","xl","2xl"].includes(t),a=["lg","xl","2xl"].includes(t),o=["xl","2xl"].includes(t),l=["2xl"].includes(t);return f.useMemo(()=>({breakpoint:t,isSmallScreen:r,isMediumScreen:s,isLargeScreen:a,isXLargeScreen:o,is2XLargeScreen:l}),[t,l,a,s,r,o])},u0=e=>new Date(e.date),oT=e=>e.close,tyt={blue:Hye,red:zye},nyt={blue:Gye,red:qye},XL=A.memo(({history:e,symbol:t,valence:n,width:r=150,height:s=25,strokeWidth:a=1.2,className:o})=>{const{colorScheme:l}=Pr(),c=f.useMemo(()=>{const v=[...e],x=Ugt(v),b=v.filter(_=>!x.has(_.date));return Vgt(b,"1d")},[e]),u=f.useMemo(()=>{const v=l==="dark"?tyt:nyt;return n==="positive"?v.blue:v.red},[l,n]),d=f.useMemo(()=>q1({domain:Jl(c,u0),range:[0,r]}),[c,r]),m=f.useMemo(()=>Bp({domain:Jl(c,oT),range:[s,0]}),[c,s]),p=f.useMemo(()=>Lf().x(v=>d(u0(v))??0).y(v=>m(oT(v))??0).curve(Rct),[d,m]),h=f.useMemo(()=>p(c),[p,c]),g=f.useCallback(v=>d(u0(v))??0,[d]),y=f.useCallback(v=>m(oT(v))??0,[m]);return i.jsxs("svg",{height:s,width:r,viewBox:`0 0 ${r} ${s}`,className:U("overflow-visible",o),children:[i.jsx("path",{d:h,stroke:u,strokeWidth:a,fill:"none",shapeRendering:"geometricPrecision"}),i.jsx(VE,{from:`${u}22`,to:`${u}00`,id:`ticker-line-${t}`}),i.jsx(Vp,{data:c,x:g,y,yScale:m,fill:`url(#ticker-line-${t})`})]})});XL.displayName="TickerLine";const ryt=({ticker:e,showExchange:t})=>{const{onClick:n}=$ye("crypto"),{scrollToCoin50Section:r}=Qgt(),s=()=>{n("top_indices","scroll"),r()};return i.jsx("div",{className:"min-w-0 shrink-0 cursor-pointer",onClick:s,children:i.jsx(m3,{symbol:e.symbol,currency:e.currency,name:e.name,price:e.price,change:e.change,history:e.history,showExchange:t})})},syt=({ticker:e,marketType:t,showExchange:n})=>{const{onClick:r}=$ye(t),s=f.useCallback(()=>{r("top_indices",`/finance/${e.symbol}`)},[r,e.symbol]);return i.jsx(Du,{href:`/finance/${e.symbol}`,className:"min-w-0 shrink-0",onClick:s,children:i.jsx(m3,{currency:e.currency,symbol:e.symbol,exchange:e.exchange,name:e.name,price:e.price,change:e.change,history:e.history,showExchange:n})})},ayt=e=>{const{country:t}=Zpt();return $e({queryKey:dlt(e,"1d",t),queryFn:()=>flt({groupId:e,historyPeriod:"1d",country:t}),refetchInterval:1e3*30})},oyt=A.memo(({groupId:e,className:t})=>{const{data:n,isLoading:r}=ayt(e);return i.jsx(Kye,{groupId:e,data:n,isLoading:r,className:t})});oyt.displayName="KeyTickersWithQuery";const Kye=A.memo(({groupId:e,className:t,data:n,isLoading:r,showExchange:s=!0})=>(_1("mini-graphs",{skip:!n}),i.jsxs("div",{className:t,children:[n?.map(a=>i.jsx(z,{children:a.symbol==="COIN50USD"?i.jsx(ryt,{ticker:a,showExchange:s}):i.jsx(syt,{ticker:a,marketType:e,showExchange:s})},`markets-${a.symbol}`)),r&&[1,2,3,4].map(a=>i.jsx(Yye,{},a))]})));Kye.displayName="KeyTickers";const m3=A.memo(({symbol:e,name:t,currency:n,price:r,change:s,history:a,exchange:o,showExchange:l})=>{const c=s/(r-s)*100,u=t,{isXLargeScreen:d}=f3(),{isMobileStyle:m}=ye(),p=m&&r>1e6?r/1e6:r,h=m&&r>1e6?"M":"",g=f.useMemo(()=>a?.slice().sort((x,b)=>u0(x).getTime()-u0(b).getTime()),[a]),y=s<0?"negative":"positive",v=f.useMemo(()=>({style:n?"currency":"decimal",currency:n??void 0,trailingZeroDisplay:"stripIfInteger"}),[n]);return i.jsxs(Pn,{className:"py-sm gap-xs hover:shadow-subtle flex select-none flex-col transition-all duration-200 hover:scale-[1.02]",children:[i.jsxs("div",{className:"px-sm min-w-0",children:[i.jsxs("div",{className:"gap-xs flex min-w-0 items-center justify-between",children:[i.jsx(L,{variant:"smallBold",className:"min-w-0 truncate",children:u}),i.jsx(B2,{className:"translate-x-xs",change:c,variant:"tiny",includeIcon:!0})]}),i.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[i.jsx(L,{variant:"micro",color:"light",className:"whitespace-nowrap",children:i.jsx(qgt,{symbol:e,exchange:!m&&l?o:void 0})}),i.jsx(B2,{className:"-translate-x-two mt-px",change:s*100,background:!1,variant:"micro",format:v})]})]}),g&&g.length>0&&i.jsx("div",{className:"my-sm flex w-full",children:i.jsx("div",{className:"px-sm flex flex-1",children:i.jsx(XL,{history:g,symbol:e,valence:y,className:"h-auto w-0 flex-1",strokeWidth:d?1.6:1})})}),i.jsx(L,{variant:"baseSemi",className:"px-sm -mb-xs -mt-xs",children:i.jsx(OL,{value:p,format:v,suffix:h})})]})});m3.displayName="KeyTicker";const Yye=A.memo(()=>{const e=f.useMemo(()=>[{date:"2025-01-01",close:100},{date:"2025-01-02",close:100}],[]);return i.jsxs(wn,{className:"pointer-events-none relative","aria-hidden":"true",children:[i.jsx("div",{className:"invisible",children:i.jsx(m3,{symbol:"XXX",name:"XXX",price:100,change:100,history:e})}),i.jsx("div",{className:"absolute inset-0",children:i.jsxs(Pn,{className:"py-sm gap-xs flex h-full flex-col",children:[i.jsxs("div",{className:"px-sm",children:[i.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-4 w-3/5 max-w-24 rounded"}),i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-5 w-1/4 max-w-12 rounded-full"})]}),i.jsxs("div",{className:"gap-sm mt-xs flex items-center justify-between",children:[i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-3 w-1/4 max-w-10 rounded"}),i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-3 w-1/3 max-w-14 rounded"})]})]}),i.jsx("div",{className:"mx-sm my-xs flex-1",children:i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus size-full rounded"})}),i.jsx("div",{className:"px-sm",children:i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-5 w-2/5 max-w-20 rounded"})})]})})]})});Yye.displayName="KeyTickerSkeleton";const ZL=A.memo(({widgetId:e,showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=Q(),{symbol:a,quote:o,prices:l,isLoading:c,updateStockSettings:u}=nct(e,r),d=f.useCallback(b=>{u({symbol:b,version:1})},[u]),m=f.useMemo(()=>({style:"currency",currency:o.currency??"USD",minimumFractionDigits:o.price<1e3?2:0,maximumFractionDigits:2}),[o]),p=l[0]?.entries,h=p?.[0]?.price,g=p?.[p.length-1]?.price,y=g&&g>(o?.previousClose??h)?"positive":"negative",v=i.jsx("div",{className:U("h-full transform-gpu rounded-2xl"),children:i.jsxs("div",{className:"gap-xs flex h-full flex-1 flex-col justify-between p-2.5 pb-0 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[i.jsxs("div",{className:"flex flex-col gap-px",children:[i.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[i.jsx(L,{variant:"smallBold",className:"min-w-0 truncate",children:a}),o&&!c&&typeof o.changesPercentage=="number"&&i.jsx(B2,{change:o.changesPercentage,variant:"micro",includeIcon:!0,className:"-translate-y-0.5 translate-x-0.5 rounded-md"})]}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate whitespace-nowrap",children:c?s({defaultMessage:"Loading...",id:"gjBiyjshwX"}):o?.name||a})]}),ea(l)&&ea(l[0]?.entries)&&o?.price&&typeof o.price=="number"&&i.jsx("div",{className:"pointer-events-none",children:i.jsx(XL,{history:p?.map(b=>({date:b.date,close:b.price}))??le,symbol:a,valence:y,width:140,height:60,strokeWidth:1.6,className:"h-auto w-full"})}),o?.price&&typeof o.price=="number"?i.jsx(L,{variant:"section-title",className:"-translate-x-two -translate-y-px",children:i.jsx("span",{className:"font-mono",children:i.jsx(ii,{value:o.price,format:m,animated:!0})})}):o?.price?i.jsx(L,{variant:"page-title",className:"-translate-x-two -translate-y-px",children:i.jsx("span",{className:"font-mono text-xl",children:o.price})}):null]})}),x=f.useCallback(()=>n?.(!1),[n]);return r==="thumbnail"?v:i.jsxs(i.Fragment,{children:[i.jsx(Pn,{shadow:!0,className:"active:!bg-subtler dark:active:!bg-offsetPlus aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:i.jsx(Ye,{draggable:!1,href:`/finance/${a}`,className:"relative block size-full",children:i.jsx("div",{className:"absolute inset-0 select-none",children:v})})}),i.jsx(it,{children:t&&i.jsx(Mhe,{onClose:x,onSelectStock:d,currentSymbol:a})})]})});ZL.displayName="StockWidget";const Aj=A.memo(({hostname:e,title:t,context:n})=>{const r=["teal","maroon","purple","orange","blue"],s=e.split("").reduce((d,m)=>m.charCodeAt(0)+((d<<5)-d),0),a=Math.abs(s)%r.length,o=r[a],l=(t||e)?.[0]?.toUpperCase()??"",c={teal:"bg-[#21808D] dark:bg-[#32B8C6]",maroon:"bg-[#944454] dark:bg-[#FFB3C9]",purple:"bg-[#865D95] dark:bg-[#C48ED8]",orange:"bg-[#DB7100] dark:bg-[#FFAB44]",blue:"bg-[#19789E] dark:bg-[#54B4E3]"},u={teal:"text-[#B1EFF7] dark:text-[#082125]",maroon:"text-[#FFDFE9] dark:text-[#2D171B]",purple:"text-[#FFE4FF] dark:text-[#2E1836]",orange:"text-[#FFE6C8] dark:text-[#3B0F00]",blue:"text-[#CEF4FF] dark:text-[#071F2B]"};return i.jsx("span",{className:`pt-two flex select-none items-center justify-center rounded-full font-sans text-xs font-medium ${c[o]} ${u[o]} ${n==="thumbnail"?"size-4":"size-6"}`,children:l})});Aj.displayName="FaviconFallback";const oQ=4,p3=A.memo(({context:e,disabled:t})=>{const[n,r]=f.useState({}),{data:s=[]}=Npe();if(e==="thumbnail")return i.jsx("div",{className:"gap-sm grid size-full grid-rows-3",children:s.length>=3?s.slice(0,3).map(o=>{const c=new URL(o.url).host;return i.jsx(Ey,{width:"w-16",disabled:t,thumbnail:n[o.url]?i.jsx(Aj,{hostname:c,title:o.title,context:"thumbnail"}):i.jsx("img",{src:J0(o.url),alt:"Favicon",className:"size-full",onError:()=>{r(u=>({...u,[o.url]:!0}))}})},o.url)}):i.jsxs(i.Fragment,{children:[i.jsx(Ey,{width:"w-16",disabled:t}),i.jsx(Ey,{width:"w-12",disabled:t}),i.jsx(Ey,{width:"w-14",disabled:t})]})});const a=Math.max(oQ-s.length,0);return i.jsxs("div",{className:U("flex w-full flex-wrap items-center justify-center gap-3",{"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))]":e==="sortable-widgets"}),children:[s.slice(0,oQ).map(o=>{const c=new URL(o.url).host,u=$ue(c);return i.jsx(pn,{tooltipText:o.title||o.url,tooltipLayout:"bottom",asChild:!0,children:i.jsx(Ye,{href:o.url,children:i.jsxs(Pn,{shadow:!0,className:U("p-sm gap-sm flex w-full select-none items-center rounded-lg border"),bgHover:"subtler",children:[n[o.url]?i.jsx(Aj,{hostname:c,title:o.title}):i.jsx("img",{src:J0(o.url),alt:"Favicon",className:"size-6 rounded-md",onError:()=>{r(d=>({...d,[o.url]:!0}))}}),i.jsx(L,{variant:"tiny",className:"line-clamp-1 text-left capitalize",color:"light",children:u.replace(/\./g," ")})]})})},o.url)}),new Array(a).fill("").map((o,l)=>i.jsx("div",{className:"h-[42px]"},l))]})});p3.displayName="TopMostUrls";const Ey=A.memo(({width:e,thumbnail:t,disabled:n})=>i.jsxs(Pn,{shadow:!0,fullBleed:!0,className:"gap-sm px-sm flex flex-row items-center !rounded-lg",children:[i.jsx("div",{className:U("empty:bg-offsetPlus size-4 overflow-hidden rounded-[4px]",{"opacity-50":n}),children:t}),i.jsx("div",{className:U("bg-offsetPlus h-1.5 rounded-full",e,{"opacity-50":n})})]}));Ey.displayName="TopMostUrlsThumbnailItem";const Qye="weather-widget-cache";function iyt(){try{const e=Ae.getItem(Qye);if(e)return JSON.parse(e)}catch{}return null}function lyt(e){try{Ae.setItem(Qye,JSON.stringify(e))}catch{}}function iQ(e="widget",t="default",n=!1){if(e!=="widget")return{version:1,prefersMetric:n};const r=eg("WEATHER",t);return r?{version:1,prefersMetric:r.prefersMetric??n}:{version:1,prefersMetric:n}}function cyt(e,t="widget",n="default"){t==="widget"&&Rf("WEATHER",n,{version:1,prefersMetric:e.prefersMetric})}function uyt(e="default",t="widget"){const{locale:n}=Q(),{location:r}=$h(),s=r?.latitude??null,a=r?.longitude??null,o=iyt(),l=iQ(t,e,o?.is_metric_preferred),[c,u]=f.useState(l),{data:d,isLoading:m}=$e({queryKey:[EO,s,a].map(String),queryFn:async()=>{const k=await nfe({location:r,locale:n,reason:"weather-comet-home-widget"});return k&&lyt(k),u(T=>{const j=iQ(t,e,k?.is_metric_preferred);return{...T,prefersMetric:j.prefersMetric}}),k},refetchInterval:1e3*60*5,staleTime:1e3*60,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,placeholderData:o}),p="patchy-rain-possible-day",h=c.prefersMetric?16:62,g="Rainy",y="San Francisco, CA",v=d||o,x=v&&v.current&&v.location,b=!!d,_=!!r,w=x?v.current.condition?.icon:p,C=x?c.prefersMetric?v.current.temp_c??h:v.current.temp_f??h:h,S=x?v.current.condition?.text??g:g,E=x?`${v.location.name}${v.location.is_usa&&v.location.region?`, ${v.location.region}`:v.location.country?`, ${v.location.country}`:""}`:y,M=f.useCallback(k=>{u(k),cyt(k,t,e)},[u,t,e]);return f.useMemo(()=>({icon:w,temperature:C,condition:S,locationName:E,isLoading:m,hasError:!1,hasRealData:b,hasLocation:_,weatherSettings:c,updateWeatherSettings:M}),[w,C,S,E,m,b,_,c,M])}const sw=f.memo(({width:e,height:t,variant:n})=>{const[r,s]=f.useState(!1),a=n==="hail"?20:n==="normal"?50:120,o=400,l=n==="hail"?1:20,c=n==="hail"?3:n==="normal"?30:80,u=100,d=n==="hail"?.8:.5,m=n==="hail"?.3:.1,p=s1();return f.useEffect(()=>{s(!0)},[]),!r||p?null:i.jsx("div",{className:"absolute inset-0",children:i.jsx(it,{children:Array.from({length:a}).map((h,g)=>{const y=Math.floor(Math.random()*(e-1)),v=Math.floor(Math.random()*(c-l+1))+l,x=Math.floor(Math.random()*(u+1)),b=Math.random()*(d-m)+m,_=Math.floor(Math.random()*o)+1,w=n==="hail"?v:1;return i.jsxs(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:y,top:0,height:t},className:"absolute",children:[i.jsx("div",{style:{width:w,height:v,animationDuration:o+x+"ms",animationDelay:-_+"ms",animationTimingFunction:"linear",opacity:b,maskImage:n!=="hail"?"linear-gradient(to bottom, transparent, black, transparent)":void 0},className:U("absolute rounded-full bg-white",{"rounded-full":n==="hail"},"animation-weather-rain")}),n!=="hail"&&i.jsx("div",{style:{animationDuration:o+x+"ms",animationDelay:-_+"ms",opacity:b},className:U("-right-two absolute bottom-0 h-px w-[4px] rounded-full bg-white","animation-weather-rain-splash")})]},g)})})})});sw.displayName="Rain";const jj=f.memo(({width:e,height:t,variant:n})=>{const[r,s]=f.useState(!1),a=n==="normal"?50:80,o=n==="normal"?2e3:1e3,l=1,c=8,u=n==="normal"?1500:800,d=.5,m=.1,p=2,h=s1();return f.useEffect(()=>{s(!0)},[]),!r||h?null:i.jsxs("div",{className:"absolute inset-0",children:[i.jsx("div",{className:U("absolute inset-x-0 bottom-0 translate-y-[80%] bg-white opacity-20 blur-sm",{"rounded-m blur-xs -left-xl -right-xl h-lg":n==="heavy"},{"h-md rounded-[50%]":n==="normal"})}),i.jsx(it,{children:Array.from({length:a}).map((g,y)=>{const v=Math.floor(Math.random()*(e-1)),x=Math.floor(Math.random()*(c-l+1))+l,b=Math.floor(Math.random()*(u+1)),_=Math.floor(Math.random()*p)+1,w=Math.random()*(d-m)+m,C=Math.floor(Math.random()*o)+1;return i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:v,top:0,height:t},className:"absolute",children:i.jsx("div",{style:{animationDuration:o+b+"ms",animationTimingFunction:"linear",animationDelay:-C+"ms",opacity:w},className:U("absolute rounded-full bg-white","animation-weather-snow"),children:i.jsx("div",{style:{width:x,height:x,animationDuration:"inherit",maskImage:"radial-gradient(black 20%, transparent)"},className:U("absolute rounded-full bg-white",_===1&&"animation-weather-snow-wave")})})},y)})})]})});jj.displayName="Snow";const Xye=f.memo(({width:e,height:t,context:n})=>{const[r,s]=f.useState(!1),a=70,o=2,l=1,c=2,u=500,d=1e3,m=.5,p=.2,h=s1();return f.useEffect(()=>{s(!0)},[]),!r||h?null:i.jsxs("div",{className:"absolute inset-0",children:[i.jsx(it,{children:Array.from({length:a}).map((g,y)=>{const v=Math.floor(Math.random()*(e-1)),x=Math.floor(Math.random()*(t-1)),b=Math.floor(Math.random()*(o-l+1))+l,_=Math.floor(Math.random()*c)+1,w=Math.floor(Math.random()*(u+1)),C=Math.floor(Math.random()*(d+1)),S=Math.random()*(m-p)+p;return i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:v,top:x},className:"absolute",children:i.jsx("div",{style:{width:b,height:b,animationDuration:5e3+w+"ms",animationDelay:C+"ms",opacity:S},className:U("absolute rounded-full bg-white",{"animation-weather-star-twinkle":_===1})})},y)})}),i.jsx("div",{className:U("w-lg absolute left-0 h-px bg-white","animation-weather-star-shoot",{"context-ntp":n==="ntp"})})]})});Xye.displayName="Stars";const h3=["clear-day","clear-night","partly-cloudy-day","partly-cloudy-night","cloudy-day","cloudy-night","patchy-rain-possible-day","patchy-rain-possible-night","possible-thunder-day","possible-thunder-night","overcast","fog","snow","sleet","patchy-freezing-drizzle","heavy-snow","blizzard","drizzle","hail","light-shower","heavy-rain","lightning-rain","lightning-snow"],q2=A.memo(({variant:e,context:t,className:n})=>{const r=f.useCallback(h=>{switch(h){case"clear-day":default:return["#FF813A","#FFC700","#1F84CD"];case"partly-cloudy-day":return["#8E8E8E","#D5D5D5","#1F84CD"];case"partly-cloudy-night":return["#8E8E8E","#6A6A6A","#0B1B39"];case"cloudy-day":case"overcast":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"drizzle":case"light-shower":case"heavy-rain":case"blizzard":case"heavy-snow":case"sleet":case"snow":case"fog":case"possible-thunder-day":case"hail":case"lightning-rain":case"lightning-snow":return["#B8B8B8","#8791AB","#486289"];case"cloudy-night":case"possible-thunder-night":case"patchy-rain-possible-night":return["#222938","#3E475A","#1B2230"];case"clear-night":return["#44344A","#091937","#091937"]}},[]),s=f.useCallback(h=>{switch(h){default:return null;case"partly-cloudy-night":case"cloudy-night":case"possible-thunder-night":case"clear-night":return"stars";case"light-shower":case"sleet":case"drizzle":case"patchy-rain-possible-night":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"lightning-rain":return"rain";case"hail":return"rain-hail";case"heavy-rain":return"rain-heavy";case"snow":return"snow";case"heavy-snow":case"blizzard":case"lightning-snow":return"snow-heavy"}},[]),a=r(e),[o,l,c]=a,[u,{width:d,height:m}]=ml(),p=s(e);return i.jsxs("div",{style:{backgroundColor:c},className:U("absolute inset-0 overflow-hidden rounded-md shadow-md",n),children:[i.jsx("div",{className:"-inset-xl absolute translate-y-1/4 rounded-[50%] opacity-75",style:{backgroundColor:l}}),i.jsx("div",{className:"-inset-xl absolute translate-y-[60%] rounded-[50%] opacity-75",style:{backgroundColor:o}}),i.jsx("div",{className:"rounded-inherit absolute inset-0 overflow-hidden",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),i.jsx("div",{className:"absolute inset-0",ref:u,children:p==="stars"?i.jsx(Xye,{height:m,width:d,context:t}):p==="rain"?i.jsx(sw,{height:m,width:d,variant:"normal"}):p==="rain-heavy"?i.jsx(sw,{height:m,width:d,variant:"heavy"}):p==="snow"?i.jsx(jj,{height:m,width:d,variant:"normal"}):p==="snow-heavy"?i.jsx(jj,{height:m,width:d,variant:"heavy"}):p==="rain-hail"?i.jsx(sw,{height:m,width:d,variant:"hail"}):null}),i.jsx("div",{className:"absolute inset-0 rounded-md border border-transparent"})]})});q2.displayName="WeatherGradient";const wv={"clear-day":Kv,"clear-night":G4e,"partly-cloudy-day":lB,"partly-cloudy-night":iB,"cloudy-day":lB,"cloudy-night":iB,"patchy-rain-possible-day":z4e,"patchy-rain-possible-night":H4e,"possible-thunder-day":$4e,"possible-thunder-night":W4e,overcast:V4e,fog:B4e,snow:U4e,sleet:F4e,"patchy-freezing-drizzle":D4e,"heavy-snow":L4e,blizzard:O4e,drizzle:P4e,hail:I4e,"light-shower":R4e,"heavy-rain":j4e,"lightning-rain":oB,"lightning-snow":oB},JL=A.memo(({widgetId:e="default",showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=Q(),a=uyt(e,r),[o,l]=f.useState(!1),c=f.useCallback(()=>n?.(!1),[n]),{permissionStatus:u}=$h(),{openModal:d}=vt();f.useEffect(()=>{u==="granted"&&l(!0)},[u]);const m=f.useCallback(()=>{d("locationPermissionModal",{onPermissionGranted:()=>{l(!0)},origin:"weather_widget"})},[d]);if(!a.hasRealData&&!a.hasLocation&&a.isLoading)return i.jsxs("div",{className:U("h-full transform-gpu rounded-2xl"),children:[i.jsx(q2,{variant:"clear-day",className:"rounded-2xl",context:"ntp"}),i.jsx("div",{className:"gap-sm flex h-full flex-1 flex-col items-center justify-center p-2.5 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:i.jsx(L,{variant:"tiny",color:"white",className:"opacity-75",children:s({defaultMessage:"Loading weather...",id:"kTpqlc9m9M"})})})]});const p=UC(h3,a.icon)?wv[a.icon]:Kv,h=i.jsxs("div",{className:U("h-full transform-gpu overflow-hidden rounded-2xl"),children:[i.jsx(q2,{variant:a.icon,className:"!rounded-2xl",context:"ntp"}),i.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0 pt-1 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[i.jsxs("div",{className:"flex flex-row items-start justify-between",children:[i.jsxs("div",{children:[i.jsx(L,{variant:"page-title",color:"white",children:i.jsxs("span",{className:"font-mono",children:[a.temperature,"",a.weatherSettings.prefersMetric?"C":"F"]})}),i.jsx(L,{variant:"tinyRegular",color:"white",className:"-mt-xs opacity-60",children:a.condition})]}),i.jsx(L,{variant:"page-title",color:"white",className:"mr-0.5 mt-2",children:i.jsx(me,{icon:p,size:36,className:"-mt-xs"})})]}),i.jsx(L,{variant:"tiny",color:"white",className:"mb-1.5 line-clamp-2 flex items-center",children:a.locationName})]})]});return r==="thumbnail"?h:i.jsxs(i.Fragment,{children:[i.jsx(Pn,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:i.jsx(Ye,{href:`/search/new?q=${s({defaultMessage:"weather near {location}",id:"vi8HXN1mDE"},{location:a.locationName})}
          `,draggable:!1,className:"relative block size-full",children:i.jsx("div",{className:"absolute inset-0 select-none",children:h})})}),i.jsx(it,{children:t&&i.jsx(Pu,{onClose:c,children:i.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[i.jsx(L,{variant:"entry-title-300",children:s({defaultMessage:"Weather settings",id:"RMurwlcxbd"})}),i.jsx("div",{className:"flex flex-col gap-3",children:i.jsx("div",{className:"flex w-full flex-col",children:i.jsxs("div",{className:"border-subtlest flex w-full gap-2 rounded-lg border p-1",children:[i.jsxs("label",{className:U("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-subtler dark:bg-offsetPlus":a.weatherSettings.prefersMetric}),children:[i.jsx("input",{type:"radio",name:"tempUnit",checked:a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!0};a.updateWeatherSettings(g)},className:"hidden"}),i.jsx(L,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"default":"light",children:s({defaultMessage:"Celsius",id:"y/PhoM9SbF"})})]}),i.jsxs("label",{className:U("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-subtler dark:bg-offsetPlus":!a.weatherSettings.prefersMetric}),children:[i.jsx("input",{type:"radio",name:"tempUnit",checked:!a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!1};a.updateWeatherSettings(g)},className:"hidden"}),i.jsx(L,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"light":"default",children:s({defaultMessage:"Fahrenheit",id:"K2DDr1Ji/l"})})]})]})})}),i.jsx(z,{className:"border-t"}),i.jsxs("div",{className:"flex flex-row items-center justify-between",children:[i.jsxs("div",{className:"gap-xs flex flex-col",children:[i.jsx(L,{variant:"smallBold",children:s({defaultMessage:"Precise Location",id:"WP8KG0QkTf"})}),i.jsx(L,{variant:"small",className:"leading-tight",color:"light",children:s({defaultMessage:"Use your device location to get the most accurate weather information.",id:"Dsn2unk3pR"})})]}),i.jsx(dyt,{permissionStatus:u,children:i.jsx("div",{onClick:o?void 0:m,children:i.jsx(Ao,{active:o,disabled:o})})})]}),i.jsx(z,{className:"border-t"}),i.jsx("div",{className:"mt-sm flex flex-row justify-end",children:i.jsx(ge,{variant:"primary",size:"small",onClick:c,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});JL.displayName="WeatherWidget";const dyt=({children:e,permissionStatus:t})=>{const{$t:n}=Q(),r=n({defaultMessage:"Currently using precise location. This can be disabled from Comet Settings.",id:"5Z0PWou5EU"});return t==="granted"?i.jsx(pn,{asChild:!0,tooltipText:r,delayDuration:0,arrowClassName:" ",bodyTextClassName:"text-center",children:e}):e},fyt="chrome://wormhole",lQ="wormhole-widgets-enabled-cache";function myt(){const{value:e,loading:t}=jr({flag:"wormhole-widget",defaultValue:!1}),[n,r]=f.useState(()=>{const s=Ae.getItem(lQ);return s?JSON.parse(s):!1});return f.useEffect(()=>{t||e!==n&&(r(e),Ae.setItem(lQ,JSON.stringify(e)))},[e,t,n]),n}const eD=A.memo(({context:e="widget"})=>{const t=wr(),n=f.useCallback(()=>{t.openTab({url:fyt,key:"openWormhole"})},[t]),r=i.jsx("div",{className:"group relative size-full",children:i.jsx("img",{src:"/static/images/wormhole/thumbnail.png",alt:"Wormhole",className:"pointer-events-none absolute inset-0 object-cover"})});return e==="thumbnail"?r:i.jsx(Pn,{fullBleed:!0,shadow:!0,className:"active:!bg-subtler dark:active:!bg-offsetPlus aspect-[1/1] w-full cursor-pointer overflow-hidden !rounded-2xl",onClick:n,children:r})});eD.displayName="WormholeWidget";const tD=A.memo(({context:e="widget"})=>{const t=i.jsx("div",{className:U("relative size-full cursor-pointer select-none",{"active:!bg-subtler dark:active:!bg-offsetPlus":e==="widget"}),children:i.jsx("div",{className:"group relative size-full",children:i.jsx("img",{src:"/static/images/zen/thumbnail.png",alt:"Zen",className:"pointer-events-none absolute inset-0 object-cover"})})});return e==="thumbnail"?t:i.jsx(Pn,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:i.jsx(Ye,{href:"/b/zen",className:"cursor-pointer",draggable:!1,children:t})})});tD.displayName="ZenWidget";const pyt=500,Zye=A.memo(function({id:t,editMode:n,onDelete:r,onShowSettings:s,widget:a}){const[o,l]=f.useState(!1),{isMobileStyle:c}=ye(),{$t:u}=Q(),[d,m]=f.useState(!1),[p,h]=f.useState(!1),[g,y]=f.useState(!1),v=f.useRef(null);f.useEffect(()=>{o&&(m(!1),y(!1))},[o]),f.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const x=f.useCallback(()=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{y(!0)},pyt)},[]),b=f.useCallback(()=>{v.current&&clearTimeout(v.current),d||y(!1)},[d]),_=f.useCallback(R=>{s(R),h(R)},[s]);f.useEffect(()=>{y(!1)},[p]);const{attributes:w,isDragging:C,listeners:S,setNodeRef:E}=Gat({id:t,disabled:!n}),M=R=>{switch(R){case"ANALOG_CLOCK":return i.jsx(nL,{widgetId:t,context:"widget",showSettings:p,setShowSettings:_,showCity:!0});case"STICKY":return i.jsx(sL,{widgetId:t,showSettings:p,setShowSettings:_,context:"widget",defaultText:""});case"TOP_URLS":return i.jsx(p3,{context:"sortable-widgets"});case"WEATHER":return i.jsx(JL,{widgetId:t,context:"widget",showSettings:p,setShowSettings:_});case"STOCK":return i.jsx(ZL,{widgetId:t,context:"widget",showSettings:p,setShowSettings:_});case"DISCOVER":return i.jsx(rL,{context:"widget",showSettings:p,setShowSettings:_});case"ASSISTANT":return i.jsx(tL,{widgetId:t,context:"widget",defaultQuery:u({defaultMessage:"Find important unanswered emails",id:"D8O0cB/SKH"}),showSettings:p,setShowSettings:_});case"SHORTCUT":return i.jsx(eL,{widgetId:t,context:"widget",defaultName:u({defaultMessage:"quick-dinner",id:"7f3tHXsIWC"}),defaultQuery:u({defaultMessage:"Give me 3 ideas of one-pan meals I can make for dinner tonight",id:"sgqIZmDyDW"}),showSettings:p,setShowSettings:_});case"WORMHOLE":return i.jsx(eD,{widgetId:t,context:"widget"});case"ZEN":return i.jsx(tD,{context:"widget"});case"EXPLORE_ASSISTANT":return i.jsx(Jpe,{context:"widget"},`${t}-widget`);default:return null}},k=f.useMemo(()=>{const R={type:"default",text:u({defaultMessage:"Remove",id:"G/yZLul6P1"}),destructive:!0,onClick:r},O={type:"default",text:u({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:()=>_(!p)};return[...a?.settings?[O]:[],...a?.cannotBeDeleted?[]:[R]]},[u,r,p,a?.cannotBeDeleted,a?.settings,_]),T=f.useCallback(()=>m(!0),[m]),j=f.useCallback(()=>{m(!1),y(!1)},[]);return a?i.jsxs(xe.div,{layout:!0,ref:E,className:U("relative isolate",a.width===4?"col-span-full":a.width===3?"col-span-3":a.width===2?"col-span-2":"col-span-1",{"z-[100]":C||o}),drag:n,dragSnapToOrigin:!0,onMouseEnter:x,onMouseLeave:b,onDragStart:()=>{l(!0)},onDragTransitionEnd:()=>{l(!1)},exit:{opacity:0},transition:ao,children:[i.jsx(it,{children:(n||g)&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:ao,className:"absolute -left-2 -top-2 z-10",children:i.jsx(Jt,{isMobileStyle:c,items:k,placement:"bottom-start",onOpen:T,onClose:j,children:i.jsx(z,{as:"button",onClick:T,variant:"raised",className:"active:!bg-subtler dark:active:!bg-offsetPlus shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:i.jsx(me,{icon:du,size:"sm"})})})})}),n&&i.jsx("div",{className:U("absolute inset-0 z-[9] cursor-grab",{"cursor-grabbing":C}),onMouseDown:()=>m(!1),...w,...S}),M(a.type)]}):null});Zye.displayName="WidgetItem";const Jye=A.memo(({widget:e,widgetData:t,editMode:n,handleDelete:r,onShowSettings:s})=>{const a=f.useCallback(()=>r(e.id),[r,e.id]);return t?e.shouldHide?i.jsx("div",{className:U("h-px",{"col-span-full":t.width===4,"col-span-1":t.width===1,"col-span-2":t.width===2,"col-span-3":t.width===3}),style:{opacity:0}},e.id):i.jsx(zr,{fallback:null,children:i.jsx(Zye,{id:e.id,editMode:n,onDelete:a,widget:t,onShowSettings:s})},e.id):null});Jye.displayName="WidgetsFactory";const e0e=A.memo(({aspectRatio:e,onClick:t,widget:n,widgetIsAdded:r,hideIconOutline:s,manuallyDisabled:a=!1})=>{const o=n.singleton&&r||a,l=u=>{switch(u){case"ANALOG_CLOCK":return i.jsx(nL,{widgetId:n.type,context:"thumbnail"});case"STICKY":return i.jsx(sL,{widgetId:n.type,context:"thumbnail",defaultText:"My great sticky..."});case"WEATHER":return i.jsx(JL,{widgetId:n.type,context:"thumbnail"});case"TOP_URLS":return i.jsx(p3,{context:"thumbnail",disabled:o});case"STOCK":return i.jsx(ZL,{widgetId:n.type,context:"thumbnail"});case"DISCOVER":return i.jsx(rL,{context:"thumbnail"});case"ASSISTANT":return i.jsx(tL,{widgetId:n.type,context:"thumbnail",defaultQuery:"Find important unanswered emails"});case"SHORTCUT":return i.jsx(eL,{widgetId:n.type,context:"thumbnail",defaultName:"quick-dinner",defaultQuery:"Give me 3 ideas of one-pan meals I can make for dinner tonight"});case"WORMHOLE":return i.jsx(eD,{widgetId:n.type,context:"thumbnail"});case"ZEN":return i.jsx(tD,{context:"thumbnail"});case"EXPLORE_ASSISTANT":return i.jsx(Jpe,{context:"thumbnail"},`${n.type}-thumbnail`);default:return i.jsx("div",{})}},c=f.useMemo(()=>({aspectRatio:e}),[e]);return i.jsxs("div",{className:"gap-sm relative flex flex-col items-center justify-center",children:[!o&&i.jsx("div",{className:"absolute -top-2 left-1/2 z-10 translate-x-[-68px]",children:i.jsx(z,{as:"button",variant:"raised",onClick:o?void 0:t,className:"active:!bg-subtler dark:active:!bg-offsetPlus shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:i.jsx(me,{icon:rr,size:"sm"})})}),i.jsx(Pn,{shadow:!0,fullBleed:!s,onClick:o?void 0:t,style:c,className:U("h-[120px] cursor-pointer overflow-hidden",{"pointer-events-none":o,"!overflow-visible !rounded-none border-none !bg-transparent shadow-none":s}),children:i.jsx("div",{className:"absolute inset-0",children:l(n.type)})}),i.jsx(L,{variant:"small",color:o?"ultraLight":"default",children:n.name})]})});e0e.displayName="WidgetsTrayItem";const hyt=25,t0e=A.memo(({widget:e,handleAdd:t,userWidgets:n,handleRequestWeatherPermission:r,topSitesData:s})=>{const a=f.useMemo(()=>e.type==="TOP_URLS"&&s.length===0||n.length>=hyt,[s.length,n.length,e.type]),o=f.useCallback(()=>{t(e),r()},[t,r,e]);if(!e||e.cannotBeDeleted)return null;const l=n.some(c=>c.type===e.type);return i.jsx(zr,{fallback:null,children:i.jsx(e0e,{aspectRatio:1/1,widget:e,widgetIsAdded:l,hideIconOutline:e.type==="TOP_URLS",onClick:o,manuallyDisabled:a})})});t0e.displayName="WidgetsTrayFactory";const gyt=({widgets:e,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r,handleAdd:s})=>e.map((a,o)=>i.jsx(t0e,{widget:a,handleAdd:s,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r},o)),n0e=A.memo(({children:e,setEditMode:t,containerRef:n,maxWidgetsReached:r})=>{const{$t:s}=Q(),a=f.useCallback(()=>t(!1),[t]);return i.jsx(Nu,{portalTarget:n.current??document.body,children:i.jsx(xe.div,{initial:{y:"100%",x:"-50%"},animate:{y:0,x:"-50%"},exit:{y:"100%",x:"-50%"},transition:ao,className:"md:px-xl fixed bottom-0 left-1/2 z-[100] w-full pb-3",children:i.jsx("div",{className:"px-xl mx-auto max-w-[800px]",children:i.jsxs(z,{variant:"raised",className:"dark:!bg-base shadow-overlay size-full rounded-2xl pb-3",children:[i.jsx("div",{className:"scrollbar-none max-h-[250px] w-full overflow-scroll",children:e}),i.jsxs("div",{className:"pl-md border-subtlest sticky left-0 flex w-full flex-row items-center border-t pr-3 pt-3",children:[r&&i.jsx(L,{variant:"small",color:"ultraLight",children:s({defaultMessage:"You have reached the maximum number of widgets",id:"fRBSTWO49U"})}),i.jsx(ge,{variant:"primary",size:"small",extraCSS:"ml-auto",text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"}),onClick:a})]})]})})})})});n0e.displayName="WidgetTray";const yyt=()=>{const{$t:e}=Q();return f.useMemo(()=>[{type:"TOP_URLS",name:e({defaultMessage:"Top Sites",id:"v/BAbysxv5"}),singleton:!0,width:4},{type:"ANALOG_CLOCK",name:e({defaultMessage:"Clock",id:"qCyPKfisKN"}),settings:!0,width:1},{type:"STICKY",name:e({defaultMessage:"Sticky",id:"kpXiKrXCK9"}),settings:!0,width:1},{type:"WEATHER",name:e({defaultMessage:"Weather",id:"O2sqh9Nj5X"}),settings:!0,singleton:!0,width:1},{type:"STOCK",name:e({defaultMessage:"Stock",id:"vuKrlWBaI3"}),settings:!0,width:1},{type:"DISCOVER",name:e({defaultMessage:"Discover",id:"cE4HfwyEyr"}),singleton:!0,width:1},{type:"ASSISTANT",name:e({defaultMessage:"Assistant",id:"wSAvhubuX6"}),settings:!0,width:1},{type:"SHORTCUT",name:e({defaultMessage:"Shortcut",id:"tceWOrncgz"}),settings:!0,width:1},{type:"WORMHOLE",name:e({defaultMessage:"Wormhole",id:"GrT4LLPa93"}),singleton:!0,width:1},{type:"ZEN",name:e({defaultMessage:"Zen",id:"wpzEtliq4X"}),singleton:!0,width:1},{type:"EXPLORE_ASSISTANT",name:e({defaultMessage:"Try Agent in Action",id:"7swKDXB5AP"}),singleton:!0,width:1}],[e])},vyt=1e4,xyt=1e3*60,byt=["comet-default-browser-status"],r0e=()=>{const e=wr(),{data:t=null,isLoading:n}=$e({queryKey:byt,queryFn:async()=>{try{return await e.getIsCometDefaultBrowser("check_default_browser")}catch{return null}},refetchInterval:r=>r?.state?.data?xyt:vyt,refetchIntervalInBackground:!0,staleTime:0});return{isDefaultBrowser:t,isDefaultBrowserLoading:n}},cQ="set-default-browser-promo-settings-cache",_yt=()=>{const{value:e}=FP({flag:"set-default-browser-banner-promo",defaultValue:{}}),[t,n]=f.useState(()=>{const r=Ae.getItem(cQ);return r?JSON.parse(r):!1});return f.useEffect(()=>{e!==t&&(n(e),Ae.setItem(cQ,JSON.stringify(e)))},[e,t]),t},zb="comet_default_browser_banner_data",wyt=4,Cyt=24,Syt=60*60*1e3,Eyt=({source:e})=>{const t=wr(),{isDefaultBrowser:n}=r0e(),[r,s]=f.useState(!1),a=_yt(),{trackEvent:o}=Me(),l=typeof a.promoCooldownPeriodHours<"u"&&typeof a.promoMaxCloseCount<"u",c=f.useCallback(p=>{if(p===0)return!1;const h=Date.now()-p,g=Syt*(a?.promoCooldownPeriodHours??Cyt);return h<g},[a?.promoCooldownPeriodHours]);f.useEffect(()=>{(()=>{const h=Ae.getItem(zb);if(!h){s(!1);return}try{const g=JSON.parse(h);if(g.count>=(a?.promoMaxCloseCount??wyt)){s(!0);return}if(c(g.lastClosedTime)){s(!0);return}s(!1)}catch{Ae.removeItem(zb),s(!1)}})()},[a?.promoMaxCloseCount,c]);const u=f.useCallback(()=>{const p=Ae.getItem(zb);let h;try{h=p?JSON.parse(p):{count:0,lastClosedTime:0}}catch{h={count:0,lastClosedTime:0}}if(c(h.lastClosedTime)){s(!0);return}const g={count:h.count+1,lastClosedTime:Date.now()};o("default browser upsell closed",{closedCount:h.count,cometSurface:e}),Ae.setItem(zb,JSON.stringify(g)),s(!0)},[e,o,c]),d=f.useCallback(async()=>{try{u(),await t.setCometAsDefaultBrowser("set_default_browser"),o("default browser upsell selected",{cometSurface:e})}catch{}},[t,e,o,u]),m=l&&n===!1&&!r;return f.useMemo(()=>({shouldShowBanner:m,handleBannerClose:u,setDefaultBrowser:d}),[m,u,d])},uQ=25,Myt=()=>null,s0e=A.memo(({editMode:e,setEditMode:t,containerRef:n,askInput:r})=>{const s="sortable-widgets",a="comet_home",{trackEventOnce:o}=Me(),{defaultWidgets:l}=mot(),{showStudentWidgets:c}=Cot(),{shouldShowWidget:u}=XO(),[d,m]=f.useState(jpe(l)),p=yst(gst(GO)),h=f.useRef(!1);lot(d);const{show:g,title:y,actionLabel:v,icon:x,onDismiss:b,onClick:_,isLoading:w,upsellName:C}=Xat(),{shouldShowBanner:S,handleBannerClose:E,setDefaultBrowser:M}=Eyt({source:a}),{data:k=[]}=Npe(),T=yyt();f.useEffect(()=>{if(!h.current){h.current=!0;return}QO(d)},[d]),f.useEffect(()=>{!S||g||o("default browser upsell viewed",{cometSurface:a})},[o,S,a,g]);const j=f.useCallback(G=>{const{active:X,over:Y}=G;Y&&X.id!==Y.id&&m(W=>{const H=W.findIndex(re=>re.id===X.id),Z=W.findIndex(re=>re.id===Y.id);return KO(W,H,Z)})},[]),R=f.useCallback(G=>{d.length>=uQ||m(X=>[...X,{id:dr(),type:G.type}])},[d]),O=f.useCallback(G=>{m(X=>X.filter(Y=>Y.id!==G))},[]),P=f.useCallback(()=>{navigator.geolocation.getCurrentPosition(ee.info)},[]),N=myt(),I=$ot(),{data:D}=DE({reason:s,enabled:I}),[F,B]=f.useState(!1);f.useEffect(()=>{if(!I||!D||F)return;const G=D?.map?.(H=>H.task_id)??le,Y=d.filter(H=>H.type==="SHORTCUT").map(H=>{const{taskId:Z}=Ape({context:"widget",widgetId:H.id});return{...H,taskId:Z}}).filter(H=>!G.includes(H.taskId)).filter(H=>H.taskId!==YO).map(H=>H.id);if(Y.length===0)return;Y.forEach(H=>{rot(H)});const W=d.filter(H=>!Y.includes(H.id));m(W)},[D,d,I,F]);const V=f.useMemo(()=>d.filter(G=>G.type==="EXPLORE_ASSISTANT"?u:oot(G.id)?c:G.type==="SHORTCUT"?I:G.type==="WORMHOLE"?N:!0).map(G=>({...G,shouldHide:G.type==="TOP_URLS"&&k.length===0})),[d,k,u,I,N,c]),$=f.useMemo(()=>T.filter(G=>G.type==="WORMHOLE"?N:G.type==="EXPLORE_ASSISTANT"?u:G.type==="SHORTCUT"?I:G.type==="ASSISTANT"?!I:!0),[T,N,u,I]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"p-lg flex min-h-full w-full items-center justify-center",children:i.jsxs("div",{style:{width:800},className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-3",children:[g?i.jsx(Upe,{shouldShow:g,title:y,actionLabel:v,icon:x,onDismiss:b,onClick:_}):i.jsx(Fpe,{shouldShow:S&&!w&&C==="comet_ntp_set_default",onClose:E,onSetDefault:M}),i.jsx(gat,{sensors:p,collisionDetection:Sst,onDragOver:j,children:i.jsxs(Uat,{items:V,strategy:Myt,children:[i.jsx(xe.div,{layout:!0,transition:ao,className:"-mb-md col-span-full",children:r}),i.jsx(it,{children:V.map(G=>i.jsx(Jye,{widget:G,editMode:e,handleDelete:O,widgetData:eot(T,G.type),onShowSettings:B},G.id))})]})})]})}),i.jsx(it,{children:e&&i.jsx(n0e,{containerRef:n,setEditMode:t,maxWidgetsReached:d.length>=uQ,children:i.jsx("div",{className:"w-full",children:i.jsx("div",{className:"grid w-full grid-cols-[repeat(auto-fill,minmax(120px,1fr))] flex-row gap-6 p-6",children:i.jsx(gyt,{widgets:$,handleAdd:R,userWidgets:d,handleRequestWeatherPermission:P,topSitesData:k})})})})})]})});s0e.displayName="HomeWidgets";const kyt=["cometInvitesDashboard"],Tyt=({reason:e})=>{const{data:t,isFetching:n}=$e({queryFn:()=>Tue({reason:e}),queryKey:kyt});return f.useMemo(()=>({data:t,isFetching:n}),[t,n])},iT="comet.ntp-invite-button.cachedCount",Gb="comet.ntp-invite-button.dismissed",lT=3e3,Nyt=e=>{const[t,n]=f.useState(null),[r,s]=f.useState(!0),[a,o]=f.useState(!1),[l,c]=f.useState(!1),u=f.useRef(null),d=f.useRef(-1),m=f.useRef(!1);f.useEffect(()=>{if(m.current)return;m.current=!0;const h=Ae.getItem(iT),g=Ae.getItem(Gb)==="true";if(h!==null){const y=parseInt(h,10);n(y),s(!1),!g&&y>0&&(o(!0),c(!0),u.current=setTimeout(()=>{c(!1),u.current=null},lT))}else s(!0)},[]),f.useEffect(()=>{if(e===void 0||e<0||e===d.current)return;d.current=e;const h=Ae.getItem(iT),g=h?parseInt(h,10):null;if(g===null)setTimeout(()=>{n(e),s(!1),e>0&&(o(!0),c(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!1),u.current=null},lT))},100);else{n(e),s(!1);const y=Ae.getItem(Gb)==="true";e>g?(Ae.removeItem(Gb),o(!0),c(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!1),u.current=null},lT)):!y&&e>0?o(!0):(o(!1),c(!1))}return Ae.setItem(iT,e.toString()),()=>{u.current&&(clearTimeout(u.current),u.current=null)}},[e]);const p=f.useCallback(()=>{Ae.setItem(Gb,"true"),o(!1),c(!1),u.current&&(clearTimeout(u.current),u.current=null)},[]);return{displayCount:e!==void 0?e:t,shouldShowInitialText:r,hasNewInvites:a,shouldShowShimmer:l,dismissNewInvites:p}},a0e=A.memo(e=>{const{$t:t}=Q(),n=_t(),{trackEvent:r}=Me(),{data:s}=Tyt({reason:"ntp-invite-button"}),a=s?.remaining_invites!==void 0?Math.max(s.remaining_invites,0):void 0,{displayCount:o,shouldShowInitialText:l,hasNewInvites:c,shouldShowShimmer:u,dismissNewInvites:d}=Nyt(a),m=f.useCallback(()=>{r("comet ntp invite button clicked",{availableInvites:o??0,hasNewInvites:c,cometSurface:"comet_home"}),d(),n.push("/browser/invite")},[n,d,r,o,c]),p=f.useMemo(()=>{const g=u||c,y=g?c?"shimmer-state":"normal-state":void 0,v=i.jsx(i.Fragment,{children:l?i.jsx("span",{children:t({defaultMessage:"Invites",id:"Wy+IdbkBFc"})}):o!==null?u?i.jsxs(wn,{variant:"default",speed:"slow",as:"span",className:"relative inline-flex items-center gap-1",children:[i.jsx("span",{className:"text-super",children:i.jsx(ii,{value:o,animated:!0,willChange:!0})}),i.jsx("span",{className:"text-super",children:t({defaultMessage:"{count, plural, one {invite} other {invites}} left",id:"zsKWZENN9/"},{count:o})})]}):i.jsxs(i.Fragment,{children:[i.jsx(ii,{value:o,animated:!0,willChange:!0}),i.jsx("span",{className:"ml-1",children:t({defaultMessage:"{count, plural, one {invite} other {invites}} left",id:"zsKWZENN9/"},{count:o})})]}):i.jsx("span",{children:t({defaultMessage:"Invites",id:"Wy+IdbkBFc"})})});return g?i.jsx(it,{mode:"popLayout",initial:!1,children:i.jsx(xe.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"inline-flex items-center",children:v},y)}):i.jsx("span",{className:"inline-flex items-center",children:v})},[o,l,t,u,c]),h=f.useMemo(()=>i.jsx(it,{mode:"wait",children:o!==null&&o>0&&c&&i.jsx(xe.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.3,ease:[.4,0,.2,1]},children:i.jsx("div",{className:"bg-super text-inverse py-three flex items-center rounded-full px-1.5",children:i.jsx(L,{variant:"micro",color:"defaultInverted",className:"font-medium uppercase leading-none tracking-wider",children:t({defaultMessage:"NEW",id:"5Jcaq49T38"})})})},"new-pill")}),[o,c,t]);return i.jsx("div",{className:"inline-block",children:i.jsx(ge,{...e,icon:$v,text:p,trailingComponent:h,onClick:m})})});a0e.displayName="NTPInviteButton";const Ayt=()=>{const{value:e}=jr({flag:"comet-invite-system",defaultValue:!0});return e};function jyt(){const{value:e}=At({flag:"at-mention-spaces",subjectType:"user_nextauth_id",defaultValue:!0});return e}function Ryt({reason:e,collectionName:t,isLazy:n=!0,enabled:r=!0}){const{$t:s}=Q(),[a,o]=f.useState(()=>!n),{isMobileStyle:l}=ye(),c=Qe(),u=jyt()&&r,{data:d,isStale:m,refetch:p}=$e({queryKey:yy(),queryFn:()=>RGe({reason:e}),enabled:u&&a,staleTime:10*60*1e3}),h=f.useCallback(()=>{a?m&&p():o(!0)},[a,m,p]),g=f.useMemo(()=>(d?.spaces??[]).map(x=>({uuid:x.uuid,variant:"space",label:x.title,emoji:x.emoji||void 0})),[d]),y=f.useMemo(()=>{const v=LBe();if(!(!u||l||!c||v))return t?s({defaultMessage:"Ask anything about { space } or @ mention a Space",id:"NpwyMmamjs"},{space:t}):s({defaultMessage:"Ask anything or @mention a Space",id:"5FEHAEZOKs"})},[s,t,u,l,c]);return f.useMemo(()=>({isAtMentionSpacesEnabled:u,mentionSpacesOptions:g,inputPlaceholder:y,onTrigger:h}),[y,u,g,h])}function Z1(){const{value:e}=jr({flag:"shortcut-tasks",defaultValue:!0});return e&&Za()}function nD(){const{gpt4Limit:e,pplxAlphaLimit:t,pplxBetaLimit:n}=Hn(),{specialCapabilities:r}=Or(),s=Qe(),{hasAccessToProFeatures:a,isMax:o}=yt(),l=Uh(),c=!r.unlimitedProSearch&&e<=0&&!a,u=!r.unlimitedResearch&&(e<=0||t<=0),d=e<=0||n<=0,{session:m}=Ct(),p=m?.user?.email??"",{isStudent:h}=cE({email:p,reason:"study-mode-access"});return f.useCallback(g=>{const y=Aa[g],v=y===oe.SEARCH&&![ce.DEFAULT,ce.PRO].includes(g);if(g===ce.DEFAULT)return!0;if(s)return Er(g)===oe.STUDY&&!h?!1:o?!0:c||Er(g)===oe.RESEARCH&&u||Er(g)===oe.STUDIO&&d||l(y)?!1:!(!a&&v&&!r.unlimitedProSearch);{const x=r.unlimitedProSearch&&Er(g)===oe.SEARCH&&!l(y),b=r.unlimitedResearch&&Er(g)===oe.RESEARCH&&!l(y);return x||b}},[c,u,d,a,r.unlimitedProSearch,r.unlimitedResearch,s,l,o,h])}function J1(){const{$t:e}=Q(),t=Qe(),{openVisitorLoginUpsell:n}=Xn({enabled:!t}),r=Uh(),s=nD(),a=co(),{specialCapabilities:o}=Or(),l=f.useCallback((u,d)=>{const m=Aa[u];if(u===ce.DEFAULT&&!d)return!1;const p=s(u)===!1||d;if(t)if(p){const h={[oe.SEARCH]:e({defaultMessage:"Want more {copilot}?",id:"Kf+JzdHL3c"},{copilot:"Pro Search"}),[oe.RESEARCH]:e({defaultMessage:"Want more Research?",id:"4cKm89wwuR"}),[oe.STUDIO]:e({defaultMessage:"Try Perplexity Labs",id:"y2BN7EwBoA"}),[oe.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},g={[oe.SEARCH]:e({defaultMessage:"With {pplx} {pro}, get as many as you want",id:"jRMiP6Ut4n"},{pplx:"Perplexity",pro:"Pro"}),[oe.RESEARCH]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Research.",id:"WuvGBcnhvG"}):e({defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),[oe.STUDIO]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Labs.",id:"jmWIIwpGtp"}):e({defaultMessage:"Exclusive access for subscribers",id:"1LB4QwRSMw"}),[oe.STUDY]:e({defaultMessage:"Ask questions and learn",id:"8RzCMAs2/c"})},y=h[m??oe.SEARCH],v=g[m??oe.SEARCH],b={[oe.SEARCH]:Ie.TRY_COPILOT,[oe.RESEARCH]:Ie.TRY_RESEARCH,[oe.STUDIO]:Ie.TRY_LABS}[m??oe.SEARCH]??Ie.TRY_COPILOT;return a({pitchMessage:{title:y,description:v},origin:b}),!0}else return!1;else{if(u===ce.PRO&&o.unlimitedProSearch)return!1;const h={[oe.SEARCH]:e({defaultMessage:"Sign in to access Pro Search",id:"AARKXJYL5U"}),[oe.RESEARCH]:e({defaultMessage:"Sign in to access Perplexity Research",id:"D/01NxLK/G"}),[oe.STUDIO]:e({defaultMessage:"Sign in to try Perplexity Labs",id:"xJYMyIruMK"}),[oe.STUDY]:e({defaultMessage:"Sign in to access Perplexity Study",id:"PiR4Uw7Ibg"})},g={[oe.SEARCH]:e({defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"}),[oe.RESEARCH]:e({defaultMessage:"Deep research and analysis on any topic",id:"vZzVhXmhZo"}),[oe.STUDIO]:e({defaultMessage:"Create projects from scratch, exclusive access for subscribers",id:"STPFx+8/sC"}),[oe.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},y=h[m??oe.SEARCH],v=g[m??oe.SEARCH];return n({title:y,description:v,origin:Ie.TRY_PRO}),!0}},[e,s,t,a,n,r,o.unlimitedProSearch]),c=f.useCallback(u=>s(u)?!1:(t?a({pitchMessage:{title:e({defaultMessage:"Choose a model",id:"fXlc3idTcy"}),description:e({defaultMessage:"With Perplexity Pro, you get unlimited access to all the latest AI models in one subscription",id:"YHjeXkhaC/"})},origin:Ie.MODEL_SELECTOR}):n({title:e({defaultMessage:"Sign in to choose a model",id:"BhbQUiYsTB"}),description:e({defaultMessage:"Access the latest AI models from Perplexity, OpenAI, Anthropic (Claude), Google Gemini and more",id:"DDVABeGeBG"}),origin:Ie.MODEL_SELECTOR}),!0),[s,t,a,n,e]);return f.useMemo(()=>({gateSearchModeSelection:l,gateSearchModelSelection:c}),[l,c])}function o0e(){const e=Pa(),{actions:t}=dn(),{setConfiguredModel:n,setConfiguredSearchMode:r,gpt4Limit:s}=Hn(),{specialCapabilities:a}=Or(),{gateSearchModelSelection:o}=J1(),{hasAccessToProFeatures:l}=yt(),c=f.useCallback(()=>!a.unlimitedProSearch&&(s<=0||!l)?ce.DEFAULT:ce.PRO,[s,l,a.unlimitedProSearch]);return f.useCallback((u=c(),d=e)=>{o(u)||(t.setPreferredSearchModel(d,u),n(u),r(d))},[e,o,c,n,r,t])}function ex(){const e=o0e(),{device:{isWindowsApp:t}}=Et(),{safeWindowsIpcPublish:n,safeWindowsIpcSubscribe:r}=ME(),s=f.useRef(e);f.useEffect(()=>{s.current=e},[e]);const a=f.useRef(r);return f.useEffect(()=>{a.current=r},[r]),f.useEffect(()=>{if(!t)return;const l=a.current(km,c=>{c.type===km&&s.current(c.model,c.searchMode)});return()=>{l?.()}},[t]),f.useCallback((l,c)=>{n(km,{type:km,model:l,searchMode:c}),s.current(l,c)},[n])}function Iyt({reason:e,enabled:t=!0}){const{$t:n}=Q(),[r,s]=f.useState(!1),{openModal:a}=vt(),o=Ls(),l=Qe(),c=Z1()&&t,u=ex(),{overwriteSources:d}=R1({reason:e}),{data:m,isStale:p,refetch:h}=DE({reason:e,enabled:c&&r,staleTime:10*60*1e3}),g=f.useCallback(()=>{r?p&&h():s(!0)},[r,p,h]),y=f.useCallback(()=>{a("taskShortcutModal",{source:"typeahead_create"})},[a]),v=f.useMemo(()=>{if(!(!c||o||!l))return n({defaultMessage:"Ask anything. Type @ for mentions and / for shortcuts.",id:"KO0XLRzele"})},[n,o,c,l]),x=f.useCallback((_,w)=>{let C=oe.SEARCH;_===ce.ALPHA?C=oe.RESEARCH:_===ce.BETA&&(C=oe.STUDIO),u(_,C),d(w)},[u,d]),b=f.useMemo(()=>{const w=(m??[]).map(C=>({uuid:C.task_id,variant:"shortcut",label:`/${C.task_name}`,queryText:C.prompt,className:"group/shortcut-typeahead-option",action:()=>x(C.model_preference,C.sources),convertToNode:!0,rightElement:({focused:S})=>i.jsx(Pyt,{shortcut:C,focused:S})}));return c&&l&&w.push({uuid:"create-a-shortcut",variant:"shortcut",label:n({defaultMessage:"+ Create a shortcut",id:"P9a8R5IRCb"}),action:y,convertToNode:!1,isAlwaysVisible:!0}),w},[m,c,l,x,n,y]);return f.useMemo(()=>({isShortcutTasksEnabled:c,shortcutsTypeaheadOptions:b,inputPlaceholder:v,onTrigger:g}),[c,b,v,g])}function Pyt({shortcut:e,focused:t}){const{openModal:n}=vt(),r=f.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:qpe(e)})},[n,e]);return i.jsx("div",{className:U("h-5 transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:i.jsx(Te,{icon:wc,size:"tiny",variant:"common",noPadding:!0,onMouseDown:r})})}const Oyt=(e,t)=>{const[n,r]=f.useState(e),s=fh(r,t);return f.useEffect(()=>{s(e)},[e,s]),n};var Lyt={};const Dyt=5e3,Fyt=3e3,Uyt=(e,t=!0)=>{const{$t:n}=Q(),r=rn(),s=t&&r,{sidecarSourceTab:{url:a}}=Fs(),o=Oyt(a,Fyt),l=f.useMemo(()=>Lyt.NEXT_PUBLIC_IS_SIDECAR_BUILD?["get_tabs_for_sidecar",o]:["get_tabs_for_ntp"],[o]),{data:c=le}=$e({queryKey:l,queryFn:async()=>(await e.fetchOpenedTabs()).map(m=>({uuid:String(m.tabId),variant:"tab",label:m.title,url:m.url,src:J0(m.url)})),staleTime:Dyt,enabled:s}),u=f.useMemo(()=>s?n({defaultMessage:"Ask anything or @mention a tab",id:"37eMdtX5Pe"}):void 0,[n,s]);return f.useMemo(()=>({tabs:c,tabAttachmentsEnabled:s,inputPlaceholder:u}),[u,s,c])},rD=({reason:e,isLazy:t=!0,variants:n,collectionName:r})=>{const[s,a]=f.useState(""),o=wr(),l=n===void 0||n.includes("tab"),c=n===void 0||n.includes("space"),u=n===void 0||n.includes("shortcut"),{tabs:d,tabAttachmentsEnabled:m,inputPlaceholder:p}=Uyt(o,l),{isAtMentionSpacesEnabled:h,mentionSpacesOptions:g,onTrigger:y,inputPlaceholder:v}=Ryt({reason:e,collectionName:r,isLazy:t,enabled:c}),{isShortcutTasksEnabled:x,shortcutsTypeaheadOptions:b,inputPlaceholder:_,onTrigger:w}=Iyt({reason:e,enabled:u}),C=m||h||x,S=f.useMemo(()=>[...m&&s==="@"?d:[],...h&&s==="@"?g:[],...x&&s==="/"?b:[]],[m,s,d,h,g,x,b]),E=f.useCallback(k=>{a(k),k==="@"?y():k==="/"&&w()},[w,y]),M=f.useMemo(()=>{try{if(typeof document>"u")return""}catch{return}return _??p??v},[_,v,p]);return f.useMemo(()=>({useLexical:C,mentionTypeaheadOptions:S,inputPlaceholder:M,onTriggerTypeahead:E}),[C,S,M,E])};function Byt(){const{value:e}=sE({flag:"enable-audio-video-uploads-attachments",subjectType:"user_nextauth_id",defaultValue:"False"});return f.useMemo(()=>({isAudioVideoFilesEnabled:e==="True"}),[e])}const sD=({reason:e})=>{const t=mt(),{mutateAsync:n}=bt({mutationKey:ib(),mutationFn:async o=>(await I$e({request:{url:o.url,thread_id:o.thread_id},reason:e})).file_url,onSuccess:(o,l,c)=>{t.setQueryData(ib(l.url),o),l.callback?.(o,!1)},onError:(o,l,c)=>{l.callback?.("",!1)},retry:!1}),r=f.useCallback(o=>{const l=t.getQueryData(ib(o));return typeof l=="string"?l:null},[t]),s=f.useCallback(async o=>{o.callback?.("",!0);const l=r(o.url);if(l)return o.callback?.(l,!1),l;const c=await n(o);return o.callback?.(c,!1),c},[r,n]),a=f.useCallback(async(o,l)=>{const c=URL.createObjectURL(l);t.setQueryData(ib(o),c)},[t]);return f.useMemo(()=>({getCachedImageDownloadUrl:r,getImageDownloadUrl:s,cacheImageDownloadUrl:a}),[a,r,s])};function Vyt(){const{value:e}=At({flag:"async-file-attachments-v2",defaultValue:!1,subjectType:"user_nextauth_id"});return e}const Wyt=1e4,K2=["autosuggest"],$yt=()=>{const{device:{isMobile:e}}=Et(),t=mt();return f.useCallback(n=>{const r=t.getQueryData(K2),s=t.getQueryData([...K2,n]);if(s?.length&&s.length===Ym(e))return s;if(r){const a=n.replace(/\s+/g,"").toLocaleLowerCase(),o=[];for(const d of r){if(e&&d.url)continue;const[m,p]=Zde(a,d);if(m&&(o.push([p,d]),o.length===Ym(e)))break}const l=o.sort(([d],[m])=>d-m).map(([d,m])=>m),[c,u]=t8(l,e,n);if(s?.length){const d=[...s];for(const m of c)if(!d.find(p=>p.query===m.query)&&(d.push(m),d.length===Ym(e)))break;return t8(d,e,n)[1]}return u}return le},[e,t])},Hyt=()=>{const{suggestions:e}=ws(),{setSuggestions:t}=jo(),n=f.useRef(e);n.current=e;const r=mt(),s=$yt(),a=f.useRef(!1),{device:{isMobile:o}}=Et(),l=f.useRef(null),c=f.useRef(null),u=f.useRef([]),d=f.useRef({lastMessageID:0}),m=f.useCallback((y,v=!1)=>{const x=s(y);!v&&!x.length||(n.current.length!==x.length||jMe(n.current,x,"query").length!==x.length)&&(n.current=x,t(x))},[s,t]),p=f.useCallback(y=>{try{const v=new WebSocket("wss://suggest.perplexity.ai/suggest/ws");v.onopen=()=>{y?.()},v.onmessage=x=>{let b;try{if(b=JSON.parse(x.data),b.length!==4){ee.error("Invalid autosuggest message",b);return}}catch(j){ee.error("Error parsing autosuggest message",j);return}const[_,w,C,S]=b,E=parseInt(C),M=cZe(S),[k,T]=t8(M,o);if(r.setQueryData(K2,(j=le)=>k.length?vte([...k,...j],"query").sort((R,O)=>R.query.localeCompare(O.query)):j),r.setQueryData([...K2,_],T),E===d.current.lastMessageID&&a.current&&m(_,!0),d.current[E]){const j=performance.now()-d.current[E];u.current.push(j)}},l.current=v}catch(v){ee.error("Error connecting to autosuggest socket",v)}},[o,m,r]),h=f.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{l.current&&(l.current.close(),l.current=null)},Wyt)},[]);f.useEffect(()=>(p(),h(),()=>{l.current&&l.current.close(),c.current&&clearTimeout(c.current)}),[p,h]);const g=f.useCallback((y,v=!0)=>{if(a.current=!!y,!a.current)return;m(y);const x=[WebSocket.OPEN,WebSocket.CONNECTING];if(!l.current||!x.includes(l.current.readyState)){v&&p(()=>{g(y,!1)});return}else h();const b=d.current.lastMessageID+1,_=b.toString();d.current.lastMessageID=b;try{const w=JSON.stringify({q:y,uuid:_,full_completion:!0});if(l.current.readyState===WebSocket.CONNECTING)return;l.current.send(w),d.current[b]=performance.now()}catch(w){ee.error("Error sending query for autosuggest",w)}},[p,h,m]);return f.useEffect(()=>{const y=setInterval(()=>{u.current.length!==0&&(X7e({latencies:u.current,isMobile:o}),u.current=[])},sZe);return()=>clearInterval(y)},[o]),f.useMemo(()=>({handleUpdateAutosuggestions:g}),[g])},zyt=({fileUploadRef:e,showFileUpload:t,attachments:n,setAttachments:r,handleChange:s,setIsUploadingFile:a,focusInput:o,onFileAttachComplete:l})=>{const{inputRef:c}=ws(),u=cO(),[d,m]=f.useState(null),p=f.useCallback(b=>{const _=n===void 0?"paste.txt":`paste-${n.length+1}.txt`,w=new File([b],_,{type:"text/plain"}),C=new DataTransfer;C.items.add(w),m({content:b,fileName:_}),e.current?.uploadFiles(C.files)},[n,e]),h=f.useCallback(()=>{m(null)},[]),g=f.useCallback(b=>{const _=b.clipboardData;if(_&&_.items.length>0){const C=new DataTransfer;for(const S of _.items){if(S.kind==="file"){b.preventDefault();const E=S.getAsFile();E&&C.items.add(E)}if(S.type==="text/plain"){const E=b.clipboardData.getData("Text");E.length>Md&&(b.preventDefault(),p(E))}}e.current?.uploadFiles(C.files)}const w=!!b.currentTarget;requestAnimationFrame(()=>{c.current&&(c.current.trim(),s(c.current.value,c.current.json),w&&(c.current.focusAtEnd(),c.current.scrollToEnd()))})},[e,s,c,p]),y=f.useCallback(b=>{s(b),c.current?.focus()},[s,c]),v=f.useCallback(b=>{a(!1),b.length>0?(r(b),o(),l?.(b)):r(void 0)},[a,r,o,l]),x=f.useCallback(async b=>{const _=new DataTransfer;for(const w of b){if(w.kind==="file"){const C=w.webkitGetAsEntry();if(!C)continue;if(Jle(C)){const S=w.getAsFile();S&&_.items.add(S)}else if(ece(C)){const S=await u$e(C);for(const E of S)_.items.add(E)}}if(w.type==="text/plain"&&w.getAsString(C=>{C.length>Md?p(C):c.current&&(c.current.append(C),s(c.current.value,c.current.json))}),_.items.length>u)break}e.current?.uploadFiles(_.files)},[e,c,s,u,p]);return f.useEffect(()=>{t||(r(void 0),m(null))},[t,r]),f.useMemo(()=>({handlePaste:g,handlePasteQuery:y,handleCompleteFileUpload:v,handleFileSelect:x,autoCreatedTextFile:d,dismissNotification:h,setAutoCreatedTextFile:m}),[v,x,g,y,d,h])};function Gyt(){const{value:e}=At({flag:"resize-image-attachments",defaultValue:!1,subjectType:"user_nextauth_id"});return e}function qyt(){const{value:e}=Tc({flag:"attachment-token-estimation-params",defaultValue:{max_total_tokens:5e5,type_bytes_per_token:{text:4,image:500},type_subtype_bytes_per_token:{"application/pdf":200,"application/msword":500,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":500,"application/vnd.openxmlformats-officedocument.presentationml.presentation":500},default_bytes_per_token:100},subjectType:"user_nextauth_id"});return e}function Kyt(e){return e.every(t=>t instanceof File)}const Yyt=({fileInputRef:e,isSignedIn:t,uploadRateLimit:n,maxFilesUpload:r,attachmentTokenEstimationParams:s,forwardedRef:a,existingAttachments:o,showPrivacyWarning:l,connectorsMap:c,onFilePickerOpen:u,onStart:d,onComplete:m,openLoginModal:p,openPricingModal:h,openCompanyDataPrivacyModal:g,closeModal:y,openVisitorLoginUpsell:v,openMicrosoftPicker:x,closeMicrosoftPicker:b,errorMicrosoftPicker:_,toPickerDocument:w,setUploadRateLimit:C,isFollowUp:S,isClearAttachmentsEnabled:E=!1,forceImage:M,refreshBoxCredentials:k,logMicrosoft:T,asyncAttachmentsEnabled:j=!1,setUploadsReady:R,getImageUrl:O,isAudioVideoFilesEnabled:P=!1,reason:N,incompleteParsingEnabled:I=!1,isImageAttachmentResizingEnabled:D=!1,maxAttachmentFileSizeMB:F=h7e,specialCapabilities:B={unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1},onRemoveFile:V})=>{const{$t:$}=Q(),[G,X]=f.useState(null),[Y,W]=f.useState(null),[H,Z]=f.useState([]),[re,q]=f.useState(H&&H.length>0?"success":"idle"),[J,te]=f.useState(null),se=`${F}MB`,de=f.useCallback(async(_e,Ge,We)=>{if(!Ja(_e))return null;const rt=We?{type:We}:void 0,et=iO(_e)?_e:await O?.(_e)??_e;if(!et)return new File([],Ge,rt);try{const _n=await(await fetch(et)).blob();return new File([_n],Ge,rt)}catch{return new File([],Ge,rt)}},[O]);f.useEffect(()=>{E?Z([]):(async()=>{const Ge=await Promise.all((o??le).map(async We=>{const rt=QA(We.split("/").pop()||"file"),et=z_(We);let kt=new File([],rt,{type:et}),_n;if(Ja(kt)){const tn=await de(We,rt,et);kt=tn??kt,_n=tn?URL.createObjectURL(tn):void 0}return{id:dr(),file:kt,nextURL:We,status:"success",thumbnailSource:_n}}));Z(Ge)})()},[E,o,de]),f.useEffect(()=>{if(!R)return;if(!j||!H.length){R(!0);return}const _e=We=>I?We.status==="parsing"||We.status==="success"||We.status==="failed":We.status==="success"||We.status==="failed",Ge=H.every(_e);R(Ge)},[H,j,R,I]),f.useImperativeHandle(a,()=>({uploadFiles:_e=>we(Array.from(_e)),clearFiles:fe}));const fe=f.useCallback(()=>{Z([]),q("idle"),m?.([]),e.current?.value&&(e.current.value=""),te(null)},[e,m]),ve=f.useCallback((_e,Ge)=>{Z(We=>{let rt=We;return _e?rt=We.filter(et=>et.nextURL!==_e):Ge&&(rt=We.filter(et=>!et.nextURL?.includes(Ge))),rt.length===0&&q("idle"),m?.(rt.filter(et=>!!et.nextURL).map(et=>({url:et.nextURL??"",file:et.file,resizedFile:et.resizedFile}))??[]),V?.(_e,Ge),rt}),e.current?.value&&(e.current.value="")},[e,m,V]),ue=f.useCallback(()=>{Z([]),q("idle"),e.current?.value&&(e.current.value=""),te(null)},[e]),ie=f.useCallback(_e=>{W(null),X(_e??$(ji[Xy.generic_upload_error])),H?.length&&q("success")},[$,H?.length]),be=f.useCallback(()=>{if(!p)return;const _e=$({defaultMessage:"Sign in to upload files and photos",id:"gEOi1eLJ7C"}),Ge=$({defaultMessage:"Analyze files and photos for free",id:"nu4bK5/Y5T"});v?v({title:_e,description:Ge,origin:Ie.FILE_UPLOAD,sheetModalVariant:S?"bottom-sheet-gradient":"full-sheet"}):p({origin:Ie.FILE_UPLOAD,pitchMessage:{title:_e,description:Ge}})},[$,S,p,v]),Se=f.useCallback(()=>{if(!h)return;const _e=$({defaultMessage:"Want more uploads?",id:"iInvIJ0Dv/"}),Ge=$({defaultMessage:"Upgrade access for subscribers",id:"UwiL3wLZE3"});h({pitchMessage:{title:_e,description:Ge},origin:Ie.FILE_UPLOAD})},[$,h]),Ce=f.useCallback(async(_e,Ge)=>{let We;j?We=await CQe({request:{file_uuids:[_e]},reason:N}):We={file_uuid:_e,success:!0,error_code:null};const rt=We.success?"success":"failed";rt==="failed"?(ie($(ji[We.error_code??KA.parsing_error],{filename:Ge})),Z(et=>et.filter(kt=>kt.file_uuid!==_e))):Z(et=>[...(et??[]).map(kt=>kt.file_uuid===_e?{...kt,status:rt}:kt)])},[ie,j,$,N]),ke=f.useCallback(_e=>_e instanceof File&&zW.includes(_e.type)||!(_e instanceof File)&&_e.mimeType&&zW.includes(_e.mimeType)?$(ji[Xy.unsupported_type]):_e instanceof File&&_e.size>F*HW||!(_e instanceof File)&&_e.sizeBytes&&_e.sizeBytes>F*HW?$(ji[Xy.too_large],{max:se}):_e instanceof File&&_e.size<$W||!(_e instanceof File)&&_e.sizeBytes&&_e.sizeBytes<$W?$(ji.too_small):_e.name?null:$(ji.no_name),[$,se,F]),Re=f.useCallback(async(_e,Ge,We,rt,et,kt)=>{if(!_e.ok){ie(),ee.warn(`[localAttachmentUpload] upload failed for ${kt}, response=${_e}`);return}let _n=null;try{const cn=await _e.json();if(cn?.moderation?.[0]?.status==="rejected"){ie($(ji.failed_moderation)),ee.warn(`[localAttachmentUpload] upload failed moderation for ${kt}, response=${_e}`);return}_n=YA(cn?.eager?.[0]?.secure_url??cn?.secure_url)}catch{_n=`${We}${rt}`.replace("${filename}",`${Ge.name}`)}if(!_n){ie();return}const tn=Km(_n)?"success":"parsing";Z(cn=>cn.map(Mr=>Mr.id===et?{...Mr,nextURL:_n,file_uuid:kt,status:tn}:Mr)),q("success"),te("local"),kt&&tn=="parsing"&&await Ce(kt,Ge.name)},[ie,$,Ce]),je=f.useCallback(async(_e,Ge,We)=>{if(!_e?.success){ie();return}if(_e.rate_limited){Se(),ie($(ji.rate_limited));return}if(!_e.filename||!_e.url){ie();return}const rt=_e.url&&Km(_e.url)?YA(_e.url):QA(_e.url),et=z_(rt);console.log(_e.url,_e.filename,et);const kt=await de(_e.url,_e.filename,et),_n=Km(_e.url)?"success":"parsing";Z(tn=>tn.map(cn=>cn.id===We?{...cn,file:kt??cn.file,nextURL:rt,file_uuid:_e.file_uuid??void 0,status:_n,thumbnailSource:kt?URL.createObjectURL(kt):void 0}:cn)),q("success"),te(Ge),_e.file_uuid&&_n=="parsing"&&await Ce(_e.file_uuid,_e.filename)},[de,ie,Se,$,Ce]),ct=f.useCallback(async(_e,Ge)=>{if(_e?.rate_limited){Se(),ie($(ji.rate_limited));return}if(!_e||!_e.fields||!_e.s3_bucket_url){ie();return}sce(Ge)&&Z(rt=>rt.map(et=>et.id===Ge.id?{...et,thumbnailSource:URL.createObjectURL(Ge.file)}:et));const We=new FormData;Object.entries(_e.fields).forEach(([rt,et])=>{We.append(rt,et)}),We.append("file",Ge.file);try{const rt=await fetch(_e.s3_bucket_url,{method:"POST",body:We});await Re(rt,Ge.file,_e.s3_bucket_url,_e.fields.key,Ge.id,_e.file_uuid??void 0)}catch(rt){ee.warn(`[localAttachmentUpload] upload failed for ${_e.file_uuid} with error=${rt}`),ie()}},[Se,ie,$,Re]),tt=f.useCallback(_e=>{const Ge=_e.filter(rt=>rt.status==="success").reduce((rt,et)=>{const kt=et.file.type,_n=kt.split("/")[0],tn=s?.type_subtype_bytes_per_token?.[kt],cn=s?.type_bytes_per_token?.[_n],Mr=s?.default_bytes_per_token,La=tn??cn??Mr,mo=et.file.size,qo=La?mo/La:0;return rt+qo},0),We=s?.max_total_tokens;return We&&Ge>We},[s]);f.useEffect(()=>{if(!H.length)return;H.every(Ge=>Ge.status==="success"||Ge.status==="failed")&&tt(H)&&W($({defaultMessage:"Performance may be degraded for larger files.",id:"xwKpaJzWgU"}))},[H,tt,$,G]);const ut=f.useCallback((_e,Ge,We)=>{if(Kyt(_e)){let rt=0;Promise.all(_e.map(async et=>{const kt=ke(et);if(kt){ie(kt);return}let _n=et;if(Ja(et))try{D&&(_n=await iQe(et))}catch{ee.warn(`Unable to resize image file: ${et.name}`)}const tn={id:dr(),file:_n,status:"uploading"};Z(Mr=>[...Mr??[],tn]);const cn=await pO({file:_n,fileSource:We,forceImage:M,reason:N});ct(cn,tn),rt++})).then(()=>{n&&n>0&&C&&C(rt)})}else Ge&&_e.forEach(rt=>{const et=ke(rt);if(et)ie(et);else{const kt=z_(rt.name??""),_n=new File([""],rt.name??"",{type:kt}),tn={id:rt.id,file:_n,status:"uploading"};Z(cn=>[...cn??[],tn]),wQe({remote_file_id:rt.id,connection_type:Ge.toUpperCase(),reason:N}).then(cn=>{je(cn,Ge,tn.id)})}})},[n,C,ke,M,N,ie,D,ct,je]),we=f.useCallback((_e,Ge,We)=>{if(!(!_e||_e.length===0)){if(We!==l7){if(!t&&!B.fileUpload){be();return}if(n&&n<=0){Se();return}if(_e.length+(H?.length??0)>r){X($(ji.over_file_count,{maxNumFiles:r}));return}}d?.(),q("loading"),ut(_e,Ge,We)}},[t,n,H,r,ut,d,be,Se,$,B.fileUpload]),Ue=f.useCallback(async(_e,Ge,We)=>{try{const et=await(await fetch(_e)).blob(),kt=We||et.type||"application/octet-stream";return new File([et],Ge,{type:kt})}catch{return new File([],Ge,We?{type:We}:void 0)}},[]),Ot=f.useCallback(async(_e,Ge,We)=>{const et=(We?We.startsWith("image/"):Ja(_e))?await de(_e,Ge,We):await Ue(_e,Ge,We);et&&we([et],"local")},[Ue,de,we]),{openPicker:pt,isReady:Mt}=$ce({clientId:c?.google_drive?.picker_credentials?.client_id??"",apiKey:c?.google_drive?.picker_credentials?.api_key??"",loginHint:c?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:P}),[qe,Be]=f.useState(!1),[Oe,nt]=f.useState(""),St=f.useCallback(()=>Be(!1),[]),Yt=f.useCallback(_e=>{const Ge=_e.map(We=>({id:We.id,name:We.name,sizeBytes:We.size,mimeType:FA[We.extension]}));we(Ge,"box"),St()},[we,St]),{openPicker:Ft,cleanupPicker:Gt}=ace({apiKey:(Oe||c?.box?.picker_credentials?.api_key)??"",mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:Yt,onCancel:St}),Cn=f.useCallback(async()=>{const _e=c?.box?.picker_credentials?.expires_at??"";if(_e&&k){const Ge=new Date(_e);if(isNaN(Ge.getTime())){Be(!0);return}if(Ge<new Date){const rt=await k();nt(rt?.api_key??"")}}Be(!0)},[c?.box?.picker_credentials?.expires_at,k]);f.useEffect(()=>{qe&&Ft()},[qe,Ft]);const ln=f.useCallback((_e,Ge)=>{if(!w||Ge!=="onedrive"&&Ge!=="sharepoint")return;const We=_e.map(rt=>w(rt,Ge)).filter(rt=>rt!==null);we(We,Ge),b?.()},[w,we,b]),{openPicker:Ke}=cce({clientId:c?.dropbox?.picker_credentials?.client_id??""}),He=f.useCallback(_e=>{const Ge=_e.map(We=>{const rt=p1(We.name);return rt?{id:We.id,name:We.name,sizeBytes:We.bytes,mimeType:FA[rt]}:null}).filter(We=>We!==null);we(Ge,"dropbox")},[we]),st=f.useCallback(()=>ie($({defaultMessage:"Unable to retrieve files from connector.",id:"4seKuUP1Wo"})),[ie,$]),Vt=f.useCallback((_e,Ge)=>{if(_e=="google_drive"&&Mt)pt({mode:"attachment",onPicked:We=>we(We,_e)});else if(_e==="onedrive"||_e==="sharepoint"){const We=c?.[_e];x?.({connector:_e,clientId:We?.picker_credentials?.client_id??"",tenantName:We?.picker_credentials?.tenant_name??"",loginHint:We?.connection_display_name??"",webUrl:Ge,mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:rt=>ln(rt,_e),onError:_,onCancel:b,log:T})}else _e==="dropbox"?Ke({mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:He,onError:st}):_e=="box"&&Cn()},[Mt,c,pt,we,x,ln,b,_,Ke,He,st,Cn,T,P]),en=f.useCallback(_e=>{g&&g(()=>{y?.(),!_e||_e==="local"?(e.current?.click(),u?.()):Vt(_e)})},[e,y,g,Vt,u]),On=f.useCallback(_e=>{if(!t&&!B.fileUpload){be();return}if(n&&n<=0){Se();return}if(l&&!Tn(cA)){en(_e),Qt(cA,"true",{expires:30});return}!_e||_e==="local"?(e.current?.click(),u?.()):Vt(_e)},[t,n,l,e,be,Se,en,Vt,u,B.fileUpload]);return f.useEffect(()=>{let _e=null;return Y&&(_e=setTimeout(()=>{W(null)},p7e)),()=>{_e&&clearTimeout(_e)}},[Y]),f.useEffect(()=>{H&&m?.(H.filter(_e=>!!_e.nextURL).map(_e=>({url:_e.nextURL??"",file:_e.file,resizedFile:_e.resizedFile})))},[H,m]),f.useMemo(()=>({errorMessage:G,warningMessage:Y,uploadedFiles:H,uploadSource:J,status:re,fileInputRef:e,handleClearFiles:fe,handleRemoveFile:ve,handleStartUpload:On,handleFileInput:we,attachFromUrl:Ot,removeAllFiles:ue,handleOpenLoginModal:be,handleOpenPricingModal:Se,isBoxOpen:qe,onCloseBox:St,cleanupBoxPicker:Gt,setErrorMessage:X}),[G,Y,H,J,re,e,fe,ve,On,we,Ot,ue,be,Se,qe,St,Gt])},Qyt=({fileUploadRef:e,disablePrivacyWarning:t,isAudioVideoFilesEnabled:n,isClearAttachmentsEnabled:r,isFollowUp:s,existingAttachments:a,organization:o,lastResult:l,onStartFileUpload:c,onCompleteFileUpload:u,setUploadsReady:d,reason:m,incompleteParsingEnabled:p=!1,specialCapabilities:h,askInputRef:g,onRemoveFile:y})=>{const v=f.useRef(null),{inputRef:x}=ws(),{openModal:b,closeModal:_}=vt(),w=cO(),C=qyt(),{value:S}=At({flag:"async-attachment-processing",defaultValue:!1,subjectType:"user_nextauth_id"}),E=Gyt(),M=Qe(),{openVisitorLoginUpsell:k}=Xn({enabled:!M}),T=co(),{hasDataRetentionWarning:j,connectorLimits:R}=Ds({reason:m}),{connectorsMap:O}=h1({reason:m}),{uploadRateLimit:P,setUploadRateLimit:N}=Hn(),{hasActiveSubscription:I}=yt(),D=P??(I?Oae:Pae),F=f.useCallback(ue=>b("loginModal",ue),[b]),B=f.useCallback(ue=>{T(ue)},[T]),V=f.useCallback(ue=>b("companyDataPrivacyModal",{organizationName:o?.display_name??"",onContinue:ue}),[b,o]),{onOpen:$,onClose:G,onError:X,toPickerDocument:Y,options:W,onSelectSite:H,isOpen:Z,log:re}=uce({reason:m,mode:"attachment"}),{mutateAsync:q}=ice({reason:m}),{getCachedImageDownloadUrl:J,getImageDownloadUrl:te}=sD({reason:m}),se=f.useCallback(async ue=>l?.backend_uuid?await te({url:ue,thread_id:l.backend_uuid}):J(ue),[J,te,l?.backend_uuid]),de=Yyt({fileInputRef:v,isSignedIn:M,uploadRateLimit:D,maxFilesUpload:w,attachmentTokenEstimationParams:C,forwardedRef:e,showPrivacyWarning:j&&!t,existingAttachments:a,connectorsMap:O,onStart:c,onComplete:u,openLoginModal:F,openPricingModal:B,openCompanyDataPrivacyModal:V,closeModal:_,openVisitorLoginUpsell:k,openMicrosoftPicker:$,closeMicrosoftPicker:G,errorMicrosoftPicker:X,toPickerDocument:Y,setUploadRateLimit:N,isFollowUp:s,isClearAttachmentsEnabled:r,refreshBoxCredentials:q,logMicrosoft:re,asyncAttachmentsEnabled:S,setUploadsReady:d,getImageUrl:se,isAudioVideoFilesEnabled:n,reason:m,incompleteParsingEnabled:p,isImageAttachmentResizingEnabled:E,maxAttachmentFileSizeMB:R?.max_attachment_file_size_mb,specialCapabilities:h,onRemoveFile:y}),{attachFromUrl:fe,removeAllFiles:ve}=de;return f.useImperativeHandle(g??null,()=>({addMediaFile:async(ue,ie,be)=>{await fe(ue,ie,be)},focusInput:()=>{x.current?.focus()},removeAttachments:()=>{ve()}}),[fe,x,ve]),f.useMemo(()=>({...de,fileInputRef:v,microsoftFilePickerOptions:W,handleSelectSharepointSite:H,isMicrosoftFilePickerOpen:Z,onCloseMicrosoft:G,addMediaFile:fe,removeAllFiles:ve}),[de,H,Z,W,G,fe,ve])};var Xyt={};const Zyt=({setInput:e})=>{const t=Dt();f.useEffect(()=>{if(!t||!Xyt.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const n=t.get("p_q");n&&e(n)},[t,e])},TVt="web.frontend.realtime.voice",NVt="oai-realtime-v2v-tool-call",AVt=4096,Jyt=.7;var dQ;(function(e){e.ControlBrowser="control_browser",e.CloseBrowserTabs="close_browser_tabs",e.GroupOpenBrowserTabs="group_open_browser_tabs",e.OpenNewBrowserTab="open_page",e.SearchBrowser="search_browser",e.UngroupOpenBrowserTabs="ungroup_open_browser_tabs"})(dQ||(dQ={}));var fQ;(function(e){e.MobileWeb="mobile_web",e.Web="web",e.macOS="macos",e.iOS="ios",e.Android="android",e.Windows="windows"})(fQ||(fQ={}));function e0t(){return Intl.DateTimeFormat().resolvedOptions().timeZone}async function jVt({body:e,reason:t}){try{const n=await ne.POST("/rest/realtime/v1/session",t,{timeoutMs:Pe({productionMs:1e4,clientSideMs:1e4}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const s=n.response.statusText||"Unknown realtime session error";return{status:n.response.status,error:`Failed to get realtime session: ${s}`}}return{data:n.data,status:n.response.status,error:null}}catch(n){return ee.error("Failed to get realtime session",n),{data:null,status:500,error:`Failed to get realtime session: ${n.message||"Internal server error"}`}}}async function t0t({body:e,reason:t}){try{const n=await ne.POST("/rest/realtime/transcription-session",t,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});return n.response.ok?{data:n.data,status:n.response.status,error:null}:{status:n.response.status,error:`Failed to get realtime transcription session: ${n.response.statusText}`}}catch(n){return ee.error("Failed to get realtime transcription session",n),{data:null,status:500,error:`Failed to get realtime transcription session: ${n}`}}}async function RVt({body:e,reason:t}){try{const n=await ne.POST("/rest/realtime/execute-tools",t,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const s=await n.response.text();throw new Error(`Failed to execute tools: ${s}`)}return n.data}catch(n){ee.error("Failed to execute tools",n);return}}async function IVt({entry:e,analyticsParams:t,reason:n}){try{const r=await ne.POST("/rest/realtime/create-entry",n,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:{...e,analytics_params:{...t,timezone:e0t(),visitor_id:m1()}},headers:{"content-type":"application/json"}});if(!r.response.ok){const s=await r.response.text();throw new Error(`Failed to create entry: ${s}`)}return r.data}catch(r){ee.error("Failed to create entry",r);return}}const n0t=({callbacks:e,config:t,reason:n})=>{const[r,s]=f.useState(!1),[a,o]=f.useState(""),[l,c]=f.useState(!1),[u,d]=f.useState(null),[m,p]=f.useState(()=>{const q=Ae.getItem(LM);return q?q==="true":null}),{device:{isWindowsApp:h}}=Et(),{trackEvent:g}=Me(),y=t.silenceThreshold??30,v=t.silenceDuration??5e3,x=f.useRef(null),b=f.useRef(null),_=f.useRef(""),w=f.useRef(null),C=f.useRef(!1),S=f.useRef(null),E=f.useRef(null),M=f.useRef(null),k=f.useRef(null),T=f.useRef(null),j=f.useRef(new Map),R=f.useRef(null),O=f.useRef(null),P=f.useRef(null),N=f.useRef([]),I=f.useRef(null),D=f.useCallback(async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(J=>J.stop()),p(!0),Ae.setItem(LM,"true"),!0}catch(q){return d(`Microphone permission denied. ${q}`),p(!1),Ae.setItem(LM,"false"),!1}},[]),F=f.useRef(!1),B=f.useCallback(()=>{w.current&&(w.current.getTracks().forEach(q=>q.stop()),w.current=null)},[]),V=f.useCallback(()=>{if(C.current=!1,M.current&&(clearTimeout(M.current),M.current=null),S.current&&(S.current.close(),S.current=null,E.current=null),x.current&&r&&x.current.stop(),I.current&&(clearInterval(I.current),I.current=null),P.current&&(P.current.port.onmessage=null,P.current.disconnect(),P.current=null),b.current&&b.current.stop(),B(),_.current="",o(""),j.current.clear(),s(!1),T.current&&(T.current.close(),T.current=null),k.current){const q=Date.now()-k.current;g("stop transcription",{durationMs:q})}k.current=null,e?.onStop?.()},[e,B,g,r]),$=f.useCallback(q=>{if(!q||!C.current)return;const J=q.frequencyBinCount,te=new Uint8Array(J);q.getByteFrequencyData(te),te.reduce((de,fe)=>de+fe)/J<y?M.current||(M.current=setTimeout(()=>{C.current&&e?.onSilence?.()},v)):M.current&&(clearTimeout(M.current),M.current=null),C.current&&requestAnimationFrame(()=>$(q))},[e,y,v]),G=f.useCallback(()=>Array.from(j.current.values()).map(J=>J.finalTranscript||J.partialTranscript||"").join(" ").trim(),[j]),X=f.useCallback(q=>{const{type:J,item_id:te}=q;if(!te)return;j.current.has(te)||j.current.set(te,{itemId:te,partialTranscript:"",finalTranscript:""});const se=j.current.get(te),de=O.current||"";switch(J){case"conversation.item.input_audio_transcription.delta":{const{delta:fe}=q;de==="whisper-1"?se.partialTranscript=fe:se.partialTranscript+=fe;break}case"conversation.item.input_audio_transcription.completed":{const{transcript:fe}=q;typeof fe=="string"&&(se.finalTranscript=fe);break}case"input_audio_buffer.committed":{q.previous_item_id&&(se.previousItemId=q.previous_item_id);break}}j.current.set(te,se),o(G())},[G]),Y=f.useCallback(async()=>{const q=await t0t({body:{source:h?$m:Lae,timezone:i7,turn_detection_threshold:Jyt,response_language:"en"},reason:n});if(!q.data?.client_secret)throw ee.error("No ephemeral key from server"),new Error("Unable to start OAI session");R.current=q.data.session_id,O.current=q.data.model_name;const te=["realtime",`openai-insecure-api-key.${q.data.client_secret}`,"openai-beta.realtime-v1"],se=new WebSocket("wss://api.openai.com/v1/realtime?intent=transcription",te);T.current=se,se.onopen=()=>ee.info("OpenAI WS connected (base64 PCM approach)"),se.onerror=de=>{ee.error("OAI WS error:",de),d("OpenAI WS error")},se.onclose=de=>{ee.info("OAI WS closed:",de.code)},se.onmessage=de=>{try{const fe=JSON.parse(de.data);X(fe)}catch(fe){ee.error("Invalid OAI WS message:",de.data,fe)}}},[X,h,n]),W=f.useCallback(q=>{let J=0;for(const de of q)J+=de.length;const te=new Int16Array(J);let se=0;for(const de of q)te.set(de,se),se+=de.length;return te},[]),H=f.useCallback(q=>{const J=q.buffer;let te="";const se=new Uint8Array(J);for(const de of se)te+=String.fromCharCode(de);return btoa(te)},[]),Z=f.useCallback(async q=>{const J=new AudioContext;S.current=J,await J.audioWorklet.addModule("/audio-worklet.js");const te=new AudioWorkletNode(J,"pcm-worklet-processor");P.current=te,te.port.onmessage=de=>{if(!C.current)return;const fe=de.data;N.current.push(fe)},I.current||(I.current=setInterval(()=>{if(!C.current||!T.current||T.current.readyState!==WebSocket.OPEN||N.current.length===0)return;const de=W(N.current);N.current=[];const fe=H(de),ve={event_id:`evt-${Date.now()}`,type:"input_audio_buffer.append",audio:fe};T.current.send(JSON.stringify(ve))},500));const se=J.createMediaStreamSource(q);se.connect(te),te.connect(J.destination),E.current=J.createAnalyser(),E.current.fftSize=256,se.connect(E.current),requestAnimationFrame(()=>$(E.current))},[$,W,H]),re=f.useCallback(async()=>{if(d(null),k.current=Date.now(),g("start transcription"),C.current=!0,(m===null||m===!1)&&(c(!0),!await D())){c(!1),d("Microphone permission is required for voice input"),e?.onStop?.(),C.current=!1;return}try{await Y();const q=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(async J=>{if(p(!1),!await D())throw J;return navigator.mediaDevices.getUserMedia({audio:!0})});w.current=q,await Z(q),F.current&&b.current&&(_.current="",o(""),b.current.start(),b.current.onspeechend=()=>V()),s(!0),c(!1),e?.onStart?.()}catch(q){d(`Failed to start recording. ${q}`),C.current=!1}},[e,m,D,g,V,Y,Z]);return f.useMemo(()=>({isTranscribing:r,isInitializing:l,transcription:a,error:u,startTranscription:re,stopTranscription:V}),[u,l,r,re,V,a])};function Fe(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Ti=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,r0t=Ti&&"documentMode"in document?document.documentMode:null,Wi=Ti&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),iu=Ti&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Y2=!(!Ti||!("InputEvent"in window)||r0t)&&"getTargetRanges"in new window.InputEvent("input"),Cv=Ti&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Hp=Ti&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s0t=Ti&&/Android/.test(navigator.userAgent),i0e=Ti&&/^(?=.*Chrome).*/i.test(navigator.userAgent),mQ=Ti&&s0t&&i0e,Q2=Ti&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!i0e;function X2(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}const a0t=1,o0t=3,i0t=9,l0t=11,ff=0,l0e=1,zp=2,c0t=0,u0t=1,d0t=2,Z2=4,J2=8,aD=128,f0t=1792|(112|(3|Z2|J2)|aD),oD=1,iD=2,lD=3,cD=4,uD=5,dD=6,g3=Cv||Hp||Q2?"":"",vc=`

`,m0t=iu?"":g3,c0e="---",u0e="A-Za-z--------",p0t=new RegExp("^[^"+u0e+"]*["+c0e+"]"),h0t=new RegExp("^[^"+c0e+"]*["+u0e+"]"),mf={bold:1,capitalize:1024,code:16,highlight:aD,italic:2,lowercase:256,strikethrough:Z2,subscript:32,superscript:64,underline:J2,uppercase:512},g0t={directionless:1,unmergeable:2},pQ={center:iD,end:dD,justify:cD,left:oD,right:lD,start:uD},y0t={[iD]:"center",[dD]:"end",[cD]:"justify",[oD]:"left",[lD]:"right",[uD]:"start"},v0t={normal:0,segmented:2,token:1},x0t={[c0t]:"normal",[d0t]:"segmented",[u0t]:"token"},b0t="$";function d0e(e,t,n,r,s,a){let o=e.getFirstChild();for(;o!==null;){const l=o.__key;o.__parent===t&&(Ne(o)&&d0e(o,l,n,r,s,a),n.has(l)||a.delete(l),s.push(l)),o=o.getNextSibling()}}const _0t=100;let Rj=!1,fD=0;function w0t(e){fD=e.timeStamp}function cT(e,t,n){const r=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||r&&e.previousSibling===s)||r&&E3(e,n)!==void 0}function C0t(e,t,n){const r=vl(Io(n));let s=null,a=null;r!==null&&r.anchorNode===e&&(s=r.anchorOffset,a=r.focusOffset);const o=e.nodeValue;o!==null&&TD(t,o,s,a,!1)}function S0t(e,t,n){if(De(e)){const r=e.anchor.getNode();if(r.is(n)&&e.format!==r.getFormat())return!1}return jc(t)&&n.isAttached()}function E0t(e,t,n,r){for(let s=e;s&&!xvt(s);s=ox(s)){const a=E3(s,t);if(a!==void 0){const o=es(a,n);if(o)return jn(o)||!Ir(s)?void 0:[s,o]}else if(s===r)return[r,cve(n)]}}function f0e(e,t,n){Rj=!0;const r=performance.now()-fD>_0t;try{Ga(e,()=>{const s=Xe()||function(p){return p.getEditorState().read(()=>{const h=Xe();return h!==null?h.clone():null})}(e),a=new Map,o=e.getRootElement(),l=e._editorState,c=e._blockCursorElement;let u=!1,d="";for(let p=0;p<t.length;p++){const h=t[p],g=h.type,y=h.target,v=E0t(y,e,l,o);if(!v)continue;const[x,b]=v;if(g==="characterData")r&&Ze(b)&&jc(y)&&S0t(s,y,b)&&C0t(y,b,e);else if(g==="childList"){u=!0;const _=h.addedNodes;for(let S=0;S<_.length;S++){const E=_[S],M=ive(E),k=E.parentNode;if(k!=null&&E!==c&&M===null&&!cT(E,k,e)){if(iu){const T=(Ir(E)?E.innerText:null)||E.nodeValue;T&&(d+=T)}k.removeChild(E)}}const w=h.removedNodes,C=w.length;if(C>0){let S=0;for(let E=0;E<C;E++){const M=w[E];(cT(M,y,e)||c===M)&&(y.appendChild(M),S++)}C!==S&&a.set(x,b)}}}if(a.size>0)for(const[p,h]of a)h.reconcileObservedMutation(p,e);const m=n.takeRecords();if(m.length>0){for(let p=0;p<m.length;p++){const h=m[p],g=h.addedNodes,y=h.target;for(let v=0;v<g.length;v++){const x=g[v],b=x.parentNode;b==null||x.nodeName!=="BR"||cT(x,y,e)||b.removeChild(x)}}n.takeRecords()}s!==null&&(u&&Ps(s),iu&&mve(e)&&s.insertRawText(d))})}finally{Rj=!1}}function m0e(e){const t=e._observer;t!==null&&f0e(e,t.takeRecords(),t)}function p0e(e){(function(t){fD===0&&Io(t).addEventListener("textInput",w0t,!0)})(e),e._observer=new MutationObserver((t,n)=>{f0e(e,t,n)})}let M0t=class h0e{constructor(t,n=new Map,r=void 0,s=new Map,a=void 0){this.node=t,this.sharedConfigMap=n,this.unknownState=r,this.knownState=s;const o=a!==void 0?a:function(l,c,u){let d=u.size;if(c)for(const m in c){const p=l.get(m);p&&u.has(p)||d++}return d}(n,r,s);this.size=o}getValue(t){const n=this.knownState.get(t);if(n!==void 0)return n;this.sharedConfigMap.set(t.key,t);let r=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(r=t.parse(s)),this.updateFromKnown(t,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState};for(const[n,r]of this.knownState)n.isEqual(r,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(r);return qb(t)?{[b0t]:t}:{}}getWritable(t){if(this.node===t)return this;const n=new Map(this.knownState),r=qb(s=this.unknownState)&&{...s};var s;if(r)for(const a of n.keys())delete r[a.key];return new h0e(t,this.sharedConfigMap,qb(r),n,this.size)}updateFromKnown(t,n){const r=t.key;this.sharedConfigMap.set(r,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&r in a||this.size++,s.set(t,n)}updateFromUnknown(t,n){const r=this.sharedConfigMap.get(t);r?this.updateFromKnown(r,r.parse(n)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=n)}updateFromJSON(t){const{knownState:n}=this;for(const r of n.keys())n.set(r,r.defaultValue);if(this.size=n.size,this.unknownState={},t)for(const[r,s]of Object.entries(t))this.updateFromUnknown(r,s);this.unknownState=qb(this.unknownState)}};function qb(e){if(e)for(const t in e)return e}function k0t(e){const t=e.getWritable(),n=t.__state?t.__state.getWritable(t):new M0t(t);return t.__state=n,n}function hQ(e,t){const n=e.__mode,r=e.__format,s=e.__style,a=t.__mode,o=t.__format,l=t.__style,c=e.__state,u=t.__state;return(n===null||n===a)&&(r===null||r===o)&&(s===null||s===l)&&(e.__state===null||c===u||function(d,m){if(d===m)return!0;if(d&&m&&d.size!==m.size)return!1;const p=new Set,h=(y,v)=>{for(const[x,b]of y.knownState){if(p.has(x.key))continue;p.add(x.key);const _=v?v.getValue(x):x.defaultValue;if(_!==b&&!x.isEqual(_,b))return!0}return!1},g=(y,v)=>{const{unknownState:x}=y,b=v?v.unknownState:void 0;if(x){for(const[_,w]of Object.entries(x))if(!p.has(_)&&(p.add(_),w!==(b?b[_]:void 0)))return!0}return!1};return!(d&&h(d,m)||m&&h(m,d)||d&&g(d,m)||m&&g(m,d))}(c,u))}function gQ(e,t){const n=e.mergeWithSibling(t),r=fr()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function yQ(e){let t,n,r=e;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(t=r.getPreviousSibling())!==null&&Ze(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(hQ(t,r)){r=gQ(t,r);break}break}t.remove()}for(;(n=r.getNextSibling())!==null&&Ze(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(n.__text!==""){if(hQ(r,n)){r=gQ(r,n);break}break}n.remove()}}else r.remove()}function Sv(e){return vQ(e.anchor),vQ(e.focus),e}function vQ(e){for(;e.type==="element";){const t=e.getNode(),n=e.offset;let r,s;if(n===t.getChildrenSize()?(r=t.getChildAtIndex(n-1),s=!0):(r=t.getChildAtIndex(n),s=!1),Ze(r)){e.set(r.__key,s?r.getTextContentSize():0,"text",!0);break}if(!Ne(r))break;e.set(r.__key,s?r.getChildrenSize():0,"element",!0)}}let Cu,Js,Ev,y3,Ij,Pj,pf,li,Oj,Mv,$r="",Xs="",Di=null,Fi="",zl="",g0e=!1,kv=!1,aw=null;function eC(e,t){const n=pf.get(e);if(t!==null){const r=Fj(e);r.parentNode===t&&t.removeChild(r)}if(li.has(e)||Js._keyToDOMMap.delete(e),Ne(n)){const r=nC(n,pf);Lj(r,0,r.length-1,null)}n!==void 0&&ND(Mv,Ev,y3,n,"destroyed")}function Lj(e,t,n,r){let s=t;for(;s<=n;++s){const a=e[s];a!==void 0&&eC(a,r)}}function cd(e,t){e.setProperty("text-align",t)}const T0t="40px";function y0e(e,t){const n=Cu.theme.indent;if(typeof n=="string"){const s=e.classList.contains(n);t>0&&!s?e.classList.add(n):t<1&&s&&e.classList.remove(n)}const r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||T0t;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${r})`)}function v0e(e,t){const n=e.style;t===0?cd(n,""):t===oD?cd(n,"left"):t===iD?cd(n,"center"):t===lD?cd(n,"right"):t===cD?cd(n,"justify"):t===uD?cd(n,"start"):t===dD&&cd(n,"end")}function tC(e,t){const n=li.get(e);n===void 0&&Fe(60);const r=n.createDOM(Cu,Js);if(function(s,a,o){const l=o._keyToDOMMap;(function(c,u,d){const m=`__lexicalKey_${u._key}`;c[m]=d})(a,o,s),l.set(s,a)}(e,r,Js),Ze(n)?r.setAttribute("data-lexical-text","true"):jn(n)&&r.setAttribute("data-lexical-decorator","true"),Ne(n)){const s=n.__indent,a=n.__size;if(s!==0&&y0e(r,s),a!==0){const l=a-1;(function(c,u,d,m){const p=Xs;Xs="",Dj(c,d,0,u,d.getDOMSlot(m)),b0e(d,m),Xs=p})(nC(n,li),l,n,r)}const o=n.__format;o!==0&&v0e(r,o),n.isInline()||x0e(null,n,r),M3(n)&&($r+=vc,zl+=vc)}else{const s=n.getTextContent();if(jn(n)){const a=n.decorate(Js,Cu);a!==null&&_0e(e,a),r.contentEditable="false"}else Ze(n)&&(n.isDirectionless()||(Xs+=s));$r+=s,zl+=s}return t!==null&&t.insertChild(r),ND(Mv,Ev,y3,n,"created"),r}function Dj(e,t,n,r,s){const a=$r;$r="";let o=n;for(;o<=r;++o){tC(e[o],s);const l=li.get(e[o]);l!==null&&Ze(l)&&(Di===null&&(Di=l.getFormat()),Fi===""&&(Fi=l.getStyle()))}M3(t)&&($r+=vc),s.element.__lexicalTextContent=$r,$r=a+$r}function xQ(e,t){if(e){const n=e.__last;if(n){const r=t.get(n);if(r)return Vd(r)?"line-break":jn(r)&&r.isInline()?"decorator":null}return"empty"}return null}function x0e(e,t,n){const r=xQ(e,pf),s=xQ(t,li);r!==s&&t.getDOMSlot(n).setManagedLineBreak(s)}function b0e(e,t){const n=t.__lexicalDirTextContent||"",r=t.__lexicalDir||"";if(n!==Xs||r!==aw){const s=Xs==="",a=s?aw:function(o){return p0t.test(o)?"rtl":h0t.test(o)?"ltr":null}(Xs);if(a!==r){const o=t.classList,l=Cu.theme;let c=r!==null?l[r]:void 0,u=a!==null?l[a]:void 0;if(c!==void 0){if(typeof c=="string"){const d=X2(c);c=l[r]=d}o.remove(...c)}if(a===null||s&&a==="ltr")t.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const d=X2(u);u=l[a]=d}u!==void 0&&o.add(...u)}t.dir=a}kv||(e.getWritable().__dir=a)}aw=a,t.__lexicalDirTextContent=Xs,t.__lexicalDir=a}}function N0t(e,t,n){const r=Xs;var s;Xs="",Di=null,Fi="",function(a,o,l){const c=$r,u=a.__size,d=o.__size;$r="";const m=l.element;if(u===1&&d===1){const p=a.__first,h=o.__first;if(p===h)My(p,m);else{const y=Fj(p),v=tC(h,null);try{m.replaceChild(v,y)}catch(x){if(typeof x=="object"&&x!=null){const b=`${x.toString()} Parent: ${m.tagName}, new child: {tag: ${v.tagName} key: ${h}}, old child: {tag: ${y.tagName}, key: ${p}}.`;throw new Error(b)}throw x}eC(p,null)}const g=li.get(h);Ze(g)&&(Di===null&&(Di=g.getFormat()),Fi===""&&(Fi=g.getStyle()))}else{const p=nC(a,pf),h=nC(o,li);if(p.length!==u&&Fe(227),h.length!==d&&Fe(228),u===0)d!==0&&Dj(h,o,0,d-1,l);else if(d===0){if(u!==0){const g=l.after==null&&l.before==null&&l.element.__lexicalLineBreak==null;Lj(p,0,u-1,g?null:m),g&&(m.textContent="")}}else(function(g,y,v,x,b,_){const w=x-1,C=b-1;let S,E,M=_.getFirstChild(),k=0,T=0;for(;k<=w&&T<=C;){const O=y[k],P=v[T];if(O===P)M=uT(My(P,_.element)),k++,T++;else{S===void 0&&(S=new Set(y)),E===void 0&&(E=new Set(v));const I=E.has(O),D=S.has(P);if(I)if(D){const F=Zp(Js,P);F===M?M=uT(My(P,_.element)):(_.withBefore(M).insertChild(F),My(P,_.element)),k++,T++}else tC(P,_.withBefore(M)),T++;else M=uT(Fj(O)),eC(O,_.element),k++}const N=li.get(P);N!==null&&Ze(N)&&(Di===null&&(Di=N.getFormat()),Fi===""&&(Fi=N.getStyle()))}const j=k>w,R=T>C;if(j&&!R){const O=v[C+1],P=O===void 0?null:Js.getElementByKey(O);Dj(v,g,T,C,_.withBefore(P))}else R&&!j&&Lj(y,k,w,_.element)})(o,p,h,u,d,l)}M3(o)&&($r+=vc),m.__lexicalTextContent=$r,$r=c+$r}(e,t,t.getDOMSlot(n)),b0e(t,n),s=t,Di==null||Di===s.__textFormat||kv||s.setTextFormat(Di),function(a){Fi===""||Fi===a.__textStyle||kv||a.setTextStyle(Fi)}(t),Xs=r}function nC(e,t){const n=[];let r=e.__first;for(;r!==null;){const s=t.get(r);s===void 0&&Fe(101),n.push(r),r=s.__next}return n}function My(e,t){const n=pf.get(e);let r=li.get(e);n!==void 0&&r!==void 0||Fe(61);const s=g0e||Pj.has(e)||Ij.has(e),a=Zp(Js,e);if(n===r&&!s){if(Ne(n)){const o=a.__lexicalTextContent;o!==void 0&&($r+=o,zl+=o);const l=a.__lexicalDirTextContent;l!==void 0&&(Xs+=l)}else{const o=n.getTextContent();Ze(n)&&!n.isDirectionless()&&(Xs+=o),zl+=o,$r+=o}return a}if(n!==r&&s&&ND(Mv,Ev,y3,r,"updated"),r.updateDOM(n,a,Cu)){const o=tC(e,null);return t===null&&Fe(62),t.replaceChild(o,a),eC(e,null),o}if(Ne(n)&&Ne(r)){const o=r.__indent;o!==n.__indent&&y0e(a,o);const l=r.__format;l!==n.__format&&v0e(a,l),s&&(N0t(n,r,a),Rs(r)||r.isInline()||x0e(n,r,a)),M3(r)&&($r+=vc,zl+=vc)}else{const o=r.getTextContent();if(jn(r)){const l=r.decorate(Js,Cu);l!==null&&_0e(e,l)}else Ze(r)&&!r.isDirectionless()&&(Xs+=o);$r+=o,zl+=o}if(!kv&&Rs(r)&&r.__cachedText!==zl){const o=r.getWritable();o.__cachedText=zl,r=o}return a}function _0e(e,t){let n=Js._pendingDecorators;const r=Js._decorators;if(n===null){if(r[e]===t)return;n=lve(Js)}n[e]=t}function uT(e){let t=e.nextSibling;return t!==null&&t===Js._blockCursorElement&&(t=t.nextSibling),t}function A0t(e,t,n,r,s,a){$r="",zl="",Xs="",g0e=r===zp,aw=null,Js=n,Cu=n._config,Ev=n._nodes,y3=Js._listeners.mutation,Ij=s,Pj=a,pf=e._nodeMap,li=t._nodeMap,kv=t._readOnly,Oj=new Map(n._keyToDOMMap);const o=new Map;return Mv=o,My("root",null),Js=void 0,Ev=void 0,Ij=void 0,Pj=void 0,pf=void 0,li=void 0,Cu=void 0,Oj=void 0,Mv=void 0,o}function Fj(e){const t=Oj.get(e);return t===void 0&&Fe(75,e),t}function zt(e){return{type:e}}const w0e=zt("SELECTION_CHANGE_COMMAND"),j0t=zt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),R0t=zt("CLICK_COMMAND"),rl=zt("DELETE_CHARACTER_COMMAND"),rp=zt("INSERT_LINE_BREAK_COMMAND"),Uj=zt("INSERT_PARAGRAPH_COMMAND"),Bd=zt("CONTROLLED_TEXT_INSERTION_COMMAND"),v3=zt("PASTE_COMMAND"),rC=zt("REMOVE_TEXT_COMMAND"),Gp=zt("DELETE_WORD_COMMAND"),qp=zt("DELETE_LINE_COMMAND"),Ad=zt("FORMAT_TEXT_COMMAND"),C0e=zt("UNDO_COMMAND"),S0e=zt("REDO_COMMAND"),I0t=zt("KEYDOWN_COMMAND"),E0e=zt("KEY_ARROW_RIGHT_COMMAND"),P0t=zt("MOVE_TO_END"),M0e=zt("KEY_ARROW_LEFT_COMMAND"),O0t=zt("MOVE_TO_START"),k0e=zt("KEY_ARROW_UP_COMMAND"),T0e=zt("KEY_ARROW_DOWN_COMMAND"),Kp=zt("KEY_ENTER_COMMAND"),L0t=zt("KEY_SPACE_COMMAND"),mD=zt("KEY_BACKSPACE_COMMAND"),N0e=zt("KEY_ESCAPE_COMMAND"),pD=zt("KEY_DELETE_COMMAND"),A0e=zt("KEY_TAB_COMMAND"),D0t=zt("OUTDENT_CONTENT_COMMAND"),j0e=zt("DROP_COMMAND"),R0e=zt("DRAGSTART_COMMAND"),F0t=zt("DRAGOVER_COMMAND"),U0t=zt("DRAGEND_COMMAND"),hD=zt("COPY_COMMAND"),gD=zt("CUT_COMMAND"),Bj=zt("SELECT_ALL_COMMAND"),PVt=zt("CLEAR_EDITOR_COMMAND"),OVt=zt("CLEAR_HISTORY_COMMAND"),LVt=zt("CAN_REDO_COMMAND"),DVt=zt("CAN_UNDO_COMMAND"),B0t=zt("FOCUS_COMMAND"),V0t=zt("BLUR_COMMAND"),W0t=zt("KEY_MODIFIER_COMMAND"),Ol=Object.freeze({}),Vj=30,Wj=[["keydown",function(e,t){if(d0=e.timeStamp,I0e=e.key,!t.isComposing()&&!ot(t,I0t,e)&&e.key!=null){if(dT&&qQ(e))return Ga(t,()=>{Kb(t,fT)}),dT=!1,void(fT="");if(function(n){return Dn(n,"ArrowRight",{shiftKey:"any"})}(e))ot(t,E0e,e);else if(function(n){return Dn(n,"ArrowRight",Ul)}(e))ot(t,P0t,e);else if(function(n){return Dn(n,"ArrowLeft",{shiftKey:"any"})}(e))ot(t,M0e,e);else if(function(n){return Dn(n,"ArrowLeft",Ul)}(e))ot(t,O0t,e);else if(function(n){return Dn(n,"ArrowUp",{altKey:"any",shiftKey:"any"})}(e))ot(t,k0e,e);else if(function(n){return Dn(n,"ArrowDown",{altKey:"any",shiftKey:"any"})}(e))ot(t,T0e,e);else if(function(n){return Dn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(e))f0=!0,ot(t,Kp,e);else if(function(n){return n.key===" "}(e))ot(t,L0t,e);else if(function(n){return Wi&&Dn(n,"o",{ctrlKey:!0})}(e))e.preventDefault(),f0=!0,ot(t,rp,!0);else if(function(n){return Dn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(e))f0=!1,ot(t,Kp,e);else if(function(n){return Dn(n,"Backspace",{shiftKey:"any"})||Wi&&Dn(n,"h",{ctrlKey:!0})}(e))qQ(e)?ot(t,mD,e):(e.preventDefault(),ot(t,rl,!0));else if(function(n){return n.key==="Escape"}(e))ot(t,N0e,e);else if(function(n){return Dn(n,"Delete",{})||Wi&&Dn(n,"d",{ctrlKey:!0})}(e))(function(n){return n.key==="Delete"})(e)?ot(t,pD,e):(e.preventDefault(),ot(t,rl,!1));else if(function(n){return Dn(n,"Backspace",GQ)}(e))e.preventDefault(),ot(t,Gp,!0);else if(function(n){return Dn(n,"Delete",GQ)}(e))e.preventDefault(),ot(t,Gp,!1);else if(function(n){return Wi&&Dn(n,"Backspace",{metaKey:!0})}(e))e.preventDefault(),ot(t,qp,!0);else if(function(n){return Wi&&(Dn(n,"Delete",{metaKey:!0})||Dn(n,"k",{ctrlKey:!0}))}(e))e.preventDefault(),ot(t,qp,!1);else if(function(n){return Dn(n,"b",Ul)}(e))e.preventDefault(),ot(t,Ad,"bold");else if(function(n){return Dn(n,"u",Ul)}(e))e.preventDefault(),ot(t,Ad,"underline");else if(function(n){return Dn(n,"i",Ul)}(e))e.preventDefault(),ot(t,Ad,"italic");else if(function(n){return Dn(n,"Tab",{shiftKey:"any"})}(e))ot(t,A0e,e);else if(function(n){return Dn(n,"z",Ul)}(e))e.preventDefault(),ot(t,C0e,void 0);else if(function(n){return Wi?Dn(n,"z",{metaKey:!0,shiftKey:!0}):Dn(n,"y",{ctrlKey:!0})||Dn(n,"z",{ctrlKey:!0,shiftKey:!0})}(e))e.preventDefault(),ot(t,S0e,void 0);else{const n=t._editorState._selection;n===null||De(n)?!iu&&KQ(e)&&(e.preventDefault(),ot(t,Bj,e)):function(r){return Dn(r,"c",Ul)}(e)?(e.preventDefault(),ot(t,hD,e)):function(r){return Dn(r,"x",Ul)}(e)?(e.preventDefault(),ot(t,gD,e)):KQ(e)&&(e.preventDefault(),ot(t,Bj,e))}(function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey})(e)&&ot(t,W0t,e)}}],["pointerdown",function(e,t){const n=e.target,r=e.pointerType;lg(n)&&r!=="touch"&&e.button===0&&Ga(t,()=>{$Q(n)||(Hj=!0)})}],["compositionstart",function(e,t){Ga(t,()=>{const n=Xe();if(De(n)&&!t.isComposing()){const r=n.anchor,s=n.anchor.getNode();hs(r.key),(e.timeStamp<d0+Vj||r.type==="element"||!n.isCollapsed()||s.getFormat()!==n.format||Ze(s)&&s.getStyle()!==n.style)&&ot(t,Bd,m0t)}})}],["compositionend",function(e,t){iu?ay=!0:Hp||!Cv&&!Q2?Ga(t,()=>{Kb(t,e.data)}):(dT=!0,fT=e.data)}],["input",function(e,t){e.stopPropagation(),Ga(t,()=>{if(Ir(e.target)&&$Q(e.target))return;const n=Xe(),r=e.data,s=F0e(e);if(r!=null&&De(n)&&L0e(n,s,r,e.timeStamp,!1)){ay&&(Kb(t,r),ay=!1);const a=n.anchor.getNode(),o=vl(Io(t));if(o===null)return;const l=n.isBackward(),c=l?n.anchor.offset:n.focus.offset,u=l?n.focus.offset:n.anchor.offset;Y2&&!n.isCollapsed()&&Ze(a)&&o.anchorNode!==null&&a.getTextContent().slice(0,c)+r+a.getTextContent().slice(c+u)===fve(o.anchorNode)||ot(t,Bd,r);const d=r.length;iu&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(n.anchor.offset-=d),Cv||Hp||Q2||!t.isComposing()||(d0=0,hs(null))}else kD(!1,t,r!==null?r:void 0),ay&&(Kb(t,r||void 0),ay=!1);(function(){As();const a=fr();m0e(a)})()},{event:e}),vm=null}],["click",function(e,t){Ga(t,()=>{const n=Xe(),r=vl(Io(t)),s=sx();if(r){if(De(n)){const a=n.anchor,o=a.getNode();if(a.type==="element"&&a.offset===0&&n.isCollapsed()&&!Rs(o)&&Yn().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&s!==null&&n.is(s))r.removeAllRanges(),n.dirty=!0;else if(e.detail===3&&!n.isCollapsed()&&o!==n.focus.getNode()){const l=function(c,u){let d=c;for(;d!==Yn()&&d!=null;){if(u(d))return d;d=d.getParent()}return null}(o,c=>Ne(c)&&!c.isInline());Ne(l)&&l.select(0)}}else if(e.pointerType==="touch"){const a=r.anchorNode;(Ir(a)||jc(a))&&Ps(xD(s,r,t,e))}}ot(t,R0t,e)})}],["cut",Ol],["copy",Ol],["dragstart",Ol],["dragover",Ol],["dragend",Ol],["paste",Ol],["focus",Ol],["blur",Ol],["drop",Ol]];Y2&&Wj.push(["beforeinput",(e,t)=>function(n,r){const s=n.inputType,a=F0e(n);s==="deleteCompositionText"||iu&&mve(r)||s!=="insertCompositionText"&&Ga(r,()=>{const o=Xe();if(s==="deleteContentBackward"){if(o===null){const h=sx();if(!De(h))return;Ps(h.clone())}if(De(o)){const h=o.anchor.key===o.focus.key;if(l=n.timeStamp,I0e==="MediaLast"&&l<d0+Vj&&r.isComposing()&&h){if(hs(null),d0=0,setTimeout(()=>{Ga(r,()=>{hs(null)})},Vj),De(o)){const g=o.anchor.getNode();g.markDirty(),Ze(g)||Fe(142),D0e(o,g)}}else{hs(null),n.preventDefault();const g=o.anchor.getNode(),y=g.getTextContent(),v=g.canInsertTextAfter(),x=o.anchor.offset===0&&o.focus.offset===y.length;let b=mQ&&h&&!x&&v;if(b&&o.isCollapsed()&&(b=!jn(fvt(o.anchor,!0))),!b){ot(r,rl,!0);const _=Xe();mQ&&De(_)&&_.isCollapsed()&&(xd=_,setTimeout(()=>xd=null))}}return}}var l;if(!De(o))return;const c=n.data;vm!==null&&kD(!1,r,vm),o.dirty&&vm===null||!o.isCollapsed()||Rs(o.anchor.getNode())||a===null||o.applyDOMRange(a),vm=null;const u=o.anchor,d=o.focus,m=u.getNode(),p=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(n.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ot(r,Bd,n);break;case"insertFromComposition":hs(null),ot(r,Bd,n);break;case"insertLineBreak":hs(null),ot(r,rp,!1);break;case"insertParagraph":hs(null),f0&&!Hp?(f0=!1,ot(r,rp,!1)):ot(r,Uj,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ot(r,v3,n);break;case"deleteByComposition":(function(h,g){return h!==g||Ne(h)||Ne(g)||!h.isToken()||!g.isToken()})(m,p)&&ot(r,rC,n);break;case"deleteByDrag":case"deleteByCut":ot(r,rC,n);break;case"deleteContent":ot(r,rl,!1);break;case"deleteWordBackward":ot(r,Gp,!0);break;case"deleteWordForward":ot(r,Gp,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ot(r,qp,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ot(r,qp,!1);break;case"formatStrikeThrough":ot(r,Ad,"strikethrough");break;case"formatBold":ot(r,Ad,"bold");break;case"formatItalic":ot(r,Ad,"italic");break;case"formatUnderline":ot(r,Ad,"underline");break;case"historyUndo":ot(r,C0e,void 0);break;case"historyRedo":ot(r,S0e,void 0)}else{if(c===`
`)n.preventDefault(),ot(r,rp,!1);else if(c===vc)n.preventDefault(),ot(r,Uj,void 0);else if(c==null&&n.dataTransfer){const h=n.dataTransfer.getData("text/plain");n.preventDefault(),o.insertRawText(h)}else c!=null&&L0e(o,a,c,n.timeStamp,!0)?(n.preventDefault(),ot(r,Bd,c)):vm=c;P0e=n.timeStamp}})}(e,t)]);let d0=0,I0e=null,P0e=0,vm=null;const sC=new WeakMap;let $j=!1,Hj=!1,f0=!1,ay=!1,dT=!1,fT="",xd=null,O0e=[0,"",0,"root",0];function L0e(e,t,n,r,s){const a=e.anchor,o=e.focus,l=a.getNode(),c=fr(),u=vl(Io(c)),d=u!==null?u.anchorNode:null,m=a.key,p=c.getElementByKey(m),h=n.length;return m!==o.key||!Ze(l)||(!s&&(!Y2||P0e<r+50)||l.isDirty()&&h<2||uve(n))&&a.offset!==o.offset&&!l.isComposing()||xm(l)||l.isDirty()&&h>1||(s||!Y2)&&p!==null&&!l.isComposing()&&d!==Qp(p)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||l.getFormat()!==e.format||l.getStyle()!==e.style||function(g,y){if(y.isSegmented())return!0;if(!g.isCollapsed())return!1;const v=g.anchor.offset,x=y.getParentOrThrow(),b=y.isToken();return v===0?!y.canInsertTextBefore()||!x.canInsertTextBefore()&&!y.isComposing()||b||function(_){const w=_.getPreviousSibling();return(Ze(w)||Ne(w)&&w.isInline())&&!w.canInsertTextAfter()}(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!x.canInsertTextAfter()&&!y.isComposing()||b)}(e,l)}function bQ(e,t){return jc(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function _Q(e,t,n){const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o}=e;$j&&($j=!1,bQ(r,s)&&bQ(a,o)&&!xd)||Ga(t,()=>{if(!n)return void Ps(null);if(!C3(t,r,a))return;let l=Xe();if(xd&&De(l)&&l.isCollapsed()){const c=l.anchor,u=xd.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(l=xd.clone(),Ps(l))}if(xd=null,De(l)){const c=l.anchor,u=c.getNode();if(l.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(l.dirty=!0);const d=Io(t).event,m=d?d.timeStamp:performance.now(),[p,h,g,y,v]=O0e,x=Yn(),b=t.isComposing()===!1&&x.getTextContent()==="";if(m<v+200&&c.offset===g&&c.key===y)ow(l,p,h);else if(c.type==="text")Ze(u)||Fe(141),D0e(l,u);else if(c.type==="element"&&!b){Ne(u)||Fe(259);const _=c.getNode();_.isEmpty()?function(w,C){const S=C.getTextFormat(),E=C.getTextStyle();ow(w,S,E)}(l,_):ow(l,0,"")}}else{const d=c.key,m=l.focus.key,p=l.getNodes(),h=p.length,g=l.isBackward(),y=g?o:s,v=g?s:o,x=g?m:d,b=g?d:m;let _=f0t,w=!1;for(let C=0;C<h;C++){const S=p[C],E=S.getTextContentSize();if(Ze(S)&&E!==0&&!(C===0&&S.__key===x&&y===E||C===h-1&&S.__key===b&&v===0)&&(w=!0,_&=S.getFormat(),_===0))break}l.format=w?_:0}}ot(t,w0e,void 0)})}function ow(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function D0e(e,t){ow(e,t.getFormat(),t.getStyle())}function F0e(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function Kb(e,t){const n=e._compositionKey;if(hs(null),n!==null&&t!=null){if(t===""){const r=es(n),s=Qp(e.getElementByKey(n));return void(s!==null&&s.nodeValue!==null&&Ze(r)&&TD(r,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const r=Xe();if(De(r)){const s=r.focus;return r.anchor.set(s.key,s.offset,s.type),void ot(e,Kp,null)}}}kD(!0,e,t)}function U0e(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const sp=new Map;function B0e(e){const t=gvt(e.target);if(t===null)return;const n=ED(t.anchorNode);if(n===null)return;Hj&&(Hj=!1,Ga(n,()=>{const c=sx(),u=t.anchorNode;(Ir(u)||jc(u))&&Ps(xD(c,t,n,e))}));const r=MD(n),s=r[r.length-1],a=s._key,o=sp.get(a),l=o||s;l!==n&&_Q(t,l,!1),_Q(t,n,!0),n!==s?sp.set(a,n):o&&sp.delete(a)}function wQ(e){e._lexicalHandled=!0}function CQ(e){return e._lexicalHandled===!0}function $0t(e){const t=e.ownerDocument,n=sC.get(t);if(n===void 0)return;const r=n-1;r>=0||Fe(164),sC.set(t,r),r===0&&t.removeEventListener("selectionchange",B0e);const s=S3(e);SD(s)?(function(o){if(o._parentEditor!==null){const l=MD(o),c=l[l.length-1]._key;sp.get(c)===o&&sp.delete(c)}else sp.delete(o._key)}(s),e.__lexicalEditor=null):s&&Fe(198);const a=U0e(e);for(let o=0;o<a.length;o++)a[o]();e.__lexicalEventHandles=[]}function zj(e,t,n){As();const r=e.__key,s=e.getParent();if(s===null)return;const a=function(l){const c=Xe();if(!De(c)||!Ne(l))return c;const{anchor:u,focus:d}=c,m=u.getNode(),p=d.getNode();return Yj(m,l)&&u.set(l.__key,0,"element"),Yj(p,l)&&d.set(l.__key,0,"element"),c}(e);let o=!1;if(De(a)&&t){const l=a.anchor,c=a.focus;l.key===r&&(oC(l,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0),c.key===r&&(oC(c,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0)}else lu(a)&&t&&e.isSelected()&&e.selectPrevious();if(De(a)&&t&&!o){const l=e.getIndexWithinParent();Wd(e),aC(a,s,l,-1)}else Wd(e);n||yi(s)||s.canBeEmpty()||!s.isEmpty()||zj(s,t),t&&a&&Rs(s)&&s.isEmpty()&&s.selectEnd()}class x3{static getType(){Fe(64,this.name)}static clone(t){Fe(65,this.name)}afterCloneFrom(t){this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),cvt(this,t)}getType(){return this.__type}isInline(){Fe(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const n=es(t);if(n===null)break;t=n.__parent}return!1}isSelected(t){const n=t||Xe();if(n==null)return!1;const r=n.getNodes().some(s=>s.__key===this.__key);if(Ze(this))return r;if(De(n)&&n.anchor.type==="element"&&n.focus.type==="element"){if(n.isCollapsed())return!1;const s=this.getParent();if(jn(this)&&this.isInline()&&s){const a=n.isBackward()?n.focus:n.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let n=t.getFirstChild(),r=0;for(;n!==null;){if(this.is(n))return r;r++,n=n.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:es(t)}getParentOrThrow(){const t=this.getParent();return t===null&&Fe(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const n=t.getParent();if(yi(n))return Ne(t)||t===this&&jn(t)||Fe(194),t;t=n}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&Fe(67,this.__key),t}getParents(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n),n=n.getParent();return t}getParentKeys(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n.__key),n=n.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:es(t)}getPreviousSiblings(){const t=[],n=this.getParent();if(n===null)return t;let r=n.getFirstChild();for(;r!==null&&!r.is(this);)t.push(r),r=r.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:es(t)}getNextSiblings(){const t=[];let n=this.getNextSibling();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getCommonAncestor(t){const n=Ne(this)?this:this.getParent(),r=Ne(t)?t:t.getParent(),s=n&&r?cw(n,r):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const n=cw(this,t);return n!==null&&(n.type==="descendant"||(n.type==="branch"?vve(n)===-1:(n.type!=="same"&&n.type!=="ancestor"&&Fe(279),!1)))}isParentOf(t){const n=cw(this,t);return n!==null&&n.type==="ancestor"}getNodesBetween(t){const n=this.isBefore(t),r=[],s=new Set;let a=this;for(;a!==null;){const o=a.__key;if(s.has(o)||(s.add(o),r.push(a)),a===t)break;const l=Ne(a)?n?a.getFirstChild():a.getLastChild():null;if(l!==null){a=l;continue}const c=n?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||r.push(u),u===t)break;let d=null,m=u;do{if(m===null&&Fe(68),d=n?m.getNextSibling():m.getPreviousSibling(),m=m.getParent(),m===null)break;d!==null||s.has(m.__key)||r.push(m)}while(d===null);a=d}return n||r.reverse(),r}isDirty(){const t=fr()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=es(this.__key);return t===null&&Fe(113),t}getWritable(){As();const t=Uu(),n=fr(),r=t._nodeMap,s=this.__key,a=this.getLatest(),o=n._cloneNotNeeded,l=Xe();if(l!==null&&l.setCachedNodes(null),o.has(s))return lC(a),a;const c=hve(a);return o.add(s),lC(c),r.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,n){Fe(70)}updateDOM(t,n,r){Fe(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){Fe(18,this.name)}updateFromJSON(t){return function(n,r){const s=n.getWritable();return(r||s.__state)&&k0t(n).updateFromJSON(r),s}(this,t.$)}static transform(){return null}remove(t){zj(this,!0,t)}replace(t,n){As();let r=Xe();r!==null&&(r=r.clone()),vT(this,t);const s=this.getLatest(),a=this.__key,o=t.__key,l=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;Wd(l);const d=s.getPreviousSibling(),m=s.getNextSibling(),p=s.__prev,h=s.__next,g=s.__parent;if(zj(s,!1,!0),d===null?c.__first=o:d.getWritable().__next=o,l.__prev=p,m===null?c.__last=o:m.getWritable().__prev=o,l.__next=h,l.__parent=g,c.__size=u,n&&(Ne(this)&&Ne(l)||Fe(139),this.getChildren().forEach(y=>{l.append(y)})),De(r)){Ps(r);const y=r.anchor,v=r.focus;y.key===a&&kQ(y,l),v.key===a&&kQ(v,l)}return Jc()===a&&hs(o),l}insertAfter(t,n=!0){As(),vT(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.getParent(),o=Xe();let l=!1,c=!1;if(a!==null){const h=t.getIndexWithinParent();if(Wd(s),De(o)){const g=a.__key,y=o.anchor,v=o.focus;l=y.type==="element"&&y.key===g&&y.offset===h+1,c=v.type==="element"&&v.key===g&&v.offset===h+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),m=s.__key,p=r.__next;if(u===null?d.__last=m:u.getWritable().__prev=m,d.__size++,r.__next=m,s.__next=p,s.__prev=r.__key,s.__parent=r.__parent,n&&De(o)){const h=this.getIndexWithinParent();aC(o,d,h+1);const g=d.__key;l&&o.anchor.set(g,h+2,"element"),c&&o.focus.set(g,h+2,"element")}return t}insertBefore(t,n=!0){As(),vT(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.__key;Wd(s);const o=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),c=r.__prev,u=this.getIndexWithinParent();o===null?l.__first=a:o.getWritable().__next=a,l.__size++,r.__prev=a,s.__prev=c,s.__next=r.__key,s.__parent=r.__parent;const d=Xe();return n&&De(d)&&aC(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return ur()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,n){As();const r=this.getPreviousSibling(),s=this.getParentOrThrow();if(r===null)return s.select(0,0);if(Ne(r))return r.select();if(!Ze(r)){const a=r.getIndexWithinParent()+1;return s.select(a,a)}return r.select(t,n)}selectNext(t,n){As();const r=this.getNextSibling(),s=this.getParentOrThrow();if(r===null)return s.select();if(Ne(r))return r.select(0,0);if(!Ze(r)){const a=r.getIndexWithinParent();return s.select(a,a)}return r.select(t,n)}markDirty(){this.getWritable()}reconcileObservedMutation(t,n){this.markDirty()}}class tx extends x3{static getType(){return"linebreak"}static clone(t){return new tx(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(n){const r=n.parentElement;if(r!==null&&cC(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&Yb(s)){const a=r.lastChild;if(a===n||a.previousSibling===n&&Yb(a))return!0}}return!1}(t)||function(n){const r=n.parentElement;if(r!==null&&cC(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&Yb(s))return!1;const a=r.lastChild;if(a===n||a.previousSibling===n&&Yb(a))return!0}return!1}(t)?null:{conversion:H0t,priority:0}}}static importJSON(t){return Ro().updateFromJSON(t)}}function H0t(e){return{node:Ro()}}function Ro(){return fo(new tx)}function Vd(e){return e instanceof tx}function Yb(e){return jc(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function mT(e,t){return 16&t?"code":t&aD?"mark":32&t?"sub":64&t?"sup":null}function pT(e,t){return 1&t?"strong":2&t?"em":"span"}function V0e(e,t,n,r,s){const a=r.classList;let o=ap(s,"base");o!==void 0&&a.add(...o),o=ap(s,"underlineStrikethrough");let l=!1;const c=t&J2&&t&Z2;o!==void 0&&(n&J2&&n&Z2?(l=!0,c||a.add(...o)):c&&a.remove(...o));for(const u in mf){const d=mf[u];if(o=ap(s,u),o!==void 0)if(n&d){if(l&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...o);continue}t&d&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...o)}else t&d&&a.remove(...o)}}function W0e(e,t,n){const r=t.firstChild,s=n.isComposing(),a=e+(s?g3:"");if(r==null)t.textContent=a;else{const o=r.nodeValue;if(o!==a)if(s||iu){const[l,c,u]=function(d,m){const p=d.length,h=m.length;let g=0,y=0;for(;g<p&&g<h&&d[g]===m[g];)g++;for(;y+g<p&&y+g<h&&d[p-y-1]===m[h-y-1];)y++;return[g,p-g-y,m.slice(g,h-y)]}(o,a);c!==0&&r.deleteData(l,c),r.insertData(l,u)}else r.nodeValue=a}}function SQ(e,t,n,r,s,a){W0e(s,e,t);const o=a.theme.text;o!==void 0&&V0e(0,0,r,e,o)}function Qb(e,t){const n=document.createElement(t);return n.appendChild(e),n}class Fu extends x3{static getType(){return"text"}static clone(t){return new Fu(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",n){super(n),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return x0t[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Jc()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const n=mf[t];return!!(this.getFormat()&n)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,n){return iC(this.getLatest().__format,t,n)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,n){const r=this.__format,s=mT(0,r),a=pT(0,r),o=s===null?a:s,l=document.createElement(o);let c=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),l.appendChild(c)),SQ(c,this,0,r,this.__text,t);const u=this.__style;return u!==""&&(l.style.cssText=u),l}updateDOM(t,n,r){const s=this.__text,a=t.__format,o=this.__format,l=mT(0,a),c=mT(0,o),u=pT(0,a),d=pT(0,o);if((l===null?u:l)!==(c===null?d:c))return!0;if(l===c&&u!==d){const y=n.firstChild;y==null&&Fe(48);const v=document.createElement(d);return SQ(v,this,0,o,s,r),n.replaceChild(v,y),!1}let m=n;c!==null&&l!==null&&(m=n.firstChild,m==null&&Fe(49)),W0e(s,m,this);const p=r.theme.text;p!==void 0&&a!==o&&V0e(0,a,o,m,p);const h=t.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:K0t,priority:0}),b:()=>({conversion:G0t,priority:0}),code:()=>({conversion:Ll,priority:0}),em:()=>({conversion:Ll,priority:0}),i:()=>({conversion:Ll,priority:0}),mark:()=>({conversion:Ll,priority:0}),s:()=>({conversion:Ll,priority:0}),span:()=>({conversion:z0t,priority:0}),strong:()=>({conversion:Ll,priority:0}),sub:()=>({conversion:Ll,priority:0}),sup:()=>({conversion:Ll,priority:0}),u:()=>({conversion:Ll,priority:0})}}static importJSON(t){return Jn().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:n}=super.exportDOM(t);return Ir(n)||Fe(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=Qb(n,"b")),this.hasFormat("italic")&&(n=Qb(n,"i")),this.hasFormat("strikethrough")&&(n=Qb(n,"s")),this.hasFormat("underline")&&(n=Qb(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,n){}setFormat(t){const n=this.getWritable();return n.__format=typeof t=="string"?mf[t]:t,n}setDetail(t){const n=this.getWritable();return n.__detail=typeof t=="string"?g0t[t]:t,n}setStyle(t){const n=this.getWritable();return n.__style=t,n}toggleFormat(t){const n=iC(this.getFormat(),t,null);return this.setFormat(n)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const n=v0t[t];if(this.__mode===n)return this;const r=this.getWritable();return r.__mode=n,r}setTextContent(t){if(this.__text===t)return this;const n=this.getWritable();return n.__text=t,n}select(t,n){As();let r=t,s=n;const a=Xe(),o=this.getTextContent(),l=this.__key;if(typeof o=="string"){const c=o.length;r===void 0&&(r=c),s===void 0&&(s=c)}else r=0,s=0;if(!De(a))return z0e(l,r,l,s,"text","text");{const c=Jc();c!==a.anchor.key&&c!==a.focus.key||hs(l),a.setTextNodeRange(this,r,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,n,r,s){const a=this.getWritable(),o=a.__text,l=r.length;let c=t;c<0&&(c=l+c,c<0&&(c=0));const u=Xe();if(s&&De(u)){const m=t+l;u.setTextNodeRange(a,m,a,m)}const d=o.slice(0,c)+r+o.slice(c+n);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){As();const n=this.getLatest(),r=n.getTextContent();if(r==="")return[];const s=n.__key,a=Jc(),o=r.length;t.sort((M,k)=>M-k),t.push(o);const l=[],c=t.length;for(let M=0,k=0;M<o&&k<=c;k++){const T=t[k];T>M&&(l.push(r.slice(M,T)),M=T)}const u=l.length;if(u===1)return[n];const d=l[0],m=n.getParent();let p;const h=n.getFormat(),g=n.getStyle(),y=n.__detail;let v=!1,x=null,b=null;const _=Xe();if(De(_)){const[M,k]=_.isBackward()?[_.focus,_.anchor]:[_.anchor,_.focus];M.type==="text"&&M.key===s&&(x=M),k.type==="text"&&k.key===s&&(b=k)}n.isSegmented()?(p=Jn(d),p.__format=h,p.__style=g,p.__detail=y,v=!0):(p=n.getWritable(),p.__text=d);const w=[p];for(let M=1;M<u;M++){const k=Jn(l[M]);k.__format=h,k.__style=g,k.__detail=y;const T=k.__key;a===s&&hs(T),w.push(k)}const C=x?x.offset:null,S=b?b.offset:null;let E=0;for(const M of w){if(!x&&!b)break;const k=E+M.getTextContentSize();if(x!==null&&C!==null&&C<=k&&C>=E&&(x.set(M.getKey(),C-E,"text"),C<k&&(x=null)),b!==null&&S!==null&&S<=k&&S>=E){b.set(M.getKey(),S-E,"text");break}E=k}if(m!==null){(function(T){const j=T.getPreviousSibling(),R=T.getNextSibling();j!==null&&lC(j),R!==null&&lC(R)})(this);const M=m.getWritable(),k=this.getIndexWithinParent();v?(M.splice(k,0,w),this.remove()):M.splice(k,1,w),De(_)&&aC(_,m,k,u-1)}return w}mergeWithSibling(t){const n=t===this.getPreviousSibling();n||t===this.getNextSibling()||Fe(50);const r=this.__key,s=t.__key,a=this.__text,o=a.length;Jc()===s&&hs(r);const l=Xe();if(De(l)){const m=l.anchor,p=l.focus;m!==null&&m.key===s&&PQ(m,n,r,t,o),p!==null&&p.key===s&&PQ(p,n,r,t,o)}const c=t.__text,u=n?c+a:a+c;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function z0t(e){return{forChild:yD(e.style),node:null}}function G0t(e){const t=e,n=t.style.fontWeight==="normal";return{forChild:yD(t.style,n?void 0:"bold"),node:null}}const EQ=new WeakMap;function q0t(e){if(!Ir(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function K0t(e){const t=e;e.parentElement===null&&Fe(129);let n=t.textContent||"";if(function(r){let s,a=r.parentNode;const o=[r];for(;a!==null&&(s=EQ.get(a))===void 0&&!q0t(a);)o.push(a),a=a.parentNode;const l=s===void 0?a:s;for(let c=0;c<o.length;c++)EQ.set(o[c],l);return l}(t)!==null){const r=n.split(/(\r?\n|\t)/),s=[],a=r.length;for(let o=0;o<a;o++){const l=r[o];l===`
`||l===`\r
`?s.push(Ro()):l==="	"?s.push(rx()):l!==""&&s.push(Jn(l))}return{node:s}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),n==="")return{node:null};if(n[0]===" "){let r=t,s=!0;for(;r!==null&&(r=MQ(r,!1))!==null;){const a=r.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(n=n.slice(1)),s=!1;break}}s&&(n=n.slice(1))}if(n[n.length-1]===" "){let r=t,s=!0;for(;r!==null&&(r=MQ(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(n=n.slice(0,n.length-1))}return n===""?{node:null}:{node:Jn(n)}}function MQ(e,t){let n=e;for(;;){let r;for(;(r=t?n.nextSibling:n.previousSibling)===null;){const a=n.parentElement;if(a===null)return null;n=a}if(n=r,Ir(n)){const a=n.style.display;if(a===""&&!Zj(n)||a!==""&&!a.startsWith("inline"))return null}let s=n;for(;(s=t?n.firstChild:n.lastChild)!==null;)n=s;if(jc(n))return n;if(n.nodeName==="BR")return null}}const Y0t={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Ll(e){const t=Y0t[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:yD(e.style,t),node:null}}function Jn(e=""){return fo(new Fu(e))}function Ze(e){return e instanceof Fu}function yD(e,t){const n=e.fontWeight,r=e.textDecoration.split(" "),s=n==="700"||n==="bold",a=r.includes("line-through"),o=e.fontStyle==="italic",l=r.includes("underline"),c=e.verticalAlign;return u=>(Ze(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),o&&!u.hasFormat("italic")&&u.toggleFormat("italic"),l&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class nx extends Fu{static getType(){return"tab"}static clone(t){return new nx(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const n=super.createDOM(t),r=ap(t.theme,"tab");return r!==void 0&&n.classList.add(...r),n}static importJSON(t){return rx().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&Fe(126),super.setTextContent(t)}setDetail(t){return t!==2&&Fe(127),this}setMode(t){return t!=="normal"&&Fe(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function rx(){return fo(new nx)}function vD(e){return e instanceof nx}class Q0t{constructor(t,n,r){this._selection=null,this.key=t,this.offset=n,this.type=r}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:yve(Yi(Eu(this,"next")),Yi(Eu(t,"next")))<0}getNode(){const t=es(this.key);return t===null&&Fe(20),t}set(t,n,r,s){const a=this._selection,o=this.key;s&&this.key===t&&this.offset===n&&this.type===r||(this.key=t,this.offset=n,this.type=r,ax()||(Jc()===o&&hs(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function yl(e,t,n){return new Q0t(e,t,n)}function hT(e,t){let n=t.__key,r=e.offset,s="element";if(Ze(t)){s="text";const a=t.getTextContentSize();r>a&&(r=a)}else if(!Ne(t)){const a=t.getNextSibling();if(Ze(a))n=a.__key,r=0,s="text";else{const o=t.getParent();o&&(n=o.__key,r=t.getIndexWithinParent()+1)}}e.set(n,r,s)}function kQ(e,t){if(Ne(t)){const n=t.getLastDescendant();Ne(n)||Ze(n)?hT(e,n):hT(e,t)}else hT(e,t)}class b3{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!lu(t))return!1;const n=this._nodes,r=t._nodes;return n.size===r.size&&Array.from(n).every(s=>r.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new b3(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const n=this.getNodes(),r=n.length,s=n[r-1];let a;if(Ze(s))a=s.select();else{const o=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(o,o)}a.insertNodes(t);for(let o=0;o<r;o++)n[o].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=this._nodes,r=[];for(const s of n){const a=es(s);a!==null&&r.push(a)}return ax()||(this._cachedNodes=r),r}getTextContent(){const t=this.getNodes();let n="";for(let r=0;r<t.length;r++)n+=t[r].getTextContent();return n}deleteNodes(){const t=this.getNodes();if((Xe()||sx())===this&&t[0]){const n=_s(t[0],"next");Tvt(vf(n,n))}for(const n of t)n.remove()}}function De(e){return e instanceof Df}class Df{constructor(t,n,r,s){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!De(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=function(r){const s=[],[a,o]=r.getTextSlices();a&&s.push(a.caret.origin);const l=new Set,c=new Set;for(const u of r)if(sl(u)){const{origin:d}=u;s.length===0?l.add(d):(c.add(d),s.push(d))}else{const{origin:d}=u;Ne(d)&&c.has(d)||s.push(d)}if(o&&s.push(o.caret.origin),Jp(r.focus)&&Ne(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let u=Su(r.focus.origin,"previous");sl(u)&&l.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=OD(u))l.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Ne(u)||c.has(u)||u.isEmpty()||l.has(u))break;s.pop()}if(s.length===0&&r.isCollapsed()){const u=Yi(r.anchor),d=Yi(r.anchor.getFlipped()),m=h=>$d(h)?h.origin:h.getNodeAtCaret(),p=m(u)||m(d)||(r.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(p)}return s}(bve(eX(this),"next"));return ax()||(this._cachedNodes=n),n}setTextNodeRange(t,n,r,s){this.anchor.set(t.__key,n,"text"),this.focus.set(r.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const n=t[0],r=t[t.length-1],s=this.anchor,a=this.focus,o=s.isBefore(a),[l,c]=Gj(this);let u="",d=!0;for(let m=0;m<t.length;m++){const p=t[m];if(Ne(p)&&!p.isInline())d||(u+=`
`),d=!p.isEmpty();else if(d=!1,Ze(p)){let h=p.getTextContent();p===n?p===r?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(h=l<c?h.slice(l,c):h.slice(c,l)):h=o?h.slice(l):h.slice(c):p===r&&(h=o?h.slice(0,c):h.slice(0,l)),u+=h}else!jn(p)&&!Vd(p)||p===r&&this.isCollapsed()||(u+=p.getTextContent())}return u}applyDOMRange(t){const n=fr(),r=n.getEditorState()._selection,s=H0e(t.startContainer,t.startOffset,t.endContainer,t.endOffset,n,r);if(s===null)return;const[a,o]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(o.key,o.offset,o.type,!0),Sv(this)}clone(){const t=this.anchor,n=this.focus;return new Df(yl(t.key,t.offset,t.type),yl(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(t){this.format=iC(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const n=mf[t];return!!(this.format&n)}insertRawText(t){const n=t.split(/(\r?\n|\t)/),r=[],s=n.length;for(let a=0;a<s;a++){const o=n[a];o===`
`||o===`\r
`?r.push(Ro()):o==="	"?r.push(rx()):r.push(Jn(o))}this.insertNodes(r)}insertText(t){const n=this.anchor,r=this.focus,s=this.format,a=this.style;let o=n,l=r;!this.isCollapsed()&&r.isBefore(n)&&(o=r,l=n),o.type==="element"&&function(v,x,b,_){const w=v.getNode(),C=w.getChildAtIndex(v.offset),S=Jn(),E=Rs(w)?ur().append(S):S;S.setFormat(b),S.setStyle(_),C===null?w.append(E):C.insertBefore(E),v.is(x)&&x.set(S.__key,0,"text"),v.set(S.__key,0,"text")}(o,l,s,a),l.type==="element"&&Nv(l,Yi(Eu(l,"next")));const c=o.offset;let u=l.offset;const d=this.getNodes(),m=d.length;let p=d[0];Ze(p)||Fe(26);const h=p.getTextContent().length,g=p.getParentOrThrow();let y=d[m-1];if(m===1&&l.type==="element"&&(u=h,l.set(o.key,u,"text")),this.isCollapsed()&&c===h&&(p.isSegmented()||p.isToken()||!p.canInsertTextAfter()||!g.canInsertTextAfter()&&p.getNextSibling()===null)){let v=p.getNextSibling();if(Ze(v)&&v.canInsertTextBefore()&&!xm(v)||(v=Jn(),v.setFormat(s),v.setStyle(a),g.canInsertTextAfter()?p.insertAfter(v):g.insertAfter(v)),v.select(0,0),p=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(p.isSegmented()||p.isToken()||!p.canInsertTextBefore()||!g.canInsertTextBefore()&&p.getPreviousSibling()===null)){let v=p.getPreviousSibling();if(Ze(v)&&!xm(v)||(v=Jn(),v.setFormat(s),g.canInsertTextBefore()?p.insertBefore(v):g.insertBefore(v)),v.select(),p=v,t!=="")return void this.insertText(t)}else if(p.isSegmented()&&c!==h){const v=Jn(p.getTextContent());v.setFormat(s),p.replace(v),p=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||Ne(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),$0e(this.anchor,this.focus,null),void this.insertText(t)}if(m===1){if(p.isToken()){const _=Jn(t);return _.select(),void p.replace(_)}const v=p.getFormat(),x=p.getStyle();if(c!==u||v===s&&x===a){if(vD(p)){const _=Jn(t);return _.setFormat(s),_.setStyle(a),_.select(),void p.replace(_)}}else{if(p.getTextContent()!==""){const _=Jn(t);if(_.setFormat(s),_.setStyle(a),_.select(),c===0)p.insertBefore(_,!1);else{const[w]=p.splitText(c);w.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}p.setFormat(s),p.setStyle(a)}const b=u-c;p=p.spliceText(c,b,t,!0),p.getTextContent()===""?p.remove():this.anchor.type==="text"&&(p.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=x))}else{const v=new Set([...p.getParentKeys(),...y.getParentKeys()]),x=Ne(p)?p:p.getParentOrThrow();let b=Ne(y)?y:y.getParentOrThrow(),_=y;if(!x.is(b)&&b.isInline())do _=b,b=b.getParentOrThrow();while(b.isInline());if(l.type==="text"&&(u!==0||y.getTextContent()==="")||l.type==="element"&&y.getIndexWithinParent()<u)if(Ze(y)&&!y.isToken()&&u!==y.getTextContentSize()){if(y.isSegmented()){const M=Jn(y.getTextContent());y.replace(M),y=M}Rs(l.getNode())||l.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const M=y.getParentOrThrow();M.canBeEmpty()||M.getChildrenSize()!==1?y.remove():M.remove()}else v.add(y.__key);const w=b.getChildren(),C=new Set(d),S=x.is(b),E=x.isInline()&&p.getNextSibling()===null?x:p;for(let M=w.length-1;M>=0;M--){const k=w[M];if(k.is(p)||Ne(k)&&k.isParentOf(p))break;k.isAttached()&&(!C.has(k)||k.is(_)?S||E.insertAfter(k,!1):k.remove())}if(!S){let M=b,k=null;for(;M!==null;){const T=M.getChildren(),j=T.length;(j===0||T[j-1].is(k))&&(v.delete(M.__key),k=M),M=M.getParent()}}if(p.isToken())if(c===h)p.select();else{const M=Jn(t);M.select(),p.replace(M)}else p=p.spliceText(c,h-c,t,!0),p.getTextContent()===""?p.remove():p.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let M=1;M<m;M++){const k=d[M],T=k.__key;v.has(T)||k.remove()}}}removeText(){const t=Xe()===this;uw(this,Nvt(eX(this))),t&&Xe()!==this&&Ps(this)}formatText(t,n=null){if(this.isCollapsed())return this.toggleFormat(t),void hs(null);const r=this.getNodes(),s=[];for(const w of r)Ze(w)&&s.push(w);const a=w=>{r.forEach(C=>{if(Ne(C)){const S=C.getFormatFlags(t,w);C.setTextFormat(S)}})},o=s.length;if(o===0)return this.toggleFormat(t),hs(null),void a(n);const l=this.anchor,c=this.focus,u=this.isBackward(),d=u?c:l,m=u?l:c;let p=0,h=s[0],g=d.type==="element"?0:d.offset;if(d.type==="text"&&g===h.getTextContentSize()&&(p=1,h=s[1],g=0),h==null)return;const y=h.getFormatFlags(t,n);a(y);const v=o-1;let x=s[v];const b=m.type==="text"?m.offset:x.getTextContentSize();if(h.is(x)){if(g===b)return;if(xm(h)||g===0&&b===h.getTextContentSize())h.setFormat(y);else{const w=h.splitText(g,b),C=g===0?w[0]:w[1];C.setFormat(y),d.type==="text"&&d.set(C.__key,0,"text"),m.type==="text"&&m.set(C.__key,b-g,"text")}return void(this.format=y)}g===0||xm(h)||([,h]=h.splitText(g),g=0),h.setFormat(y);const _=x.getFormatFlags(t,y);b>0&&(b===x.getTextContentSize()||xm(x)||([x]=x.splitText(b)),x.setFormat(_));for(let w=p+1;w<v;w++){const C=s[w],S=C.getFormatFlags(t,_);C.setFormat(S)}d.type==="text"&&d.set(h.__key,g,"text"),m.type==="text"&&m.set(x.__key,b,"text"),this.format=y|_}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const g=Xe();return De(g)||Fe(134),g.insertNodes(t)}const n=(this.isBackward()?this.focus:this.anchor).getNode(),r=bT(n,qc),s=t[t.length-1];if(Ne(r)&&"__language"in r){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const g=gT(this);r.splice(g,0,t),s.selectEnd()}return}if(!t.some(g=>(Ne(g)||jn(g))&&!g.isInline())){Ne(r)||Fe(211,n.constructor.name,n.getType());const g=gT(this);return r.splice(g,0,t),void s.selectEnd()}const a=function(g){const y=ur();let v=null;for(let x=0;x<g.length;x++){const b=g[x],_=Vd(b);if(_||jn(b)&&b.isInline()||Ne(b)&&b.isInline()||Ze(b)||b.isParentRequired()){if(v===null&&(v=b.createParentElementNode(),y.append(v),_))continue;v!==null&&v.append(b)}else y.append(b),v=null}return y}(t),o=a.getLastDescendant(),l=a.getChildren(),c=!Ne(r)||!r.isEmpty()?this.insertParagraph():null,u=l[l.length-1];let d=l[0];var m;Ne(m=d)&&qc(m)&&!m.isEmpty()&&Ne(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(Ne(r)||Fe(211,n.constructor.name,n.getType()),r.append(...d.getChildren()),d=l[1]),d&&(r===null&&Fe(212,n.constructor.name,n.getType()),function(g,y,v){const x=y.getParentOrThrow().getLastChild();let b=y;const _=[y];for(;b!==x;)b.getNextSibling()||Fe(140),b=b.getNextSibling(),_.push(b);let w=g;for(const C of _)w=w.insertAfter(C)}(r,d));const p=bT(o,qc);c&&Ne(p)&&(c.canMergeWhenEmpty()||qc(u))&&(p.append(...c.getChildren()),c.remove()),Ne(r)&&r.isEmpty()&&r.remove(),o.selectEnd();const h=Ne(r)?r.getLastChild():null;Vd(h)&&p!==r&&h.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=ur();return Yn().splice(this.anchor.offset,0,[o]),o.select(),o}const t=gT(this),n=bT(this.anchor.getNode(),qc);Ne(n)||Fe(213);const r=n.getChildAtIndex(t),s=r?[r,...r.getNextSiblings()]:[],a=n.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const n=Ro();if(this.insertNodes([n]),t){const r=n.getParentOrThrow(),s=n.getIndexWithinParent();r.select(s,s)}}extract(){const t=this.getNodes(),n=t.length,r=n-1,s=this.anchor,a=this.focus;let o=t[0],l=t[r];const[c,u]=Gj(this);if(n===0)return[];if(n===1){if(Ze(o)&&!this.isCollapsed()){const m=c>u?u:c,p=c>u?c:u,h=o.splitText(m,p),g=m===0?h[0]:h[1];return g!=null?[g]:[]}return[o]}const d=s.isBefore(a);if(Ze(o)){const m=d?c:u;m===o.getTextContentSize()?t.shift():m!==0&&([,o]=o.splitText(m),t[0]=o)}if(Ze(l)){const m=l.getTextContent().length,p=d?u:c;p===0?t.pop():p!==m&&([l]=l.splitText(p),t[r]=l)}return t}modify(t,n,r){if(OQ(this,t,n,r))return;const s=t==="move",a=fr(),o=vl(Io(a));if(!o)return;const l=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||l===null||!Ne(u)||u.isInline()||u.canBeEmpty()||Qj(l,a,c),this.dirty){let d=Zp(a,this.anchor.key),m=Zp(a,this.focus.key);this.anchor.type==="text"&&(d=Qp(d)),this.focus.type==="text"&&(m=Qp(m)),d&&m&&K0e(o,d,this.anchor.offset,m,this.focus.offset)}if(function(d,m,p,h){d.modify(m,p,h)}(o,t,n?"backward":"forward",r),o.rangeCount>0){const d=o.getRangeAt(0),m=this.anchor.getNode(),p=Rs(m)?m:pvt(m);if(this.applyDOMRange(d),this.dirty=!0,!s){const h=this.getNodes(),g=[];let y=!1;for(let v=0;v<h.length;v++){const x=h[v];Yj(x,p)?g.push(x):y=!0}if(y&&g.length>0)if(n){const v=g[0];Ne(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=g[g.length-1];Ne(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}o.anchorNode===d.startContainer&&o.anchorOffset===d.startOffset||function(v){const x=v.focus,b=v.anchor,_=b.key,w=b.offset,C=b.type;b.set(x.key,x.offset,x.type,!0),x.set(_,w,C,!0)}(this)}}r==="lineboundary"&&OQ(this,t,n,r,"decorators")}forwardDeletion(t,n,r){if(!r&&(t.type==="element"&&Ne(n)&&t.offset===n.getChildrenSize()||t.type==="text"&&t.offset===n.getTextContentSize())){const s=n.getParent(),a=n.getNextSibling()||(s===null?null:s.getNextSibling());if(Ne(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const n=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let s=r.getNode();if(this.forwardDeletion(r,s,t))return;const a=DD(Eu(r,t?"previous":"next"));if(a.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(sl(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(l.type==="merge-block")break;if(Ne(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=Yi(c);uw(this,vf(u,u)),a.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:c,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(Jp(c)){if(Ne(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else l={block:c.origin,type:"merge-next-block"};continue}if(jn(c.origin)){if(!c.origin.isIsolated())if(l.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Ne(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=q0e();u.add(c.origin.getKey()),Ps(u)}else c.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:c,block:u}=l;return uw(this,vf(!c.origin.isEmpty()&&u.isEmpty()?FD(_s(u,c.direction)):a.anchor,c)),this.removeText()}}const o=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&r.offset===0&&NQ(this,r.getNode()))return}else{const l=o.type==="text"?o.getNode():null;if(s=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const c=o.offset,u=l.getTextContentSize();if(l.is(s)||t&&c!==u||!t&&c!==0)return void AQ(l,t,c)}else if(s!==null&&s.isSegmented()){const c=r.offset,u=s.getTextContentSize();if(s.is(l)||t&&c!==0||!t&&c!==u)return void AQ(s,t,c)}(function(c,u){const d=c.anchor,m=c.focus,p=d.getNode(),h=m.getNode();if(p===h&&d.type==="text"&&m.type==="text"){const g=d.offset,y=m.offset,v=g<y,x=v?g:y,b=v?y:g,_=b-1;x!==_&&function(w){return!(uve(w)||X0t(w))}(p.getTextContent().slice(x,b))&&(u?m.set(m.key,_,m.type):d.set(d.key,_,d.type))}})(this,t)}}if(this.removeText(),t&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&Rs(r.getParent())&&r.getPreviousSibling()===null&&NQ(this,r)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const n=this.anchor,r=n.getNode();if(this.forwardDeletion(n,r,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function lu(e){return e instanceof b3}function TQ(e){const t=e.offset;if(e.type==="text")return t;const n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function Gj(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[n,r]=t;return n.type==="element"&&r.type==="element"&&n.key===r.key&&n.offset===r.offset?[0,0]:[TQ(n),TQ(r)]}function NQ(e,t){for(let n=t;n;n=n.getParent()){if(Ne(n)){if(n.collapseAtStart(e))return!0;if(yi(n))break}if(n.getPreviousSibling())break}return!1}const X0t=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function AQ(e,t,n){const r=e,s=r.getTextContent().split(/(?=\s)/g),a=s.length;let o=0,l=0;for(let u=0;u<a;u++){const d=u===a-1;if(l=o,o+=s[u].length,t&&o===n||o>n||d){s.splice(u,1),d&&(l=void 0);break}}const c=s.join("").trim();c===""?r.remove():(r.setTextContent(c),r.select(l,l))}function jQ(e,t,n,r){let s,a=t;if(Ir(e)){let o=!1;const l=e.childNodes,c=l.length,u=r._blockCursorElement;a===c&&(o=!0,a=c-1);let d=l[a],m=!1;if(d===u)d=l[a+1],m=!0;else if(u!==null){const p=u.parentNode;e===p&&t>Array.prototype.indexOf.call(p.children,u)&&a--}if(s=Pm(d),Ze(s))a=zQ(s,o);else{let p=Pm(e);if(p===null)return null;if(Ne(p)){const h=r.getElementByKey(p.getKey());h===null&&Fe(214),[p,a]=p.getDOMSlot(h).resolveChildIndex(p,h,e,t),Ne(p)||Fe(215),o&&a>=p.getChildrenSize()&&(a=Math.max(0,p.getChildrenSize()-1));let y=p.getChildAtIndex(a);if(Ne(y)&&function(v,x,b){const _=v.getParent();return b===null||_===null||!_.canBeEmpty()||_!==b.getNode()}(y,0,n)){const v=o?y.getLastDescendant():y.getFirstDescendant();v===null?p=y:(y=v,p=Ne(y)?y:y.getParentOrThrow()),a=0}Ze(y)?(s=y,p=null,a=zQ(y,o)):y!==p&&o&&!m&&(Ne(p)||Fe(216),a=Math.min(p.getChildrenSize(),a+1))}else{const h=p.getIndexWithinParent();a=t===0&&jn(p)&&Pm(e)===p?h:h+1,p=p.getParentOrThrow()}if(Ne(p))return yl(p.__key,a,"element")}}else s=Pm(e);return Ze(s)?yl(s.__key,a,"text"):null}function RQ(e,t,n){const r=e.offset,s=e.getNode();if(r===0){const a=s.getPreviousSibling(),o=s.getParent();if(t){if((n||!t)&&a===null&&Ne(o)&&o.isInline()){const l=o.getPreviousSibling();Ze(l)&&e.set(l.__key,l.getTextContent().length,"text")}}else Ne(a)&&!n&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):Ze(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(r===s.getTextContent().length){const a=s.getNextSibling(),o=s.getParent();if(t&&Ne(a)&&a.isInline())e.set(a.__key,0,"element");else if((n||t)&&a===null&&Ne(o)&&o.isInline()&&!o.canInsertTextAfter()){const l=o.getNextSibling();Ze(l)&&e.set(l.__key,0,"text")}}}function $0e(e,t,n){if(e.type==="text"&&t.type==="text"){const r=e.isBefore(t),s=e.is(t);RQ(e,r,s),RQ(t,!r,s),s&&t.set(e.key,e.offset,e.type);const a=fr();if(a.isComposing()&&a._compositionKey!==e.key&&De(n)){const o=n.anchor,l=n.focus;e.set(o.key,o.offset,o.type,!0),t.set(l.key,l.offset,l.type,!0)}}}function H0e(e,t,n,r,s,a){if(e===null||n===null||!C3(s,e,n))return null;const o=jQ(e,t,De(a)?a.anchor:null,s);if(o===null)return null;const l=jQ(n,r,De(a)?a.focus:null,s);if(l===null)return null;if(o.type==="element"&&l.type==="element"){const c=Pm(e),u=Pm(n);if(jn(c)&&jn(u))return null}return $0e(o,l,a),[o,l]}function qj(e){return Ne(e)&&!e.isInline()}function z0e(e,t,n,r,s,a){const o=Uu(),l=new Df(yl(e,t,s),yl(n,r,a),0,"");return l.dirty=!0,o._selection=l,l}function G0e(){const e=yl("root",0,"element"),t=yl("root",0,"element");return new Df(e,t,0,"")}function q0e(){return new b3(new Set)}function xD(e,t,n,r){const s=n._window;if(s===null)return null;const a=r||s.event,o=a?a.type:void 0,l=o==="selectionchange",c=!Rj&&(l||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&a&&a.detail===3||o==="drop"||o===void 0);let u,d,m,p;if(De(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,m=t.anchorOffset,p=t.focusOffset,l&&De(e)&&!C3(n,u,d))return e.clone();const h=H0e(u,m,d,p,n,e);if(h===null)return null;const[g,y]=h;return new Df(g,y,De(e)?e.format:0,De(e)?e.style:"")}function Xe(){return Uu()._selection}function sx(){return fr()._editorState._selection}function aC(e,t,n,r=1){const s=e.anchor,a=e.focus,o=s.getNode(),l=a.getNode();if(!t.is(o)&&!t.is(l))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(n<=u&&r>0||n<u&&r<0){const d=Math.max(0,u+r);s.set(c,d,"element"),a.set(c,d,"element"),IQ(e)}}else{const u=e.isBackward(),d=u?a:s,m=d.getNode(),p=u?s:a,h=p.getNode();if(t.is(m)){const g=d.offset;(n<=g&&r>0||n<g&&r<0)&&d.set(c,Math.max(0,g+r),"element")}if(t.is(h)){const g=p.offset;(n<=g&&r>0||n<g&&r<0)&&p.set(c,Math.max(0,g+r),"element")}}IQ(e)}function IQ(e){const t=e.anchor,n=t.offset,r=e.focus,s=r.offset,a=t.getNode(),o=r.getNode();if(e.isCollapsed()){if(!Ne(a))return;const l=a.getChildrenSize(),c=n>=l,u=c?a.getChildAtIndex(l-1):a.getChildAtIndex(n);if(Ze(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),r.set(u.__key,d,"text")}}else{if(Ne(a)){const l=a.getChildrenSize(),c=n>=l,u=c?a.getChildAtIndex(l-1):a.getChildAtIndex(n);if(Ze(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(Ne(o)){const l=o.getChildrenSize(),c=s>=l,u=c?o.getChildAtIndex(l-1):o.getChildAtIndex(s);if(Ze(u)){let d=0;c&&(d=u.getTextContentSize()),r.set(u.__key,d,"text")}}}}function oC(e,t,n,r,s){let a=null,o=0,l=null;r!==null?(a=r.__key,Ze(r)?(o=r.getTextContentSize(),l="text"):Ne(r)&&(o=r.getChildrenSize(),l="element")):s!==null&&(a=s.__key,Ze(s)?l="text":Ne(s)&&(l="element")),a!==null&&l!==null?e.set(a,o,l):(o=t.getIndexWithinParent(),o===-1&&(o=n.getChildrenSize()),e.set(n.__key,o,"element"))}function PQ(e,t,n,r,s){e.type==="text"?e.set(n,e.offset+(t?0:s),"text"):e.offset>r.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function K0e(e,t,n,r,s){try{e.setBaseAndExtent(t,n,r,s)}catch{}}function Z0t(e,t,n,r,s,a,o){const l=r.anchorNode,c=r.focusNode,u=r.anchorOffset,d=r.focusOffset,m=document.activeElement;if(s.has(nve)&&m!==a||m!==null&&ove(m))return;if(!De(t))return void(e!==null&&C3(n,l,c)&&r.removeAllRanges());const p=t.anchor,h=t.focus,g=p.key,y=h.key,v=Zp(n,g),x=Zp(n,y),b=p.offset,_=h.offset,w=t.format,C=t.style,S=t.isCollapsed();let E=v,M=x,k=!1;if(p.type==="text"){E=Qp(v);const N=p.getNode();k=N.getFormat()!==w||N.getStyle()!==C}else De(e)&&e.anchor.type==="text"&&(k=!0);var T,j,R,O,P;if(h.type==="text"&&(M=Qp(x)),E!==null&&M!==null&&(S&&(e===null||k||De(e)&&(e.format!==w||e.style!==C))&&(T=w,j=C,R=b,O=g,P=performance.now(),O0e=[T,j,R,O,P]),u!==b||d!==_||l!==E||c!==M||r.type==="Range"&&S||(m!==null&&a.contains(m)||a.focus({preventScroll:!0}),p.type==="element"))){if(K0e(r,E,b,M,_),!s.has(rvt)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const N=De(t)&&t.anchor.type==="element"?E.childNodes[b]||null:r.rangeCount>0?r.getRangeAt(0):null;if(N!==null){let I;if(N instanceof Text){const D=document.createRange();D.selectNode(N),I=D.getBoundingClientRect()}else I=N.getBoundingClientRect();(function(D,F,B){const V=pve(B),$=AD(V);if(V===null||$===null)return;let{top:G,bottom:X}=F,Y=0,W=0,H=B;for(;H!==null;){const Z=H===V.body;if(Z)Y=0,W=Io(D).innerHeight;else{const q=H.getBoundingClientRect();Y=q.top,W=q.bottom}let re=0;if(G<Y?re=-(Y-G):X>W&&(re=X-W),re!==0)if(Z)$.scrollBy(0,re);else{const q=H.scrollTop;H.scrollTop+=re;const J=H.scrollTop-q;G-=J,X-=J}if(Z)break;H=ox(H)}})(n,I,a)}}$j=!0}}function gT(e){let t=e;e.isCollapsed()||t.removeText();const n=Xe();De(n)&&(t=n),De(t)||Fe(161);const r=t.anchor;let s=r.getNode(),a=r.offset;for(;!qc(s);){const o=s;if([s,a]=J0t(s,a),o.is(s))break}return a}function J0t(e,t){const n=e.getParent();if(!n){const s=ur();return Yn().append(s),s.select(),[Yn(),0]}if(Ze(e)){const s=e.splitText(t);if(s.length===0)return[n,e.getIndexWithinParent()];const a=t===0?0:1;return[n,s[0].getIndexWithinParent()+a]}if(!Ne(e)||t===0)return[n,e.getIndexWithinParent()];const r=e.getChildAtIndex(t);if(r){const s=new Df(yl(e.__key,t,"element"),yl(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(r,...r.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}function OQ(e,t,n,r,s="decorators-and-blocks"){if(t==="move"&&r==="character"&&!e.isCollapsed()){const[d,m]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return m.set(d.key,d.offset,d.type),!0}const a=Eu(e.focus,n?"previous":"next"),o=r==="lineboundary",l=t==="move";let c=a,u=s==="decorators-and-blocks";if(!xve(c)){for(const d of c){u=!1;const{origin:m}=d;if(!jn(m)||m.isIsolated()||(c=d,!o||!m.isInline()))break}if(u)for(const d of DD(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(sl(d))d.origin.isInline()||(c=d);else{if(Ne(d.origin))continue;jn(d.origin)&&!d.origin.isInline()&&(c=d)}break}}if(c===a)return!1;if(l&&!o&&jn(c.origin)&&c.origin.isKeyboardSelectable()){const d=q0e();return d.add(c.origin.getKey()),Ps(d),!0}return c=Yi(c),l&&Nv(e.anchor,c),Nv(e.focus,c),u||!o}let Zr=null,Jr=null,ka=!1,yT=!1,iw=0;const LQ={characterData:!0,childList:!0,subtree:!0};function ax(){return ka||Zr!==null&&Zr._readOnly}function As(){ka&&Fe(13)}function Y0e(){iw>99&&Fe(14)}function Uu(){return Zr===null&&Fe(195,Q0e()),Zr}function fr(){return Jr===null&&Fe(196,Q0e()),Jr}function Q0e(){let e=0;const t=new Set,n=w3.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=S3(s);if(SD(a))e++;else if(a){let o=String(a.constructor.version||"<0.17.1");o===n&&(o+=" (separately built, likely a bundler configuration issue)"),t.add(o)}}let r=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(r+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),r}function evt(){return Jr}function DQ(e,t,n){const r=t.__type,s=function(l,c){const u=l._nodes.get(c);return u===void 0&&Fe(30,c),u}(e,r);let a=n.get(r);a===void 0&&(a=Array.from(s.transforms),n.set(r,a));const o=a.length;for(let l=0;l<o&&(a[l](t),t.isAttached());l++);}function FQ(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function X0e(e,t){if(!t)return;const n=e._updateTags;let r=t;Array.isArray(t)||(r=[t]);for(const s of r)n.add(s)}function tvt(e){return bD(e,fr()._nodes)}function bD(e,t){const n=e.type,r=t.get(n);r===void 0&&Fe(17,n);const s=r.klass;e.type!==s.getType()&&Fe(18,s.name);const a=s.importJSON(e),o=e.children;if(Ne(a)&&Array.isArray(o))for(let l=0;l<o.length;l++){const c=bD(o[l],t);a.append(c)}return a}function UQ(e,t,n){const r=Zr,s=ka,a=Jr;Zr=t,ka=!0,Jr=e;try{return n()}finally{Zr=r,ka=s,Jr=a}}function ql(e,t){const n=e._pendingEditorState,r=e._rootElement,s=e._headless||r===null;if(n===null)return;const a=e._editorState,o=a._selection,l=n._selection,c=e._dirtyType!==ff,u=Zr,d=ka,m=Jr,p=e._updating,h=e._observer;let g=null;if(e._pendingEditorState=null,e._editorState=n,!s&&c&&h!==null){Jr=e,Zr=n,ka=!1,e._updating=!0;try{const S=e._dirtyType,E=e._dirtyElements,M=e._dirtyLeaves;h.disconnect(),g=A0t(a,n,e,S,E,M)}catch(S){if(S instanceof Error&&e._onError(S),yT)throw S;return sve(e,null,r,n),p0e(e),e._dirtyType=zp,yT=!0,ql(e,a),void(yT=!1)}finally{h.observe(r,LQ),e._updating=p,Zr=u,ka=d,Jr=m}}n._readOnly||(n._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,x=e._normalizedNodes,b=e._updateTags,_=e._deferred;c&&(e._dirtyType=ff,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(S,E){const M=S._decorators;let k=S._pendingDecorators||M;const T=E._nodeMap;let j;for(j in k)T.has(j)||(k===M&&(k=lve(S)),delete k[j])}(e,n);const w=s?null:vl(Io(e));if(e._editable&&w!==null&&(c||l===null||l.dirty)&&r!==null&&!b.has(svt)){Jr=e,Zr=n;try{if(h!==null&&h.disconnect(),c||l===null||l.dirty){const S=e._blockCursorElement;S!==null&&Qj(S,e,r),Z0t(o,l,e,w,b,r)}(function(S,E,M){let k=S._blockCursorElement;if(De(M)&&M.isCollapsed()&&M.anchor.type==="element"&&E.contains(document.activeElement)){const T=M.anchor,j=T.getNode(),R=T.offset;let O=!1,P=null;if(R===j.getChildrenSize())xT(j.getChildAtIndex(R-1))&&(O=!0);else{const N=j.getChildAtIndex(R);if(N!==null&&xT(N)){const I=N.getPreviousSibling();(I===null||xT(I))&&(O=!0,P=S.getElementByKey(N.__key))}}if(O){const N=S.getElementByKey(j.__key);return k===null&&(S._blockCursorElement=k=function(I){const D=I.theme,F=document.createElement("div");F.contentEditable="false",F.setAttribute("data-lexical-cursor","true");let B=D.blockCursor;if(B!==void 0){if(typeof B=="string"){const V=X2(B);B=D.blockCursor=V}B!==void 0&&F.classList.add(...B)}return F}(S._config)),E.style.caretColor="transparent",void(P===null?N.appendChild(k):N.insertBefore(k,P))}}k!==null&&Qj(k,S,E)})(e,r,l)}finally{h!==null&&h.observe(r,LQ),Jr=m,Zr=u}}g!==null&&function(S,E,M,k,T){const j=Array.from(S._listeners.mutation),R=j.length;for(let O=0;O<R;O++){const[P,N]=j[O],I=E.get(N);I!==void 0&&P(I,{dirtyLeaves:k,prevEditorState:T,updateTags:M})}}(e,g,b,y,a),De(l)||l===null||o!==null&&o.is(l)||e.dispatchCommand(w0e,void 0);const C=e._pendingDecorators;C!==null&&(e._decorators=C,e._pendingDecorators=null,m0("decorator",e,!0,C)),function(S,E,M){const k=HQ(E),T=HQ(M);k!==T&&m0("textcontent",S,!0,T)}(e,t||a,n),m0("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:n,mutatedNodes:g,normalizedNodes:x,prevEditorState:t||a,tags:b}),function(S,E){if(S._deferred=[],E.length!==0){const M=S._updating;S._updating=!0;try{for(let k=0;k<E.length;k++)E[k]()}finally{S._updating=M}}}(e,_),function(S){const E=S._updates;if(E.length!==0){const M=E.shift();if(M){const[k,T]=M;_D(S,k,T)}}}(e)}function m0(e,t,n,...r){const s=t._updating;t._updating=n;try{const a=Array.from(t._listeners[e]);for(let o=0;o<a.length;o++)a[o].apply(null,r)}finally{t._updating=s}}function BQ(e,t){const n=e._updates;let r=t||!1;for(;n.length!==0;){const s=n.shift();if(s){const[a,o]=s;let l;if(o!==void 0){if(l=o.onUpdate,o.skipTransforms&&(r=!0),o.discrete){const c=e._pendingEditorState;c===null&&Fe(191),c._flushSync=!0}l&&e._deferred.push(l),X0e(e,o.tag)}a()}}return r}function _D(e,t,n){const r=e._updateTags;let s,a=!1,o=!1;n!==void 0&&(s=n.onUpdate,X0e(e,n.tag),a=n.skipTransforms||!1,o=n.discrete||!1),s&&e._deferred.push(s);const l=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=J0e(c||l),u=!0),c._flushSync=o;const d=Zr,m=ka,p=Jr,h=e._updating;Zr=c,ka=!1,e._updating=!0,Jr=e;const g=e._headless||e.getRootElement()===null;try{u&&(g?l._selection!==null&&(c._selection=l._selection.clone()):c._selection=function(b,_){const w=b.getEditorState()._selection,C=vl(Io(b));return De(w)||w==null?xD(w,C,b,_):w.clone()}(e,n&&n.event||null));const v=e._compositionKey;t(),a=BQ(e,a),function(b,_){const w=_.getEditorState()._selection,C=b._selection;if(De(C)){const S=C.anchor,E=C.focus;let M;if(S.type==="text"&&(M=S.getNode(),M.selectionTransform(w,C)),E.type==="text"){const k=E.getNode();M!==k&&k.selectionTransform(w,C)}}}(c,e),e._dirtyType!==ff&&(a?function(b,_){const w=_._dirtyLeaves,C=b._nodeMap;for(const S of w){const E=C.get(S);Ze(E)&&E.isAttached()&&E.isSimpleText()&&!E.isUnmergeable()&&yQ(E)}}(c,e):function(b,_){const w=_._dirtyLeaves,C=_._dirtyElements,S=b._nodeMap,E=Jc(),M=new Map;let k=w,T=k.size,j=C,R=j.size;for(;T>0||R>0;){if(T>0){_._dirtyLeaves=new Set;for(const O of k){const P=S.get(O);Ze(P)&&P.isAttached()&&P.isSimpleText()&&!P.isUnmergeable()&&yQ(P),P!==void 0&&FQ(P,E)&&DQ(_,P,M),w.add(O)}if(k=_._dirtyLeaves,T=k.size,T>0){iw++;continue}}_._dirtyLeaves=new Set,_._dirtyElements=new Map,j.delete("root")&&j.set("root",!0);for(const O of j){const P=O[0],N=O[1];if(C.set(P,N),!N)continue;const I=S.get(P);I!==void 0&&FQ(I,E)&&DQ(_,I,M)}k=_._dirtyLeaves,T=k.size,j=_._dirtyElements,R=j.size,iw++}_._dirtyLeaves=w,_._dirtyElements=C}(c,e),BQ(e),function(b,_,w,C){const S=b._nodeMap,E=_._nodeMap,M=[];for(const[k]of C){const T=E.get(k);T!==void 0&&(T.isAttached()||(Ne(T)&&d0e(T,k,S,E,M,C),S.has(k)||C.delete(k),M.push(k)))}for(const k of M)E.delete(k);for(const k of w){const T=E.get(k);T===void 0||T.isAttached()||(S.has(k)||w.delete(k),E.delete(k))}}(l,c,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(c._flushSync=!0);const x=c._selection;if(De(x)){const b=c._nodeMap,_=x.anchor.key,w=x.focus.key;b.get(_)!==void 0&&b.get(w)!==void 0||Fe(19)}else lu(x)&&x._nodes.size===0&&(c._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=l,e._dirtyType=zp,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void ql(e)}finally{Zr=d,ka=m,Jr=p,e._updating=h,iw=0}e._dirtyType!==ff||e._deferred.length>0||function(v,x){const b=x.getEditorState()._selection,_=v._selection;if(_!==null){if(_.dirty||!_.is(b))return!0}else if(b!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,ql(e)):u&&ivt(()=>{ql(e)}):(c._flushSync=!1,u&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function Ga(e,t,n){Jr===e&&n===void 0?t():_D(e,t,n)}class p0{constructor(t,n,r){this.element=t,this.before=n||null,this.after=r||null}withBefore(t){return new p0(this.element,t,this.after)}withAfter(t){return new p0(this.element,this.before,t)}withElement(t){return this.element===t?this:new p0(t,this.before,this.after)}insertChild(t){const n=this.before||this.getManagedLineBreak();return n!==null&&n.parentElement!==this.element&&Fe(222),this.element.insertBefore(t,n),this}removeChild(t){return t.parentElement!==this.element&&Fe(223),this.element.removeChild(t),this}replaceChild(t,n){return n.parentElement!==this.element&&Fe(224),this.element.replaceChild(t,n),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const n=t==="decorator"&&(Hp||Cv);this.insertManagedLineBreak(n)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const n=this.element,r=t.nodeName==="IMG"?t.nextSibling:null;r&&n.removeChild(r),n.removeChild(t),n.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const n=this.getManagedLineBreak();if(n){if(t===(n.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,s=this.before,a=document.createElement("br");if(r.insertBefore(a,s),t){const o=document.createElement("img");o.setAttribute("data-lexical-linebreak","true"),o.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",o.alt="",r.insertBefore(o,a),r.__lexicalLineBreak=o}else r.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let n=this.after;n!==null;n=n.previousSibling)t++;return t}resolveChildIndex(t,n,r,s){if(r===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=VQ(n,r);a.push(s);const o=VQ(n,this.element);let l=t.getIndexWithinParent();for(let c=0;c<o.length;c++){const u=a[c],d=o[c];if(u===void 0||u<d)break;if(u>d){l+=1;break}}return[t.getParentOrThrow(),l]}}function VQ(e,t){const n=[];let r=t;for(;r!==e&&r!==null;r=t.parentNode){let s=0;for(let a=r.previousSibling;a!==null;a=a.previousSibling)s++;n.push(s)}return r!==e&&Fe(225),n.reverse()}class Tl extends x3{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__first=t.__first,this.__last=t.__last,this.__size=t.__size,this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return y0t[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getChildrenKeys(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n.__key),n=n.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=fr()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(t)}getAllTextNodes(){const t=[];let n=this.getFirstChild();for(;n!==null;){if(Ze(n)&&t.push(n),Ne(n)){const r=n.getAllTextNodes();t.push(...r)}n=n.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Ne(t);){const n=t.getFirstChild();if(n===null)break;t=n}return t}getLastDescendant(){let t=this.getLastChild();for(;Ne(t);){const n=t.getLastChild();if(n===null)break;t=n}return t}getDescendantByIndex(t){const n=this.getChildren(),r=n.length;if(t>=r){const a=n[r-1];return Ne(a)&&a.getLastDescendant()||a||null}const s=n[t];return Ne(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:es(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&Fe(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:es(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&Fe(96,this.__key),t}getChildAtIndex(t){const n=this.getChildrenSize();let r,s;if(t<n/2){for(r=this.getFirstChild(),s=0;r!==null&&s<=t;){if(s===t)return r;r=r.getNextSibling(),s++}return null}for(r=this.getLastChild(),s=n-1;r!==null&&s>=t;){if(s===t)return r;r=r.getPreviousSibling(),s--}return null}getTextContent(){let t="";const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContent(),Ne(a)&&s!==r-1&&!a.isInline()&&(t+=vc)}return t}getTextContentSize(){let t=0;const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContentSize(),Ne(a)&&s!==r-1&&!a.isInline()&&(t+=vc.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const n=pQ[t];return!!(this.getFormat()&n)}return!1}hasTextFormat(t){const n=mf[t];return!!(this.getTextFormat()&n)}getFormatFlags(t,n){return iC(this.getLatest().__textFormat,t,n)}getTextStyle(){return this.getLatest().__textStyle}select(t,n){As();const r=Xe();let s=t,a=n;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&n===0){const c=this.getFirstChild();if(Ze(c)||Ne(c))return c.select(0,0)}else if(!(t!==void 0&&t!==o||n!==void 0&&n!==o)){const c=this.getLastChild();if(Ze(c)||Ne(c))return c.select()}}s===void 0&&(s=o),a===void 0&&(a=o);const l=this.__key;return De(r)?(r.anchor.set(l,s,"element"),r.focus.set(l,a,"element"),r.dirty=!0,r):z0e(l,s,l,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(n=>n.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const n=this.getWritable();return n.__dir=t,n}setFormat(t){return this.getWritable().__format=t!==""?pQ[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const n=this.getWritable();return n.__textFormat=t,n}setTextStyle(t){const n=this.getWritable();return n.__textStyle=t,n}setIndent(t){return this.getWritable().__indent=t,this}splice(t,n,r){const s=r.length,a=this.getChildrenSize(),o=this.getWritable();t+n<=a||Fe(226,String(t),String(n),String(a));const l=o.__key,c=[],u=[],d=this.getChildAtIndex(t+n);let m=null,p=a-n+s;if(t!==0)if(t===a)m=this.getLastChild();else{const g=this.getChildAtIndex(t);g!==null&&(m=g.getPreviousSibling())}if(n>0){let g=m===null?this.getFirstChild():m.getNextSibling();for(let y=0;y<n;y++){g===null&&Fe(100);const v=g.getNextSibling(),x=g.__key;Wd(g.getWritable()),u.push(x),g=v}}let h=m;for(let g=0;g<s;g++){const y=r[g];h!==null&&y.is(h)&&(m=h=h.getPreviousSibling());const v=y.getWritable();v.__parent===l&&p--,Wd(v);const x=y.__key;if(h===null)o.__first=x,v.__prev=null;else{const b=h.getWritable();b.__next=x,v.__prev=b.__key}y.__key===l&&Fe(76),v.__parent=l,c.push(x),h=y}if(t+n===a)h!==null&&(h.getWritable().__next=null,o.__last=h.__key);else if(d!==null){const g=d.getWritable();if(h!==null){const y=h.getWritable();g.__prev=h.__key,y.__next=d.__key}else g.__prev=null}if(o.__size=p,u.length){const g=Xe();if(De(g)){const y=new Set(u),v=new Set(c),{anchor:x,focus:b}=g;WQ(x,y,v)&&oC(x,x.getNode(),this,m,d),WQ(b,y,v)&&oC(b,b.getNode(),this,m,d),p!==0||this.canBeEmpty()||yi(this)||this.remove()}}return o}getDOMSlot(t){return new p0(t)}exportDOM(t){const{element:n}=super.exportDOM(t);if(Ir(n)){const r=this.getIndent();r>0&&(n.style.paddingInlineStart=40*r+"px");const s=this.getDirection();s&&(n.dir=s)}return{element:n}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},n=this.getTextFormat(),r=this.getTextStyle();return n!==0&&(t.textFormat=n),r!==""&&(t.textStyle=r),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,n){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,n,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,n){const r=this.getDOMSlot(t);let s=r.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const o=n.getElementByKey(a.getKey());o!==null&&(s==null?(r.insertChild(o),s=o):s!==o&&r.replaceChild(o,s),s=s.nextSibling)}}}function Ne(e){return e instanceof Tl}function WQ(e,t,n){let r=e.getNode();for(;r;){const s=r.__key;if(t.has(s)&&!n.has(s))return!0;r=r.getParent()}return!1}class Z0e extends x3{decorate(t,n){Fe(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function jn(e){return e instanceof Z0e}class og extends Tl{static getType(){return"root"}static clone(){return new og}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){Fe(51)}getTextContent(){const t=this.__cachedText;return!ax()&&fr()._dirtyType!==ff||t===null?super.getTextContent():t}remove(){Fe(52)}replace(t){Fe(53)}insertBefore(t){Fe(54)}insertAfter(t){Fe(55)}updateDOM(t,n){return!1}splice(t,n,r){for(const s of r)Ne(s)||jn(s)||Fe(282);return super.splice(t,n,r)}static importJSON(t){return Yn().updateFromJSON(t)}collapseAtStart(){return!0}}function Rs(e){return e instanceof og}function J0e(e){return new _3(new Map(e._nodeMap))}function wD(){return new _3(new Map([["root",new og]]))}function eve(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&Fe(130,n.name),Ne(e)){const r=t.children;Array.isArray(r)||Fe(59,n.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const o=eve(s[a]);r.push(o)}}return t}class _3{constructor(t,n){this._nodeMap=t,this._selection=n||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,n){return UQ(n&&n.editor||null,this,t)}clone(t){const n=new _3(this._nodeMap,t===void 0?this._selection:t);return n._readOnly=!0,n}toJSON(){return UQ(null,this,()=>({root:eve(Yn())}))}}const nvt="historic",FVt="history-push",lw="history-merge",tve="paste",nve="collaboration",rvt="skip-scroll-into-view",svt="skip-dom-selection";class CD extends Tl{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class ig extends Tl{static getType(){return"paragraph"}static clone(t){return new ig(t.__key)}createDOM(t){const n=document.createElement("p"),r=ap(t.theme,"paragraph");return r!==void 0&&n.classList.add(...r),n}updateDOM(t,n,r){return!1}static importDOM(){return{p:t=>({conversion:avt,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Ir(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();n.style.textAlign=r}return{element:n}}static importJSON(t){return ur().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,n){const r=ur();r.setTextFormat(t.format),r.setTextStyle(t.style);const s=this.getDirection();return r.setDirection(s),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,n),r}collapseAtStart(){const t=this.getChildren();if(t.length===0||Ze(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function avt(e){const t=ur();return e.style&&(t.setFormat(e.style.textAlign),RD(e,t)),{node:t}}function ur(){return fo(new ig)}function Yp(e){return e instanceof ig}const Kr=0,rve=1,Dl=2;function sve(e,t,n,r){const s=e._keyToDOMMap;s.clear(),e._editorState=wD(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=ff,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),n!==null&&(n.textContent="",s.set("root",n))}function ave(e){const t=e||{},n=evt(),r=t.theme||{},s=e===void 0?n:t.parentEditor||null,a=t.disableEvents||!1,o=wD(),l=t.namespace||(s!==null?s._config.namespace:dve()),c=t.editorState,u=[og,Fu,tx,nx,ig,CD,...t.nodes||[]],{onError:d,html:m}=t,p=t.editable===void 0||t.editable;let h;if(e===void 0&&n!==null)h=n._nodes;else{h=new Map;for(let y=0;y<u.length;y++){let v=u[y],x=null,b=null;if(typeof v!="function"){const S=v;v=S.replace,x=S.with,b=S.withKlass||null}const _=v.getType(),w=v.transform(),C=new Set;w!==null&&C.add(w),h.set(_,{exportDOM:m&&m.export?m.export.get(v):void 0,klass:v,replace:x,replaceWithKlass:b,transforms:C})}}const g=new w3(o,s,h,{disableEvents:a,namespace:l,theme:r},d||console.error,function(y,v){const x=new Map,b=new Set,_=w=>{Object.keys(w).forEach(C=>{let S=x.get(C);S===void 0&&(S=[],x.set(C,S)),S.push(w[C])})};return y.forEach(w=>{const C=w.klass.importDOM;if(C==null||b.has(C))return;b.add(C);const S=C.call(w.klass);S!==null&&_(S)}),v&&_(v),x}(h,m?m.import:void 0),p,e);return c!==void 0&&(g._pendingEditorState=c,g._dirtyType=zp),g}class w3{constructor(t,n,r,s,a,o,l,c){this._createEditorArgs=c,this._parentEditor=n,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=ff,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=dve(),this._onError=a,this._htmlConversions=o,this._editable=l,this._headless=n!==null&&n._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const n=this._listeners.update;return n.add(t),()=>{n.delete(t)}}registerEditableListener(t){const n=this._listeners.editable;return n.add(t),()=>{n.delete(t)}}registerDecoratorListener(t){const n=this._listeners.decorator;return n.add(t),()=>{n.delete(t)}}registerTextContentListener(t){const n=this._listeners.textcontent;return n.add(t),()=>{n.delete(t)}}registerRootListener(t){const n=this._listeners.root;return t(this._rootElement,null),n.add(t),()=>{t(null,this._rootElement),n.delete(t)}}registerCommand(t,n,r){r===void 0&&Fe(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&Fe(36,String(t));const o=a[r];return o.add(n),()=>{o.delete(n),a.every(l=>l.size===0)&&s.delete(t)}}registerMutationListener(t,n,r){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;a.set(n,s);const o=r&&r.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(n,s),()=>{a.delete(n)}}getRegisteredNode(t){const n=this._nodes.get(t.getType());return n===void 0&&Fe(37,t.name),n}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,n){const r=this._editorState,s=XQ(r).get(n.getType());if(!s)return;const a=new Map;for(const o of s.keys())a.set(o,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,n){const r=this.getRegisteredNode(t);return r.transforms.add(n),r}registerNodeTransform(t,n){const r=this.registerNodeTransformToKlass(t,n),s=[r],a=r.replaceWithKlass;if(a!=null){const o=this.registerNodeTransformToKlass(a,n);s.push(o)}return function(o,l){const c=XQ(o.getEditorState()),u=[];for(const d of l){const m=c.get(d);m&&u.push(m)}u.length!==0&&o.update(()=>{for(const d of u)for(const m of d.keys()){const p=es(m);p&&p.markDirty()}},o._pendingEditorState===null?{tag:lw}:void 0)}(this,s.map(o=>o.klass.getType())),()=>{s.forEach(o=>o.transforms.delete(n))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,n){return ot(this,t,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const n=this._rootElement;if(t!==n){const r=ap(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,sve(this,n,t,s),n!==null&&(this._config.disableEvents||$0t(n),r!=null&&n.classList.remove(...r)),t!==null){const a=AD(t),o=t.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=zp,p0e(this),this._updateTags.add(lw),ql(this),this._config.disableEvents||function(l,c){const u=l.ownerDocument,d=sC.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",B0e),sC.set(u,(d||0)+1),l.__lexicalEditor=c;const m=U0e(l);for(let p=0;p<Wj.length;p++){const[h,g]=Wj[p],y=typeof g=="function"?v=>{CQ(v)||(wQ(v),(c.isEditable()||h==="click")&&g(v,c))}:v=>{if(CQ(v))return;wQ(v);const x=c.isEditable();switch(h){case"cut":return x&&ot(c,gD,v);case"copy":return ot(c,hD,v);case"paste":return x&&ot(c,v3,v);case"dragstart":return x&&ot(c,R0e,v);case"dragover":return x&&ot(c,F0t,v);case"dragend":return x&&ot(c,U0t,v);case"focus":return x&&ot(c,B0t,v);case"blur":return x&&ot(c,V0t,v);case"drop":return x&&ot(c,j0e,v)}};l.addEventListener(h,y),m.push(()=>{l.removeEventListener(h,y)})}}(t,this),r!=null&&t.classList.add(...r)}else this._window=null,this._updateTags.add(lw),ql(this);m0("root",this,!1,t,n)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,n){t.isEmpty()&&Fe(38);let r=t;r._readOnly&&(r=J0e(t),r._selection=t._selection?t._selection.clone():null),m0e(this);const s=this._pendingEditorState,a=this._updateTags,o=n!==void 0?n.tag:null;s===null||s.isEmpty()||(o!=null&&a.add(o),ql(this)),this._pendingEditorState=r,this._dirtyType=zp,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&a.add(o),this._updating||ql(this)}parseEditorState(t,n){return function(r,s,a){const o=wD(),l=Zr,c=ka,u=Jr,d=s._dirtyElements,m=s._dirtyLeaves,p=s._cloneNotNeeded,h=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,Zr=o,ka=!1,Jr=s;try{const g=s._nodes;bD(r.root,g),a&&a(),o._readOnly=!0}catch(g){g instanceof Error&&s._onError(g)}finally{s._dirtyElements=d,s._dirtyLeaves=m,s._cloneNotNeeded=p,s._dirtyType=h,Zr=l,ka=c,Jr=u}return o}(typeof t=="string"?JSON.parse(t):t,this,n)}read(t){return ql(this),this.getEditorState().read(t,{editor:this})}update(t,n){(function(r,s,a){r._updating?r._updates.push([s,a]):_D(r,s,a)})(this,t,n)}focus(t,n={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),Ga(this,()=>{const s=Xe(),a=Yn();s!==null?s.dirty||Ps(s.clone()):a.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),Kj("focus"),mvt(()=>{r.removeAttribute("autocapitalize"),t&&t()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const n=vl(this._window);n!==null&&n.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,m0("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}w3.version="0.31.0+prod.esm";let ovt=1;const ivt=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function $Q(e){return jn(Xp(e))}function ove(e){const t=document.activeElement;if(!Ir(t))return!1;const n=t.nodeName;return jn(Xp(e))&&(n==="INPUT"||n==="TEXTAREA"||t.contentEditable==="true"&&S3(t)==null)}function C3(e,t,n){const r=e.getRootElement();try{return r!==null&&r.contains(t)&&r.contains(n)&&t!==null&&!ove(t)&&ED(t)===e}catch{return!1}}function SD(e){return e instanceof w3}function ED(e){let t=e;for(;t!=null;){const n=S3(t);if(SD(n))return n;t=ox(t)}return null}function S3(e){return e?e.__lexicalEditor:null}function xm(e){return e.isToken()||e.isSegmented()}function jc(e){return lg(e)&&e.nodeType===o0t}function lvt(e){return lg(e)&&e.nodeType===i0t}function Qp(e){let t=e;for(;t!=null;){if(jc(t))return t;t=t.firstChild}return null}function iC(e,t,n){const r=mf[t];if(n!==null&&(e&r)==(n&r))return e;let s=e^r;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function cvt(e,t){if(t!=null)return void(e.__key=t);As(),Y0e();const n=fr(),r=Uu(),s=""+ovt++;r._nodeMap.set(s,e),Ne(e)?n._dirtyElements.set(s,!0):n._dirtyLeaves.add(s),n._cloneNotNeeded.add(s),n._dirtyType=l0e,e.__key=s}function Wd(e){const t=e.getParent();if(t!==null){const n=e.getWritable(),r=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),o=a!==null?a.__key:null,l=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(r.__first=o),a===null&&(r.__last=l),c!==null&&(c.__next=o),u!==null&&(u.__prev=l),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function lC(e){Y0e();const t=e.getLatest(),n=t.__parent,r=Uu(),s=fr(),a=r._nodeMap,o=s._dirtyElements;n!==null&&function(c,u,d){let m=c;for(;m!==null;){if(d.has(m))return;const p=u.get(m);if(p===void 0)break;d.set(m,!1),m=p.__parent}}(n,a,o);const l=t.__key;s._dirtyType=l0e,Ne(e)?o.set(l,!0):s._dirtyLeaves.add(l)}function hs(e){As();const t=fr(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,n!==null){const r=es(n);r!==null&&r.getWritable()}if(e!==null){const r=es(e);r!==null&&r.getWritable()}}}function Jc(){return ax()?null:fr()._compositionKey}function es(e,t){const n=(t||Uu())._nodeMap.get(e);return n===void 0?null:n}function ive(e,t){const n=E3(e,fr());return n!==void 0?es(n,t):null}function E3(e,t){return e[`__lexicalKey_${t._key}`]}function Xp(e,t){let n=e;for(;n!=null;){const r=ive(n,t);if(r!==null)return r;n=ox(n)}return null}function lve(e){const t=e._decorators,n=Object.assign({},t);return e._pendingDecorators=n,n}function HQ(e){return e.read(()=>Yn().getTextContent())}function Yn(){return cve(Uu())}function cve(e){return e._nodeMap.get("root")}function Ps(e){As();const t=Uu();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function Pm(e){const t=fr(),n=function(r,s){let a=r;for(;a!=null;){const o=E3(a,s);if(o!==void 0)return o;a=ox(a)}return null}(e,t);return n===null?e===t.getRootElement()?es("root"):null:es(n)}function zQ(e,t){return t?e.getTextContentSize():0}function uve(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function MD(e){const t=[];let n=e;for(;n!==null;)t.push(n),n=n._parentEditor;return t}function dve(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function fve(e){return jc(e)?e.nodeValue:null}function kD(e,t,n){const r=vl(Io(t));if(r===null)return;const s=r.anchorNode;let{anchorOffset:a,focusOffset:o}=r;if(s!==null){let l=fve(s);const c=Xp(s);if(l!==null&&Ze(c)){if(l===g3&&n){const u=n.length;l=n,a=u,o=u}l!==null&&TD(c,l,a,o,e)}}}function TD(e,t,n,r,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const o=a.isComposing();let l=t;(o||s)&&t[t.length-1]===g3&&(l=t.slice(0,-1));const c=a.getTextContent();if(s||l!==c){if(l===""){if(hs(null),Cv||Hp||Q2)a.remove();else{const y=fr();setTimeout(()=>{y.update(()=>{a.isAttached()&&a.remove()})},20)}return}const u=a.getParent(),d=sx(),m=a.getTextContentSize(),p=Jc(),h=a.getKey();if(a.isToken()||p!==null&&h===p&&!o||De(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!o||d.focus.key===e.__key&&d.focus.offset===m&&!a.canInsertTextAfter()&&!o))return void a.markDirty();const g=Xe();if(!De(g)||n===null||r===null)return void a.setTextContent(l);if(g.setTextNodeRange(a,n,a,r),a.isSegmented()){const y=Jn(a.getTextContent());a.replace(y),a=y}a.setTextContent(l)}}}function Xb(e,t,n){const r=t[n]||!1;return r==="any"||r===e[n]}function uvt(e,t){return Xb(e,t,"altKey")&&Xb(e,t,"ctrlKey")&&Xb(e,t,"shiftKey")&&Xb(e,t,"metaKey")}function Dn(e,t,n){return uvt(e,n)&&e.key.toLowerCase()===t.toLowerCase()}const Ul={ctrlKey:!Wi,metaKey:Wi},GQ={altKey:Wi,ctrlKey:!Wi};function qQ(e){return e.key==="Backspace"}function KQ(e){return Dn(e,"a",Ul)}function dvt(e){const t=Yn();if(De(e)){const n=e.anchor,r=e.focus,s=n.getNode().getTopLevelElementOrThrow().getParentOrThrow();return n.set(s.getKey(),0,"element"),r.set(s.getKey(),s.getChildrenSize(),"element"),Sv(e),e}{const n=t.select(0,t.getChildrenSize());return Ps(Sv(n)),n}}function ap(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const n=e.__lexicalClassNameCache,r=n[t];if(r!==void 0)return r;const s=e[t];if(typeof s=="string"){const a=X2(s);return n[t]=a,a}return s}function ND(e,t,n,r,s){if(n.size===0)return;const a=r.__type,o=r.__key,l=t.get(a);l===void 0&&Fe(33,a);const c=l.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const d=u.get(o),m=d==="destroyed"&&s==="created";(d===void 0||m)&&u.set(o,m?"updated":s)}function YQ(e,t,n){const r=e.getParent();let s=n,a=e;return r!==null&&(n===0&&(s=a.getIndexWithinParent(),a=r)),a.getChildAtIndex(s-1)}function fvt(e,t){const n=e.offset;if(e.type==="element")return YQ(e.getNode(),t,n);{const r=e.getNode();if(n===0){const s=r.getPreviousSibling();return s===null?YQ(r.getParentOrThrow(),t,r.getIndexWithinParent()+0):s}}return null}function mve(e){const t=Io(e).event,n=t&&t.inputType;return n==="insertFromPaste"||n==="insertFromPasteAsQuotation"}function ot(e,t,n){return function(r,s,a){const o=MD(r);for(let l=4;l>=0;l--)for(let c=0;c<o.length;c++){const u=o[c],d=u._commands.get(s);if(d!==void 0){const m=d[l];if(m!==void 0){const p=Array.from(m),h=p.length;let g=!1;if(Ga(u,()=>{for(let y=0;y<h;y++)if(p[y](a,r))return void(g=!0)}),g)return g}}}return!1}(e,t,n)}function M3(e){return!Rs(e)&&!e.isLastChild()&&!e.isInline()}function Zp(e,t){const n=e._keyToDOMMap.get(t);return n===void 0&&Fe(75,t),n}function ox(e){const t=e.assignedSlot||e.parentElement;return Xj(t)?t.host:t}function pve(e){return lvt(e)?e:Ir(e)?e.ownerDocument:null}function Kj(e){As(),fr()._updateTags.add(e)}function mvt(e){As(),fr()._deferred.push(e)}function Yj(e,t){let n=e.getParent();for(;n!==null;){if(n.is(t))return!0;n=n.getParent()}return!1}function AD(e){const t=pve(e);return t?t.defaultView:null}function Io(e){const t=e._window;return t===null&&Fe(78),t}function pvt(e){let t=e.getParentOrThrow();for(;t!==null;){if(yi(t))return t;t=t.getParentOrThrow()}return t}function yi(e){return Rs(e)||Ne(e)&&e.isShadowRoot()}function fo(e){const t=fr(),n=e.constructor.getType(),r=t._nodes.get(n);r===void 0&&Fe(200,e.constructor.name,n);const{replace:s,replaceWithKlass:a}=r;if(s!==null){const o=s(e),l=o.constructor;return a!==null?o instanceof a||Fe(201,a.name,a.getType(),l.name,l.getType(),e.constructor.name,n):o instanceof e.constructor&&l!==e.constructor||Fe(202,l.name,l.getType(),e.constructor.name,n),o.__key===e.__key&&Fe(203,e.constructor.name,n,l.name,l.getType()),o}return e}function vT(e,t){!Rs(e.getParent())||Ne(t)||jn(t)||Fe(99)}function hvt(e){const t=es(e);return t===null&&Fe(63,e),t}function xT(e){return(jn(e)||Ne(e)&&!e.canBeEmpty())&&!e.isInline()}function Qj(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;const r=e.parentElement;r!==null&&r.removeChild(e)}function vl(e){return Ti?(e||window).getSelection():null}function gvt(e){const t=AD(e);return t?t.getSelection():null}function jD(e){return Ir(e)&&e.tagName==="A"}function Ir(e){return lg(e)&&e.nodeType===a0t}function lg(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function Xj(e){return lg(e)&&e.nodeType===l0t}function Zj(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function cC(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function qc(e){if(jn(e)&&!e.isInline())return!0;if(!Ne(e)||yi(e))return!1;const t=e.getFirstChild(),n=t===null||Vd(t)||Ze(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&n}function bT(e,t){let n=e;for(;n!==null&&n.getParent()!==null&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}function yvt(){return fr()}const QQ=new WeakMap,vvt=new Map;function XQ(e){if(!e._readOnly&&e.isEmpty())return vvt;e._readOnly||Fe(192);let t=QQ.get(e);return t||(t=function(n){const r=new Map;for(const[s,a]of n._nodeMap){const o=a.__type;let l=r.get(o);l||(l=new Map,r.set(o,l)),l.set(s,a)}return r}(e),QQ.set(e,t)),t}function hve(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function RD(e,t){const n=parseInt(e.style.paddingInlineStart,10)||0,r=Math.round(n/40);t.setIndent(r)}function xvt(e){return e.__lexicalUnmanaged===!0}const bvt={next:"previous",previous:"next"};class ID{constructor(t){this.origin=t}[Symbol.iterator](){return gve({hasNext:Jp,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return _s(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return _s(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,n){const r=this.getNodeAtCaret();return t.is(this.origin)||t.is(r)||(r===null?this.insert(t):r.replace(t,n)),this}splice(t,n,r="next"){const s=r===this.direction?n:Array.from(n).reverse();let a=this;const o=this.getParentAtCaret(),l=new Map;for(let c=a.getAdjacentCaret();c!==null&&l.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();l.set(u.getKey(),u)}for(const c of s){if(l.size>0){const u=a.getNodeAtCaret();if(u){if(l.delete(u.getKey()),l.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const d=c.getParent();d&&d.is(o)&&c.remove(),u.replace(c)}}else u===null&&Fe(263,Array.from(l).join(" "))}else a.insert(c);a=_s(c,this.direction)}for(const c of l.values())c.remove();return this}}class Tv extends ID{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Su(t,this.direction)}getParentCaret(t="root"){return _s(PD(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=cg(this.direction);return _s(this.getNodeAtCaret(),t)||Su(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof Tv&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const _vt={root:Rs,shadowRoot:yi};function cg(e){return bvt[e]}function PD(e,t="root"){return _vt[t](e)?null:e}class hf extends ID{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:_s(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Ne(this.origin)?Su(this.origin,this.direction):null}getParentCaret(t="root"){return _s(PD(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=cg(this.direction);return _s(this.getNodeAtCaret(),t)||Su(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof hf&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof hf||t instanceof gf)&&this.direction===t.direction&&this.origin.is(t.origin)}}class gf extends ID{type="text";constructor(t,n){super(t),this.offset=n}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:yf(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return _s(PD(this.getParentAtCaret(),t),this.direction)}getFlipped(){return yf(this.origin,cg(this.direction),this.offset)}isSamePointCaret(t){return t instanceof gf&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof hf||t instanceof gf)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return _s(this.origin,this.direction)}}function $d(e){return e instanceof gf}function Jp(e){return e instanceof hf}function sl(e){return e instanceof Tv}const wvt={next:class extends gf{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends gf{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Cvt={next:class extends hf{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends hf{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Svt={next:class extends Tv{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends Tv{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function _s(e,t){return e?new Cvt[t](e):null}function yf(e,t,n){return e?new wvt[t](e,k3(e,n)):null}function k3(e,t){const n=e.getTextContentSize();let r=t==="next"?n:t==="previous"?0:t;return(r<0||r>n)&&(function(s,...a){const o=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;l.append("code",s);for(const c of a)l.append("v",c);o.search=l.toString(),console.warn(`Minified Lexical warning #${s}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(284,String(t),String(n),e.getKey()),r=r<0?0:n),r}function ZQ(e,t){return new Mvt(e,t)}function Su(e,t){return Ne(e)?new Svt[t](e):null}function Evt(e){return e&&e.getChildCaret()||e}function OD(e){return e&&Evt(e.getAdjacentCaret())}class LD{type="node-caret-range";constructor(t,n,r){this.anchor=t,this.focus=n,this.direction=r}getLatest(){const t=this.anchor.getLatest(),n=this.focus.getLatest();return t===this.anchor&&n===this.focus?this:new LD(t,n,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return $d(a)?function(o,l){const{direction:c,origin:u}=o,d=k3(u,l==="focus"?cg(c):c);return ZQ(o,d-o.offset)}(a,s):null},n=t("anchor"),r=t("focus");if(n&&r){const{caret:s}=n,{caret:a}=r;if(s.isSameNodeCaret(a))return[ZQ(s,a.offset-s.offset),null]}return[n,r]}iterNodeCarets(t="root"){const n=$d(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),s=$d(r),a=o=>o.isSameNodeCaret(r)?null:OD(o)||o.getParentCaret(t);return gve({hasNext:o=>o!==null&&!(s&&r.isSameNodeCaret(o)),initial:n.isSameNodeCaret(r)?null:a(n),map:o=>o,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class Mvt{type="slice";constructor(t,n){this.caret=t,this.distance=n}getSliceIndices(){const{distance:t,caret:{offset:n}}=this,r=n+t;return r<n?[r,n]:[n,r]}getTextContent(){const[t,n]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,n)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:n}}=this,[r,s]=this.getSliceIndices(),a=t.getTextContent();return yf(t.setTextContent(a.slice(0,r)+a.slice(s)),n,r)}}function DD(e){return vf(e,_s(Yn(),e.direction))}function kvt(e){return vf(e,e)}function vf(e,t){return e.direction!==t.direction&&Fe(265),new LD(e,t,e.direction)}function gve(e){const{initial:t,hasNext:n,step:r,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!n(a))return{done:!0,value:void 0};const o={done:!1,value:s(a)};return a=r(a),o}}}function yve(e,t){const n=cw(e.origin,t.origin);switch(n===null&&Fe(275,e.origin.getKey(),t.origin.getKey()),n.type){case"same":{const r=e.type==="text",s=t.type==="text";return r&&s?function(a,o){return Math.sign(a-o)}(e.offset,t.offset):e.type===t.type?0:r?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return vve(n)}}function vve(e){const{a:t,b:n}=e,r=t.__key,s=n.__key;let a=t,o=n;for(;a&&o;a=a.getNextSibling(),o=o.getNextSibling()){if(a.__key===s)return-1;if(o.__key===r)return 1}return a===null?1:-1}function Zb(e,t){return t.is(e)}function JQ(e){return Ne(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function cw(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const n=new Map;for(let[r,s]=JQ(e);r;s=r,r=r.getParent())n.set(r,s);for(let[r,s]=JQ(t);r;s=r,r=r.getParent()){const a=n.get(r);if(a!==void 0)return a===null?(Zb(e,r)||Fe(276),{commonAncestor:r,type:"ancestor"}):s===null?(Zb(t,r)||Fe(277),{commonAncestor:r,type:"descendant"}):((Ne(a)||Zb(e,a))&&(Ne(s)||Zb(t,s))&&r.is(a.getParent())&&r.is(s.getParent())||Fe(278),{a,b:s,commonAncestor:r,type:"branch"})}return null}function Eu(e,t){const{type:n,key:r,offset:s}=e,a=hvt(e.key);return n==="text"?(Ze(a)||Fe(266,a.getType(),r),yf(a,t,s)):(Ne(a)||Fe(267,a.getType(),r),Avt(a,e.offset,t))}function Nv(e,t){const{origin:n,direction:r}=t,s=r==="next";$d(t)?e.set(n.getKey(),t.offset,"text"):Jp(t)?Ze(n)?e.set(n.getKey(),k3(n,r),"text"):e.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(s?1:0),"element"):(sl(t)&&Ne(n)||Fe(268),e.set(n.getKey(),s?0:n.getChildrenSize(),"element"))}function Tvt(e){const t=Xe(),n=De(t)?t:G0e();return uw(n,e),Ps(n),n}function uw(e,t){Nv(e.anchor,t.anchor),Nv(e.focus,t.focus)}function eX(e){const{anchor:t,focus:n}=e,r=Eu(t,"next"),s=Eu(n,"next"),a=yve(r,s)<=0?"next":"previous";return vf(eh(r,a),eh(s,a))}function FD(e){const{direction:t,origin:n}=e,r=_s(n,cg(t)).getNodeAtCaret();return r?_s(r,t):Su(n.getParentOrThrow(),t)}function tX(e,t="root"){const n=[e];for(let r=sl(e)?e.getParentCaret(t):e.getSiblingCaret();r!==null;r=r.getParentCaret(t))n.push(FD(r));return n}function _T(e){return!!e&&e.origin.isAttached()}function Nvt(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const n="root",r="next";let s=t;const a=bve(e,r),o=tX(a.anchor,n),l=tX(a.focus.getFlipped(),n),c=new Set,u=[];for(const g of a.iterNodeCarets(n))if(sl(g))c.add(g.origin.getKey());else if(Jp(g)){const{origin:y}=g;Ne(y)&&!c.has(y.getKey())||u.push(y)}for(const g of u)g.remove();for(const g of a.getTextSlices()){if(!g)continue;const{origin:y}=g.caret,v=y.getTextContentSize(),x=FD(_s(y,r)),b=y.getMode();if(Math.abs(g.distance)===v&&s==="removeEmptySlices"||b==="token"&&g.distance!==0)x.remove();else if(g.distance!==0){s="removeEmptySlices";let _=g.removeTextSlice();const w=g.caret.origin;if(b==="segmented"){const C=_.origin,S=Jn(C.getTextContent()).setStyle(C.getStyle()).setFormat(C.getFormat());x.replaceOrInsert(S),_=yf(S,r,_.offset)}w.is(o[0].origin)&&(o[0]=_),w.is(l[0].origin)&&(l[0]=_.getFlipped())}}let d,m;for(const g of o)if(_T(g)){d=Yi(g);break}for(const g of l)if(_T(g)){m=Yi(g);break}const p=function(g,y,v){if(!g||!y)return null;const x=g.getParentAtCaret(),b=y.getParentAtCaret();if(!x||!b)return null;const _=x.getParents().reverse();_.push(x);const w=b.getParents().reverse();w.push(b);const C=Math.min(_.length,w.length);let S;for(S=0;S<C&&_[S]===w[S];S++);const E=(T,j)=>{let R;for(let O=S;O<T.length;O++){const P=T[O];if(yi(P))return;!R&&j(P)&&(R=P)}return R},M=E(_,qc),k=M&&E(w,T=>v.has(T.getKey())&&qc(T));return M&&k?[M,k]:null}(d,m,c);if(p){const[g,y]=p;Su(g,"previous").splice(0,y.getChildren()),y.remove()}const h=[d,m,...o,...l].find(_T);if(h)return kvt(eh(Yi(h),e.direction));Fe(269,JSON.stringify(o.map(g=>g.origin.__key)))}function Yi(e){const t=function(s){let a=s;for(;sl(a);){const o=OD(a);if(!sl(o))break;a=o}return a}(e.getLatest()),{direction:n}=t;if(Ze(t.origin))return $d(t)?t:yf(t.origin,n,n);const r=t.getAdjacentCaret();return Jp(r)&&Ze(r.origin)?yf(r.origin,n,cg(n)):t}function xve(e){return $d(e)&&e.offset!==k3(e.origin,e.direction)}function eh(e,t){return e.direction===t?e:e.getFlipped()}function bve(e,t){return e.direction===t?e:vf(eh(e.focus,t),eh(e.anchor,t))}function Avt(e,t,n){let r=Su(e,"next");for(let s=0;s<t;s++){const a=r.getAdjacentCaret();if(a===null)break;r=a}return eh(r,n)}const Jj=new Map;function _ve(e){const t={};if(!e)return t;const n=e.split(";");for(const r of n)if(r!==""){const[s,a]=r.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function nX(e){let t=Jj.get(e);return t===void 0&&(t=_ve(e),Jj.set(e,t)),t}function jvt(e,t){const n=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&n!==null){const[r,s]=n,a=e.isBackward(),o=r.getNode(),l=s.getNode(),c=t.is(o),u=t.is(l);if(c||u){const[d,m]=Gj(e),p=o.is(l),h=t.is(a?l:o),g=t.is(a?o:l);let y,v=0;return p?(v=d>m?m:d,y=d>m?d:m):h?(v=a?m:d,y=void 0):g&&(v=0,y=a?d:m),t.__text=t.__text.slice(v,y),t}}return t}function Rvt(e){const t=e.getStyle(),n=_ve(t);Jj.set(t,n)}function wve(e){const t=e.anchor.getNode(),n=Rs(t)?t:t.getParentOrThrow(),r=yvt().getElementByKey(n.getKey());if(r===null)return!1;const s=r.ownerDocument.defaultView;return s===null?!1:s.getComputedStyle(r).writingMode==="vertical-rl"}function rX(e,t){const n=wve(e)?!t:t,r=Eu(e.focus,n?"previous":"next");if(xve(r))return!1;for(const s of DD(r)){if(sl(s))return!s.origin.isInline();if(!Ne(s.origin)){if(jn(s.origin))return!0;break}}return!1}function Ivt(e,t,n,r){e.modify(t?"extend":"move",n,r)}function Pvt(e){const t=e.anchor.getNode();return(Rs(t)?t:t.getParentOrThrow()).getDirection()==="rtl"}function sX(e,t,n){const r=Pvt(e);let s;s=wve(e)||r?!n:n,Ivt(e,t,s,"character")}function Ovt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const UD=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Lvt=UD&&"documentMode"in document?document.documentMode:null;!(!UD||!("InputEvent"in window)||Lvt)&&"getTargetRanges"in new window.InputEvent("input");const Dvt=UD&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function Cve(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}function th(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}const Fvt=Dvt;function xc(e,...t){const n=Cve(...t);n.length>0&&e.classList.add(...n)}function BD(e,...t){const n=Cve(...t);n.length>0&&e.classList.remove(...n)}function Uvt(e){return e?e.getAdjacentCaret():null}function Bvt(e){const t=op(e,n=>Ne(n)&&!n.isInline());return Ne(t)||Ovt(4,e.__key),t}const op=(e,t)=>{let n=e;for(;n!==Yn()&&n!=null;){if(t(n))return n;n=n.getParent()}return null};function uC(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function Vvt(e,t){const n=t.body?t.body.childNodes:[];let r=[];const s=[];for(let a=0;a<n.length;a++){const o=n[a];if(!Eve.has(o.nodeName)){const l=Mve(o,e,s,!1);l!==null&&(r=r.concat(l))}}return function(a){for(const o of a)o.getNextSibling()instanceof CD&&o.insertAfter(Ro());for(const o of a){const l=o.getChildren();for(const c of l)o.insertBefore(c);o.remove()}}(s),r}function Wvt(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=Yn().getChildren();for(let s=0;s<r.length;s++)Sve(e,r[s],n,t);return n.innerHTML}function Sve(e,t,n,r=null){let s=r===null||t.isSelected(r);const a=Ne(t)&&t.excludeFromCopy("html");let o=t;if(r!==null){let h=hve(t);h=Ze(h)&&r!==null?jvt(r,h):h,o=h}const l=Ne(o)?o.getChildren():[],c=e._nodes.get(o.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,o):o.exportDOM(e);const{element:d,after:m}=u;if(!d)return!1;const p=document.createDocumentFragment();for(let h=0;h<l.length;h++){const g=l[h],y=Sve(e,g,p,r);!s&&Ne(t)&&y&&t.extractWithChild(g,r,"html")&&(s=!0)}if(s&&!a){if((Ir(d)||Xj(d))&&d.append(p),n.append(d),m){const h=m.call(o,d);h&&(Xj(d)?d.replaceChildren(h):d.replaceWith(h))}}else n.append(p);return s}const Eve=new Set(["STYLE","SCRIPT"]);function Mve(e,t,n,r,s=new Map,a){let o=[];if(Eve.has(e.nodeName))return o;let l=null;const c=function(g,y){const{nodeName:v}=g,x=y._htmlConversions.get(v.toLowerCase());let b=null;if(x!==void 0)for(const _ of x){const w=_(g);w!==null&&(b===null||(b.priority||0)<=(w.priority||0))&&(b=w)}return b!==null?b.conversion:null}(e,t),u=c?c(e):null;let d=null;if(u!==null){d=u.after;const g=u.node;if(l=Array.isArray(g)?g[g.length-1]:g,l!==null){for(const[,y]of s)if(l=y(l,a),!l)break;l&&o.push(...Array.isArray(g)?g:[l])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const m=e.childNodes;let p=[];const h=(l==null||!yi(l))&&(l!=null&&qj(l)||r);for(let g=0;g<m.length;g++)p.push(...Mve(m[g],t,n,h,new Map(s),l));return d!=null&&(p=d(p)),cC(e)&&(p=$vt(e,p,h?()=>{const g=new CD;return n.push(g),g}:ur)),l==null?p.length>0?o=o.concat(p):cC(e)&&function(g){return g.nextSibling==null||g.previousSibling==null?!1:Zj(g.nextSibling)&&Zj(g.previousSibling)}(e)&&(o=o.concat(Ro())):Ne(l)&&l.append(...p),o}function $vt(e,t,n){const r=e.style.textAlign,s=[];let a=[];for(let o=0;o<t.length;o++){const l=t[o];if(qj(l))r&&!l.getFormat()&&l.setFormat(r),s.push(l);else if(a.push(l),o===t.length-1||o<t.length-1&&qj(t[o+1])){const c=n();c.setFormat(r),c.append(...a),s.push(c),a=[]}}return s}function Hvt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function zvt(e,t=Xe()){return t==null&&Hvt(166),De(t)&&t.isCollapsed()||t.getNodes().length===0?"":Wvt(e,t)}function aX(e,t){const n=e.getData("text/plain")||e.getData("text/uri-list");n!=null&&t.insertRawText(n)}function oX(e,t,n){const r=e.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===n._config.namespace&&Array.isArray(l.nodes))return e9(n,Gvt(l.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const l=new DOMParser().parseFromString(function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c}(s),"text/html");return e9(n,Vvt(n,l),t)}catch{}const o=a||e.getData("text/uri-list");if(o!=null)if(De(t)){const l=o.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let c=0;c<l.length;c++){const u=Xe();if(De(u)){const d=l[c];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([rx()]):u.insertText(d)}}}else t.insertRawText(o)}function e9(e,t,n){e.dispatchCommand(j0t,{nodes:t,selection:n})||n.insertNodes(t)}function Gvt(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],s=tvt(r);Ze(s)&&Rvt(s),t.push(s)}return t}const qvt=new Set(["http:","https:","mailto:","sms:","tel:"]);let ug=class kve extends Tl{static getType(){return"link"}static clone(t){return new kve(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",n={},r){super(r);const{target:s=null,rel:a=null,title:o=null}=n;this.__url=t,this.__target=s,this.__rel=a,this.__title=o}createDOM(t){const n=document.createElement("a");return n.href=this.sanitizeUrl(this.__url),this.__target!==null&&(n.target=this.__target),this.__rel!==null&&(n.rel=this.__rel),this.__title!==null&&(n.title=this.__title),xc(n,t.theme.link),n}updateDOM(t,n,r){if(jD(n)){const s=this.__url,a=this.__target,o=this.__rel,l=this.__title;s!==t.__url&&(n.href=s),a!==t.__target&&(a?n.target=a:n.removeAttribute("target")),o!==t.__rel&&(o?n.rel=o:n.removeAttribute("rel")),l!==t.__title&&(l?n.title=l:n.removeAttribute("title"))}return!1}static importDOM(){return{a:t=>({conversion:Kvt,priority:1})}}static importJSON(t){return nh().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){try{const n=new URL(t);if(!qvt.has(n.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const n=this.getWritable();return n.__url=t,n}getTarget(){return this.getLatest().__target}setTarget(t){const n=this.getWritable();return n.__target=t,n}getRel(){return this.getLatest().__rel}setRel(t){const n=this.getWritable();return n.__rel=t,n}getTitle(){return this.getLatest().__title}setTitle(t){const n=this.getWritable();return n.__title=t,n}insertNewAfter(t,n=!0){const r=nh(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,n,r){if(!De(n))return!1;const s=n.anchor.getNode(),a=n.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&n.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function Kvt(e){let t=null;if(jD(e)){const n=e.textContent;(n!==null&&n!==""||e.children.length>0)&&(t=nh(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function nh(e="",t){return fo(new ug(e,t))}function Bi(e){return e instanceof ug}let VD=class Tve extends ug{constructor(t="",n={},r){super(t,n,r),this.__isUnlinked=n.isUnlinked!==void 0&&n.isUnlinked!==null&&n.isUnlinked}static getType(){return"autolink"}static clone(t){return new Tve(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const n=this.getWritable();return n.__isUnlinked=t,n}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,n,r){return super.updateDOM(t,n,r)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return iX().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,n=!0){const r=this.getParentOrThrow().insertNewAfter(t,n);if(Ne(r)){const s=iX(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(s),s}return null}};function iX(e="",t){return fo(new VD(e,t))}function Jb(e){return e instanceof VD}const UVt=zt("TOGGLE_LINK_COMMAND");function lX(e,t){if(e.type==="element"){const n=e.getNode();return Ne(n)||function(r,...s){const a=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",r);for(const l of s)o.append("v",l);throw a.search=o.toString(),Error(`Minified Lexical error #${r}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),n.getChildren()[e.offset+t]||null}return null}function BVt(e,t={}){const{target:n,title:r}=t,s=t.rel===void 0?"noreferrer":t.rel,a=Xe();if(a===null||!De(a)&&!lu(a))return;if(lu(a)){const u=a.getNodes();return u.length===0?void 0:void u.forEach(d=>{if(e===null){const m=op(d,p=>!Jb(p)&&Bi(p));m&&(m.insertBefore(d),m.getChildren().length===0&&m.remove())}else{const m=op(d,p=>!Jb(p)&&Bi(p));if(m)m.setURL(e),n!==void 0&&m.setTarget(n),s!==void 0&&m.setRel(s);else{const p=nh(e,{rel:s,target:n});d.insertBefore(p),p.append(d)}}})}const o=a.extract();if(e===null)return void o.forEach(u=>{const d=op(u,m=>!Jb(m)&&Bi(m));if(d){const m=d.getChildren();for(let p=0;p<m.length;p++)d.insertBefore(m[p]);d.remove()}});const l=new Set,c=u=>{l.has(u.getKey())||(l.add(u.getKey()),u.setURL(e),n!==void 0&&u.setTarget(n),s!==void 0&&u.setRel(s),r!==void 0&&u.setTitle(r))};if(o.length===1){const u=cX(o[0],Bi);if(u!==null)return c(u)}(function(u){const d=Xe();if(!De(d))return u();const m=Sv(d),p=m.isBackward(),h=lX(m.anchor,p?-1:0),g=lX(m.focus,p?0:-1);if(u(),h||g){const y=Xe();if(De(y)){const v=y.clone();if(h){const x=h.getParent();x&&v.anchor.set(x.getKey(),h.getIndexWithinParent()+(p?1:0),"element")}if(g){const x=g.getParent();x&&v.focus.set(x.getKey(),g.getIndexWithinParent()+(p?0:1),"element")}Ps(Sv(v))}}})(()=>{let u=null;for(const d of o){if(!d.isAttached())continue;const m=cX(d,Bi);if(m){c(m);continue}if(Ne(d)){if(!d.isInline())continue;if(Bi(d)){if(!(Jb(d)||u!==null&&u.getParentOrThrow().isParentOf(d))){c(d),u=d;continue}for(const h of d.getChildren())d.insertBefore(h);d.remove();continue}}const p=d.getPreviousSibling();Bi(p)&&p.is(u)?p.append(d):(u=nh(e,{rel:s,target:n,title:r}),d.insertAfter(u),u.append(d))}})}function cX(e,t){let n=e;for(;n!==null&&n.getParent()!==null&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}function bd(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Yvt(e){let t=1,n=e.getParent();for(;n!=null;){if(ps(n)){const r=n.getParent();if(An(r)){t++,n=r.getParent();continue}bd(40)}return t}return t}function Hi(e){return ps(e)&&An(e.getFirstChild())}function uX(e){return xl().append(e)}function Nve(e,t){e.splice(e.getChildrenSize(),0,t)}function WD(e,t){const n=e.getLastChild(),r=t.getFirstChild();n&&r&&Hi(n)&&Hi(r)&&(WD(n.getFirstChild(),r.getFirstChild()),r.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function Qvt(e){const t=new Set;if(Hi(e)||t.has(e.getKey()))return;const n=e.getParent(),r=e.getNextSibling(),s=e.getPreviousSibling();if(Hi(r)&&Hi(s)){const a=s.getFirstChild();if(An(a)){a.append(e);const o=r.getFirstChild();An(o)&&(Nve(a,o.getChildren()),r.remove(),t.add(r.getKey()))}}else if(Hi(r)){const a=r.getFirstChild();if(An(a)){const o=a.getFirstChild();o!==null&&o.insertBefore(e)}}else if(Hi(s)){const a=s.getFirstChild();An(a)&&a.append(e)}else if(An(n)){const a=xl().setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle()),o=ci(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());a.append(o),o.append(e),s?s.insertAfter(a):r?r.insertBefore(a):n.append(a)}}function Xvt(e){if(Hi(e))return;const t=e.getParent(),n=t?t.getParent():void 0;if(An(n?n.getParent():void 0)&&ps(n)&&An(t)){const r=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(r))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(s))n.insertAfter(e),t.isEmpty()&&n.remove();else{const a=t.getListType(),o=xl(),l=ci(a);o.append(l),e.getPreviousSiblings().forEach(d=>l.append(d));const c=xl(),u=ci(a);c.append(u),Nve(u,e.getNextSiblings()),n.insertBefore(o),n.insertAfter(c),n.replace(e)}}}function dC(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}function dX(e,t,n){const r=nX(t.__textStyle);for(const s in r)e.style.setProperty(`--listitem-marker-${s}`,r[s]);if(n)for(const s in nX(n.__textStyle))s in r||e.style.removeProperty(`--listitem-marker-${s}`)}let T3=class Ave extends Tl{static getType(){return"listitem"}static clone(t){return new Ave(t.__value,t.__checked,t.__key)}constructor(t,n,r){super(r),this.__value=t===void 0?1:t,this.__checked=n}createDOM(t){const n=document.createElement("li"),r=this.getParent();An(r)&&r.getListType()==="check"&&mX(n,this,null),n.value=this.__value,fX(n,t.theme,this);const s=this.__style;return s&&(n.style.cssText=s),dX(n,this,null),n}updateDOM(t,n,r){const s=this.getParent();An(s)&&s.getListType()==="check"&&mX(n,this,t),n.value=this.__value,fX(n,r.theme,this);const a=t.__style,o=this.__style;return a!==o&&(o===""?n.removeAttribute("style"):n.style.cssText=o),dX(n,this,t),!1}static transform(){return t=>{if(ps(t)||bd(144),t.__checked==null)return;const n=t.getParent();An(n)&&n.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)}}static importDOM(){return{li:()=>({conversion:Zvt,priority:0})}}static importJSON(t){return xl().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const n=this.createDOM(t._config);n.style.textAlign=this.getFormatType();const r=this.getDirection();return r&&(n.dir=r),{element:n}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let n=0;n<t.length;n++){const r=t[n];if(Ne(r)&&this.canMergeWith(r)){const s=r.getChildren();this.append(...s),r.remove()}else super.append(r)}return this}replace(t,n){if(ps(t))return super.replace(t);this.setIndent(0);const r=this.getParentOrThrow();if(!An(r))return t;if(r.__first===this.getKey())r.insertBefore(t);else if(r.__last===this.getKey())r.insertAfter(t);else{const s=ci(r.getListType());let a=this.getNextSibling();for(;a;){const o=a;a=a.getNextSibling(),s.append(o)}r.insertAfter(t),t.insertAfter(s)}return n&&(Ne(t)||bd(139),this.getChildren().forEach(s=>{t.append(s)})),this.remove(),r.getChildrenSize()===0&&r.remove(),t}insertAfter(t,n=!0){const r=this.getParentOrThrow();if(An(r)||bd(39),ps(t))return super.insertAfter(t,n);const s=this.getNextSiblings();if(r.insertAfter(t,n),s.length!==0){const a=ci(r.getListType());s.forEach(o=>a.append(o)),t.insertAfter(a,n)}return t}remove(t){const n=this.getPreviousSibling(),r=this.getNextSibling();super.remove(t),n&&r&&Hi(n)&&Hi(r)&&(WD(n.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(t,n=!0){const r=xl().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,n),r}collapseAtStart(t){const n=ur();this.getChildren().forEach(o=>n.append(o));const r=this.getParentOrThrow(),s=r.getParentOrThrow(),a=ps(s);if(r.getChildrenSize()===1)if(a)r.remove(),s.select();else{r.insertBefore(n),r.remove();const o=t.anchor,l=t.focus,c=n.getKey();o.type==="element"&&o.getNode().is(this)&&o.set(c,o.offset,"element"),l.type==="element"&&l.getNode().is(this)&&l.set(c,l.offset,"element")}else r.insertBefore(n),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const n=this.getWritable();return n.__value=t,n}getChecked(){const t=this.getLatest();let n;const r=this.getParent();return An(r)&&(n=r.getListType()),n==="check"?!!t.__checked:void 0}setChecked(t){const n=this.getWritable();return n.__checked=t,n}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let n=t.getParentOrThrow(),r=0;for(;ps(n);)n=n.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(t){typeof t!="number"&&bd(117),(t=Math.floor(t))>=0||bd(199);let n=this.getIndent();for(;n!==t;)n<t?(Qvt(this),n++):(Xvt(this),n--);return this}canInsertAfter(t){return ps(t)}canReplaceWith(t){return ps(t)}canMergeWith(t){return ps(t)||Yp(t)}extractWithChild(t,n){if(!De(n))return!1;const r=n.anchor.getNode(),s=n.focus.getNode();return this.isParentOf(r)&&this.isParentOf(s)&&this.getTextContent().length===n.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return ci("bullet")}canMergeWhenEmpty(){return!0}};function fX(e,t,n){const r=[],s=[],a=t.list,o=a?a.listitem:void 0;let l;if(a&&a.nested&&(l=a.nested.listitem),o!==void 0&&r.push(...dC(o)),a){const c=n.getParent(),u=An(c)&&c.getListType()==="check",d=n.getChecked();u&&!d||s.push(a.listitemUnchecked),u&&d||s.push(a.listitemChecked),u&&r.push(d?a.listitemChecked:a.listitemUnchecked)}if(l!==void 0){const c=dC(l);n.getChildren().some(u=>An(u))?r.push(...c):s.push(...c)}s.length>0&&BD(e,...s),r.length>0&&xc(e,...r)}function mX(e,t,n,r){An(t.getFirstChild())?(e.removeAttribute("role"),e.removeAttribute("tabIndex"),e.removeAttribute("aria-checked")):(e.setAttribute("role","checkbox"),e.setAttribute("tabIndex","-1"),n&&t.__checked===n.__checked||e.setAttribute("aria-checked",t.getChecked()?"true":"false"))}function Zvt(e){if(e.classList.contains("task-list-item")){for(const n of e.children)if(n.tagName==="INPUT")return Jvt(n)}const t=e.getAttribute("aria-checked");return{node:xl(t==="true"||t!=="false"&&void 0)}}function Jvt(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:xl(e.hasAttribute("checked"))}}function xl(e){return fo(new T3(void 0,e))}function ps(e){return e instanceof T3}let N3=class jve extends Tl{static getType(){return"list"}static clone(t){const n=t.__listType||gX[t.__tag];return new jve(n,t.__start,t.__key)}constructor(t="number",n=1,r){super(r);const s=gX[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=n}getTag(){return this.__tag}setListType(t){const n=this.getWritable();return n.__listType=t,n.__tag=t==="number"?"ol":"ul",n}getListType(){return this.__listType}getStart(){return this.__start}setStart(t){const n=this.getWritable();return n.__start=t,n}createDOM(t,n){const r=this.__tag,s=document.createElement(r);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,pX(s,t.theme,this),s}updateDOM(t,n,r){return t.__tag!==this.__tag||(pX(n,r.theme,this),!1)}static transform(){return t=>{An(t)||bd(163),function(n){const r=n.getNextSibling();An(r)&&n.getListType()===r.getListType()&&WD(n,r)}(t),function(n){const r=n.getListType()!=="check";let s=n.getStart();for(const a of n.getChildren())ps(a)&&(a.getValue()!==s&&a.setValue(s),r&&a.getLatest().__checked!=null&&a.setChecked(void 0),An(a.getFirstChild())||s++)}(t)}}static importDOM(){return{ol:()=>({conversion:hX,priority:0}),ul:()=>({conversion:hX,priority:0})}}static importJSON(t){return ci().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const n=this.createDOM(t._config,t);return Ir(n)&&(this.__start!==1&&n.setAttribute("start",String(this.__start)),this.__listType==="check"&&n.setAttribute("__lexicalListType","check")),{element:n}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,n,r){let s=r;for(let a=0;a<r.length;a++){const o=r[a];ps(o)||(s===r&&(s=[...r]),s[a]=xl().append(!Ne(o)||An(o)||o.isInline()?o:Jn(o.getTextContent())))}return super.splice(t,n,s)}extractWithChild(t){return ps(t)}};function pX(e,t,n){const r=[],s=[],a=t.list;if(a!==void 0){const o=a[`${n.__tag}Depth`]||[],l=Yvt(n)-1,c=l%o.length,u=o[c],d=a[n.__tag];let m;const p=a.nested,h=a.checklist;if(p!==void 0&&p.list&&(m=p.list),d!==void 0&&r.push(d),h!==void 0&&n.__listType==="check"&&r.push(h),u!==void 0){r.push(...dC(u));for(let g=0;g<o.length;g++)g!==c&&s.push(n.__tag+g)}if(m!==void 0){const g=dC(m);l>1?r.push(...g):s.push(...g)}}s.length>0&&BD(e,...s),r.length>0&&xc(e,...r)}function e1t(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(ps(r)){t.push(r);const s=r.getChildren();s.length>1&&s.forEach(a=>{An(a)&&t.push(uX(a))})}else t.push(uX(r))}return t}function hX(e){const t=e.nodeName.toLowerCase();let n=null;return t==="ol"?n=ci("number",e.start):t==="ul"&&(n=function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const s of r.childNodes)if(Ir(s)&&s.hasAttribute("aria-checked"))return!0;return!1}(e)?ci("check"):ci("bullet")),{after:e1t,node:n}}const gX={ol:"number",ul:"bullet"};function ci(e="number",t=1){return fo(new N3(e,t))}function An(e){return e instanceof N3}const Rve=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,t1t=Rve&&"documentMode"in document?document.documentMode:null;!(!Rve||!("InputEvent"in window)||t1t)&&"getTargetRanges"in new window.InputEvent("input");class ix extends Tl{static getType(){return"quote"}static clone(t){return new ix(t.__key)}createDOM(t){const n=document.createElement("blockquote");return xc(n,t.theme.quote),n}updateDOM(t,n){return!1}static importDOM(){return{blockquote:t=>({conversion:n1t,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Ir(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();n.style.textAlign=r;const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return $D().updateFromJSON(t)}insertNewAfter(t,n){const r=ur(),s=this.getDirection();return r.setDirection(s),this.insertAfter(r,n),r}collapseAtStart(){const t=ur();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}canMergeWhenEmpty(){return!0}}function $D(){return fo(new ix)}function t9(e){return e instanceof ix}let HD=class Ive extends Tl{static getType(){return"heading"}static clone(t){return new Ive(t.__tag,t.__key)}constructor(t,n){super(n),this.__tag=t}getTag(){return this.__tag}setTag(t){const n=this.getWritable();return this.__tag=t,n}createDOM(t){const n=this.__tag,r=document.createElement(n),s=t.theme.heading;if(s!==void 0){const a=s[n];xc(r,a)}return r}updateDOM(t,n,r){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:am,priority:0}),h2:t=>({conversion:am,priority:0}),h3:t=>({conversion:am,priority:0}),h4:t=>({conversion:am,priority:0}),h5:t=>({conversion:am,priority:0}),h6:t=>({conversion:am,priority:0}),p:t=>{const n=t.firstChild;return n!==null&&yX(n)?{conversion:()=>({node:null}),priority:3}:null},span:t=>yX(t)?{conversion:n=>({node:Om("h1")}),priority:3}:null}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Ir(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();n.style.textAlign=r;const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return Om(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,n=!0){const r=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&r===s.getTextContentSize()||!t?ur():Om(this.getTag()),o=this.getDirection();if(a.setDirection(o),this.insertAfter(a,n),r===0&&!this.isEmpty()&&t){const l=ur();l.select(),this.replace(l,!0)}return a}collapseAtStart(){const t=this.isEmpty()?ur():Om(this.getTag());return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}extractWithChild(){return!0}};function yX(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function am(e){const t=e.nodeName.toLowerCase();let n=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(n=Om(t),e.style!==null&&(RD(e,n),n.setFormat(e.style.textAlign))),{node:n}}function n1t(e){const t=$D();return e.style!==null&&(t.setFormat(e.style.textAlign),RD(e,t)),{node:t}}function Om(e="h1"){return fo(new HD(e))}function r1t(e){return e instanceof HD}var wT={exports:{}},vX;function s1t(){return vX||(vX=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,o={},l={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function b(_){return _ instanceof c?new c(_.type,b(_.content),_.alias):Array.isArray(_)?_.map(b):_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++a}),b.__id},clone:function b(_,w){w=w||{};var C,S;switch(l.util.type(_)){case"Object":if(S=l.util.objId(_),w[S])return w[S];C={},w[S]=C;for(var E in _)_.hasOwnProperty(E)&&(C[E]=b(_[E],w));return C;case"Array":return S=l.util.objId(_),w[S]?w[S]:(C=[],w[S]=C,_.forEach(function(M,k){C[k]=b(M,w)}),C);default:return _}},getLanguage:function(b){for(;b;){var _=s.exec(b.className);if(_)return _[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,_){b.className=b.className.replace(RegExp(s,"gi"),""),b.classList.add("language-"+_)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(C){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(b){var _=document.getElementsByTagName("script");for(var w in _)if(_[w].src==b)return _[w]}return null}},isActive:function(b,_,w){for(var C="no-"+_;b;){var S=b.classList;if(S.contains(_))return!0;if(S.contains(C))return!1;b=b.parentElement}return!!w}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(b,_){var w=l.util.clone(l.languages[b]);for(var C in _)w[C]=_[C];return w},insertBefore:function(b,_,w,C){C=C||l.languages;var S=C[b],E={};for(var M in S)if(S.hasOwnProperty(M)){if(M==_)for(var k in w)w.hasOwnProperty(k)&&(E[k]=w[k]);w.hasOwnProperty(M)||(E[M]=S[M])}var T=C[b];return C[b]=E,l.languages.DFS(l.languages,function(j,R){R===T&&j!=b&&(this[j]=E)}),E},DFS:function b(_,w,C,S){S=S||{};var E=l.util.objId;for(var M in _)if(_.hasOwnProperty(M)){w.call(_,M,_[M],C||M);var k=_[M],T=l.util.type(k);T==="Object"&&!S[E(k)]?(S[E(k)]=!0,b(k,w,null,S)):T==="Array"&&!S[E(k)]&&(S[E(k)]=!0,b(k,w,M,S))}}},plugins:{},highlightAll:function(b,_){l.highlightAllUnder(document,b,_)},highlightAllUnder:function(b,_,w){var C={callback:w,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),l.hooks.run("before-all-elements-highlight",C);for(var S=0,E;E=C.elements[S++];)l.highlightElement(E,_===!0,C.callback)},highlightElement:function(b,_,w){var C=l.util.getLanguage(b),S=l.languages[C];l.util.setLanguage(b,C);var E=b.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(E,C);var M=b.textContent,k={element:b,language:C,grammar:S,code:M};function T(R){k.highlightedCode=R,l.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,l.hooks.run("after-highlight",k),l.hooks.run("complete",k),w&&w.call(k.element)}if(l.hooks.run("before-sanity-check",k),E=k.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!k.code){l.hooks.run("complete",k),w&&w.call(k.element);return}if(l.hooks.run("before-highlight",k),!k.grammar){T(l.util.encode(k.code));return}if(_&&r.Worker){var j=new Worker(l.filename);j.onmessage=function(R){T(R.data)},j.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else T(l.highlight(k.code,k.grammar,k.language))},highlight:function(b,_,w){var C={code:b,grammar:_,language:w};if(l.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=l.tokenize(C.code,C.grammar),l.hooks.run("after-tokenize",C),c.stringify(l.util.encode(C.tokens),C.language)},tokenize:function(b,_){var w=_.rest;if(w){for(var C in w)_[C]=w[C];delete _.rest}var S=new m;return p(S,S.head,b),d(b,S,_,S.head,0),g(S)},hooks:{all:{},add:function(b,_){var w=l.hooks.all;w[b]=w[b]||[],w[b].push(_)},run:function(b,_){var w=l.hooks.all[b];if(!(!w||!w.length))for(var C=0,S;S=w[C++];)S(_)}},Token:c};r.Prism=l;function c(b,_,w,C){this.type=b,this.content=_,this.alias=w,this.length=(C||"").length|0}c.stringify=function b(_,w){if(typeof _=="string")return _;if(Array.isArray(_)){var C="";return _.forEach(function(T){C+=b(T,w)}),C}var S={type:_.type,content:b(_.content,w),tag:"span",classes:["token",_.type],attributes:{},language:w},E=_.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(S.classes,E):S.classes.push(E)),l.hooks.run("wrap",S);var M="";for(var k in S.attributes)M+=" "+k+'="'+(S.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+M+">"+S.content+"</"+S.tag+">"};function u(b,_,w,C){b.lastIndex=_;var S=b.exec(w);if(S&&C&&S[1]){var E=S[1].length;S.index+=E,S[0]=S[0].slice(E)}return S}function d(b,_,w,C,S,E){for(var M in w)if(!(!w.hasOwnProperty(M)||!w[M])){var k=w[M];k=Array.isArray(k)?k:[k];for(var T=0;T<k.length;++T){if(E&&E.cause==M+","+T)return;var j=k[T],R=j.inside,O=!!j.lookbehind,P=!!j.greedy,N=j.alias;if(P&&!j.pattern.global){var I=j.pattern.toString().match(/[imsuy]*$/)[0];j.pattern=RegExp(j.pattern.source,I+"g")}for(var D=j.pattern||j,F=C.next,B=S;F!==_.tail&&!(E&&B>=E.reach);B+=F.value.length,F=F.next){var V=F.value;if(_.length>b.length)return;if(!(V instanceof c)){var $=1,G;if(P){if(G=u(D,B,b,O),!G||G.index>=b.length)break;var H=G.index,X=G.index+G[0].length,Y=B;for(Y+=F.value.length;H>=Y;)F=F.next,Y+=F.value.length;if(Y-=F.value.length,B=Y,F.value instanceof c)continue;for(var W=F;W!==_.tail&&(Y<X||typeof W.value=="string");W=W.next)$++,Y+=W.value.length;$--,V=b.slice(B,Y),G.index-=B}else if(G=u(D,0,V,O),!G)continue;var H=G.index,Z=G[0],re=V.slice(0,H),q=V.slice(H+Z.length),J=B+V.length;E&&J>E.reach&&(E.reach=J);var te=F.prev;re&&(te=p(_,te,re),B+=re.length),h(_,te,$);var se=new c(M,R?l.tokenize(Z,R):Z,N,Z);if(F=p(_,te,se),q&&p(_,F,q),$>1){var de={cause:M+","+T,reach:J};d(b,_,w,F.prev,B,de),E&&de.reach>E.reach&&(E.reach=de.reach)}}}}}}function m(){var b={value:null,prev:null,next:null},_={value:null,prev:b,next:null};b.next=_,this.head=b,this.tail=_,this.length=0}function p(b,_,w){var C=_.next,S={value:w,prev:_,next:C};return _.next=S,C.prev=S,b.length++,S}function h(b,_,w){for(var C=_.next,S=0;S<w&&C!==b.tail;S++)C=C.next;_.next=C,C.prev=_,b.length-=S}function g(b){for(var _=[],w=b.head.next;w!==b.tail;)_.push(w.value),w=w.next;return _}if(!r.document)return r.addEventListener&&(l.disableWorkerMessageHandler||r.addEventListener("message",function(b){var _=JSON.parse(b.data),w=_.language,C=_.code,S=_.immediateClose;r.postMessage(l.highlight(C,l.languages[w],w)),S&&r.close()},!1)),l;var y=l.util.currentScript();y&&(l.filename=y.src,y.hasAttribute("data-manual")&&(l.manual=!0));function v(){l.manual||l.highlightAll()}if(!l.manual){var x=document.readyState;x==="loading"||x==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return l}(t);e.exports&&(e.exports=n),typeof Ya<"u"&&(Ya.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(s,a){var o={};o["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[a]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};l["language-"+a]={pattern:/[\s\S]+/,inside:n.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,s){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:n.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var a=r.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",c="loading",u="loaded",d="failed",m="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+c+'"])';function p(y,v,x){var b=new XMLHttpRequest;b.open("GET",y,!0),b.onreadystatechange=function(){b.readyState==4&&(b.status<400&&b.responseText?v(b.responseText):b.status>=400?x(s(b.status,b.statusText)):x(a))},b.send(null)}function h(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var x=Number(v[1]),b=v[2],_=v[3];return b?_?[x,Number(_)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(y){y.selector+=", "+m}),n.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(m)){y.code="",v.setAttribute(l,c);var x=v.appendChild(document.createElement("CODE"));x.textContent=r;var b=v.getAttribute("data-src"),_=y.language;if(_==="none"){var w=(/\.(\w+)$/.exec(b)||[,"none"])[1];_=o[w]||w}n.util.setLanguage(x,_),n.util.setLanguage(v,_);var C=n.plugins.autoloader;C&&C.loadLanguages(_),p(b,function(S){v.setAttribute(l,u);var E=h(v.getAttribute("data-range"));if(E){var M=S.split(/\r\n?|\n/g),k=E[0],T=E[1]==null?M.length:E[1];k<0&&(k+=M.length),k=Math.max(0,Math.min(k-1,M.length)),T<0&&(T+=M.length),T=Math.max(0,Math.min(T,M.length)),S=M.slice(k,T).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(k+1))}x.textContent=S,n.highlightElement(x)},function(S){v.setAttribute(l,d),x.textContent=S})}}),n.plugins.fileHighlight={highlight:function(v){for(var x=(v||document).querySelectorAll(m),b=0,_;_=x[b++];)n.highlightElement(_)}};var g=!1;n.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(wT)),wT.exports}s1t();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};s["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(m){d!==m&&(e.languages.markdown[d].inside.content.inside[m]=e.languages.markdown[m])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function m(p){if(!(!p||typeof p=="string"))for(var h=0,g=p.length;h<g;h++){var y=p[h];if(y.type!=="code"){m(y.content);continue}var v=y.content[1],x=y.content[3];if(v&&x&&v.type==="code-language"&&x.type==="code-block"&&typeof v.content=="string"){var b=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");b=(/[a-z][\w-]*/i.exec(b)||[""])[0].toLowerCase();var _="language-"+b;x.alias?typeof x.alias=="string"?x.alias=[x.alias,_]:x.alias.push(_):x.alias=[_]}}}m(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var m="",p=0,h=d.classes.length;p<h;p++){var g=d.classes[p],y=/language-(.+)/.exec(g);if(y){m=y[1];break}}var v=e.languages[m];if(v)d.content=e.highlight(u(d.content),v,m);else if(m&&m!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(m,function(){var b=document.getElementById(x);b&&(b.innerHTML=e.highlight(b.textContent,e.languages[m],m))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),l={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(d){var m=d.replace(o,"");return m=m.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,h){if(h=h.toLowerCase(),h[0]==="#"){var g;return h[1]==="x"?g=parseInt(h.slice(2),16):g=Number(h.slice(1)),c(g)}else{var y=l[h];return y||p}}),m}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var xX={},bX;function a1t(){return bX||(bX=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),xX}a1t();var _X={},wX;function o1t(){return wX||(wX=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),_X}o1t();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var CX={},SX;function i1t(){return SX||(SX=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),CX}i1t();var EX={},MX;function l1t(){return MX||(MX=1,function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism)),EX}l1t();var kX={},TX;function c1t(){return TX||(TX=1,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Prism)),kX}c1t();const u1t=globalThis.Prism||window.Prism,NX=e=>{try{return!!e&&u1t.languages.hasOwnProperty(e)}catch{return!1}};function Pve(e,t){for(const n of e.childNodes){if(Ir(n)&&n.tagName===t)return!0;Pve(n,t)}return!1}const ky="data-language",e_="data-highlight-language";let zD=class Ove extends Tl{static getType(){return"code"}static clone(t){return new Ove(t.__language,t.__key)}constructor(t,n){super(n),this.__language=t||void 0,this.__isSyntaxHighlightSupported=NX(t)}createDOM(t){const n=document.createElement("code");xc(n,t.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();return r&&(n.setAttribute(ky,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(e_,r)),n}updateDOM(t,n,r){const s=this.__language,a=t.__language;return s?s!==a&&(n.setAttribute(ky,s),this.__isSyntaxHighlightSupported&&n.setAttribute(e_,s)):a&&(n.removeAttribute(ky),t.__isSyntaxHighlightSupported&&n.removeAttribute(e_)),!1}exportDOM(t){const n=document.createElement("pre");xc(n,t._config.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();return r&&(n.setAttribute(ky,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(e_,r)),{element:n}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||Pve(t,"BR"))?{conversion:AX,priority:1}:null,div:()=>({conversion:d1t,priority:1}),pre:()=>({conversion:AX,priority:0}),table:t=>CT(t)?{conversion:f1t,priority:3}:null,td:t=>{const n=t,r=n.closest("table");return n.classList.contains("js-file-line")||r&&CT(r)?{conversion:jX,priority:3}:null},tr:t=>{const n=t.closest("table");return n&&CT(n)?{conversion:jX,priority:3}:null}}}static importJSON(t){return sc().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage()}}insertNewAfter(t,n=!0){const r=this.getChildren(),s=r.length;if(s>=2&&r[s-1].getTextContent()===`
`&&r[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){r[s-1].remove(),r[s-2].remove();const c=ur();return this.insertAfter(c,n),c}const{anchor:a,focus:o}=t,l=(a.isBefore(o)?a:o).getNode();if(Ze(l)){let c=p1t(l);const u=[];for(;;)if(vD(c))u.push(rx()),c=c.getNextSibling();else{if(!Uve(c))break;{let v=0;const x=c.getTextContent(),b=c.getTextContentSize();for(;v<b&&x[v]===" ";)v++;if(v!==0&&u.push(Fve(" ".repeat(v))),v!==b)break;c=c.getNextSibling()}}const d=l.splitText(a.offset)[0],m=a.offset===0?0:1,p=d.getIndexWithinParent()+m,h=l.getParentOrThrow(),g=[Ro(),...u];h.splice(p,0,g);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(GD(l)){const{offset:c}=t.anchor;l.splice(c,0,[Ro()]),l.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=ur();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}setLanguage(t){const n=this.getWritable();return n.__language=t||void 0,n.__isSyntaxHighlightSupported=NX(t),n}getLanguage(){return this.getLatest().__language}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}};function sc(e){return fo(new zD(e))}function GD(e){return e instanceof zD}function AX(e){return{node:sc(e.getAttribute(ky))}}function d1t(e){const t=e,n=RX(t);return n||function(r){let s=r.parentElement;for(;s!==null;){if(RX(s))return!0;s=s.parentElement}return!1}(t)?{node:n?sc():null}:{node:null}}function f1t(){return{node:sc()}}function jX(){return{node:null}}function RX(e){return e.style.fontFamily.match("monospace")!==null}function CT(e){return e.classList.contains("js-file-line-container")}let Lve=class Dve extends Fu{constructor(t="",n,r){super(t,r),this.__highlightType=n}static getType(){return"code-highlight"}static clone(t){return new Dve(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const n=this.getWritable();return n.__highlightType=t||void 0,n}canHaveFormat(){return!1}createDOM(t){const n=super.createDOM(t),r=ST(t.theme,this.__highlightType);return xc(n,r),n}updateDOM(t,n,r){const s=super.updateDOM(t,n,r),a=ST(r.theme,t.__highlightType),o=ST(r.theme,this.__highlightType);return a!==o&&(a&&BD(n,a),o&&xc(n,o)),s}static importJSON(t){return Fve().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return sc()}};function ST(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function Fve(e="",t){return fo(new Lve(e,t))}function Uve(e){return e instanceof Lve}function m1t(e,t){let n=e;for(let r=_s(e,t);r&&(Uve(r.origin)||vD(r.origin));r=Uvt(r))n=r.origin;return n}function p1t(e){return m1t(e,"previous")}function n9(e,t){const n={};for(const r of e){const s=t(r);s&&(n[s]?n[s].push(r):n[s]=[r])}return n}function Bve(e){const t=n9(e,n=>n.type);return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const fC=/[!-/:-@[-`{-~\s]/,h1t=/^\s{0,3}$/;function g1t(e){if(!Yp(e))return!1;const t=e.getFirstChild();return t==null||e.getChildrenSize()===1&&Ze(t)&&h1t.test(t.getTextContent())}function y1t(e,t){const n=function(s,a){const o=s.match(a.openTagsRegExp);if(o==null)return null;for(const l of o){const c=l.replace(/^\s/,""),u=a.fullMatchRegExpByTag[c];if(u==null)continue;const d=s.match(u),m=a.transformersByTag[c];if(d!=null&&m!=null){if(m.intraword!==!1)return d;const{index:p=0}=d,h=s[p-1],g=s[p+d[0].length];if((!h||fC.test(h))&&(!g||fC.test(g)))return d}}return null}(e.getTextContent(),t);if(!n)return null;const r=n.index||0;return{endIndex:r+n[0].length,match:n,startIndex:r,transformer:t.transformersByTag[n[1]]}}function yd(e){return Ze(e)&&!e.hasFormat("code")}function vd(e,t,n){let r=y1t(e,t),s=function(o,l){const c=o;let u,d,m,p;for(const h of l){if(!h.replace||!h.importRegExp)continue;const g=c.getTextContent().match(h.importRegExp);if(!g)continue;const y=g.index||0,v=h.getEndIndex?h.getEndIndex(c,g):y+g[0].length;v!==!1&&(u===void 0||d===void 0||y<u&&v>d)&&(u=y,d=v,m=h,p=g)}return u===void 0||d===void 0||m===void 0||p===void 0?null:{endIndex:d,match:p,startIndex:u,transformer:m}}(e,n);if(r&&s&&(r.startIndex<=s.startIndex&&r.endIndex>=s.endIndex?s=null:r=null),r){const o=function(l,c,u,d,m){const p=l.getTextContent();let h,g,y;if(m[0]===p?h=l:c===0?[h,g]=l.splitText(u):[y,h,g]=l.splitText(c,u),h.setTextContent(m[2]),d)for(const v of d.format)h.hasFormat(v)||h.toggleFormat(v);return{nodeAfter:g,nodeBefore:y,transformedNode:h}}(e,r.startIndex,r.endIndex,r.transformer,r.match);yd(o.nodeAfter)&&vd(o.nodeAfter,t,n),yd(o.nodeBefore)&&vd(o.nodeBefore,t,n),yd(o.transformedNode)&&vd(o.transformedNode,t,n)}else if(s){const o=function(l,c,u,d,m){let p,h,g;return c===0?[p,h]=l.splitText(u):[g,p,h]=l.splitText(c,u),d.replace?{nodeAfter:h,nodeBefore:g,transformedNode:d.replace(p,m)||void 0}:null}(e,s.startIndex,s.endIndex,s.transformer,s.match);if(!o)return;yd(o.nodeAfter)&&vd(o.nodeAfter,t,n),yd(o.nodeBefore)&&vd(o.nodeBefore,t,n),yd(o.transformedNode)&&vd(o.transformedNode,t,n)}const a=e.getTextContent().replace(/\\([*_`~\\])/g,"$1").replace(/&#(\d+);/g,(o,l)=>String.fromCodePoint(l));e.setTextContent(a)}function v1t(e,t=!1){const n=Bve(e),r=function(s){const a={},o={},l=[],c="(?<![\\\\])";for(const u of s){const{tag:d}=u;a[d]=u;const m=d.replace(/(\*|\^|\+)/g,"\\$1");l.push(m),d.length===1?o[d]=new RegExp(`(?<![\\\\${m}])(${m})((\\\\${m})?.*?[^${m}\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?![\\\\${m}])`):o[d]=new RegExp(`(?<!\\\\)(${m})((\\\\${m})?.*?[^\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?!\\\\)`)}return{fullMatchRegExpByTag:o,openTagsRegExp:new RegExp(`${c}(${l.join("|")})`,"g"),transformersByTag:a}}(n.textFormat);return(s,a)=>{const o=s.split(`
`),l=o.length,c=a||Yn();c.clear();for(let d=0;d<l;d++){const m=o[d],[p,h]=x1t(o,d,n.multilineElement,c);p?d=h:b1t(m,c,n.element,r,n.textMatch,t)}const u=c.getChildren();for(const d of u)!t&&g1t(d)&&c.getChildrenSize()>1&&d.remove();Xe()!==null&&c.selectStart()}}function x1t(e,t,n,r){for(const s of n){const{handleImportAfterStartMatch:a,regExpEnd:o,regExpStart:l,replace:c}=s,u=e[t].match(l);if(!u)continue;if(a){const g=a({lines:e,rootNode:r,startLineIndex:t,startMatch:u,transformer:s});if(g===null)continue;if(g)return g}const d=typeof o=="object"&&"regExp"in o?o.regExp:o,m=o&&typeof o=="object"&&"optional"in o?o.optional:!o;let p=t;const h=e.length;for(;p<h;){const g=d?e[p].match(d):null;if(!g&&(!m||m&&p<h-1)){p++;continue}if(g&&t===p&&g.index===u.index){p++;continue}const y=[];if(g&&t===p)y.push(e[t].slice(u[0].length,-g[0].length));else for(let v=t;v<=p;v++)if(v===t){const x=e[v].slice(u[0].length);y.push(x)}else if(v===p&&g){const x=e[v].slice(0,-g[0].length);y.push(x)}else y.push(e[v]);if(c(r,null,u,g,y,!0)!==!1)return[!0,p];break}}return[!1,t]}function b1t(e,t,n,r,s,a){const o=Jn(e),l=ur();l.append(o),t.append(l);for(const{regExp:c,replace:u}of n){const d=e.match(c);if(d&&(o.setTextContent(e.slice(d[0].length)),u(l,[o],d,!0)!==!1))break}if(vd(o,r,s),l.isAttached()&&e.length>0){const c=l.getPreviousSibling();if(!a&&(Yp(c)||t9(c)||An(c))){let u=c;if(An(c)){const d=c.getLastDescendant();u=d==null?null:op(d,ps)}u!=null&&u.getTextContentSize()>0&&(u.splice(u.getChildrenSize(),0,[Ro(),...l.getChildren()]),l.remove())}}}function _1t(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function IX(e,t,n){const r=n.length;for(let s=t;s>=r;s--){const a=s-r;if(Vve(e,a,n,0,r)&&e[a+r]!==" ")return a}return-1}function Vve(e,t,n,r,s){for(let a=0;a<s;a++)if(e[t+a]!==n[r+a])return!1;return!0}function VVt(e,t=Qve){const n=Bve(t),r=n9(n.textFormat,({tag:o})=>o[o.length-1]),s=n9(n.textMatch,({trigger:o})=>o);for(const o of t){const l=o.type;if(l==="element"||l==="text-match"||l==="multiline-element"){const c=o.dependencies;for(const u of c)e.hasNode(u)||_1t(173,u.getType())}}const a=(o,l,c)=>{(function(u,d,m,p){const h=u.getParent();if(!yi(h)||u.getFirstChild()!==d)return!1;const g=d.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExp:y,replace:v}of p){const x=g.match(y);if(x&&x[0].length===(x[0].endsWith(" ")?m:m-1)){const b=d.getNextSiblings(),[_,w]=d.splitText(m);if(_.remove(),v(u,w?[w,...b]:b,x,!1)!==!1)return!0}}return!1})(o,l,c,n.element)||function(u,d,m,p){const h=u.getParent();if(!yi(h)||u.getFirstChild()!==d)return!1;const g=d.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:x}of p){if(x&&!("optional"in x)||x&&"optional"in x&&!x.optional)continue;const b=g.match(y);if(b&&b[0].length===(b[0].endsWith(" ")?m:m-1)){const _=d.getNextSiblings(),[w,C]=d.splitText(m);if(w.remove(),v(u,C?[C,..._]:_,b,null,null,!1)!==!1)return!0}}return!1}(o,l,c,n.multilineElement)||function(u,d,m){let p=u.getTextContent();const h=m[p[d-1]];if(h==null)return!1;d<p.length&&(p=p.slice(0,d));for(const g of h){if(!g.replace||!g.regExp)continue;const y=p.match(g.regExp);if(y===null)continue;const v=y.index||0,x=v+y[0].length;let b;return v===0?[b]=u.splitText(x):[,b]=u.splitText(v,x),b.selectNext(0,0),g.replace(b,y),!0}return!1}(l,c,s)||function(u,d,m){const p=u.getTextContent(),h=d-1,g=p[h],y=m[g];if(!y)return!1;for(const v of y){const{tag:x}=v,b=x.length,_=h-b+1;if(b>1&&!Vve(p,_,x,0,b)||p[_-1]===" ")continue;const w=p[h+1];if(v.intraword===!1&&w&&!fC.test(w))continue;const C=u;let S=C,E=IX(p,_,x),M=S;for(;E<0&&(M=M.getPreviousSibling())&&!Vd(M);)if(Ze(M)){if(M.hasFormat("code"))continue;const D=M.getTextContent();S=M,E=IX(D,D.length,x)}if(E<0||S===C&&E+b===_)continue;const k=S.getTextContent();if(E>0&&k[E-1]===g)continue;const T=k[E-1];if(v.intraword===!1&&T&&!fC.test(T))continue;const j=C.getTextContent(),R=j.slice(0,_)+j.slice(h+1);C.setTextContent(R);const O=S===C?R:k;S.setTextContent(O.slice(0,E)+O.slice(E+b));const P=Xe(),N=G0e();Ps(N);const I=h-b*(S===C?2:1)+1;N.anchor.set(S.__key,E,"text"),N.focus.set(C.__key,I,"text");for(const D of v.format)N.hasFormat(D)||N.formatText(D);N.anchor.set(N.focus.key,N.focus.offset,N.focus.type);for(const D of v.format)N.hasFormat(D)&&N.toggleFormat(D);return De(P)&&(N.format=P.format),!0}}(l,c,r)};return e.registerUpdateListener(({tags:o,dirtyLeaves:l,editorState:c,prevEditorState:u})=>{if(o.has(nve)||o.has(nvt)||e.isComposing())return;const d=c.read(Xe),m=u.read(Xe);if(!De(m)||!De(d)||!d.isCollapsed()||d.is(m))return;const p=d.anchor.key,h=d.anchor.offset,g=c._nodeMap.get(p);!Ze(g)||!l.has(p)||h!==1&&h>m.anchor.offset+1||e.update(()=>{if(!yd(g))return;const y=g.getParent();y===null||GD(y)||a(y,g,d.anchor.offset)})})}const Wve=/^(\s*)(\d{1,})\.\s/,$ve=/^(\s*)[-*+]\s/,w1t=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,r9=/^(#{1,6})\s/,Hve=/^>\s/,zve=/^[ \t]*```(\w+)?/,Gve=/[ \t]*```$/,C1t=/^[ \t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/,S1t=/^(?:\|)(.+)(?:\|)\s?$/,E1t=/^(\| ?:?-*:? ?)+\|\s?$/,qve=e=>(t,n,r)=>{const s=e(r);s.append(...n),t.replace(s),s.select(0,0)},Kve=e=>(t,n,r)=>{const s=t.getPreviousSibling(),a=t.getNextSibling(),o=xl(e==="check"?r[3]==="x":void 0);if(An(a)&&a.getListType()===e){const c=a.getFirstChild();c!==null?c.insertBefore(o):a.append(o),t.remove()}else if(An(s)&&s.getListType()===e)s.append(o),t.remove();else{const c=ci(e,e==="number"?Number(r[2]):void 0);c.append(o),t.replace(c)}o.append(...n),o.select(0,0);const l=function(c){const u=c.match(/\t/g),d=c.match(/ /g);let m=0;return u&&(m+=u.length),d&&(m+=Math.floor(d.length/4)),m}(r[1]);l&&o.setIndent(l)},qD=(e,t,n)=>{const r=[],s=e.getChildren();let a=0;for(const o of s)if(ps(o)){if(o.getChildrenSize()===1){const d=o.getFirstChild();if(An(d)){r.push(qD(d,t,n+1));continue}}const l=" ".repeat(4*n),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${o.getChecked()?"x":" "}] `:"- ";r.push(l+u+t(o)),a++}return r.join(`
`)},M1t={dependencies:[HD],export:(e,t)=>{if(!r1t(e))return null;const n=Number(e.getTag().slice(1));return"#".repeat(n)+" "+t(e)},regExp:r9,replace:qve(e=>{const t="h"+e[1].length;return Om(t)}),type:"element"},k1t={dependencies:[ix],export:(e,t)=>{if(!t9(e))return null;const n=t(e).split(`
`),r=[];for(const s of n)r.push("> "+s);return r.join(`
`)},regExp:Hve,replace:(e,t,n,r)=>{if(r){const a=e.getPreviousSibling();if(t9(a))return a.splice(a.getChildrenSize(),0,[Ro(),...t]),a.select(0,0),void e.remove()}const s=$D();s.append(...t),e.replace(s),s.select(0,0)},type:"element"},T1t={dependencies:[zD],export:e=>{if(!GD(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:Gve},regExpStart:zve,replace:(e,t,n,r,s,a)=>{let o,l;if(!t&&s){if(s.length===1)r?(o=sc(),l=n[1]+s[0]):(o=sc(n[1]),l=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(o=sc(n[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();l=s.join(`
`)}const c=Jn(l);o.append(c),e.append(o)}else t&&qve(c=>sc(c?c[1]:void 0))(e,t,n,a)},type:"multiline-element"},N1t={dependencies:[N3,T3],export:(e,t)=>An(e)?qD(e,t,0):null,regExp:$ve,replace:Kve("bullet"),type:"element"},A1t={dependencies:[N3,T3],export:(e,t)=>An(e)?qD(e,t,0):null,regExp:Wve,replace:Kve("number"),type:"element"},j1t={format:["code"],tag:"`",type:"text-format"},R1t={format:["highlight"],tag:"==",type:"text-format"},I1t={format:["bold","italic"],tag:"***",type:"text-format"},P1t={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},O1t={format:["bold"],tag:"**",type:"text-format"},L1t={format:["bold"],intraword:!1,tag:"__",type:"text-format"},D1t={format:["strikethrough"],tag:"~~",type:"text-format"},F1t={format:["italic"],tag:"*",type:"text-format"},U1t={format:["italic"],intraword:!1,tag:"_",type:"text-format"},B1t={dependencies:[ug],export:(e,t,n)=>{if(!Bi(e))return null;const r=e.getTitle(),s=t(e);return r?`[${s}](${e.getURL()} "${r}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,n,r,s]=t,a=nh(r,{title:s}),o=Jn(n);return o.setFormat(e.getFormat()),a.append(o),e.replace(a),o},trigger:")",type:"text-match"},V1t=[M1t,k1t,N1t,A1t],W1t=[T1t],$1t=[j1t,I1t,P1t,O1t,L1t,R1t,F1t,U1t,D1t],Yve=[B1t],Qve=[...V1t,...W1t,...$1t,...Yve];function s9(e,t=Qve,n,r=!1,s=!1){const a=r?e:function(o,l=!1){const c=o.split(`
`);let u=!1;const d=[];for(let m=0;m<c.length;m++){const p=c[m],h=d[d.length-1];C1t.test(p)?d.push(p):zve.test(p)||Gve.test(p)?(u=!u,d.push(p)):u||p===""||h===""||!h||r9.test(h)||r9.test(p)||Hve.test(p)||Wve.test(p)||$ve.test(p)||w1t.test(p)||S1t.test(p)||E1t.test(p)||!l?d.push(p):d[d.length-1]=h+p}return d.join(`
`)}(e,s);return v1t(t,r)(a,n)}const Xve=f.createContext(null);function H1t(e,t){return{getTheme:function(){return t??null}}}function bc(){const e=f.useContext(Xve);return e==null&&function(t,...n){const r=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of n)s.append("v",a);throw r.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}function z1t({newTab:e=!0,disabled:t=!1}){const[n]=bc();return f.useEffect(()=>{const r=a=>{const o=a.target;if(!lg(o))return;const l=ED(o);if(l===null)return;let c=null,u=null;if(l.update(()=>{const p=Xp(o);if(p!==null){const h=op(p,Ne);if(!t)if(Bi(h))c=h.sanitizeUrl(h.getURL()),u=h.getTarget();else{const g=function(y,v){let x=y;for(;x!=null;){if(v(x))return x;x=x.parentNode}return null}(o,jD);g!==null&&(c=g.href,u=g.target)}}}),c===null||c==="")return;const d=n.getEditorState().read(Xe);if(De(d)&&!d.isCollapsed())return void a.preventDefault();const m=a.type==="auxclick"&&a.button===1;window.open(c,e||m||a.metaKey||a.ctrlKey||u==="_blank"?"_blank":"_self"),a.preventDefault()},s=a=>{a.button===1&&r(a)};return n.registerRootListener((a,o)=>{o!==null&&(o.removeEventListener("click",r),o.removeEventListener("mouseup",s)),a!==null&&(a.addEventListener("click",r),a.addEventListener("mouseup",s))})},[n,e,t]),null}const Zve=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,G1t=Zve?f.useLayoutEffect:f.useEffect,t_={tag:lw};function q1t({initialConfig:e,children:t}){const n=f.useMemo(()=>{const{theme:r,namespace:s,nodes:a,onError:o,editorState:l,html:c}=e,u=H1t(null,r),d=ave({editable:e.editable,html:c,namespace:s,nodes:a,onError:m=>o(m,d),theme:r});return function(m,p){if(p!==null){if(p===void 0)m.update(()=>{const h=Yn();if(h.isEmpty()){const g=ur();h.append(g);const y=Zve?document.activeElement:null;(Xe()!==null||y!==null&&y===m.getRootElement())&&g.select()}},t_);else if(p!==null)switch(typeof p){case"string":{const h=m.parseEditorState(p);m.setEditorState(h,t_);break}case"object":m.setEditorState(p,t_);break;case"function":m.update(()=>{Yn().isEmpty()&&p(m)},t_)}}}(d,l),[d,u]},[]);return G1t(()=>{const r=e.editable,[s]=n;s.setEditable(r===void 0||r)},[]),i.jsx(Xve.Provider,{value:n,children:t})}function K1t(){return Yn().getTextContent()}function Y1t(e,t=!0){if(e)return!1;let n=K1t();return t&&(n=n.trim()),n===""}function Q1t(e){if(!Y1t(e,!1))return!1;const t=Yn().getChildren(),n=t.length;if(n>1)return!1;for(let r=0;r<n;r++){const s=t[r];if(jn(s))return!1;if(Ne(s)){if(!Yp(s)||s.__indent!==0)return!1;const a=s.getChildren(),o=a.length;for(let l=0;l<o;l++){const c=a[r];if(!Ze(c))return!1}}}return!0}function Jve(e){return()=>Q1t(e)}const e1e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function X1t({editor:e,ariaActiveDescendant:t,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:o,ariaInvalid:l,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:m,ariaRequired:p,autoCapitalize:h,className:g,id:y,role:v="textbox",spellCheck:x=!0,style:b,tabIndex:_,"data-testid":w,...C},S){const[E,M]=f.useState(e.isEditable()),k=f.useCallback(j=>{j&&j.ownerDocument&&j.ownerDocument.defaultView?e.setRootElement(j):e.setRootElement(null)},[e]),T=f.useMemo(()=>function(...j){return R=>{j.forEach(O=>{typeof O=="function"?O(R):O!=null&&(O.current=R)})}}(S,k),[k,S]);return e1e(()=>(M(e.isEditable()),e.registerEditableListener(j=>{M(j)})),[e]),i.jsx("div",{"aria-activedescendant":E?t:void 0,"aria-autocomplete":E?n:"none","aria-controls":E?r:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":E&&v==="combobox"?!!o:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":E?m:void 0,"aria-readonly":!E||void 0,"aria-required":p,autoCapitalize:h,className:g,contentEditable:E,"data-testid":w,id:y,ref:T,role:E?v:void 0,spellCheck:x,style:b,tabIndex:_,...C})}const Z1t=f.forwardRef(X1t);function PX(e){return e.getEditorState().read(Jve(e.isComposing()))}const J1t=f.forwardRef(ext);function ext(e,t){const{placeholder:n,...r}=e,[s]=bc();return i.jsxs(i.Fragment,{children:[i.jsx(Z1t,{editor:s,...r,ref:t}),n!=null&&i.jsx(txt,{editor:s,content:n})]})}function txt({content:e,editor:t}){const n=function(o){const[l,c]=f.useState(()=>PX(o));return e1e(()=>{function u(){const d=PX(o);c(d)}return u(),th(o.registerUpdateListener(()=>{u()}),o.registerEditableListener(()=>{u()}))},[o]),l}(t),[r,s]=f.useState(t.isEditable());if(f.useLayoutEffect(()=>(s(t.isEditable()),t.registerEditableListener(o=>{s(o)})),[t]),!n)return null;let a=null;return typeof e=="function"?a=e(r):e!==null&&(a=e),a===null?null:i.jsx("div",{"aria-hidden":!0,children:a})}const nxt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function rxt(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function sxt(){return function(e){const[t]=bc(),n=f.useMemo(()=>e(t),[t,e]),[r,s]=f.useState(()=>n.initialValueFn()),a=f.useRef(r);return nxt(()=>{const{initialValueFn:o,subscribe:l}=n,c=o();return a.current!==c&&(a.current=c,s(c)),l(u=>{a.current=u,s(u)})},[n,e]),r}(rxt)}function axt(e){const t=window.location.origin,n=r=>{if(r.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=r.data;if(typeof a=="string"){let o;try{o=JSON.parse(a)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const l=o.payload;if(l&&l.functionId==="makeChanges"){const c=l.args;if(c){const[u,d,m,p,h,g]=c;e.update(()=>{const y=Xe();if(De(y)){const v=y.anchor;let x=v.getNode(),b=0,_=0;if(Ze(x)&&u>=0&&d>=0&&(b=u,_=u+d,y.setTextNodeRange(x,b,x,_)),b===_&&m===""||(y.insertRawText(m),x=v.getNode()),Ze(x)){b=p,_=p+h;const w=x.getTextContentSize();b=b>w?w:b,_=_>w?w:_,y.setTextNodeRange(x,b,x,_)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const dg=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,oxt=dg&&"documentMode"in document?document.documentMode:null,ixt=!(!dg||!("InputEvent"in window)||oxt)&&"getTargetRanges"in new window.InputEvent("input"),lxt=dg&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),OX=dg&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,cxt=dg&&/^(?=.*Chrome).*/i.test(navigator.userAgent),uxt=dg&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!cxt;function LX(e,t){t.update(()=>{if(e!==null){const n=uC(e,KeyboardEvent)?null:e.clipboardData,r=Xe();if(r!==null&&n!=null){e.preventDefault();const s=zvt(t);s!==null&&n.setData("text/html",s),n.setData("text/plain",r.getTextContent())}}})}function dxt(e){return th(e.registerCommand(rl,t=>{const n=Xe();return!!De(n)&&(n.deleteCharacter(t),!0)},Kr),e.registerCommand(Gp,t=>{const n=Xe();return!!De(n)&&(n.deleteWord(t),!0)},Kr),e.registerCommand(qp,t=>{const n=Xe();return!!De(n)&&(n.deleteLine(t),!0)},Kr),e.registerCommand(Bd,t=>{const n=Xe();if(!De(n))return!1;if(typeof t=="string")n.insertText(t);else{const r=t.dataTransfer;if(r!=null)aX(r,n);else{const s=t.data;s&&n.insertText(s)}}return!0},Kr),e.registerCommand(rC,()=>{const t=Xe();return!!De(t)&&(t.removeText(),!0)},Kr),e.registerCommand(rp,t=>{const n=Xe();return!!De(n)&&(n.insertLineBreak(t),!0)},Kr),e.registerCommand(Uj,()=>{const t=Xe();return!!De(t)&&(t.insertLineBreak(),!0)},Kr),e.registerCommand(M0e,t=>{const n=Xe();if(!De(n))return!1;const r=t,s=r.shiftKey;return!!rX(n,!0)&&(r.preventDefault(),sX(n,s,!0),!0)},Kr),e.registerCommand(E0e,t=>{const n=Xe();if(!De(n))return!1;const r=t,s=r.shiftKey;return!!rX(n,!1)&&(r.preventDefault(),sX(n,s,!1),!0)},Kr),e.registerCommand(mD,t=>{const n=Xe();return!!De(n)&&(!OX||navigator.language!=="ko-KR")&&(t.preventDefault(),e.dispatchCommand(rl,!0))},Kr),e.registerCommand(pD,t=>{const n=Xe();return!!De(n)&&(t.preventDefault(),e.dispatchCommand(rl,!1))},Kr),e.registerCommand(Kp,t=>{const n=Xe();if(!De(n))return!1;if(t!==null){if((OX||lxt||uxt)&&ixt)return!1;t.preventDefault()}return e.dispatchCommand(rp,!1)},Kr),e.registerCommand(Bj,()=>(dvt(),!0),Kr),e.registerCommand(hD,t=>{const n=Xe();return!!De(n)&&(LX(t,e),!0)},Kr),e.registerCommand(gD,t=>{const n=Xe();return!!De(n)&&(function(r,s){LX(r,s),s.update(()=>{const a=Xe();De(a)&&a.removeText()})}(t,e),!0)},Kr),e.registerCommand(v3,t=>{const n=Xe();return!!De(n)&&(function(r,s){r.preventDefault(),s.update(()=>{const a=Xe(),o=uC(r,ClipboardEvent)?r.clipboardData:null;o!=null&&De(a)&&aX(o,a)},{tag:tve})}(t,e),!0)},Kr),e.registerCommand(j0e,t=>{const n=Xe();return!!De(n)&&(t.preventDefault(),!0)},Kr),e.registerCommand(R0e,t=>{const n=Xe();return!!De(n)&&(t.preventDefault(),!0)},Kr))}const a9=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function DX(e){return e.getEditorState().read(Jve(e.isComposing()))}function fxt({contentEditable:e,placeholder:t=null,ErrorBoundary:n}){const[r]=bc(),s=function(a,o){const[l,c]=f.useState(()=>a.getDecorators());return a9(()=>a.registerDecoratorListener(u=>{xs.flushSync(()=>{c(u)})}),[a]),f.useEffect(()=>{c(a.getDecorators())},[a]),f.useMemo(()=>{const u=[],d=Object.keys(l);for(let m=0;m<d.length;m++){const p=d[m],h=i.jsx(o,{onError:y=>a._onError(y),children:i.jsx(f.Suspense,{fallback:null,children:l[p]})}),g=a.getElementByKey(p);g!==null&&u.push(xs.createPortal(h,g,p))}return u},[o,l,a])}(r,n);return function(a){a9(()=>th(dxt(a),axt(a)),[a])}(r),i.jsxs(i.Fragment,{children:[e,i.jsx(mxt,{content:t}),s]})}function mxt({content:e}){const[t]=bc(),n=function(s){const[a,o]=f.useState(()=>DX(s));return a9(()=>{function l(){const c=DX(s);o(c)}return l(),th(s.registerUpdateListener(()=>{l()}),s.registerEditableListener(()=>{l()}))},[s]),a}(t),r=sxt();return n?typeof e=="function"?e(r):e:null}const FX="startTransition",o9=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,pxt=o9?f.useLayoutEffect:f.useEffect;class hxt{constructor(t){this.key=t,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(t){this.ref={current:t}}}const UX=e=>{const t=document.getElementById("typeahead-menu");if(!t)return;const n=t.getBoundingClientRect();n.top+n.height>window.innerHeight&&t.scrollIntoView({block:"center"}),n.top<0&&t.scrollIntoView({block:"center"}),e.scrollIntoView({block:"nearest"})};function BX(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.top>r.top&&n.top<r.bottom}function gxt(e,t,n,r){const[s]=bc();f.useEffect(()=>{if(t!=null&&e!=null){const a=s.getRootElement(),o=a!=null?function(m,p){let h=getComputedStyle(m);const g=h.position==="absolute",y=/(auto|scroll)/;if(h.position==="fixed")return document.body;for(let v=m;v=v.parentElement;)if(h=getComputedStyle(v),(!g||h.position!=="static")&&y.test(h.overflow+h.overflowY+h.overflowX))return v;return document.body}(a):document.body;let l=!1,c=BX(t,o);const u=function(){l||(window.requestAnimationFrame(function(){n(),l=!1}),l=!0);const m=BX(t,o);m!==c&&(c=m,r?.(m))},d=new ResizeObserver(n);return window.addEventListener("resize",n),document.addEventListener("scroll",u,{capture:!0,passive:!0}),d.observe(t),()=>{d.unobserve(t),window.removeEventListener("resize",n),document.removeEventListener("scroll",u,!0)}}},[t,s,r,n,e])}const VX=zt("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function yxt({close:e,editor:t,anchorElementRef:n,resolution:r,options:s,menuRenderFn:a,onSelectOption:o,shouldSplitNodeWithQuery:l=!1,commandPriority:c=rve,preselectFirstItem:u=!0}){const[d,m]=f.useState(null),p=r.match&&r.match.matchingString;f.useEffect(()=>{u&&m(0)},[p,u]);const h=f.useCallback(y=>{t.update(()=>{const v=r.match!=null&&l?function(x){const b=Xe();if(!De(b)||!b.isCollapsed())return null;const _=b.anchor;if(_.type!=="text")return null;const w=_.getNode();if(!w.isSimpleText())return null;const C=_.offset,S=w.getTextContent().slice(0,C),E=x.replaceableString.length,M=C-function(T,j,R){let O=R;for(let P=O;P<=j.length;P++)T.slice(-P)===j.substring(0,P)&&(O=P);return O}(S,x.matchingString,E);if(M<0)return null;let k;return M===0?[k]=w.splitText(C):[,k]=w.splitText(M,C),k}(r.match):null;o(y,v,e,r.match?r.match.matchingString:"")})},[t,l,r.match,o,e]),g=f.useCallback(y=>{const v=t.getRootElement();v!==null&&(v.setAttribute("aria-activedescendant","typeahead-item-"+y),m(y))},[t]);return f.useEffect(()=>()=>{const y=t.getRootElement();y!==null&&y.removeAttribute("aria-activedescendant")},[t]),pxt(()=>{s===null?m(null):d===null&&u&&g(0)},[s,d,g,u]),f.useEffect(()=>th(t.registerCommand(VX,({option:y})=>!(!y.ref||y.ref.current==null)&&(UX(y.ref.current),!0),c)),[t,g,c]),f.useEffect(()=>th(t.registerCommand(T0e,y=>{const v=y;if(s!==null&&s.length){const x=d===null?0:d!==s.length-1?d+1:0;g(x);const b=s[x];b.ref!=null&&b.ref.current&&t.dispatchCommand(VX,{index:x,option:b}),v.preventDefault(),v.stopImmediatePropagation()}return!0},c),t.registerCommand(k0e,y=>{const v=y;if(s!==null&&s.length){const x=d===null?s.length-1:d!==0?d-1:s.length-1;g(x);const b=s[x];b.ref!=null&&b.ref.current&&UX(b.ref.current),v.preventDefault(),v.stopImmediatePropagation()}return!0},c),t.registerCommand(N0e,y=>{const v=y;return v.preventDefault(),v.stopImmediatePropagation(),e(),!0},c),t.registerCommand(A0e,y=>{const v=y;return s!==null&&d!==null&&s[d]!=null&&(v.preventDefault(),v.stopImmediatePropagation(),h(s[d]),!0)},c),t.registerCommand(Kp,y=>s!==null&&d!==null&&s[d]!=null&&(y!==null&&(y.preventDefault(),y.stopImmediatePropagation()),h(s[d]),!0),c)),[h,e,t,s,d,g,c]),a(n,f.useMemo(()=>({options:s,selectOptionAndCleanUp:h,selectedIndex:d,setHighlightedIndex:m}),[h,d,s]),r.match?r.match.matchingString:"")}function WX(e,t){t!=null&&(e.className=t),e.setAttribute("aria-label","Typeahead menu"),e.setAttribute("role","listbox"),e.style.display="block",e.style.position="absolute"}function vxt({options:e,onQueryChange:t,onSelectOption:n,onOpen:r,onClose:s,menuRenderFn:a,triggerFn:o,anchorClassName:l,commandPriority:c=rve,parent:u,preselectFirstItem:d=!0,ignoreEntityBoundary:m=!1}){const[p]=bc(),[h,g]=f.useState(null),y=function(b,_,w,C=o9?document.body:void 0,S=!0){const[E]=bc(),M=f.useRef(o9?document.createElement("div"):null),k=f.useCallback(()=>{if(M.current===null||C===void 0)return;M.current.style.top=M.current.style.bottom;const R=E.getRootElement(),O=M.current,P=O.firstChild;if(R!==null&&b!==null){const{left:N,top:I,width:D,height:F}=b.getRect(),B=M.current.offsetHeight;if(O.style.top=`${I+B+3+(S?window.pageYOffset:0)}px`,O.style.left=`${N+window.pageXOffset}px`,O.style.height=`${F}px`,O.style.width=`${D}px`,P!==null){P.style.top=`${I}`;const V=P.getBoundingClientRect(),$=V.height,G=V.width,X=R.getBoundingClientRect();N+G>X.right&&(O.style.left=`${X.right-G+window.pageXOffset}px`),(I+$>window.innerHeight||I+$>X.bottom)&&I-X.top>$+F&&(O.style.top=`${I-$-F+(S?window.pageYOffset:0)}px`)}O.isConnected||(WX(O,w),C.append(O)),O.setAttribute("id","typeahead-menu"),M.current=O,R.setAttribute("aria-controls","typeahead-menu")}},[E,b,S,w,C]);f.useEffect(()=>{const R=E.getRootElement();return b!==null&&k(),()=>{R!==null&&R.removeAttribute("aria-controls");const O=M.current;O!==null&&O.isConnected&&(O.remove(),O.removeAttribute("id"))}},[E,k,b]);const T=f.useCallback(R=>{b!==null&&(R||_(null))},[b,_]);gxt(b,M.current,k,T);const j=M.current;return j!=null&&(WX(j,w),C?.append(j)),M}(h,g,l,u),v=f.useCallback(()=>{g(null),s!=null&&h!==null&&s()},[s,h]),x=f.useCallback(b=>{g(b),r!=null&&h===null&&r(b)},[r,h]);return f.useEffect(()=>{const b=p.registerUpdateListener(()=>{p.getEditorState().read(()=>{if(!p.isEditable())return void v();const _=p._window||window,w=_.document.createRange(),C=Xe(),S=function(k){let T=null;return k.getEditorState().read(()=>{const j=Xe();De(j)&&(T=function(R){const O=R.anchor;if(O.type!=="text")return null;const P=O.getNode();if(!P.isSimpleText())return null;const N=O.offset;return P.getTextContent().slice(0,N)}(j))}),T}(p);if(!De(C)||!C.isCollapsed()||S===null||w===null)return void v();const E=o(S,p);if(t(E?E.matchingString:null),E!==null&&(m||!function(k,T){return T===0&&k.getEditorState().read(()=>{const j=Xe();if(De(j)){const R=j.anchor.getNode().getPreviousSibling();return Ze(R)&&R.isTextEntity()}return!1})}(p,E.leadOffset))&&function(T,j,R){const O=vl(R);if(O===null||!O.isCollapsed)return!1;const P=O.anchorNode,N=T,I=O.anchorOffset;if(P==null||I==null)return!1;try{j.setStart(P,N),j.setEnd(P,I)}catch{return!1}return!0}(E.leadOffset,w,_)!==null)return M=()=>x({getRect:()=>w.getBoundingClientRect(),match:E}),void(FX in A?A[FX](M):M());var M;v()})});return()=>{b()}},[p,o,t,h,v,x,m]),f.useEffect(()=>p.registerEditableListener(b=>{b||v()}),[p,v]),h===null||p===null||y.current===null?null:i.jsx(yxt,{close:v,resolution:h,editor:p,anchorElementRef:y,options:e,menuRenderFn:a,shouldSplitNodeWithQuery:!0,onSelectOption:n,commandPriority:c,preselectFirstItem:d})}const ET=245,MT=240,KD=100,YD=["@","/"].join(""),t1e=`\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'"~=<>_:;`,n1e="[^"+YD+t1e+"\\s]",xxt="(?:\\.[ |$]| |["+t1e+"]|)",r1e=new RegExp("(^|\\s|\\()(["+YD+"]((?:"+n1e+xxt+"){0,"+KD+"}))$"),s1e=new RegExp("(^|\\s|\\()(["+YD+"]((?:"+n1e+"){0,"+KD+"}))$"),bxt=10,_xt={shortcut:5},QD=250,$X={tab:0,file:1,space:2,shortcuts:3};function wxt(e,t){let n=r1e.exec(e);if(n===null&&(n=s1e.exec(e)),n!==null){const r=n[1],s=n[3];if(s.length>=t)return{leadOffset:n.index+r.length,matchingString:s,replaceableString:n[2]}}return null}class Cxt extends hxt{uuid;variant;label;url;src;emoji;queryText;action;convertToNode;isAlwaysVisible;rightElement;className;constructor(t,n,r,s,a,o,l,c,u,d,m,p,h){super(t),this.uuid=n,this.variant=r,this.label=s,this.url=a,this.src=o,this.emoji=l,this.queryText=c,this.action=u,this.convertToNode=d,this.isAlwaysVisible=m,this.rightElement=p,this.className=h}}const a1e=A.memo(({options:e,onOpen:t=Rn,onClose:n=Rn,onTrigger:r=Rn,ref:s})=>{const{$t:a}=Q(),[o]=bc(),[l,c]=f.useState(!1),[u,d]=f.useState(null),[m,p]=f.useState(null),[h,g]=f.useState(!1),y=f.useCallback(()=>g(!0),[]),v=f.useCallback(()=>g(!1),[]),x=f.useCallback(()=>{c(!0),t()},[t]),b=f.useCallback(()=>{c(!1),d(null),n()},[n]),_=f.useCallback(j=>{switch(j){case"tab":return a({defaultMessage:"Tabs",id:"M56d6aRPai"});case"file":return a({defaultMessage:"Files",id:"m4vqJl0/FT"});case"space":return a({defaultMessage:"Spaces",id:"ZMoczsYew9"});case"shortcut":return a({defaultMessage:"Shortcuts",id:"7FAwwkYilD"});default:return j.toLocaleUpperCase()}},[a]);f.useEffect(()=>o.registerRootListener((j,R)=>{j&&(j.addEventListener("focus",y),j.addEventListener("blur",v)),R&&(R.removeEventListener("focus",y),R.removeEventListener("blur",v))}),[o,v,y]);const w=f.useMemo(()=>{const j=m?.toLocaleLowerCase().trim();if(u==="/"&&m?.includes(" "))return[];const R=e.filter(I=>j?I.label.toLowerCase().includes(j)||I.url?.includes(j)||I.isAlwaysVisible:!0).sort((I,D)=>($X[I.variant]??Number.MAX_SAFE_INTEGER)-($X[D.variant]??Number.MAX_SAFE_INTEGER));let O="",P=0;const N=[];return R.forEach(I=>{I.variant!==O&&(O=I.variant,P=0);const D=_xt[O]??bxt;P>=D&&!I.isAlwaysVisible||(N.push(I),P+=1)}),N.map(I=>new Cxt(I.uuid,I.uuid,I.variant,I.label,I.url,I.src,I.emoji,I.queryText,I.action,I.convertToNode,I.isAlwaysVisible,I.rightElement,I.className))},[m,u,e]),C=f.useMemo(()=>w.some(j=>j.convertToNode===void 0||j.convertToNode),[w]),S=f.useCallback(j=>{p(j)},[]),E=f.useCallback(j=>{const R=wxt(j,0);return R?.replaceableString?.[0]&&(d(R.replaceableString[0]),r(R.replaceableString[0])),R},[r]),M=f.useCallback((j,R,O,P)=>{let N="";const I=[];return j.forEach((D,F)=>{D.variant!==N&&(N=D.variant,I.push({type:"separator",show:!0,text:_(N)})),I.push({type:"default",text:D.label,className:D.className,focused:F===R,customTextNode:i.jsx(L,{variant:"small",children:i.jsx(XD,{text:D.label,src:D.src,emoji:D.emoji,mentionVariant:D.variant,truncate:D.rightElement?"small":"medium",variant:"extraSmall",iconClassName:"mx-1 relative top-[-1.25px] h-4 w-4",emojiClassName:"mx-1 pl-[2px] align-middle shrink-0"})}),tooltipText:jp(D.queryText??"",QD),onMouseMove:()=>{P(F)},onMouseDown:B=>{B.preventDefault(),P(F),O(D)},rightElement:D.rightElement?.({focused:F===R}),preserveRightElementSpace:!D.rightElement})}),I},[_]),k=f.useCallback((j,R,O)=>{if(j.action&&(setTimeout(()=>{j.action?.()},0),j.convertToNode===!1)){O();return}o.update(()=>{const P=ZD({uuid:j.uuid,variant:j.variant,text:j.label,url:j.url,src:j.src,emoji:j.emoji,queryText:j.queryText});R&&R.replace(P);const N=Jn(" ");P.insertAfter(N),N.selectEnd(),O()})},[o]),T=f.useCallback((j,{selectedIndex:R,selectOptionAndCleanUp:O,setHighlightedIndex:P})=>{const N=()=>{if(!j.current)return{isTop:!1,leftOffset:0};const F=j.current.getBoundingClientRect(),V=window.innerHeight-F.bottom<ET&&F.top>ET;let $=0;const G=F.left+MT;return G>window.innerWidth&&($=window.innerWidth-G-16),F.left+$<16&&($=16-F.left),{isTop:V,leftOffset:$}},{isTop:I,leftOffset:D}=N();return j.current&&w.length?xs.createPortal(i.jsx(j7,{removeScrollBar:!1,enabled:!0,children:i.jsx(z,{variant:r7.background,className:"shadow-overlay p-xs scrollable-container scrollbar overflow-y-auto overflow-x-hidden rounded-xl [scrollbar-gutter:stable]",style:{width:MT,minWidth:MT,maxHeight:ET,...I&&{bottom:"48px",position:"absolute"},...D!==0&&{left:`${D}px`,position:"absolute"}},children:i.jsx(vu,{items:M(w,C?R??-1:-1,O,P),disableScrollArea:!0,disableHoverStyles:C})})}),j.current):null},[w,M,C]);return f.useImperativeHandle(s,()=>({canSubmit:()=>!l||!C}),[l,C]),h?i.jsx(vxt,{onQueryChange:S,onSelectOption:k,triggerFn:E,preselectFirstItem:C,onOpen:x,onClose:b,options:w,menuRenderFn:T}):null});a1e.displayName="MentionsPlugin";const Sxt=Object.freeze(Object.defineProperty({__proto__:null,AtSignMentionsRegex:r1e,AtSignMentionsRegexAliasRegex:s1e,LENGTH_LIMIT:KD,TOOLTIP_MAX_NUM_CHARACTERS:QD,default:a1e},Symbol.toStringTag,{value:"Module"})),XD=A.memo(({className:e,textClassName:t,iconClassName:n,emojiClassName:r,text:s,src:a,color:o,truncate:l,variant:c,emoji:u,mentionVariant:d,tooltipText:m})=>{const p=f.useMemo(()=>{let h;try{h=u?String.fromCodePoint(parseInt(u,16)):null}catch{h=null}return d==="space"?h?i.jsx("span",{className:U("inline-block select-none",r),children:h}):i.jsx(me,{icon:Ca,className:U("text-quiet inline-block shrink-0 rounded-sm",n)}):a?i.jsx("i",{className:U("inline-block shrink-0 select-none rounded-sm bg-cover bg-center bg-no-repeat",n),style:{backgroundImage:`url(${a})`,fontSize:"0.78rem"}}):null},[n,r,d,a,u]);return i.jsx(pn,{tooltipText:m,showTooltip:!!m,children:i.jsxs("span",{className:U("inline-flex min-w-0 items-center align-top",{"max-w-[168px]":l==="small","max-w-[208px]":l==="medium","max-w-[250px]":l==="large"},e),spellCheck:!1,children:[p,i.jsx(L,{className:U("inline-block min-w-0 truncate",t),color:o,as:"span",variant:c,children:s})]})})});XD.displayName="MentionNodeTextContent";const o1e=A.memo(e=>i.jsx(XD,{...e,className:"px-sm border-subtlest bg-subtler dark:bg-subtle rounded-md border-[0.2px]",textClassName:"leading-[1.3]",iconClassName:"mr-1 h-[0.88rem] w-[0.88rem]",emojiClassName:"mr-1 text-[0.80rem]",truncate:"large"}));o1e.displayName="MentionNodeDecorator";function Ext(e){const t=e.textContent,n=e.getAttribute("data-mention-uuid"),r=e.getAttribute("data-mention-variant"),s=e.getAttribute("data-mention-url")??void 0,a=e.getAttribute("data-mention-src")??void 0,o=e.getAttribute("data-mention-emoji")??void 0,l=e.getAttribute("data-mention-query-text")??void 0;return t!==null&&n!==null&&r!==null?{node:ZD({uuid:n,variant:r,text:t,url:s,src:a,emoji:o,queryText:l})}:null}class A3 extends Z0e{__props;static getType(){return"mention"}static clone(t){return new A3(t.__props,t.__key)}static importJSON(t){return ZD(t.props).updateFromJSON(t)}constructor(t,n){super(n),this.__props=t}exportJSON(){return{...super.exportJSON(),props:this.__props}}createDOM(){return document.createElement("span")}isIsolated(){return!0}updateDOM(){return!1}decorate(){return i.jsx(o1e,{text:this.__props.text,src:this.__props.src,emoji:this.__props.emoji,mentionVariant:this.__props.variant,tooltipText:jp(this.__props.queryText??"",QD)})}getTextContent(){switch(this.__props.variant){case"space":return"";case"shortcut":return this.__props.queryText??"";case"tab":return this.__props.url?`[${this.__props.text||this.__props.url}](${this.__props.url})`:this.__props.text;default:return this.__props.text}}exportDOM(){const t=document.createElement("span");return t.setAttribute("data-mention-uuid",this.__props.uuid),t.setAttribute("data-mention-variant",this.__props.variant),t.setAttribute("data-mention-url",this.__props.url??""),t.setAttribute("data-mention-src",this.__props.src??""),t.setAttribute("data-mention-emoji",this.__props.emoji??""),t.textContent=this.__props.text,{element:t}}static importDOM(){return{span:t=>!t.hasAttribute("data-mention-uuid")||!t.hasAttribute("data-mention-variant")?null:{conversion:Ext,priority:4}}}}function ZD(e){return fo(new A3(e))}const i1e=[A3,VD,ug],dw=[...Yve],i9=(()=>{try{return new RegExp("(?<![-.+():%])"),!0}catch{return!1}})(),j3=e=>{if(!e)return"";const n=ave({namespace:"text-value",nodes:i1e});return n.update(()=>{const r=Yn();r.clear(),i9?s9(e,dw,void 0,!0):r.append(ur().append(Jn(e)))},{discrete:!0}),n.read(()=>Yn().getTextContent())},oy=e=>{if(!e||!e.root)return"";const t=n=>{let r="";if(n.type==="text"&&"text"in n)r=n.text;else if(n.type==="linebreak")r=`
`;else{if((n.type==="link"||n.type==="autolink")&&"url"in n)return r=`[${"children"in n&&Array.isArray(n.children)&&n.children.map(t).reduce((a,o)=>(a+=o,a),"")||""}](${n.url})`,r;if(n.type==="mention"){const a=n.props;if(a.variant==="tab")return r=`[${a.text||a.url}](${a.url})`,r;if(a.variant==="space")return r="",r;if(a.variant==="shortcut")return r=a.queryText??"",r}}return"children"in n&&Array.isArray(n.children)?n.children.map(t).reduce((s,a)=>(s+=a,s),r):r};return t(e.root)},Nr={outerWrapper:{base:["bg-raised","w-full","outline-none","flex","items-center","border","rounded-2xl"],darkMode:"dark:bg-offset",transition:"duration-75 transition-all"},inputWrapper:{base:"overflow-hidden relative flex h-full w-full",expanded:["col-start-1","col-end-4","pb-3"],compact:["flex-grow","flex-shrink","p-sm","order-1"],disabled:"opacity-50 pointer-events-none cursor-not-allowed"},inputElement:["overflow-auto","max-h-[45vh]","lg:max-h-[40vh]","sm:max-h-[25vh]","outline-none","font-sans","resize-none","caret-super","selection:bg-super/30","selection:text-foreground","dark:selection:bg-super/10","dark:selection:text-super","text-foreground","bg-transparent","placeholder-quieter","placeholder:select-none","scrollbar-subtle"],attribution:{left:{base:["gap-sm","flex"],expanded:"col-start-1 row-start-2 -ml-two",compact:"order-0 ml-px"},right:{base:["flex","items-center","justify-self-end"],expanded:"col-start-3 row-start-2",compact:"order-2 mr-px"}},placeholder:{base:["absolute","inset-0","pointer-events-none","select-none","text-quieter"],compact:"p-sm"}},Mxt=({isActive:e,isHighlighted:t})=>t?"border-super dark:border-super/85":e?"border-subtle":"border-subtler",kxt=({hasShadow:e,hasQuote:t})=>e&&!t?"shadow-sm dark:shadow-md shadow-super/10 dark:shadow-black/10":"",l1e=A.memo(({quote:e,onClear:t})=>e?i.jsx("div",{className:"py-sm bg-subtler dark:bg-base animate-slideDownAndFadeIn z-[49] mx-3 rounded-lg px-3",children:i.jsxs("div",{className:"gap-sm flex items-start",children:[i.jsx(L,{color:"light",className:"mt-px flex items-center pt-1",variant:"tinyRegular",children:i.jsx(me,{icon:q4e,size:"xs",className:"rotate-180"})}),i.jsx(L,{className:"py-xs line-clamp-3 flex-1 overflow-hidden text-ellipsis",variant:"tinyRegular",color:"light",children:e}),i.jsx("div",{className:"shrink-0",children:i.jsx(Te,{icon:Lt,onClick:t,size:"tiny",pill:!0,toolTip:"Clear quote"})})]})}):null);l1e.displayName="QuotePreview";const Txt=he(async()=>{const{ClearEditorPlugin:e}=await ae(async()=>{const{ClearEditorPlugin:t}=await import("./LexicalClearEditorPlugin.prod-DXrnAy6l.js");return{ClearEditorPlugin:t}},__vite__mapDeps([103,3,1,6,5,4]));return{default:e}}),Nxt=he(async()=>{const{HistoryPlugin:e}=await ae(async()=>{const{HistoryPlugin:t}=await import("./LexicalHistoryPlugin.prod-DYVa_hZM.js");return{HistoryPlugin:t}},__vite__mapDeps([104,3,1,6,5,4]));return{default:e}}),Axt=he(async()=>{const{OnChangePlugin:e}=await ae(async()=>{const{OnChangePlugin:t}=await import("./LexicalOnChangePlugin.prod-B5Msshl2.js");return{OnChangePlugin:t}},__vite__mapDeps([105,3,1,6,5,4]));return{default:e}}),jxt=he(async()=>{const{EditorRefPlugin:e}=await ae(async()=>{const{EditorRefPlugin:t}=await import("./LexicalEditorRefPlugin.prod-DSoHDE4C.js");return{EditorRefPlugin:t}},__vite__mapDeps([106,3,1,6,5,4]));return{default:e}}),Rxt=he(async()=>{const{default:e}=await ae(async()=>{const{default:t}=await Promise.resolve().then(()=>Sxt);return{default:t}},void 0);return{default:e}}),Ixt=he(async()=>{const{default:e}=await ae(async()=>{const{default:t}=await import("./AutoLinkPlugin-Def2lGn9.js");return{default:t}},__vite__mapDeps([107,3,1,6,5,4]));return{default:e}}),Pxt=he(async()=>{const{default:e}=await ae(async()=>{const{default:t}=await import("./LinkPlugin-DI3dVvIc.js");return{default:t}},__vite__mapDeps([108,3,1,6,5,4]));return{default:e}}),Oxt=he(async()=>{const{MarkdownShortcutPlugin:e}=await ae(async()=>{const{MarkdownShortcutPlugin:t}=await import("./LexicalMarkdownShortcutPlugin.prod-Ol09BDmS.js");return{MarkdownShortcutPlugin:t}},__vite__mapDeps([109,3,1,6,5,4]));return{default:e}});function Lxt(e,t){switch(t.type){case"SET_EXPANDED":return{...e,isExpanded:t.payload};case"SET_ACTIVE":return{...e,isActive:t.payload};case"SET_COMPOSING":return{...e,isComposing:t.payload};default:return e}}const lx=Cf("ResizableInputContext",{state:{isExpanded:!0,isActive:!1,isComposing:!1},dispatch:()=>{}}),c1e=(e,t,n,r,s)=>{f.useEffect(()=>{const a=n?15:40;e&&e.length>a||e?.includes(`
`)?s(!0):r!==(t==="expanded")&&s(t==="expanded")},[e,t,n,r,s])},JD=A.memo(({initialLayout:e="expanded",wrapperClass:t,size:n,hasShadow:r,isHighlighted:s,quote:a,setQuote:o,attachmentsList:l,inputWarnings:c,children:u,inputRef:d,ref:m})=>{const[p,h]=f.useReducer(Lxt,{isExpanded:e==="expanded",isActive:!1,isComposing:!1}),{isActive:g,isExpanded:y}=p,v=f.useMemo(()=>{const w=Mxt({isActive:g,isHighlighted:s}),C=kxt({hasShadow:r,hasQuote:!!a});return U(...Nr.outerWrapper.base,Nr.outerWrapper.darkMode,Nr.outerWrapper.transition,t,w,C,{"px-0 pt-3 pb-3":n==="large"&&y,"py-sm px-0":n==="large"&&!y})},[g,t,r,a,n,y,s]),x=f.useCallback(()=>d?.current?.focus(),[d]),b=f.useCallback(w=>{const C=w.target,S=d?.current?.element();S&&C!==S&&!S.contains(C)&&w.preventDefault()},[d]),_=f.useCallback(()=>o?.(null),[o]);return i.jsx(lx.Provider,{value:{state:p,dispatch:h},children:i.jsx("div",{className:"relative rounded-2xl",ref:m,onClick:x,onMouseDownCapture:b,children:i.jsxs("div",{className:U(v,"gap-y-md grid items-center"),children:[(c||a||l)&&i.jsxs("div",{className:U({"pt-xs":!y},"gap-y-sm grid items-center"),children:[c,a&&i.jsx(l1e,{quote:a,onClear:_}),l]}),i.jsx("div",{className:U({"px-3":n==="large"&&!y,"px-3.5":n==="large"&&y,flex:!y,"grid-rows-1fr-auto grid grid-cols-3":y}),children:u})]})})})});JD.displayName="ResizeableInputWrapper";const Dxt=({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",minRows:a,maxRows:o,onChange:l,onClick:c,onBlur:u,onFocus:d,onKeyDown:m,onPaste:p,isMobileStyle:h,isMobileUserAgent:g,testId:y,id:v,ref:x})=>{const{state:b,dispatch:_}=f.useContext(lx),{isActive:w,isComposing:C,isExpanded:S}=b,E=f.useRef(w);E.current=w;const M=Ah(n),k=f.useRef(null),T=f.useMemo(()=>U(Nr.inputWrapper.base,{[Nr.inputWrapper.expanded.join(" ")]:S,[Nr.inputWrapper.compact.join(" ")]:!S,[Nr.inputWrapper.disabled]:n}),[n,S]),j=f.useMemo(()=>U(...Nr.inputElement,"w-full"),[]),R=f.useCallback(W=>{_({type:"SET_EXPANDED",payload:W})},[_]),O=f.useCallback(W=>{_({type:"SET_ACTIVE",payload:W})},[_]),P=f.useCallback(W=>{_({type:"SET_COMPOSING",payload:W})},[_]),N=f.useCallback(W=>{d?.(W.nativeEvent),O(!0)},[d,O]),I=f.useCallback(W=>{u?.(W.nativeEvent)!==!1&&O(!1)},[u,O]),D=f.useCallback(()=>{if(k.current){const W=k.current.value.length;k.current.focus(),k.current.setSelectionRange(W,W),k.current.scrollTop=k.current.scrollHeight}},[]),F=f.useCallback(W=>{if(!k?.current)return!0;const H=k.current,{selectionStart:Z,selectionEnd:re,value:q}=H;if(Z!==re)return!1;const J=document.createElement("div"),te=window.getComputedStyle(H);J.style.position="absolute",J.style.visibility="hidden",J.style.whiteSpace=te.whiteSpace,J.style.wordWrap=te.wordWrap,J.style.font=te.font,J.style.padding=te.padding,J.style.border=te.border,J.style.width=H.offsetWidth+"px",J.style.lineHeight=te.lineHeight,document.body.appendChild(J);try{const se=parseInt(te.lineHeight)||24,de=q.substring(0,Z);J.textContent=de;const fe=J.offsetHeight;return W==="first"?fe<=se:(J.textContent=q,J.offsetHeight-fe<se)}finally{document.body.removeChild(J)}},[]),B=f.useCallback(W=>{c?.(W.nativeEvent)},[c]),V=f.useCallback(W=>{Z0(W.nativeEvent,{isMobileUserAgent:g,isComposing:C,onKeyDown:m})},[m,C,g]),$=f.useCallback(()=>uP(P),[P]),G=f.useCallback(()=>dP(P),[P]),X=f.useCallback(W=>{p?.(W.nativeEvent)},[p]),Y=f.useCallback(W=>{l?.(W.target.value)},[l]);return f.useImperativeHandle(x,()=>{const W=k.current;return W.focusAtEnd=D,W.isFocused=()=>E.current,W.inLine=F,W.append=H=>{k.current&&(k.current.value+=H)},W.scrollToEnd=()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},W.trim=()=>{k.current&&(k.current.value=k.current.value.trim())},W.element=()=>k.current,W},[D,F]),f.useEffect(()=>{!g&&k.current&&e&&(D(),O(!0))},[g,k,e,O,D]),f.useEffect(()=>{M!==n&&!n&&!g&&e&&setTimeout(()=>{k.current?.focus()},200)}),c1e(r,s,h,S,R),i.jsx("div",{className:T,children:i.jsx(vle,{ref:k,placeholder:t,minRows:a,maxRows:o,value:r,onClick:B,onChange:Y,onKeyDown:V,onBlur:I,onCompositionStart:$,onCompositionEnd:G,onFocus:N,onPaste:X,className:j,autoComplete:"off","data-test-id":y,rows:a,id:v,disabled:n,"data-1p-ignore":!0})})},l9="external-update",c9="focus",Fxt="blur",Uxt=new Set([l9,c9,Fxt]),Bxt=({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",json:a,minRows:o,onChange:l,onClick:c,onBlur:u,onFocus:d,onKeyDown:m,onPaste:p,isMobileStyle:h,isMobileUserAgent:g,testId:y,id:v,namespace:x="ResizableLexicalInput",mentionTypeaheadOptions:b=le,onMentionMenuOpen:_,onMentionMenuClose:w,onTriggerTypeahead:C,ref:S})=>{const E=f.useRef(null),[M,k]=f.useState(null),{state:T,dispatch:j}=f.useContext(lx),{isActive:R,isComposing:O,isExpanded:P}=T,N=f.useRef(O),I=f.useRef(R),D=f.useRef(""),F=f.useRef(null),B=f.useRef(e),V=f.useRef(null),$=f.useRef(l),G=f.useRef(c),X=f.useRef(u),Y=f.useRef(d),W=f.useRef(m),H=f.useRef(p);$.current=l,G.current=c,X.current=u,Y.current=d,W.current=m,H.current=p,N.current=O,I.current=R,B.current=e;const Z=Ah(n),re=f.useMemo(()=>U(Nr.inputWrapper.base,{[Nr.inputWrapper.expanded.join(" ")]:P,[Nr.inputWrapper.compact.join(" ")]:!P}),[P]),q=f.useMemo(()=>U(...Nr.inputElement,"size-full"),[]),J=f.useMemo(()=>U(...Nr.placeholder.base,{[Nr.placeholder.compact]:!P}),[P]),te=f.useCallback(Oe=>j({type:"SET_EXPANDED",payload:Oe}),[j]),se=f.useCallback(Oe=>j({type:"SET_ACTIVE",payload:Oe}),[j]),de=f.useCallback(Oe=>j({type:"SET_COMPOSING",payload:Oe}),[j]),fe=f.useCallback(Oe=>{ee.error(Oe)},[]),ve=f.useCallback(Oe=>{Y.current?.(Oe),se(!0)},[se]),ue=f.useCallback(Oe=>{X.current?.(Oe)!==!1&&se(!1)},[se]),ie=f.useCallback(Oe=>{H.current?.(Oe)},[]),be=f.useCallback(Oe=>{G.current?.(Oe)},[]),Se=f.useCallback((Oe,nt,St)=>{const Yt=[...St];let Ft;if(Yt.length>0&&Yt.every(Gt=>Uxt.has(Gt)))if(Yt.includes(c9)){if(Ft=oy(Oe.toJSON()),Ft===D.current)return}else return;Ft===void 0&&(Ft=oy(Oe.toJSON())),D.current=Ft??"",F.current=Oe.toJSON(),$.current?.(D.current,F.current)},[]),Ce=f.useCallback(()=>de(!0),[de]),ke=f.useCallback(()=>de(!1),[de]),Re=f.useCallback(Oe=>{Z0(Oe,{isMobileUserAgent:g,isComposing:N.current,onKeyDown:W.current})},[g]),je=f.useCallback(()=>M?.update(()=>{Kj(c9),Yn().selectEnd()}),[M]),ct=f.useCallback(Oe=>M?.update(()=>{const nt=Yn(),St=Jn(Oe),Yt=nt.getLastChild();if(Yp(Yt))Yt.append(St);else throw new Error("Last child is not a paragraph node");nt.selectEnd()}),[M]),tt=f.useCallback(()=>M?.update(()=>{const Oe=Yn(),nt=Oe.getLastChild();if(Yp(nt)){const St=nt.getLastChild();Ze(St)&&(St.getTextContent().trimEnd()===""?St.remove():St.setTextContent(St.getTextContent().trimEnd()));const Yt=nt.getFirstChild();Ze(Yt)&&(Yt.getTextContent().trimStart()===""?Yt.remove():Yt.setTextContent(Yt.getTextContent().trimStart()))}else throw new Error("Last child is not a paragraph node");Oe.selectEnd()}),[M]),ut=f.useCallback(Oe=>M?M.getEditorState().read(()=>{const nt=Xe();if(!De(nt))return!0;if(!nt.isCollapsed())return!1;const St=window.getSelection();if(!St||St.rangeCount===0)return!0;const Ft=St.getRangeAt(0).getBoundingClientRect(),Gt=M.getElementByKey(Yn().getFirstChild()?.getKey()??"")?.getBoundingClientRect();if(!Gt)return!0;const Cn=4;return Oe==="first"?Math.abs(Ft.top-Gt.top)<=Cn:Math.abs(Ft.bottom-Gt.bottom)<=Cn}):!0,[M]),we=f.useCallback(()=>{_?.()},[_]),Ue=f.useCallback(()=>{w?.()},[w]),Ot=f.useCallback(Oe=>{M||be(Oe.nativeEvent)},[M,be]);f.useImperativeHandle(S,()=>({append:ct,trim:tt,focusAtEnd:je,isFocused:()=>I.current,inLine:ut,focus:()=>M?.focus(),blur:()=>M?.blur(),scrollIntoView:Oe=>M?.getRootElement()?.scrollIntoView(Oe),scrollToEnd:()=>M?.getRootElement()?.scrollIntoView({block:"end",behavior:"auto"}),element:()=>E?.current,get scrollHeight(){return M?.getRootElement()?.scrollHeight??0},get value(){return oy(M?.getEditorState()?.toJSON())},set value(Oe){throw new Error("setValue is not supported in Lexical")},get json(){return M?.getEditorState().toJSON()}}),[ct,je,tt,M,ut]),c1e(r,s,h,P,te),f.useEffect(()=>{!g&&M&&e&&(je(),se(!0))},[g,e,se,M,je]),f.useEffect(()=>{Z!==n&&!n&&!g&&e&&setTimeout(()=>je(),200)}),f.useEffect(()=>M?.registerRootListener((Oe,nt)=>{Oe&&(Oe.addEventListener("focus",ve),Oe.addEventListener("blur",ue),Oe.addEventListener("compositionstart",Ce),Oe.addEventListener("compositionend",ke),Oe.addEventListener("keydown",Re),Oe.addEventListener("paste",ie),Oe.addEventListener("click",be)),nt&&(nt.removeEventListener("focus",ve),nt.removeEventListener("blur",ue),nt.removeEventListener("compositionstart",Ce),nt.removeEventListener("compositionend",ke),nt.removeEventListener("keydown",Re),nt.removeEventListener("paste",ie),nt.removeEventListener("click",be))}),[ue,be,ke,ve,Re,ie,Ce,M]),f.useEffect(()=>{M&&(r&&a&&!ms(a,F.current)?Promise.resolve().then(()=>{M.setEditorState(M.parseEditorState(a),{tag:l9}),B.current&&je(),F.current=M.getEditorState().toJSON(),D.current=oy(F.current)}):D.current!==r&&(M.update(()=>{Kj(l9);const Oe=Yn();Oe.clear(),i9?s9(r,dw,void 0,!0):Oe.append(ur().append(Jn(r))),B.current&&Oe.selectEnd()},{discrete:!0}),F.current=M.getEditorState().toJSON(),D.current=oy(F.current)))},[r,a,M,je]),f.useEffect(()=>{const Oe=M?.registerCommand(rl,Ke=>{const He=Xe(),st=He?.getNodes();return st?.length===1&&jn(st[0])?(st[0].remove(),!0):De(He)?(He.deleteCharacter(Ke),!0):lu(He)?(He.deleteNodes(),!0):!1},Dl),nt=M?.registerCommand(Gp,Ke=>{const He=Xe();return De(He)?(He.deleteWord(Ke),!0):!1},Dl),St=M?.registerCommand(qp,Ke=>{const He=Xe();return De(He)?(He.deleteLine(Ke),!0):!1},Dl),Yt=M?.registerCommand(rC,()=>{const Ke=Xe();return De(Ke)?(Ke.removeText(),!0):!1},Dl),Ft=M?.registerCommand(Bd,Ke=>{const He=Xe();if(typeof Ke=="string")He!==null&&He.insertText(Ke);else{if(He===null)return!1;const st=Ke.dataTransfer;if(st!==null)oX(st,He,M);else if(De(He)){const Vt=Ke.data;return Vt&&He.insertText(Vt),!0}}return!0},Dl),Gt=M?.registerCommand(v3,Ke=>{if("clipboardData"in Ke){const st=Ke.clipboardData?.getData("text/plain");if(st&&st.length>Md)return Ke.preventDefault(),!0}const He=Xe();return De(He)?(Ke.preventDefault(),M.update(()=>{const st=Xe(),Vt=uC(Ke,InputEvent)||uC(Ke,KeyboardEvent)?null:"clipboardData"in Ke?Ke.clipboardData:null;if(Vt&&st){const{types:en}=Vt;if(en.includes("text/html")||en.includes("application/x-lexical-editor")||Vt.files.length>0||!i9)oX(Vt,st,M);else{const On=st.clone(),_e=ur();s9(Vt.getData("text/plain"),dw,_e,!0),Ps(On),e9(M,_e.getChildren(),On)}}},{tag:tve}),!0):!1},Dl),Cn=M?.registerCommand(mD,Ke=>{const He=Xp(Ke.target);if(jn(He))return!1;const st=Xe();if(De(st)){const{anchor:Vt}=st,en=Vt.getNode();if(st.isCollapsed()&&Vt.offset===0&&!Rs(en)&&Bvt(en).getIndent()>0)return Ke.preventDefault(),M.dispatchCommand(D0t,void 0);if(Fvt&&navigator.language==="ko-KR")return!1}else if(!lu(st))return!1;return Ke.preventDefault(),M.dispatchCommand(rl,!0)},Dl),ln=M?.registerCommand(pD,Ke=>{const He=Xp(Ke.target);if(jn(He))return!1;const st=Xe();return De(st)||lu(st)?(Ke.preventDefault(),M.dispatchCommand(rl,!1)):!1},Dl);return M?.registerNodeTransform(Fu,Ke=>{Ke.getFormat()!==0&&Ke.setFormat(0)}),M?.registerNodeTransform(og,Ke=>{if(Ke.getChildrenSize()>1){const He=Ke.getChildren(),st=ur();He.forEach(Vt=>{Ne(Vt)&&(st.getChildren().length&&st.append(Ro()),Vt.getChildren().forEach(en=>{(Ze(en)||jn(en)||Vd(en)||Bi(en))&&st.append(en)}))}),Ke.clear().append(st).selectEnd()}}),M?.registerNodeTransform(ig,Ke=>{const He=Ke.getParent();He instanceof ug&&(Ke.getChildren().forEach(Vt=>{He.append(Vt)}),Ke.remove())}),()=>{Oe?.(),nt?.(),St?.(),Yt?.(),Ft?.(),Gt?.(),Cn?.(),ln?.()}},[M,ie]),f.useEffect(()=>{const Oe=M?.registerCommand(Kp,nt=>!nt||V.current&&!V.current.canSubmit()?!1:(Z0(nt,{isMobileUserAgent:g,isComposing:N.current,onKeyDown:W.current}),nt.defaultPrevented),Dl);return()=>{Oe?.()}},[M,Ue,g]),f.useEffect(()=>{!n&&M&&!M.isEditable()&&M.setEditable(!0)},[n,M]);const pt=f.useMemo(()=>({namespace:x,onError:fe,nodes:i1e,theme:{link:"text-super hover:underline",text:{strikethrough:"line-through"}},editable:!n}),[x,fe,n]),Mt=f.useMemo(()=>({minHeight:`${(o??1)*1.5}em`}),[o]),qe=f.useMemo(()=>i.jsx("div",{className:J,children:t}),[t,J]),Be=f.useMemo(()=>i.jsx(J1t,{className:q,"aria-placeholder":t,placeholder:qe,"data-test-id":y,id:v}),[v,t,qe,q,y]);return f.useMemo(()=>i.jsx("div",{className:re,children:i.jsx("div",{className:"w-full",style:Mt,ref:E,onClick:Ot,children:i.jsxs(q1t,{initialConfig:pt,children:[i.jsx(fxt,{contentEditable:Be,ErrorBoundary:zr}),i.jsx(Nxt,{}),i.jsx(Txt,{}),i.jsx(Axt,{onChange:Se,ignoreSelectionChange:!0}),i.jsx(jxt,{editorRef:k}),i.jsx(Rxt,{ref:V,onClose:Ue,onOpen:we,options:b,onTrigger:C}),i.jsx(Ixt,{}),i.jsx(Pxt,{}),i.jsx(z1t,{}),i.jsx(Oxt,{transformers:dw})]})})}),[re,Mt,Ot,pt,Be,Se,Ue,we,b,C])},eF=e=>{const t=e.useLexical?Bxt:Dxt;return i.jsx(t,{...e})},u1e=A.memo(({children:e})=>{const{state:t}=f.useContext(lx),{isExpanded:n}=t;return e!==null?i.jsx("div",{className:U(...Nr.attribution.left.base,{[Nr.attribution.left.expanded]:n,[Nr.attribution.left.compact]:!n}),children:e}):null});u1e.displayName="LeftAttribution";const d1e=A.memo(({isLoading:e,children:t})=>{const{state:n}=f.useContext(lx),{isExpanded:r}=n;return i.jsxs("div",{className:U(...Nr.attribution.right.base,{[Nr.attribution.right.expanded]:r,[Nr.attribution.right.compact]:!r}),children:[e?i.jsx(L,{color:"light",className:"mr-3",children:i.jsx(me,{icon:Jte,size:"xs",className:"animate-spin"})}):null,t]})});d1e.displayName="RightAttribution";const f1e=A.memo(({value:e,suggestDropdownProps:t,ResizeableInputWrapperProps:n,ResizeableInputProps:r,leftAttributionComponents:s,rightAttributionComponents:a})=>{const o=r.onChange,l=r.ref,c=f.useRef(null),u=f.useRef(e);u.current=e;const d=f.useRef(null),m=f.useCallback(p=>{c.current=p,l instanceof Function?l(p):l&&(l.current=p)},[l]);return f.useEffect(()=>{c.current?.value&&c.current?.value!==u.current&&o?.(c.current?.value)},[o]),_1("ask-input"),i.jsx(zh,{...t,floatingStrategy:"absolute",shouldEnableStacking:!0,portalTarget:d.current??void 0,value:e,children:i.jsxs(JD,{...n,ref:d,children:[i.jsx(eF,{...r,ref:m}),s,a]})})});f1e.displayName="AskInputBase";const Bu=A.memo(({size:e,inverse:t,incognitoType:n=xu.DEFAULT})=>i.jsx(z,{variant:"background",className:U("w-lg text-foreground flex aspect-square shrink-0 items-center justify-center rounded-full border",{"!w-[24px]":e==="small","!w-[16px]":e==="tiny"},{"!bg-inverse !text-inverse border-0":t}),children:n===xu.GOVERNMENT?i.jsx("svg",{width:e==="tiny"?"10":e==="small"?"12":"16",height:"auto",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{fill:"currentColor",d:"M2.75 12.5h2.5v-7h1.5v7h2.5v-7h1.5v7h2.5v-7h1.5v7H16V14H0v-1.5h1.25v-7h1.5zM16 3v1.5H0V3l8-3z"})}):i.jsx("svg",{width:e==="tiny"?"12":e==="small"?"16":"24",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1927 4.54688C11.4375 4.71875 11.651 4.86458 12 4.86458C12.3453 4.86458 12.5529 4.72184 12.7993 4.55235L12.8073 4.54688L12.8084 4.54609C13.152 4.31187 13.5635 4.03125 14.5 4.03125C16.0885 4.03125 17.2083 6.30729 17.9375 8.6875C20.401 9.14062 22 9.875 22 10.6979C22 11.4427 20.6979 12.1094 18.6354 12.5677C18.6562 12.776 18.6667 12.9844 18.6667 13.1979C18.6667 14.0833 18.4948 14.9271 18.1823 15.6979H18.1965C17.2165 18.1697 14.8115 19.9169 12 19.9169C9.18854 19.9169 6.78355 18.1697 5.80356 15.6979H5.81771C5.50521 14.9271 5.33333 14.0833 5.33333 13.1979C5.33333 12.9844 5.34375 12.776 5.36458 12.5677C3.30208 12.1094 2 11.4427 2 10.6979C2 9.875 3.59896 9.14062 6.0625 8.6875C6.79167 6.30729 7.91146 4.03125 9.5 4.03125C10.4365 4.03125 10.848 4.31187 11.1916 4.54609L11.1927 4.54688ZM14.2708 15.6979H14.9167C16.0677 15.6979 17 14.7656 17 13.6146V12.8646C15.5312 13.0781 13.8229 13.1979 12 13.1979C10.1771 13.1979 8.46875 13.0781 7 12.8646V13.6146C7 14.7656 7.93229 15.6979 9.08333 15.6979H9.73437C10.5885 15.6979 11.3542 15.1458 11.625 14.3333C11.7448 13.9687 12.2604 13.9687 12.3802 14.3333C12.651 15.1458 13.4115 15.6979 14.2708 15.6979Z",fill:"currentColor"})})}));Bu.displayName="IncognitoIcon";const cx=A.memo(({className:e,color:t})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:t||"currentColor",viewBox:"0 0 66 24",className:e,children:[i.jsx("path",{d:"M33.569 17.032a1.919 1.919 0 0 1-.799-1.593c0-1.277.935-1.982 2.857-2.157l4.956-.473v.134c0 .784-.127 1.492-.378 2.105a3.958 3.958 0 0 1-1.012 1.456c-.834.753-1.993 1.15-3.354 1.15-.94 0-1.724-.215-2.27-.622Z"}),i.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M60.756 1.398c1.886.991 3.382 2.457 4.443 4.353 1.03 1.813 1.55 3.918 1.55 6.257 0 2.339-.521 4.444-1.55 6.257a10.934 10.934 0 0 1-2.475 3.027l-7.77-9.445 5.845-7.145V3.92h-3.135l-.076.096-4.626 5.837h-.009l-4.626-5.837-.075-.096h-3.136v.782l5.847 7.146-5.847 7.145v.782h3.136l.075-.095 4.626-5.837h.01l7.214 9.087-.017.01c-1.293.703-1.948 1.06-3.755 1.06H.25V1.862C.25.834 1.085 0 2.113 0h52.932c2.063 0 3.985.482 5.711 1.398ZM27.842 19.773V9.272c0-1.69-.55-3.073-1.59-4.002-.954-.851-2.28-1.301-3.834-1.301-1.375 0-2.54.306-3.463.91-.62.407-1.137.946-1.572 1.642a.1.1 0 0 1-.175-.008 4.35 4.35 0 0 0-1.35-1.605c-.864-.624-1.97-.94-3.285-.94-2.436 0-3.62.89-4.327 1.824-.059.077-.181.038-.181-.06V4.32H5.063v15.452h3.09V10.71c0-1.377.358-2.442 1.064-3.166.65-.665 1.597-1.017 2.74-1.017.967 0 1.712.26 2.215.772.488.499.736 1.221.736 2.148v10.326h3.09V10.71c0-1.377.358-2.442 1.063-3.165.65-.666 1.597-1.018 2.74-1.018.967 0 1.712.26 2.215.773.489.498.736 1.221.736 2.148v10.325h3.09Zm15.8 0 .001-10.003c0-1.821-.64-3.32-1.85-4.334-1.146-.96-2.862-1.468-4.72-1.468-1.856 0-3.49.467-4.723 1.35-1.213.87-2.003 2.096-2.254 3.557-.057.331-.04.736-.04.736h3.008l.027-.22c.122-.963.521-1.708 1.185-2.213.669-.51 1.587-.768 2.738-.768s2.038.27 2.636.8c.619.55.933 1.391.933 2.502v.682l-5.356.507c-3.577.344-5.547 1.997-5.547 4.656 0 1.375.564 2.531 1.63 3.346 1.023.781 2.436 1.194 4.088 1.194 1.43 0 2.66-.304 3.656-.903a5.177 5.177 0 0 0 1.408-1.237c.059-.075.179-.033.179.063v1.753h3.002Z"})]}));cx.displayName="MaxBadge";const tF=A.memo(({className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 51 24",className:e,children:[i.jsx("path",{d:"M35.069 7.954c-1.723 1.74-1.706 6.368 0 8.121 1.597 1.799 5.273 1.817 6.855 0 .873-.922 1.315-2.417 1.315-4.075 0-1.66-.442-3.144-1.317-4.048-1.584-1.853-5.256-1.834-6.853.002Z"}),i.jsx("path",{fillRule:"evenodd",d:"m48.958 5.715-.009-.015a10.792 10.792 0 0 0-4.387-4.301l-.01-.006C42.81.47 40.861 0 38.761 0H1.905C.866 0 .002.84 0 1.88V24h3.818V4.359h3.245v1.284c0 .132.161.196.252.1 2.987-3.275 9.077-2.319 11.216 1.723.725 1.234 1.092 2.759 1.092 4.534.102 4.584-3.017 8.265-7.55 8.235-2.031 0-3.629-.79-4.757-1.978a.146.146 0 0 0-.253.1V24h31.7c2.1 0 4.045-.468 5.78-1.39l.011-.005a10.795 10.795 0 0 0 4.394-4.302l.009-.016C49.98 16.483 50.5 14.368 50.5 12s-.52-4.482-1.543-6.285ZM30.112 7.42a24.93 24.93 0 0 1-.86-.003c-1.338-.02-2.845-.041-3.676.819-.549.54-.827 1.468-.827 2.759v8.809h-3.243V4.359h3.243v1.284c0 .148.194.202.271.077.314-.506.65-.852 1.012-1.05.616-.353 1.462-.532 2.514-.532h1.566V7.42Zm8.399 12.814c-4.77.033-8.068-3.395-7.973-8.235 0-1.716.348-3.21 1.033-4.442 2.714-5.062 11.157-5.068 13.852-.002.704 1.234 1.06 2.729 1.06 4.444.08 4.807-3.207 8.268-7.972 8.235Z",clipRule:"evenodd"}),i.jsx("path",{d:"M16.378 12c0 1.657-.442 3.153-1.314 4.075-1.583 1.816-5.26 1.798-6.857 0-1.706-1.753-1.722-6.381 0-8.121 1.597-1.836 5.27-1.855 6.854-.003.875.904 1.317 2.39 1.317 4.049Z"})]}));tF.displayName="ProBadge";const Ty=A.memo(({isMax:e,className:t})=>e?i.jsx("div",{style:{"--mode-color":"oklch(var(--max-color))"},children:i.jsx(cx,{className:`text-max ${t||""}`})}):i.jsx("div",{style:{"--mode-color":"oklch(var(--super-color))"},children:i.jsx(tF,{className:`text-super ${t||""}`})}));Ty.displayName="SearchModeBadge";function Kl(e){switch(e){case oe.SEARCH:return ce.PRO;case oe.RESEARCH:return ce.ALPHA;case oe.STUDIO:return ce.BETA;case oe.STUDY:return ce.STUDY;default:return ce.PRO}}const m1e=A.memo(e=>{const{isFollowUp:t,value:n,onChange:r,buttonSize:s="small",variant:a="primaryGhost"}=e,o=Uh(),{$t:l}=Q(),c=ex(),u=Pa(),d=f.useMemo(()=>n!==void 0?Aa[n]||oe.SEARCH:u,[n,u]),{isMax:m,hasAccessToProFeatures:p}=yt(),h=Qe(),{gpt4Limit:g,pplxAlphaLimit:y,pplxBetaLimit:v}=Hn(),{specialCapabilities:x}=Or(),{preferredSearchModels:b,actions:_}=dn(),w=Ls(),C=nD(),{isMaxUpsellEnabled:S}=Nc(),[E,M]=f.useState(()=>{const N=b[oe.SEARCH];return x.unlimitedProSearch?!0:N===ce.DEFAULT?!1:h});E&&g===0&&!x.unlimitedProSearch&&M(!1);const{gateSearchModeSelection:k}=J1(),T=f.useCallback(()=>{k(ce.BETA,!0)},[k]),j=f.useCallback(N=>k(N?ce.PRO:ce.DEFAULT)?(M(!1),_.setPreferredSearchModel(oe.SEARCH,ce.DEFAULT),!1):(M(N),_.setPreferredSearchModel(oe.SEARCH,N?ce.PRO:ce.DEFAULT),N),[_,k]),R=f.useCallback(N=>{(N===oe.SEARCH||S)&&_.setPreferredSearchMode(N);let I;switch(N){case oe.SEARCH:{E?I=b[N]??Kl(N):I=ce.DEFAULT;break}case oe.RESEARCH:{S?I=b[N]??Kl(N):I=Kl(N);break}case oe.STUDIO:{S?I=b[N]??Kl(N):I=Kl(N);break}default:{I=ce.DEFAULT;break}}if(!C(I)){k(I);return}r?r(I):c(I,N)},[_,S,E,r,b,c,C,k]),O=f.useMemo(()=>{function N(V,$){return{active:d===V,description:l(Br[V].description),icon:Mp[V],onClick(){R(V)},text:l(Br[V].name),type:"default",...$}}const I=V=>h&&V<=10&&!m,D=[];D.push(N(oe.SEARCH,{customDescriptionNode:p?void 0:i.jsxs(i.Fragment,{children:[i.jsx(L,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:i.jsx(pe,{...Br[oe.SEARCH].description})}),i.jsxs("div",{className:"gap-md flex flex-col",children:[i.jsx("hr",{className:"border-subtler bg-subtler -mr-5 mt-3"}),i.jsxs("div",{className:"gap-sm -mr-5 flex items-start justify-between",children:[i.jsxs("div",{className:"gap-xs flex flex-col",children:[i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx("button",{onClick:()=>{k(x.unlimitedProSearch?ce.PRO:ce.SONAR)},type:"button",children:i.jsx(L,{className:"font-medium underline",color:"super",variant:"tiny",children:i.jsx(pe,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})})}),i.jsx(Ty,{isMax:m,className:"h-2.5"})]}),i.jsx(L,{className:"italic",color:"super",variant:"tinyRegular",children:i.jsx(pe,{defaultMessage:"Advanced search with 10x the sources",id:"MZLTMODV37"})}),h&&g<=10&&i.jsx(L,{className:"mt-1 font-light",color:"super",variant:"tinyRegular",children:i.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:g}})})]}),i.jsx(p1e,{isProSearchEnabled:E,selectSearchModel:c,selectedSearchMode:d,setIsProSearchEnabled:j})]})]})]}),customTextNode:i.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[i.jsx(L,{variant:"smallBold",children:i.jsx(pe,{...Br[oe.SEARCH].name})}),i.jsx(Ty,{isMax:m,className:"h-2.5"})]})}));const F=Math.min(g,y);D.push(N(oe.RESEARCH,{customTextNode:i.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[i.jsx(L,{variant:"smallBold",children:i.jsx(pe,{...Br[oe.RESEARCH].name})}),i.jsx(Ty,{isMax:m||o(oe.RESEARCH),className:"h-2.5"})]}),customDescriptionNode:i.jsxs("div",{className:"gap-xs flex flex-col",children:[i.jsx(L,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:i.jsx(pe,{...Br[oe.RESEARCH].description})}),I(F)&&i.jsxs("div",{children:[i.jsx(L,{color:"super",variant:"tinyRegular",children:i.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:F}})}),o(oe.RESEARCH)&&i.jsx(ge,{onClick:T,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:l({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})}));const B=Math.min(g,v);return D.push(N(oe.STUDIO,{customTextNode:i.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[i.jsx(L,{variant:"smallBold",children:i.jsx(pe,{...Br[oe.STUDIO].name})}),i.jsx(Ty,{isMax:m||o(oe.STUDIO),className:"h-2.5"})]}),customDescriptionNode:i.jsxs("div",{className:"gap-xs flex flex-col",children:[i.jsx(L,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:i.jsx(pe,{...Br[oe.STUDIO].description})}),I(B)&&i.jsxs("div",{children:[i.jsx(L,{color:"max",variant:"tinyRegular",children:i.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:B}})}),o(oe.STUDIO)&&i.jsx(ge,{onClick:T,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:l({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})})),D},[p,m,h,g,E,c,d,j,y,o,T,l,v,R,k,x.unlimitedProSearch]),P=f.useMemo(()=>i.jsx(me,{icon:Qn,size:"xs",className:U("-mx-xs -mb-two opacity-50",{"-ml-sm":t})}),[t]);return i.jsx(Jt,{isMobileStyle:w,items:O,placement:"bottom-start",children:i.jsx(ge,{icon:Mp[d],size:s,text:t?i.jsx(i.Fragment,{children:""}):l(Br[d].name),variant:a,trailingComponent:P})})});m1e.displayName="SearchModeDropdownMenu";const p1e=A.memo(({isProSearchEnabled:e,selectSearchModel:t,selectedSearchMode:n,setIsProSearchEnabled:r})=>{const s=f.useCallback(o=>{r(o)&&n===oe.SEARCH&&t(o?ce.PRO:ce.DEFAULT)},[t,n,r]),a=f.useMemo(()=>({onClick(o){o.stopPropagation()}}),[]);return i.jsx(Ao,{active:e,onChange:s,size:"small",switchProps:a})});p1e.displayName="SwitchFactory";const h1e=()=>{const{base:e}=_t(),t=Nt();return t===(e||"/")||t?.startsWith("/welcome")||t?.startsWith("/finance")},HX=10,g1e=A.memo(e=>{const{children:t,tooltipContent:n,triggeredSearchModeElement:r,isOpen:s,setIsOpen:a}=e,{showSuggestDropdown:o}=ws(),[l,c]=f.useState(!1),u=s!==void 0?s:l,d=a||c,m=f.useRef(0),[p,h]=ml(),[g,y]=ml(),x=f.useCallback(()=>{const{left:E=0,width:M=0}=r?.getBoundingClientRect()??{};return h.width===0||E===0?0:E-h.left+M/2-HX/2},[h,r])();let b=x!==0;x!==0&&x!==m.current&&(b=m.current!==0,m.current=x);const _=f.useCallback(E=>{E||(m.current=0),d(E)},[d]),w=f.useCallback(E=>{E.preventDefault()},[]),C=f.useCallback(()=>{d(!1)},[d]),S=f.useCallback(E=>{E.preventDefault()},[]);return i.jsx(XI,{delayDuration:o?1e3:400,skipDelayDuration:100,children:i.jsxs(Jse,{onOpenChange:_,open:u,children:[i.jsx(ZI,{asChild:!0,className:"focus:outline-none",onBlur:C,onClick:w,onPointerDown:S,children:t}),i.jsx(e7,{children:i.jsx(t7,{className:U("group/tooltip-content data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn ease-outExpo duration-300"),"data-color-scheme":"dark",sideOffset:4,side:"bottom",ref:p,children:i.jsxs(xe.div,{className:U("bg-base shadow-overlay flex w-72 flex-col rounded-lg"),animate:{height:y.height||void 0},transition:{duration:.05,ease:wu},children:[i.jsxs(xe.div,{className:'absolute left-0 group-data-[side="bottom"]/tooltip-content:top-0 group-data-[side="top"]/tooltip-content:bottom-0',animate:{opacity:m.current?1:void 0,x:b?x:void 0},initial:{opacity:0},transition:{duration:.05,ease:wu},style:{x,width:HX},children:[i.jsx(Rw,{className:"fill-inverse"}),i.jsx(Rw,{className:"fill-inverse -translate-y-px scale-[99%]"})]}),i.jsx("div",{className:U("relative overflow-hidden"),children:i.jsx("div",{className:"whitespace-normal",ref:g,children:n})})]})})})]})})});g1e.displayName="SearchModeTooltip";const y1e={[oe.SEARCH]:ce.DEFAULT,[oe.RESEARCH]:ce.ALPHA,[oe.STUDIO]:ce.BETA,[oe.STUDY]:ce.DEFAULT},R3=A.memo(e=>{const{children:t,className:n,searchMode:r,...s}=e,{gateSearchModeSelection:a}=J1();return i.jsx("button",{className:U("group",n),onClick:()=>{a(y1e[r],!0)},type:"button",...s,children:i.jsx(L,{className:"!text-[var(--mode-color)] underline decoration-transparent transition-[text-decoration-color] group-hover:decoration-[var(--mode-color)]",variant:"smallBold",children:t})})});R3.displayName="SearchModeTooltipUpgradeButton";const I3=A.memo(e=>{const{badgeNode:t,color:n,enabledText:r,isEnabled:s,upgradeButton:a,isMaxUpsell:o=!1}=e;return i.jsxs("div",{className:"gap-sm flex items-center",style:{"--mode-color":n==="super"?"oklch(var(--super-color))":"oklch(var(--max-color))"},children:[t,s?i.jsxs("div",{className:"gap-xs flex items-center",children:[i.jsx(L,{className:"!text-[var(--mode-color)]",variant:"smallBold",children:r}),!o&&i.jsx(Rr,{className:"text-[var(--mode-color)]",size:18})]}):i.jsx(i.Fragment,{children:a})]})});I3.displayName="SearchModeTooltipFooter";const v1e=A.memo(e=>{const{searchMode:t}=e,{$t:n}=Q(),r=Qe(),{hasAccessToProFeatures:s}=yt(),{gateSearchModeSelection:a}=J1(),o=Uh(),{specialCapabilities:l}=Or(),c=f.useCallback(()=>{a(y1e[t],!0)},[a,t]);return o(t)?i.jsx(ge,{onClick:c,variant:"maxGold",size:"small",fullWidth:!0,text:n({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})}):l.unlimitedProSearch||l.unlimitedResearch||r&&s||t===oe.STUDY?null:i.jsx(ge,{onClick:c,variant:"primary",size:"small",fullWidth:!0,testId:"upgrade-to-pro-button",text:r?i.jsx(pe,{defaultMessage:"Upgrade to Pro",id:"5N04mo7WNC"}):i.jsx(pe,{defaultMessage:"Sign in for access",id:"w6mjA9GP58"})})});v1e.displayName="SearchModeTooltipUpsellButton";const ux=A.memo(e=>{const{footerNode:t,includeNewBadge:n,searchMode:r}=e,{$t:s}=Q();return i.jsxs("div",{className:"p-md flex flex-col gap-4",children:[i.jsxs("div",{className:"gap-xs flex flex-col",children:[i.jsxs("div",{className:"relative",children:[i.jsx(L,{className:"text-box-trim-both",variant:"smallExtraBold",children:s(Br[r].name)}),n&&i.jsx(z,{className:"absolute -right-1 -top-1 rounded-md px-2 py-1",variant:"offsetPlus",children:i.jsx(L,{variant:"tiny",children:i.jsx(pe,{defaultMessage:"New",id:"bW7B87wFFp"})})})]}),i.jsx(L,{variant:"small",className:"text-pretty",children:s(Br[r].description)})]}),i.jsx("hr",{className:"border-subtler bg-subtler"}),i.jsx("div",{className:"gap-xs flex flex-col",children:t}),i.jsx(v1e,{searchMode:r})]})});ux.displayName="SearchModeTooltipContentContainer";const P3=A.memo(({isMaxUpsell:e=!1})=>{const{isMax:t,isPro:n}=yt();return t||e?i.jsx(cx,{className:"text-max h-3"}):n?i.jsx(tF,{className:"text-super h-3"}):null});P3.displayName="SearchModeBadge";const nF=({isMax:e,isPro:t,isMaxUpsell:n=!1})=>e||n?"max":"super",x1e=A.memo(e=>{const{isToggleActive:t,onToggleChange:n}=e,r=Qe(),{hasAccessToProFeatures:s,isMax:a,isPro:o}=yt(),{gpt4Limit:l}=Hn(),{specialCapabilities:c,isGovernmentRequestOrigin:u}=Or(),d=!r&&!c.unlimitedProSearch?null:s||c.unlimitedProSearch?u?i.jsx(pe,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):i.jsx(pe,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):l>0&&l<=10?i.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:l}}):null,m=f.useMemo(()=>i.jsx(P3,{}),[]),p=f.useMemo(()=>({onClick(v){v.stopPropagation()}}),[]),h=f.useMemo(()=>i.jsx(R3,{searchMode:oe.SEARCH,children:i.jsx(pe,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})}),[]),g=f.useMemo(()=>i.jsx(pe,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[]),y=f.useMemo(()=>i.jsxs("div",{className:"flex",children:[i.jsxs("div",{className:"gap-xs flex w-full flex-col",children:[i.jsx(I3,{badgeNode:m,color:nF({isMax:a,isPro:o}),enabledText:g,isEnabled:s||c.unlimitedProSearch,upgradeButton:h}),i.jsx(L,{color:"default",variant:"small",className:"text-pretty",children:i.jsx(pe,{defaultMessage:"Advanced search with 10x the sources; powered by top models",id:"IKFeqUH+w0"})}),d&&i.jsx(L,{color:"default",variant:"small",className:"mt-xs opacity-60",children:d})]}),!s&&!c.unlimitedProSearch&&i.jsx("div",{children:i.jsx(Ao,{active:t,onChange:n,switchProps:p})})]}),[m,g,s,a,o,t,n,d,p,h,c.unlimitedProSearch]);return i.jsx(ux,{footerNode:y,searchMode:oe.SEARCH})});x1e.displayName="ProSearchModeTooltip";const b1e=A.memo(()=>{const e=Qe(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=yt(),{gpt4Limit:s,pplxAlphaLimit:a}=Hn(),{specialCapabilities:o,isGovernmentRequestOrigin:l}=Or(),c=Uh(),u=c(oe.RESEARCH),d=!e&&!o.unlimitedResearch||Math.min(s,a)<0||c(oe.RESEARCH)?null:o.unlimitedResearch&&l?i.jsx(pe,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):n?i.jsx(pe,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):a<=10?i.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:a}}):i.jsx(pe,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),m=f.useMemo(()=>i.jsx(P3,{isMaxUpsell:u}),[u]),p=f.useMemo(()=>u?i.jsx(pe,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):i.jsx(pe,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[u]),h=f.useMemo(()=>i.jsx(R3,{searchMode:oe.RESEARCH,children:e?u?i.jsx(pe,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):i.jsx(pe,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}):i.jsx(pe,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,u]),g=f.useMemo(()=>i.jsxs("div",{className:"gap-xs flex flex-col",children:[i.jsx(I3,{badgeNode:m,color:nF({isMax:n,isPro:r,isMaxUpsell:u}),enabledText:p,isEnabled:t||o.unlimitedResearch,upgradeButton:h,isMaxUpsell:u}),i.jsx(L,{color:"default",variant:"small",className:"text-pretty",children:i.jsx(pe,{defaultMessage:"In-depth reports with more sources, charts, and advanced reasoning",id:"9V0OqZ9HGl"})}),d&&i.jsx(L,{color:"default",variant:"small",className:"mt-xs opacity-60",children:d})]}),[m,p,t,n,r,u,d,h,o.unlimitedResearch]);return i.jsx(ux,{footerNode:g,searchMode:oe.RESEARCH})});b1e.displayName="ResearchModeTooltip";const _1e=A.memo(()=>{const e=Qe(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=yt(),{gpt4Limit:s,pplxBetaLimit:a}=Hn(),o=Uh(),l=o(oe.STUDIO),c=(()=>{if(!e)return null;if(!t)return i.jsx(pe,{defaultMessage:"Upgrade to get access",id:"eRbSgHbjUP"});const h=Math.min(s,a);return h<0||o(oe.STUDIO)?null:n?i.jsx(pe,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):i.jsx(pe,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:h}})})(),u=f.useMemo(()=>i.jsx(P3,{isMaxUpsell:l}),[l]),d=f.useMemo(()=>l?i.jsx(pe,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):i.jsx(pe,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[l]),m=f.useMemo(()=>i.jsx(R3,{searchMode:oe.STUDIO,children:e?l?i.jsx(pe,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):i.jsx(pe,{defaultMessage:"Access for subscribers only",id:"Ez3b/pzas/"}):i.jsx(pe,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,l]),p=f.useMemo(()=>i.jsxs("div",{className:"gap-xs flex flex-col",children:[i.jsx(I3,{badgeNode:u,color:nF({isMax:n,isPro:r,isMaxUpsell:l}),enabledText:d,isEnabled:t,upgradeButton:m,isMaxUpsell:l}),i.jsx(L,{color:"default",variant:"small",className:"text-pretty",children:l?i.jsx(pe,{defaultMessage:"Draft, design, deliver your ideas.",id:"I1aIhz4l3D"}):i.jsx(pe,{defaultMessage:"Turn your ideas into completed docs, slides, dashboards, and more",id:"WRu1tcOhoj"})}),c&&i.jsx(L,{color:"default",variant:"small",className:"mt-xs opacity-60",children:c})]}),[u,d,t,n,r,l,c,m]);return i.jsx(ux,{footerNode:p,searchMode:oe.STUDIO,includeNewBadge:!0})});_1e.displayName="StudioModeTooltip";const w1e=A.memo(()=>{const e=A.useMemo(()=>i.jsx("div",{children:i.jsx(L,{color:"default",variant:"small",className:"text-pretty",children:i.jsx(pe,{defaultMessage:"Interactive learning and study tools that guide you toward deeper understanding beyond quick answers. ",id:"ZRKKxSc+oV"})})}),[]);return i.jsx(ux,{footerNode:e,searchMode:oe.STUDY,includeNewBadge:!0})});w1e.displayName="StudyModeTooltip";var rF="Radio",[Vxt,C1e]=Ra(rF),[Wxt,$xt]=Vxt(rF),S1e=f.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[m,p]=f.useState(null),h=In(t,v=>p(v)),g=f.useRef(!1),y=m?u||!!m.closest("form"):!0;return i.jsxs(Wxt,{scope:n,checked:s,disabled:o,children:[i.jsx(nn.button,{type:"button",role:"radio","aria-checked":s,"data-state":T1e(s),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:h,onClick:Pt(e.onClick,v=>{s||c?.(),y&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),y&&i.jsx(k1e,{control:m,bubbles:!g.current,name:r,value:l,checked:s,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});S1e.displayName=rF;var E1e="RadioIndicator",M1e=f.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=$xt(E1e,n);return i.jsx(Os,{present:r||a.checked,children:i.jsx(nn.span,{"data-state":T1e(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});M1e.displayName=E1e;var Hxt="RadioBubbleInput",k1e=f.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=f.useRef(null),l=In(o,a),c=fP(n),u=dS(t);return f.useEffect(()=>{const d=o.current;if(!d)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const g=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(g)}},[c,n,r]),i.jsx(nn.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});k1e.displayName=Hxt;function T1e(e){return e?"checked":"unchecked"}var zxt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],O3="RadioGroup",[Gxt,WVt]=Ra(O3,[BE,C1e]),N1e=BE(),A1e=C1e(),[qxt,Kxt]=Gxt(O3),j1e=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:m,...p}=e,h=N1e(n),g=qS(u),[y,v]=_i({prop:a,defaultProp:s??null,onChange:m,caller:O3});return i.jsx(qxt,{scope:n,name:r,required:o,disabled:l,value:y,onValueChange:v,children:i.jsx(fhe,{asChild:!0,...h,orientation:c,dir:g,loop:d,children:i.jsx(nn.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...p,ref:t})})})});j1e.displayName=O3;var R1e="RadioGroupItem",I1e=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=Kxt(R1e,n),o=a.disabled||r,l=N1e(n),c=A1e(n),u=f.useRef(null),d=In(t,u),m=a.value===s.value,p=f.useRef(!1);return f.useEffect(()=>{const h=y=>{zxt.includes(y.key)&&(p.current=!0)},g=()=>p.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[]),i.jsx(mhe,{asChild:!0,...l,focusable:!o,active:m,children:i.jsx(S1e,{disabled:o,required:a.required,checked:m,...c,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:Pt(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:Pt(s.onFocus,()=>{p.current&&u.current?.click()})})})});I1e.displayName=R1e;var Yxt="RadioGroupIndicator",P1e=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=A1e(n);return i.jsx(M1e,{...s,...r,ref:t})});P1e.displayName=Yxt;const Qxt=e=>{const t=Tn(e);if(!t)return 0;const n=parseInt(t);return isNaN(n)?1:n},Xxt=(e,t)=>{Qt(e,t.toString(),{expires:365})},O1e=({cueKey:e,impressionsLimit:t,enabled:n})=>{const[r,s]=f.useState(!1),[a,o]=f.useState(0);return f.useEffect(()=>{if(!n){s(!1);return}const l=Qxt(e);o(l),l<t&&(s(!0),Xxt(e,l+1),o(l+1))},[e,t,n]),f.useMemo(()=>({shouldShow:r,currentCount:a}),[r,a])},Zxt={xs:"px-xs py-xxs",sm:"px-sm py-xs"},Jxt=e=>{switch(e){case"primary":return{background:"!bg-super",titleText:"!text-inverse",subtitleText:"!text-inverse mt-xs opacity-90",arrow:"fill-super",borderRadius:"rounded-xl"};case"common":return{background:"!bg-inverse dark:!bg-offsetPlus",titleText:"!text-light font-semibold",subtitleText:"!text-light mt-xxs opacity-90",arrow:"fill-foreground dark:fill-offsetPlus",borderRadius:"rounded"};default:return{background:"!bg-inverse dark:!bg-offsetPlus",titleText:"!text-light font-semibold",subtitleText:"!text-light mt-xxs opacity-90",arrow:"fill-foreground dark:fill-offsetPlus",borderRadius:"rounded"}}},L3=A.memo(({cueKey:e,title:t,subtitle:n,children:r,enabled:s,impressionsLimit:a=1,variant:o="primary",size:l="xs",placement:c="bottom",sideOffset:u=10,className:d})=>{const[m,p]=f.useState(!1),{shouldShow:h}=O1e({cueKey:e,impressionsLimit:a,enabled:s}),g=Jxt(o),y=h&&!m,v=()=>!t&&!n?null:i.jsxs("div",{className:U(Zxt[l],d),children:[t&&i.jsx(L,{variant:"tiny",className:g.titleText,children:t}),n&&i.jsx(L,{variant:"tiny",className:g.subtitleText,children:n})]}),x=f.useCallback(()=>{p(!0)},[]),b=f.useMemo(()=>({removeScroll:!1,animationClassName:"z-[2000]"}),[]);return i.jsx(lo,{content:v(),contentClassName:g.background,arrowClassName:g.arrow,borderRadius:g.borderRadius,isOpen:s&&y,onClose:x,placement:c,sideOffset:u,overlayProps:b,children:r})});L3.displayName="Cue";const sF=A.memo(e=>{const{className:t="",layoutKey:n="",options:r,value:s,backgroundClassName:a="",radioGroupIndicatorClassName:o="",variant:l="default",areCuesEnabled:c=!1,...u}=e,d=(()=>{switch(l){case"offsetPlus":return"";case"default":return"bg-white dark:bg-black dark:bg-gradient-to-b dark:from-super/20 dark:to-super/20";default:$t(l)}})(),{$t:m}=Q(),p=f.useMemo(()=>({study:m({defaultMessage:"Learn with Study Mode",id:"kJFaTtzXAA"})}),[m]),h=f.useMemo(()=>r.map(y=>{const v=y.value===s;return i.jsx(L3,{cueKey:`segmented-control-${y.value}`,enabled:!!p[y.value]&&c,placement:"top",title:p[y.value],children:i.jsxs(I1e,{...y.elementProps,"aria-label":y.label,disabled:y.disabled??void 0,className:"segmented-control group/segmented-control relative focus:outline-none",value:y.value,children:[v&&i.jsx(P1e,{asChild:!0,className:U("pointer-events-none absolute inset-0 z-0 block",d,"border-super dark:border-super/30 border","rounded-lg","shadow-super/30 dark:shadow-super/5 shadow-[0_1px_3px_0]","dark:text-super","transition-colors duration-300","group-focus-visible/segmented-control:border-dashed",o),children:i.jsx(xe.div,{layoutId:`segmented-control-active-indicator-${n}`,transition:{duration:.1}})}),y.children]})},y.value)}),[r,s,p,c,d,o,n]),g=(()=>{switch(l){case"offsetPlus":return"bg-offsetPlus";case"default":return"bg-super/10 dark:bg-black/[0.18]";default:$t(l)}})();return i.jsxs(j1e,{...u,className:U("group relative isolate flex h-fit",t),value:s,children:[i.jsx("div",{className:U("absolute inset-0",g,"dark:border dark:border-black/[0.04]","rounded-[10px]","transition-colors duration-300",a)}),i.jsx("div",{className:"p-two flex shrink-0 items-center",children:h})]})});sF.displayName="SegmentedControl";const aF=A.memo(e=>{const{className:t="",isActiveOption:n,icon:r,label:s,activeColor:a="text-super"}=e,o=U("transition-colors duration-300",{[a]:n,"text-quiet group-hover/segmented-control:text-foreground":!n});return i.jsxs("div",{className:U("relative z-10 flex h-8 min-w-9 items-center justify-center",{"py-xs gap-xs px-2.5":n||s},t),children:[r&&i.jsx($y,{buttonSize:"small",icon:r,iconClassName:U(o),showClicked:!1}),s&&i.jsx("div",{className:U("px-two font-sans text-sm leading-[1.125rem]",o),children:s})]})});aF.displayName="SegmentedControlOption";const L1e=A.memo(e=>{const{isFollowUp:t,layoutKey:n,value:r,onChange:s,className:a,variant:o}=e,l=Pa(),c=f.useMemo(()=>r!==void 0?Aa[r]||oe.SEARCH:l,[r,l]),{$t:u}=Q(),d=ex(),m=Nt(),{inputRef:p}=ws(),h=Qe(),{gpt4Limit:g}=Hn(),{specialCapabilities:y}=Or(),v=h1e(),x=kme(),{currentOpenedModal:b}=vt(),{preferredSearchModels:_,actions:w}=dn(),{isMaxUpsellEnabled:C}=Nc(),[S,E]=f.useState(oe.SEARCH),M=f.useRef(null),[k,T]=f.useState(!1),j=f.useRef(null);f.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const{gateSearchModeSelection:R}=J1(),[O,P]=f.useState(()=>_[oe.SEARCH]===ce.DEFAULT?!1:h||y.unlimitedProSearch),N=f.useCallback(W=>R(W?ce.PRO:ce.DEFAULT)?(P(!1),w.setPreferredSearchModel(oe.SEARCH,ce.DEFAULT),!1):(P(W),w.setPreferredSearchModel(oe.SEARCH,W?ce.PRO:ce.DEFAULT),W),[w,R]),I=f.useCallback(W=>{switch(W){case oe.SEARCH:return O?_[W]??Kl(W):ce.DEFAULT;case oe.RESEARCH:return _[W]??Kl(W);case oe.STUDIO:return _[W]??Kl(W);case oe.STUDY:return ce.STUDY}},[O,_]),D=nD(),F=D(ce.STUDY),B=f.useCallback(W=>{(W===oe.SEARCH||C)&&w.setPreferredSearchMode(W);const H=I(W);D(H)?(s?s(H):d(H,W),p.current?.focus(),T(!1)):R(H)},[w,D,R,I,p,C,s,d,T]),V=f.useCallback(W=>{if(N(W),c===oe.SEARCH){const H=W?ce.PRO:ce.DEFAULT;s?s(H):d(H)}},[s,d,c,N]),$=f.useMemo(()=>{const W=F?S$:S$.filter(Z=>Z!==oe.STUDY);function H(Z){const{searchMode:re}=Z,q=I(re),J=W.length<3&&!t;return{children:i.jsx("div",{"data-testid":`search-mode-${re}`,children:i.jsx(aF,{label:J?i.jsx(pe,{...Br[re].name}):void 0,icon:Mp[re],isActiveOption:c===re})}),elementProps:{"aria-disabled":D(q)===!1?!0:void 0,onPointerEnter(te){j.current&&clearTimeout(j.current),M.current=te.currentTarget,E(re),j.current=setTimeout(()=>{T(!0)},800)},onPointerLeave(){j.current&&(clearTimeout(j.current),j.current=null)},onClick(){j.current&&(clearTimeout(j.current),j.current=null),p.current?.focus(),T(!1)}},label:u(Br[re].name),value:re}}return W.map(Z=>H({searchMode:Z}))},[I,t,u,c,D,p,F]);O&&g===0&&!y.unlimitedProSearch&&P(!1);let G;switch(S){case oe.SEARCH:{G=i.jsx(x1e,{isToggleActive:O,onToggleChange:V});break}case oe.RESEARCH:{G=i.jsx(b1e,{});break}case oe.STUDIO:{G=i.jsx(_1e,{});break}case oe.STUDY:{G=i.jsx(w1e,{});break}}const X=f.useMemo(()=>i.jsx(it,{initial:!1,mode:"popLayout",children:i.jsx(xe.div,{animate:{opacity:1},exit:{opacity:0},initial:{opacity:0},transition:{duration:.15},children:G},S)}),[G,S]),Y=f.useCallback(W=>{W.target.tagName===document.activeElement?.tagName&&(M.current=W.target,E(c),T(!0))},[c]);return i.jsx(g1e,{tooltipContent:X,triggeredSearchModeElement:M.current,isOpen:k,setIsOpen:T,children:i.jsx(sF,{layoutKey:`segmented-search-mode-selector_${n??m}`,options:$,onFocus:Y,onValueChange:B,value:c,className:a,variant:o,areCuesEnabled:v&&!x&&!b})})});L1e.displayName="SegmentedSearchModeSelector";const D1e="(pointer: coarse)";function zX(){return typeof window>"u"?!1:window.matchMedia(D1e).matches}function ebt(){const e=Ls(),[t,n]=f.useState(()=>zX()||e);return f.useLayoutEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia(D1e);function s(){n(zX())}return r.addEventListener("change",s),s(),function(){r.removeEventListener("change",s)}},[]),t}const oF=A.memo(({isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,buttonSize:a,variant:o="default"})=>{const l=ebt(),c=Ls();if(l||c){const u=(()=>{switch(o){case"default":return"primaryGhost";case"offsetPlus":return"common"}})();return i.jsx(m1e,{isFollowUp:e,value:n,onChange:r,buttonSize:a,variant:u})}else return i.jsx(L1e,{isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,variant:o})});oF.displayName="SearchModeSelector";const tbt=({showIncognitoHint:e,showSearchModeSelector:t=!0,isFollowUp:n,layoutKey:r})=>{const s="ask-input-left-attributions",{$t:a}=Q(),{device:{isMacOS:o}}=Et(),{isIncognito:l,incognitoType:c}=oa({reason:s}),{isGovernmentRequestOrigin:u}=Or();return i.jsx(u1e,{children:i.jsx(wl,{children:i.jsx("div",{className:U("gap-xs flex items-center"),children:i.jsxs(it,{initial:!1,mode:"popLayout",children:[l&&e&&i.jsx(xe.div,{className:"mr-xs flex shrink-0 items-center",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},children:i.jsx(pn,{className:"max-w-[280px]",tooltipText:c===xu.GOVERNMENT?a({defaultMessage:"Zero Data Usage active",id:"9i8r+oh3pt"}):a({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:u?void 0:o?["",";"]:["ctrl",";"],asChild:!0,children:i.jsx("span",{children:i.jsx(Bu,{size:"small",inverse:!0,incognitoType:c})})})}),t&&i.jsx(oF,{isFollowUp:n,layoutKey:r})]})})})})},F1e=A.memo(tbt);F1e.displayName="AskInputLeftAttribution";const U1e=A.memo(({children:e,placement:t,isOpen:n,onOpen:r,onClose:s,connectorMenuItems:a,width:o="250px"})=>{const{isMobileStyle:l}=ye(),c=f.useMemo(()=>({style:{width:o}}),[o]);return i.jsx(it,{initial:!1,mode:"popLayout",children:i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:wu},children:i.jsx(Jt,{placement:t,items:a,isMobileStyle:l,isOpen:n,onOpen:r,onClose:s,boxProps:c,children:e})},"attachment-selector")})});U1e.displayName="AttachmentSelector";const B1e=A.memo(({isOpen:e,fileType:t,size:n,tooltip:r,onOpen:s,onClose:a,onFilePickerOpen:o,onFilePickerClose:l,areFileAttachmentsAllowed:c,fileUploadErrorMessage:u,fileUploadWarningMessage:d,activeConnector:m=null,uploadedFiles:p=le,handleStartUpload:h,handleFileInput:g,isBoxFilePickerOpen:y=!1,handleCloseBoxFilePicker:v,cleanupBoxFilePicker:x,microsoftFilePickerOptions:b=null,handleCloseMicrosoftFilePicker:_,handleSelectSharepointSite:w,isMicrosoftFilePickerOpen:C=!1,fileInputRef:S,isAudioVideoFilesEnabled:E=!1,setAttachmentErrorMessage:M})=>{const k="file-upload-button",{$t:T}=Q(),j=f.useRef(!1),{fileUploadUpsellTooltipOpen:R}=ws(),{setFileUploadUpsellTooltipOpen:O}=jo(),P=Ls(),N=Qe(),{uploadRateLimit:I}=Hn(),{hasActiveSubscription:D}=yt(),F=I??(D?Oae:Pae),B=f.useCallback(je=>je.preventDefault(),[]),{trackEvent:V}=Me(),{referrer:$,referrerId:G}=TP({mode:"file"}),{connectorsMap:X}=h1({reason:k}),{enabledFileConnectors:Y}=g1({reason:k}),{disabledFileConnectors:W}=kP({reason:k}),H=f.useMemo(()=>X?.onedrive?.connected||X?.sharepoint?.connected,[X?.onedrive?.connected,X?.sharepoint?.connected]),Z=f.useCallback(()=>{switch(t){case"image":return T({defaultMessage:"images",id:"HVUWg4/ofn"});case"all":return T({defaultMessage:"files",id:"l17U7PEF+6"});default:return T({defaultMessage:"text or PDF files",id:"XFh9ob267W"})}},[T,t]),re=f.useCallback(()=>{switch(t){case"image":return y7e;case"all":return E?w7e:v7e;default:return E?b7e:g7e}},[t,E]),q=f.useCallback(je=>{je?V("attempt connector file attachment",{connectorName:je}):V("opened file selector",{}),h?.(je)},[h,V]),{handleConnect:J}=XS({reason:k}),[te,se]=f.useState(!1),de=f.useMemo(()=>{const je={type:"default",text:T({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),size:"small",icon:Nte,onMouseDown:B,onClick:()=>q("local")},ct=Y.map(tt=>{const ut=tt.name;return{type:"default",text:$s(ut)??"",avatar:i.jsx("img",{src:ri(ut)??"",alt:$s(ut),width:20,height:20}),onMouseDown:B,onClick:()=>q(ut),show:B7e.includes(tt.name)}});return W.length>0&&!P&&ct.push({type:"nested",submenu:W.map(tt=>({type:"default",size:"small",text:$s(tt.name),avatar:i.jsx("img",{src:ri(tt.name)??"",alt:$s(tt.name),width:20,height:20}),rightElement:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(me,{icon:no,size:"sm"})}),onClick:()=>J({connectorName:tt.name,customReferrer:$??void 0,customReferrerId:G??void 0})})),isSubmenuOpen:te,onSubmenuOpen:()=>se(!0),onSubmenuClose:()=>se(!1),text:T({defaultMessage:"Connect files",id:"geEGjFxpOA"}),icon:VC,onMouseDown:B}),[je,...ct]},[T,Y,W,B,q,te,J,$,G,P]),fe=f.useCallback(()=>{de.length<=1||p.length>0?q(m??void 0):s?.()},[de,p,m,q,s]),ve=f.useCallback(()=>{a?.()},[a]),ue=f.useMemo(()=>{if(r)return r;let je=`${T({defaultMessage:"Attach",id:"Ye0Clmvfec"})} ${Z()}`;return N?c?F!=null&&F>0&&F<=100?je+=`. ${T({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:F})}`:Tn(cA)&&(je=T({defaultMessage:"Files attached to threads are retained for 7 days",id:"hTclTOMwb7"})):je=T({defaultMessage:"File attachments are disabled by your organization",id:"HmmaBNCmcH"}):je+=`. ${T({defaultMessage:"Sign in to attach files",id:"Ei6nUBg77Q"})}`,je},[r,F,N,T,Z,c]);f.useEffect(()=>{const je=()=>{j.current&&(l?.(),j.current=!1)};return window.addEventListener("focus",je),()=>window.removeEventListener("focus",je)},[l]);const ie=f.useCallback(()=>{O(!1)},[O]),be=f.useCallback(()=>_?.(),[_]),Se=f.useCallback(()=>v?.(),[v]),Ce=f.useCallback(je=>w?.(je),[w]),ke=f.useCallback(()=>x?.(),[x]),Re=f.useCallback(()=>{M?.("")},[M]);return i.jsx("div",{className:"flex items-center",children:i.jsx(pn,{tooltipText:T({defaultMessage:"Attach files",id:"8d3exg7mte"}),open:R,offset:3,closeOnClick:!0,onClickOutsideTooltip:ie,asChild:!0,children:i.jsxs("div",{children:[i.jsx(U1e,{placement:"bottom-start",connectorMenuItems:de,isOpen:e,onOpen:fe,onClose:ve,children:i.jsx(Te,{size:n,icon:RR,disabled:!c,toolTip:ue})}),i.jsx("input",{type:"file",multiple:!0,onClick:()=>{j.current=!0,o?.()},ref:S,onChange:je=>{j.current=!1,g?.(je.target.files?Array.from(je.target.files):le)},accept:re(),style:{display:"none"}}),H&&i.jsx(BP,{options:b,isOpen:C,onClose:be,onSelectSite:Ce}),X?.box?.connected&&i.jsx(_P,{isOpen:y,onClose:Se,cleanupPicker:ke}),i.jsx(_u,{isVisible:!!u,variant:"error",message:u??"",handleClose:Re}),i.jsx(_u,{isVisible:!!d&&!u,variant:"warning",message:d??"",timeout:4})]})})})});B1e.displayName="FileUploadButton";var xr;(function(e){e[e.FOCUS=0]="FOCUS",e[e.SOURCES=1]="SOURCES",e[e.RECENCY=2]="RECENCY",e[e.PRO_MODEL_PREFERENCE=3]="PRO_MODEL_PREFERENCE",e[e.ATTACHMENTS=4]="ATTACHMENTS",e[e.SEARCH_MODEL_SELECTOR=5]="SEARCH_MODEL_SELECTOR"})(xr||(xr={}));const D3=A.memo(({children:e,focusItems:t,placement:n,width:r="200px",isMobileStyle:s,isOpen:a=!1,onOpen:o,onClose:l,menuType:c=xr.FOCUS,isSpace:u=!1})=>{const{$t:d}=Q(),{isMax:m}=yt(),p=Q(),h=f.useMemo(()=>{switch(c){case xr.RECENCY:return d({defaultMessage:"Choose recency",id:"qyxEklVz9W"});case xr.SOURCES:default:return d({defaultMessage:"Choose sources",id:"5HzLAl6K6z"})}},[c,d]),g=f.useCallback(_=>{_?.stopPropagation(),o?.()},[o]),y=f.useCallback(()=>{l?.()},[l]),v=f.useMemo(()=>i.jsx("div",{className:"gap-x-xs p-sm bg-offsetPlus flex items-center justify-center rounded-t-md text-center",children:i.jsx(L,{color:"light",variant:"tinyRegular",children:i.jsxs("div",{className:"gap-x-sm flex items-center",children:[i.jsx(me,{icon:Ca,size:"xs"}),p.formatMessage({defaultMessage:"Search includes all context from this space.",id:"uhJN0zDnSy"})]})})}),[p]),x=f.useMemo(()=>({width:r}),[r]),b=f.useMemo(()=>i.jsxs(z,{className:U("flex flex-col",{"max-h-[37vh]":u,"max-h-[42vh]":!u,"max-super-override":m}),style:x,children:[u&&c===xr.SOURCES&&v,i.jsx(ul,{orientation:"vertical",showIndicatorOnHover:!1,className:U("min-h-0 flex-1 overflow-auto",{"p-xs":u&&c===xr.SOURCES}),children:i.jsx(vu,{items:t,disableScrollArea:!0})})]}),[v,t,u,c,x,m]);return s?i.jsxs(i.Fragment,{children:[i.jsx(Xt,{title:h,titleTextVariant:"baseSemi",variant:"bottom-left-sheet",actionList:le,isOpen:a,onClose:y,noPadding:!0,children:i.jsx(vu,{textColor:"light",items:t})}),i.jsx("span",{onClick:g,children:e})]}):i.jsx(lo,{isFileSearchEnabled:!0,isOpen:a,placement:n,onClose:y,onOpen:g,avoidSizeCollisions:!1,contentClassName:u&&c===xr.SOURCES?"!p-0":"",content:b,hasInteractiveContent:!0,children:e})});D3.displayName="FocusDropdown";const V1e=A.memo(({isOpen:e,onOpen:t,onClose:n})=>{const r="recency-switcher",{$t:s}=Q(),a=Q(),{isMobileStyle:o}=ye(),l=xi(),{trackEvent:c}=Me(),{sources:u,recency:d,setRecency:m}=Hn(),p=Array.isArray(l?.slug)?l.slug[0]:l?.slug,{collection:h}=kl({collectionSlug:p,reason:r}),g=h?.focused_web_config?.link_configs??le,y=u&&u.includes("web"),v=u&&g.length>0,x=!y&&!v,_=u&&u.includes("crunchbase")?!0:x,w=f.useCallback(E=>{m(E),c("search recency click",{recency:E}),n()},[c,m,n]),C=f.useMemo(()=>[{value:null,label:s({defaultMessage:"All Time",id:"52UMW3b1Z0"})},{value:"DAY",label:s({defaultMessage:"Today",id:"zWgbGgjUUg"})},{value:"WEEK",label:s({defaultMessage:"Last Week",id:"P3YB9A5Yho"})},{value:"MONTH",label:s({defaultMessage:"Last Month",id:"cfMkrE1iIn"})},{value:"YEAR",label:s({defaultMessage:"Last Year",id:"7PhUtcTRXC"})}],[s]),S=f.useMemo(()=>C.map(E=>({type:"default",text:E.label,active:d===E.value,onClick:()=>w(E.value)})),[C,d,w]);return i.jsx(D3,{focusItems:S,placement:"bottom-start",width:"200px",isMobileStyle:o,isOpen:e,onOpen:t,onClose:n,menuType:xr.RECENCY,children:i.jsx(Te,{toolTip:a.formatMessage({defaultMessage:"Set recency for web search",id:"3/OG+oV8gT"}),size:"small",icon:zR,disabled:_})})});V1e.displayName="RecencySwitcher";const nbt=(e,t)=>{const{value:n,loading:r}=At({flag:"search-model-reasoning-toggle",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function iF(){const{variation:e,loading:t}=nbt(!1);return f.useMemo(()=>({isSearchModelReasoningToggleEnabled:e,isSearchModelReasoningToggleEnabledLoading:t}),[e,t])}const rbt=K({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),sbt=K({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"});function W1e({reason:e,selectedSearchMode:t,currentModel:n,onModelSelect:r,isRewrite:s}){const{$t:a}=Q(),{organization:o}=gn({reason:e}),l=co(),c=Ls(),u=o?.settings?.disabled_model_preferences??le,{isMax:d}=yt(),{isMaxUpsellEnabled:m}=Nc(),{specialCapabilities:p}=Or(),h=f.useRef(null),{value:g}=Tc({flag:"model-outage-on-model-selector-ui",subjectType:"user_nextauth_id",defaultValue:{[ce.SONAR]:!1,[ce.CLAUDE_2]:!1,[ce.GPT_4_1]:!1,[ce.GEMINI_2_FLASH]:!1,[ce.GROK]:!1,[ce.O4_MINI]:!1,[ce.CLAUDE_3_7_SONNET_THINKING]:!1}}),y="left",v=0,x=f.useCallback(w=>{![ce.PRO,ce.ALPHA,ce.BETA].includes(w)&&n!==void 0&&t===oe.SEARCH&&(h.current=w),r(w)},[r,t,n]),{menuItems:b,selectOptions:_}=f.useMemo(()=>{const w=c?"description":"tooltipText";function C(T,j){const R=[],O=[];return T.filter(P=>!j?.includes(P.search_model)).forEach(P=>{if(u.includes(P.search_model))return;const N=!!(g&&g[P.search_model]);let I,D="super";P.subscription_tier===Mn.MAX?(I=a({defaultMessage:"max",id:"+LmzMnWE+j"}),D="maxBorder"):P.has_new_tag&&(I=a({defaultMessage:"new",id:"qlTe+eC7Ec"}),D="superBorder");const F={active:n===P.search_model,[w]:a(bo[P.search_model]?.description),tooltipLayout:y,tooltipDelayDuration:v,bottomElement:N&&i.jsx(L,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"red",children:a({defaultMessage:"Temporary degraded performance",id:"Kc/pdbXoxJ"})}),onClick(){if(m&&!d&&(t===oe.STUDIO||t===oe.RESEARCH||t===oe.SEARCH&&P.subscription_tier===Mn.MAX&&!p.maxModelSelection)){l({origin:s?Ie.RETRY_BUTTON:Ie.MODEL_SELECTOR,pitchMessage:{title:a(rbt,{searchMode:a(Br[t].name)}),description:a(sbt)}});return}x(P.search_model)},size:"tiny",type:"default",text:a(bo[P.search_model].name),badge:I,badgeVariant:D},B={value:P.search_model,label:a(bo[P.search_model].name)},V=m&&!d&&P.subscription_tier===Mn.MAX;R.push(F),V||O.push(B)}),{menuItems:R,selectOptions:O}}const S=[],E=[],M=abt(),k=M.filter(T=>!u.includes(T.search_model))[0]?.search_model||ce.SONAR;if(t===oe.SEARCH){const T={selected:n===ce.PRO,[w]:a({defaultMessage:"Selects the best model for each query",id:"TFsbkdJ4zc"}),onClick(){if(n===ce.PRO){const O=h.current;x(O||k)}else x(ce.PRO)},size:"tiny",text:a(bo[ce.PRO].name),type:"toggle",tooltipLayout:y,tooltipDelayDuration:v},j={value:ce.PRO,label:a(bo[ce.PRO].name)};if(!s)S.push(T,{type:"separator",show:!0}),E.push(j);else{const O={active:n===ce.ALPHA,[w]:a({defaultMessage:"In-depth reports on complex topics",id:"j7wjX6Ljpq"}),onClick(){x(ce.ALPHA)},size:"tiny",text:a({defaultMessage:"Research",id:"JEe7dVso7F"}),type:"default",tooltipLayout:y,tooltipDelayDuration:v},P={value:ce.ALPHA,label:a(bo[ce.ALPHA].name)};S.push(O),E.push(P);const N={active:n===ce.BETA,[w]:a({defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}),onClick(){x(ce.BETA)},size:"tiny",text:a({defaultMessage:"Labs",id:"ylFNoY79wa"}),type:"default",tooltipLayout:y,tooltipDelayDuration:v},I={value:ce.BETA,label:a(bo[ce.BETA].name)};S.push(N,{type:"separator",show:!0}),E.push(I)}const R=C(M,!p.maxModelSelection&&!m?M.filter(O=>O.subscription_tier===Mn.MAX).map(O=>O.search_model):void 0);S.push(...R.menuItems),E.push(...R.selectOptions)}return{menuItems:S,selectOptions:E}},[u,a,t,n,g,d,m,l,x,s,c,p.maxModelSelection]);return f.useMemo(()=>({menuItems:b,selectOptions:_}),[b,_])}const abt=()=>[...Koe],u9=[{search_model:ce.SONAR,reasoning_model:ce.SONAR,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.CLAUDE_2,reasoning_model:ce.CLAUDE_3_7_SONNET_THINKING,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.GPT_5,reasoning_model:ce.GPT_5_THINKING,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.O3,reasoning_model:ce.O3,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.GEMINI_2_FLASH,reasoning_model:ce.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.GROK_4,reasoning_model:ce.GROK_4,has_new_tag:!1,subscription_tier:Mn.PRO},{search_model:ce.CLAUDE_4_1_OPUS,reasoning_model:ce.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,subscription_tier:Mn.MAX},{search_model:ce.O3_PRO,reasoning_model:ce.O3_PRO,has_new_tag:!1,subscription_tier:Mn.MAX}],$1e=u9.reduce((e,t)=>(e[t.search_model]=t,e[t.reasoning_model]=t,e),{});function d9(e){return e in $1e}const n_=e=>d9(e)?$1e[e]:{search_model:e,reasoning_model:e,has_new_tag:!1,subscription_tier:Mn.PRO},r_=dt({best:{defaultMessage:"Best",id:"PzlMqGwwkm"},reasoning:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},max:{defaultMessage:"max",id:"+LmzMnWE+j"},new:{defaultMessage:"new",id:"qlTe+eC7Ec"}}),obt=K({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),ibt=K({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"}),bm=ce.PRO,H1e=({currentModel:e,onModelSelect:t,origin:n,searchMode:r=oe.SEARCH})=>{const s="use-model-menu-items-with-reasoning",{$t:a}=Q(),{isMax:o}=yt(),{organization:l}=gn({reason:s}),{isMaxUpsellEnabled:c}=Nc(),{specialCapabilities:u}=Or(),d=co(),m=f.useRef(null),[p,h]=f.useState(()=>{const{reasoning_model:S}=n_(e);return d9(e)&&e===S}),g=u.maxModelSelection||c,y=l?.settings?.disabled_model_preferences??le,v=f.useCallback(S=>c&&!o&&S.subscription_tier===Mn.MAX&&!u.maxModelSelection,[c,o,u.maxModelSelection]),x=f.useCallback(()=>{d({origin:n??Ie.MODEL_SELECTOR,pitchMessage:{title:a(obt,{searchMode:a(Br[r].name)}),description:a(ibt)}})},[d,a,n,r]),b=f.useCallback((S,E=null)=>{const{search_model:M,reasoning_model:k}=n_(S),T=y.includes(M),j=y.includes(k);if(T&&j){vN.error("Both search and reasoning models are disabled");return}const O=E??p?j?M:k:T?k:M;m.current=O,t(O)},[t,p,y]),_=f.useCallback(()=>{const S=u9.at(0)?.search_model??ce.SONAR;t(e===bm?m.current||S:bm)},[e,t]),w=f.useCallback(()=>{const S=!p;h(S),n!==Ie.RETRY_BUTTON&&b(e,S)},[n,e,b,p]),C=f.useMemo(()=>{const{search_model:S}=n_(e),E=P=>{if(P.subscription_tier===Mn.MAX)return{badge:a(r_.max),badgeVariant:"maxBorder"};if(P.has_new_tag)return{badge:a(r_.new),badgeVariant:"superBorder"}},M={selected:e===bm,onClick:_,size:"tiny",text:a(r_.best),type:n===Ie.RETRY_BUTTON?"default":"toggle"},k=e===bm,T={selected:!k&&p,type:"toggle",text:a(r_.reasoning),size:"tiny",disabled:k,onClick:w},j={type:"separator",show:!0},O=u9.filter(P=>!(!g&&P.subscription_tier===Mn.MAX||y.includes(P.search_model)&&y.includes(P.reasoning_model))).map(P=>({type:"default",active:S===P.search_model,text:a(bo[P.search_model].name),value:P.search_model,onClick:()=>{if(v(P)){x();return}b(P.search_model)},...E(P)}));if(!d9(e)&&e!==bm){const P=n_(e);O.push({type:"default",active:S===P.search_model,text:a(bo[P.search_model].name),value:P.search_model,onClick:()=>b(P.search_model),...E(P)})}return n===Ie.RETRY_BUTTON?[T,j,M,...O]:[M,T,j,...O]},[a,n,e,g,p,y,v,x,b,w,_]);return f.useMemo(()=>({menuItems:C}),[C])},lbt=dt({chooseModel:{defaultMessage:"Choose a model",id:"fXlc3idTcy"}}),z1e=f.memo(({isOpen:e,onOpen:t,onClose:n,selectedModel:r,onModelChange:s})=>{const{$t:a}=Q(),{isMax:o}=yt(),{onActiveMenuChange:l}=jo(),{activeMenu:c}=ws(),u=Pa(),{configuredModel:d}=Hn(),m=ex(),{isMobileStyle:p}=ye(),h=u===oe.SEARCH,g=f.useCallback(j=>{m(j,u)},[m,u]),y=f.useCallback(()=>{l(xr.SEARCH_MODEL_SELECTOR)},[l]),v=f.useCallback(()=>{l(null)},[l]),x=r??d,b=s??g,_=e??c===xr.SEARCH_MODEL_SELECTOR,w=t??y,C=n??v,E=!!Dt()?.get("openSearchModeSelector");f.useEffect(()=>{E&&y()},[E,y]);const{menuItems:M}=H1e({currentModel:x,onModelSelect:b,searchMode:u}),k=x===bm,T=f.useMemo(()=>({className:U("max-h-[40vh]",{"max-super-override":o})}),[o]);return i.jsx(it,{initial:!1,mode:"popLayout",children:h&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:i.jsx(Jt,{placement:"bottom-end",boxProps:T,items:M,isMobileStyle:p,isOpen:_,onOpen:w,onClose:C,children:i.jsx(Te,{extraCSS:"max-w-24 sm:max-w-none",icon:GR,size:"small",textClassName:"text-[0.8125rem]",toolTip:a(k?lbt.chooseModel:bo[x].name),variant:k?"common":"super"})})},"search-model-selector")})});z1e.displayName="SearchModelSelectorWithReasoning";const cbt=({selectedModel:e,onModelChange:t}={})=>{const n="search-model-selector",{isMobileStyle:r}=ye(),{$t:s}=Q(),{onActiveMenuChange:a}=jo(),{activeMenu:o}=ws(),l=Pa(),{configuredModel:c}=Hn(),u=ex();iF();const d=e||c,{isMax:m}=yt(),p=l===oe.SEARCH,h=[ce.DEFAULT,ce.PRO,ce.ALPHA,ce.BETA].includes(d),y=!!Dt()?.get("openSearchModeSelector");f.useEffect(()=>{y&&a(xr.SEARCH_MODEL_SELECTOR)},[y,a]);const v=f.useCallback(C=>{u(C,l)},[u,l]),{menuItems:x}=W1e({reason:n,selectedSearchMode:l,currentModel:d,onModelSelect:t||v}),b=f.useCallback(()=>{a(xr.SEARCH_MODEL_SELECTOR)},[a]),_=f.useCallback(()=>{a(null)},[a]),w=f.useMemo(()=>({className:U("max-h-[40vh]",{"max-super-override":m})}),[m]);return i.jsx(it,{initial:!1,mode:"popLayout",children:p&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:i.jsx(Jt,{placement:"bottom-end",boxProps:w,items:x,isMobileStyle:r,isOpen:o===xr.SEARCH_MODEL_SELECTOR,onOpen:b,onClose:_,children:i.jsx(Te,{extraCSS:"max-w-24 sm:max-w-none",icon:GR,size:"small",textClassName:"text-[0.8125rem]",toolTip:s(h?{defaultMessage:"Choose a model",id:"fXlc3idTcy"}:bo[d].name),variant:h?"common":"super"})})},"search-model-selector")})},G1e=A.memo(({selectedModel:e,onModelChange:t})=>{const{isSearchModelReasoningToggleEnabled:n}=iF();return n?i.jsx(z1e,{selectedModel:e,onModelChange:t}):i.jsx(cbt,{selectedModel:e,onModelChange:t})});G1e.displayName="SearchModelSelector";const q1e=A.memo(()=>{const{isMaxAssistantMode:e,actions:t}=dn(),n=wMe(),[r,s]=f.useState(!n),a=f.useRef(null),o=f.useRef(null),l=f.useCallback(()=>{t.setIsMaxAssistantModeEnabled(!e)},[t,e]),c=f.useCallback(()=>{s(!r)},[r]);f.useEffect(()=>{r&&CMe()},[r]),f.useEffect(()=>{const d=m=>{r&&o.current&&!o.current.contains(m.target)&&a.current&&!a.current.contains(m.target)&&s(!1)};return r&&document.addEventListener("mousedown",d,!0),()=>{document.removeEventListener("mousedown",d,!0)}},[r]);const u=f.useMemo(()=>i.jsxs("div",{"data-color-scheme":"dark",ref:o,className:U("bg-base absolute bottom-full left-1/2 z-50 mb-1 -translate-x-1/2 px-4 py-3","shadow-overlay w-72 rounded-lg"),children:[i.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(L,{color:"default",variant:"baseSemi",children:i.jsx(pe,{defaultMessage:"Enable Max Assistant",id:"148Ehuq5Qh"})}),i.jsx(cx,{className:"text-max h-3"})]}),i.jsx("div",{className:"flex items-center gap-6",children:i.jsx(Ao,{active:e??!1,onChange:l,size:"default"})})]}),i.jsx(L,{color:"default",variant:"small",className:"text-pretty",children:i.jsx(pe,{defaultMessage:"Thinks longer with deeper reasoning for complex workflows and questions.",id:"UOpEyLDsXA"})})]}),[e,l]);return i.jsxs("div",{className:"relative",ref:a,children:[i.jsx(Te,{size:Wt.small,variant:"common",icon:du,onClick:c}),r&&u]})});q1e.displayName="SidecarMoreMenuButton";const K1e=A.memo(({handleFileInput:e})=>{const{$t:t}=Q(),{sidecarSourceTab:{url:n}}=Fs(),r=wr();f.useEffect(()=>r.subscribeScreenshotCaptured(a=>{e?.([a],"local",l7)}),[r,e]);const s=f.useCallback(async()=>{r.captureSourceTabScreenshotV2({sourceTabUrl:n})},[r,n]);return i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Te,{onClick:s,size:Wt.small,variant:"common",toolTip:t({defaultMessage:"Screenshot",id:"9a+SKtXKhe"}),icon:K4e})})});K1e.displayName="SidecarScreenshotButton";const ubt=({serverName:e,iconUrl:t,size:n="md",border:r=!1})=>t?i.jsx("img",{src:t,alt:e,className:U("object-contain",n==="sm"&&"size-5",n==="md"&&"p-xs size-11",n==="lg"&&"p-sm size-14",n==="xl"&&"p-xs size-12",r&&"ring-subtlest rounded-md ring-1")}):i.jsxs("span",{className:U("flex flex-col items-center justify-center font-medium leading-none",n==="sm"&&"size-5 text-xs",n==="md"&&"p-xs size-11 text-sm",n==="lg"&&"p-sm size-14 text-sm",n==="xl"&&"p-xs size-12 text-sm",r&&"border-subtlest bg-subtler rounded-lg border"),children:[i.jsx("span",{children:e.slice(0,2).toUpperCase()}),i.jsx("span",{className:"font-mono text-[6px]",children:"MCP"})]}),dbt=()=>typeof window<"u"&&window.location?.origin?window.location.origin:"https://www.perplexity.ai",GX=e=>{const t=dbt();return zue(`${t}${e}`)?.href||`${t}${e}`},fbt=()=>[{id:"imessage",icon_url:GX("/static/mcpb/imessage.png"),download_url:GX("/static/mcpb/imessage_v0.0.8.mcpb"),manifest:{$schema:"https://static.modelcontextprotocol.io/schemas/2025-08-26/mcpb.manifest.schema.json",dxt_version:"0.1",name:"imessage",display_name:"iMessage",version:"0.0.8",description:"Send and read messages using Apple's Messages app",long_description:`This tool lets Perplexity work with your Mac's Messages app. You can send messages, read messages, and ask Perplexity to help you understand what's important.

It uses Mac system features to connect to Messages. Your Mac will ask for permission before it can access Messages or Contacts. This is not made by Apple.`,license:"MIT",author:{name:"Perplexity Inc",email:"support@perplexity.ai",url:"https://www.perplexity.ai/"},homepage:"https://www.perplexity.ai/",icon:"icon.png",tools:[{name:"list_contacts",description:'List contacts. When query is provided, search for contacts by name. Use it first to get a handle id, phone numbers, or emails. This tool is more preferred to be used first than "list_chats" tool. If this tool returns empty results, try to use "list_chats" tool to find a contact.'},{name:"list_chats",description:"List chats from iMessage. When query is provided, search for chats by phone number (preferrable) or chat name (if phone number is not available)."},{name:"create_chat",description:"Create a new chat with a specific contact"},{name:"read_chat",description:"Read iMessages from a specific chat"},{name:"send_imessage",description:"Send an iMessage to specific chat"}],server:{type:"node",entry_point:"server/index.js",mcp_config:{command:"node",args:["${__dirname}/server/index.js"],env:{HOME:"${HOME}"}}},compatibility:{comet:">=139.0.0",platforms:["darwin"],runtimes:{node:">=22.0.0"}}}}],mbt=()=>{const e=Fs(),t=f.useMemo(()=>{if(!e.platformInfo)return;const{isMac:n,isWindows:r,isLinux:s}=e.platformInfo;if(n)return"darwin";if(r)return"win32";if(s)return"linux"},[e.platformInfo]);return $e({queryKey:["comet/available_dxts",t],queryFn:async()=>fbt().filter(n=>n.manifest.compatibility?.platforms?t&&n.manifest.compatibility.platforms.includes(t):!0)})},pbt=(e,t)=>t.dxt_name?e?.find(n=>n.id===t.dxt_name)?.icon_url:void 0,lF=()=>{const{$t:e}=Q(),t=Fs(),{data:n}=mbt(),r=f.useCallback((o,l)=>o.status!=="running"||!o.tools_count?e({defaultMessage:"Server is not running",id:"uHAMkeMTHv"}):l===o.tools_count?e({defaultMessage:"{total} tools available",id:"uPrPRhtLz8"},{total:o.tools_count}):e({defaultMessage:"{enabled} of {total} tools available",id:"KLHoDUDmUH"},{enabled:l,total:o.tools_count}),[e]),s=f.useMemo(()=>Object.fromEntries(t.mcpStdioServers?.map(o=>{const l=wze(t.installedDxts,o),c=pbt(n,o),u=l?.display_name??l?.name??o.name,d=t.mcpTools?.[o.name]??[],m=t.mcpToolsSettings?.[o.name]??{},p=d.filter(h=>{const g=h.tool?.name??h.id??"",y=m[g];return y?y.enabled!==!1:!0});return[o.name,{icon:void 0,avatar:i.jsx(ubt,{serverName:u,iconUrl:c,size:"sm"}),text:u,disabled:o.status!=="running"||!o.tools_count,description:r(o,p.length),type:"toggle"}]})??[]),[t.mcpStdioServers,t.mcpTools,t.mcpToolsSettings,t.installedDxts,n,r]),a=f.useCallback(o=>{const l=t.mcpDisabledServers??new Set,c=new Set(l);l.has(o)?c.delete(o):c.add(o),t.actions.setMcpDisabledServers(c)},[t.actions,t.mcpDisabledServers]);return f.useMemo(()=>({cometMcpSources:s,toggleCometMcpSource:a,cometMcpDisabledServers:t.mcpDisabledServers}),[s,a,t.mcpDisabledServers])},hbt=async({connectionType:e,reason:t,referrer:n,referrerId:r})=>{try{const s={connection_type:e};n&&(s.referrer=n),r&&(s.referrer_id=r);const{data:a,error:o}=await ne.GET("/rest/connections/connect",t,{params:{query:s},timeoutMs:Pe()});if(o)throw new Error(`Failed to get ${e} connection url`,{cause:o});return a}catch(s){throw ee.error(`Error fetching ${e} connection url:`,s),s}},gbt=async({connectionType:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/connections/oauth_callback_merge",t,{params:{query:{connection_type:e}},timeoutMs:Pe()});if(r)throw new Error(`Failed to handle OAuth callback for ${e}`,{cause:r});return n}catch(n){throw ee.error(`Error handling OAuth callback for ${e}:`,n),n}},Y1e=f.createContext(null),ybt=()=>{const e=f.useContext(Y1e);if(!e)throw new Error("useMergeAgentHandler must be used within a MergeAgentHandlerProvider");return e},vbt=({children:e})=>{const t=mt(),[n,r]=f.useState(null),s=f.useCallback(async()=>{const{connectionType:m,onError:p,onSuccess:h}=n??{};if(!m){const g=new Error("Connection type is not defined for OAuth callback");vN.error("Connection type is not defined for OAuth callback"),p?.(g);return}try{await gbt({reason:"merge_oauth_success",connectionType:m}),t.invalidateQueries({queryKey:HS()}),h?.()}catch(g){vN.error("Failed to handle OAuth callback:",g),p?.(g)}finally{r(null)}},[n,t]),a=f.useCallback(()=>{const{onExit:m}=n??{};r(null),m?.()},[n]),{open:o,isReady:l}=Sue({linkToken:n?.token||"",onSuccess:s,onExit:a});f.useEffect(()=>{l&&n?.token&&o()},[l,n?.token,o]);const c=f.useCallback(m=>{r(m)},[]),u=f.useCallback(()=>{r(null)},[]),d=f.useMemo(()=>({startMergeAuth:c,clearActiveAuth:u}),[c,u]);return i.jsx(Y1e.Provider,{value:d,children:e})},xbt=({reason:e})=>{const{trackEvent:t}=Me(),{openToast:n}=xn(),{$t:r}=Q(),s=Nt(),{startMergeAuth:a}=ybt(),{variation:o}=dO(!1),{handleConnect:l}=XS({reason:e}),c=f.useCallback(async(u,d)=>{const m=eQe(u);if(!m){ee.error("Connection type is not defined for OAuth callback");return}if(tQe(m)){try{const{redirect_url:p,token:h}=await hbt({connectionType:m,reason:e,referrer:d?.referrer,referrerId:d?.referrerId});if(p)dl(p,"Enabling connector");else if(h)a({token:h,connectionType:m,connectorName:u});else throw new Error("No redirect URL or token received")}catch{n(r({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3)}return}if(m==="GCAL"){await l({connectorName:u,redirectPath:o?`/assistant?oauth_complete=true&advance_step=true&redirect_path=${s}`:s||void 0,unauthedRedirectPath:s||void 0});return}await l({connectorName:u}),t("attempt connector authentication",{connectorName:u})},[r,s,e,l,n,t,o,a]);return f.useMemo(()=>({enableConnection:c}),[c])},Pi=(e,t,n)=>{const r=ri(e),s=$s(e),a={avatar:r?i.jsx(Rt,{user:r,size:"small",rounded:!1,showBackground:!1,altText:s}):void 0,text:s};if(t)return{...a,icon:void 0,type:"toggle"};const l=DXe(e)?()=>n.openModal(e):()=>n.enableConnection(e);return{...a,icon:void 0,type:"default",rightElement:i.jsx(L,{color:"light",children:i.jsx(me,{icon:no,size:"sm"})}),onClick:l}},bbt=({reason:e})=>{const t=Q(),n=_t(),{hasAccessToProFeatures:r}=yt(),{openModal:s,closeModal:a}=vt(),{isEnterprise:o,organization:l}=gn({reason:e}),c=UP({reason:e,feature:ru.SOURCES}),{enableConnection:u}=xbt({reason:e}),d=rn(),{enabledConnectors:m,enabledFileConnectors:p}=g1({reason:e}),h=kc(),{isAllowed:g,isConnected:y}=hme({reason:e}),{referrer:v,referrerId:x}=TP({mode:"file"}),[b,_]=f.useState(!1),w=f.useCallback(()=>{_(!0)},[]),C=f.useCallback(()=>{_(!1)},[]),S=f.useCallback(H=>{const Z=ri(H);s("connectorsEnableModal",{connectorName:H,connectorAvatar:Z,handleEnable:()=>{u(H,{referrer:v??void 0,referrerId:x??void 0}),a()}})},[s,a,u,v,x]),E=f.useMemo(()=>({enableConnection:u,openModal:S}),[u,S]),{value:M}=jr({flag:"gcal-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:l?.uuid??""}}),{value:k}=jr({flag:"enable-remote-mcp-tools",defaultValue:!1,extraAttributes:{orgUuid:l?.uuid??""}}),T=k&&r,j=M&&!d,{value:R}=jr({flag:"outlook-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:l?.uuid??""}}),O=f.useCallback(H=>{H.stopPropagation(),n.push(`${h}/files`)},[n,h]),P=f.useMemo(()=>i.jsx("div",{className:"mr-sm flex",children:i.jsx(pn,{tooltipText:t.formatMessage({defaultMessage:"Manage my files",id:"o8eQg7byBv"}),children:i.jsx(L,{color:"light",onClick:O,children:i.jsx(me,{icon:UR,size:"sm"})})})}),[t,O]),{cometMcpSources:N,toggleCometMcpSource:I}=lF(),D=f.useMemo(()=>Object.fromEntries(Object.entries(N)?.map(([H,Z])=>[`comet_mcp_${H}`,{...Z,onClick:()=>{I(H)}}])),[N,I]),F=f.useMemo(()=>{const H=T&&g("linear_alt")?{linear_alt:Pi("linear_alt",y("linear_alt"),E)}:{},Z=g("google_drive")&&c?{google_drive:Pi("google_drive",y("google_drive"),E)}:{},re=T&&g("slack")?{slack:Pi("slack",y("slack"),E)}:{},q=j&&g("gcal")?{gcal:Pi("gcal",y("gcal"),E)}:{},J=T&&g("notion_mcp")?{notion_mcp:Pi("notion_mcp",y("notion_mcp"),E)}:{},te=T&&g("github_mcp_direct")?{github_mcp_direct:Pi("github_mcp_direct",y("github_mcp_direct"),E)}:{},se=T&&g("asana_mcp_direct")?{asana_mcp_direct:Pi("asana_mcp_direct",y("asana_mcp_direct"),E)}:{},de=T&&g("asana_mcp_merge")?{asana_mcp_merge:Pi("asana_mcp_merge",y("asana_mcp_merge"),E)}:{},fe=T&&g("atlassian_mcp_direct")?{atlassian_mcp_direct:Pi("atlassian_mcp_direct",y("atlassian_mcp_direct"),E)}:{},ve=T&&g("slack_direct")?{slack_direct:Pi("slack_direct",y("slack_direct"),E)}:{};return{...H,...J,...te,...re,...q,...Z,...se,...de,...fe,...ve,...D,...m?.some(ie=>ie.name==="crunchbase")?{crunchbase:{icon:void 0,avatar:i.jsx(Rt,{user:bS,rounded:!1,showBackground:!1,size:"small",altText:"Crunchbase"}),text:_S,type:"toggle"}}:{},...m?.some(ie=>ie.name==="factset")?{factset:{icon:void 0,avatar:i.jsx(Rt,{user:vS,rounded:!1,showBackground:!1,size:"small",altText:"FactSet"}),text:xS,type:"toggle"}}:{},...m?.some(ie=>ie.connection_type==="ONEDRIVE")&&c?{onedrive:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.ONEDRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:hu}),text:hu,type:"toggle"}}:{},...m?.some(ie=>ie.connection_type==="SHAREPOINT")&&c?{sharepoint:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.SHAREPOINT)||"",rounded:!1,showBackground:!1,size:"small",altText:gu}),text:gu,type:"toggle"}}:{},...m?.some(ie=>ie.connection_type==="WILEY")&&o?{wiley:{icon:void 0,avatar:i.jsx(Rt,{user:u1,rounded:!1,showBackground:!1,size:"small",altText:"Wiley"}),text:wS,type:"toggle"}}:{},...m?.some(ie=>ie.connection_type==="DROPBOX")&&c?{dropbox:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.DROPBOX)||"",rounded:!1,showBackground:!1,size:"small",altText:pc}),text:pc,type:"toggle"}}:{},...m?.some(ie=>ie.connection_type==="OUTLOOK")&&R?{outlook:{icon:void 0,avatar:i.jsx(Rt,{user:Ha(Tt.OUTLOOK)||"",rounded:!1,showBackground:!1,size:"small",altText:wp}),text:wp,type:"toggle"}}:{}}},[m,o,c,j,R,T,g,y,D,E]),{selectedConnectors:B,excessToggleConnectors:V}=f.useMemo(()=>{const H=Object.entries(F);if(H.length===0)return{selectedConnectors:[],excessToggleConnectors:[]};const Z=H.filter(([,te])=>te.type==="toggle"),re=H.filter(([,te])=>te.type==="default"),q=[...Z.slice(0,3),...re].slice(0,3),J=Z.slice(3);return{selectedConnectors:q,excessToggleConnectors:J}},[F]),$=f.useMemo(()=>{if(V.length===0)return null;const H=V.map(([,Z])=>Z.avatar).filter(Boolean);return H.length===0?null:rf(H,{maxVisuals:5,size:"sm",stackDirection:"right",shape:"square",overlappingClassName:"bg-transparent ring-transparent",containerClass:"flex items-center h-5",innerClassName:"flex items-center gap-1",showRemainderCount:!1})},[V]),G=f.useMemo(()=>({type:"default",icon:VC,text:t.formatMessage({defaultMessage:"Browse all connectors",id:"vyHg7PluiB"}),rightElement:i.jsx(L,{color:"light",children:i.jsx(me,{icon:no,size:"sm"})}),onClick:()=>n.push(`${h}/connectors`)}),[t,n,h]),X=f.useMemo(()=>{if(B.length===0)return null;const H=Object.fromEntries(B);return V.length===0?H.browse_all_connectors=G:H.more_connectors={type:"nested",text:t.formatMessage({defaultMessage:"More connectors",id:"3l4CuVEyHY"}),submenuItems:[...V,{type:"separator",show:!0},G],isSubmenuOpen:b,onSubmenuOpen:w,onSubmenuClose:C,textTrailingElement:$,menuWidth:"300px"},{groupId:"connectors",sources:H}},[B,V,G,t,b,w,C,$]),Y=f.useMemo(()=>{const H=p.map(J=>{const te=J.name,se=ri(te)??"";return i.jsx(Rt,{user:se,rounded:!1,showBackground:!1,size:"small"},te)});let Z=null;H.length>0&&(Z=rf(H,{...H.length<=3&&{rightText:i.jsx(L,{color:"light",variant:"tinyRegular",children:t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})})},maxVisuals:H.length,size:"sm"}));const re=[],q={web:{icon:kf,avatar:void 0,text:t.formatMessage({defaultMessage:"Web",id:"B6CB3748fZ"}),description:t.formatMessage({defaultMessage:"Search across the entire Internet",id:"L+Gw+J7uDs"}),type:"toggle"},scholar:{icon:C0,avatar:void 0,text:t.formatMessage({defaultMessage:"Academic",id:"mbxIJyT8C5"}),description:t.formatMessage({defaultMessage:"Search academic papers",id:"IVRQQmrqTD"}),type:"toggle"},...o?{}:{social:{icon:$R,avatar:void 0,text:t.formatMessage({defaultMessage:"Social",id:"qOLogguG/7"}),description:t.formatMessage({defaultMessage:"Discussions and opinions",id:"g9xPuArp4v"}),type:"toggle"}},edgar:{icon:WR,avatar:void 0,text:d7,description:"Search SEC filings",type:"toggle"},...o?{org:{icon:VR,avatar:void 0,text:t.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),description:t.formatMessage({defaultMessage:"Search files from your organization",id:"Ak5CW53mGi"}),type:"toggle"}}:{},...c&&o?{my_files:{icon:BR,avatar:void 0,text:t.formatMessage({defaultMessage:"My files",id:"bYbrKKlKgS"}),description:p.length===0?t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"}):"",bottomElement:Z??void 0,rightElement:P,type:"toggle"}}:{}};return Object.keys(q).length>0&&re.push({groupId:"core",sources:q}),X&&re.push(X),re},[p,t,o,c,P,X]),W=f.useMemo(()=>{const H={};return Y.forEach(Z=>{Object.entries(Z.sources).forEach(([re,q])=>{q.type==="toggle"&&(H[re]=q)})}),H},[Y]);return f.useMemo(()=>({RootSources:W,RootSourceGroups:Y,ConnectionSources:F}),[F,W,Y])},Q1e=f.memo(({children:e})=>i.jsx("div",{className:"flex size-5 items-center justify-center",children:e}));Q1e.displayName="IconWrapper";const X1e=f.memo(({isOpen:e,onOpen:t,onClose:n,defaultSource:r,selectedSources:s,onSourcesChange:a,variant:o="icon",hiddenSources:l,buttonVariant:c="default",useThreadSources:u=!1})=>{const d="sources-switcher",{$t:m}=Q(),{isMobileStyle:p}=ye(),{trackEvent:h}=Me(),{fileRepoInfo:g}=Do({reason:d}),y=g?.file_repository_type==="COLLECTION",{RootSources:v,RootSourceGroups:x,ConnectionSources:b}=bbt({reason:d}),{updateSources:_}=R1({defaultSource:r,reason:d}),{sources:w}=Hn(),{firstResult:C}=Ht(),{cometMcpSources:S,cometMcpDisabledServers:E}=lF(),M=C?.sources?.sources??le,k=f.useMemo(()=>s??(u?M:w),[s,u,M,w]),T=a??_,j=f.useCallback(V=>V.preventDefault(),[]),R=f.useCallback(V=>{V.preventDefault(),V.stopPropagation()},[]),O=f.useCallback(V=>{h("search source click",{source:V}),T(V)},[h,T]),P=f.useMemo(()=>[...k,...Object.keys(S).filter(V=>!E?.has(V)).map(V=>`comet_mcp_${V}`)],[k,S,E]),N=f.useCallback((V,$)=>{const G=P?.includes(V);return{type:$.type,text:$.text,description:$.description,size:"small",selected:G,icon:$.icon,avatar:$.avatar,link:$.link,onMouseDown:R,onClick:()=>$.onClick?$.onClick():O(V),onLinkClick:$.onLinkClick,bottomElement:$.bottomElement,rightElement:$.rightElement,testId:`source-toggle-${V}`,submenu:$.submenuItems?.map(X=>{if(Array.isArray(X)&&X.length===2){const[Y,W]=X;return N(Y,W)}return X}),isSubmenuOpen:$.isSubmenuOpen,onSubmenuOpen:$.onSubmenuOpen,onSubmenuClose:$.onSubmenuClose,textTrailingElement:$.textTrailingElement,menuWidth:$.menuWidth}},[P,R,O]),I=f.useMemo(()=>{const V={type:"separator",show:!0};return x.map(X=>Object.entries(X.sources).filter(([Y])=>!l?.includes(Y)).map(([Y,W])=>N(Y,W))).flatMap((X,Y)=>Y===0?X:[V,...X])},[x,l,N]),D=f.useMemo(()=>{if(!P?.length)return i.jsx(me,{icon:Gd,size:"sm"});const V=[];return P.forEach($=>{let G;if($ in v?G=v[$]:$ in b&&(G=b[$]),G){const X=G,Y=X.avatar||i.jsx(Q1e,{children:X.icon?i.jsx(me,{icon:X.icon,size:"sm"}):i.jsx(me,{icon:Gd,size:"sm"})});V.push(Y)}}),rf(V,{isOverlapping:!0,maxVisuals:Z1e,size:"md",stackDirection:"right"})},[P,v,b]),F=f.useMemo(()=>{if(P?.length===1){const V=P[0]??"";return V in v?v[V]?.text:V in b?b[V]?.text:V}return m({defaultMessage:"{count} sources",id:"l1+6PggBqU"},{count:P?.length||0})},[P,v,b,m]),B=(()=>{switch(c){case"offsetPlus":return"bg-offsetPlus";case"default":return"!bg-subtler";default:$t(c)}})();return u&&(!P||P.length===0)?null:i.jsx(D3,{focusItems:I,placement:"bottom-end",width:"300px",isMobileStyle:p,isOpen:e,onOpen:u?void 0:t,onClose:n,menuType:xr.SOURCES,isSpace:y,children:o==="button"?i.jsx(ge,{text:F,extraCSS:U("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal",B),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Qn,onMouseDown:u?void 0:j,disabled:u,"data-testid":"sources-switcher-button"}):i.jsx(Te,{toolTip:m(u?{defaultMessage:"Start a new thread to change sources",id:"jKXi56aXv8"}:{defaultMessage:"Set sources for search",id:"yAyuRoLEjt"}),size:"small",onMouseDown:u?void 0:j,"data-testid":"sources-switcher-button",variant:u?"noHover":"common",extraCSS:U("px-[4px]",{"!aspect-auto":P&&P.length>1},{"!cursor-default [&:active]:!scale-100 [&:active]:!duration-0":u}),leadingComponent:D})})});X1e.displayName="SourcesSwitcherV2";const _bt=(e,t)=>{const{value:n,loading:r}=At({flag:"sources-switcher-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Z1e=5,J1e=A.memo(({children:e})=>i.jsx("div",{className:"flex size-5 items-center justify-center",children:e}));J1e.displayName="IconWrapper";const exe=A.memo(e=>{const t="sources-switcher",{$t:n}=Q(),{isOpen:r,onOpen:s,onClose:a,defaultSource:o,selectedSources:l,onSourcesChange:c,variant:u="icon",hiddenSources:d,buttonVariant:m="default",useThreadSources:p=!1}=e,{isMobileStyle:h}=ye(),{trackEvent:g}=Me(),{fileRepoInfo:y}=Do({reason:t}),v=y?.file_repository_type==="COLLECTION",{RootSources:x,ConnectionSources:b,NestedConnectionSources:_}=gme({reason:t}),{updateSources:w}=R1({defaultSource:o,reason:t}),{sources:C}=Hn(),{isEnterprise:S}=gn({reason:t}),{firstResult:E}=Ht(),M=E?.sources?.sources??le,k=f.useMemo(()=>l??(p?M:C),[l,p,M,C]),T=c??w,j=f.useCallback(H=>H.preventDefault(),[]),R=f.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),O=f.useCallback(H=>{g("search source click",{source:H}),T(H)},[g,T]),P=f.useCallback((H,Z)=>{const re=k?.includes(H);return{type:Z.type,text:Z.text,description:Z.description,size:"small",selected:re,icon:Z.icon,avatar:Z.avatar,link:Z.link,onMouseDown:R,onClick:()=>O(H),onLinkClick:Z.onLinkClick,bottomElement:Z.bottomElement,rightElement:Z.rightElement,testId:`source-toggle-${H}`}},[k,R,O]),{cometMcpSources:N,toggleCometMcpSource:I,cometMcpDisabledServers:D}=lF(),F=f.useCallback((H,Z)=>{const re=D?.has(H),q=()=>{I(H)};return{...P(H,Z),selected:!re,testId:`comet-mcp-toggle-${H}`,onClick:q}},[P,I,D]),B=f.useMemo(()=>[...k,...Object.keys(N).filter(H=>!D?.has(H))],[k,N,D]),V=f.useMemo(()=>{const H=Object.entries(x),Z=H.filter(([q])=>!d?.includes(q));return[...(d?.length?H.filter(([q])=>!d.includes(q)):Z).map(([q,J])=>P(q,J)),...Object.entries(N).map(([q,J])=>F(q,J))]},[x,P,d,N,F]),$=f.useMemo(()=>{const H=_.submenuItems.filter(Z=>{if(Array.isArray(Z)){const[re]=Z;return!d?.includes(re)}return!0}).map(Z=>{if(Array.isArray(Z)){const[re,q]=Z;return P(re,q)}return Z});return{..._,submenu:H}},[_,P,d]),G=f.useMemo(()=>[...V,...h||!S?[]:[{type:"separator"},$]].filter(Boolean),[S,V,$,h]),X=f.useMemo(()=>{if(!B?.length)return i.jsx(me,{icon:Gd,size:"sm"});const H=[];return B.forEach(Z=>{let re;if(Z in x?re=x[Z]:Z in b?re=b[Z]:Z in N&&(re=N[Z]),re){const q=re.avatar||i.jsx(J1e,{children:re.icon?i.jsx(me,{icon:re.icon,size:"sm"}):i.jsx(me,{icon:Gd,size:"sm"})});H.push(q)}}),rf(H,{isOverlapping:!0,maxVisuals:Z1e,size:"md",stackDirection:"right"})},[B,x,b,N]),Y=f.useMemo(()=>{if(B?.length===1){const H=B[0]??"";return H in x?x[H]?.text:H in b?b[H]?.text:H in N?N[H]?.text:H}return n({defaultMessage:"{count} sources",id:"l1+6PggBqU"},{count:B?.length||0})},[B,x,b,N,n]),W=(()=>{switch(m){case"offsetPlus":return"bg-offsetPlus";case"default":return"!bg-subtler";default:$t(m)}})();return p&&(!k||k.length===0)?null:i.jsx(D3,{focusItems:G,placement:"bottom-end",width:"300px",isMobileStyle:h,isOpen:r,onOpen:p?void 0:s,onClose:a,menuType:xr.SOURCES,isSpace:v,children:u==="button"?i.jsx(ge,{text:Y,extraCSS:U("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal",W),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Qn,onMouseDown:p?void 0:j,disabled:p,"data-testid":"sources-switcher-button"}):i.jsx(Te,{toolTip:p?void 0:n({defaultMessage:"Set sources for search",id:"yAyuRoLEjt"}),size:"small",onMouseDown:p?void 0:j,"data-testid":"sources-switcher-button",variant:p?"noHover":"common",extraCSS:U("px-[4px]",{"!aspect-auto":k&&k.length>1},{"!cursor-default [&:active]:!scale-100 [&:active]:!duration-0":p}),leadingComponent:X})})});exe.displayName="SourcesSwitcherV1";const cF=A.memo(e=>{const{variation:t}=_bt(!1);return t?i.jsx(vbt,{children:i.jsx(X1e,{...e})}):i.jsx(exe,{...e})});cF.displayName="SourcesSwitcher";const txe=A.memo(({isTranscribing:e,isInitializing:t,startTranscription:n,stopTranscription:r,variant:s="primary"})=>{const{$t:a}=Q(),[o,l]=f.useState(t),c=()=>{l(!0),n?.()},u=()=>{l(!1),r?.()};return f.useEffect(()=>{e&&l(!1)},[e]),i.jsx(i.Fragment,{children:s==="primary"?i.jsxs("div",{className:"relative ml-2",children:[e&&i.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),i.jsx(ge,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||o,icon:e?EN:cB,variant:"primary",onClick:e?u:c,disabled:!1,size:Wt.small})]}):i.jsxs("div",{className:"relative",children:[e&&i.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),i.jsx(Te,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||o,icon:e?EN:cB,variant:"common",onClick:e?u:c,disabled:!1,size:Wt.small})]})})});txe.displayName="DictationButton";const wbt={hidden(){return{opacity:0,scale:.2}},visible(){return{opacity:1,scale:1}}},nxe=A.memo(({onStopButtonClick:e,variant:t="inverted"})=>{const{$t:n}=Q();return i.jsx(xe.div,{animate:"visible",exit:"hidden",initial:"hidden",variants:wbt,children:i.jsx(ge,{testId:"stop-generating-response-button",toolTip:n({defaultMessage:"Stop generating response",id:"wXXKXUJh1s"}),variant:t,icon:EN,onClick:e,size:"small",extraCSS:"text-caution hover:!bg-caution hover:!text-white ml-2"})},"stop-button")});nxe.displayName="StopButton";var Cbt={};const rxe=A.memo(()=>{const{openModal:e}=vt(),{$t:t}=Q(),n=Qe(),r=_t(),s=f.useCallback(()=>{n?Cbt.NEXT_PUBLIC_IS_SIDECAR_BUILD?r.push("/speak"):e("voiceToVoiceModal",null):e("loginModal",{origin:Ie.VOICE_TO_VOICE_BUTTON,pitchMessage:{title:"Sign in to unlock voice mode"}})},[n,e,r]);return i.jsx("div",{className:"ml-2",children:i.jsx(ge,{onClick:s,size:Wt.small,icon:Y4e,variant:"primary",disabled:!1,toolTip:t({defaultMessage:"Voice mode",id:"OnF9aqAuar"})})})});rxe.displayName="VoiceToVoiceButton";const sxe=(e,t)=>{const{value:n,loading:r}=At({flag:"max_assistant_tooltip_enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function axe(){const{value:e}=At({flag:"enable-clarifying-questions",subjectType:"user_nextauth_id",defaultValue:!1});return e}const oxe=A.memo(({toolTip:e,icon:t,isDisabled:n,value:r,querySource:s,size:a=Wt.small,handleSubmit:o,...l})=>i.jsx(ge,{...l,ariaLabel:"Submit",toolTip:e,icon:t,variant:"primary",size:a,onClick:n?void 0:()=>o({query:r,querySource:s}),disabled:n,extraCSS:"!duration-100"}));oxe.displayName="SubmitButton";var s_={};const kT=({className:e,...t})=>i.jsx("div",{className:e,children:i.jsx(oxe,{...t,value:""})}),Sbt=({value:e,json:t,submitWillFork:n,isFollowUp:r,isDisabled:s,querySource:a,errorMessage:o,handleSubmit:l,fileUploadRef:c,showFileUpload:u,fileUploadTooltip:d,showStopButton:m,showModelSelector:p,onStopButtonClick:h,onFilePickerOpen:g,onFilePickerClose:y,showSources:v,useThreadSources:x,showRecency:b,disableActionButtons:_,startTranscription:w,stopTranscription:C,isTranscribing:S,isTranscriptionInitializing:E,isTranscriptionAvailable:M,fileUploadErrorMessage:k,fileUploadWarningMessage:T,activeConnector:j=null,uploadedFiles:R,handleStartUpload:O,handleFileInput:P,isBoxFilePickerOpen:N=!1,handleCloseBoxFilePicker:I,cleanupBoxFilePicker:D,microsoftFilePickerOptions:F=null,handleCloseMicrosoftFilePicker:B,handleSelectSharepointSite:V,isMicrosoftFilePickerOpen:$=!1,fileInputRef:G,hasQuery:X,isAudioVideoFilesEnabled:Y=!1,setAttachmentErrorMessage:W,isCometHome:H,isMissionControl:Z})=>{const re="ask-input-right-attributions",{isMobileStyle:q,isMobileUserAgent:J}=ye(),{screenshotToolEnabled:te}=Fs(),{openModal:se}=vt(),{organization:de}=gn({reason:re}),{$t:fe}=Q(),ve=axe(),{activeMenu:ue}=ws(),{onActiveMenuChange:ie}=jo(),{device:{isWindowsApp:be}}=Et(),Se=Dt(),{fileRepoInfo:Ce}=Do({reason:re}),{isMax:ke}=yt(),Re=Ce.file_repository_type==="COLLECTION",je=b&&Re&&!r,ct=f.useRef(e),tt=f.useRef(t);ct.current=e,tt.current=t;const{variation:ut}=sxe(!1),we=f.useCallback(({querySource:Ft})=>{l({query:ct.current,json:tt.current,querySource:Ft})},[l]),Ue=cBe(fBe),Ot=Er(Ue?.display_model)==oe.RESEARCH||Er(Ue?.display_model)==oe.STUDIO;f.useEffect(()=>{if(!be)return;const Ft=new URLSearchParams(window.location.search);Ft.get("voice-mode")?(Ip({"voice-mode":void 0}),w?.()):Ft.get("v2v")&&(Ip({v2v:void 0}),se("voiceToVoiceModal",null))},[Se,be,w,se]),f.useEffect(()=>{const Ft=()=>{M&&(S?C?.():w?.())},Gt=()=>{se("voiceToVoiceModal",null)};return document.addEventListener("toggleVoiceToVoice",Gt),document.addEventListener("toggleDictation",Ft),()=>{document.removeEventListener("toggleDictation",Ft),document.removeEventListener("toggleVoiceToVoice",Gt)}},[S,M,w,C,se]);const pt=!Z&&!r&&!H&&(!J&&!q||!!s_.NEXT_PUBLIC_IS_SIDECAR_BUILD),Mt=n?Yv:s_.NEXT_PUBLIC_IS_SIDECAR_BUILD||r||Z?PR:GC,qe=m&&ve&&Ot,Be=()=>{if(_)return i.jsx(kT,{className:"ml-2",isDisabled:!0,icon:Mt,querySource:a??"home",handleSubmit:Rn});if(m){const Cn=qe?"common":"inverted";return i.jsx(nxe,{onStopButtonClick:h,variant:Cn})}const Ft=a&&i.jsx(kT,{className:"ml-2",toolTip:o||(n?fe({defaultMessage:"Start your own thread",id:"TAA16rUT4G"}):""),icon:Mt,isDisabled:s,querySource:a,handleSubmit:we,"data-testid":"submit-button"},"submit-button"),Gt=[];if(s_.NEXT_PUBLIC_IS_SIDECAR_BUILD&&ke&&ut&&Gt.push(i.jsx(q1e,{},"sidecar-more-menu-button")),s_.NEXT_PUBLIC_IS_SIDECAR_BUILD&&te&&Gt.push(i.jsx(K1e,{handleFileInput:P},"sidecar-screenshot-button")),M&&Gt.push(i.jsx(txe,{isTranscribing:S,isInitializing:E,stopTranscription:C,startTranscription:w,variant:S?"primary":"common"},"dictation-button")),pt){const Cn=(R?.length||X)&&a&&!S;Cn?Gt.push(Ft):!S&&!Cn&&Gt.push(i.jsx(rxe,{},"voice-to-voice-button"))}else S||Gt.push(Ft);return M||pt?Gt:Ft},Oe=f.useCallback(()=>ie(null),[ie]),nt=f.useCallback(()=>ie(xr.SOURCES),[ie]),St=f.useCallback(()=>ie(xr.RECENCY),[ie]),Yt=f.useCallback(()=>ie(xr.ATTACHMENTS),[ie]);return i.jsxs(d1e,{children:[v&&i.jsx(cF,{isOpen:ue===xr.SOURCES,onOpen:nt,onClose:Oe,useThreadSources:x}),p&&i.jsx(G1e,{}),je&&i.jsx(V1e,{isOpen:ue===xr.RECENCY,onOpen:St,onClose:Oe}),u&&i.jsx(B1e,{isOpen:ue===xr.ATTACHMENTS,onOpen:Yt,onClose:Oe,size:"small",forwardedRef:c,fileType:"all",tooltip:d,onFilePickerOpen:g,onFilePickerClose:y,areFileAttachmentsAllowed:de?.settings?.file_attachments_allowed!==!1,fileUploadErrorMessage:k??null,fileUploadWarningMessage:T??null,activeConnector:j,uploadedFiles:R??le,handleStartUpload:O,handleFileInput:P,isBoxFilePickerOpen:N,handleCloseBoxFilePicker:I,cleanupBoxFilePicker:D,microsoftFilePickerOptions:F,handleCloseMicrosoftFilePicker:B,handleSelectSharepointSite:V,isMicrosoftFilePickerOpen:$,fileInputRef:G,isAudioVideoFilesEnabled:Y,setAttachmentErrorMessage:W}),a&&i.jsxs(i.Fragment,{children:[Be(),qe&&i.jsx("div",{className:s?"pointer-events-none opacity-50":"",children:i.jsx(kT,{className:"ml-3",toolTip:o||fe({defaultMessage:"Anything else to consider?",id:"DDAw7Ictpp"}),icon:Mt,querySource:a,isDisabled:!1,handleSubmit:we})})]})]})},ixe=A.memo(Sbt);ixe.displayName="AskInputRightAttribution";const lxe=A.memo(({uploadedFiles:e,onRemoveFile:t,incompleteParsingEnabled:n,ref:r})=>i.jsxs("div",{ref:r,className:"gap-x-sm scrollbar-none flex snap-x snap-mandatory overflow-x-auto",children:[i.jsx("div",{className:"w-xs shrink-0"}),e.map((s,a)=>i.jsx(cxe,{uploadedFile:s,onRemoveFile:t,incompleteParsingEnabled:n},a)),i.jsx("div",{className:"w-xs shrink-0"})]}));lxe.displayName="UploadedFilesList";const cxe=A.memo(({uploadedFile:e,onRemoveFile:t,incompleteParsingEnabled:n})=>{const r="uploaded-files-list",{trackEvent:s}=Me(),a=n?e.status==="uploading":e.status==="uploading"||e.status==="parsing",{$t:o}=Q(),{fileRepoInfo:l}=Do({reason:r}),{saveFile:c,isLoading:u}=Tnt({fileRepoInfo:l,reason:r}),{data:d}=OO({fileRepoInfo:l,fileName:e.file.name,reason:r}),m=Object.values(yo),p=p1(e.file.name),g=p&&!Ja(e.file.name)&&m.includes(p)&&wYe(e.nextURL),y=l.file_repository_type==="COLLECTION"&&!a&&g,v=f.useMemo(()=>o(d?{defaultMessage:"File exists in Space",id:"pD1m2AH9FU"}:{defaultMessage:"Save attachment to Space",id:"/Pbth8CiTs"}),[d,o]),x=f.useMemo(()=>sce(e)?zv:m$e(e)?Q4e:p$e(e)?jte:h$e(e)?$a:Sf,[e]),b=f.useCallback(()=>{s("remove attachment clicked"),e.nextURL&&t?.(e.nextURL,e.file_uuid??"")},[s,e,t]),_=f.useCallback(()=>c(e),[c,e]);return i.jsxs("div",{className:U("scroll-mx-md px-sm py-xs border-subtlest bg-subtler dark:bg-subtle gap-x-md flex h-[48px] w-fit snap-start items-center justify-between rounded-lg",{"opacity-70":a}),children:[i.jsxs("div",{className:"gap-x-md flex items-center",children:[e.thumbnailSource&&!a?i.jsx(is,{alt:e.file.name,src:e.thumbnailSource,containerClassName:"size-8 shrink-0",imageClassName:"w-full h-full object-cover object-center",rounded:"md",includeLightBoxModal:!1}):i.jsx("div",{className:"p-sm bg-offsetPlus dark:bg-subtler rounded-lg","data-testid":a?"file-loading-icon":"file-type-icon",children:i.jsx(me,{icon:a?Jte:x,size:"sm",color:"#64645F",className:a?"animate-spin":void 0})}),i.jsxs("div",{className:"flex-col",children:[i.jsx(L,{variant:"tiny",color:"light",className:"text-nowrap",children:f$e(e.file.name,30)}),e.file.size>0&&i.jsx(L,{variant:"tinyRegular",color:"light",className:"text-nowrap",children:g$e(e.file.size)})]})]}),i.jsxs("div",{className:"gap-x-sm flex items-center",children:[y&&i.jsx(Te,{icon:X4e,size:"tiny",onClick:_,disabled:d||u,variant:"common",toolTip:v,isLoading:u,pill:!0,noPadding:!0}),e.nextURL&&i.jsx(Te,{icon:Lt,size:"tiny",testId:"remove-uploaded-file",onClick:b,variant:"common",pill:!0,noPadding:!0})]})]})});cxe.displayName="UploadedFilePreview";var Ebt={};function Mbt({handleSubmit:e,inputQuery:t}){const{trackEvent:n}=Me(),r=f.useRef(t);r.current=t;const s=Pa(),{sidecarSourceTab:{url:a}}=Fs();return f.useCallback((l,c)=>{const u=ja();if(n("auto suggestion accepted",{mode:"dropdown-complete",query:r.current,completion:l.query,completion_uuid:l.query_uuid,completion_position:c,url:l.url,isNavigational:!!l.url,frontendContextUUID:u,searchMode:s,isPersonalized:l.isPersonalized,sourceDomain:Ebt.NEXT_PUBLIC_IS_SIDECAR_BUILD?Zs(a):void 0}),l.url){window.open(l.url,"_self");return}e({query:l.submission_query??l.query,promptSource:"autosuggest",querySource:"autosuggest",newFrontendContextUUID:u})},[e,s,n,a])}var kbt={};function Tbt({inputQuery:e}){const{trackEventBatch:t}=Me(),n=f.useRef(e);n.current=e;const r=Pa(),{sidecarSourceTab:{url:s}}=Fs();return f.useCallback(o=>{if(n.current.length!==0)return;const l=o.map((c,u)=>({name:"auto suggestion blank state viewed",data:{mode:"dropdown-complete",query:n.current,completion:c.query,completion_uuid:c.query_uuid,completion_position:u,url:c.url,isNavigational:!!c.url,searchMode:r,sourceDomain:kbt.NEXT_PUBLIC_IS_SIDECAR_BUILD?Zs(s):void 0}}));t(l)},[r,t,s])}const Nbt=(e,t)=>{const{value:n,loading:r}=At({flag:"sidecar-personalized-query-suggestions",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},uF="sidecar-personalized-queries-cache",f9=1e3*60*10,Abt="sidecar";function jbt(e){try{let n=new URL(e).hostname.toLowerCase();return n.startsWith("www.")&&(n=n.slice(4)),n}catch{return""}}function Rbt(){try{const e=Ae.getItem(uF);if(e)return JSON.parse(e)}catch{}return null}function Ibt(e){Ae.setItem(uF,JSON.stringify(e))}async function Pbt(e,t,n){if(e!==null&&e.nonce!==null&&e.timestamp>n-f9&&e.domain_suggestions.length>0)return{nonce:e.nonce,domain_suggestions:e.domain_suggestions};const r=await ne.POST("/rest/browser/personalization/sidecar-recommended-queries",Abt,{body:{last_refresh_timestamp_ms:e?.timestamp??0,nonce:e?.nonce??"",history_items:t},timeoutMs:3e4});return r.error?(ee.error("Failed to fetch sidecar personalized queries:",r.error),{domain_suggestions:[],nonce:""}):r?.data?.domain_suggestions===null||!r?.data?.domain_suggestions?{domain_suggestions:e?.domain_suggestions??[],nonce:e?.nonce??""}:r.data}function Obt(e,t){const n=e.find(r=>r.domain===t);return n?n.suggestions.map(r=>({query:r.query})):[]}const Lbt=14,Dbt=1500,Fbt=(e,t)=>{const{session:n}=Ct(),r=wr(!1),s=jbt(e),{variation:a,loading:o}=Nbt(!1,{userEmail:n?.user?.email??""}),l=Rbt(),{data:c}=$e({queryKey:["sidecar-personalized-queries",t,a,o],queryFn:async()=>{if(!r||!e||!t)return[];if(!a)return o||Ae.removeItem(uF),[];const u=Date.now();if(l&&l.domain_suggestions.length>0&&u-l.timestamp<f9)return l.domain_suggestions;try{const m=((await r.SearchBrowser({queries:[],sources:["HISTORY"],key:"sidecar-personalized-suggestions-history",request_id:"sidecar-personalized-suggestions",start_time:Lbt*24*60*60*1e3,history_max_results:Dbt,open_tabs_max_results:0,closed_tabs_max_results:0})).history_results??[]).map(g=>({url:g.url,title:g.title,last_accessed:g.last_accessed,visit_count:g.visit_count})),p=await Pbt(l,m,u),h={nonce:p.nonce,timestamp:u,domain_suggestions:p.domain_suggestions};return h.domain_suggestions.length>0&&Ibt(h),p.domain_suggestions}catch(d){return ee.error(d),l?.domain_suggestions??[]}},placeholderData:()=>t?l?.domain_suggestions??[]:[],refetchInterval:f9});return Obt(c??[],s)},Ubt=async({query:e,keywords:t,reason:n})=>{try{const{error:r,data:s}=await ne.POST("/rest/autosuggest/reformulate-query",n,{body:{query:e,keywords:t}});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r});return s.reformulated_query}catch(r){return ee.error("Failed to fetch refinement query",r),null}},Bbt=async({sources:e,attachments:t,searchMode:n,sourceTabUrl:r,entropyRenderingPlace:s,reason:a})=>{try{const{error:o,data:l}=await ne.POST("/rest/autosuggest/list-autosuggest",a,{body:{query:"",sources:e,attachments:t,search_mode:n,source_tab_url:r,entropy_rendering_place:s}});if(o)throw new Ee("API_CLIENTS_ERROR",{cause:o});return l.results??le}catch(o){return ee.error(o),le}},Vbt=async({reason:e,onCreateShortcut:t})=>{try{const o=[...[...(await Lpe({reason:e}))?.tasks??[]].sort(()=>Math.random()-.5).slice(0,2).map(l=>({query:l.prompt,title:l.task_name,shouldShowTitle:!0,category:"shortcuts"}))];return t&&o.push({query:"",query_uuid:"create-shortcut-button",title:"Create a shortcut",description:"",category:"shortcuts",icon:"plus",shouldShowTitle:!0,actionHandler:t}),o}catch(n){return ee.error("Failed to fetch shortcuts suggestions",n),le}},uxe=async({cometBrowser:e,type:t,locale:n})=>{const r=await e.getPersonalSuggestions({source:"ntp",type:t,locale:n},"get-personal-suggestions");return r.is_success?r.suggestions:[]},Wbt=async(e,t)=>{const n=await uxe(e);return n.length<=t?n:xte(n).slice(0,t)},$bt=({cometBrowser:e,type:t,locale:n})=>{const{data:r=[]}=$e({queryKey:["comet-personal-suggests-async",t,n],queryFn:async()=>xte(await uxe({cometBrowser:e,type:t,locale:n})),staleTime:3e5,gcTime:3e5});return r},TT=({sources:e,attachments:t,searchMode:n,focus:r,isCometHome:s,reason:a,enabled:o})=>{const{sidecarSourceTab:{url:l}}=Fs(),u=Sa().erp,{isMobileUserAgent:d}=ye(),m=wr(),p=Z1(),{openModal:h}=vt(),g=Fbt(l||"",u==="sidecar"),y=f.useCallback(()=>{h("taskShortcutModal",{source:"suggestions_dropdown"})},[h]),v=f.useMemo(()=>s&&n===oe.SEARCH?["comet-blank-state-suggest",n,p]:r==="finance"?["finance-blank-state-suggest"]:["blank-state-suggest",e,t,n,u==="sidecar"?l:""],[e,t,n,r,s,l,u,p]);return $e({queryKey:v,enabled:o,queryFn:async()=>{if(s&&n===oe.SEARCH){const[_,w]=await Promise.all([Wbt({cometBrowser:m,type:"input-blank-state"},Ym(d,p)),p?Vbt({reason:a,onCreateShortcut:y}):Promise.resolve([])]);return[...(_??le).map(C=>({...C,is_comet_assistant:!0,category:"suggestion"})),...w]}if(r==="finance")return(await mlt({query:"",reason:a,country:"US"})).map((C,S)=>({query:C.query||`suggestion-${S}`,title:C.title??void 0,image:C.image??void 0,description:C.description??void 0,category:C.category??void 0,query_uuid:C.query_uuid??void 0,url:C.url??void 0,metadata:C.metadata??void 0}));const[x,b]=await Promise.all([Bbt({sources:e,attachments:t,searchMode:n,sourceTabUrl:u==="sidecar"?l:"",entropyRenderingPlace:u,reason:a}),u==="sidecar"?xze({entropyBrowser:m,url:l}):Promise.resolve([])]);return[...g.map(_=>({..._,isPersonalized:!0})),...b,...x].slice(0,Ym(d))}})},Hbt=e=>{const{setSuggestions:t,setBlankStateSuggestions:n}=jo(),{sidecarSourceTab:{url:r}}=Fs(),a=Sa().erp,o=f.useRef(void 0),l=f.useRef(e.selectedSearchMode),{blankStateSuggestions:c}=ws(),u=c[e.selectedSearchMode],d=r?Zs(r):void 0,m=e.suggestionsDisabled||a==="sidecar"&&d&&d===o.current;!m&&o.current!==d&&(o.current=d);const{data:p}=TT({...e,searchMode:oe.SEARCH,enabled:!m}),{data:h}=TT({...e,searchMode:oe.RESEARCH,enabled:!m}),{data:g}=TT({...e,searchMode:oe.STUDIO,enabled:!m});return f.useEffect(()=>{p&&n(p,oe.SEARCH),h&&n(h,oe.RESEARCH),g&&n(g,oe.STUDIO)},[p,h,g,n]),f.useEffect(()=>{(e.query?.length??0)>0||u&&((a==="sidecar"||l.current!==e.selectedSearchMode)&&t(u),l.current=e.selectedSearchMode)},[e.query,e.selectedSearchMode,u,t,a]),null};function dxe({userInputQuery:e,userInputJson:t,suggestionsDisabled:n,suggestions:r,focusedIndex:s,setFocusedIndex:a,onChange:o,handleSuggestionSubmission:l,placement:c="bottom",inputRef:u}){const d=f.useRef(e),m=f.useRef(t),p=f.useRef(r),h=f.useRef(s);d.current=e,m.current=t,p.current=r,h.current=s;const g=f.useCallback((_,w)=>{if(w>0){const C=(h.current+1)%w,S=p.current[C];if(S?.query){const E=S.query;o(E)}return _.preventDefault(),C}return null},[o]),y=f.useCallback(_=>{let w=h.current-1;if(w<0)w=-1,h.current===0&&(_.preventDefault(),o(d.current,m.current));else{_.preventDefault();const C=p.current[w];if(C?.query){const S=C.query;o(S)}}return w},[o]),v=f.useCallback((_,w)=>{if(w>0){const C=h.current<=0?w-1:(h.current-1)%w,S=p.current[C];if(S?.query){const E=S.query;o(E)}return _.preventDefault(),C}return null},[o]),x=f.useCallback((_,w)=>{let C=h.current+1;if(C>=w||C===0)C=-1,h.current===w-1&&(_.preventDefault(),o(d.current,m.current));else{_.preventDefault();const S=p.current[C];if(S?.query){const E=S.query;o(E)}}return C},[o]);return f.useCallback(_=>{if(n)return!1;const w=So.isArrowDown(_),C=So.isArrowUp(_);if(w){if(c==="bottom"&&h.current===-1&&!u.current?.inLine("last"))return!1;const S=c==="bottom"?g(_,p.current.length):x(_,p.current.length);if(S!==null)return a(S),!0}else if(C){if(c==="top"&&h.current===-1&&!u.current?.inLine("first"))return!1;const S=c==="bottom"?y(_):v(_,p.current.length);if(S!==null)return a(S),!0}else if(So.isEnterKeyWithoutShift(_)&&h.current>=0&&h.current<p.current.length){const S=p.current[h.current];if(S)return l(S,h.current),!0}return!1},[n,c,u,g,x,a,y,v,l])}var qX={};const zbt=e=>e==="travel"||e==="shopping"||e==="academic"||e==="sports",Gbt=({autosuggestionsEnabled:e=!0,inputQuery:t,inputJson:n,isInputActive:r,onChange:s,handleSuggestionSubmission:a,handleSuggestionView:o,querySource:l,hasThreadContent:c,isMentionMenuOpened:u,placement:d="bottom",inputRef:m})=>{const{isWindowsAppPanelView:p}=Af(),[h,g]=f.useState(-1),[y,v]=f.useState(t),[x,b]=f.useState(),_=Nt(),{isSuggestionsDisabled:w}=dn(),C=h1e(),S=Pfe(_),E=RJe(_),{activeMenu:M,suggestions:k}=ws(),{currentOpenedModal:T}=vt(),{setSuggestions:j,setShowSuggestDropdown:R}=jo(),O=f.useMemo(()=>w||!e||!C&&!S&&!p&&!E&&!zbt(l)&&!qX.NEXT_PUBLIC_IS_SIDECAR_BUILD||l!=="finance"&&t.length>rZe&&!k.some(({query:N})=>N===t)||!!qX.NEXT_PUBLIC_IS_SIDECAR_BUILD&&c,[w,e,C,S,E,p,l,t,c,k]),P=dxe({userInputQuery:y,userInputJson:x,suggestionsDisabled:O,suggestions:k,focusedIndex:h,setFocusedIndex:g,onChange:s,handleSuggestionSubmission:a,placement:d,inputRef:m});return f.useEffect(()=>{h===-1&&(v(t),b(n))},[t,h,v,b,n]),f.useEffect(()=>{O&&(j(le),g(-1))},[O,j,g]),f.useEffect(()=>{const N=!O&&r&&!M&&!T&&k.length>0&&!u;R(N),N&&o(k)},[O,r,M,T,k,u,R,o]),f.useMemo(()=>({focusedIndex:h,setFocusedIndex:g,suggestionsDisabled:O,userInputQuery:y,handleSuggestDropdownNavigation:P,placement:d}),[h,P,O,y,d])};class qbt{static isAnyInputElementFocused(){const t=document.activeElement;return!!(t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.getAttribute("contenteditable")==="true"||t.getAttribute("role")==="textbox"))}}function Kbt({value:e,json:t,isDisabled:n,handleSubmit:r,handleSuggestDropdownNavigation:s,querySource:a,focusInput:o,isInputActive:l}){const{isMobileUserAgent:c}=ye(),u=f.useRef(e),d=f.useRef(t);u.current=e,d.current=t;const m=f.useCallback(v=>n&&So.isEnterKeyWithoutShift(v)?(v.preventDefault(),!0):!1,[n]),p=f.useCallback(v=>v.isComposing?(v.preventDefault(),!0):!1,[]),h=f.useCallback(v=>{So.isEnterKeyWithoutShift(v)&&!c&&(v.preventDefault(),r({query:u.current,json:d.current,querySource:a}))},[r,a,c]),g=f.useCallback(v=>{const x=So.isCtrlOrCmdJ(v),b=So.isOnlySlashKey(v);if(x||b){if(l||qbt.isAnyInputElementFocused())return;v.preventDefault(),o()}},[o,l]);return f.useEffect(()=>(document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[g]),f.useCallback(v=>{m(v)||p(v)||s(v)||h(v)},[m,p,s,h])}const Ybt=(e,t)=>{const{value:n,loading:r}=At({flag:"clear-ask-input-suggestions-when-disabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function Qbt({value:e,json:t,querySource:n,disableSubmission:r=!1,disableInput:s=!1,autofocus:a=!0,isUploadingFile:o=!1,onChange:l,onFocus:c,handleSubmit:u,handleUpdateAutosuggestions:d,autosuggestionsEnabled:m=!0,errorMessage:p,sources:h,attachments:g,selectedSearchMode:y,isInputActive:v,setIsInputActive:x,updateOnFocus:b=!1,inFlight:_=!1,resultsLength:w=0,quote:C,isMentionMenuOpened:S,isCometHome:E=!1,reason:M,placement:k="bottom"}){const{activeMenu:T,inputRef:j}=ws(),R=Hnt(),{setShouldTriggerFocus:O}=I1(),{blankStateSuggestions:P}=ws(),{setSuggestions:N}=jo(),{onActiveMenuChange:I}=jo(),{device:{isAndroid:D}}=Et(),F=f.useMemo(()=>!!C||e.trim().length>0||!!g&&g.length>0,[C,e,g]),B=r||s||!!p||o||!F,V=f.useCallback(fe=>{const{mentions:ve}=Bpe(t?.root);u({...fe,mentions:ve.length>0?ve:void 0})},[t,u]),$=Mbt({handleSubmit:V,inputQuery:e}),G=Tbt({inputQuery:e}),{focusedIndex:X,setFocusedIndex:Y,suggestionsDisabled:W,userInputQuery:H,handleSuggestDropdownNavigation:Z}=Gbt({autosuggestionsEnabled:m,inputQuery:e,inputJson:t,isInputActive:v&&m,onChange:l,handleSuggestionView:G,handleSuggestionSubmission:$,querySource:n,hasThreadContent:_||w>0,isMentionMenuOpened:S,placement:k,inputRef:j});Hbt({sources:h,attachments:g,selectedSearchMode:y,suggestionsDisabled:W,focus:n==="finance"?"finance":void 0,query:e,isCometHome:E,reason:M});const re=f.useCallback(()=>{j.current?.focus(),x(!0)},[j,x]),q=f.useCallback(fe=>{c?.(fe),x(!0),I(null),b&&d(j.current?.value??""),D&&setTimeout(()=>{j.current?.scrollIntoView({behavior:"smooth",block:"center"})},300)},[c,I,d,x,b,j,D]);f.useEffect(()=>{R&&a&&(re(),O(!1))},[R,re,O,a]);const J=f.useCallback(()=>(x(!1),Y(-1),!0),[Y,x]),{variation:te}=Ybt(!1),se=f.useCallback((fe,ve)=>{if(l(fe,ve),W){te&&N([]);return}fe.trim().length===0&&P[y]?(N(P[y]),d(fe)):lZe(fe)&&d(fe)},[l,W,d,P,N,y,te]),de=Kbt({value:e,json:t,isDisabled:B,handleSubmit:V,handleSuggestDropdownNavigation:Z,querySource:n,focusInput:re,isInputActive:v});return f.useEffect(()=>{T!==null?j.current?.blur():a&&re()},[T,j,re,a]),f.useMemo(()=>({isDisabled:B,focusedIndex:X,setFocusedIndex:Y,userInputQuery:H,handleSuggestionSubmission:$,handleFocus:q,handleBlur:J,handleChange:se,handleKeyDown:de,focusInput:re,hasQuery:F}),[re,X,J,se,q,de,$,F,B,Y,H])}const Xbt=(e,t)=>{const{value:n,loading:r}=At({flag:"search-files-v2-enabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function Zbt(){const{value:e}=At({flag:"clear-attachment-on-submission",subjectType:"user_nextauth_id",defaultValue:!1});return e}const Jbt=({entropyBrowser:e,isSidecar:t,focusInput:n})=>{f.useEffect(()=>{if(!e||!t)return;const r=()=>{document.visibilityState==="visible"&&n()},s=e.subscribeQuickActionButtonFired(()=>{n()});return document.addEventListener("visibilitychange",r),()=>{s(),window.removeEventListener("visibilitychange",r)}},[e,n,t])},fxe=A.memo(function(t){const{children:n,condition:r,Wrapper:s,...a}=t;return r?i.jsx(s,{...a,children:n}):n});fxe.displayName="ConditionalWrapper";var e_t={};const t_t=({value:e,json:t,querySource:n,placeholder:r,disableSubmission:s=!1,disableInput:a=!1,initialLayout:o="expanded",minRows:l=1,isFollowUp:c=!1,submitWillFork:u=!1,showSources:d=!1,useThreadSources:m=!1,showRecency:p=!1,showModelSelector:h=!0,showSearchModeSelector:g=!0,showFileUpload:y=!1,disableActionButtons:v=!1,showIncognitoHint:x,hasShadow:b=!1,autofocus:_=!0,disablePrivacyWarning:w=!1,fileUploadTooltip:C,className:S,headerComponent:E,initializeAttachmentsFromLastResult:M=!1,showStopButton:k=!1,forceHideSuggestions:T=!1,onChange:j,onFocus:R,onClick:O,onSubmit:P,onStopButtonClick:N=Rn,onFilePickerOpen:I,onFilePickerClose:D,autosuggestionsEnabled:F=!0,dropdownPlacement:B="bottom",dropdownClassName:V,disableModeSelector:$=!1,useLexical:G=!1,mentionTypeaheadOptions:X,isCometHome:Y=!1,onTriggerTypeahead:W,layoutKey:H,isHighlighted:Z,isMissionControl:re,ref:q,onRemoveFile:J,onFileAttachComplete:te,renderAttachments:se=!0})=>{const de=`ask-input-inner-${n}`,fe=f.useRef(!1),[ve,ue]=f.useState(!1),[ie,be]=f.useState(_),{suggestions:Se,blankStateSuggestions:Ce,showSuggestDropdown:ke}=ws(),{setSuggestions:Re}=jo(),{isMobileStyle:je,isMobileUserAgent:ct}=ye(),{promptSkipped:tt}=unt(),{inputRef:ut}=ws(),[we,Ue]=f.useState(!0),Ot=f.useRef(null),{currentOpenedModal:pt}=vt(),Mt=!!pt,qe=Qe(),{quote:Be,setQuote:Oe}=Oa(),nt=Zbt(),St=Pa(),{sources:Yt}=Hn(),{specialCapabilities:Ft}=Or(),{lastResult:Gt,inFlight:Cn,resultsLength:ln}=Ht(),Ke=wr(),He=Q(),st=f.useRef(null),[Vt,en]=f.useState(!1),On=f.useCallback(()=>en(!0),[]),_e=f.useCallback(()=>en(!1),[]),{cacheImageDownloadUrl:Ge}=sD({reason:de}),{variation:We,loading:rt}=Xbt(!1),et=M&&!rt&&!We?Gt?.attachments:void 0,[kt,_n]=f.useState(void 0),tn=f.useMemo(()=>kt?.map(Zn=>Zn.url),[kt]),{value:cn,loading:Mr}=FP({flag:"windows-app-dictation-config",defaultValue:ZW}),La=f.useMemo(()=>Mr?ZW:{eppoTranscriptionConfig:cn,runImmediately:!0},[cn,Mr]),mo=f.useMemo(()=>{if(e.length>Md)return He.formatMessage({defaultMessage:"Query is { numCharacters } characters too long",id:"yw04s2k4La"},{numCharacters:e.length-Md})},[e,He]),qo=f.useCallback(Zn=>{if(!(fe.current||!we)){if(fe.current=!0,!Zn.query&&tn&&tn.length>0){const Fa=oO(tn[0]);Zn.query=Fa!=="File"?Fa:"File Attached"}mo?fe.current=!1:(setTimeout(()=>fe.current=!1,ZO),P?.({query:Zn.query,json:Zn.json,attachments:tn,promptSource:Zn.promptSource,querySource:Zn.querySource,mentions:Zn.mentions}),kt?.forEach(Fa=>{Fa.file&&Fa.file.size>0&&Ja(Fa.url)&&Ge(Fa.url,Fa.resizedFile??Fa.file)}),(nt||re)&&st.current?.clearFiles())}},[mo,tn,P,nt,re,Ge,kt,we]);f.useEffect(()=>Ke.subscribeForceSubmitQuery(Zn=>{qo(Zn)}),[Ke,qo]);const{handleUpdateAutosuggestions:$u}=Hyt(),{isDisabled:Uf,focusedIndex:vg,setFocusedIndex:ht,userInputQuery:pr,handleSuggestionSubmission:Ni,handleFocus:Hu,handleBlur:Pc,handleChange:ca,handleKeyDown:xg,focusInput:Al,hasQuery:Da}=Qbt({value:e,json:t,querySource:n,disableSubmission:s,disableInput:a,autofocus:_,isUploadingFile:ve,onChange:j,onFocus:R,handleSubmit:qo,handleUpdateAutosuggestions:$u,autosuggestionsEnabled:F,errorMessage:mo,sources:Yt,attachments:tn,selectedSearchMode:St,setIsInputActive:be,isInputActive:ie,inFlight:Cn,resultsLength:ln,quote:Be,isMentionMenuOpened:Vt,isCometHome:Y,reason:de,placement:B});Zyt({setInput:ca}),Jbt({entropyBrowser:Ke,focusInput:Al,isSidecar:!!e_t.NEXT_PUBLIC_IS_SIDECAR_BUILD}),f.useEffect(()=>{tt&&ut.current?.focus()},[ut,tt]),f.useEffect(()=>{Be&&Al()},[Be,Al]);const{openToast:zu}=xn(),bg=f.useMemo(()=>({onStart:()=>{Al()},onStop:()=>{Al()},onSilence:()=>{zu("No audio detected. Make sure your microphone is connected and unmuted","error",4)}}),[Al,zu]),{startTranscription:Lx,stopTranscription:Dx,error:_g,isTranscribing:Gu,isInitializing:wg,transcription:Ai}=n0t({callbacks:bg,config:La,reason:de});f.useEffect(()=>{_g&&zu(`Audio Error: ${_g}`,"error",4)},[_g,zu]);const Bf=f.useRef("");f.useEffect(()=>{if(!Gu){Bf.current="";return}if(Ai&&Ai!==Bf.current){const Zn=Ai.startsWith(Bf.current)?Ai.slice(Bf.current.length).trim():Ai;if(Zn){const Fa=e?` ${Zn}`:Zn;ut.current?.trim(),ut.current?.append(Fa),ca(ut.current?.value??"",ut.current?.json)}Bf.current=Ai}},[Ai,Gu,e,ca,ut]);const{isAudioVideoFilesEnabled:Vf}=Byt(),Oc=Vyt(),{organization:L5}=gn({reason:de}),D5=f.useCallback(()=>ue(!0),[]),{handlePaste:Wf,handlePasteQuery:Fx,handleCompleteFileUpload:F5,handleFileSelect:Ux,autoCreatedTextFile:Ln,dismissNotification:Bx,setAutoCreatedTextFile:Vx}=zyt({fileUploadRef:st,showFileUpload:y,attachments:tn,setAttachments:_n,handleChange:ca,setIsUploadingFile:ue,focusInput:Al,onFileAttachComplete:te}),{fileInputRef:Cg,errorMessage:Wx,warningMessage:Sg,uploadSource:UU,uploadedFiles:qu,handleRemoveFile:$x,handleStartUpload:BU,handleFileInput:VU,isBoxOpen:WU,onCloseBox:$U,cleanupBoxPicker:HU,microsoftFilePickerOptions:zU,isMicrosoftFilePickerOpen:GU,handleSelectSharepointSite:qU,onCloseMicrosoft:KU,setErrorMessage:YU}=Qyt({fileUploadRef:st,disablePrivacyWarning:w,isAudioVideoFilesEnabled:Vf,isClearAttachmentsEnabled:re||nt,isFollowUp:c,existingAttachments:et,organization:L5,lastResult:Gt,onStartFileUpload:D5,onCompleteFileUpload:F5,setUploadsReady:Ue,reason:de,incompleteParsingEnabled:Oc,specialCapabilities:Ft,askInputRef:q,onRemoveFile:J}),QU=f.useCallback(()=>{if(Ln){if(ut.current?.append(Ln.content),ca(ut.current?.value??"",ut.current?.json),tn){const Zn=tn.find(Fa=>Fa.includes(Ln.fileName));Zn&&$x(Zn)}Vx(null)}},[Ln,ut,ca,tn,$x,Vx]),XU=f.useRef(e);XU.current=e;const ZU=f.useCallback(Zn=>{be(!0),XU.current.length===0&&Ce[St]&&Re(Ce[St]),O?.(Zn)},[be,Re,Ce,St,O]),JU=f.useCallback(Zn=>{ut.current=Zn},[ut]),G5e=f.useMemo(()=>({isOpen:(ke&&!T)??!1,suggestedQueries:Se,focusedIndex:vg,setFocusedIndex:ht,handlePasteQuery:Fx,handleSubmit:Ni,userInputQuery:pr,placement:B,dropdownClassName:V,allowNonSequentialMatch:Se!==Ce[St],isCometHome:Y,scrollableShards:qu.length>0?[Ot]:[]}),[Ce,V,B,vg,T,Fx,Ni,Y,St,ht,ke,Se,qu,Ot,pr]),q5e=f.useMemo(()=>({initialLayout:o,wrapperClass:U({"transition-none p-lg":ke,"border-b-none rounded-b-none":ke&&!T&&B==="bottom","border-t-none rounded-t-none rounded-b-2xl":ke&&!T&&B==="top","bg-base":Be}),size:"large",hasShadow:b,isHighlighted:Z,showStopButton:k,quote:Be??void 0,inputWarnings:Ln&&i.jsxs(z,{variant:"subtler",className:"mx-sm mb-xs px-sm py-xs dark:bg-base flex items-center justify-between rounded-lg",children:[i.jsx("div",{className:"gap-x-sm flex items-center",children:i.jsxs(L,{variant:"tiny",color:"light",children:["Text is"," ",Math.max(1,Math.round((Ln.content.length-Md)/Md*100)),"% over the limit and is attached as a file."," ",i.jsx(Te,{variant:"super",size:"tiny",onClick:QU,text:"Paste as text"})]})}),i.jsx(Te,{icon:Lt,size:"tiny",onClick:Bx,variant:"common",pill:!0,noPadding:!0})]}),attachmentsList:qu.length>0&&se&&i.jsx(lxe,{uploadedFiles:qu,onRemoveFile:$x,incompleteParsingEnabled:Oc,ref:Ot}),setQuote:Oe,inputRef:ut}),[Ln,Bx,B,T,$x,b,o,ut,Oc,QU,Be,Oe,k,ke,qu,Z,se]),K5e=f.useMemo(()=>({ref:JU,id:"ask-input",value:e,json:t,initialLayout:o,minRows:l,placeholder:r,disableInput:a,autoFocus:_,onClick:ZU,onChange:ca,onKeyDown:xg,onBlur:Pc,onFocus:Hu,onPaste:Wf,onMentionMenuOpen:On,onMentionMenuClose:_e,isMobileStyle:je,isMobileUserAgent:ct,useLexical:G,mentionTypeaheadOptions:G?X:void 0,onTriggerTypeahead:G?W:void 0}),[_,a,Pc,ca,ZU,Hu,xg,Wf,o,je,ct,t,X,l,_e,On,W,r,JU,G,e]),Y5e=f.useMemo(()=>i.jsx(ixe,{value:e,json:t,showSources:d,useThreadSources:m,showRecency:p,submitWillFork:u,isFollowUp:c,isDisabled:Uf||!we,querySource:n,errorMessage:mo,handleSubmit:qo,fileUploadRef:st,showFileUpload:y,showModelSelector:h,disableActionButtons:v,fileUploadTooltip:C,disablePrivacyWarning:w,showStopButton:k,onStopButtonClick:N,onFilePickerOpen:I,onFilePickerClose:D,startTranscription:Lx,stopTranscription:Dx,isTranscribing:Gu,isTranscriptionInitializing:wg,isTranscriptionAvailable:!k,fileUploadErrorMessage:Wx,fileUploadWarningMessage:Sg,activeConnector:UU,uploadedFiles:qu,handleStartUpload:BU,handleFileInput:VU,isBoxFilePickerOpen:WU,handleCloseBoxFilePicker:$U,cleanupBoxFilePicker:HU,microsoftFilePickerOptions:zU,handleCloseMicrosoftFilePicker:KU,handleSelectSharepointSite:qU,isMicrosoftFilePickerOpen:GU,fileInputRef:Cg,hasQuery:Da,isAudioVideoFilesEnabled:Vf,setAttachmentErrorMessage:YU,isCometHome:Y,isMissionControl:re}),[UU,HU,v,w,mo,Cg,Wx,C,Sg,$U,VU,qU,BU,qo,Da,Vf,WU,Uf,c,wg,GU,Gu,t,zU,KU,D,I,N,n,YU,y,h,p,d,m,k,Lx,Dx,u,qu,we,e,Y,re]),{isMax:Q5e}=yt();return i.jsx(fxe,{condition:qe&&y,Wrapper:$P,onDrop:Ux,disabled:Mt,allowDropAnywhere:!0,children:i.jsxs(z,{variant:"subtler",className:U(S,"relative rounded-2xl",{"max-super-override":Q5e}),children:[E,i.jsx(f1e,{value:e,suggestDropdownProps:G5e,ResizeableInputWrapperProps:q5e,ResizeableInputProps:K5e,leftAttributionComponents:$?null:i.jsx(jO,{inRenderingPlace:"sidecar",children:i.jsx(F1e,{showIncognitoHint:x,showSearchModeSelector:g,isFollowUp:c,layoutKey:H})}),rightAttributionComponents:Y5e})]})})},F3=A.memo(t_t);F3.displayName="AskInput";const n_t=(e=!1,t)=>{const{value:n,loading:r}=At({flag:"onboarding-comet",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},r_t=(e,t)=>{const{value:n,loading:r}=At({flag:"try-assistant-page-enabled",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function s_t(){const{value:e}=Tc({flag:"comet-ntp-welcome-suggestions",subjectType:"visitor_id",defaultValue:{groups:[]}});return e}const a_t=he(async()=>{const{WelcomeOverlay:e}=await ae(async()=>{const{WelcomeOverlay:t}=await import("./WelcomeOverlay-BC3RcvFs.js");return{WelcomeOverlay:t}},__vite__mapDeps([110,3,1,4,5,6]));return{default:e}}),o_t=e=>e.reduce((t,n)=>n.condition==="ALWAYS"?[...t,...n.suggests.map(r=>({query:r,icon:n.icon,image:n.image}))]:t,[]),mxe=A.memo(()=>{const e=f.useRef(null),{$t:t,locale:n}=Q(),r=_t(),s=Dt(),{trackEvent:a}=Me(),[o,l]=f.useState(!1),[c,u]=f.useState(!0),[d,m]=f.useState(!1),[p,h]=f.useState(!1),g=f.useRef(null),y=wr(),v=f.useRef(null),{isMobileStyle:x}=ye(),b=Ayt(),_=tst(),{variation:w,loading:C}=r_t(!1),{variation:S,loading:E}=n_t(!1),M=Qe(),{openVisitorLoginUpsell:k}=Xn({enabled:!M}),T=f.useMemo(()=>Ae.getItem("hasSeenSignupModal"),[]),j=f.useMemo(()=>yN()===0,[]);f.useEffect(()=>{const Y=_[0];Y&&(xs.preload(Y.videoSrc,{as:"video"}),xs.preload(Y.previewSrc,{as:"image"}))},[_]);const R=$bt({cometBrowser:y,type:"welcome-modal",locale:n}),O=s_t(),P=f.useMemo(()=>o_t(O.groups),[O]),N=f.useCallback(()=>{if(!M)return;const Y=Ae.getItem("hasClosedWelcomeModal"),W=Ae.getItem("hasSeenInviteFriendsModal");if(!C){if(!W&&j){m(!0);return}if(w){if(Y)return;Ae.setItem("hasClosedWelcomeModal","true");try{y.openTab({url:`${window.location.origin}/b/try-assistant`,key:"openTryAssistant"})}catch{window.location.href="/b/try-assistant"}a("new signup ntp education viewed");return}Y?u(!1):(a("new signup ntp education viewed"),l(!0))}},[M,w,y,a,C,j]),I=f.useCallback(()=>{m(!1),Ae.setItem("hasSeenInviteFriendsModal","true"),N()},[N]),D=f.useCallback(()=>!M&&T!=="true"?(k({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:Ie.COMET_NTP,sheetModalVariant:"centered-sheet"}),Ae.setItem("hasSeenSignupModal","true"),!0):!1,[M,T,k,t]);f.useEffect(()=>{if(!E)if(S){const Y=SMe();if(j&&!Y){try{y.openTab({url:`${window.location.origin}/onboarding-comet`,key:"openCometOnboarding"})}catch{window.location.href="/onboarding-comet"}return}}else{if(D())return;N()}},[C,N,D,s,E,S,M,j,y]),f.useEffect(()=>{s?.get("tryAssistant")==="true"&&M&&(u(!0),l(!0),a("new signup ntp education viewed"),Ip({tryAssistant:void 0}))},[s,M,a]);const F=f.useCallback(()=>{if(M)if(w){u(!1);try{y.openTab({url:`${window.location.origin}/b/try-assistant`,key:"tryAssistantButtonClick"})}catch{r.push("/b/try-assistant")}return}else c||u(!0),l(!0),a("ntp education selected");else k({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:Ie.TRY_ASSISTANT_BUTTON,sheetModalVariant:"centered-sheet"})},[r,M,k,t,c,a,w,y]),B=eS(),V=f.useCallback(()=>{l(!1)},[]),$=()=>{navigator.geolocation.getCurrentPosition(ee.info)},G=f.useCallback(()=>{$(),h(!0)},[]),X=f.useMemo(()=>M&&B,[M,B]);return i.jsxs("div",{ref:e,className:"mx-auto flex size-full flex-col",style:x?void 0:{marginLeft:Am*-.5+"px"},children:[i.jsx(xe.div,{initial:{paddingBottom:80},animate:{paddingBottom:p?320:80},exit:{paddingBottom:80},transition:ao,className:"px-md relative isolate mx-auto flex w-full max-w-[800px] grow flex-col items-center justify-center pb-[80px]",children:i.jsx(s0e,{containerRef:e,editMode:p,setEditMode:h,askInput:i.jsx(dF,{})})}),i.jsxs("div",{className:"gap-sm fixed bottom-0 left-1/2 mt-auto flex w-full max-w-[800px] -translate-x-1/2 justify-center py-6 pt-12",children:[i.jsx("div",{ref:g,children:i.jsx(ge,{pill:!0,size:"small",variant:"border",icon:ro,text:t({defaultMessage:"Try Assistant",id:"E4vPUv5Uqt"}),extraCSS:"z-[2] relative",onClick:F})}),X&&i.jsx(ge,{pill:!0,size:"small",variant:"border",icon:Z4e,text:t({defaultMessage:"Mission Control",id:"xFsArGFRC3"}),extraCSS:"z-[2] relative",href:"/b/mission-control"}),i.jsx(ge,{pill:!0,size:"small",variant:"border",icon:J4e,text:t({defaultMessage:"Edit widgets",id:"T1DvA9w3pt"}),extraCSS:"z-[2] relative",onClick:G}),b&&i.jsx(a0e,{pill:!0,size:"small",variant:"border",extraCSS:"z-[2] relative"}),i.jsx("div",{style:{maskImage:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 75%)"},className:"bg-base absolute inset-0"})]}),c&&xs.createPortal(i.jsx(a_t,{isOpen:o,onClose:V,suggestions:R.length?R:P,suggestionsScrollContainerRef:v,buttonRef:g}),document.body),d&&i.jsx(tpe,{isOpen:d,onClose:I})]})});mxe.displayName="CometHomePage";const dF=A.memo(()=>i.jsx(sf,{children:i.jsx(l_t,{})}));dF.displayName="Input";const i_t=A.memo(()=>i.jsxs(i.Fragment,{children:[i.jsx(dF,{}),i.jsx("div",{className:"pt-md h-2xl w-full",children:i.jsx(p3,{context:"sortable-widgets"})})]}));i_t.displayName="InputWrapper";const l_t=()=>{const e="comet-ask-input",{mentionTypeaheadOptions:t,inputPlaceholder:n,onTriggerTypeahead:r}=rD({reason:e,isLazy:!0}),[s,a,o]=FE({csrRedirect:!0});return i.jsx(z,{className:U("static flex w-full flex-col items-center justify-center md:mt-0","z-10"),children:i.jsx("div",{className:"mb-md w-full",children:i.jsx(F3,{...o,value:s,json:a,querySource:"home",autofocus:!0,minRows:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!0,dropdownPlacement:"bottom",useLexical:!0,mentionTypeaheadOptions:t,placeholder:n??o.placeholder,isCometHome:!0,onTriggerTypeahead:r})})})},fF=f.createContext({container:null,setContainer:()=>{},isOpen:!1,setIsOpen:()=>{}}),pxe=A.memo(({children:e})=>{const[t,n]=f.useState(null),[r,s]=f.useState(!1),a=f.useMemo(()=>({container:t,setContainer:n,isOpen:r,setIsOpen:s}),[t,n,r,s]);return i.jsx(fF.Provider,{value:a,children:e})});pxe.displayName="SearchSideContainerProvider";const hxe=()=>f.useContext(fF),c_t=f.memo(({children:e,title:t,onClose:n,toolbarContent:r})=>{const{container:s,setIsOpen:a}=hxe();return f.useEffect(()=>{a(!0)},[a]),S1(()=>{a(!1)}),s?xs.createPortal(i.jsx(gxe,{title:t,onClose:n,toolbarContent:r,children:e}),s):null}),gxe=f.memo(({children:e,title:t,onClose:n,toolbarContent:r})=>i.jsxs("div",{className:"flex h-full min-h-0 flex-1 flex-col",children:[i.jsxs(z,{variant:"background",className:"h-headerHeight gap-sm px-md erp-tab:rounded-none sticky top-0 flex items-center justify-between rounded-t-lg border-b",children:[t&&i.jsx(L,{variant:"baseSemi",className:"truncate",children:t}),i.jsxs("div",{className:"gap-sm flex flex-grow items-center",children:[r,i.jsx(Te,{icon:Lt,onClick:n,size:"small",pill:!0,variant:"common"})]})]}),i.jsx(z,{variant:"background",className:"md:gap-xs erp-tab:rounded-none relative isolate h-0 flex-1 overflow-y-auto overflow-x-hidden rounded-b-lg bg-clip-border shadow-sm",children:e})]}));gxe.displayName="SearchSideContentBody";const yxe=f.memo(()=>{const{isMobileStyle:e}=ye(),{setContainer:t,isOpen:n}=hxe();return e?i.jsx(Xt,{variant:"bottom-sheet",isOpen:n,headerClassname:"hidden",wrapperClassname:"flex-1 !px-0 !pb-0",modalContentClassname:"min-h-0 !flex-1 !p-0",children:i.jsx("div",{ref:t,className:"flex h-full min-h-0 flex-1 flex-col"})}):i.jsx(z,{className:U("lg:py-sm lg:pr-sm erp-tab:py-0 erp-tab:pr-0 xl:erp-tab:pl-2 fixed inset-y-0 right-0 z-[100] flex h-full w-[60vw] min-w-0 flex-1 flex-col text-clip border-l shadow-lg transition-transform duration-200 xl:w-[calc(min(800px,_50vw))] xl:border-l-0 xl:shadow-none",{"pointer-events-none w-0 translate-x-full opacity-0":!n}),ref:t})});yxe.displayName="SearchSideContentWrapper";c_t.displayName="SearchSideContent";const vxe=f.memo(({children:e})=>{const{isOpen:t}=f.useContext(fF),{isXLargeScreen:n}=f3();return i.jsx("div",{className:U("flex size-full flex-1 transition-all duration-200",{"pr-[60vw] xl:pr-[calc(min(800px,_50vw))]":t&&n}),children:e})});vxe.displayName="SearchSideContentLayoutWrapper";const a_=30,U3=({autoFetch:e,reason:t})=>{const{session:n}=Ct(),r=mt(),s=async({pageParam:h=0})=>{(!h||h<0)&&(h=1);const g=(h-1)*a_;return await YWe({params:{limit:a_,offset:g},reason:t})},a=Cc({queryKey:an,enabled:e&&!!n,initialPageParam:0,queryFn:({pageParam:h})=>s({pageParam:h}),getNextPageParam:(h,g)=>h&&h[0]?.has_next_page?g.length+1:void 0}),o=a.data?.pageParams?.length??1,l=a.data?.pages??le,c=f.useMemo(()=>l.flat(),[l]),u=l[l.length-1]?.[0]?.has_next_page,d=f.useMemo(()=>({currentPage:o,hasNextPage:!!u,hasPreviousPage:o>1,getNextPage:()=>a.fetchNextPage(),getPreviousPage:()=>a.fetchPreviousPage()}),[o,u,a]),m=f.useCallback(h=>{const g=[],y=[];let v=0;for(;v<h.length;)y.push(g.length),g.push(h.slice(v,v+a_)),v+=a_;r.setQueryData(an,{pages:g,pageParams:y})},[r]),p=f.useCallback(()=>{!d.hasNextPage||a.isLoading||d.getNextPage()},[a.isLoading,d]);return f.useMemo(()=>({...a,fetchNextPage:p,collections:c,paginationInfo:d,updateCache:m}),[c,p,d,a,m])},u_t=({reason:e})=>{const{collections:t}=U3({autoFetch:!0,reason:e}),{data:n}=sue({reason:e}),r=t?.filter(o=>!Ap(o.user_permission)),s=n?.[0]?.link;return r?.length===0?"/spaces/templates/":s||"/spaces/templates/"},d_t={palette:rke,flask:nke,tv:tne,microchip_ai:GR,dollar_circle:tke,medal:OR,plane:HC,paint_brush:ene};function f_t({userSelectedTopics:e,topics:t}){const n=e.map(s=>s.id);return Object.fromEntries(t.map(s=>{const a={...s,userSelected:n.includes(s.id)};return[s.id,a]}))}const m_t=({allTopics:e})=>{const{$t:t}=Q();return f.useMemo(()=>[{id:"you",slug:"you",name:t({defaultMessage:"For You",id:"5KhEnUXBTF"}),icon:eke,description:t({defaultMessage:"Stories curated for you",id:"2sibbc2gbI"}),isAlwaysShown:!0},{id:"top",slug:"top",name:t({defaultMessage:"Top",id:"X/9XdXSCBu"}),icon:MN,isAlwaysShown:!0},...e.map(r=>({id:r.id,name:r.translated_name??r.name,icon:d_t[r.icon]??MN,slug:r.slug}))],[e,t])};function p_t(e){return e==="you"||e==="top"||e==="trending"?null:e}const xxe=A.memo(e=>{const{$t:t}=Q(),{isMobileStyle:n}=ye();return i.jsx(Xt,{...e,title:t({defaultMessage:"Make it yours",id:"RBKgNODPrT"}),variant:n?"bottom-left-sheet":void 0,children:i.jsx("div",{className:"mb-safeAreaInsetBottom md:-m-md md:-mb-10",children:i.jsx("div",{className:"-m-md md:m-0",children:i.jsx(bxe,{title:t({defaultMessage:"Select topics and interests to customize your Discover experience",id:"EmIFJDqmup"}),onSave:e.onSave,discoverTopicMap:e.discoverTopicMap,userSelectedTopics:e.userSelectedTopics})})})})});xxe.displayName="InterestConfigurationSheet";const bxe=A.memo(({title:e,subtitle:t,onClose:n,onSave:r,discoverTopicMap:s,userSelectedTopics:a,variant:o})=>{const{$t:l}=Q(),[c,u]=f.useState(a),d=Qe(),{openVisitorLoginUpsell:m}=Xn({enabled:!d}),{trackEvent:p}=Me();f.useEffect(()=>{p("discover topics picker opened",{})},[p]);const h=f.useCallback(()=>{m({title:l({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:Ie.DISCOVER_TOPICS,sheetModalVariant:"bottom-sheet-gradient"})},[l,m]),g=x=>{if(p(c.includes(x)?"discover topic unselected":"discover topic selected",{topicUUID:p_t(x)}),!d){h();return}u(b=>b.includes(x)?b.filter(_=>_!==x):b.concat(x))},y=f.useCallback(()=>{if(p("discover topics picker saved",{}),!d){h();return}r(c)},[c,d,r,h,p]),v=f.useCallback(x=>{x.stopPropagation()},[]);return i.jsxs(z,{variant:"background",className:"p-md relative rounded-xl",onClick:v,children:[i.jsxs("div",{className:"relative z-[2]",children:[i.jsxs("div",{className:"mb-md flex items-start justify-between",children:[i.jsxs("div",{children:[e&&i.jsx(L,{variant:"baseSemi",children:e}),t&&i.jsx(L,{color:"light",variant:"small",children:t})]}),n&&i.jsx(Te,{icon:Lt,size:"tiny",pill:!0,onClick:n,extraCSS:"-mt-sm -mr-sm hover:!bg-inverse/5"})]}),i.jsx("div",{className:"gap-sm flex flex-wrap",children:Object.values(s).map(x=>x.isAlwaysShown?null:i.jsx(_xe,{topic:x.id,topicData:x,onClick:g,selected:c.includes(x.id)},x.id))}),i.jsx("div",{className:"mt-md bg-inverse h-px opacity-10"}),i.jsx("div",{className:"mt-md",children:i.jsx(ge,{text:l({defaultMessage:"Save Interests",id:"YbI1HM86Ih"}),variant:"primary",size:"small",extraCSS:"w-full",onClick:y})})]}),o==="offset"&&i.jsx("div",{className:"rounded-inherit absolute inset-0 z-[1] dark:bg-black",children:i.jsx("div",{className:"bg-super/10 dark:bg-super/25 dark:border-super/5 rounded-inherit absolute inset-0 z-[1] dark:border"})})]})});bxe.displayName="InterestConfigurationBox";const _xe=A.memo(({topic:e,topicData:t,selected:n,onClick:r})=>i.jsxs(xe.button,{className:U("px-sm py-xs inline-flex cursor-pointer items-center gap-1.5 rounded-md duration-150 active:scale-[0.95]",{"bg-super/15 dark:bg-white/5":!n},{"bg-super":n}),onClick:()=>r(e),children:[i.jsx(it,{mode:"popLayout",initial:!1,children:i.jsx(xe.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2,type:"spring",bounce:.2},children:i.jsx(me,{icon:n?Xte:t.icon,size:"sm",className:U({"text-quiet":!n},{"text-inverse":n})})},n?`selected-${e}`:e)}),i.jsx(L,{variant:"small",className:U({"text-quiet":!n},{"text-inverse":n}),children:t.name})]}));_xe.displayName="InterestPill";const h_t=({reason:e})=>{const t=mt();return bt({mutationKey:["discover_update_topics",{}],mutationFn:r=>Iit({topics:r,reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:dle()}),t.invalidateQueries({queryKey:Vl()})}})},mC=f.memo(()=>i.jsx(wn,{speed:"slow",className:"flex flex-col gap-2",children:Array.from({length:4}).map((e,t)=>i.jsxs(z,{className:U("grid place-items-center",{"w-[90%]":t===0||t===1,"w-[70%]":t===2,"w-[60%]":t===3}),children:[i.jsx(L,{variant:"small",className:"opacity-0",style:{gridArea:"1/-1"},children:""}),i.jsx(z,{variant:"offsetPlus",className:"h-2 w-full rounded-full",style:{gridArea:"1/-1"}})]},t))}));mC.displayName="SidebarListLoader";const Av=f.memo(({children:e})=>i.jsx("div",{className:"flex flex-col gap-[10px]",children:e}));Av.displayName="SidebarSubMenu";const jv=f.memo(()=>i.jsx("div",{className:"bg-subtle h-px"}));jv.displayName="SidebarDivider";const rh=f.memo(({text:e,accessory:t,className:n,href:r,onClick:s,onMouseOver:a,testId:o})=>{const l=i.jsx(L,{variant:"tiny",color:"light",className:"group-hover:text-foreground",children:e}),c=r?i.jsxs(Ye,{href:r,className:"group relative block",onClick:s,onMouseOver:a,"data-testid":o||"library-button",draggable:!1,children:[i.jsx(z,{variant:"offsetPlus",className:"-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100"}),i.jsxs("span",{className:"relative flex items-center gap-0.5",children:[l,i.jsx(_r,{className:"text-quiet group-hover:text-foreground -me-xs duration-quick size-4 opacity-0 group-hover/header:opacity-100 rtl:rotate-180"})]})]}):l;return i.jsxs("div",{className:U("group/header gap-xs flex h-6 items-center justify-between",n),children:[c,i.jsx(it,{initial:!1,children:t&&i.jsx(xe.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:t})})]})});rh.displayName="SidebarSubMenuHeader";const m9=f.memo(({href:e,text:t,onMouseOver:n,onClick:r})=>i.jsx(Ye,{href:e,className:"block",onMouseOver:n,onClick:r,children:i.jsx(L,{variant:"tinyRegular",color:"light",className:"duration-quick hover:opacity-60",children:t})}));m9.displayName="SidebarLink";const gs=f.memo(({href:e,text:t,icon:n,fadeOut:r,onClick:s,selected:a,deemphasized:o,menuItems:l,testId:c,sidebarOpen:u,accessory:d,loading:m})=>{const p=Kh(),[h,g]=f.useState(!1),y=i.jsxs(i.Fragment,{children:[i.jsx(z,{variant:"offsetPlus",className:U("-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100",{"opacity-100":a||h})}),i.jsxs(L,{className:"relative flex items-center gap-2",variant:"small",color:o?"light":void 0,children:[n&&(f.isValidElement(n)?n:i.jsx(me,{icon:n,className:"size-[18px]"})),i.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:r?p?"linear-gradient(to left, black 85%, transparent 97%)":"linear-gradient(to right, black 85%, transparent 97%)":void 0},children:t}),i.jsx(it,{initial:!1,children:d&&i.jsx(xe.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:d})}),l&&u&&!m&&i.jsx("span",{style:{maskImage:p?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},className:U("bg-offsetPlus ps-md -end-xs duration-quick absolute top-1/2 inline-flex -translate-y-1/2 translate-x-px opacity-0 group-hover:opacity-100",{"opacity-100":h}),children:i.jsx(Jt,{isMobileStyle:!1,items:l,placement:p?"left":"right",onOpen:()=>g(!0),onClose:()=>g(!1),children:i.jsx("div",{onClick:v=>{v.preventDefault()},className:"hover:bg-inverse/5 p-xs duration-quick rounded",children:i.jsx(me,{icon:du,size:14,className:"text-quietest hover:text-quiet duration-quick"})})})}),m&&i.jsx("span",{style:{maskImage:p?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},className:U("group-hover:bg-offsetPlus text-super ps-md -end-xs absolute top-1/2 -translate-x-0.5 -translate-y-1/2",{"bg-offsetPlus":a,"bg-subtler":!a}),children:i.jsx("div",{className:"flex size-[14px] items-center justify-center",children:i.jsx(as,{size:12})})})]})]});return e?i.jsx(Ye,{href:e,className:"group relative block","data-testid":c,draggable:!1,children:i.jsx("div",{className:"group relative block",onClick:s,children:y})}):i.jsx("button",{onClick:s,className:"group relative block appearance-none text-left",type:"button","data-testid":c,children:y})});gs.displayName="SidebarSubMenuItem";const KX=e=>{const t=e?.split("/").slice(1);return t?t[1]:null},wxe=f.memo(({isConfiguring:e,setConfiguring:t,sidebarOpen:n})=>{const r="discover-sidebar",s=Qe(),a=Nt(),{data:o,isLoading:l}=Rit(),c=Qe(),u=m_t({allTopics:o?.allTopics??le}),d=o?.userSelectedTopics??le,m=f_t({userSelectedTopics:d,topics:u}),p=d.length>0?"selected":"default",h=f.useCallback(_=>_.id==="top"||_.id==="trending"?!0:_.id==="you"?s:p==="default"?!0:!!_.userSelected,[p,s]),g=f.useMemo(()=>{const _=[],w=[];return Object.values(m).map(C=>{const{name:S,icon:E,slug:M}=C;h(C)?_.push({text:S,icon:E,link:`/discover/${M}`,active:KX(a)===M}):w.push({text:S,icon:E,link:`/discover/${M}`,active:KX(a)===M})}),{activeItems:_,overflowItems:w}},[m,h,a]),y=d.map(_=>_.id),v=h_t({reason:r}),x=_=>{v.mutate(Array.from(_)),e&&t(!1)},{$t:b}=Q();return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col gap-[12px]",children:[i.jsx(rh,{text:b({defaultMessage:"Topics",id:"kc79d3WUbd"})}),l?i.jsx(mC,{}):i.jsx(Av,{children:g.activeItems.map(_=>i.jsx(gs,{href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))}),g.overflowItems.length>0&&c&&i.jsxs(i.Fragment,{children:[i.jsx(rh,{text:b({defaultMessage:"More",id:"I5NMJ8llIi"})}),i.jsx(Av,{children:g.overflowItems.map(_=>i.jsx(gs,{href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))})]})]}),i.jsx(xxe,{isOpen:e,onClose:()=>t(!1),onSave:x,discoverTopicMap:m,userSelectedTopics:y})]})});wxe.displayName="DiscoverSidebar";const fw="recentItems";async function g_t({reason:e}){try{const t=await ne.GET("/rest/thread/list_recent",e),n=t.data;if(!t.response.ok)throw new Error("Failed to get recent threads.");return n??le}catch(t){return ee.error("Failed to get recent threads.",t),le}}const y_t=({reason:e})=>{const{isIncognito:t}=oa({reason:e}),{inFlightLatest:n}=Ht(),{session:r}=Ct(),s=r?.user?.email,{data:a,refetch:o,isLoading:l}=$e({queryKey:[fw,s],queryFn:async()=>!s||t?le:await g_t({reason:e})});return f.useEffect(()=>{n||o({cancelRefetch:!1})},[n,o]),f.useMemo(()=>!s||t?{data:[],isLoading:!1}:{data:a??le,isLoading:l},[a,s,t,l])},v_t={about:_0,born:B5,age:B5,died:B5,parents:_N,siblings:_N,children:mke,spouse:kN,spouses:kN,education:C0,educated_at:C0,net_worth:fke,ratings:MN,directed_by:rne,starring:_0,watch_on:Hte,treatment:dke,symptoms:uke,specialists:cke};function x_t(e){return e&&v_t[e]||null}const b_t={EXTERNAL_LINK_TYPE_UNSPECIFIED:S0,PRIMARY:S0,WIKIPEDIA:lke,X:ike,INSTAGRAM:oke,TIKTOK:ake,YOUTUBE:nne,FACEBOOK:ske,MAYOCLINIC:bi,IMDB:Ite};function YX(e){return b_t[e]}const Cxe=f.createContext({menuItems:void 0}),fg=()=>{const e=f.useContext(Cxe);if(!e)throw new Error("usePanel must be used within PanelContext");return e},er=({children:e,menuItems:t,variant:n,className:r})=>i.jsx(zr,{fallback:null,children:i.jsx(Cxe.Provider,{value:{menuItems:t},children:n==="noChrome"?i.jsx(z,{className:r||"mb-md",children:e}):i.jsx(Pn,{shadow:!0,className:`${r||"mb-md"} p-md`,children:e})})}),__t=({menuItems:e,buttonClass:t,placement:n})=>{const{isMobileStyle:r}=ye();return e.length<=0?null:i.jsx(Jt,{items:e,isMobileStyle:r,placement:n,children:i.jsx(Te,{size:"tiny",pill:!0,icon:du,extraCSS:t})})},w_t=({title:e,href:t,subtitle:n,image_url:r,links:s,children:a,entryUUID:o,data:l})=>{const{trackEvent:c}=Me(),u=f.useCallback(d=>{c("knowledge card link clicked",{label:"social media",socialMediaType:d.type,value:d.url,entryUUID:o,type:l?.type??"",name:l?.title??"",id:l?.source_url??""})},[l?.source_url,l?.title,l?.type,o,c]);return i.jsx(z,{className:"gap-sm flex w-full justify-between",children:i.jsxs("div",{className:"gap-md flex grow items-start",children:[r?i.jsx("div",{className:"flex-none",children:i.jsx(is,{imageClassName:"size-[120px] object-cover object-top",rounded:"md",src:r,alt:e,includeLightBoxModal:!1})}):null,i.jsxs("div",{className:"flex h-full grow flex-col",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"gap-sm mb-two flex items-start",children:[i.jsx(L,{variant:"section-title",className:"flex-1",children:t?i.jsx(Ye,{href:t,target:"_blank",className:"hover:text-super flex-1 duration-150",children:e}):e}),a]}),n&&i.jsx(L,{variant:"small",className:"mb-sm mr-sm text-pretty",children:n})]}),s&&s.length>0&&i.jsx("div",{className:"gap-sm flex flex-wrap",children:s.map(d=>i.jsx(Sxe,{link:d,solo:s.length===1,handleLinkClick:u},d.type))})]})]})})},Sxe=A.memo(({link:e,solo:t,handleLinkClick:n})=>{const r=f.useCallback(()=>n(e),[n,e]);return t?i.jsx(ge,{icon:YX(e.type),text:e.title,textClassName:"font-normal ml-2xs text-quiet ",size:"tiny",href:e.url,target:"_blank",onClick:r},e.url):i.jsx(ge,{icon:YX(e.type),size:"tiny",href:e.url,target:"_blank",onClick:r},e.type)});Sxe.displayName="ButtonFactory";const C_t=({name:e,title:t,value:n})=>{const r=x_t(e);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"gap-sm flex min-w-[120px]",children:[r&&i.jsx(L,{variant:"smallBold",color:"light",className:"w-5",children:i.jsx(me,{icon:r,size:"sm"})}),i.jsx(L,{variant:"smallBold",color:"light",children:t})]}),i.jsx(L,{variant:"small",children:n})]})},S_t=({children:e})=>i.jsx(z,{className:"pt-sm px-md border-t",children:e});er.Title=w_t;er.Item=C_t;er.Menu=__t;er.Footer=S_t;const Exe=A.memo(({graphData:e})=>{const[t,n]=f.useState(!1),r=e.url,s=e.name,a=f.useCallback(()=>n(!1),[]);return i.jsxs("div",{className:"flex justify-center",children:[i.jsx("img",{src:r,alt:s,className:"max-h-[50vh] overflow-hidden rounded align-middle",onClick:()=>n(!0)}),i.jsx(Mxe,{isOpen:t,onClose:a,alt:s,src:r})]})});Exe.displayName="StaticImageGraph";const Mxe=A.memo(({isOpen:e,onClose:t,alt:n,src:r})=>{const s=f.useCallback(()=>t(!1),[t]);return i.jsxs(Xt,{onClose:s,isOpen:e,variant:"hide-chrome",disableAnimation:!1,children:[i.jsx("div",{className:"flex place-content-center",onClick:()=>t(!1),children:i.jsx("div",{className:"gap-xs p-md md:p-xl flex flex-col items-center justify-between",children:i.jsx("div",{className:"grow",children:i.jsx("img",{alt:n,src:r,className:"max-h-[50vh]"})})})}),i.jsx(ge,{onClick:s,icon:Lt,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});Mxe.displayName="ImageModal";const kxe=A.memo(({graphData:e})=>i.jsxs(er,{className:"gap-md bg-subtler p-md flex flex-col rounded-md text-center",children:[i.jsx(er.Title,{title:e.name,subtitle:""}),i.jsx(Exe,{graphData:e})]}));kxe.displayName="GraphPanel";const E_t={pendingClarifications:[],addClarification:()=>{},clearClarifications:()=>{}},Txe=f.createContext(E_t),M_t=({children:e})=>{const[t,n]=f.useState([]),r=f.useCallback(o=>{n(t.concat([o]))},[t]),s=f.useCallback(()=>{n([])},[]),a={pendingClarifications:t,clearClarifications:s,addClarification:r};return i.jsx(Txe.Provider,{value:a,children:e})},Nxe=()=>{const e=f.useContext(Txe);if(!e)throw new Error("useDeepResearchState must be used within DeepResearchContext");return e};var Oi={},QX;function k_t(){if(QX)return Oi;QX=1;var e=Oi&&Oi.__values||function(s){var a=typeof Symbol=="function"&&s[Symbol.iterator],o=0;return a?a.call(s):{next:function(){return s&&o>=s.length&&(s=void 0),{value:s&&s[o++],done:!s}}}},t=Oi&&Oi.__read||function(s,a){var o=typeof Symbol=="function"&&s[Symbol.iterator];if(!o)return s;var l=o.call(s),c,u=[],d;try{for(;(a===void 0||a-- >0)&&!(c=l.next()).done;)u.push(c.value)}catch(m){d={error:m}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(d)throw d.error}}return u};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.selectState=function(s){return s};function n(){var s,a,o;function l(c){var u=0,d;function m(h){var g,y;s||(s={state:h,version:1}),s.state!==h&&(s.state=h,s.version+=1);var v=s.version,x;if(d){if(v===d.stateVersion)return d.value;var b=!1;try{for(var _=e(d.dependencies.entries()),w=_.next();!w.done;w=_.next()){var C=t(w.value,2),S=C[0],E=C[1];if(S(h)!==E){b=!0,x=S;break}}}catch(j){g={error:j}}finally{try{w&&!w.done&&(y=_.return)&&y.call(_)}finally{if(g)throw g.error}}if(!b)return d.value}u+=1;var M=new Map,k=Object.assign(function(j){if(M.has(j))return M.get(j);var R=j(h);return M.set(j,R),R},{reason:x}),T=o?o(function(){return c(k)},p,h,x):c(k);if(M.size===0)throw new Error("[rereselect] Selector malfunction: The selection logic must select some data by calling `query(selector)` at least once.");return d={stateVersion:v,dependencies:M,value:T},T}var p=Object.assign(function(g){return a?a(function(){return m(g)},p,g):m(g)},{selectionLogic:c,recomputations:function(){return u},resetRecomputations:function(){return u=0},introspect:function(){return d}});return p}return{makeSelector:l,setInvocationWrapper:function(c){a=c},setComputationWrapper:function(c){o=c}}}Oi.createSelectionContext=n;var r=n();return Oi.makeSelector=r.makeSelector,Oi}var xt=k_t();const o_=.2,Axe=A.memo(({title:e,loading:t})=>{const{isMobileStyle:n}=ye(),r=n;return i.jsx(wn,{active:t,className:"gap-sm flex w-full items-center",speed:"slow",children:i.jsx(it,{mode:"popLayout",initial:!1,children:i.jsx(xe.div,{initial:{y:"-50%",opacity:0},animate:{y:0,opacity:1,transition:{y:{duration:.2,ease:na,delay:o_+.1},opacity:{duration:.2,ease:"linear",delay:o_+.1}}},exit:{y:"50%",opacity:0,transition:{y:{duration:.2,ease:Vne,delay:o_},opacity:{duration:.2,ease:"linear",delay:o_}}},className:"w-full",children:i.jsx(L,{variant:r?"baseSemi":"section-title",color:t?"ultraLight":void 0,children:e})},e)})})});Axe.displayName="EntityGroupTitle";const jxe=f.createContext(void 0),T_t=()=>{const e=f.useContext(jxe);if(!e)throw new Error("useEntityGroup must be used within an EntityGroupProvider");return e},Rxe=A.memo(({children:e})=>{const[t,n]=f.useState(!1);return i.jsx(jxe.Provider,{value:{viewMoreOpen:t,setViewMoreOpen:n},children:e})});Rxe.displayName="EntityGroupProvider";const dx=e=>{let t;if("meta_data"in e?t=e.meta_data:t=ns(e).with({place_widget_block:Rd.nonNullable},n=>({...n.place_widget_block,object:"PlaceWidget"})).with({shopping_widget_block:Rd.nonNullable},n=>({...n.shopping_widget_block,progress:Bl.DONE,object:"ShopifyWidget"})).with({search_result_widget_block:Rd.nonNullable},n=>{const r=n.search_result_widget_block.metadata||{},s=r.object;if(s==="WeatherWidget")return{...r,progress:Bl.DONE,object:"WeatherWidget"};if(s==="TimeWidget")return{...r,progress:Bl.DONE,object:"TimeWidget"};if(s==="CalculatorWidget")return{...r,progress:Bl.DONE,object:"CalculatorWidget"};if(s==="TaskWidget")return{...r,progress:Bl.DONE,object:"TaskWidget"};if(s==="TimerWidget")return{...r,progress:Bl.DONE,object:"TimerWidget"};if(s==="CurrencyExchangeWidget")return{...r,progress:Bl.DONE,object:"CurrencyExchangeWidget"}}).otherwise(()=>{}),!!t)return t},Ixe=f.createContext({selectedWidgetId:void 0,scrollToWidget:()=>{},entityRefs:{}}),mF=()=>{const e=f.useContext(Ixe);if(!e)throw new Error("useScrollToWidget must be used within ScrollToWidgetContext");return e},Pxe=A.memo(({children:e,entities:t})=>{const[n,r]=f.useState({}),[s,a]=f.useState(void 0),{scrollContainerRef:o}=Bo(),l=f.useRef(null);f.useEffect(()=>()=>{r({})},[]),f.useEffect(()=>{r(u=>{const d=u;let m=!1;return t?.map(p=>{const h=dx(p);if(!h)return;if(h.object==="ShopifyWidget"){const y=h.id;if(!n[y]){m=!0;const v=f.createRef();d[y]=v}}}),m?d:u})},[t,n]);const c=u=>{l.current&&clearTimeout(l.current);const d=n[u]?.current;if(d&&o?.current){const p=d.getBoundingClientRect().top+o.current?.scrollTop-200;o?.current?.scrollTo({top:p,behavior:"smooth"})}a(u),l.current=setTimeout(()=>{a(void 0)},2e3)};return i.jsx(Ixe.Provider,{value:{selectedWidgetId:s,scrollToWidget:c,entityRefs:n},children:e})});Pxe.displayName="ScrollToWidgetProvider";const N_t=3,Oxe=A.memo(({onClick:e,disabled:t,images:n})=>{const{$t:r}=Q();return i.jsx("div",{className:"flex items-center justify-center",children:i.jsxs(z,{variant:"background",bgHover:"subtler",className:U("gap-sm py-md group flex w-full cursor-pointer items-center justify-center rounded-lg border",{"pointer-events-none opacity-50":t}),onClick:e,children:[i.jsx("div",{className:"mx-xs flex items-center",children:n.slice(0,N_t).map((s,a)=>i.jsxs("div",{className:U("-ml-xs dark:ring-inverse relative size-6 shrink-0 overflow-hidden rounded bg-white p-[0.1rem] shadow-sm duration-150 dark:ring",{"group-hover:-translate-x-sm":a===1},{"group-hover:-translate-x-md":a===0}),children:[i.jsx(is,{src:s.src,containerClassName:U("relative size-full"),alt:"",maskClassName:"!rounded-[0.18rem]",includeLightBoxModal:!1,imageClassName:"w-full h-full object-contain bg-white"}),i.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-transparent"})]},s.src))}),i.jsx(L,{variant:"smallBold",children:r({defaultMessage:"All Products",id:"enAu2bZ4pg"})})]})})});Oxe.displayName="ViewAllButton";const Lxe=A.memo(()=>i.jsx(Dxe,{}));Lxe.displayName="WidgetPlaceholder";const Dxe=A.memo(()=>{const e=f.useMemo(()=>({maskImage:"linear-gradient(to bottom, black, transparent)"}),[]);return i.jsx(xe.div,{children:i.jsx(z,{variant:"subtler",className:"flex h-[200px] animate-pulse rounded-lg",style:e})})});Dxe.displayName="HighIntentWidgetAnimationPlaceholder";const Fxe=f.createContext({entityId:"",menuItems:void 0,variant:void 0}),fx=()=>{const e=f.useContext(Fxe);if(!e)throw new Error("useEntity must be used within EntityContext");return e},A_t=({children:e,id:t,menuItems:n,className:r,entityVariant:s})=>i.jsx(Fxe.Provider,{value:{entityId:t,menuItems:n,variant:s},children:i.jsx(Pn,{variant:s==="hide-chrome"?"transparent":void 0,className:U("group/card flex flex-col",{"p-md":s!=="hide-chrome"},r),children:e})}),j_t=({className:e,...t})=>i.jsx(z,{className:U("gap-sm md:gap-md relative flex flex-col rounded-lg md:flex-row",e),...t}),R_t=({primaryButtonText:e,onPrimaryButtonClick:t,listNumber:n,className:r,children:s,...a})=>i.jsxs("div",{className:U("relative md:w-[calc(30%_-_8px)]",r),...a,children:[i.jsxs("div",{className:"gap-md flex h-full flex-col justify-between",children:[s,e&&t&&i.jsx("div",{className:"flex flex-col items-stretch md:max-w-[160px]",children:i.jsx(ge,{text:e,variant:"primary",onClick:t,pill:!0,size:"small"})})]}),typeof n=="number"&&i.jsx(L,{variant:"smallCaps",color:"light",className:"border-subtler bg-base absolute -left-1.5 -top-1.5 flex size-5 shrink-0 items-center justify-center rounded-full border shadow-sm",children:n})]}),I_t=({className:e,buttonProps:t,secondaryButtonProps:n,trailingComponent:r,children:s,...a})=>{const{menuItems:o}=fx();return i.jsx("div",{className:U("flex min-w-0 flex-1 flex-col",e),...a,children:i.jsxs("div",{className:"gap-sm md:gap-md flex flex-1 flex-col justify-between rounded-lg",children:[i.jsx("div",{className:"gap-xs flex flex-col justify-between",children:i.jsx("div",{className:U("gap-xs relative mb-4 mt-2 flex flex-col md:mt-0"),children:s})}),(t||n)&&i.jsxs("div",{className:"gap-sm flex w-full items-center",children:[t&&i.jsx(ge,{variant:"primary",pill:!0,size:"small",...t,extraCSS:`${t.extraCSS} w-full max-w-[160px]`}),n&&i.jsx(ge,{variant:"border",pill:!0,size:"small",...n,extraCSS:`${n.extraCSS}`}),r,o&&o.length>0&&i.jsx("div",{className:"duration-150 group-hover/card:opacity-100 md:opacity-0",children:i.jsx(er.Menu,{menuItems:o,placement:"bottom-start"})})]})]})})},P_t=({title:e,onTitleClick:t,className:n})=>{const{selectedWidgetId:r}=mF(),{entityId:s}=fx(),{isMobileStyle:a}=ye();return i.jsx("div",{onClick:t,className:n,children:i.jsx(L,{variant:a?"section-title":"entry-title",className:U("line-clamp-3 cursor-pointer !leading-tight duration-150 hover:opacity-70 md:text-2xl"),children:i.jsx("span",{className:U("rounded-md duration-300",{"bg-super/10":r===s}),children:e})})})},O_t=({loading:e,className:t,onClick:n,trailingText:r})=>{const{$t:s}=Q();return i.jsxs(z,{className:U("group relative flex h-12 items-center",{"opacity-50":e,"cursor-pointer":!e},t),onClick:e?void 0:n,children:[!e&&i.jsx(z,{variant:"offsetPlus",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),i.jsxs("div",{className:"relative w-full",children:[i.jsxs("div",{className:U("gap-md relative flex w-full items-center justify-between",{"opacity-0":e}),children:[i.jsx(L,{variant:"smallBold",color:"light",children:s({defaultMessage:"View More",id:"QQSdHPJWXu"})}),i.jsxs(L,{variant:"tiny",color:"light",className:"gap-sm flex items-center",children:[r,i.jsx(me,{icon:_r,size:"xs"})]})]}),e&&i.jsxs("div",{className:"absolute inset-0 flex items-center justify-between",children:[i.jsx(z,{className:"h-2 w-[100px] rounded-full",variant:"offsetPlus"}),i.jsx(me,{icon:_r,className:"text-quietest",size:"sm"})]})]})]})},L_t=({title:e,className:t,children:n,trailingContent:r,defaultExpanded:s=!1})=>{const[a,o]=f.useState(!s);return i.jsxs(z,{className:t,children:[i.jsxs("div",{onClick:()=>o(!a),className:"group relative flex h-12 cursor-pointer select-none items-center justify-between",children:[i.jsx(z,{variant:"offsetPlus",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),i.jsx(L,{variant:"smallBold",color:"light",className:"relative",children:e}),i.jsxs("div",{className:"gap-md relative flex items-center",children:[i.jsx("div",{className:"gap-xs flex items-stretch",children:r}),i.jsx(me,{icon:Qn,className:U("text-foreground relative opacity-50",{"rotate-180":!a}),size:"sm"})]})]}),i.jsx(Uo,{transition:{ease:Ta(.16,1,.3,1),duration:.2},initial:!1,children:!a&&i.jsx(so,{transition:{duration:.1},exit:{y:-5,opacity:0},animate:{y:0,opacity:1},initial:{y:-5,opacity:0},children:i.jsx("div",{className:"pb-4",children:n})})})]})},Uxe=A_t,$Vt=j_t,HVt=P_t,zVt=L_t,GVt=R_t,qVt=I_t,KVt=O_t,B3=A.memo(({isOpen:e,children:t,placement:n,hoverOpen:r=!1,disabled:s=!1,onOpen:a,onClose:o,content:l,contentWidth:c="360px",isMobileStyle:u,boxProps:d,canOutsideClickClose:m,removeScroll:p,ref:h,...g})=>{const[y,v]=f.useState(!1),x=f.useMemo(()=>e!==void 0,[e]),b=f.useMemo(()=>x?e:y,[x,e,y]),_=f.useCallback(()=>{!b&&!s&&(a?.(),x||v(!0))},[s,x,a,b]),w=f.useCallback(()=>{b&&!s&&(o?.(),x||v(!1))},[s,x,o,b]);f.useImperativeHandle(h,()=>({dismiss:w}),[w]);const C=f.useMemo(()=>({width:c??void 0}),[c]),S=f.useMemo(()=>i.jsx(z,{style:C,...d,children:l}),[C,d,l]),E=f.useMemo(()=>({canOutsideClickClose:m??!0,removeScroll:p}),[m,p]);return u?i.jsxs(i.Fragment,{children:[i.jsx(Xt,{variant:"bottom-left-sheet",actionList:le,isOpen:b,onClose:w,children:l}),i.jsx("span",{onClick:_,children:t})]}):i.jsx(lo,{isOpen:b,hoverOpen:r,placement:n,onClose:w,onOpen:_,overlayProps:E,content:S,hasInteractiveContent:!0,...g,children:t})});B3.displayName="DropDownModal";const D_t=A.memo(({inFlight:e,chooseIfReason:t,chooseIfLeadInCopy:n,pros:r,cons:s,className:a,viewState:o="collapsed",id:l})=>{const c=!t&&e;return i.jsx(wn,{active:c,className:U("relative",a),children:i.jsx(Uo,{children:i.jsx(so,{children:i.jsxs("div",{className:"gap-sm pb-xs relative mt-3 flex flex-col rounded-md md:mx-0",children:[i.jsx(Bxe,{reason:t,leadInCopy:n,loading:c}),i.jsx(Rv,{pros:r??le,cons:s??le,loading:c,viewState:o,id:l})]})})})})});D_t.displayName="EntityItemGuidance";const Bxe=A.memo(({reason:e,leadInCopy:t,loading:n,textVariant:r="base"})=>{const{variant:s}=fx();return!e&&!n?null:i.jsx("div",{className:U("flex items-start gap-[12px] rounded-md md:items-center"),children:i.jsx("div",{className:"w-full",children:n?i.jsxs("div",{className:"gap-sm pb-sm flex flex-col",children:[i.jsx(z,{variant:s==="hide-chrome"?"subtler":"offsetPlus",className:"h-2 w-full rounded-full"}),i.jsx(z,{variant:s==="hide-chrome"?"subtler":"offsetPlus",className:"h-2 rounded-full"}),i.jsx(z,{variant:s==="hide-chrome"?"subtler":"offsetPlus",className:"h-2 w-1/2 rounded-full"})]}):i.jsxs(L,{variant:r,children:[i.jsx("span",{className:"font-medium",children:t})," ",e]})})})});Bxe.displayName="EntityItemChooseIf";const Vxe=3,Wxe=2,Rv=A.memo(({pros:e,cons:t,loading:n,className:r,viewState:s="collapsed",id:a,scrollOnMobile:o=!0})=>!n&&e.length===0&&t.length===0?null:i.jsx("div",{className:r,children:s==="collapsed"?i.jsx(Hxe,{loading:n,pros:e,cons:t,id:a,scrollOnMobile:o}):i.jsx(zxe,{loading:n,pros:e,cons:t})}));Rv.displayName="EntityItemProsCons";const $xe=A.memo(({children:e,loading:t,scrollOnMobile:n=!0})=>{const{isMobileStyle:r}=ye(),{variant:s}=fx();return r&&n?i.jsx("div",{className:"-mx-md",children:i.jsx(ul,{orientation:"horizontal",showScrollIndicator:!1,children:i.jsx("div",{className:"flex",children:i.jsx("ul",{className:"gap-sm px-md flex shrink-0",children:e})})})}):i.jsx("ul",{className:U("flex flex-wrap",{"gap-0":s==="dense-card"&&!t,"gap-sm":s!=="dense-card"||t}),children:e})});$xe.displayName="ProsConsCollapsedContainer";const Hxe=A.memo(({loading:e,pros:t,cons:n,id:r,scrollOnMobile:s=!0})=>i.jsx($xe,{loading:e,scrollOnMobile:s,children:i.jsx(it,{initial:!1,children:i.jsx(wl,{children:e?Array.from({length:3}).map((a,o)=>i.jsx(mw,{asPlaceholder:!0,text:"",type:"con",label:"",id:r},o)):i.jsxs(i.Fragment,{children:[t.map(a=>i.jsx(mw,{text:a.description,type:"pro",label:a.label,id:r},a.label+r)).slice(0,Vxe),n.map(a=>i.jsx(mw,{text:a.description,type:"con",label:a.label,id:r},a.label+r)).slice(0,Wxe)]})})})}));Hxe.displayName="ProsConsCollapsed";const zxe=A.memo(({loading:e,pros:t,cons:n})=>i.jsx("div",{className:"-mx-6",children:i.jsx(ul,{orientation:"horizontal",showScrollIndicator:!1,children:i.jsx("ul",{className:"gap-sm flex px-6",children:e?Array.from({length:3}).map((r,s)=>i.jsx(Gxe,{},s)):i.jsxs(i.Fragment,{children:[t.map(r=>i.jsx(p9,{text:r.description,type:"pro",label:r.label},r.label)).slice(0,Vxe),n.map(r=>i.jsx(p9,{text:r.description,type:"con",label:r.label},r.label)).slice(0,Wxe)]})})})}));zxe.displayName="ProsConsExpanded";const mw=A.memo(({text:e,label:t,type:n,asPlaceholder:r,id:s})=>{const{trackEvent:a}=Me(),{variant:o}=fx(),l=()=>{r||a("shopping pro con hover",{type:n,label:t})},c={initial:{opacity:0,x:-3},animate:{opacity:1,x:0}},u=f.useMemo(()=>i.jsx("div",{className:U("p-sm pointer-events-none translate-y-0"),children:i.jsx(L,{variant:"small",children:e})}),[e]);return i.jsx(xe.li,{variants:c,initial:"initial",animate:"animate",transition:{duration:.1,ease:na},className:U("group inline-flex shrink-0 cursor-default rounded-full duration-150",{"gap-xs":o!=="dense-card","gap-sm":o==="dense-card","hover:bg-subtler":!r,"border-subtlest border duration-150":!r&&o!=="dense-card","!border-transparent !bg-transparent":r}),onMouseEnter:l,children:i.jsx(B3,{hoverOpen:!0,placement:"bottom-start",contentWidth:"200px",removeScroll:!1,content:u,isMobileStyle:!1,delayTime:1,disabled:r,hasInteractiveContent:!1,childrenClassName:"inline-flex",children:i.jsxs("div",{className:U("p-xs relative inline-flex items-center pr-[10px]",{"bg-subtler dark:bg-offsetPlus":r,"h-[26px] rounded-full":r,"gap-2xs":o==="dense-card","gap-xs":o!=="dense-card"}),children:[i.jsx("div",{className:U("size-md flex shrink-0 items-center justify-center rounded-full",{"text-super":n==="pro"},{"text-quiet":n==="con"},{"bg-transparent":r}),children:i.jsx(L,{variant:"tiny",color:n==="pro"?"super":"light",className:"inline-flex",children:i.jsx(me,{className:r?"opacity-0":"",icon:n==="pro"?Rr:Lt,size:"xs"})})}),r?i.jsx(L,{variant:"tiny",className:"w-10 shrink-0",children:""}):i.jsx(L,{variant:"tiny",color:"light",children:i.jsx("span",{className:U({"text-super":n==="pro"}),children:t})})]})})},t+s)});mw.displayName="EntityItemProConItem";const Gxe=A.memo(()=>i.jsx(z,{className:"p-sm h-[136px] w-[200px] rounded-md",variant:"subtler"}));Gxe.displayName="ExpandedLoading";const p9=A.memo(({text:e,label:t,type:n})=>i.jsxs(z,{className:"p-sm w-[200px] rounded-md",variant:"subtler",children:[i.jsxs("div",{className:"mb-2xs gap-xs flex items-center",children:[i.jsx(z,{variant:n==="pro"?"super":"textColor",className:U("size-md flex shrink-0 items-center justify-center rounded-full",{"opacity-50":n==="con"}),children:i.jsx(me,{icon:n==="pro"?Rr:Lt,className:"text-inverse shrink-0",size:"xs"})}),i.jsx(L,{variant:"smallBold",color:n==="pro"?"super":"light",children:t})]}),i.jsx(L,{variant:"small",color:"light",children:e})]}));p9.displayName="ProConItemExpanded";const h9=f.memo(({src:e,onClick:t,showViewMore:n,onMouseEnter:r,onMouseLeave:s,className:a,imageClassName:o,albumSize:l})=>{const{$t:c}=Q();return i.jsxs("div",{onClick:t,onMouseEnter:r,onMouseLeave:s,className:U("bg-offsetPlus group relative aspect-square size-full cursor-pointer overflow-hidden rounded duration-150",a),children:[i.jsx("img",{src:e,alt:"",className:U("m-0 size-full object-contain duration-150 group-hover:scale-[1.02]",o),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:"lazy",decoding:"async"}),l&&i.jsx("div",{className:"absolute bottom-1.5 right-1.5 flex items-center justify-center rounded-full bg-black/40",children:i.jsxs(L,{variant:"tiny",color:"white",className:"gap-sm px-sm py-xs relative flex items-center",children:[l,i.jsx(me,{icon:pke,size:"xs"})]})}),n&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 dark:bg-black/80",children:i.jsxs(L,{variant:"tiny",color:"white",className:"px-sm py-xs relative rounded-full",children:[i.jsx("span",{className:"rounded-inherit absolute inset-0 bg-black opacity-30 dark:bg-white dark:opacity-10"}),i.jsx("span",{className:"relative opacity-80 dark:opacity-60",children:c({defaultMessage:"View More",id:"QQSdHPJWXu"})})]})})]})});h9.displayName="EntityItemImage";const F_t=()=>{const[e,t]=f.useState(!1),n=f.useRef(null),r=f.useRef(!1),s=f.useRef({x:0,y:0}),a=f.useRef(null);f.useEffect(()=>{const c=u=>{s.current={x:u.clientX,y:u.clientY}};return document.addEventListener("mousemove",c,{passive:!0}),()=>document.removeEventListener("mousemove",c)},[]);const o=f.useCallback(()=>{if(!n.current)return;const c=n.current.getBoundingClientRect(),{x:u,y:d}=s.current,m=u>=c.left&&u<=c.right&&d>=c.top&&d<=c.bottom;r.current&&!m&&(t(!0),r.current=!1,a.current&&(clearInterval(a.current),a.current=null))},[]),l=f.useCallback(()=>{t(!1),r.current=!0,a.current=setInterval(o,50)},[o]);return f.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),[e,n,l]},pF=f.memo(({images:e,className:t,badgeText:n,imageClassName:r})=>{const[s,a]=f.useState(0),[o,l]=f.useState(!1),c=f.useRef(null),u=4,[d,m,p]=F_t(),h=f.useCallback(()=>{o||(l(!0),c.current=setInterval(()=>{a(v=>v===e.length-1?0:v+1)},1e3))},[o,e.length]),g=f.useCallback(()=>{l(!1),c.current&&(clearInterval(c.current),c.current=null),a(0)},[]),y=f.useCallback(()=>{p(),h()},[p,h]);return f.useEffect(()=>{d&&g()},[d,g]),f.useEffect(()=>()=>{c.current&&(clearInterval(c.current),c.current=null)},[]),i.jsxs("div",{className:"relative w-full",children:[i.jsx("div",{ref:m,className:U("p-xs grid grid-cols-1 grid-rows-1 rounded bg-white",t),onMouseEnter:y,children:o?e.map((v,x)=>i.jsx(h9,{src:v,className:U("rounded-inherit col-start-1 row-start-1 bg-white !duration-100",{"opacity-0":x!==s,hidden:x!==s&&!o}),imageClassName:U(r,"!scale-100")},x)):i.jsx(h9,{src:e[s]??e[0]??"",className:"rounded-inherit col-start-1 row-start-1 bg-white",imageClassName:U(r,"!scale-100")})}),e.length>1&&i.jsx("div",{className:U("bottom-sm pointer-events-none absolute left-1/2 -translate-x-1/2 duration-150",{"translate-y-0 opacity-50":o,"translate-y-0.5 opacity-0":!o}),children:i.jsx(qxe,{images:e,activeIndex:s,maxDots:u,isAnimating:o})}),n&&i.jsx("div",{className:"gap-sm right-xs top-xs pointer-events-none absolute flex items-center",children:n&&i.jsx(L,{variant:"smallCaps",className:"bg-inverse/70 !text-inverse dark:bg-subtler dark:!text-foreground flex h-5 items-center whitespace-nowrap rounded-full px-1.5 !text-[10px] backdrop-blur-sm",children:n})})]})});pF.displayName="EntityItemImageFadeCarousel";const qxe=f.memo(({images:e,activeIndex:t,maxDots:n,isAnimating:r})=>i.jsx(xe.div,{layout:!0,layoutRoot:!0,className:"gap-xs flex items-center justify-center",children:i.jsx(it,{mode:"popLayout",children:e.map((s,a)=>{let o=0,l=0;return t<n?(o=Math.max(t-Math.floor(n/2),0),l=o+n):(l=Math.min(t+Math.floor(n/2),e.length-1),o=l-n),a>l||a<o?null:i.jsx(xe.div,{initial:{opacity:0,x:4},animate:{opacity:1,x:0,scale:a===t?1:.6},exit:{opacity:0,x:-4},transition:{duration:.15},layout:"position",children:i.jsx("div",{className:U("bg-dark h-1.5 rounded-full border border-white p-px duration-200",{"w-4":a===t,"w-1.5":a!==t}),children:i.jsx(xe.div,{className:"h-full rounded-full bg-white/50",initial:{width:"0",opacity:0},animate:{width:a===t&&r?"100%":"0",opacity:r?1:0},transition:{width:{duration:1},opacity:{duration:.15}}},s+"progress")})},a)})})}));qxe.displayName="AnimateDots";const U_t=25,hF=A.memo(({rating:e,className:t,reviewCount:n,size:r="xs",textVariant:s="small",reviewTextVariant:a="small",reviewTextColor:o="light",variant:l,showCount:c=!0,minReviewCount:u=U_t,showRatingLabel:d=!0,url:m,color:p="default"})=>{const h=Math.floor(e),g=e%1===0?0:1,y=5-h-g;if(e===0||!n||n<u)return null;const v=i.jsxs("div",{className:U("gap-xs flex items-center",t),children:[i.jsxs("div",{className:"flex items-center",children:[l==="truncated"?i.jsx(me,{icon:tu,size:r,className:"text-super -translate-y-px"}):Array.from({length:h}).map((x,b)=>i.jsx(me,{icon:tu,size:r,className:"text-super"},`rating-star-full-${b}`)),l!=="truncated"&&Array.from({length:g}).map((x,b)=>i.jsx(Kxe,{fraction:e%1,size:r},`rating-star-half-${b}`)),l!=="truncated"&&Array.from({length:y}).map((x,b)=>i.jsx("span",{className:"inline-flex opacity-20",children:i.jsx(me,{icon:tu,size:r,className:"text-super"},b)},`rating-star-empty-${b}`))]}),d&&i.jsx(L,{variant:s,className:"group-hover/link:text-super relative font-medium leading-none",color:p,children:i.jsx(TN,{value:e,maximumFractionDigits:1})}),n&&n>0&&c&&i.jsxs(L,{variant:a,color:o,className:"group-hover/link:text-super relative leading-none",children:["(",i.jsx(TN,{value:n}),")"]})]});return m?i.jsx(Ye,{href:m,target:"_blank",className:"group/link",children:v}):v});hF.displayName="EntityItemRating";const Kxe=A.memo(({fraction:e,size:t})=>i.jsxs("div",{className:"isolate inline-grid grid-cols-1 grid-rows-1",children:[i.jsx("span",{className:"text-foreground relative col-start-1 row-start-1 inline-flex items-center opacity-30",children:i.jsx("span",{className:"inline-flex",children:i.jsx(me,{icon:tu,size:t})})}),i.jsx("span",{className:"relative col-start-1 row-start-1 inline-flex items-center",children:i.jsx("span",{className:"text-super inline-flex overflow-hidden",style:{width:e*100+"%"},children:i.jsx(me,{icon:tu,size:t,className:"shrink-0"})})})]}));Kxe.displayName="HalfStar";const Yxe=A.memo(()=>i.jsx("svg",{className:"h-auto w-full",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 4635.92 708.22",children:i.jsx("path",{d:"M4806.79,746.44a25,25,0,1,0,25,25A25,25,0,0,0,4806.79,746.44Zm0,46.08a21.08,21.08,0,1,1,21.08-21.07A21.09,21.09,0,0,1,4806.79,792.52Zm8.12-25.33c0-4.55-3.25-7.25-8-7.25h-8v22.77h3.94v-8.26h4.26l4.13,8.26h4.23L4811,773.6A6.59,6.59,0,0,0,4814.91,767.19Zm-8.16,3.78h-3.87v-7.55h3.87c2.63,0,4.23,1.33,4.23,3.77S4809.38,771,4806.75,771ZM569.17,605.31a97.95,97.95,0,1,1-97.94-97.94A97.94,97.94,0,0,1,569.17,605.31Zm552.18,0a97.95,97.95,0,1,1-97.95-97.94A97.95,97.95,0,0,1,1121.35,605.31ZM1099,304.09C998.87,235.77,878,195.89,747.32,195.89a619.47,619.47,0,0,0-351,108.2H195.89l90.17,98.12a274.9,274.9,0,0,0-89.89,203.66c0,152.19,123.38,275.57,275.57,275.57A274.54,274.54,0,0,0,659,808l88.34,96.12L835.66,808a274.54,274.54,0,0,0,187.23,73.4c152.19,0,275.68-123.38,275.68-275.57a274.9,274.9,0,0,0-89.89-203.66l90.17-98.12ZM471.74,792.36c-103,0-186.49-83.49-186.49-186.49s83.5-186.49,186.49-186.49,186.5,83.49,186.5,186.49S574.74,792.36,471.74,792.36ZM747.37,600.5c0-122.73-89.26-228-207-273.06a538.15,538.15,0,0,1,413.93,0C836.62,372.49,747.37,477.78,747.37,600.5Zm462,5.37c0,103-83.5,186.49-186.49,186.49s-186.5-83.49-186.5-186.49,83.5-186.49,186.5-186.49S1209.38,502.87,1209.38,605.87Zm654.11-173.45h43.37v85.84h-50.75c-39.09,0-64.17,19.18-64.17,58.28V792.36h-92.78V432.42h92.78V492.9C1800.05,450.12,1829.56,432.42,1863.49,432.42Zm186.35-85.59a56.06,56.06,0,0,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S2049.84,315.11,2049.84,346.83Zm-102.33,85.59H2040V792.36h-92.53Zm347.35-6.08a179,179,0,0,0-109.22,36.52V432.42h-92.52V898h92.52V761.92a179,179,0,0,0,109.22,36.52c102.76,0,186-83.3,186-186.05S2397.62,426.34,2294.86,426.34Zm-8.15,287.12a101.07,101.07,0,1,1,101.07-101.07A101.07,101.07,0,0,1,2286.71,713.46Zm1890.57-34.8c0,69.4-59.54,119.78-141.57,119.78-85.12,0-144.57-51.57-144.57-125.42v-2h90.54v2c0,30.82,22,51.53,54.78,51.53,31.42,0,52.53-15.33,52.53-38.14,0-21.61-14.61-33.69-53.89-44.56l-51.71-14.1c-54.34-14.71-85.5-50.12-85.5-97.14,0-60.42,57-104.27,135.57-104.27,79.3,0,132.58,43.88,132.58,109.21v2.05h-85.3v-2.05c0-22.18-20.77-39.55-47.28-39.55-27.84,0-47.28,12.78-47.28,31.09,0,18.76,13.84,29.66,49.36,38.91l54,14.81C4162.05,600.16,4177.28,644.7,4177.28,678.66Zm-1368-215.8A179,179,0,0,0,2700,426.34c-102.76,0-186.05,83.3-186.05,186.05S2597.26,798.44,2700,798.44a179,179,0,0,0,109.22-36.52v30.44h92.52V432.42h-92.52Zm0,149.54a101.07,101.07,0,1,1-101.07-101.08A101.08,101.08,0,0,1,2809.24,612.4ZM3236,462.86a179,179,0,0,0-109.22-36.52c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05A179,179,0,0,0,3236,761.92v30.44h92.53V304.3H3236Zm-101.06,250.6A101.07,101.07,0,1,1,3236,612.39,101.07,101.07,0,0,1,3134.89,713.46Zm623.34-281h92.53V792.36h-92.53Zm102.33-85.59a56.06,56.06,0,1,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S3860.56,315.11,3860.56,346.83Zm530.71,79.51c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05,186-83.3,186-186.05S4494,426.34,4391.27,426.34Zm0,287.12a101.07,101.07,0,1,1,101.07-101.07A101.06,101.06,0,0,1,4391.27,713.46ZM1744.55,386.87H1613.14V792.36h-92.22V386.87H1389.51V304.3h355Zm1877.76,45.55h97.21L3595.31,792.36H3484L3360.47,432.42h97.2L3540,693.79Zm1162.19,0h43.37v85.84h-50.75c-39.09,0-64.18,19.18-64.18,58.28V792.36h-92.77V432.42h92.77V492.9C4721.06,450.12,4750.57,432.42,4784.5,432.42Z",transform:"translate(-195.89 -195.89)",fill:"currentColor"})}));Yxe.displayName="TripadvisorLogo";const Qxe=A.memo(()=>i.jsxs("svg",{className:"h-auto w-full",viewBox:"0 0 1000 385",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M806.495 227.151L822.764 223.392C823.106 223.313 823.671 223.183 824.361 222.96C828.85 221.753 832.697 218.849 835.091 214.862C837.485 210.874 838.241 206.113 837.198 201.582C837.175 201.482 837.153 201.388 837.13 201.289C836.596 199.117 835.66 197.065 834.37 195.239C832.547 192.926 830.291 190.991 827.728 189.542C824.711 187.82 821.553 186.358 818.289 185.171L800.452 178.659C790.441 174.937 780.432 171.309 770.328 167.771C763.776 165.439 758.224 163.393 753.4 161.901C752.49 161.62 751.485 161.34 750.669 161.058C744.837 159.271 740.739 158.53 737.272 158.505C734.956 158.42 732.649 158.841 730.511 159.738C728.283 160.699 726.282 162.119 724.639 163.906C723.822 164.835 723.054 165.806 722.337 166.815C721.665 167.843 721.049 168.907 720.491 170.001C719.876 171.174 719.348 172.391 718.911 173.642C715.6 183.428 713.951 193.7 714.032 204.029C714.091 213.368 714.342 225.354 719.475 233.479C720.712 235.564 722.372 237.366 724.348 238.769C728.004 241.294 731.7 241.627 735.544 241.904C741.289 242.316 746.855 240.905 752.403 239.623L806.45 227.135L806.495 227.151Z",fill:"currentColor"}),i.jsx("path",{d:"M987.995 140.779C983.553 131.457 977.581 122.947 970.328 115.601C969.39 114.669 968.385 113.806 967.321 113.02C966.339 112.283 965.318 111.598 964.264 110.967C963.18 110.373 962.065 109.837 960.924 109.362C958.668 108.476 956.25 108.077 953.829 108.19C951.513 108.322 949.254 108.956 947.207 110.049C944.105 111.591 940.748 114.07 936.283 118.221C935.666 118.834 934.891 119.525 934.195 120.177C930.511 123.641 926.413 127.911 921.536 132.883C914.002 140.497 906.583 148.152 899.21 155.89L886.017 169.571C883.601 172.071 881.401 174.771 879.441 177.643C877.771 180.07 876.59 182.799 875.963 185.678C875.6 187.886 875.653 190.142 876.12 192.329C876.143 192.429 876.164 192.523 876.187 192.622C877.229 197.154 879.988 201.103 883.883 203.637C887.778 206.172 892.505 207.094 897.068 206.211C897.791 206.106 898.352 205.982 898.693 205.898L969.033 189.646C974.576 188.365 980.202 187.191 985.182 184.3C988.522 182.363 991.699 180.443 993.878 176.569C995.043 174.441 995.748 172.092 995.948 169.675C997.027 160.089 992.021 149.202 987.995 140.779Z",fill:"currentColor"}),i.jsx("path",{d:"M862.1 170.358C867.197 163.955 867.184 154.41 867.64 146.607C869.174 120.536 870.79 94.4619 872.07 68.3766C872.56 58.4962 873.624 48.7498 873.036 38.7944C872.552 30.5816 872.492 21.1521 867.307 14.4122C858.154 2.52688 838.636 3.50371 825.319 5.34732C821.239 5.91358 817.153 6.6749 813.099 7.64807C809.045 8.62124 805.033 9.6841 801.108 10.9412C788.329 15.127 770.365 22.8103 767.323 37.5341C765.608 45.858 769.672 54.3727 772.824 61.9691C776.645 71.1774 781.865 79.4721 786.622 88.1401C799.198 111.024 812.008 133.765 824.782 156.53C828.597 163.326 832.755 171.933 840.135 175.454C840.623 175.667 841.121 175.856 841.628 176.018C844.937 177.272 848.545 177.513 851.993 176.712C852.201 176.664 852.405 176.617 852.608 176.57C855.792 175.704 858.675 173.973 860.937 171.568C861.345 171.185 861.734 170.782 862.1 170.358Z",fill:"currentColor"}),i.jsx("path",{d:"M855.997 240.155C854.008 237.355 851.184 235.258 847.931 234.162C844.677 233.065 841.16 233.027 837.881 234.051C837.111 234.307 836.361 234.618 835.636 234.983C834.515 235.554 833.445 236.221 832.439 236.976C829.507 239.148 827.039 241.97 824.791 244.8C824.221 245.522 823.7 246.483 823.022 247.1L811.708 262.663C805.295 271.382 798.971 280.123 792.7 289.003C788.608 294.735 785.068 299.576 782.273 303.859C781.743 304.666 781.193 305.567 780.689 306.284C777.338 311.469 775.441 315.252 774.467 318.622C773.735 320.862 773.503 323.234 773.788 325.572C774.1 328.008 774.92 330.35 776.195 332.447C776.873 333.499 777.604 334.516 778.385 335.495C779.196 336.436 780.058 337.332 780.966 338.18C781.936 339.105 782.973 339.957 784.07 340.729C791.879 346.162 800.428 350.066 809.421 353.083C816.904 355.567 824.682 357.053 832.555 357.504C833.894 357.572 835.237 357.543 836.572 357.417C837.809 357.309 839.04 357.136 840.26 356.9C841.479 356.615 842.681 356.266 843.863 355.853C846.162 354.993 848.255 353.66 850.008 351.94C851.667 350.279 852.944 348.276 853.749 346.07C855.057 342.81 855.917 338.671 856.483 332.526C856.532 331.652 856.657 330.604 856.744 329.644C857.19 324.545 857.395 318.556 857.723 311.514C858.276 300.685 858.71 289.903 859.053 279.09C859.053 279.09 859.782 259.875 859.78 259.865C859.946 255.437 859.81 250.53 858.582 246.121C858.042 244.008 857.17 241.994 855.997 240.155V240.155Z",fill:"currentColor"}),i.jsx("path",{d:"M983.707 270.24C981.346 267.651 978 265.069 972.722 261.878C971.961 261.453 971.068 260.886 970.244 260.392C965.85 257.749 960.557 254.969 954.374 251.611C944.876 246.396 935.372 241.312 925.778 236.271L908.825 227.28C907.946 227.024 907.053 226.389 906.225 225.989C902.968 224.432 899.516 222.978 895.932 222.311C894.697 222.074 893.444 221.944 892.186 221.923C891.375 221.913 890.565 221.962 889.761 222.07C886.371 222.595 883.234 224.178 880.795 226.591C878.356 229.005 876.74 232.128 876.178 235.513C875.919 237.667 875.998 239.847 876.411 241.976C877.24 246.487 879.254 250.95 881.338 254.858L890.391 271.824C895.428 281.394 900.526 290.907 905.752 300.391C909.123 306.578 911.929 311.871 914.557 316.26C915.055 317.085 915.62 317.974 916.046 318.738C919.245 324.013 921.815 327.333 924.421 329.715C926.109 331.345 928.132 332.586 930.349 333.351C932.68 334.124 935.146 334.398 937.59 334.155C938.832 334.008 940.066 333.795 941.286 333.516C942.488 333.193 943.672 332.808 944.833 332.362C946.087 331.889 947.305 331.327 948.478 330.678C955.36 326.82 961.703 322.07 967.345 316.552C974.112 309.894 980.093 302.633 984.745 294.321C985.392 293.145 985.952 291.924 986.422 290.667C986.86 289.504 987.24 288.319 987.558 287.118C987.834 285.896 988.045 284.662 988.191 283.418C988.422 280.977 988.138 278.514 987.358 276.19C986.591 273.963 985.345 271.932 983.707 270.24V270.24Z",fill:"currentColor"}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M400.03 105.19C400.03 91.2089 411.42 79.7877 425.167 79.7877C438.717 79.7877 449.714 91.2089 450.303 105.387V303.682C450.303 317.663 438.913 329.084 425.167 329.084C411.027 329.084 400.03 317.663 400.03 303.682V105.19ZM376.657 227.672C376.461 231.61 375.479 238.896 370.373 244.213C364.874 249.923 357.412 251.302 353.092 251.302C335.123 251.4 317.155 251.45 299.187 251.499C281.218 251.548 263.248 251.597 245.279 251.696C246.85 256.619 249.992 264.101 257.062 270.994C261.382 275.129 265.506 277.492 267.273 278.476C269.434 279.855 276.896 283.793 286.126 283.793C295.945 283.793 304.586 280.642 313.03 276.31L313.736 275.945C319.604 272.904 325.66 269.766 332.079 268.631C338.363 267.646 345.04 268.827 349.949 273.16C355.841 278.279 358.197 285.762 356.037 293.442C353.484 302.106 346.218 309.589 338.559 314.118C334.239 316.678 329.526 318.844 324.813 320.617C318.725 322.783 312.441 324.358 306.157 325.343C299.872 326.327 293.392 326.721 286.911 326.524H286.911C283.769 326.524 280.431 326.524 277.092 326.13C273.558 325.736 270.023 324.949 266.684 324.161C261.186 322.98 256.08 321.207 250.974 318.844C246.064 316.678 241.155 313.921 236.638 310.771C232.121 307.62 227.997 303.879 224.07 299.94C220.338 296.002 216.804 291.67 213.662 286.944C203.057 270.797 198.147 250.908 199.129 231.61C199.915 212.706 206.199 193.802 217.589 178.443C218.823 176.519 220.247 174.883 221.596 173.333C222.18 172.663 222.75 172.008 223.284 171.354C237.35 154.158 256.142 148.716 263.894 146.471L264.328 146.345C286.519 140.044 304.978 144.179 312.441 146.345C316.172 147.33 337.185 153.828 353.484 171.354C354.27 172.141 356.43 174.701 359.179 178.443C369.505 192.508 373.066 205.605 374.272 210.042L374.301 210.146C375.479 214.478 376.657 220.386 376.657 227.672ZM261.382 195.181C249.992 204.436 246.85 216.251 246.064 219.992H331.686C330.901 216.448 327.562 204.436 316.172 195.181C304.586 185.925 292.41 185.335 288.679 185.335C284.948 185.335 272.772 185.925 261.382 195.181ZM586.98 142.998C564.593 142.998 544.169 153.041 529.637 169.385V168.794C529.048 155.6 518.05 144.967 504.696 144.967C490.753 144.967 479.56 156.191 479.56 170.172V359.409C479.56 373.391 490.753 384.615 504.696 384.615C518.64 384.615 529.833 373.391 529.833 359.409V352.123V300.334C544.365 316.482 564.593 326.721 587.176 326.721C632.147 326.721 668.674 285.959 668.674 235.155C668.478 184.35 631.951 142.998 586.98 142.998ZM575.983 285.566C550.453 285.566 529.637 263.314 529.637 235.549C529.637 207.586 550.257 185.335 575.983 185.335C601.512 185.335 622.328 207.586 622.328 235.549C622.132 263.314 601.512 285.566 575.983 285.566ZM161.425 248.348L153.177 266.464C149.446 274.341 145.715 282.415 142.18 290.488C141.052 292.966 139.916 295.494 138.764 298.057C123.068 332.981 104.44 374.43 63.8242 383.236C44.1861 387.568 14.5327 381.661 3.5354 363.15C-7.4619 344.443 8.83767 322.979 29.8504 327.902C33.1646 328.641 36.4235 330.266 39.7101 331.904C45.187 334.635 50.7406 337.404 56.7545 336.173C62.4495 335.188 65.9844 331.053 70.5011 325.736C76.7853 318.45 79.5346 310.771 80.7129 306.242C80.6147 306.045 80.5165 305.798 80.4183 305.552C80.3201 305.306 80.2219 305.06 80.1237 304.863C75.0117 295.326 70.5473 286.8 66.8178 279.677C64.3868 275.034 62.2681 270.987 60.4857 267.646C56.8287 260.714 54.0662 255.473 51.918 251.398C45.6449 239.497 44.609 237.532 41.8296 232.398C35.7418 220.78 29.2612 209.555 22.5843 198.331C15.3182 186.122 7.85577 172.535 13.9436 158.16C18.8531 146.542 31.4214 140.634 43.4006 144.376C56.0403 148.212 61.6377 160.239 66.8724 171.487C67.8188 173.52 68.7534 175.528 69.7156 177.458C78.16 194.196 86.4079 210.934 94.6559 227.672C95.382 229.336 96.4917 231.605 97.8402 234.362C99.0447 236.824 100.44 239.676 101.922 242.834C102.697 244.475 103.434 246.002 104.101 247.382C104.954 249.149 105.691 250.676 106.242 251.892C110.072 242.342 113.95 232.841 117.829 223.34C121.707 213.839 125.586 204.337 129.415 194.787C129.522 194.253 130.436 192.216 131.813 189.145C132.977 186.549 134.473 183.215 136.092 179.427C136.64 178.133 137.191 176.79 137.755 175.417C142.856 162.995 148.988 148.06 162.604 143.982C172.423 141.028 183.42 144.967 189.115 153.237C192.061 157.372 193.239 162.098 193.435 166.824C193.593 177.275 188.545 188.491 184.212 198.115C183.157 200.459 182.144 202.708 181.26 204.829C181.219 204.91 181.048 205.296 180.739 205.988C179.541 208.679 176.278 216.005 170.655 228.066C168.626 232.389 166.679 236.713 164.707 241.09C163.626 243.491 162.538 245.907 161.425 248.348Z",fill:"currentColor"}),i.jsx("path",{d:"M687.728 310.153H689.549C690.447 310.153 691.167 309.923 691.706 309.462C692.256 308.99 692.532 308.395 692.532 307.676C692.532 306.833 692.29 306.232 691.807 305.872C691.324 305.502 690.56 305.316 689.515 305.316H687.728V310.153ZM695.043 307.608C695.043 308.507 694.801 309.305 694.318 310.002C693.846 310.687 693.178 311.198 692.313 311.535L696.324 318.193H693.492L690.004 312.226H687.728V318.193H685.234V303.176H689.633C691.498 303.176 692.863 303.541 693.728 304.271C694.605 305.002 695.043 306.114 695.043 307.608ZM677.228 310.676C677.228 308.429 677.79 306.322 678.914 304.356C680.037 302.389 681.582 300.839 683.549 299.704C685.515 298.569 687.633 298.002 689.902 298.002C692.15 298.002 694.256 298.564 696.223 299.687C698.189 300.811 699.74 302.356 700.874 304.322C702.009 306.288 702.577 308.406 702.577 310.676C702.577 312.889 702.032 314.968 700.942 316.912C699.852 318.856 698.324 320.412 696.358 321.58C694.391 322.749 692.24 323.333 689.902 323.333C687.577 323.333 685.431 322.754 683.464 321.597C681.498 320.429 679.964 318.872 678.863 316.929C677.773 314.985 677.228 312.901 677.228 310.676ZM678.998 310.676C678.998 312.62 679.487 314.44 680.464 316.136C681.442 317.822 682.773 319.153 684.459 320.131C686.155 321.097 687.97 321.58 689.902 321.58C691.858 321.58 693.672 321.092 695.346 320.114C697.02 319.136 698.346 317.816 699.324 316.153C700.313 314.479 700.807 312.653 700.807 310.676C700.807 308.721 700.318 306.906 699.341 305.232C698.363 303.558 697.037 302.232 695.363 301.255C693.7 300.266 691.88 299.771 689.902 299.771C687.947 299.771 686.133 300.26 684.459 301.238C682.785 302.215 681.453 303.541 680.464 305.215C679.487 306.878 678.998 308.698 678.998 310.676Z",fill:"currentColor"})]}));Qxe.displayName="YelpLogo";const B_t=({className:e})=>i.jsx(L,{className:U("w-10",e),children:i.jsx(Qxe,{})}),V_t=({className:e})=>i.jsx(L,{className:U("w-[70px]",e),children:i.jsx(Yxe,{})}),W_t=e=>{const t=f.useMemo(()=>ns(e).with(Rd.string.includes("yelp.com"),()=>B_t).with(Rd.string.includes("tripadvisor.com"),()=>V_t).otherwise(()=>null),[e]);return f.useMemo(()=>({SearchClientLogo:t}),[t])},$_t=({entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s,reason:a})=>{const o=mt(),l=["place_result_reviews",`${n}_${s}`],{refetch:c,data:u,isFetching:d,error:m}=$e({queryKey:l,enabled:!1,queryFn:async()=>{let p={summary:"",review_quality_score:0,pros:[],cons:[],key_features:[],review_search_results:[]},h="PENDING",g="";try{await ne.SSE("/rest/sse/places_review_summary_bulk",a,{params:{places:[{entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s}]},handlers:{message:y=>{y.blocks?.[0]?.review_summary_block&&(p={...p,...y.blocks[0].review_summary_block}),h=y.status??"FAILED",g=y.id??"",o.setQueryData(l,{review_summary:p,status:h,id:g})}}})}catch{}return{review_summary:p,status:h,id:g}}});return f.useMemo(()=>({generateReviewSummaryForPlace:c,reviewSummary:u?.review_summary,isFetching:d,error:m}),[u?.review_summary,m,c,d])};function Xxe(){const{locale:e}=Q(),t=new Intl.Locale(e),{value:n,loading:r}=jr({flag:"canonical-hotel-pages-enabled",defaultValue:!1,extraAttributes:{cfLanguage:t.language,appApiVersion:wi}});return f.useMemo(()=>({initialized:!r,value:n}),[n,r])}const Zxe=A.memo(({operatingHours:e})=>{const{locale:t}=Q();return e?i.jsx("div",{className:"gap-xs flex flex-col",children:e.map(({day:n,hours:r,is_today:s})=>i.jsxs("div",{className:"gap-md flex items-center justify-between",children:[i.jsx(L,{variant:"tiny",color:"white",className:s?void 0:"opacity-50",children:tO(n,t)}),i.jsx(L,{variant:"tiny",color:"white",className:s?void 0:"opacity-50",children:r.join(", ")})]},`place-hours-${n}`))}):null});Zxe.displayName="PlaceOperatingHours";var Yl;(function(e){e.DEFAULT="default",e.DALLE3="dall-e-3",e.PLAYGROUND="playground",e.FLUX="flux",e.GPT4O_IMAGE="gpt-4o",e.GEMINI_FLASH="gemini-flash"})(Yl||(Yl={}));const Jxe=e=>{switch(e){case Yl.DALLE3:return"DALL-E 3";case Yl.PLAYGROUND:return"Playground";case Yl.FLUX:return"FLUX";case Yl.GPT4O_IMAGE:return"GPT-4o Image";case Yl.GEMINI_FLASH:return"Gemini Flash";default:return"AI"}},gF=e=>{if(e==="dalle"||Object.values(Yl).includes(e))return!0;const t=e.toLowerCase();return Object.values(Yl).some(n=>t.includes(n.toLowerCase()))},ebe=A.memo(({mediaItem:e})=>{const{name:t,url:n,image:r,source:s,author_name:a,author_url:o}=e,l=gF(s??""),c=n?.includes("unsplash.com"),u=a&&o;let d=t;c&&(d="Unsplash");const m=f.useCallback(p=>{p.stopPropagation()},[]);return i.jsx(Ye,{className:"cursor-pointer",target:"_blank",rel:"noopener nofollow",href:n??r??"",children:u?i.jsxs(z,{className:"flex max-w-[300px] items-stretch overflow-hidden",children:[i.jsxs("div",{className:"gap-sm hover:bg-subtler flex shrink-0 items-center rounded-md p-[7px] duration-300",children:[n&&i.jsx(fl,{domain:n}),i.jsx(L,{color:"white",variant:"tiny",className:"truncate",children:d})]}),i.jsx(Ye,{href:o,target:"_blank",className:"gap-sm p-sm hover:bg-subtler group flex items-center overflow-hidden rounded-md pr-[10px] duration-300",onClick:m,children:i.jsx(L,{color:"white",variant:"tiny",className:"truncate opacity-50 duration-300 group-hover:opacity-75",children:a})})]}):i.jsx(z,{className:"hover:bg-subtle max-w-[250px] rounded-md p-[7px] px-[10px] duration-300",variant:l?"subtler":"transparent",children:n&&i.jsx(bu,{color:"white",url:n,source:d,truncate:!1,isAttachment:!1,variant:"tiny"})})})});ebe.displayName="ImageGalleryCitation";const yF=A.memo(({image:e,name:t,url:n,fallbackSrc:r,onClick:s,AIProps:a,softBlockSaveImage:o,imageClassName:l,includeLightBoxModal:c,lightboxSrc:u,rounded:d="sm",onFail:m,onLoad:p,className:h,style:g,containerClassName:y,maskClassName:v,ref:x})=>{const b=f.useMemo(()=>({url:n,name:t}),[t,n]),_=f.useMemo(()=>({draggable:!1}),[]);return i.jsx("div",{onClick:s,className:h,style:g,children:i.jsx(is,{AIProps:a,origin:b,fadeIn:!1,hasShadow:!1,includeLightBoxModal:c,lightboxSrc:u,imageClassName:U("max-h-[70vh] object-cover w-full",l),imageRef:x,alt:t,src:e,fallback:null,fallbackSrc:r,softBlockSaveImage:o,rounded:d,onFail:m,onLoad:p,containerClassName:y,maskClassName:v,imageProps:_,draggable:!1},n)})});yF.displayName="RenderImage";const tbe=A.memo(({mediaItem:e,softBlockSaveImage:t})=>{const{image:n,name:r,url:s,thumbnail:a,source:o}=e,l=n??a;return l?i.jsx("div",{className:"py-md px-lg flex size-full select-none items-center justify-center","data-color-scheme":"dark",children:i.jsx(yF,{image:l,name:r,fallbackSrc:a,url:s,AIProps:o?{isAI:gF(o),AILabel:Jxe(o)}:void 0,includeLightBoxModal:!1,softBlockSaveImage:t,maskClassName:"bg-subtler"})}):(ee.warn(new Error("Invalid media item in image gallery"),{extra:{mediaItem:e}}),null)});tbe.displayName="ImageGalleryMain";const nbe=A.memo(({mediaItem:e,isHighlighed:t,onClick:n,imageRef:r})=>{const{image:s,name:a,url:o,thumbnail:l,source:c}=e,u=l??s,[d,m]=f.useState(!1),[p,h]=f.useState(!1),g=f.useCallback(()=>m(!0),[]),y=f.useCallback(()=>h(!0),[]);return!u||d?(ee.warn(new Error("Invalid media item in image gallery sidebar"),{extra:{mediaItem:e}}),null):i.jsx(yF,{className:U("cursor-pointer select-none rounded-lg border-transparent transition-all duration-200 ease-in-out",{"ring-super ring-2 ring-offset-2 ring-offset-black":t,"hover:opacity-70":!t,"animate-in fade-in duration-300 ease-in":p,hidden:!p}),AIProps:c?{isAI:gF(c),AILabel:Jxe(c)}:void 0,image:u,name:a,fallbackSrc:void 0,url:o,includeLightBoxModal:!1,onClick:n,maskClassName:"bg-subtler !rounded-lg",imageClassName:"select-none",onFail:g,onLoad:y,ref:r})});nbe.displayName="GalleryImage";class H_t extends A.Component{static defaultProps={columnsCount:3,gutter:"0"};getColumns(){const{children:t,columnsCount:n=3}=this.props,r=Array.from({length:n},()=>[]);let s=0;return A.Children.forEach(t,a=>{a&&A.isValidElement(a)&&(r[s%n].push(a),s++)}),r}renderColumns(){const{gutter:t="0"}=this.props;return this.getColumns().map((n,r)=>i.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:t},children:n.map(s=>s)},r))}render(){const{columnsCount:t,gutter:n="0",style:r,...s}=this.props;return i.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:n,...r},...s,children:this.renderColumns()})}}const rbe=A.memo(({mainIndex:e,images:t,onClick:n,mainIndexRef:r})=>i.jsx(H_t,{className:"p-sm select-none pr-1",columnsCount:2,gutter:"8px",children:t.map((s,a)=>i.jsx(sbe,{mediaItem:s,index:a,mainIndex:e,onClick:n,mainIndexRef:r},"galleryImage "+a))}));rbe.displayName="ImageGallerySidebar";const sbe=A.memo(({mediaItem:e,index:t,mainIndex:n,onClick:r,mainIndexRef:s})=>{const a=f.useCallback(()=>r(t),[t,r]);return i.jsx(nbe,{mediaItem:e,isHighlighed:t===n,onClick:a,imageRef:t===n?s:void 0})});sbe.displayName="GalleryImageFactory";const zi=A.memo(({children:e,isOpen:t,onClose:n,...r})=>i.jsx(Sh,{isOpen:t,onClose:n,center:!1,variant:"lightbox",...r,children:i.jsx("div",{className:"flex h-screen flex-col",children:e})}));zi.displayName="Gallery";const abe=A.memo(({className:e="",headerText:t,children:n,onClose:r,...s})=>i.jsxs("div",{className:U("mx-md gap-md border-subtler h-headerHeight flex items-center justify-between border-b",e),"data-color-scheme":"dark",...s,children:[i.jsxs("div",{className:"gap-x-md flex items-center",children:[i.jsx(Na,{variant:"mark",color:"white",size:"tiny"}),t&&i.jsx(L,{color:"white",variant:"section-title",className:"line-clamp-1",children:t})]}),i.jsxs("div",{className:"gap-sm flex items-center",children:[n,i.jsx(ge,{pill:!0,icon:Lt,onClick:r,size:"small",extraCSS:"!bg-subtle"})]})]}));abe.displayName="GalleryHeader";const obe=A.memo(({className:e,style:t,...n})=>i.jsx("div",{className:U("col-span-6 h-[50dvh] min-h-0 w-full flex-1 shrink-0 md:size-auto lg:col-span-7",e),style:{colorScheme:"dark",...t},...n})),ibe=A.memo(({children:e,className:t,style:n,...r})=>i.jsx("div",{className:U("col-span-4 flex h-[50dvh] min-h-0 flex-col md:h-auto lg:col-span-3",t),"data-color-scheme":"dark",style:n,...r,children:i.jsx("div",{className:"scrollbar-subtle min-h-0 flex-1 overflow-y-auto",children:e})}));ibe.displayName="GallerySidebar";obe.displayName="GalleryMain";const lbe=A.memo(({className:e,...t})=>i.jsx("div",{className:U("gap-lg flex min-h-0 flex-1 grow flex-col md:grid md:grid-cols-10 md:gap-0",e),...t}));lbe.displayName="GalleryContent";zi.Header=abe;zi.Main=obe;zi.Sidebar=ibe;zi.Content=lbe;const vF=A.memo(({mainImageIndex:e,title:t,isOpen:n,onClose:r=Rn,onSelect:s,images:a,softBlockSaveImage:o})=>{const[l,c]=f.useState(e),u=f.useRef(null),d=f.useCallback(({initial:x})=>{u.current?.scrollIntoView({inline:"nearest",block:x?"center":"nearest",behavior:x?"auto":"smooth"})},[u]);f.useEffect(()=>{c(e)},[e,n]),f.useEffect(()=>{d({initial:!1})},[d,l]);const m=f.useCallback(()=>{c(x=>(x+1)%a.length)},[a.length]),p=f.useCallback(()=>{c(x=>(x-1+a.length)%a.length)},[a.length]),h=f.useCallback(()=>{c(x=>{const b=x-2;return b>=0?b:x})},[]),g=f.useCallback(()=>{c(x=>{const b=x+2;return b<a.length?b:x})},[a.length]);f.useEffect(()=>{const x=b=>{n&&(b.key==="ArrowRight"?m():b.key==="ArrowLeft"?p():b.key==="ArrowUp"?(b.preventDefault(),h()):b.key==="ArrowDown"&&(b.preventDefault(),g()))};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[n,m,p,h,g]);const y=f.useCallback(x=>{a[x]&&(c(x),s?.(a[x]))},[a,s]);f.useEffect(()=>{n&&setTimeout(()=>{d({initial:!0})},0)},[n,d]);const v=a[l];return i.jsxs(zi,{isOpen:n,onClose:r,children:[i.jsx(zi.Header,{headerText:t,onClose:r,children:v&&i.jsx(ebe,{mediaItem:v})}),i.jsxs(zi.Content,{children:[i.jsx(zi.Main,{children:v&&i.jsx(tbe,{mediaItem:v,softBlockSaveImage:o})}),i.jsx(zi.Sidebar,{children:i.jsx(rbe,{images:a,mainIndex:l,onClick:y,mainIndexRef:u})})]})]})});vF.displayName="ImageGallery";const z_t=4,cbe=A.memo(({dollarCount:e,priceRange:t,className:n="",dollarColor:r="default",textVariant:s="tiny",currencySymbol:a,...o})=>{const l=t&&/^(.+?)\s*(\1\s*)+$/.test(t.trim());return l&&(e=t.replace(/\u200A/g,"").length??0),i.jsx("div",{className:`flex items-center ${n}`,...o,children:t&&!l?i.jsx(L,{variant:s,color:r,children:t}):i.jsx("div",{className:"flex gap-px",children:Array.from({length:z_t},(c,u)=>i.jsx(L,{variant:s,className:"inline-flex",color:u<e?r:"ultraLight",children:a||"$"},u))})})});cbe.displayName="DollarRange";const ube=A.memo(({place:e,menuItems:t,className:n,entryUUID:r,contextUUID:s,onHover:a})=>{const o="place-widget",{$t:l}=Q(),[c,u]=f.useState(!1),{SearchClientLogo:d}=W_t(e.url),m=Xxe(),{generateReviewSummaryForPlace:p,reviewSummary:h,isFetching:g}=$_t({entity_id:String(e.id),entity_name:e.name,entry_uuid:r??"",data_source:e.client,url:e.url,reason:o}),{trackEvent:y}=Me();f.useEffect(()=>{r&&y("place card viewed",{entryUUID:r,contextUUID:s??"",inline:!1,itemID:e.url})},[r,s,e.url,y]),f.useEffect(()=>{e.review_summary||h||p()},[e.review_summary,h]);const v=f.useMemo(()=>e.review_summary??h,[e.review_summary,h]),x=f.useMemo(()=>{const O=[];return e.image_url&&O.push(e.image_url),e.images&&e.images.forEach(P=>{P!==e.image_url&&O.push(P)}),O.length?O.map(P=>({image:P,url:P.includes("tripadvisor.com")?e.url:e.entity_url??e.url})):null},[e.image_url,e.images,e.url,e.entity_url]),b=f.useMemo(()=>ns(e.url).with(Rd.string.includes("yelp.com"),()=>l({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Yelp"})).with(Rd.string.includes("tripadvisor.com"),()=>l({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Tripadvisor"})).otherwise(()=>null),[l,e.url]),_=f.useCallback(()=>{const O=e.entity_url??e.url,P=m.initialized&&m.value?e.canonical_page_path??O:O;window.open(P)},[m,e.canonical_page_path,e.entity_url,e.url]),{isMobileStyle:w}=ye(),C=!!v?.summary.length,{hasProsOrCons:S,isLoadingProsCons:E}=f.useMemo(()=>{const O=v?.pros_detailed?.length??0,P=v?.cons_detailed?.length??0;return{hasProsOrCons:O||P||g,isLoadingProsCons:g&&!C&&(O+P<3||!O||!P)}},[v?.pros_detailed,v?.cons_detailed,C,g]),M=f.useCallback(O=>{O.stopPropagation()},[]),k=f.useCallback(()=>{a&&a(void 0)},[a]),T=f.useCallback(()=>{a&&a(e.url)},[a,e.url]),j=f.useCallback(()=>{_()},[_]),R=f.useCallback(()=>{u(!1)},[]);return i.jsxs(i.Fragment,{children:[i.jsx(Uxe,{id:String(e.id),entityVariant:"dense-card",menuItems:t,className:"relative !p-0",children:i.jsxs(z,{as:"button","data-widget-id":e.id,className:U("group/root gap-sm p-md md:gap-md group flex h-full cursor-pointer appearance-none flex-col text-left duration-150",n),onMouseEnter:T,onMouseLeave:k,onClick:j,children:[i.jsxs("div",{className:"gap-md flex flex-1",children:[x&&x.length>0&&i.jsx("div",{className:"border-subtlest shadow-subtle size-20 shrink-0 rounded-md border bg-white md:size-28 dark:border-0",children:i.jsx(pF,{images:x.map(O=>O.image),className:"size-full bg-white",imageClassName:"object-cover"})}),i.jsxs("div",{className:"gap-sm flex flex-1 flex-col",children:[i.jsx(L,{variant:w?"baseSemi":"section-title",className:"group-hover:text-super line-clamp-3 leading-tight transition-colors duration-150",children:e.name}),!!e.operating_hours&&w&&i.jsx(g9,{place:e}),(e.rating||e.price||e.price_range)&&i.jsxs(gc,{className:"gap-xs text-quiet text-xs",children:[!!e.operating_hours&&!w&&i.jsx(br,{id:"is-open",children:i.jsx(g9,{place:e})}),(e.price||e.price_range)&&i.jsx(br,{id:"price",children:i.jsx(cbe,{dollarCount:e.price?.replace(/\u200A/g,"").length??0,priceRange:e.price_range,currencySymbol:e.currency_char})}),e.rating&&i.jsx(br,{id:"rating",children:i.jsx(hF,{minReviewCount:1,reviewCount:e.num_reviews,rating:e.rating,size:"sm",variant:"truncated",textVariant:"tiny"})}),d&&i.jsx(br,{id:"logo",children:e.url?i.jsx(Ye,{href:e.url,target:"_blank",className:"cursor-pointer duration-150 hover:opacity-70",onClick:M,children:i.jsx(d,{})}):i.jsx(d,{})})]}),i.jsxs("div",{className:"mt-xs gap-xs flex flex-col",children:[!!e.address?.length&&i.jsx(pw,{icon:sne,href:`https://maps.google.com/?q=${e.address.join(", ")}`,target:"_blank",label:e.address.join(", ")}),!!e.phone&&i.jsx(pw,{icon:hke,label:e.phone,href:`tel:${e.phone}`}),!!e.url&&b&&!d&&i.jsx(pw,{icon:LR,label:b,href:e.url})]})]})]}),S&&i.jsx(wn,{active:E,children:i.jsx(z,{className:"mt-xs pt-sm border-t",children:i.jsx("div",{className:"-ml-sm",children:i.jsx(Rv,{id:String(e.id),pros:v?.pros_detailed??le,cons:v?.cons_detailed??le,loading:E})})})})]})}),i.jsx(vF,{title:e.name,mainImageIndex:0,isOpen:c,images:x??le,onClose:R})]})});ube.displayName="PlaceWidget";const g9=A.memo(({place:e})=>{const{$t:t}=Q(),n=f.useMemo(()=>{if(e.is_open){const s=e.operating_hours?.find(a=>a.is_today)?.hours;return!s||s.length===0||s.length>1?null:s?.[0]?.split(" - ")[1]}return null},[e.is_open,e.operating_hours]),r=f.useMemo(()=>i.jsx(Zxe,{operatingHours:e.operating_hours}),[e.operating_hours]);return i.jsx(pn,{tooltipText:r,asChild:!0,children:i.jsx(L,{variant:"tiny",color:e.is_open?"super":"red",children:e.is_open?n?t({defaultMessage:"Open until {time}",id:"abDRIJdom/"},{time:n}):t({defaultMessage:"Open",id:"JfG49wNHKP"}):t({defaultMessage:"Closed",id:"Fv1ZSzMOV6"})})})});g9.displayName="OpenUntil";const pw=A.memo(({icon:e,label:t,href:n,target:r})=>{const s=f.useCallback(o=>{o.stopPropagation()},[]),a=i.jsxs(L,{variant:"tiny",color:"light",className:"gap-xs flex items-start md:items-center",children:[i.jsx(me,{icon:e,size:"sm",className:"-translate-x-0.5"}),t]});return n?i.jsx(Ye,{href:n,target:r,className:"cursor-pointer",onClick:s,children:i.jsx(L,{superHover:!0,color:"light",children:a})}):a});pw.displayName="MetaDataItem";const dbe=A.memo(({url:e,children:t,className:n})=>{const r=f.useCallback(s=>{s.stopPropagation()},[]);return e?i.jsx("div",{className:U("inline-flex",n),children:i.jsx(Ye,{href:e,target:"_blank",className:"inline-flex min-w-0 items-center gap-0 duration-150 hover:opacity-60",onClick:r,children:t})}):t});dbe.displayName="LogoWrapper";const fbe=A.memo(({merchantName:e,merchantDomain:t,itemUrl:n,className:r,textVariant:s,iconSize:a,faviconSize:o})=>i.jsx(dbe,{url:n??void 0,className:r,iconSize:a,children:i.jsx(mbe,{name:e,domain:t,faviconSize:o,textVariant:s})}));fbe.displayName="EntityItemMerchantInfo";const mbe=A.memo(({name:e,domain:t,faviconSize:n,textVariant:r="tiny"})=>i.jsxs(L,{variant:r,color:"light",className:"gap-xs flex items-center",children:[i.jsx(fl,{className:"-translate-y-half shrink-0",domain:t,size:n}),i.jsx("span",{className:"truncate whitespace-nowrap",children:e})]}));mbe.displayName="EntityMerchantLogoName";const NT=e=>{if(e.indexOf("$")===-1)return e;const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),n=e.replace(/[$,]/g,"");return t.format(parseFloat(n))},pbe=A.memo(({price:e,comparePrice:t,soldOut:n,size:r,textVariant:s})=>{const{$t:a}=Q(),{isMobileStyle:o}=ye(),l=NT(n&&t?t:e);return i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(L,{variant:s||(o||r==="small"?"smallBold":"baseSemi"),className:n?"line-through":void 0,color:t?"default":void 0,children:l}),n?i.jsx(L,{variant:s??"small",color:"red",children:a({defaultMessage:"Sold Out",id:"MwUAGRNkR/"})}):t&&i.jsx(L,{variant:s??"small",color:"light",className:"line-through",children:NT(t)})]})});pbe.displayName="EntityItemPrice";const G_t=({enabled:e,reason:t})=>{const{data:n,isPending:r,refetch:s}=$e({queryKey:["create_firmly_session"],queryFn:async()=>kZe({reason:t}),enabled:e});return f.useMemo(()=>({createFirmlySessionData:n,isPending:r,refetch:s}),[n,r,s])},hbe=A.memo(({className:e})=>i.jsx(L,{variant:"tiny",color:"super",className:U("flex shrink-0 items-center gap-[5px] !text-[11px]",e),children:"Buy now"}));hbe.displayName="BuyWithProIndicator";const gbe=A.memo(({className:e,textVariant:t="tiny"})=>{const{$t:n}=Q();return i.jsx(pn,{asChild:!0,tooltipLayout:"top",tooltipText:n({defaultMessage:"Shipping is free while shopping with Perplexity Pro",id:"UMkYrflCjt"}),children:i.jsx(L,{color:"light",variant:t,className:e,children:n({defaultMessage:"Free Delivery",id:"d7c64sMLc7"})})})});gbe.displayName="FreeShippingIndicator";const q_t=({reason:e,enabled:t=!0})=>{const n=mt(),{data:r,isLoading:s}=$e({queryKey:r4(),queryFn:()=>MZe({reason:e}),enabled:t}),a=f.useCallback(()=>{setTimeout(()=>{n.invalidateQueries({queryKey:r4()})},3e3)},[n]),o=f.useCallback(({paymentMethodId:l,type:c="card",link:u=null,card:d=null})=>{a(),n.setQueryData(r4(),m=>m&&m.customer?{...m,customer:{...m.customer,default_payment_method_type:c,default_payment_method:c==="card"?{id:l,brand:d?.brand,last_digits:d?.last_digits}:null,default_payment_method_link:c==="link"?{id:l,email:u?.email}:null}}:m)},[a,n]);return f.useMemo(()=>({customerShoppingInfo:r,isCustomerShoppingInfoLoading:s,setDefaultPaymentMethod:o}),[r,s,o])},xF=({ref:e,onInView:t,onNotInView:n,once:r=!0})=>{const[s,a]=f.useState(!1),o=p9e(e);f.useEffect(()=>{const l=r?!s:!0;o&&l?(t(),a(!0)):!o&&l&&n&&(n(),a(!0))},[r,s,a,t,o,n])},ybe=A.memo(()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"70",height:"auto","aria-labelledby":"shop-pay-logo",viewBox:"0 0 424 102",fill:"none",children:[i.jsx("title",{id:"shop-pay-logo",children:"Shop Pay"}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M204.916 30.0997C208.894 25.1796 215.067 21.1016 222.436 21.1016C238.98 21.1016 252.012 34.7983 252.001 51.6974C252.001 69.3058 238.903 82.3375 223.189 82.3375C214.834 82.3375 208.44 78.06 206.102 74.4918H205.88V100.356C205.88 100.512 205.818 100.661 205.708 100.771C205.598 100.881 205.449 100.943 205.293 100.943H190.566C190.409 100.943 190.258 100.882 190.146 100.772C190.035 100.662 189.97 100.513 189.967 100.356V21.6779C189.967 21.5192 190.03 21.3669 190.143 21.2547C190.255 21.1425 190.407 21.0795 190.566 21.0795H204.329C204.486 21.0824 204.635 21.1467 204.745 21.2586C204.855 21.3705 204.916 21.5211 204.916 21.6779V30.0997ZM221.179 67.3428C219.958 67.3814 218.73 67.2768 217.521 67.0265C214.479 66.397 211.694 64.8745 209.522 62.6536C207.35 60.4328 205.89 57.6146 205.329 54.5595C205.167 53.6817 205.082 52.7958 205.072 51.9114C205.061 50.9204 205.144 49.926 205.323 48.9415C205.879 45.8886 207.331 43.0704 209.495 40.8465C211.659 38.6226 214.436 37.094 217.473 36.4557C218.689 36.2001 219.924 36.0919 221.153 36.1288C223.15 36.1534 225.123 36.5679 226.962 37.3492C228.825 38.141 230.513 39.2939 231.929 40.7413C233.344 42.1887 234.459 43.902 235.209 45.7824C235.959 47.6628 236.329 49.6731 236.299 51.6974C236.299 51.6977 236.299 51.698 236.299 51.6983C236.331 53.7263 235.962 55.7408 235.214 57.626C234.465 59.5114 233.351 61.2304 231.937 62.6843C230.522 64.1382 228.834 65.2983 226.97 66.098C225.138 66.8837 223.171 67.3063 221.179 67.3428Z",fill:"currentColor"}),i.jsx("path",{d:"M109.306 32.8701C105.904 25.7337 99.4543 21.1238 89.7359 21.1238C86.753 21.1758 83.8218 21.9123 81.1685 23.2765C78.5151 24.6406 76.2106 26.5959 74.4325 28.9916L74.0779 29.4238V1.45428C74.0779 1.29264 74.0137 1.13763 73.8994 1.02333C73.7851 0.909028 73.6301 0.844803 73.4684 0.844803H59.7275C59.5678 0.847707 59.4156 0.913196 59.3037 1.02718C59.1917 1.14117 59.1291 1.29454 59.1291 1.45428V81.6837C59.1291 81.8424 59.1921 81.9946 59.3044 82.1068C59.4166 82.219 59.5688 82.2821 59.7275 82.2821H74.4436C74.6033 82.2821 74.7567 82.2194 74.8707 82.1075C74.9847 81.9956 75.0502 81.8434 75.0531 81.6837V47.4754C75.0531 40.8265 79.4856 36.1169 86.5777 36.1169C94.3347 36.1169 96.2961 42.4998 96.2961 49.0046V81.6837C96.2961 81.8424 96.3592 81.9946 96.4714 82.1068C96.5836 82.219 96.7358 82.2821 96.8945 82.2821H111.577C111.737 82.2821 111.891 82.2194 112.004 82.1075C112.118 81.9956 112.184 81.8434 112.187 81.6837V47.0543C112.187 45.8686 112.187 44.705 112.032 43.5747C111.78 39.8707 110.856 36.2435 109.306 32.8701V32.8701Z",fill:"currentColor"}),i.jsx("path",{d:"M35.8249 44.7604C35.8249 44.7604 28.3339 42.9985 25.5746 42.2893C22.8153 41.5801 17.9949 40.073 17.9949 36.4272C17.9949 32.7814 21.8845 31.6179 25.8295 31.6179C29.7745 31.6179 34.1627 32.5709 34.5062 36.948C34.5201 37.1058 34.5927 37.2525 34.7097 37.3593C34.8267 37.466 34.9795 37.5249 35.1379 37.5243L49.6434 37.4689C49.7288 37.4691 49.8133 37.4517 49.8916 37.4178C49.9699 37.3838 50.0404 37.3341 50.0987 37.2717C50.1569 37.2093 50.2017 37.1356 50.2301 37.0551C50.2585 36.9746 50.2701 36.8891 50.264 36.804C49.3664 22.7971 37.0771 17.7883 25.7408 17.7883C12.2991 17.7883 2.46987 26.6534 2.46987 36.4272C2.46987 43.5636 4.48669 50.2568 20.3442 54.911C23.1256 55.7199 26.9044 56.7727 30.2066 57.6924C34.1738 58.8006 36.3125 60.4739 36.3125 63.1112C36.3125 66.1697 31.8799 68.2973 27.5249 68.2973C21.2196 68.2973 16.7427 65.9592 16.377 61.7593C16.358 61.6056 16.2832 61.4642 16.1667 61.362C16.0502 61.2599 15.9003 61.2041 15.7454 61.2052L1.27307 61.2717C1.18823 61.2717 1.10425 61.2887 1.02614 61.3218C0.94802 61.355 0.877379 61.4035 0.818427 61.4645C0.759474 61.5255 0.713411 61.5978 0.683003 61.677C0.652596 61.7562 0.638464 61.8407 0.641441 61.9255C1.30633 75.1456 14.0721 82.271 25.9735 82.271C43.7038 82.271 51.7156 72.2977 51.7156 62.9561C51.7378 58.5679 50.7294 48.5724 35.8249 44.7604Z",fill:"currentColor"}),i.jsx("path",{d:"M146.384 17.6442C132.654 17.6442 125.806 22.3095 120.31 26.0439L120.143 26.1547C119.86 26.3488 119.66 26.6427 119.584 26.9775C119.508 27.3124 119.562 27.6637 119.733 27.961L125.163 37.3137C125.265 37.4887 125.404 37.6391 125.571 37.754C125.738 37.869 125.928 37.9457 126.127 37.9786C126.323 38.0139 126.523 38.0053 126.715 37.9536C126.907 37.9018 127.084 37.8082 127.235 37.6794L127.668 37.3248C130.493 34.9534 135.026 31.7841 145.996 30.9197C152.102 30.4322 157.377 32.0279 161.266 35.6626C165.544 39.6076 168.104 45.9794 168.104 52.7058C168.104 65.0837 160.812 72.8629 149.099 73.018C139.447 72.9626 132.965 67.9317 132.965 60.496C132.965 56.5511 134.749 53.9802 138.228 51.4093C138.494 51.2193 138.682 50.9395 138.757 50.6217C138.832 50.304 138.79 49.9696 138.638 49.6806L133.762 40.4608C133.672 40.2958 133.551 40.1502 133.404 40.0323C133.258 39.9144 133.089 39.8266 132.909 39.7738C132.725 39.7188 132.531 39.7033 132.34 39.7281C132.149 39.7529 131.965 39.8176 131.801 39.9179C126.327 43.1647 119.611 49.1043 119.977 60.5182C120.42 75.0459 132.499 86.1384 148.201 86.5927H148.988H150.063C168.724 85.9833 182.199 72.1315 182.199 53.3485C182.199 36.1059 169.633 17.6442 146.384 17.6442Z",fill:"currentColor"}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M282.375 1.04428H408.027C416.699 1.04428 423.73 8.07446 423.73 16.7466V85.54C423.73 94.2121 416.699 101.242 408.027 101.242H282.375C273.703 101.242 266.673 94.2121 266.673 85.54V16.7466C266.673 8.07446 273.703 1.04428 282.375 1.04428ZM310.566 55.5316C321.049 55.5316 328.551 47.8854 328.551 37.1697C328.551 26.5093 321.049 18.8188 310.566 18.8188H292.06C291.84 18.8188 291.628 18.9064 291.473 19.0623C291.317 19.2181 291.229 19.4295 291.229 19.65V70.4361C291.232 70.6556 291.32 70.8653 291.476 71.0206C291.631 71.1758 291.841 71.2643 292.06 71.2672H299.019C299.24 71.2672 299.451 71.1796 299.607 71.0237C299.763 70.8679 299.85 70.6565 299.85 70.4361V56.3627C299.85 56.1423 299.938 55.9309 300.094 55.775C300.25 55.6191 300.461 55.5316 300.682 55.5316H310.566ZM310.034 26.5315C315.73 26.5315 319.93 31.0306 319.93 37.1697C319.93 43.3198 315.73 47.8078 310.034 47.8078H300.682C300.463 47.8078 300.253 47.7218 300.098 47.5683C299.942 47.4149 299.853 47.2063 299.85 46.9878V27.3626C299.853 27.1431 299.942 26.9334 300.097 26.7781C300.252 26.6229 300.462 26.5344 300.682 26.5315H310.034ZM330.601 61.5266C330.529 59.8838 330.868 58.2489 331.588 56.7704C332.308 55.2919 333.386 54.0167 334.724 53.0604C337.428 51.0325 341.616 49.9798 347.833 49.736L354.426 49.5144V47.564C354.426 43.6745 351.811 42.0233 347.611 42.0233C343.412 42.0233 340.763 43.5082 340.143 45.9351C340.093 46.1065 339.988 46.2564 339.843 46.3609C339.698 46.4653 339.523 46.5183 339.345 46.5113H332.84C332.72 46.5143 332.601 46.491 332.492 46.4431C332.382 46.3952 332.284 46.3238 332.205 46.2341C332.126 46.1443 332.067 46.0383 332.033 45.9235C331.999 45.8086 331.991 45.6878 332.009 45.5694C332.984 39.807 337.749 35.4299 347.911 35.4299C358.704 35.4299 362.593 40.4498 362.593 50.0352V70.4028C362.595 70.5129 362.575 70.6221 362.533 70.7243C362.492 70.8264 362.431 70.9193 362.354 70.9977C362.277 71.076 362.185 71.1382 362.083 71.1807C361.981 71.2232 361.872 71.245 361.762 71.245H355.191C355.081 71.245 354.972 71.2232 354.87 71.1807C354.769 71.1382 354.677 71.076 354.599 70.9977C354.522 70.9193 354.461 70.8264 354.42 70.7243C354.379 70.6221 354.358 70.5129 354.36 70.4028V68.8846C354.371 68.7514 354.339 68.6183 354.268 68.5049C354.197 68.3915 354.092 68.3041 353.967 68.2555C353.842 68.207 353.706 68.1999 353.577 68.2354C353.448 68.2709 353.334 68.347 353.252 68.4525C351.29 70.5912 348.099 72.1426 343.013 72.1426C335.555 72.1647 330.601 68.2641 330.601 61.5266ZM354.426 57.094V55.5205L345.894 55.9637C341.395 56.1964 338.768 58.0692 338.768 61.2163C338.768 64.0643 341.173 65.6489 345.362 65.6489C351.058 65.6489 354.426 62.5682 354.426 57.1051V57.094ZM369.198 80.7196V86.6481C369.188 86.8397 369.242 87.0293 369.353 87.1861C369.463 87.3429 369.623 87.4579 369.807 87.5124C370.966 87.8283 372.164 87.9739 373.365 87.9446C379.736 87.9446 385.554 85.6175 388.879 76.553L403.506 37.5353C403.548 37.4097 403.559 37.276 403.54 37.1451C403.52 37.0142 403.47 36.8897 403.394 36.7817C403.317 36.6738 403.216 36.5854 403.099 36.5238C402.982 36.4622 402.852 36.4291 402.719 36.4272H395.904C395.727 36.4257 395.554 36.4809 395.411 36.5845C395.267 36.6882 395.161 36.8349 395.106 37.0034L387.05 61.7149C386.989 61.8769 386.879 62.0163 386.737 62.1147C386.594 62.2131 386.425 62.2658 386.252 62.2658C386.079 62.2658 385.91 62.2131 385.767 62.1147C385.625 62.0163 385.516 61.8769 385.454 61.7149L376.168 36.9369C376.106 36.7782 375.998 36.6417 375.858 36.5449C375.718 36.4481 375.552 36.3956 375.381 36.394H368.732C368.6 36.3959 368.47 36.429 368.353 36.4906C368.236 36.5522 368.135 36.6406 368.058 36.7485C367.981 36.8564 367.931 36.9809 367.912 37.1119C367.892 37.2428 367.904 37.3765 367.946 37.5021L381.62 72.6301C381.687 72.8126 381.687 73.0129 381.62 73.1953L381.188 74.5583C380.684 76.2492 379.627 77.722 378.186 78.7407C376.746 79.7593 375.005 80.265 373.243 80.1766C372.22 80.1755 371.2 80.079 370.195 79.8885C370.073 79.8656 369.948 79.87 369.828 79.9012C369.708 79.9325 369.596 79.9898 369.501 80.0692C369.406 80.1486 369.329 80.2481 369.277 80.3605C369.224 80.4729 369.197 80.5956 369.198 80.7196Z",fill:"currentColor"})]}));ybe.displayName="ShopPayIcon";const K_t=(e,t)=>{const n=parseFloat(t.replace(/[^0-9.-]+/g,"")),r=parseFloat(e.replace(/[^0-9.-]+/g,"")),s=Math.trunc((n-r)/n*100);return s===0?null:`${s}%`},Y_t=(e,t)=>{let n;return e.thumbnails&&e.thumbnails?.length===1?n=[...e.thumbnails,...e.images]:n=e.thumbnails?.length>0?e.thumbnails:e.images,n.filter(r=>r.variants.includes(t.id)).concat(n.filter(r=>r.variants.length===0))},Q_t=he(async()=>{const{ShoppingDetailsModal:e}=await ae(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-CWx7Qdyg.js");return{ShoppingDetailsModal:t}},__vite__mapDeps([111,3,1,43,112,4,48,49,50,6,5,44,113,114,115,116,117,118,119]));return{default:e}}),X_t=he(async()=>{const{ShopifyPurchaseModal:e}=await ae(async()=>{const{ShopifyPurchaseModal:t}=await import("./ShopifyPurchaseModal-D_jAf0gW.js");return{ShopifyPurchaseModal:t}},__vite__mapDeps([120,3,1,4,121,48,49,50,6,5,45]));return{default:e}}),Z_t=(e,t)=>{switch(t.type){case"setItemDetailsOpen":return{...e,itemDetailsOpen:t.open};case"setSelectedImageIndex":return{...e,selectedImageIndex:t.index};case"setImageGalleryOpen":return{...e,imageGalleryOpen:t.open};case"setTryOnImageUrl":return{...e,tryOnImageUrl:t.url};case"setIsGeneratingTryOn":return{...e,isGeneratingTryOn:t.isGenerating}}},vbe={userDiscountOffer:null,shouldShowBuyWithPro:!1,selectedVariant:null,shopifyPurchaseModalOpen:!1,purchaseUrl:"",hideReviewSummary:!1,hasReviewSummary:!1,isShopifyPurchase:null,carouselImages:[],badgeText:"",needsUpsell:!1,showDiscountTag:!1,inViewRef:A.createRef(),reviewSummaryLoading:!1,buttonTitle:"",buttonTrailingComponent:null,selectedImageIndex:0,hasProsOrCons:!1,itemDetailsOpen:!1,imageGalleryOpen:!1,onPrimaryButtonClick:()=>{},tryOnImageUrl:null,isGeneratingTryOn:!1},J_t={setItemDetailsOpen:()=>{},setSelectedImageIndex:()=>{},setImageGalleryOpen:()=>{},setTryOnImageUrl:()=>{},setIsGeneratingTryOn:()=>{}},xbe=f.createContext(vbe),bbe=f.createContext(J_t),ewt=()=>f.useContext(xbe),twt=()=>f.useContext(bbe),_be=A.memo(({contextUUID:e,item:t,inFlight:n,entryUUID:r,onBuyWithProButtonClick:s,onShopifyButtonClick:a,children:o,canTryOn:l=!1})=>{const c="shopping-widget-provider",{$t:u}=Q(),[d,m]=f.useReducer(Z_t,{...vbe}),[p,h]=f.useState(1),[g,y]=f.useState(!1),[v,x]=f.useState(t.variants.find(Ue=>Ue.available)||t.variants[0]),{trackEvent:b}=Me(),{openModal:_}=vt(),{hasAccessToProFeatures:w}=yt(),C=Qe(),{openVisitorLoginUpsell:S}=Xn({enabled:!C}),E=co(),k=jf()==="US",{env:{isLocalhost:T}}=Et(),j=k||T,R=f.useRef(null),{isMobileStyle:O}=ye();xF({ref:R,onInView:()=>{e&&b("shown shopping product",{contextUUID:e,entryUUID:r??"",productId:t.id,productName:t.name,productURL:t.url,client:t.client})}});const P=!!t.review_summary?.buy_if,N=!P&&n;let I=null;v?.id&&t?.merchant_info?.merchant_domain&&t.client!=="shopify_catalogue"&&(I=`https://${t.merchant_info.merchant_domain}/cart/${v.id}:${p}`);const D=f.useMemo(()=>{const Ue=v?Y_t(t,v):[];return d.tryOnImageUrl?[{src:d.tryOnImageUrl,variants:[]},...Ue]:Ue},[t,v,d.tryOnImageUrl]),F=f.useMemo(()=>{const Ue=t.images.map(Ot=>({image:Ot.src||"",url:Ot.src||""}));return d.tryOnImageUrl?[{image:d.tryOnImageUrl,url:d.tryOnImageUrl},...Ue]:Ue},[t.images,d.tryOnImageUrl]),B=f.useMemo(()=>t.merchant_info.pro_shop_enabled&&j,[t.merchant_info.pro_shop_enabled,j]),{customerShoppingInfo:V}=q_t({enabled:B??!1,reason:c}),$=f.useMemo(()=>!V?.customer?.shipping_address?.address.city,[V]),G=f.useCallback(()=>{const Ue=p+1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:Ue}),h(Ue)},[e,t.name,p,b]),X=f.useCallback(()=>{const Ue=p>1?p-1:1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:Ue}),h(Ue)},[e,t.name,p,b]),Y=f.useCallback(async()=>{v?.price?_("shoppingPaymentModal",{product:t,onSuccess:Ue=>{_("purchaseConfirmationModal",{order:Ue})}}):window.open(t.url)},[t,_,v]),W=f.useCallback(()=>{_("shoppingOnboardingModal",{onContinue:()=>{Y()}})},[Y,_]),H=f.useCallback(()=>{e&&I&&(b("shopping modal button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:v?.price??"",client:t.client}),window.open(I),y(!1))},[e,I,b,t.url,t.id,t.name,t.client,v]),Z=f.useCallback(Ue=>{e&&t.url&&b("shopping card button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:v?.price??"",cta:Ue,client:t.client})},[e,t.url,t.id,t.name,t.client,b,v]),re=f.useMemo(()=>{if(v?.compare_at_price&&v?.price){const Ue=K_t(v.price,v.compare_at_price);if(Ue)return u({defaultMessage:"{amount} off",id:"+Fpudsk35l"},{amount:Ue})}return null},[v,u]),q=f.useMemo(()=>!!t.review_summary&&t.review_summary.review_quality_score===0,[t.review_summary]),J=f.useCallback((Ue,Ot)=>{if(!t.variants)return;const pt=t.variants.find(Mt=>[Mt.option1,Mt.option2,Mt.option3].every((Be,Oe)=>Oe===Ot?Be===Ue:Be===v?.[`option${Oe+1}`]));pt&&x(pt),e&&b("shopping product option selected",{contextUUID:e,productName:t.name})},[e,t.name,t.variants,v,x,b]),te=f.useMemo(()=>I,[I]),se=f.useMemo(()=>B&&(!C||!w),[B,C,w]),de=f.useMemo(()=>u(B||I?{defaultMessage:"Buy with",id:"bw7bvygIAi"}:{defaultMessage:"Visit Site",id:"Ppy3I8Cd73"}),[B,I,u]),fe=f.useMemo(()=>B?i.jsx(AS,{sizeVariant:"small",fillColor:"fill-inverse",width:"w-[26px] ml-0.5"}):I?i.jsx("div",{className:"h-[14px] [&>*]:ml-0.5 [&>*]:w-auto",children:i.jsx(ybe,{})}):void 0,[B,I]),ve=f.useCallback(()=>{a?a():y(!0)},[a,y]),ue=f.useCallback(()=>{if(B){if(!C){S({origin:Ie.BUY_WITH_PRO_BUTTON,description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"}),title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),sheetModalVariant:"bottom-sheet-gradient"});return}if(!w){E({origin:Ie.BUY_WITH_PRO_BUTTON,pitchMessage:{title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"})}});return}$?W():Y(),s?.()}else te?ve():window.open(t.url)},[Y,W,ve,te,t.url,s,$,C,w,E,S,B,u]),ie=f.useCallback(()=>{Z(B?"buy with pro":te?"buy with shop":"visit site")},[Z,te,B]),be=f.useCallback(()=>{ue(),ie()},[ue,ie]),Se=f.useMemo(()=>N?!0:(t.review_summary?.pros_detailed?.length??0)>0||(t.review_summary?.cons_detailed?.length??0)>0,[t.review_summary?.pros_detailed,t.review_summary?.cons_detailed,N]),Ce=f.useMemo(()=>({...d,shouldShowBuyWithPro:B,selectedVariant:v,shopifyPurchaseModalOpen:g,purchaseUrl:I,hideReviewSummary:q,hasReviewSummary:P,isShopifyPurchase:te,carouselImages:D,badgeText:re,needsUpsell:se,inViewRef:R,reviewSummaryLoading:N,buttonTitle:de,buttonTrailingComponent:fe,hasProsOrCons:Se,onPrimaryButtonClick:be}),[d,B,v,g,I,q,P,te,D,re,se,R,N,de,fe,Se,be]),ke=f.useMemo(()=>({setItemDetailsOpen:Ue=>m({type:"setItemDetailsOpen",open:Ue}),setSelectedImageIndex:Ue=>m({type:"setSelectedImageIndex",index:Ue}),setImageGalleryOpen:Ue=>m({type:"setImageGalleryOpen",open:Ue}),setTryOnImageUrl:Ue=>m({type:"setTryOnImageUrl",url:Ue}),setIsGeneratingTryOn:Ue=>m({type:"setIsGeneratingTryOn",isGenerating:Ue})}),[m]),Re=f.useCallback(()=>{ke.setItemDetailsOpen(!1)},[ke]),je=f.useCallback(()=>{ke.setItemDetailsOpen(!1),y(!0)},[ke,y]),ct=f.useCallback(()=>{ke.setItemDetailsOpen(!1)},[ke]),tt=f.useCallback(()=>{y(!1)},[y]),ut=f.useCallback(Ue=>{ke.setSelectedImageIndex(Ue),O||requestAnimationFrame(()=>{ke.setImageGalleryOpen(!0)})},[ke,O]),we=f.useCallback(()=>{ke.setImageGalleryOpen(!1)},[ke]);return i.jsx(xbe.Provider,{value:Ce,children:i.jsxs(bbe.Provider,{value:ke,children:[o,i.jsx(Q_t,{isOpen:d.itemDetailsOpen,onClose:Re,onShopifyButtonClick:je,inFlight:n,onBuyWithProButtonClick:ct,item:t,canTryOn:l,menuItems:le}),i.jsx(X_t,{open:g,onOptionSelect:J,onQuantityIncrement:G,onQuantityDecrement:X,onClose:tt,quantity:p,item:t,selectedVariant:v,handleBuyClick:H,selectedImageIndex:d.selectedImageIndex,handleImageClick:ut,images:D}),i.jsx(vF,{title:t.name,mainImageIndex:d.selectedImageIndex,isOpen:d.imageGalleryOpen,images:F,onClose:we})]})})});_be.displayName="ShoppingWidgetProvider";const wbe=A.memo(({contextUUID:e,entryUUID:t,item:n,inFlight:r,innerRef:s,className:a,showProsCons:o=!0,context:l})=>{const{result:{answer_modes:c}}=bn(),u=f.useMemo(()=>c.find(m=>m.answer_mode_type===sn.SHOPPING)?.shopping_config?.can_try_on??!1,[c]);return i.jsx(_be,{contextUUID:e,item:n,inFlight:r,entryUUID:t,canTryOn:u,children:i.jsx(Cbe,{item:n,className:a,contextUUID:e,entryUUID:t,inFlight:r,innerRef:s,showProsCons:o,context:l})})});wbe.displayName="ShoppingWidgetDense";const Cbe=A.memo(({item:e,className:t,contextUUID:n,entryUUID:r,innerRef:s,showProsCons:a,context:o})=>{const l="widget-inner",{inViewRef:c,shouldShowBuyWithPro:u,carouselImages:d,badgeText:m,selectedVariant:p,reviewSummaryLoading:h,hasProsOrCons:g}=ewt(),{setItemDetailsOpen:y}=twt(),{isMobileStyle:v}=ye(),{trackEvent:x}=Me(),b=f.useCallback(()=>{y(!0),x("shopping card body clicked",{productId:e.id,productURL:e.url,contextUUID:n??"",client:e.client}),o==="answersMode"&&x("answer mode tab item selected",{answerMode:"shopping",entryUUID:r??"",contextUUID:n??"",itemID:e.id})},[o,n,r,e.client,e.id,e.url,y,x]);G_t({enabled:e.client==="firmly",reason:l});const _=f.useCallback(()=>{b()},[b]);return i.jsx(Uxe,{id:e.id,entityVariant:"dense-card",className:U("relative !p-0",t),children:i.jsxs(z,{as:"button","data-widget-id":e.id,ref:Zue([s,c]),className:U("group/root gap-sm md:gap-md flex cursor-pointer flex-col p-[10px] duration-150"),onClick:_,children:[i.jsxs("div",{className:U("md:gap-md flex flex-1 items-start gap-[12px]",{"md:items-center":!a||!g,"md:items-start":a&&g}),children:[e.image_url&&i.jsx("div",{className:"border-subtlest size-[88px] shrink-0 rounded-lg border bg-white md:size-28 dark:border-0",children:i.jsx(pF,{images:d.map(w=>w.src),className:"size-full rounded-lg bg-white",badgeText:m??void 0})}),i.jsxs("div",{className:"gap-xs flex flex-1 flex-col",children:[i.jsx("div",{className:"gap-xs flex items-start justify-between",children:i.jsxs("div",{className:"gap-xs flex flex-col",children:[e.merchant_info&&i.jsx(fbe,{merchantName:e.merchant,merchantDomain:e.merchant_info.merchant_domain,itemUrl:e.url,className:"md:mb-xs"}),u&&i.jsx("div",{className:"border-super/10 md:right-sm md:top-sm bg-super/10 md:px-sm md:py-xs absolute right-0 top-0 rounded-bl rounded-tr-[11px] border border-r-0 border-t-0 px-[6px] py-0.5 duration-150 md:rounded md:rounded-tr-[6px] md:border-r md:border-t",children:i.jsx(hbe,{})}),i.jsx(L,{variant:v?"smallBold":"baseSemi",className:"line-clamp-2 text-pretty text-left leading-tight",children:e.name}),i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(pbe,{textVariant:v?"tiny":void 0,comparePrice:p?.compare_at_price??void 0,price:e.price,size:"small"}),u&&i.jsx(gbe,{className:"inline-flex"})]}),typeof e.rating=="number"&&i.jsx(hF,{reviewCount:e.num_reviews,rating:e.rating,size:"xs",variant:"truncated",textVariant:v?"tiny":void 0})]})}),!v&&g&&a&&i.jsx(wn,{active:h,className:"-ml-xs mt-1",children:i.jsx(Rv,{pros:e.review_summary?.pros_detailed??le,cons:e.review_summary?.cons_detailed??le,loading:h,id:e.id})})]})]}),v&&g&&a&&i.jsx(Rv,{pros:e.review_summary?.pros_detailed??le,cons:e.review_summary?.cons_detailed??le,loading:h,className:"mt-2",id:e.id})]})})});Cbe.displayName="WidgetInner";const nwt=he(async()=>{const{ShoppingDetailsModal:e}=await ae(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-CWx7Qdyg.js");return{ShoppingDetailsModal:t}},__vite__mapDeps([111,3,1,43,112,4,48,49,50,6,5,44,113,114,115,116,117,118,119]));return{default:e}}),rwt=he(async()=>{const{ShoppingViewMoreModal:e}=await ae(async()=>{const{ShoppingViewMoreModal:t}=await import("./ShoppingViewMoreModal-n4LTqU4Q.js");return{ShoppingViewMoreModal:t}},__vite__mapDeps([122,3,1,123,4,121,48,49,50,6,5,45,124,112,44,113,114,115,116,117,118,119,125]));return{default:e}}),swt=A.memo(({data:e,contextUUID:t,entryUUID:n,entryTitle:r,title:s,menuItemFn:a,innerRef:o,isEntryInFlight:l,entityVariant:c,includeViewAll:u,className:d,groupClassName:m,entityClassName:p,loading:h,textLoading:g,onRemoveResults:y})=>{const{$t:v}=Q(),{entityRefs:x}=mF(),{viewMoreOpen:b,setViewMoreOpen:_}=T_t(),[w,C]=f.useState(null),{trackEvent:S}=Me(),E=f.useCallback(()=>{_(!0),n&&S("view all clicked",{entryUUID:n,src:"button"})},[n,_,S]),M=f.useMemo(()=>{const j=[],R=[],O=[];return e.forEach(P=>{const N=dx(P);if(!N)return;const I=N.object;if(I==="ShopifyWidget")j.push(P),R.push(N),ea(N.images)&&O.push(N.images[0]);else if(I==="PlaceWidget"&&(j.push(P),R.push(N),ea(N.images))){const D=N.images[0];O.push({src:D,variants:[]})}}),{widgetResults:j,widgets:R,images:O}},[e]),k=f.useCallback(()=>_(!1),[_]),T=f.useCallback(()=>C(null),[]);return i.jsxs(i.Fragment,{children:[i.jsxs(xe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,ease:hn},ref:o,className:U("gap-sm relative isolate flex flex-col",m),children:[s&&i.jsxs("div",{className:"mt-md flex items-end justify-between",children:[i.jsx(Axe,{title:s,loading:h}),i.jsx("div",{className:"gap-sm flex items-center",children:i.jsxs(it,{mode:"popLayout",initial:!1,children:[u&&!h&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,ease:na},children:i.jsx(ge,{text:v({defaultMessage:"View All",id:"wbcwKddwLa"}),variant:"border",size:"tiny",pill:!0,onClick:E})},"view-all-button"),!h&&y&&i.jsx(ge,{variant:"border",size:"tiny",pill:!0,icon:Lt,onClick:y,toolTip:v({defaultMessage:"Remove results",id:"eLqO1aEzzN"})},"remove-results-button")]})})]}),g?i.jsx(Lxe,{}):i.jsx(Sbe,{validatedWidgets:M,className:d,menuItemFn:a,contextUUID:t,entryUUID:n,isEntryInFlight:l,entityRefs:x,entityVariant:c,entityClassName:p,includeViewAll:u,onClickViewAll:E})]}),n&&i.jsxs(i.Fragment,{children:[w&&i.jsx(nwt,{isOpen:w!==null,onClose:T,item:w,onShopifyButtonClick:Rn,onBuyWithProButtonClick:Rn,inFlight:l,menuItems:le}),i.jsx(rwt,{open:b,onClose:k,entryUUID:n,title:r??"",initialResults:M.widgetResults.filter(j=>"meta_data"in j)})]})]})});swt.displayName="EntityGroup";const Sbe=A.memo(({validatedWidgets:e,className:t,menuItemFn:n,contextUUID:r,entryUUID:s,isEntryInFlight:a,entityRefs:o,entityClassName:l,includeViewAll:c,onClickViewAll:u})=>i.jsxs("div",{className:U("gap-sm flex flex-col",t),children:[e.widgetResults.map((d,m)=>{const p=n?n(d):void 0,h=e.widgets[m];return ns(h).with({object:"ShopifyWidget"},g=>i.jsx(wbe,{item:g,contextUUID:r,entryUUID:s,innerRef:o[g.id],inFlight:a,className:l},g.id)).with({object:"PlaceWidget"},g=>i.jsx(ube,{place:g,contextUUID:r,entryUUID:s,menuItems:p,inFlight:a,className:l},g.id)).otherwise(()=>null)}),c&&i.jsx(Oxe,{onClick:u,disabled:a,images:e.images})]}));Sbe.displayName="HighIntentWidgetGroup";const awt=(e,t)=>e.concat(t).reduce((r,s)=>{const a=dx(s);if(!a)return r;const o=a.object;return(o==="ShopifyWidget"||o==="PlaceWidget")&&(r[o]||(r[o]=[]),r[o].push(s)),r},{}),owt=e=>{const t=dx(e);if(t)switch(t.object){case"ShopifyWidget":return!0;default:return!1}return!1},Ebe=["GenericFallbackWidget"],iwt=(e,t)=>{if(!e)return;const n=e.filter(r=>r.plan_block&&r.intended_usage=="plan").map(r=>r.plan_block);if(n&&n.length>0){const r=[];let s=!1;for(const a of n){for(const o of a?.goals??[])if(o.description!==null)if(r.length==0||r[r.length-1]?.final)r.push({...o});else{const l=r[r.length-1];l&&(l.description+=o.description,l.final=o.final)}a?.final&&(s=!0)}if(r.length>0)return{goals:r,final:s,channel_uuid:"",comprehensive_mode:!1}}return t},lwt=e=>e.blocks??le,cwt=e=>{const t=e.filter(s=>s.plan_block&&s.intended_usage=="pro_search_steps").map(s=>s.plan_block),n={};for(let s=0;s<t.length;s++)n[t[s]?.steps[0]?.uuid??""]=s;return t.filter((s,a)=>n[s.steps[0]?.uuid??""]===a).map(s=>s.steps.map(a=>({step_type:a.step_type,uuid:a.uuid??"",content:a?.initial_query_content??a?.attachment_content??a?.terminate_content??a?.search_web_content??a?.web_results_content??a?.code_content??a?.table_status_content??a?.entropy_request_content??a?.thought_content??a?.browser_search_content??a?.browser_open_tab_content??a?.browser_open_tab_results_content??a?.url_navigate_content??a?.browser_get_site_content_content??a?.user_clarification_content??a?.browser_get_history_summary_content??a?.browser_get_open_tab_content_content??a?.read_calendar_content??a?.read_calendar_response_content??a?.read_email_content??a?.read_email_response_content??a?.update_calendar_content??a?.generate_image_content??a?.generate_image_results_content??a?.generate_video_content??a?.generate_video_results_content??a?.search_tabs_content??a?.search_tabs_results_content??a?.create_app_results_content??a?.browser_close_tabs_content??a?.browser_close_tabs_results_content??a?.update_calendar_response_content??a?.browser_group_tabs_content??a?.browser_group_tabs_results_content??a?.create_chart_content??a?.get_url_content_content??a?.create_client_app_content??a?.get_user_info_content??a?.get_user_info_response_content??a?.get_free_busy_content??a?.get_free_busy_response_content??a?.send_email_content??a?.send_email_response_content??a?.browser_ungroup_content??a?.browser_search_tab_groups_content??a?.browser_search_tab_groups_result_content??a?.search_browser_content??a?.search_browser_results_content??a?.clarifying_questions_content??a?.clarifying_questions_output_content??a?.email_calendar_agent_content??a?.email_calendar_agent_response_content??a?.mcp_tool_input_content??a?.mcp_tool_output_content??a?.blocking_clarifying_questions_content??a?.create_tasks_content??a?.create_tasks_response_content??a?.flights_search_content??a?.flights_booking_content??a?.flights_search_response_content??a?.flights_booking_response_content??a?.flights_agent_content??{},assets:a.assets}))).flat()},uwt=e=>e?.filter(t=>t.reasoning_plan_block&&t.intended_usage==="reasoning_plan").map(t=>t.reasoning_plan_block),dwt=e=>{let t=!1;if(e&&e.length>0){const n=new Map;for(const a of e){if(a.goals){for(const o of a.goals)if(o.id)if(n.has(o.id)){const l=n.get(o.id);l.description+=o.description,n.set(o.id,l)}else n.set(o.id,{...o})}t=a.progress==="DONE"}const r=Array.from(n.values()),s=e.flatMap(a=>a.web_results??le);return{goals:r,web_results:s,final:t}}};function fwt(e){const t={},n=[];return e?.forEach(r=>{if(r.widget_block){const s=t[r.intended_usage]??n.length;t[r.intended_usage]=s,n[s]=q$e(n[s],r.widget_block)}}),n}function mwt(e){return(e?.filter(t=>t.media_block).flatMap(t=>t.media_block.media_items)??[]).filter(t=>!t.sponsored_uuid)}function pwt(e){return e?.filter(t=>t.media_block).flatMap(t=>t.media_block.generated_media_items)??[]}function hwt(e=le){return e.reduce((t,n)=>{if(n.is_code_interpreter&&n.is_image)t.codeInterpreterImages.push(n);else{const r=n.meta_data?.source==="quartr"?{...n,snippet:""}:n;t.webResultsStandard.push(r)}return t},{webResultsStandard:[],codeInterpreterImages:[]})}function gwt(e){return e?.flatMap(t=>t.inline_entity_block?.knowledge_card_block?t.inline_entity_block.knowledge_card_block.knowledge_cards:t.knowledge_card_block?t.knowledge_card_block.knowledge_cards:[])??[]}function ywt(e){return e??le}function vwt(e){return e?.filter(t=>t.citation_block).flatMap(t=>t.citation_block.citations)??le}function xwt(e){const t=e?.find(r=>r?.inline_entity_block?.finance_inline_block&&r.intended_usage==="answer_finance_widget")?.inline_entity_block?.finance_inline_block;return t===void 0?void 0:{object:"FinanceWidget",data:t.data_json.map(r=>JSON.parse(r)),data_v2:t?.data_json_v2?.map(r=>JSON.parse(r))}}function bwt(e){const t=e?.map(s=>s.widget_block)?.find(s=>s?.widget_type==="sports");if(!t?.sports_widget_block?.data)return;const r=t.sports_widget_block.data;switch(r.object){case"SportsEventsWidget":return r;case"SportsIndvScheduleWidget":return r;case"SportsStandingsWidget":return r;case"SportsIndvEventsWidget":return r;default:return}}function _wt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="WeatherWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function wwt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TimeWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function Cwt(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="TimerWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function Swt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="CalculatorWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function Ewt(e,t){return e&&e.length>0?e.map(n=>({name:n.widget_type||"",url:"",snippet:"",timestamp:"",meta_data:{object:n.widget_type||"unknown",...n},is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""})):t||[]}function Mwt(e){const t=e.find(r=>r?.meta_data?.object==="TableWidget");return t?t.meta_data.search_results:le}function kwt(e){return e.filter(t=>Ebe.includes(t?.meta_data?.object))}function Twt(e){return e.filter(t=>!Ebe.includes(t?.meta_data?.object))}function Nwt(e){const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TaskWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function Awt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="FlightStatusWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function jwt(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="CurrencyExchangeWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function Rwt(e){if(!e?.length)return[];const t=[];return e.forEach(n=>{n.intended_usage==="pro_search_steps"&&n.plan_block?.steps&&n.plan_block.steps.forEach(r=>{r.clarifying_questions_output_content?.clarification&&t.push(r.clarifying_questions_output_content.clarification)})}),t}function Iwt(e){return e?e.find(n=>n.intended_usage==="refinement_filters")?.refinement_filters_block?.refinement_filters:void 0}function Pwt(e){return e?e.find(n=>n.inline_entity_block?.maps_preview_block&&n.intended_usage==="answer_maps_preview")?.inline_entity_block?.maps_preview_block:void 0}const qr=e=>e.result,mr=xt.makeSelector(e=>lwt(e(qr))),Owt=xt.makeSelector(e=>{const t=e(mr),n={};return t.forEach(r=>{r.intended_usage&&(n[r.intended_usage]=r)}),n}),Lwt=xt.makeSelector(e=>e(qr).mode),bF=xt.makeSelector(e=>e(qr).display_model),Dwt=xt.makeSelector(e=>!!e(qr).is_pro_reasoning_mode),Mbe=xt.makeSelector(e=>e(qr).search_implementation_mode),_F=xt.makeSelector(e=>un.isStatusFailed(e(qr))),Fwt=xt.makeSelector(e=>un.isStatusPending(e(qr))),Uwt=xt.makeSelector(e=>un.isStatusBlocked(e(qr))),Bwt=xt.makeSelector(e=>e(qr).plan),kbe=xt.makeSelector(e=>e(qr).widget_data??le),V3=xt.makeSelector(e=>un.parseAskTextField(e(qr))??void 0),Tbe=xt.makeSelector(e=>un.isStatusPending(e(qr))),Vwt=xt.makeSelector(e=>cYe(e(qr))),Nbe=xt.makeSelector(e=>e(qr).expect_search_results),y9=xt.makeSelector(e=>{const t=e(V3),n=un.isStatusCompleted(e(qr));return t?un.hasAnswer(t,n):!1}),Abe=xt.makeSelector(e=>e(Rbe).length>0),pC=xt.makeSelector(e=>cwt(e(mr))),wF=xt.makeSelector(e=>iwt(e(mr),e(Bwt))),Wwt=xt.makeSelector(e=>uwt(e(mr))),v9=xt.makeSelector(e=>dwt(e(Wwt))),CF=xt.makeSelector(e=>Er(e(bF))),$wt=xt.makeSelector(e=>{const t=e(CF),n=e(qr),r=un.parseStructuredAnswerBlocks(n);return r!==null&&r.some(s=>s.intended_usage==="answer_generated_image"||s.intended_usage==="answer_generated_video")&&!r.some(s=>!!s.markdown_block?.answer||!!s.markdown_block?.chunks)&&t===oe.SEARCH}),jbe=xt.makeSelector(e=>fwt(e(mr))),Rbe=xt.makeSelector(e=>hwt(e(V3)?.web_results).webResultsStandard),Ibe=xt.makeSelector(e=>_wt(e(mr))),Pbe=xt.makeSelector(e=>wwt(e(mr))),Obe=xt.makeSelector(e=>Cwt(e(mr))),Lbe=xt.makeSelector(e=>jwt(e(mr))),Dbe=xt.makeSelector(e=>Swt(e(mr))),Fbe=xt.makeSelector(e=>Awt(e(mr))),W3=xt.makeSelector(e=>Ewt(e(jbe),e(kbe))),Hwt=xt.makeSelector(e=>uYe(e(mr),e(bF),e(pC))),zwt=xt.makeSelector(e=>e(V3)?.answer==="Answer skipped."||e(mr).some(t=>t.markdown_block?.answer==="Answer skipped.")),Gwt=xt.makeSelector(e=>e(Lwt)===Hm.COPILOT||e(pC)!=null&&e(pC).length>0),qwt=xt.makeSelector(e=>e(_F)?le:mwt(e(mr))),Kwt=xt.makeSelector(e=>e(_F)?le:pwt(e(mr))),Ywt=xt.makeSelector(e=>{const t=e(wF);return e(Mbe)==="fast"||!!t&&t.goals.length===1&&t.goals[0]?.description==="Searching the web"}),Qwt=xt.makeSelector(e=>e(qr).attachment_processing_progress??le),Ube=xt.makeSelector(e=>!!e(Qwt).length),Bbe=xt.makeSelector(e=>e(qr).search_focus==="writing"),Vbe=xt.makeSelector(e=>{const t=e(Tbe),n=e(Nbe),r=e(Bbe);return!!t&&n!=="false"&&!r}),Xwt=xt.makeSelector(e=>{const t=e(Abe),n=e(Vbe);return t||n}),Zwt=xt.makeSelector(e=>e(bF)===ce.O3_PRO&&!e(y9)?!0:e(Ywt)&&!e(v9)?!1:!!(!e(y9)&&(e(wF)||e(v9)||e(CF)!==oe.SEARCH||e(Mbe)==="multi_step"||e(Ube)))),Jwt=xt.makeSelector(e=>gwt(e(mr))),e2t=xt.makeSelector(e=>ywt(e(qr).related_query_items)),t2t=xt.makeSelector(e=>vwt(e(mr))),Wbe=xt.makeSelector(e=>xwt(e(mr))),$be=xt.makeSelector(e=>bwt(e(mr))),Hbe=xt.makeSelector(e=>Mwt(e(W3))),n2t=xt.makeSelector(e=>kwt(e(W3))),r2t=xt.makeSelector(e=>Twt(e(W3))),s2t=xt.makeSelector(e=>awt(e(W3),e(jbe))),a2t=xt.makeSelector(e=>[...e(Rbe),...e(Hbe)]),o2t=xt.makeSelector(e=>Nwt(e(mr))),i2t=xt.makeSelector(e=>{const t=e($be),n=e(Wbe),r=e(Ibe),s=e(Pbe),a=e(Dbe),o=e(Fbe),l=e(Obe),c=e(Lbe);return!!(t||n||r||s||a||o||l||c)}),l2t=xt.makeSelector(e=>Rwt(e(mr))),c2t=xt.makeSelector(e=>Iwt(e(mr))),u2t=xt.makeSelector(e=>Pwt(e(mr))),zbe=e=>{const{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:l,pendingClarifications:c=[]}=e,u=l2t(e),d=n.backend_uuid?c.filter(p=>p.entryUUID===n.backend_uuid).map(p=>p.content):[],m=Array.from(new Set([...u,...d]));return{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:l,isPending:Fwt(e),isBlocked:Uwt(e),isFinalStep:Hwt(e),isFailed:_F(e),isProReasoningMode:Dwt(e),widgetData:kbe(e),response:V3(e),isEntryInFlight:Tbe(e),hasLLMToken:Vwt(e),isAnswerSkipped:zwt(e),expectWebResults:Nbe(e),steps:pC(e),researchPlan:wF(e),reasoningPlan:v9(e),searchMode:CF(e),hasMediaOnlyLayout:$wt(e),hasAnswer:y9(e),hasWebResults:Abe(e),weatherWidgetData:Ibe(e),timeWidgetData:Pbe(e),timerWidgetData:Obe(e),calculatorWidgetData:Dbe(e),currencyExchangeWidgetData:Lbe(e),flightStatusWidgetData:Fbe(e),isCopilot:Gwt(e),mediaItems:qwt(e),generatedMediaItems:Kwt(e),hasPendingFiles:Ube(e),showAgentWorkflow:Zwt(e),knowledgeCards:Jwt(e),relatedQueryItems:e2t(e),webResultCitations:t2t(e),financeWidgetData:Wbe(e),sportsWidgetData:$be(e),tableWebResults:Hbe(e),highPriorityWidgets:n2t(e),lowPriorityWidgets:r2t(e),groupedEntityWidgets:s2t(e),webResults:a2t(e),taskWidgetData:o2t(e),hasFastWidget:i2t(e),userClarifications:m,refinementFilters:c2t(e),focusIsWriting:Bbe(e),expectSearchResults:Vbe(e),hasSources:Xwt(e),blocksByIntendedUsage:Owt(e),mapsPreviewData:u2t(e)}},d2t=e=>Po()((n,r)=>({editQueryValue:e.result?.query_str??"",isEditingQuery:!1,isStatusUpdaterOpen:!1,wasStatusUpdaterManuallyOpened:!1,selectedRefinementQuery:null,selectedPillIndices:[],...zbe(e),actions:{setEditQueryValue:s=>n({editQueryValue:s}),setIsEditingQuery:s=>n({isEditingQuery:s}),setStatusUpdaterOpen:s=>n({isStatusUpdaterOpen:s}),setWasStatusUpdaterManuallyOpened:s=>n({wasStatusUpdaterManuallyOpened:s}),setSelectedRefinementQuery:s=>n({selectedRefinementQuery:s}),setSelectedPillIndices:s=>n({selectedPillIndices:s}),handleSourcesCuration:s=>{r().result?.frontend_context_uuid&&(r().result?.backend_uuid&&r().scrollToListItem?.(r().result.backend_uuid,{smooth:!0}),r().submitQuery({existingEntryUUID:r().result?.backend_uuid??void 0,newFrontendContextUUID:null,existingFrontendContextUUID:r().result?.frontend_context_uuid,deletedUrls:s,rawQuery:r().result?.query_str??"",existingUuid:r().result?.uuid??void 0,collection:null,promptSource:"user",querySource:"citation_modal"}))}}})),{Context:f2t,useTrackedState:m2t}=f1("ThreadEntry"),Gbe=A.memo(({idx:e,children:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:l})=>{const c=f.useRef(r),{trackEvent:u}=Hh(),{pendingClarifications:d}=Nxe(),[m]=f.useState(()=>d2t({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:l,pendingClarifications:d})),h=m(g=>g.isFinalStep);return f.useEffect(()=>{const g=()=>{const x=setTimeout(()=>{u("engaged",{})},1e4);return()=>{clearTimeout(x)}},y=a&&s,v=c.current&&!r;if(y&&v&&h)return g();c.current=r},[r,h,s,a,u]),f.useEffect(()=>{m.setState(zbe({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:l,pendingClarifications:d}))},[e,n,r,s,a,o,l,d,m]),i.jsx(f2t.Provider,{value:m,children:t})});Gbe.displayName="ThreadEntryProvider";const bn=m2t;function $3(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=bn(),n=Z7(),r=n(e??"")??n(t);return f.useCallback((s,a)=>r?.addTiming(s,a),[r])}function qbe(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=bn(),n=Z7(),r=n(e??"")??n(t);return f.useCallback((s,a)=>r?.addTimingOnce(s,a),[r])}const p2t=({widgetType:e,widgetName:t,widgetSize:n="full"})=>{const{trackEvent:r}=Me(),{result:{backend_uuid:s,frontend_context_uuid:a}}=bn(),o=f.useMemo(()=>({widgetType:e,widgetName:t,widgetLocation:"thread",widgetSize:n,position:0,frontendUUID:a,entryUUID:s}),[e,t,s,a,n]),l=f.useCallback(()=>{r("widget viewed",o)},[r,o]),c=f.useCallback(()=>{r("widget hovered",o)},[r,o]),u=f.useCallback(d=>{r("widget selected",{...o,widgetCTA:{type:"internal_url",permalink:d}})},[r,o]);return f.useMemo(()=>({widgetViewed:l,widgetHovered:c,widgetSelected:u}),[l,c,u])},Go=A.memo(e=>{const{children:t,...n}=e,{widgetSelected:r,widgetViewed:s,widgetHovered:a}=p2t(n),o=f.useRef({hovered:!1,viewed:!1}),{ref:l,isIntersecting:c}=Yue({threshold:.5,freezeOnceVisible:!0});f.useEffect(()=>{c&&!o.current.viewed&&(s(),o.current.viewed=!0)},[c,s]);const u=f.useCallback(()=>{o.current.hovered||(a(),o.current.hovered=!0)},[a]);return i.jsx("div",{ref:l,onMouseEnter:u,"data-testid":e.widgetType+"-widget",children:typeof t=="function"?t({widgetSelected:r}):t})});Go.displayName="WithThreadWidgetInteractionEvents";const Kbe=A.memo(e=>{const{data:t}=e,{menuItems:n}=fg();return t?.result==null?null:i.jsx(Go,{widgetType:"calculator",widgetName:"calculator",widgetSize:"full",children:i.jsx(z,{className:"flex",children:i.jsxs("div",{className:"flex w-full items-center",children:[i.jsx(L,{color:"light",variant:"smallBold",children:i.jsx(me,{className:"mt-two text-2xl leading-none",icon:gke,size:"sm"})}),i.jsx(L,{children:i.jsx(z,{className:"pl-md font-mono text-2xl",children:rKe(t.result)})}),n&&n.length>0&&i.jsx("div",{className:"flex grow items-start justify-end",children:i.jsx(er.Menu,{menuItems:n})})]})})})});Kbe.displayName="CalculatorWidget";function _c(e){return Array.isArray?Array.isArray(e):Xbe(e)==="[object Array]"}function h2t(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function g2t(e){return e==null?"":h2t(e)}function Qi(e){return typeof e=="string"}function Ybe(e){return typeof e=="number"}function y2t(e){return e===!0||e===!1||v2t(e)&&Xbe(e)=="[object Boolean]"}function Qbe(e){return typeof e=="object"}function v2t(e){return Qbe(e)&&e!==null}function qa(e){return e!=null}function AT(e){return!e.trim().length}function Xbe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const x2t="Incorrect 'index' type",b2t=e=>`Invalid value for key ${e}`,_2t=e=>`Pattern length exceeds max of ${e}.`,w2t=e=>`Missing ${e} property in key`,C2t=e=>`Property 'weight' in key '${e}' must be a positive integer`,XX=Object.prototype.hasOwnProperty;class S2t{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=Zbe(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Zbe(e){let t=null,n=null,r=null,s=1,a=null;if(Qi(e)||_c(e))r=e,t=ZX(e),n=x9(e);else{if(!XX.call(e,"name"))throw new Error(w2t("name"));const o=e.name;if(r=o,XX.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(C2t(o));t=ZX(o),n=x9(o),a=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:a}}function ZX(e){return _c(e)?e:e.split(".")}function x9(e){return _c(e)?e.join("."):e}function E2t(e,t){let n=[],r=!1;const s=(a,o,l)=>{if(qa(a))if(!o[l])n.push(a);else{let c=o[l];const u=a[c];if(!qa(u))return;if(l===o.length-1&&(Qi(u)||Ybe(u)||y2t(u)))n.push(g2t(u));else if(_c(u)){r=!0;for(let d=0,m=u.length;d<m;d+=1)s(u[d],o,l+1)}else o.length&&s(u,o,l+1)}};return s(e,Qi(t)?t.split("."):t,0),r?n:n[0]}const M2t={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},k2t={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},T2t={location:0,threshold:.6,distance:100},N2t={useExtendedSearch:!1,getFn:E2t,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Bt={...k2t,...M2t,...T2t,...N2t};const A2t=/[^ ]+/g;function j2t(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const a=s.match(A2t).length;if(n.has(a))return n.get(a);const o=1/Math.pow(a,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(a,l),l},clear(){n.clear()}}}class SF{constructor({getFn:t=Bt.getFn,fieldNormWeight:n=Bt.fieldNormWeight}={}){this.norm=j2t(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Qi(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Qi(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!qa(t)||AT(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,a)=>{let o=s.getFn?s.getFn(t):this.getFn(t,s.path);if(qa(o)){if(_c(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(qa(d))if(Qi(d)&&!AT(d)){let m={v:d,i:u,n:this.norm.get(d)};l.push(m)}else _c(d)&&d.forEach((m,p)=>{c.push({nestedArrIndex:p,value:m})})}r.$[a]=l}else if(Qi(o)&&!AT(o)){let l={v:o,n:this.norm.get(o)};r.$[a]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Jbe(e,t,{getFn:n=Bt.getFn,fieldNormWeight:r=Bt.fieldNormWeight}={}){const s=new SF({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(Zbe)),s.setSources(t),s.create(),s}function R2t(e,{getFn:t=Bt.getFn,fieldNormWeight:n=Bt.fieldNormWeight}={}){const{keys:r,records:s}=e,a=new SF({getFn:t,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(s),a}function i_(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=Bt.distance,ignoreLocation:a=Bt.ignoreLocation}={}){const o=t/e.length;if(a)return o;const l=Math.abs(r-n);return s?o+l/s:l?1:o}function I2t(e=[],t=Bt.minMatchCharLength){let n=[],r=-1,s=-1,a=0;for(let o=e.length;a<o;a+=1){let l=e[a];l&&r===-1?r=a:!l&&r!==-1&&(s=a-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}const _d=32;function P2t(e,t,n,{location:r=Bt.location,distance:s=Bt.distance,threshold:a=Bt.threshold,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:l=Bt.minMatchCharLength,includeMatches:c=Bt.includeMatches,ignoreLocation:u=Bt.ignoreLocation}={}){if(t.length>_d)throw new Error(_2t(_d));const d=t.length,m=e.length,p=Math.max(0,Math.min(r,m));let h=a,g=p;const y=l>1||c,v=y?Array(m):[];let x;for(;(x=e.indexOf(t,g))>-1;){let E=i_(t,{currentLocation:x,expectedLocation:p,distance:s,ignoreLocation:u});if(h=Math.min(E,h),g=x+d,y){let M=0;for(;M<d;)v[x+M]=1,M+=1}}g=-1;let b=[],_=1,w=d+m;const C=1<<d-1;for(let E=0;E<d;E+=1){let M=0,k=w;for(;M<k;)i_(t,{errors:E,currentLocation:p+k,expectedLocation:p,distance:s,ignoreLocation:u})<=h?M=k:w=k,k=Math.floor((w-M)/2+M);w=k;let T=Math.max(1,p-k+1),j=o?m:Math.min(p+k,m)+d,R=Array(j+2);R[j+1]=(1<<E)-1;for(let P=j;P>=T;P-=1){let N=P-1,I=n[e.charAt(N)];if(y&&(v[N]=+!!I),R[P]=(R[P+1]<<1|1)&I,E&&(R[P]|=(b[P+1]|b[P])<<1|1|b[P+1]),R[P]&C&&(_=i_(t,{errors:E,currentLocation:N,expectedLocation:p,distance:s,ignoreLocation:u}),_<=h)){if(h=_,g=N,g<=p)break;T=Math.max(1,2*p-g)}}if(i_(t,{errors:E+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:u})>h)break;b=R}const S={isMatch:g>=0,score:Math.max(.001,_)};if(y){const E=I2t(v,l);E.length?c&&(S.indices=E):S.isMatch=!1}return S}function O2t(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class e_e{constructor(t,{location:n=Bt.location,threshold:r=Bt.threshold,distance:s=Bt.distance,includeMatches:a=Bt.includeMatches,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:l=Bt.minMatchCharLength,isCaseSensitive:c=Bt.isCaseSensitive,ignoreLocation:u=Bt.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(p,h)=>{this.chunks.push({pattern:p,alphabet:O2t(p),startIndex:h})},m=this.pattern.length;if(m>_d){let p=0;const h=m%_d,g=m-h;for(;p<g;)d(this.pattern.substr(p,_d),p),p+=_d;if(h){const y=m-_d;d(this.pattern.substr(y),y)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,t.length-1]]),g}const{location:s,distance:a,threshold:o,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let d=[],m=0,p=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:v})=>{const{isMatch:x,score:b,indices:_}=P2t(t,g,y,{location:s+v,distance:a,threshold:o,findAllMatches:l,minMatchCharLength:c,includeMatches:r,ignoreLocation:u});x&&(p=!0),m+=b,x&&_&&(d=[...d,..._])});let h={isMatch:p,score:p?m/this.chunks.length:1};return p&&r&&(h.indices=d),h}}class Vu{constructor(t){this.pattern=t}static isMultiMatch(t){return JX(t,this.multiRegex)}static isSingleMatch(t){return JX(t,this.singleRegex)}search(){}}function JX(e,t){const n=e.match(t);return n?n[1]:null}class L2t extends Vu{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class D2t extends Vu{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class F2t extends Vu{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class U2t extends Vu{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class B2t extends Vu{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class V2t extends Vu{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class t_e extends Vu{constructor(t,{location:n=Bt.location,threshold:r=Bt.threshold,distance:s=Bt.distance,includeMatches:a=Bt.includeMatches,findAllMatches:o=Bt.findAllMatches,minMatchCharLength:l=Bt.minMatchCharLength,isCaseSensitive:c=Bt.isCaseSensitive,ignoreLocation:u=Bt.ignoreLocation}={}){super(t),this._bitapSearch=new e_e(t,{location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class n_e extends Vu{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],a=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+a,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const b9=[L2t,n_e,F2t,U2t,V2t,B2t,D2t,t_e],eZ=b9.length,W2t=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,$2t="|";function H2t(e,t={}){return e.split($2t).map(n=>{let r=n.trim().split(W2t).filter(a=>a&&!!a.trim()),s=[];for(let a=0,o=r.length;a<o;a+=1){const l=r[a];let c=!1,u=-1;for(;!c&&++u<eZ;){const d=b9[u];let m=d.isMultiMatch(l);m&&(s.push(new d(m,t)),c=!0)}if(!c)for(u=-1;++u<eZ;){const d=b9[u];let m=d.isSingleMatch(l);if(m){s.push(new d(m,t));break}}}return s})}const z2t=new Set([t_e.type,n_e.type]);class G2t{constructor(t,{isCaseSensitive:n=Bt.isCaseSensitive,includeMatches:r=Bt.includeMatches,minMatchCharLength:s=Bt.minMatchCharLength,ignoreLocation:a=Bt.ignoreLocation,findAllMatches:o=Bt.findAllMatches,location:l=Bt.location,threshold:c=Bt.threshold,distance:u=Bt.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:a,location:l,threshold:c,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=H2t(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let a=0,o=[],l=0;for(let c=0,u=n.length;c<u;c+=1){const d=n[c];o.length=0,a=0;for(let m=0,p=d.length;m<p;m+=1){const h=d[m],{isMatch:g,indices:y,score:v}=h.search(t);if(g){if(a+=1,l+=v,r){const x=h.constructor.type;z2t.has(x)?o=[...o,...y]:o.push(y)}}else{l=0,a=0,o.length=0;break}}if(a){let m={isMatch:!0,score:l/a};return r&&(m.indices=o),m}}return{isMatch:!1,score:1}}}const _9=[];function q2t(...e){_9.push(...e)}function w9(e,t){for(let n=0,r=_9.length;n<r;n+=1){let s=_9[n];if(s.condition(e,t))return new s(e,t)}return new e_e(e,t)}const hC={AND:"$and",OR:"$or"},C9={PATH:"$path",PATTERN:"$val"},S9=e=>!!(e[hC.AND]||e[hC.OR]),K2t=e=>!!e[C9.PATH],Y2t=e=>!_c(e)&&Qbe(e)&&!S9(e),tZ=e=>({[hC.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function r_e(e,t,{auto:n=!0}={}){const r=s=>{let a=Object.keys(s);const o=K2t(s);if(!o&&a.length>1&&!S9(s))return r(tZ(s));if(Y2t(s)){const c=o?s[C9.PATH]:a[0],u=o?s[C9.PATTERN]:s[c];if(!Qi(u))throw new Error(b2t(c));const d={keyId:x9(c),pattern:u};return n&&(d.searcher=w9(u,t)),d}let l={children:[],operator:a[0]};return a.forEach(c=>{const u=s[c];_c(u)&&u.forEach(d=>{l.children.push(r(d))})}),l};return S9(e)||(e=tZ(e)),r(e)}function Q2t(e,{ignoreFieldNorm:t=Bt.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:a,score:o})=>{const l=s?s.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:a))}),n.score=r})}function X2t(e,t){const n=e.matches;t.matches=[],qa(n)&&n.forEach(r=>{if(!qa(r.indices)||!r.indices.length)return;const{indices:s,value:a}=r;let o={indices:s,value:a};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Z2t(e,t){t.score=e.score}function J2t(e,t,{includeMatches:n=Bt.includeMatches,includeScore:r=Bt.includeScore}={}){const s=[];return n&&s.push(X2t),r&&s.push(Z2t),e.map(a=>{const{idx:o}=a,l={item:t[o],refIndex:o};return s.length&&s.forEach(c=>{c(a,l)}),l})}class mg{constructor(t,n={},r){this.options={...Bt,...n},this.options.useExtendedSearch,this._keyStore=new S2t(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof SF))throw new Error(x2t);this._myIndex=n||Jbe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){qa(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const a=this._docs[r];t(a,r)&&(this.removeAt(r),r-=1,s-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:a,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Qi(t)?Qi(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Q2t(c,{ignoreFieldNorm:l}),a&&c.sort(o),Ybe(n)&&n>-1&&(c=c.slice(0,n)),J2t(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=w9(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:a,i:o,n:l})=>{if(!qa(a))return;const{isMatch:c,score:u,indices:d}=n.searchIn(a);c&&s.push({item:a,idx:o,matches:[{score:u,value:a,norm:l,indices:d}]})}),s}_searchLogical(t){const n=r_e(t,this.options),r=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:p}=l,h=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:p});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const d=[];for(let m=0,p=l.children.length;m<p;m+=1){const h=l.children[m],g=r(h,c,u);if(g.length)d.push(...g);else if(l.operator===hC.AND)return[]}return d},s=this._myIndex.records,a={},o=[];return s.forEach(({$:l,i:c})=>{if(qa(l)){let u=r(n,l,c);u.length&&(a[c]||(a[c]={idx:c,item:l,matches:[]},o.push(a[c])),u.forEach(({matches:d})=>{a[c].matches.push(...d)}))}}),o}_searchObjectList(t){const n=w9(t,this.options),{keys:r,records:s}=this._myIndex,a=[];return s.forEach(({$:o,i:l})=>{if(!qa(o))return;let c=[];r.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:o[d],searcher:n}))}),c.length&&a.push({idx:l,item:o,matches:c})}),a}_findMatches({key:t,value:n,searcher:r}){if(!qa(n))return[];let s=[];if(_c(n))n.forEach(({v:a,i:o,n:l})=>{if(!qa(a))return;const{isMatch:c,score:u,indices:d}=r.searchIn(a);c&&s.push({score:u,key:t,value:a,idx:o,norm:l,indices:d})});else{const{v:a,n:o}=n,{isMatch:l,score:c,indices:u}=r.searchIn(a);l&&s.push({score:c,key:t,value:a,norm:o,indices:u})}return s}}mg.version="7.0.0";mg.createIndex=Jbe;mg.parseIndex=R2t;mg.config=Bt;mg.parseQuery=r_e;q2t(G2t);const E9=[{currencyCode:"AED",type:"fiat",currency:K({defaultMessage:"United Arab Emirates dirham",id:"u/noLkGMVn"}),countryCode:"AE",symbol:"."},{currencyCode:"AFN",type:"fiat",currency:K({defaultMessage:"Afghan afghani",id:"HbCn83pcga"}),countryCode:"AF",symbol:""},{currencyCode:"ALL",type:"fiat",currency:K({defaultMessage:"Albanian lek",id:"/il1Hf7GWO"}),countryCode:"AL",symbol:"L"},{currencyCode:"AMD",type:"fiat",currency:K({defaultMessage:"Armenian dram",id:"Sab4a7TKLH"}),countryCode:"AM",symbol:""},{currencyCode:"ARS",type:"fiat",currency:K({defaultMessage:"Argentine peso",id:"52+/SFD8VZ"}),countryCode:"AR",symbol:"$"},{currencyCode:"AUD",type:"fiat",currency:K({defaultMessage:"Australian dollar",id:"iWILeLEVYR"}),countryCode:"AU",symbol:"$"},{currencyCode:"AWG",type:"fiat",currency:K({defaultMessage:"Aruban florin",id:"BEGfukujzF"}),countryCode:"AW",symbol:""},{currencyCode:"BAM",type:"fiat",currency:K({defaultMessage:"Bosnia and Herzegovina convertible mark",id:"b09sYvQVre"}),countryCode:"BA",symbol:"KM"},{currencyCode:"BBD",type:"fiat",currency:K({defaultMessage:"Barbadian dollar",id:"VlWuwU66Ue"}),countryCode:"BB",symbol:"$"},{currencyCode:"BDT",type:"fiat",currency:K({defaultMessage:"Bangladeshi taka",id:"nzdEshqHWS"}),countryCode:"BD",symbol:""},{currencyCode:"BGN",type:"fiat",currency:K({defaultMessage:"Bulgarian lev",id:"IDTjXBqV4N"}),countryCode:"BG",symbol:""},{currencyCode:"BHD",type:"fiat",currency:K({defaultMessage:"Bahraini dinar",id:"eq8qHJx0kM"}),countryCode:"BH",symbol:".."},{currencyCode:"BIF",type:"fiat",currency:K({defaultMessage:"Burundian franc",id:"o/KpEtmYi4"}),countryCode:"BI",symbol:"FBu"},{currencyCode:"BMD",type:"fiat",currency:K({defaultMessage:"Bermudian dollar",id:"kO0KeiZ+IN"}),countryCode:"BM",symbol:"$"},{currencyCode:"BND",type:"fiat",currency:K({defaultMessage:"Brunei dollar",id:"GRkirfzc48"}),countryCode:"BN",symbol:"$"},{currencyCode:"BOB",type:"fiat",currency:K({defaultMessage:"Bolivian boliviano",id:"l7UUEAhjL1"}),countryCode:"BO",symbol:"Bs."},{currencyCode:"BRL",type:"fiat",currency:K({defaultMessage:"Brazilian real",id:"x+BZGn5rek"}),countryCode:"BR",symbol:"R$"},{currencyCode:"BSD",type:"fiat",currency:K({defaultMessage:"Bahamian dollar",id:"u9nfam/El1"}),countryCode:"BS",symbol:"$"},{currencyCode:"BTN",type:"fiat",currency:K({defaultMessage:"Bhutanese ngultrum",id:"EbzIZvY2C3"}),countryCode:"BT",symbol:"Nu."},{currencyCode:"BWP",type:"fiat",currency:K({defaultMessage:"Botswana pula",id:"TvRjxCQudG"}),countryCode:"BW",symbol:"P"},{currencyCode:"BZD",type:"fiat",currency:K({defaultMessage:"Belize dollar",id:"tnMfFVDwiX"}),countryCode:"BZ",symbol:"$"},{currencyCode:"CAD",type:"fiat",currency:K({defaultMessage:"Canadian dollar",id:"L4ftYFzYiG"}),countryCode:"CA",symbol:"$"},{currencyCode:"CDF",type:"fiat",currency:K({defaultMessage:"Congolese franc",id:"6DNXExdai2"}),countryCode:"CD",symbol:"FC"},{currencyCode:"CHF",type:"fiat",currency:K({defaultMessage:"Swiss franc",id:"113zTX3mKi"}),countryCode:"CH",symbol:"Fr."},{currencyCode:"CLP",type:"fiat",currency:K({defaultMessage:"Chilean peso",id:"tLhKy6Swhn"}),countryCode:"CL",symbol:"$"},{currencyCode:"CNH",type:"fiat",currency:K({defaultMessage:"Chinese yuan (offshore)",id:"wAShedQ5+o"}),countryCode:"CN",symbol:""},{currencyCode:"CNY",type:"fiat",currency:K({defaultMessage:"Chinese yuan",id:"/sleu+8FUs"}),countryCode:"CN",symbol:""},{currencyCode:"COP",type:"fiat",currency:K({defaultMessage:"Colombian peso",id:"KR2NhLe6wO"}),countryCode:"CO",symbol:"$"},{currencyCode:"CRC",type:"fiat",currency:K({defaultMessage:"Costa Rican coln",id:"OLgF3rrfev"}),countryCode:"CR",symbol:""},{currencyCode:"CUP",type:"fiat",currency:K({defaultMessage:"Cuban peso",id:"ua/JslQGFc"}),countryCode:"CU",symbol:"$"},{currencyCode:"CVE",type:"fiat",currency:K({defaultMessage:"Cape Verdean escudo",id:"gg39Xd9NoM"}),countryCode:"CV",symbol:"$"},{currencyCode:"CYP",type:"fiat",currency:K({defaultMessage:"Cypriot pound",id:"xJn7heFKbn"}),countryCode:"CY",symbol:""},{currencyCode:"CZK",type:"fiat",currency:K({defaultMessage:"Czech koruna",id:"xpMdKvcamT"}),countryCode:"CZ",symbol:"K"},{currencyCode:"DJF",type:"fiat",currency:K({defaultMessage:"Djiboutian franc",id:"WtP9AoFz2A"}),countryCode:"DJ",symbol:"Fdj"},{currencyCode:"DKK",type:"fiat",currency:K({defaultMessage:"Danish krone",id:"Xy5G3y8jOw"}),countryCode:"DK",symbol:"kr"},{currencyCode:"DOP",type:"fiat",currency:K({defaultMessage:"Dominican peso",id:"2i/KFaPpw5"}),countryCode:"DO",symbol:"RD$"},{currencyCode:"DZD",type:"fiat",currency:K({defaultMessage:"Algerian dinar",id:"6sTpFM3olk"}),countryCode:"DZ",symbol:""},{currencyCode:"EGP",type:"fiat",currency:K({defaultMessage:"Egyptian pound",id:"PxOcvtceh8"}),countryCode:"EG",symbol:""},{currencyCode:"ETB",type:"fiat",currency:K({defaultMessage:"Ethiopian birr",id:"6VjP5tvzWg"}),countryCode:"ET",symbol:"Br"},{currencyCode:"EUR",type:"fiat",currency:K({defaultMessage:"Euro",id:"Zz6d8XMgGD"}),countryCode:"EU",symbol:""},{currencyCode:"FJD",type:"fiat",currency:K({defaultMessage:"Fijian dollar",id:"w33lAGgTZS"}),countryCode:"FJ",symbol:"$"},{currencyCode:"GBP",type:"fiat",currency:K({defaultMessage:"Pound sterling",id:"uU25lEI6GM"}),countryCode:"GB",symbol:""},{currencyCode:"GEL",type:"fiat",currency:K({defaultMessage:"Georgian lari",id:"m4gS106RpO"}),countryCode:"GE",symbol:""},{currencyCode:"GHS",type:"fiat",currency:K({defaultMessage:"Ghanaian cedi",id:"2k7sXvkoLP"}),countryCode:"GH",symbol:""},{currencyCode:"GMD",type:"fiat",currency:K({defaultMessage:"Gambian dalasi",id:"zT8nD3rOKp"}),countryCode:"GM",symbol:"D"},{currencyCode:"GNF",type:"fiat",currency:K({defaultMessage:"Guinean franc",id:"kZk7wkuU9a"}),countryCode:"GN",symbol:"FG"},{currencyCode:"GTQ",type:"fiat",currency:K({defaultMessage:"Guatemalan quetzal",id:"0eSFsz1h5U"}),countryCode:"GT",symbol:"Q"},{currencyCode:"GYD",type:"fiat",currency:K({defaultMessage:"Guyanese dollar",id:"pvTNSDiMVb"}),countryCode:"GY",symbol:"$"},{currencyCode:"HKD",type:"fiat",currency:K({defaultMessage:"Hong Kong dollar",id:"tSeK2eAo7a"}),countryCode:"HK",symbol:"$"},{currencyCode:"HNL",type:"fiat",currency:K({defaultMessage:"Honduran lempira",id:"u1All4YZ/M"}),countryCode:"HN",symbol:"L"},{currencyCode:"HRK",type:"fiat",currency:K({defaultMessage:"Croatian kuna",id:"m4/bILMdtE"}),countryCode:"HR",symbol:"kn"},{currencyCode:"HTG",type:"fiat",currency:K({defaultMessage:"Haitian gourde",id:"fYPjhPHJw5"}),countryCode:"HT",symbol:"G"},{currencyCode:"HUF",type:"fiat",currency:K({defaultMessage:"Hungarian forint",id:"Bhl6SxOjG0"}),countryCode:"HU",symbol:"Ft"},{currencyCode:"IDR",type:"fiat",currency:K({defaultMessage:"Indonesian rupiah",id:"JnQBDoCEpL"}),countryCode:"ID",symbol:"Rp"},{currencyCode:"ILS",type:"fiat",currency:K({defaultMessage:"Israeli new shekel",id:"IxD6vfIMsj"}),countryCode:"IL",symbol:""},{currencyCode:"INR",type:"fiat",currency:K({defaultMessage:"Indian rupee",id:"XnsufP9pQC"}),countryCode:"IN",symbol:""},{currencyCode:"IQD",type:"fiat",currency:K({defaultMessage:"Iraqi dinar",id:"rmzi7U/4iu"}),countryCode:"IQ",symbol:"."},{currencyCode:"ISK",type:"fiat",currency:K({defaultMessage:"Icelandic krna",id:"+QCFy0sZgh"}),countryCode:"IS",symbol:"kr"},{currencyCode:"JMD",type:"fiat",currency:K({defaultMessage:"Jamaican dollar",id:"EkOwDtWSVs"}),countryCode:"JM",symbol:"J$"},{currencyCode:"JOD",type:"fiat",currency:K({defaultMessage:"Jordanian dinar",id:"B2GvyCUDsS"}),countryCode:"JO",symbol:"."},{currencyCode:"JPY",type:"fiat",currency:K({defaultMessage:"Japanese yen",id:"2PiQsV1fPp"}),countryCode:"JP",symbol:""},{currencyCode:"KES",type:"fiat",currency:K({defaultMessage:"Kenyan shilling",id:"JIjYrchwhv"}),countryCode:"KE",symbol:"KSh"},{currencyCode:"KHR",type:"fiat",currency:K({defaultMessage:"Cambodian riel",id:"KCKOEaCtcY"}),countryCode:"KH",symbol:""},{currencyCode:"KMF",type:"fiat",currency:K({defaultMessage:"Comorian franc",id:"WV9ZQdQeR+"}),countryCode:"KM",symbol:"CF"},{currencyCode:"KRW",type:"fiat",currency:K({defaultMessage:"South Korean won",id:"EiHQBnRax2"}),countryCode:"KR",symbol:""},{currencyCode:"KWD",type:"fiat",currency:K({defaultMessage:"Kuwaiti dinar",id:"fkOQdpZmRV"}),countryCode:"KW",symbol:"."},{currencyCode:"KYD",type:"fiat",currency:K({defaultMessage:"Cayman Islands dollar",id:"RsdrXusNMV"}),countryCode:"KY",symbol:"$"},{currencyCode:"KZT",type:"fiat",currency:K({defaultMessage:"Kazakhstani tenge",id:"2qtVTeGWCE"}),countryCode:"KZ",symbol:""},{currencyCode:"LAK",type:"fiat",currency:K({defaultMessage:"Lao kip",id:"Fgzd1G5Yfn"}),countryCode:"LA",symbol:""},{currencyCode:"LBP",type:"fiat",currency:K({defaultMessage:"Lebanese pound",id:"FGzeEqNQzF"}),countryCode:"LB",symbol:"."},{currencyCode:"LKR",type:"fiat",currency:K({defaultMessage:"Sri Lankan rupee",id:"a4/joWlRVu"}),countryCode:"LK",symbol:"Rs"},{currencyCode:"LRD",type:"fiat",currency:K({defaultMessage:"Liberian dollar",id:"FI1z5I01J6"}),countryCode:"LR",symbol:"$"},{currencyCode:"LSL",type:"fiat",currency:K({defaultMessage:"Lesotho loti",id:"csvFpR0QuR"}),countryCode:"LS",symbol:"L"},{currencyCode:"LTL",type:"fiat",currency:K({defaultMessage:"Lithuanian litas",id:"0eziwi9562"}),countryCode:"LT",symbol:"Lt"},{currencyCode:"LYD",type:"fiat",currency:K({defaultMessage:"Libyan dinar",id:"MHH+Pd33wK"}),countryCode:"LY",symbol:"."},{currencyCode:"MAD",type:"fiat",currency:K({defaultMessage:"Moroccan dirham",id:"ECYUhp5Zzw"}),countryCode:"MA",symbol:".."},{currencyCode:"MDL",type:"fiat",currency:K({defaultMessage:"Moldovan leu",id:"b0q4AtgUSW"}),countryCode:"MD",symbol:"L"},{currencyCode:"MGA",type:"fiat",currency:K({defaultMessage:"Malagasy ariary",id:"7X6Af0dVLl"}),countryCode:"MG",symbol:"Ar"},{currencyCode:"MKD",type:"fiat",currency:K({defaultMessage:"Macedonian denar",id:"RCCw/rBMD7"}),countryCode:"MK",symbol:""},{currencyCode:"MMK",type:"fiat",currency:K({defaultMessage:"Burmese kyat",id:"09O/caoUOd"}),countryCode:"MM",symbol:"K"},{currencyCode:"MOP",type:"fiat",currency:K({defaultMessage:"Macanese pataca",id:"WSCDGHnfAP"}),countryCode:"MO",symbol:"P"},{currencyCode:"MUR",type:"fiat",currency:K({defaultMessage:"Mauritian rupee",id:"B7EPhc2k1/"}),countryCode:"MU",symbol:""},{currencyCode:"MVR",type:"fiat",currency:K({defaultMessage:"Maldivian rufiyaa",id:"WKep/6FHLO"}),countryCode:"MV",symbol:"Rf"},{currencyCode:"MWK",type:"fiat",currency:K({defaultMessage:"Malawian kwacha",id:"0QSRp0Tfcl"}),countryCode:"MW",symbol:"MK"},{currencyCode:"MXN",type:"fiat",currency:K({defaultMessage:"Mexican peso",id:"cAJvdQ+v2Y"}),countryCode:"MX",symbol:"$"},{currencyCode:"MXV",type:"fiat",currency:K({defaultMessage:"Mexican Unidad de Inversion (UDI)",id:"pJjurDaC1J"}),countryCode:"MX",symbol:"UDI"},{currencyCode:"MYR",type:"fiat",currency:K({defaultMessage:"Malaysian ringgit",id:"BJOmmIMKBn"}),countryCode:"MY",symbol:"RM"},{currencyCode:"MZN",type:"fiat",currency:K({defaultMessage:"Mozambican metical",id:"KVoUcWYwrs"}),countryCode:"MZ",symbol:"MT"},{currencyCode:"NAD",type:"fiat",currency:K({defaultMessage:"Namibian dollar",id:"ofXViiQOEO"}),countryCode:"NA",symbol:"$"},{currencyCode:"NGN",type:"fiat",currency:K({defaultMessage:"Nigerian naira",id:"YtrB6By6fQ"}),countryCode:"NG",symbol:""},{currencyCode:"NIO",type:"fiat",currency:K({defaultMessage:"Nicaraguan crdoba",id:"NJJMgSKcDP"}),countryCode:"NI",symbol:"C$"},{currencyCode:"NOK",type:"fiat",currency:K({defaultMessage:"Norwegian krone",id:"X7p/vNj1w0"}),countryCode:"NO",symbol:"kr"},{currencyCode:"NPR",type:"fiat",currency:K({defaultMessage:"Nepalese rupee",id:"KpP5Ur9yKv"}),countryCode:"NP",symbol:""},{currencyCode:"NZD",type:"fiat",currency:K({defaultMessage:"New Zealand dollar",id:"uoVYggIiS7"}),countryCode:"NZ",symbol:"$"},{currencyCode:"OMR",type:"fiat",currency:K({defaultMessage:"Omani rial",id:"YuZlkmlwz6"}),countryCode:"OM",symbol:".."},{currencyCode:"PAB",type:"fiat",currency:K({defaultMessage:"Panamanian balboa",id:"WsXJoQA7BU"}),countryCode:"PA",symbol:"B/."},{currencyCode:"PEN",type:"fiat",currency:K({defaultMessage:"Peruvian sol",id:"Gzey/zBCdq"}),countryCode:"PE",symbol:"S/."},{currencyCode:"PGK",type:"fiat",currency:K({defaultMessage:"Papua New Guinean kina",id:"1odcdptMV2"}),countryCode:"PG",symbol:"K"},{currencyCode:"PHP",type:"fiat",currency:K({defaultMessage:"Philippine peso",id:"Ze94/Fib/J"}),countryCode:"PH",symbol:""},{currencyCode:"PKR",type:"fiat",currency:K({defaultMessage:"Pakistani rupee",id:"xg2ovH8pDh"}),countryCode:"PK",symbol:""},{currencyCode:"PLN",type:"fiat",currency:K({defaultMessage:"Polish zoty",id:"5nGZooUDXi"}),countryCode:"PL",symbol:"z"},{currencyCode:"PYG",type:"fiat",currency:K({defaultMessage:"Paraguayan guaran",id:"faGTF61Eyw"}),countryCode:"PY",symbol:""},{currencyCode:"QAR",type:"fiat",currency:K({defaultMessage:"Qatari riyal",id:"DuHEQnjrPb"}),countryCode:"QA",symbol:"."},{currencyCode:"RON",type:"fiat",currency:K({defaultMessage:"Romanian leu",id:"lXgl4aKBP3"}),countryCode:"RO",symbol:"lei"},{currencyCode:"RSD",type:"fiat",currency:K({defaultMessage:"Serbian dinar",id:"giqvsRUiA5"}),countryCode:"RS",symbol:"."},{currencyCode:"RUB",type:"fiat",currency:K({defaultMessage:"Russian ruble",id:"4U+m5Kd694"}),countryCode:"RU",symbol:""},{currencyCode:"RWF",type:"fiat",currency:K({defaultMessage:"Rwandan franc",id:"URbs3Tt0On"}),countryCode:"RW",symbol:"FRw"},{currencyCode:"SAR",type:"fiat",currency:K({defaultMessage:"Saudi riyal",id:"p6D2TLqko8"}),countryCode:"SA",symbol:"."},{currencyCode:"SCR",type:"fiat",currency:K({defaultMessage:"Seychellois rupee",id:"V7Ju6HZQJK"}),countryCode:"SC",symbol:""},{currencyCode:"SDG",type:"fiat",currency:K({defaultMessage:"Sudanese pound",id:"FsgRxw4tdm"}),countryCode:"SD",symbol:".."},{currencyCode:"SEK",type:"fiat",currency:K({defaultMessage:"Swedish krona",id:"WoyUwT/z0X"}),countryCode:"SE",symbol:"kr"},{currencyCode:"SGD",type:"fiat",currency:K({defaultMessage:"Singapore dollar",id:"SCjBmFU+PM"}),countryCode:"SG",symbol:"$"},{currencyCode:"SHP",type:"fiat",currency:K({defaultMessage:"Saint Helena pound",id:"XZdS6/MxwW"}),countryCode:"SH",symbol:""},{currencyCode:"SLL",type:"fiat",currency:K({defaultMessage:"Sierra Leonean leone",id:"DFZ4yqf1EG"}),countryCode:"SL",symbol:"Le"},{currencyCode:"SOS",type:"fiat",currency:K({defaultMessage:"Somali shilling",id:"e7cANdrF41"}),countryCode:"SO",symbol:"Sh.So."},{currencyCode:"SVC",type:"fiat",currency:K({defaultMessage:"Salvadoran coln",id:"A2mT13SXuX"}),countryCode:"SV",symbol:""},{currencyCode:"SZL",type:"fiat",currency:K({defaultMessage:"Swazi lilangeni",id:"+kNQR2VJjT"}),countryCode:"SZ",symbol:"E"},{currencyCode:"THB",type:"fiat",currency:K({defaultMessage:"Thai baht",id:"Yz36aOmXMd"}),countryCode:"TH",symbol:""},{currencyCode:"TJS",type:"fiat",currency:K({defaultMessage:"Tajikistani somoni",id:"G3q+8He+TZ"}),countryCode:"TJ",symbol:"M"},{currencyCode:"TMT",type:"fiat",currency:K({defaultMessage:"Turkmenistan manat",id:"iV0j+gxDPN"}),countryCode:"TM",symbol:"m"},{currencyCode:"TND",type:"fiat",currency:K({defaultMessage:"Tunisian dinar",id:"l6iU1LyMSk"}),countryCode:"TN",symbol:"."},{currencyCode:"TRY",type:"fiat",currency:K({defaultMessage:"Turkish lira",id:"hQ9m98Llgt"}),countryCode:"TR",symbol:""},{currencyCode:"TTD",type:"fiat",currency:K({defaultMessage:"Trinidad and Tobago dollar",id:"Op/jRg7//J"}),countryCode:"TT",symbol:"TT$"},{currencyCode:"TWD",type:"fiat",currency:K({defaultMessage:"New Taiwan dollar",id:"yAeWHzFY54"}),countryCode:"TW",symbol:"NT$"},{currencyCode:"TZS",type:"fiat",currency:K({defaultMessage:"Tanzanian shilling",id:"7YNH90CDt1"}),countryCode:"TZ",symbol:"TSh"},{currencyCode:"UAH",type:"fiat",currency:K({defaultMessage:"Ukrainian hryvnia",id:"HCy2dyACi0"}),countryCode:"UA",symbol:""},{currencyCode:"UGX",type:"fiat",currency:K({defaultMessage:"Ugandan shilling",id:"P5STuJcFRi"}),countryCode:"UG",symbol:"USh"},{currencyCode:"USD",type:"fiat",currency:K({defaultMessage:"United States dollar",id:"BPRJDRwXU1"}),countryCode:"US",symbol:"$"},{currencyCode:"UYU",type:"fiat",currency:K({defaultMessage:"Uruguayan peso",id:"HtXUCx6BL1"}),countryCode:"UY",symbol:"$U"},{currencyCode:"UZS",type:"fiat",currency:K({defaultMessage:"Uzbekistani som",id:"lv4m0Kbuw1"}),countryCode:"UZ",symbol:"so'm"},{currencyCode:"VND",type:"fiat",currency:K({defaultMessage:"Vietnamese ng",id:"We/RqEPpOp"}),countryCode:"VN",symbol:""},{currencyCode:"XAF",type:"fiat",currency:K({defaultMessage:"Central African CFA franc",id:"fZwFESvHCw"}),countryCode:"CF",symbol:"FCFA"},{currencyCode:"XAG",type:"commodity",currency:K({defaultMessage:"Silver (troy ounce)",id:"XVTnv5Liuj"}),countryCode:"ZZ",symbol:"XAG"},{currencyCode:"XAU",type:"commodity",currency:K({defaultMessage:"Gold (troy ounce)",id:"s3i6lUYb/y"}),countryCode:"ZZ",symbol:"XAU"},{currencyCode:"XCD",type:"fiat",currency:K({defaultMessage:"East Caribbean dollar",id:"pXF3HmkspQ"}),countryCode:"AG",symbol:"$"},{currencyCode:"XDR",type:"fiat",currency:K({defaultMessage:"Special drawing rights",id:"X4eXXVN7wq"}),countryCode:"ZZ",symbol:"SDR"},{currencyCode:"XOF",type:"fiat",currency:K({defaultMessage:"West African CFA franc",id:"cezzLNBm20"}),countryCode:"SN",symbol:"CFA"},{currencyCode:"XPF",type:"fiat",currency:K({defaultMessage:"CFP franc",id:"txe+aX9vvZ"}),countryCode:"PF",symbol:""},{currencyCode:"YER",type:"fiat",currency:K({defaultMessage:"Yemeni rial",id:"lRXRuW4arm"}),countryCode:"YE",symbol:""},{currencyCode:"ZAC",type:"fiat",currency:K({defaultMessage:"South African rand (financial)",id:"GsJykrhxvK"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZAR",type:"fiat",currency:K({defaultMessage:"South African rand",id:"MbU2//IGEL"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZMW",type:"fiat",currency:K({defaultMessage:"Zambian kwacha",id:"ZJnHTLBz2v"}),countryCode:"ZM",symbol:"ZK"},{currencyCode:"BTC",type:"crypto",currency:K({defaultMessage:"Bitcoin",id:"RkW5weBw8q"}),symbol:""},{currencyCode:"ETH",type:"crypto",currency:K({defaultMessage:"Ethereum",id:"ohE0sWxJfP"}),symbol:""},{currencyCode:"XRP",type:"crypto",currency:K({defaultMessage:"XRP",id:"rwHxdc9N83"}),symbol:"XRP"},{currencyCode:"BNB",type:"crypto",currency:K({defaultMessage:"BNB",id:"+x/JA+cbSg"}),symbol:"BNB"},{currencyCode:"USDT",type:"crypto",currency:K({defaultMessage:"Tether",id:"G17JtC1DRO"}),symbol:"USDT"},{currencyCode:"SOL",type:"crypto",currency:K({defaultMessage:"Solana",id:"RmbsLR1XI9"}),symbol:"SOL"},{currencyCode:"HYPE",type:"crypto",currency:K({defaultMessage:"HYPE",id:"sRJuK+IQu7"}),symbol:"HYPE"},{currencyCode:"STETH",type:"crypto",currency:K({defaultMessage:"stETH",id:"VNvqEhRv0o"}),symbol:"stETH"},{currencyCode:"WTRX",type:"crypto",currency:K({defaultMessage:"Wrapped TRX",id:"hi8IgS7Vvh"}),symbol:"WTRX"},{currencyCode:"DOGE",type:"crypto",currency:K({defaultMessage:"Dogecoin",id:"Q4KOhNgUFl"}),symbol:"DOGE"},{currencyCode:"ADA",type:"crypto",currency:K({defaultMessage:"Cardano",id:"Zk+zRo7Vav"}),symbol:"ADA"},{currencyCode:"TRX",type:"crypto",currency:K({defaultMessage:"TRON",id:"fLtNc/n43W"}),symbol:"TRX"},{currencyCode:"USDC",type:"crypto",currency:K({defaultMessage:"USD Coin",id:"tPc0IbLJq0"}),symbol:"USDC"},{currencyCode:"WBTC",type:"crypto",currency:K({defaultMessage:"Wrapped Bitcoin",id:"AO1Xrr+Cwk"}),symbol:"WBTC"},{currencyCode:"WSTETH",type:"crypto",currency:K({defaultMessage:"Wrapped stETH",id:"Fg7h7ipjGE"}),symbol:"wstETH"},{currencyCode:"EDLC",type:"crypto",currency:K({defaultMessage:"EDLC",id:"FplbXN+574"}),symbol:"EDLC"},{currencyCode:"LINK",type:"crypto",currency:K({defaultMessage:"Chainlink",id:"d/A799ZTa/"}),symbol:"LINK"},{currencyCode:"AIC",type:"crypto",currency:K({defaultMessage:"AIC",id:"RSOIsb9pEC"}),symbol:"AIC"},{currencyCode:"XLM",type:"crypto",currency:K({defaultMessage:"Stellar",id:"+uYwRW10Bd"}),symbol:"XLM"},{currencyCode:"WETH",type:"crypto",currency:K({defaultMessage:"Wrapped Ether",id:"s8UwDT+8t2"}),symbol:"WETH"},{currencyCode:"BCH",type:"crypto",currency:K({defaultMessage:"Bitcoin Cash",id:"hLt+wzROTK"}),symbol:"BCH"},{currencyCode:"UST",type:"crypto",currency:K({defaultMessage:"TerraUSD",id:"wot2OPkJDe"}),symbol:"UST"},{currencyCode:"AVAX",type:"crypto",currency:K({defaultMessage:"Avalanche",id:"C9K+TI7R4G"}),symbol:"AVAX"},{currencyCode:"SUI",type:"crypto",currency:K({defaultMessage:"Sui",id:"CvmoCbTblr"}),symbol:"SUI"},{currencyCode:"LTC",type:"crypto",currency:K({defaultMessage:"Litecoin",id:"oyKw8Dr6hh"}),symbol:"LTC"},{currencyCode:"TON",type:"crypto",currency:K({defaultMessage:"Toncoin",id:"V2AxdWxVB/"}),symbol:"TON"},{currencyCode:"HBAR",type:"crypto",currency:K({defaultMessage:"Hedera",id:"yLSpOa++/L"}),symbol:"HBAR"},{currencyCode:"WHBAR",type:"crypto",currency:K({defaultMessage:"Wrapped HBAR",id:"rfimaaddr1"}),symbol:"WHBAR"},{currencyCode:"UNI",type:"crypto",currency:K({defaultMessage:"Uniswap",id:"hincAkLfxR"}),symbol:"UNI"},{currencyCode:"BTCB",type:"crypto",currency:K({defaultMessage:"Bitcoin BEP2",id:"T7D16Bt6JS"}),symbol:"BTCB"},{currencyCode:"OKB",type:"crypto",currency:K({defaultMessage:"OKB",id:"6ZLe/X3P+I"}),symbol:"OKB"},{currencyCode:"SHIB",type:"crypto",currency:K({defaultMessage:"Shiba Inu",id:"dwuQAuovNP"}),symbol:"SHIB"},{currencyCode:"USDS",type:"crypto",currency:K({defaultMessage:"StableUSD",id:"DAzSEb0LeA"}),symbol:"USDS"},{currencyCode:"WBT",type:"crypto",currency:K({defaultMessage:"WhiteBIT Coin",id:"Lj9Zp416rG"}),symbol:"WBT"},{currencyCode:"BGB",type:"crypto",currency:K({defaultMessage:"Bitget Token",id:"OEQgkmdE1O"}),symbol:"BGB"},{currencyCode:"DAI",type:"crypto",currency:K({defaultMessage:"Dai",id:"7g+Z6oltsB"}),symbol:"DAI"},{currencyCode:"DOT",type:"crypto",currency:K({defaultMessage:"Polkadot",id:"iS7ue2zjn0"}),symbol:"DOT"},{currencyCode:"XMR",type:"crypto",currency:K({defaultMessage:"Monero",id:"RydJABkA4a"}),symbol:"XMR"},{currencyCode:"MNT",type:"crypto",currency:K({defaultMessage:"MNT",id:"90qNZszLR/"}),symbol:"MNT"},{currencyCode:"PEPE",type:"crypto",currency:K({defaultMessage:"Pepe",id:"x9wJbmzZhn"}),symbol:"PEPE"},{currencyCode:"AAVE",type:"crypto",currency:K({defaultMessage:"Aave",id:"kFjzNltaTL"}),symbol:"AAVE"},{currencyCode:"CRO",type:"crypto",currency:K({defaultMessage:"Cronos",id:"2cg8W1gIo3"}),symbol:"CRO"},{currencyCode:"ETC",type:"crypto",currency:K({defaultMessage:"Ethereum Classic",id:"Bv9Xkw6kNg"}),symbol:"ETC"},{currencyCode:"FD",type:"crypto",currency:K({defaultMessage:"FD",id:"+Q62UIi/LA"}),symbol:"FD"},{currencyCode:"TUSD",type:"crypto",currency:K({defaultMessage:"TrueUSD",id:"whDnhXYdIe"}),symbol:"TUSD"},{currencyCode:"NEAR",type:"crypto",currency:K({defaultMessage:"NEAR Protocol",id:"E9RsfkMwMk"}),symbol:"NEAR"},{currencyCode:"METAGAMES",type:"crypto",currency:K({defaultMessage:"MetaGames",id:"C0GGroVhnP"}),symbol:"METAGAMES"},{currencyCode:"TAO",type:"crypto",currency:K({defaultMessage:"Bittensor",id:"6+C0Ut5hKl"}),symbol:"TAO"},{currencyCode:"ICP",type:"crypto",currency:K({defaultMessage:"Internet Computer",id:"q9uyMXlX+M"}),symbol:"ICP"},{currencyCode:"GT",type:"crypto",currency:K({defaultMessage:"GateToken",id:"dSGfpIcmmI"}),symbol:"GT"},{currencyCode:"RETH",type:"crypto",currency:K({defaultMessage:"Rocket Pool ETH",id:"pg4o1kZ2d4"}),symbol:"rETH"},{currencyCode:"MRS",type:"crypto",currency:K({defaultMessage:"MRS",id:"CABw3watNU"}),symbol:"MRS"},{currencyCode:"APT",type:"crypto",currency:K({defaultMessage:"Aptos",id:"/U15UItsIY"}),symbol:"APT"},{currencyCode:"KAS",type:"crypto",currency:K({defaultMessage:"Kaspa",id:"1MwSSUoCwu"}),symbol:"KAS"},{currencyCode:"ALGO",type:"crypto",currency:K({defaultMessage:"Algorand",id:"TijDBb1K3w"}),symbol:"ALGO"},{currencyCode:"PENGU",type:"crypto",currency:K({defaultMessage:"PENGU",id:"esTSdYyjL9"}),symbol:"PENGU"},{currencyCode:"VET",type:"crypto",currency:K({defaultMessage:"VeChain",id:"o3b918Uwm9"}),symbol:"VET"},{currencyCode:"OTRUMP",type:"crypto",currency:K({defaultMessage:"OTRUMP",id:"dwjxu1ZNrs"}),symbol:"OTRUMP"},{currencyCode:"ARB",type:"crypto",currency:K({defaultMessage:"Arbitrum",id:"2qF6KBPwqc"}),symbol:"ARB"},{currencyCode:"LUNA1",type:"crypto",currency:K({defaultMessage:"Terra (LUNA1)",id:"g5JtKAkJm/"}),symbol:"LUNA1"},{currencyCode:"MKR",type:"crypto",currency:K({defaultMessage:"Maker",id:"iVoUggHR7n"}),symbol:"MKR"},{currencyCode:"QNT",type:"crypto",currency:K({defaultMessage:"Quant",id:"kZiBtRgPXK"}),symbol:"QNT"},{currencyCode:"BONK",type:"crypto",currency:K({defaultMessage:"BONK",id:"/WOyXrLUEt"}),symbol:"BONK"},{currencyCode:"ATOM",type:"crypto",currency:K({defaultMessage:"Cosmos",id:"VfvhDOBZSq"}),symbol:"ATOM"},{currencyCode:"FTN",type:"crypto",currency:K({defaultMessage:"FTN",id:"+BtHlnfKBJ"}),symbol:"FTN"},{currencyCode:"KCS",type:"crypto",currency:K({defaultMessage:"KuCoin Token",id:"J6x8n/y945"}),symbol:"KCS"},{currencyCode:"RNDR",type:"crypto",currency:K({defaultMessage:"Render",id:"fI33PYpQj/"}),symbol:"RNDR"},{currencyCode:"BNX",type:"crypto",currency:K({defaultMessage:"BNX",id:"/mzOvKP3DB"}),symbol:"BNX"},{currencyCode:"FIL",type:"crypto",currency:K({defaultMessage:"Filecoin",id:"O60m1dM5+I"}),symbol:"FIL"},{currencyCode:"WBNB",type:"crypto",currency:K({defaultMessage:"Wrapped BNB",id:"6oPoIEcEKM"}),symbol:"WBNB"},{currencyCode:"DUCK",type:"crypto",currency:K({defaultMessage:"DUCK",id:"Wy2n2zHjyn"}),symbol:"DUCK"},{currencyCode:"ONDO",type:"crypto",currency:K({defaultMessage:"Ondo",id:"Mdh4nCMVFp"}),symbol:"ONDO"},{currencyCode:"EZETH",type:"crypto",currency:K({defaultMessage:"EZETH",id:"GquMfdHRpr"}),symbol:"EZETH"},{currencyCode:"DHN",type:"crypto",currency:K({defaultMessage:"DHN",id:"3DBrwMVTuR"}),symbol:"DHN"},{currencyCode:"SPX",type:"crypto",currency:K({defaultMessage:"SPX",id:"78Gbn14660"}),symbol:"SPX"},{currencyCode:"XDC",type:"crypto",currency:K({defaultMessage:"XDC Network",id:"f4v54xCFpd"}),symbol:"XDC"},{currencyCode:"ENA",type:"crypto",currency:K({defaultMessage:"ENA",id:"G6NRdu/3/f"}),symbol:"ENA"},{currencyCode:"SOLVBTCBBN",type:"crypto",currency:K({defaultMessage:"SOLVBTCBBN",id:"U+VGyLBIbO"}),symbol:"SOLVBTCBBN"},{currencyCode:"LDO",type:"crypto",currency:K({defaultMessage:"Lido DAO",id:"Hm40klV7dx"}),symbol:"LDO"},{currencyCode:"INJ",type:"crypto",currency:K({defaultMessage:"Injective",id:"Zy5gqTZCK/"}),symbol:"INJ"},{currencyCode:"USD0",type:"crypto",currency:K({defaultMessage:"USD0",id:"I8k7Is+SUX"}),symbol:"USD0"},{currencyCode:"FLR",type:"crypto",currency:K({defaultMessage:"Flare",id:"EuWzA+LwQr"}),symbol:"FLR"},{currencyCode:"PY",type:"crypto",currency:K({defaultMessage:"PY",id:"2WmUk53rca"}),symbol:"PY"},{currencyCode:"SEI",type:"crypto",currency:K({defaultMessage:"Sei",id:"uIVFPKXueM"}),symbol:"SEI"},{currencyCode:"MSOL",type:"crypto",currency:K({defaultMessage:"Marinade Staked SOL",id:"Sgo9VGem0+"}),symbol:"mSOL"},{currencyCode:"CRV",type:"crypto",currency:K({defaultMessage:"Curve DAO Token",id:"hv2sTxuyJY"}),symbol:"CRV"},{currencyCode:"FTM",type:"crypto",currency:K({defaultMessage:"Fantom",id:"FdV4Gc/fz2"}),symbol:"FTM"},{currencyCode:"FLOKI",type:"crypto",currency:K({defaultMessage:"FLOKI",id:"d2sPiyXVq8"}),symbol:"FLOKI"},{currencyCode:"CMETH",type:"crypto",currency:K({defaultMessage:"CMETH",id:"ZXQlnD2obl"}),symbol:"CMETH"},{currencyCode:"SLISBNB",type:"crypto",currency:K({defaultMessage:"SLISBNB",id:"wqx7ZL4lbr"}),symbol:"SLISBNB"},{currencyCode:"FARTCOIN",type:"crypto",currency:K({defaultMessage:"FARTCOIN",id:"qFlNIb5L+O"}),symbol:"FARTCOIN"},{currencyCode:"EETH",type:"crypto",currency:K({defaultMessage:"eETH",id:"tCrC5owpVn"}),symbol:"eETH"},{currencyCode:"KAIA",type:"crypto",currency:K({defaultMessage:"KAIA",id:"fDXZE/gzgq"}),symbol:"KAIA"},{currencyCode:"GRT",type:"crypto",currency:K({defaultMessage:"The Graph",id:"oFrVNds2cX"}),symbol:"GRT"},{currencyCode:"IMX",type:"crypto",currency:K({defaultMessage:"Immutable",id:"+0mthqqK1s"}),symbol:"IMX"},{currencyCode:"WIF",type:"crypto",currency:K({defaultMessage:"WIF",id:"tK0cRtUi/S"}),symbol:"WIF"},{currencyCode:"RAY",type:"crypto",currency:K({defaultMessage:"Raydium",id:"pSdm2ZTXHD"}),symbol:"RAY"},{currencyCode:"OP",type:"crypto",currency:K({defaultMessage:"Optimism",id:"ghDrrz64nC"}),symbol:"OP"},{currencyCode:"XAUT",type:"crypto",currency:K({defaultMessage:"Tether Gold",id:"pobzwuxAfg"}),symbol:"XAUT"},{currencyCode:"PENDLE",type:"crypto",currency:K({defaultMessage:"Pendle",id:"z8diWExCd3"}),symbol:"PENDLE"}],om=(e,t="default")=>{if(!e)return"";const n=t==="indian"?"en-IN":"en-US",r=new Intl.NumberFormat(n,{useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:100}),s=e.endsWith("."),a=e.split("."),o=a[0]||"0",l=a[1]||"",c=parseFloat(e);if(isNaN(c))return"";let d=r.format(parseFloat(o));return a.length>1?d+="."+l:s&&(d+="."),d},s_e=A.memo(({value:e,onChange:t,placeholder:n="0",disabled:r=!1,className:s="",min:a,max:o,step:l=1,formatting:c="default"})=>{const u=f.useRef(null),[d,m]=f.useState(om(e,c)),p=f.useCallback(v=>v.replace(/,/g,""),[]),h=f.useCallback(v=>{const x=v.target.value,b=p(x),_=v.target.selectionStart||0;if(b===""||/^\d*\.?\d*$/.test(b)&&!/e/i.test(x)){const w=om(b,c);m(w),t(b),requestAnimationFrame(()=>{if(u.current){const C=x.substring(0,_),S=p(C);let E=0,M=0;const k=S.replace(".","").length,T=S.includes(".")&&S.endsWith(".");for(let j=0;j<w.length;j++){const R=w[j];if(R==="."){if(T&&E===k){M=j+1;break}}else if(R!==","&&(E++,!T&&E===k)){M=j+1;break}}u.current.setSelectionRange(M,M)}})}},[p,t,c]),g=f.useCallback(v=>{const x=u.current;if(!x||(v.metaKey||v.ctrlKey)&&(v.key==="z"||v.key==="Z"))return;const{selectionStart:b,selectionEnd:_,value:w}=x;if(v.key==="ArrowUp"||v.key==="ArrowDown"){v.preventDefault();const C=parseFloat(p(e))||0,S=v.key==="ArrowUp"?l:-l;let E=C+S;a!==void 0&&E<a&&(E=a),o!==void 0&&E>o&&(E=o);const M=E.toString(),k=om(M,c);m(k),t(M);return}if(v.key==="Backspace"&&b===_){if(b===null)return;if(w[b-1]===","){v.preventDefault();const S=w.substring(0,b-1),E=w.substring(b),M=S[S.length-1];if(M&&/\d/.test(M)){const k=S.slice(0,-1)+E,T=p(k),j=om(T,c);m(j),t(T),setTimeout(()=>{const R=j.length-p(E).length;x.setSelectionRange(R,R)},0)}}}},[p,t,e,l,a,o,c]),y=f.useCallback(v=>{v.preventDefault();const x=v.clipboardData.getData("text"),b=p(x);if(/^\d*\.?\d*$/.test(b)&&!/e/i.test(x)){const _=om(b,c);m(_),t(b)}},[p,t,c]);return A.useEffect(()=>{const v=om(e,c);m(v)},[e,c]),i.jsx("input",{ref:u,type:"text",value:d,onChange:h,onKeyDown:g,onPaste:y,placeholder:n,disabled:r,className:s,inputMode:"decimal"})});s_e.displayName="CurrencyInput";const a_e=A.memo(e=>{const{data:t}=e,{source_currency:n,target_currency:r,source_amount:s,converted_amount:a,exchange_rate:o}=t,{menuItems:l}=fg(),[c,u]=f.useState(s),[d,m]=f.useState(I(a)),[p,h]=f.useState(n),[g,y]=f.useState(r),[v,x]=f.useState(o),{colorScheme:b}=Pr(),_=b==="dark",{$t:w}=Q(),{data:C,isLoading:S,error:E}=$e({queryKey:plt(p,g,c),queryFn:()=>hlt({sourceCurrency:p,targetCurrency:g,amount:c}),enabled:!!p&&!!g&&c>0}),M=f.useRef(C?.source_currency),k=f.useRef(C?.target_currency),T=f.useRef(C?.exchange_rate),j=f.useRef(C?.source_img),R=f.useRef(C?.source_img_dark),O=f.useRef(C?.target_img),P=f.useRef(C?.target_img_dark);f.useEffect(()=>{C&&(C?.source_currency!==M.current||C?.target_currency!==k.current)&&(m(I(C.converted_amount)),M.current=C.source_currency,k.current=C.target_currency),C&&C.exchange_rate!==T.current&&(x(C.exchange_rate),T.current=C.exchange_rate),C&&C.source_img!==j.current&&(j.current=C.source_img),C&&C.source_img_dark!==R.current&&(R.current=C.source_img_dark),C&&C.target_img!==O.current&&(O.current=C.target_img),C&&C.target_img_dark!==P.current&&(P.current=C.target_img_dark)},[C]);function N(V){return E9.find($=>$.currencyCode===V)}function I(V){return V>1?parseFloat(V.toFixed(2)):parseFloat(V.toPrecision(2))}function D(V){return V==="INR"||V==="PKR"||V==="BDT"||V==="NPR"}const F=N(p),B=N(g);return i.jsx(Go,{widgetType:"finance",widgetName:"currency_exchange",widgetSize:"full",children:i.jsx("div",{className:"@container",children:i.jsxs(z,{variant:"subtler",className:"@[480px]:grid-cols-2 dark:!bg-subtle grid w-full grid-cols-1 gap-px overflow-hidden",children:[i.jsxs(z,{variant:"raised",className:"p-md pb-sm gap-md flex w-full flex-col",children:[i.jsx("div",{className:"flex-1",children:i.jsxs(L,{variant:"entry-title-200",className:"flex font-mono !text-2xl",children:[i.jsx("span",{className:"text-quieter",children:F?.symbol}),i.jsx(k9,{value:c.toString(),error:!!E,onChange:V=>{const $=parseFloat(V);u($),$>0?m(I($*v)):m(0)},formatting:D(F?.currencyCode)?"indian":"default"})]})}),i.jsxs("div",{className:"gap-md flex items-center",children:[i.jsx(M9,{onSelect:V=>h(V),currency:F?w(F.currency):p,icon:F&&F.type==="crypto"?i.jsx(z,{variant:"subtler",className:"size-full overflow-hidden rounded-full",children:(_?R.current:j.current)&&i.jsx("img",{src:_?R.current??"":j.current??"",alt:w(F.currency),className:"size-full object-contain"})}):F&&F.type==="commodity"?i.jsx(z,{className:U("size-full rounded-full",{"!bg-[gold]":F?.currencyCode==="XAU","!bg-[silver]":F?.currencyCode==="XAG"})}):i.jsx($p,{className:"size-full object-contain",countryCode:F?.countryCode})}),i.jsx("div",{className:"ml-auto grid grid-cols-1 grid-rows-1 items-center",children:i.jsxs(it,{children:[S&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:ao,className:"col-start-1 row-start-1 ml-auto",children:i.jsx(L,{color:"ultraLight",children:i.jsx(as,{size:12})})},"loading"),!S&&E&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:ao,className:"col-start-1 row-start-1 ml-auto",children:i.jsx(L,{color:"light",variant:"small",children:w({defaultMessage:"Not supported",id:"+FiyOTaUCW"})})},"error")]})})]})]}),i.jsxs(z,{variant:"raised",className:"p-md pb-sm gap-md flex w-full flex-col",children:[i.jsx("div",{className:"flex-1",children:i.jsxs(L,{variant:"entry-title-200",color:"default",className:"flex font-mono !text-2xl",children:[i.jsx("span",{className:"text-quieter",children:B?.symbol}),i.jsx(k9,{value:d.toString(),error:!!E,onChange:V=>{const $=parseFloat(V);m($),$>0?u(I($/v)):u(0)},formatting:D(B?.currencyCode)?"indian":"default"})]})}),i.jsxs("div",{className:"gap-md flex items-center",children:[i.jsx(M9,{onSelect:V=>y(V),currency:B?w(B.currency):g,icon:B&&B.type==="crypto"?i.jsx(z,{variant:"subtler",className:"size-full overflow-hidden rounded-full",children:(_?P.current:O.current)&&i.jsx("img",{src:_?P.current??"":O.current??"",alt:w(B.currency),className:"size-full object-contain"})}):B&&B.type==="commodity"?i.jsx(z,{className:U("size-full rounded-full",{"!bg-[gold]":B?.currencyCode==="XAU","!bg-[silver]":B?.currencyCode==="XAG"})}):i.jsx($p,{className:"size-full object-contain",countryCode:B?.countryCode})}),l&&l.length>0&&i.jsx("div",{className:"ml-auto",children:i.jsx(er.Menu,{menuItems:l})})]})]})]})})})});a_e.displayName="CurrencyConversion";const M9=A.memo(({currency:e,icon:t,onSelect:n})=>{const{$t:r}=Q(),{isMobileStyle:s}=ye(),[a,o]=f.useState(""),l=f.useMemo(()=>["CNY","EUR","GBP","JPY","USD","BTC","ETH"].map(y=>E9.find(v=>v.currencyCode===y)),[]),c=f.useMemo(()=>{const g=E9.map(y=>({...y,localizedCurrency:r(y.currency)}));return new mg(g,{keys:["localizedCurrency","currencyCode","countryCode"],threshold:.3})},[r]),u=f.useMemo(()=>c.search(a)??[],[c,a]),d=f.useMemo(()=>l.map(g=>({type:"default",text:g?.currencyCode?r(g.currency):"",onClick:()=>{g?.currencyCode&&(n(g.currencyCode),o(""))}})),[l,n,r]),m=f.useMemo(()=>u.map(g=>({type:"default",text:r(g.item?.currency)??"",onClick:()=>{g?.item?.currencyCode&&(n(g.item?.currencyCode),o(""))}})),[u,n,r]),p=f.useMemo(()=>[{type:"default",text:r({defaultMessage:"No results",id:"jHJmjfxD4s"}),disabled:!0}],[r]),h=f.useMemo(()=>i.jsx(ra,{autoFocus:!0,className:U({"!-mx-xs":s,"!px-xs py-sm mb-xs border-none !bg-transparent shadow-none outline-none focus:!ring-0":!s}),pill:!1,isMobileUserAgent:s,placeholder:r({defaultMessage:"Search currencies...",id:"fDMc8k+hJQ"}),value:a,onChange:g=>o(g),disable1pass:!0}),[s,a,r]);return i.jsx(Jt,{alwaysShowChildren:!0,placement:"bottom-start",showFooterOnMobile:!0,items:a.length>0?m.length>0?m:p:d,isMobileStyle:s,wrapperClassName:"flex",header:h,footer:s&&h,children:i.jsx(Te,{chevron:!0,noPadding:!0,extraCSS:"!px-sm -ml-sm",leadingComponent:i.jsx("div",{className:"mr-0.5 size-5",children:t}),variant:"primary",size:"small",text:e})})});M9.displayName="CurrencyPicker";const k9=A.memo(({value:e,onChange:t,error:n,formatting:r="default"})=>n?i.jsx("span",{className:"!text-quieter",children:"---"}):i.jsx(s_e,{className:U("bg-raised placeholder:text-quieter w-full overflow-hidden transition-colors duration-200 [appearance:textfield] focus:outline-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",{"!text-quieter":n}),value:e??"",disabled:n,placeholder:"0",onChange:t,min:0,formatting:r}));k9.displayName="ConversionInput";const Ny=(e,t,n)=>{const r=bDe({start:e,end:t}),s=r.days||0,a=r.hours||0,o=r.minutes||0;return s>0?a===0&&o===0?n({id:"sSynIO3ThU",defaultMessage:"{days}d"},{days:s}):o===0?n({id:"10cSZzeWte",defaultMessage:"{days}d {hours}h"},{days:s,hours:a}):n({id:"OWk1HjddEb",defaultMessage:"{days}d {hours}h {minutes}m"},{days:s,hours:a,minutes:o.toString().padStart(2,"0")}):a===0?n({id:"VvfhE21OJI",defaultMessage:"{minutes}m"},{minutes:o}):o===0?n({id:"unuVj1l7KW",defaultMessage:"{hours}h"},{hours:a}):n({id:"0Yp4jJ7rzm",defaultMessage:"{hours}h {minutes}m"},{hours:a,minutes:o.toString().padStart(2,"0")})},o_e=A.memo(({flightMetadata:e,departureTime:t,arrivalTime:n,actualDepartureTime:r,actualArrivalTime:s,estimatedDepartureTime:a,estimatedArrivalTime:o,delayed:l=!1,rightContent:c})=>{const{$t:u,locale:d}=Q(),m=f.useMemo(()=>new Date,[]),{cancelled:p,diverted:h,status:g,flightNumber:y,departureCity:v,departureAirport:x,arrivalAirport:b,arrivalCity:_}=e,w=f.useMemo(()=>t.toLocaleDateString(d,{month:"short",day:"numeric",year:"numeric"}),[t,d]),C=r||a||t,S=s||o||n,E=f.useMemo(()=>Ny(m,C,u),[m,C,u]),M=f.useMemo(()=>Ny(C,m,u),[m,C,u]),k=f.useMemo(()=>Ny(S,m,u),[m,S,u]),T=f.useMemo(()=>Ny(m,S,u),[m,S,u]),j=C<=m,R=S<=m,O=f.useMemo(()=>R?u({id:"mtuHNb+mRc",defaultMessage:"Arrived {time} ago"},{time:k}):j?u({id:"b6q320RasU",defaultMessage:"Departed {time} ago"},{time:M}):u({id:"/JLglYfuNX",defaultMessage:"Departing in {time}"},{time:E}),[j,R,E,M,k,u]),P=f.useMemo(()=>p?u({id:"3wsVWFbC1x",defaultMessage:"Cancelled"}):h?u({id:"/N1ZeWQc8B",defaultMessage:"Diverted"}):g,[p,h,u,g]);return i.jsxs("div",{className:"gap-sm flex flex-col justify-between sm:flex-row",children:[i.jsxs("div",{children:[i.jsx(L,{variant:"section-title",children:i.jsx(pe,{id:"5KgWVKDR/R",defaultMessage:"{flightNumber}  {departureCity} ({departureAirport}) to {arrivalCity} ({arrivalAirport})",values:{flightNumber:y,departureCity:v,departureAirport:x,arrivalAirport:b,arrivalCity:_}})}),i.jsx("div",{className:"gap-sm flex flex-row",children:i.jsxs(gc,{className:"gap-xs flex flex-row flex-wrap",children:[i.jsx(br,{id:"day",children:i.jsx(L,{variant:"smallBold",color:"light",children:w})}),!p&&i.jsx(br,{id:"relative-departure-time",children:i.jsx(L,{variant:"smallBold",color:"light",children:O})}),j&&!R&&!p&&i.jsx(br,{id:"relative-arrival-time",children:i.jsx(L,{variant:"smallBold",color:"light",children:i.jsx(pe,{id:"z8jWKRSOak",defaultMessage:"Arriving in {time}",values:{time:T}})})}),i.jsx(br,{id:"status",children:i.jsx(L,{variant:"smallBold",color:p||h||l?"negative":"super",children:P})})]})})]}),c]})});o_e.displayName="FlightHeader";const Rc=()=>{const{firstResult:{status:e,privacy_state:t}={}}=Ht(),n=Oo(),{isIncognitoLocal:r}=dn();return f.useMemo(()=>{if(!e)return!1;const s=!!t&&(r&&t!==Cp.INCOGNITO||!r&&t===Cp.INCOGNITO);return!n&&e!==cr.PENDING||s},[r,t,n,e])},l_={initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(2px)"},transition:{duration:.5,ease:_a}},EF=A.memo(({children:e,animationKey:t,...n})=>i.jsx(it,{mode:"popLayout",initial:!1,children:i.jsx(xe.div,{initial:l_.initial,animate:l_.animate,exit:l_.exit,transition:l_.transition,children:i.jsx(L,{...n,children:e})},t)}));EF.displayName="FlightTextSwitcher";const i_e=A.memo(({terminal:e,gate:t,alignEnd:n})=>{const{$t:r}=Q();return i.jsxs("div",{className:U("gap-lg flex w-full flex-row",n&&"justify-end"),children:[e&&i.jsx(T9,{label:r({id:"GAHVEi8lHA",defaultMessage:"Terminal"}),value:e}),t&&i.jsx(T9,{label:r({id:"W+gH70jajX",defaultMessage:"Gate"}),value:t})]})});i_e.displayName="FlightTerminalGate";const T9=A.memo(({label:e,value:t})=>i.jsxs("div",{children:[i.jsx(L,{variant:"tinyMono",color:"light",children:e}),i.jsx(EF,{animationKey:t,variant:"entry-title-200",children:t})]}));T9.displayName="FlightAttribute";const c_={initial:{opacity:0,height:0,filter:"blur(2px)"},animate:{opacity:1,height:"auto",filter:"blur(0px)"},exit:{opacity:0,height:0,filter:"blur(2px)"},transition:{duration:.3,ease:hn}},N9=A.memo(({airport:e,time:t,actualTime:n,estimatedTime:r,timezone:s,terminal:a,gate:o,variant:l="departure",delayed:c=!1,cancelled:u=!1})=>{const{locale:d,$t:m}=Q(),{submitQuery:p}=Oa(),h=Rc(),{firstResult:g}=Ht(),y=g?.frontend_context_uuid,v=f.useMemo(()=>m(l==="departure"?{id:"BtqAemWTLK",defaultMessage:"Departure"}:{id:"WOIPGxfmZn",defaultMessage:"Arrival"}),[l,m]),x=l==="arrival",b=f.useMemo(()=>{const S=n||r;return S&&S.getTime()===t.getTime()?null:S},[n,r,t]),_=f.useMemo(()=>t.toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",timeZone:s}),[t,s,d]),w=f.useMemo(()=>b?.toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",timeZone:s}),[b,s,d]),C=f.useCallback(()=>{const S=h,E=ja();p({fork:S,rawQuery:m({id:"xxqvnlQO57",defaultMessage:"Airport {airport}"},{airport:e}),collection:null,newFrontendContextUUID:S?E:null,existingFrontendContextUUID:S?void 0:y,promptSource:"user",querySource:"entity_link",shouldRedirectToBackendUUID:S})},[e,h,y,p,m]);return i.jsxs("div",{className:"gap-md col-span-3 flex flex-col justify-between",children:[i.jsxs("div",{className:U("gap-sm flex flex-col",x&&"items-end"),children:[i.jsxs(L,{variant:"tinyMono",color:"light",className:"gap-sm flex flex-row",children:[v,i.jsx("button",{className:"text-foreground hover:text-super cursor-pointer underline transition-colors duration-150 ease-in-out",onClick:C,children:e})]}),i.jsxs("div",{className:U("flex flex-col",x&&"items-end"),children:[i.jsx(EF,{animationKey:_,as:"span",variant:"entry-title-200",color:c?"negative":"super",className:U("-translate-y-px !font-mono transition-colors duration-500",u&&"text-quiet line-through"),children:b?w:_}),i.jsx(it,{initial:!1,children:b&&i.jsx(xe.div,{initial:c_.initial,animate:c_.animate,exit:c_.exit,transition:c_.transition,className:"overflow-hidden",children:i.jsx(L,{as:"span",variant:b?"small":"entry-title-200",color:"super",className:U("-translate-y-px !font-mono",b&&"!text-quiet line-through"),children:_})})})]})]}),i.jsx(i_e,{terminal:a,gate:o,alignEnd:x})]})});N9.displayName="FlightDepartureArrival";const eCt=xe(z),l_e=A.memo(({progress:e,departureTime:t,arrivalTime:n,delayed:r,cancelled:s})=>{const{$t:a}=Q(),o=f.useMemo(()=>Ny(t,n,a),[t,n,a]),l=f.useMemo(()=>e===void 0||s?0:Math.max(0,Math.min(100,e)),[e,s]),{left:c,width:u}=f.useMemo(()=>({left:`${l}%`,width:`${l}%`}),[l]),d=f.useMemo(()=>({left:0}),[]),m=f.useMemo(()=>({duration:2,ease:hn,delay:.5}),[]),p=f.useMemo(()=>({left:c,opacity:1,scale:1}),[c]),h=f.useMemo(()=>({...d,opacity:0,scale:1.2,top:"50%",translateX:"-50%",translateY:"-50%"}),[d]),g=f.useMemo(()=>({width:u}),[u]);return i.jsx("div",{className:"px-xs order-last col-span-6 flex flex-col items-center justify-center sm:order-[unset] sm:px-0",children:i.jsxs("div",{className:"gap-md flex w-full flex-col items-center",children:[i.jsx(L,{variant:"tinyMono",color:"light",children:o}),i.jsxs("div",{className:"relative flex w-full flex-1 items-center",children:[i.jsx("div",{className:"bg-inverse/10 relative h-0.5 w-full overflow-hidden rounded-full",children:i.jsx(xe.div,{className:U("!bg-inverse/50 absolute inset-y-0 left-0 transition-colors duration-500"),initial:d,animate:g,transition:m})}),i.jsx(eCt,{variant:"raised",className:"absolute left-0 flex aspect-square w-6 items-center justify-center",initial:h,animate:p,transition:m,children:i.jsx(me,{className:U("text-quiet transition-colors duration-500",e&&e>0&&!r&&"!text-super",r&&"!text-negative",s&&"!text-quiet"),icon:HC})})]})]})})});l_e.displayName="FlightProgress";const c_e=A.memo(({departureTime:e,arrivalTime:t,actualDepartureTime:n,actualArrivalTime:r,estimatedDepartureTime:s,estimatedArrivalTime:a,flightMetadata:o,delayed:l=!1})=>{const{cancelled:c,departureAirport:u,arrivalAirport:d,departureTimezone:m,arrivalTimezone:p,terminal:h,gate:g,arrivalTerminal:y,arrivalGate:v,progressPercent:x}=o;return i.jsxs(Pn,{className:"p-md gap-md grid w-full grid-cols-2 overflow-hidden shadow-sm sm:grid-cols-12",children:[i.jsx(N9,{variant:"departure",airport:u,time:e,actualTime:n,estimatedTime:s,timezone:m,terminal:h,gate:g,delayed:l,cancelled:c}),i.jsx(l_e,{departureTime:e,arrivalTime:t,progress:x,delayed:l,cancelled:c}),i.jsx(N9,{variant:"arrival",airport:d,time:t,actualTime:r,estimatedTime:a,timezone:p,terminal:y,gate:v,delayed:l,cancelled:c})]})});c_e.displayName="FlightStatusCard";const u_e=A.memo(({flights:e,selectedFlight:t,setSelectedFlight:n})=>{const{locale:r,$t:s}=Q(),{isMobileStyle:a}=ye(),o=f.useCallback(u=>{const d=new Date(u.departureTime),m=y8(d,u.departureTimezone);let p;if(D7(m)?p=s({id:"zWgbGgjUUg",defaultMessage:"Today"}):CDe(m)?p=s({id:"6dIxDP1C8c",defaultMessage:"Yesterday"}):wDe(m)?p=s({id:"MtrTNyxuSU",defaultMessage:"Tomorrow"}):p=d.toLocaleDateString(r,{weekday:"short",month:"short",day:"numeric"}),e.filter(g=>{if(g.departureTimezone!==u.departureTimezone)return!1;const y=y8(new Date(g.departureTime),g.departureTimezone);return yu(y).getTime()===yu(m).getTime()}).length>1){const g=d.toLocaleTimeString(r,{hour:"numeric",minute:"2-digit"});p=s({id:"Fr3TxQz4BU",defaultMessage:"{dateString} - {timeString}"},{dateString:p,timeString:g})}return p},[r,e,s]),l=f.useMemo(()=>e.map(u=>({type:"default",text:o(u),value:u.flightAwareId,onClick:()=>n(u),active:u.flightAwareId===t?.flightAwareId})),[e,o,n,t?.flightAwareId]),c=f.useMemo(()=>t?o(t):"",[t,o]);return i.jsx("div",{children:i.jsx(Jt,{items:l,isMobileStyle:a,children:i.jsx(ge,{variant:"border",text:c,chevron:!0,pill:!0})})})});u_e.displayName="FlightStatusSwitcher";const u_=new Date,d_e=A.memo(({data:e})=>{const t=f.useMemo(()=>[...e.data.flights].sort((h,g)=>new Date(h.departureTime).getTime()-new Date(g.departureTime).getTime()),[e.data.flights]),n=f.useMemo(()=>{const h=new Date().getTime();if(t.length!==0)return t.reduce((g,y)=>{const v=new Date(y.departureTime).getTime(),x=new Date(g.departureTime).getTime(),b=Math.abs(v-h),_=Math.abs(x-h);return b<_?y:g})},[t]),[r,s]=f.useState(n),{departureTime:a,arrivalTime:o,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d}=f.useMemo(()=>{const h=g=>g?new Date(g):void 0;return r?{departureTime:new Date(r.departureTime),arrivalTime:new Date(r.arrivalTime),actualDepartureTime:h(r.actualDepartureTime),actualArrivalTime:h(r.actualArrivalTime),estimatedDepartureTime:h(r.estimatedDepartureTime),estimatedArrivalTime:h(r.estimatedArrivalTime)}:{}},[r]),m=f.useMemo(()=>c?c>o:d?d>o:!1,[c,o,d]),p=f.useMemo(()=>t.length<2?null:i.jsx(u_e,{flights:t,selectedFlight:r,setSelectedFlight:s}),[t,r,s]);return r?i.jsx(er,{"data-testid":"flight-status-widget",className:"w-full",variant:"noChrome",children:i.jsxs("div",{className:"gap-sm flex flex-col",children:[i.jsx(o_e,{flightMetadata:r,departureTime:a||u_,arrivalTime:o||u_,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d,delayed:m,rightContent:p}),i.jsx(c_e,{departureTime:a||u_,arrivalTime:o||u_,actualDepartureTime:l,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d,flightMetadata:r,delayed:m})]})}):null});d_e.displayName="FlightStatusWidget";const f_e=A.memo(({children:e,entries:t,size:n="sm",footer:r})=>{const s=n!=="sm";return i.jsxs(Pn,{shadow:!0,className:U("relative",s?"mb-lg pb-md":""),children:[e,i.jsx(z,{className:U("grid border-t"),children:t.map(({text:a,href:o,onClick:l})=>i.jsx("div",{className:"p-xs border-subtlest border-b last:border-b-0",onClickCapture:l,children:i.jsx(Te,{fullWidth:!0,variant:"super",chevron:!0,chevronIcon:_r,size:"small",text:a,href:o,extraCSS:"rounded-md"})},o))}),r]})});f_e.displayName="WidgetCta";const m_e=A.memo(({data:{title:e,text:t,image_url:n,canonical_pages:r}})=>{const{$t:s}=Q();return i.jsx("div",{className:"mb-md gap-md flex flex-col",children:i.jsx(f_e,{entries:r.map(a=>({text:a.cta??s({defaultMessage:"View More",id:"QQSdHPJWXu"}),href:a.url_web})),size:"sm",children:i.jsxs("div",{className:"gap-md p-md flex items-center md:items-start",children:[n&&i.jsx("img",{alt:"",className:"max-h-[65px] rounded",src:n}),i.jsxs("div",{className:"mr-sm w-full",children:[e&&i.jsx(L,{variant:"baseSemi",children:e}),t&&i.jsx(L,{variant:"small",color:"light",children:t})]})]})})})});m_e.displayName="GenericFallbackWidget";const al={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},p_e=Object.create(null);for(const e in al)Object.hasOwn(al,e)&&(p_e[al[e]]=e);const Hr={to:{},get:{}};Hr.get=function(e){const t=e.slice(0,3).toLowerCase();let n,r;switch(t){case"hsl":{n=Hr.get.hsl(e),r="hsl";break}case"hwb":{n=Hr.get.hwb(e),r="hwb";break}default:{n=Hr.get.rgb(e),r="rgb";break}}return n?{model:r,value:n}:null};Hr.get.rgb=function(e){if(!e)return null;const t=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^(\w+)$/;let o=[0,0,0,1],l,c,u;if(l=e.match(n)){for(u=l[2],l=l[1],c=0;c<3;c++){const d=c*2;o[c]=Number.parseInt(l.slice(d,d+2),16)}u&&(o[3]=Number.parseInt(u,16)/255)}else if(l=e.match(t)){for(l=l[1],u=l[3],c=0;c<3;c++)o[c]=Number.parseInt(l[c]+l[c],16);u&&(o[3]=Number.parseInt(u+u,16)/255)}else if(l=e.match(r)){for(c=0;c<3;c++)o[c]=Number.parseInt(l[c+1],10);l[4]&&(o[3]=l[5]?Number.parseFloat(l[4])*.01:Number.parseFloat(l[4]))}else if(l=e.match(s)){for(c=0;c<3;c++)o[c]=Math.round(Number.parseFloat(l[c+1])*2.55);l[4]&&(o[3]=l[5]?Number.parseFloat(l[4])*.01:Number.parseFloat(l[4]))}else return(l=e.match(a))?l[1]==="transparent"?[0,0,0,0]:Object.hasOwn(al,l[1])?(o=al[l[1]],o[3]=1,o):null:null;for(c=0;c<3;c++)o[c]=cu(o[c],0,255);return o[3]=cu(o[3],0,1),o};Hr.get.hsl=function(e){if(!e)return null;const t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=cu(Number.parseFloat(n[2]),0,100),o=cu(Number.parseFloat(n[3]),0,100),l=cu(Number.isNaN(r)?1:r,0,1);return[s,a,o,l]}return null};Hr.get.hwb=function(e){if(!e)return null;const t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=cu(Number.parseFloat(n[2]),0,100),o=cu(Number.parseFloat(n[3]),0,100),l=cu(Number.isNaN(r)?1:r,0,1);return[s,a,o,l]}return null};Hr.to.hex=function(...e){return"#"+d_(e[0])+d_(e[1])+d_(e[2])+(e[3]<1?d_(Math.round(e[3]*255)):"")};Hr.to.rgb=function(...e){return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Hr.to.rgb.percent=function(...e){const t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};Hr.to.hsl=function(...e){return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Hr.to.hwb=function(...e){let t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Hr.to.keyword=function(...e){return p_e[e.slice(0,3)]};function cu(e,t,n){return Math.min(Math.max(t,e),n)}function d_(e){const t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}const h_e={};for(const e of Object.keys(al))h_e[al[e]]=e;const Je={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},ic=(6/29)**3;function ip(e){const t=e>.0031308?1.055*e**.4166666666666667-.055:e*12.92;return Math.min(Math.max(0,t),1)}function lp(e){return e>.04045?((e+.055)/1.055)**2.4:e/12.92}for(const e of Object.keys(Je)){if(!("channels"in Je[e]))throw new Error("missing channels property: "+e);if(!("labels"in Je[e]))throw new Error("missing channel labels property: "+e);if(Je[e].labels.length!==Je[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=Je[e];delete Je[e].channels,delete Je[e].labels,Object.defineProperty(Je[e],"channels",{value:t}),Object.defineProperty(Je[e],"labels",{value:n})}Je.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(t,n,r),a=Math.max(t,n,r),o=a-s;let l,c;switch(a){case s:{l=0;break}case t:{l=(n-r)/o;break}case n:{l=2+(r-t)/o;break}case r:{l=4+(t-n)/o;break}}l=Math.min(l*60,360),l<0&&(l+=360);const u=(s+a)/2;return a===s?c=0:u<=.5?c=o/(a+s):c=o/(2-a-s),[l,c*100,u*100]};Je.rgb.hsv=function(e){let t,n,r,s,a;const o=e[0]/255,l=e[1]/255,c=e[2]/255,u=Math.max(o,l,c),d=u-Math.min(o,l,c),m=function(p){return(u-p)/6/d+1/2};if(d===0)s=0,a=0;else{switch(a=d/u,t=m(o),n=m(l),r=m(c),u){case o:{s=r-n;break}case l:{s=1/3+t-r;break}case c:{s=2/3+n-t;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,a*100,u*100]};Je.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const s=Je.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[s,a*100,r*100]};Je.rgb.oklab=function(e){const t=lp(e[0]/255),n=lp(e[1]/255),r=lp(e[2]/255),s=Math.cbrt(.4122214708*t+.5363325363*n+.0514459929*r),a=Math.cbrt(.2119034982*t+.6806995451*n+.1073969566*r),o=Math.cbrt(.0883024619*t+.2817188376*n+.6299787005*r),l=.2104542553*s+.793617785*a-.0040720468*o,c=1.9779984951*s-2.428592205*a+.4505937099*o,u=.0259040371*s+.7827717662*a-.808675766*o;return[l*100,c*100,u*100]};Je.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(1-t,1-n,1-r),a=(1-t-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,l=(1-r-s)/(1-s)||0;return[a*100,o*100,l*100,s*100]};function tCt(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}Je.rgb.keyword=function(e){const t=h_e[e];if(t)return t;let n=Number.POSITIVE_INFINITY,r;for(const s of Object.keys(al)){const a=al[s],o=tCt(e,a);o<n&&(n=o,r=s)}return r};Je.keyword.rgb=function(e){return al[e]};Je.rgb.xyz=function(e){const t=lp(e[0]/255),n=lp(e[1]/255),r=lp(e[2]/255),s=t*.4124564+n*.3575761+r*.1804375,a=t*.2126729+n*.7151522+r*.072175,o=t*.0193339+n*.119192+r*.9503041;return[s*100,a*100,o*100]};Je.rgb.lab=function(e){const t=Je.rgb.xyz(e);let n=t[0],r=t[1],s=t[2];n/=95.047,r/=100,s/=108.883,n=n>ic?n**(1/3):7.787*n+16/116,r=r>ic?r**(1/3):7.787*r+16/116,s=s>ic?s**(1/3):7.787*s+16/116;const a=116*r-16,o=500*(n-r),l=200*(r-s);return[a,o,l]};Je.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let s,a;if(n===0)return a=r*255,[a,a,a];const o=r<.5?r*(1+n):r+n-r*n,l=2*r-o,c=[0,0,0];for(let u=0;u<3;u++)s=t+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?a=l+(o-l)*6*s:2*s<1?a=o:3*s<2?a=l+(o-l)*(2/3-s)*6:a=l,c[u]=a*255;return c};Je.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,s=n;const a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=a<=1?a:2-a;const o=(r+n)/2,l=r===0?2*s/(a+s):2*n/(r+n);return[t,l*100,o*100]};Je.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const s=Math.floor(t)%6,a=t-Math.floor(t),o=255*r*(1-n),l=255*r*(1-n*a),c=255*r*(1-n*(1-a));switch(r*=255,s){case 0:return[r,c,o];case 1:return[l,r,o];case 2:return[o,r,c];case 3:return[o,l,r];case 4:return[c,o,r];case 5:return[r,o,l]}};Je.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,s=Math.max(r,.01);let a,o;o=(2-n)*r;const l=(2-n)*s;return a=n*s,a/=l<=1?l:2-l,a=a||0,o/=2,[t,a*100,o*100]};Je.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const s=n+r;let a;s>1&&(n/=s,r/=s);const o=Math.floor(6*t),l=1-r;a=6*t-o,o&1&&(a=1-a);const c=n+a*(l-n);let u,d,m;switch(o){default:case 6:case 0:{u=l,d=c,m=n;break}case 1:{u=c,d=l,m=n;break}case 2:{u=n,d=l,m=c;break}case 3:{u=n,d=c,m=l;break}case 4:{u=c,d=n,m=l;break}case 5:{u=l,d=n,m=c;break}}return[u*255,d*255,m*255]};Je.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=e[3]/100,a=1-Math.min(1,t*(1-s)+s),o=1-Math.min(1,n*(1-s)+s),l=1-Math.min(1,r*(1-s)+s);return[a*255,o*255,l*255]};Je.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let s,a,o;return s=t*3.2404542+n*-1.5371385+r*-.4985314,a=t*-.969266+n*1.8760108+r*.041556,o=t*.0556434+n*-.2040259+r*1.0572252,s=ip(s),a=ip(a),o=ip(o),[s*255,a*255,o*255]};Je.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>ic?t**(1/3):7.787*t+16/116,n=n>ic?n**(1/3):7.787*n+16/116,r=r>ic?r**(1/3):7.787*r+16/116;const s=116*n-16,a=500*(t-n),o=200*(n-r);return[s,a,o]};Je.xyz.oklab=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=Math.cbrt(.8189330101*t+.3618667424*n-.1288597137*r),a=Math.cbrt(.0329845436*t+.9293118715*n+.0361456387*r),o=Math.cbrt(.0482003018*t+.2643662691*n+.633851707*r),l=.2104542553*s+.793617785*a-.0040720468*o,c=1.9779984951*s-2.428592205*a+.4505937099*o,u=.0259040371*s+.7827717662*a-.808675766*o;return[l*100,c*100,u*100]};Je.oklab.oklch=function(e){return Je.lab.lch(e)};Je.oklab.xyz=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(.999999998*t+.396337792*n+.215803758*r)**3,a=(1.000000008*t-.105561342*n-.063854175*r)**3,o=(1.000000055*t-.089484182*n-1.291485538*r)**3,l=1.227013851*s-.55779998*a+.281256149*o,c=-.040580178*s+1.11225687*a-.071676679*o,u=-.076381285*s-.421481978*a+1.58616322*o;return[l*100,c*100,u*100]};Je.oklab.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(t+.3963377774*n+.2158037573*r)**3,a=(t-.1055613458*n-.0638541728*r)**3,o=(t-.0894841775*n-1.291485548*r)**3,l=ip(4.0767416621*s-3.3077115913*a+.2309699292*o),c=ip(-1.2684380046*s+2.6097574011*a-.3413193965*o),u=ip(-.0041960863*s-.7034186147*a+1.707614701*o);return[l*255,c*255,u*255]};Je.oklch.oklab=function(e){return Je.lch.lab(e)};Je.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let s,a,o;a=(t+16)/116,s=n/500+a,o=a-r/200;const l=a**3,c=s**3,u=o**3;return a=l>ic?l:(a-16/116)/7.787,s=c>ic?c:(s-16/116)/7.787,o=u>ic?u:(o-16/116)/7.787,s*=95.047,a*=100,o*=108.883,[s,a,o]};Je.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const o=Math.sqrt(n*n+r*r);return[t,o,s]};Je.lch.lab=function(e){const t=e[0],n=e[1],s=e[2]/360*2*Math.PI,a=n*Math.cos(s),o=n*Math.sin(s);return[t,a,o]};Je.rgb.ansi16=function(e,t=null){const[n,r,s]=e;let a=t===null?Je.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),a===0)return 30;let o=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return a===2&&(o+=60),o};Je.hsv.ansi16=function(e){return Je.rgb.ansi16(Je.hsv.rgb(e),e[2])};Je.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t>>4===n>>4&&n>>4===r>>4?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};Je.ansi16.rgb=function(e){e=e[0];let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(Math.trunc(e>50)+1)*.5,r=(t&1)*n*255,s=(t>>1&1)*n*255,a=(t>>2&1)*n*255;return[r,s,a]};Je.ansi256.rgb=function(e){if(e=e[0],e>=232){const a=(e-232)*10+8;return[a,a,a]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,s=t%6/5*255;return[n,r,s]};Je.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};Je.hex.rgb=function(e){const t=e.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=[...n].map(l=>l+l).join(""));const r=Number.parseInt(n,16),s=r>>16&255,a=r>>8&255,o=r&255;return[s,a,o]};Je.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.max(Math.max(t,n),r),a=Math.min(Math.min(t,n),r),o=s-a;let l;const c=o<1?a/(1-o):0;return o<=0?l=0:s===t?l=(n-r)/o%6:s===n?l=2+(r-t)/o:l=4+(t-n)/o,l/=6,l%=1,[l*360,o*100,c*100]};Je.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[e[0],r*100,s*100]};Je.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[e[0],r*100,s*100]};Je.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],a=t%1*6,o=a%1,l=1-o;let c=0;switch(Math.floor(a)){case 0:{s[0]=1,s[1]=o,s[2]=0;break}case 1:{s[0]=l,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=o;break}case 3:{s[0]=0,s[1]=l,s[2]=1;break}case 4:{s[0]=o,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=l}return c=(1-n)*r,[(n*s[0]+c)*255,(n*s[1]+c)*255,(n*s[2]+c)*255]};Je.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let s=0;return r>0&&(s=t/r),[e[0],s*100,r*100]};Je.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let s=0;return r>0&&r<.5?s=t/(2*r):r>=.5&&r<1&&(s=t/(2*(1-r))),[e[0],s*100,r*100]};Je.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};Je.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,s=r-t;let a=0;return s<1&&(a=(r-s)/(1-s)),[e[0],s*100,a*100]};Je.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};Je.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};Je.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};Je.gray.hsl=function(e){return[0,0,e[0]]};Je.gray.hsv=Je.gray.hsl;Je.gray.hwb=function(e){return[0,100,e[0]]};Je.gray.cmyk=function(e){return[0,0,0,e[0]]};Je.gray.lab=function(e){return[e[0],0,0]};Je.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".slice(r.length)+r};Je.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};function nCt(){const e={},t=Object.keys(Je);for(let{length:n}=t,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function rCt(e){const t=nCt(),n=[e];for(t[e].distance=0;n.length>0;){const r=n.pop(),s=Object.keys(Je[r]);for(let{length:a}=s,o=0;o<a;o++){const l=s[o],c=t[l];c.distance===-1&&(c.distance=t[r].distance+1,c.parent=r,n.unshift(l))}}return t}function sCt(e,t){return function(n){return t(e(n))}}function aCt(e,t){const n=[t[e].parent,e];let r=Je[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),r=sCt(Je[t[s].parent][s],r),s=t[s].parent;return r.conversion=n,r}function oCt(e){const t=rCt(e),n={},r=Object.keys(t);for(let{length:s}=r,a=0;a<s;a++){const o=r[a];t[o].parent!==null&&(n[o]=aCt(o,t))}return n}const ts={},iCt=Object.keys(Je);function lCt(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function cCt(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=e(n);if(typeof s=="object")for(let{length:a}=s,o=0;o<a;o++)s[o]=Math.round(s[o]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}for(const e of iCt){ts[e]={},Object.defineProperty(ts[e],"channels",{value:Je[e].channels}),Object.defineProperty(ts[e],"labels",{value:Je[e].labels});const t=oCt(e),n=Object.keys(t);for(const r of n){const s=t[r];ts[e][r]=cCt(s),ts[e][r].raw=lCt(s)}}const g_e=["keyword","gray","hex"],A9={};for(const e of Object.keys(ts))A9[[...ts[e].labels].sort().join("")]=e;const j9={};function qn(e,t){if(!(this instanceof qn))return new qn(e,t);if(t&&t in g_e&&(t=null),t&&!(t in ts))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof qn)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const s=Hr.get(e);if(s===null)throw new Error("Unable to parse color from string: "+e);this.model=s.model,r=ts[this.model].channels,this.color=s.value.slice(0,r),this.valpha=typeof s.value[r]=="number"?s.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=ts[this.model].channels;const s=Array.prototype.slice.call(e,0,r);this.color=R9(s,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const s=Object.keys(e);"alpha"in e&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const a=s.sort().join("");if(!(a in A9))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=A9[a];const{labels:o}=ts[this.model],l=[];for(n=0;n<o.length;n++)l.push(e[o[n]]);this.color=R9(l)}if(j9[this.model])for(r=ts[this.model].channels,n=0;n<r;n++){const s=j9[this.model][n];s&&(this.color[n]=s(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}qn.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in Hr.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return Hr.to[t.model](...n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return Hr.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=ts[this.model],{labels:n}=ts[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new qn([...this.color.map(dCt(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new qn([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:hr("rgb",0,Ur(255)),green:hr("rgb",1,Ur(255)),blue:hr("rgb",2,Ur(255)),hue:hr(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:hr("hsl",1,Ur(100)),lightness:hr("hsl",2,Ur(100)),saturationv:hr("hsv",1,Ur(100)),value:hr("hsv",2,Ur(100)),chroma:hr("hcg",1,Ur(100)),gray:hr("hcg",2,Ur(100)),white:hr("hwb",1,Ur(100)),wblack:hr("hwb",2,Ur(100)),cyan:hr("cmyk",0,Ur(100)),magenta:hr("cmyk",1,Ur(100)),yellow:hr("cmyk",2,Ur(100)),black:hr("cmyk",3,Ur(100)),x:hr("xyz",0,Ur(95.047)),y:hr("xyz",1,Ur(100)),z:hr("xyz",2,Ur(108.833)),l:hr("lab",0,Ur(100)),a:hr("lab",1),b:hr("lab",2),keyword(e){return e!==void 0?new qn(e):ts[this.model].keyword(this.color)},hex(e){return e!==void 0?new qn(e):Hr.to.hex(...this.rgb().round().color)},hexa(e){if(e!==void 0)return new qn(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),Hr.to.hex(...t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const s=r/255;t[n]=s<=.04045?s/12.92:((s+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return qn.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),s=t===void 0?.5:t,a=2*s-1,o=n.alpha()-r.alpha(),l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2,c=1-l;return qn.rgb(l*n.red()+c*r.red(),l*n.green()+c*r.green(),l*n.blue()+c*r.blue(),n.alpha()*s+r.alpha()*(1-s))}};for(const e of Object.keys(ts)){if(g_e.includes(e))continue;const{channels:t}=ts[e];qn.prototype[e]=function(...n){return this.model===e?new qn(this):n.length>0?new qn(n,e):new qn([...fCt(ts[this.model][e].raw(this.color)),this.valpha],e)},qn[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=R9(n,t)),new qn(r,e)}}function uCt(e,t){return Number(e.toFixed(t))}function dCt(e){return function(t){return uCt(t,e)}}function hr(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(j9[r]||=[])[t]=n;return e=e[0],function(r){let s;return r!==void 0?(n&&(r=n(r)),s=this[e](),s.color[t]=r,s):(s=this[e]().color[t],n&&(s=n(s)),s)}}function Ur(e){return function(t){return Math.max(0,Math.min(e,t))}}function fCt(e){return Array.isArray(e)?e:[e]}function R9(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}const pg=A.memo(({size:e="default",className:t,includeDot:n})=>{const{$t:r}=Q(),{isMobileStyle:s}=ye();return i.jsx("div",{className:U("flex shrink-0 items-center justify-center",t),children:i.jsxs(L,{variant:e==="tiny"||s?"micro":"tiny",color:"super",className:U("bg-superBG pt-three flex shrink-0 items-center rounded-full py-0.5 tracking-wider",{"px-2.5":e==="default","pl-2":e==="default"&&n,"px-2":e==="small","px-1.5":e==="tiny"}),children:[n&&i.jsxs("span",{className:"grid",children:[i.jsx("span",{className:"bg-super mr-1 size-1.5 rounded-full",style:{gridArea:"1/-1"}}),i.jsx("span",{className:"bg-super mr-1 size-1.5 animate-ping rounded-full",style:{gridArea:"1/-1"}})]}),r({defaultMessage:"Live",id:"Dn82ALx/+V"}).toUpperCase()]})})});pg.displayName="LiveIndicator";const mCt=["West First Round","East First Round","Western Conference Semifinals","Eastern Conference Semifinals","Western Conference Finals","Eastern Conference Finals","NBA Finals"],y_e=e=>mCt.includes(e);function pCt(e){return e!==null&&typeof e=="object"&&"is_bye_event"in e&&typeof e.is_bye_event=="boolean"}function v_e(e,t){return t.find(n=>String(n.teamId)===String(e))}const hCt=e=>{switch(e){case"nba":case"wnba":case"ncaam":case"ncaaw":case"mlb":case"atp":case"wta":return"/static/images/sports/nba/logos/nba-logo-generic.png";case"nfl":return"/static/images/sports/nfl/logos/nfl-logo-generic.png";case"ipl":case"cricket":case"icc":return"/static/images/sports/cricket/logos/cricket-logo-generic.png";default:return""}},gCt="#64645F";function sh(e,t,n){const r={teamId:e,logo:hCt(n),color:gCt};return v_e(e,t)??r}function yCt(e,t){return t.find(n=>n.teamId===e)}function mx(e){return[...e].sort((t,n)=>n.teamLocationType.teamLocationTypeId-t.teamLocationType.teamLocationTypeId)}function gC(e){if(!e||e.wins+e.losses+e.ties===0)return"";const{wins:t,losses:n,ties:r}=e;return r?`${t}-${n}-${r}`:`${t}-${n}`}function vCt(e,t){return t.winProbabilities?.find(n=>n.teamId===e)}function xCt(e,t,n,r){const s=sh(e,n,r),a=yCt(e,t),o=t.find(c=>c.teamId===e)?.seed,l=bCt(r);return{teamId:a.teamId,logo:s.logo,color:s.color,nickname:l?a.location:a.nickname,abbreviation:a.abbreviation,record:a.record,winner:a.isWinner,score:a.score,seed:o}}const bCt=e=>e==="ncaam"||e==="ncaaw";function _Ct(e,t,n,r){const s=sh(e,n,r),a=t.find(o=>o.id===e);return a?{teamId:a.id,logo:s.logo,color:s.color,nickname:a.title??"",abbreviation:a.abbreviation??""}:{teamId:e,logo:s.logo,color:s.color,nickname:"",abbreviation:""}}function wCt(e,t,n){return mx(e)?.map(r=>xCt(r.teamId,e,t,n))}function YVt(e,t,n){return e.map(r=>_Ct(r.id,e,t,n))}function QVt(e,t){for(const n of t)for(const r of n.divisions)for(const s of r.teams)if(s.teamId===e)return{conference:n.abbreviation,division:r.name};return null}const XVt=e=>e?"nickname"in e?e.nickname:e.title:null,ZVt=e=>e?"teamId"in e?e.teamId:e.id:null,JVt=e=>"score"in e?e.score:e.sub_text&&e.text?`${e.text} ${e.sub_text}`:e.text,CCt=e=>"isWinner"in e?e.isWinner:e.won,eWt=e=>e?e.some(t=>CCt(t)):!1,tWt=e=>e?"teamId"in(e[0]??{})?e.every(t=>"teamId"in t)&&!e.some(t=>!t.teamId||String(t.teamId)==="TBD"):e.every(t=>"id"in t)&&!e.some(t=>t.id==="TBD"):!1,nWt=e=>!e.team_1||!e.team_2||pCt(e.extra)&&e.extra.is_bye_event?!1:!!(e.team_1.id&&e.team_2.id&&e.team_1.id!=="TBD"&&e.team_2.id!=="TBD"),rWt=e=>"id"in e,sWt=e=>!!e.team_1.won||!!e.team_2.won;var iy={},nZ;function px(){if(nZ)return iy;nZ=1,iy.__esModule=!0,iy.default=void 0;var e={top:"top",left:"left",right:"right",bottom:"bottom"};return iy.default=e,iy}var SCt=px();const ECt=io(SCt);var jT,rZ;function MCt(){if(rZ)return jT;rZ=1,jT=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var o=n(r,s,a);return o&&{start:o[0],end:o[1],pre:a.slice(0,o[0]),body:a.slice(o[0]+r.length,o[1]),post:a.slice(o[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var o,l,c,u,d,m=a.indexOf(r),p=a.indexOf(s,m+1),h=m;if(m>=0&&p>0){for(o=[],c=a.length;h>=0&&!d;)h==m?(o.push(h),m=a.indexOf(r,h+1)):o.length==1?d=[o.pop(),p]:(l=o.pop(),l<c&&(c=l,u=p),p=a.indexOf(s,h+1)),h=m<p&&m>=0?m:p;o.length&&(d=[c,u])}return d}return jT}var RT,sZ;function kCt(){if(sZ)return RT;sZ=1,RT=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var o=n(r,s,a);return o&&{start:o[0],end:o[1],pre:a.slice(0,o[0]),body:a.slice(o[0]+r.length,o[1]),post:a.slice(o[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var o,l,c,u,d,m=a.indexOf(r),p=a.indexOf(s,m+1),h=m;if(m>=0&&p>0){if(r===s)return[m,p];for(o=[],c=a.length;h>=0&&!d;)h==m?(o.push(h),m=a.indexOf(r,h+1)):o.length==1?d=[o.pop(),p]:(l=o.pop(),l<c&&(c=l,u=p),p=a.indexOf(s,h+1)),h=m<p&&m>=0?m:p;o.length&&(d=[c,u])}return d}return RT}var IT,aZ;function TCt(){if(aZ)return IT;aZ=1;var e=kCt();IT=t;function t(s,a,o){var l=s;return n(s,a).reduce(function(c,u){return c.replace(u.functionIdentifier+"("+u.matches.body+")",r(u.matches.body,u.functionIdentifier,o,l,a))},s)}function n(s,a){var o=[],l=typeof a=="string"?new RegExp("\\b("+a+")\\("):a;do{var c=l.exec(s);if(!c)return o;if(c[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+a);var u=c[1],d=c.index,m=e("(",")",s.substring(d));if(!m||m.start!==c[0].length-1)throw new SyntaxError(u+"(): missing closing ')' in the value '"+s+"'");o.push({matches:m,functionIdentifier:u}),s=m.post}while(l.test(s));return o}function r(s,a,o,l,c){return o(t(s,c,o),a,l)}return IT}var PT,oZ;function NCt(){if(oZ)return PT;oZ=1;var e=function(t){this.value=t};return e.math={isDegree:!0,acos:function(t){return e.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,n){return t+n},asin:function(t){return e.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return e.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,n){var r=1,s=t-n,a=n;a<s&&(a=s,s=n);for(var o=a+1;o<=t;o++)r*=o;return r/e.math.fact(s)},changeSign:function(t){return-t},cos:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,n){return t/n},fact:function(t){if(t%1!==0)return"NaN";for(var n=1,r=2;r<=t;r++)n*=r;return n},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,n){return t%n},mul:function(t,n){return t*n},P:function(t,n){for(var r=1,s=Math.floor(t)-Math.floor(n)+1;s<=Math.floor(t);s++)r*=s;return r},Pi:function(t,n,r){for(var s=1,a=t;a<=n;a++)s*=Number(r.postfixEval({n:a}));return s},pow10x:function(t){for(var n=1;t--;)n*=10;return n},sigma:function(t,n,r){for(var s=0,a=t;a<=n;a++)s+=Number(r.postfixEval({n:a}));return s},sin:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,n){return t-n},tan:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.tan(t)},tanh:function(t){return e.sinha(t)/e.cosha(t)},toRadian:function(t){return t*Math.PI/180},and:function(t,n){return t&n}},e.Exception=function(t){this.message=t},PT=e,PT}var OT,iZ;function ACt(){if(iZ)return OT;iZ=1;var e=NCt();function t(b,_){for(var w=0;w<b.length;w++)b[w]+=_;return b}for(var n=[{token:"sin",show:"sin",type:0,value:e.math.sin},{token:"cos",show:"cos",type:0,value:e.math.cos},{token:"tan",show:"tan",type:0,value:e.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:e.math.P},{token:"C",show:"C",type:10,value:e.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:e.math.asin},{token:"acos",show:"acos",type:0,value:e.math.acos},{token:"atan",show:"atan",type:0,value:e.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:e.math.cosh},{token:"acosh",show:"acosh",type:0,value:e.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:e.math.div},{token:"!",show:"!",type:7,value:e.math.fact},{token:"tanh",show:"tanh",type:0,value:e.math.tanh},{token:"atanh",show:"atanh",type:0,value:e.math.atanh},{token:"Mod",show:" Mod ",type:2,value:e.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:e.math.mul},{token:"sinh",show:"sinh",type:0,value:e.math.sinh},{token:"asinh",show:"asinh",type:0,value:e.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:e.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:e.math.add},{token:"-",show:"-",type:9,value:e.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:e.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:e.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:e.math.and}],r={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11},s=0;s<n.length;s++)n[s].precedence=r[n[s].type];var a={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},o={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},l={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},c={},u={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},d={1:!0},m=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function p(b,_,w,C){for(var S=0;S<C;S++)if(b[w+S]!==_[S])return!1;return!0}e.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14},e.addToken=function(b){for(var _=0;_<b.length;_++){var w=b[_].token.length,C=-1;b[_].type===e.tokenTypes.FUNCTION_WITH_N_ARGS&&b[_].numberOfArguments===void 0&&(b[_].numberOfArguments=2),m[w]=m[w]||[];for(var S=0;S<m[w].length;S++)if(b[_].token===m[w][S]){C=h(m[w][S],n);break}C===-1?(n.push(b[_]),b[_].precedence=r[b[_].type],m.length<=b[_].token.length&&(m[b[_].token.length]=[]),m[b[_].token.length].push(b[_].token)):(n[C]=b[_],b[_].precedence=r[b[_].type])}};function h(b,_){for(var w=0;w<_.length;w++)if(_[w].token===b)return w;return-1}function g(b){for(var _=[],w=b.length,C,S,E,M=0;M<w;M++)if(!(M<w-1&&b[M]===" "&&b[M+1]===" ")){for(C="",S=b.length-M>m.length-2?m.length-1:b.length-M;S>0;S--)if(m[S]!==void 0)for(E=0;E<m[S].length;E++)p(b,m[S][E],M,S)&&(C=m[S][E],E=m[S].length,S=0);if(M+=C.length-1,C==="")throw new e.Exception("Can't understand after "+b.slice(M));_.push(n[h(C,n)])}return _}var y={value:e.math.changeSign,type:0,pre:21,show:"-"},v={value:")",show:")",type:5,pre:0},x={value:"(",type:4,pre:0,show:"("};return e.lex=function(b,_){var w=[x],C=[],S=b,E=a,M=0,k=c,T="",j;typeof _<"u"&&e.addToken(_);var R={},O=g(S);for(j=0;j<O.length;j++){var P=O[j];if(P.type===14){if(j>0&&j<O.length-1&&O[j+1].type===1&&(O[j-1].type===1||O[j-1].type===6))throw new e.Exception("Unexpected Space");continue}var N=P.token,I=P.type,D=P.value,F=P.precedence,B=P.show,V=w[w.length-1],$;for($=C.length;$--&&C[$]===0;)if([0,2,3,4,5,9,11,12,13].indexOf(I)!==-1){if(E[I]!==!0)throw new e.Exception(N+" is not allowed after "+T);w.push(v),E=o,k=u,C.pop()}if(E[I]!==!0)throw new e.Exception(N+" is not allowed after "+T);if(k[I]===!0&&(I=2,D=e.math.mul,B="&times;",F=3,j=j-1),R={value:D,type:I,pre:F,show:B,numberOfArguments:P.numberOfArguments},I===0)E=a,k=c,t(C,2),w.push(R),O[j+1].type!==4&&(w.push(x),C.push(2));else if(I===1)V.type===1?(V.value+=D,t(C,1)):w.push(R),E=o,k=l;else if(I===2)E=a,k=c,t(C,2),w.push(R);else if(I===3)w.push(R),E=o,k=u;else if(I===4)t(C,1),M++,E=a,k=c,w.push(R);else if(I===5){if(!M)throw new e.Exception("Closing parenthesis are more than opening one, wait What!!!");M--,E=o,k=u,w.push(R),t(C,1)}else if(I===6){if(V.hasDec)throw new e.Exception("Two decimals are not allowed in one number");V.type!==1&&(V={value:0,type:1,pre:0},w.push(V)),E=d,t(C,1),k=c,V.value+=D,V.hasDec=!0}else I===7&&(E=o,k=u,t(C,1),w.push(R));I===8?(E=a,k=c,t(C,P.numberOfArguments+2),w.push(R),O[j+1].type!==4&&(w.push(x),C.push(P.numberOfArguments+2))):I===9?(V.type===9?V.value===e.math.add?(V.value=D,V.show=B,t(C,1)):V.value===e.math.sub&&B==="-"&&(V.value=e.math.add,V.show="+",t(C,1)):V.type!==5&&V.type!==7&&V.type!==1&&V.type!==3&&V.type!==13?N==="-"&&(E=a,k=c,t(C,2).push(2),w.push(y),w.push(x)):(w.push(R),t(C,2)),E=a,k=c):I===10?(E=a,k=c,t(C,2),w.push(R)):I===11?(E=a,k=c,w.push(R)):I===12?(E=a,k=c,t(C,6),w.push(R),O[j+1].type!==4&&(w.push(x),C.push(6))):I===13&&(E=o,k=u,w.push(R)),t(C,-1),T=N}for($=C.length;$--;)w.push(v);if(E[5]!==!0)throw new e.Exception("complete the expression");for(;M--;)w.push(v);return w.push(v),new e(w)},OT=e,OT}var LT,lZ;function jCt(){if(lZ)return LT;lZ=1;var e=ACt();return e.prototype.toPostfix=function(){for(var t=[],n,r,s,a,o,l=[{value:"(",type:4,pre:0}],c=this.value,u=1;u<c.length;u++)if(c[u].type===1||c[u].type===3||c[u].type===13)c[u].type===1&&(c[u].value=Number(c[u].value)),t.push(c[u]);else if(c[u].type===4)l.push(c[u]);else if(c[u].type===5)for(;(r=l.pop()).type!==4;)t.push(r);else if(c[u].type===11){for(;(r=l.pop()).type!==4;)t.push(r);l.push(r)}else{n=c[u],a=n.pre,o=l[l.length-1],s=o.pre;var d=o.value=="Math.pow"&&n.value=="Math.pow";if(a>s)l.push(n);else{for(;s>=a&&!d||d&&a<s;)r=l.pop(),o=l[l.length-1],t.push(r),s=o.pre,d=n.value=="Math.pow"&&o.value=="Math.pow";l.push(n)}}return new e(t)},LT=e,LT}var DT,cZ;function RCt(){if(cZ)return DT;cZ=1;var e=jCt();return e.prototype.postfixEval=function(t){t=t||{},t.PI=Math.PI,t.E=Math.E;for(var n=[],r,s,a,o=this.value,l=typeof t.n<"u",c=0;c<o.length;c++)if(o[c].type===1)n.push({value:o[c].value,type:1});else if(o[c].type===3)n.push({value:t[o[c].value],type:1});else if(o[c].type===0)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(o[c]):n[n.length-1].value=o[c].value(n[n.length-1].value);else if(o[c].type===7)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(o[c]):n[n.length-1].value=o[c].value(n[n.length-1].value);else if(o[c].type===8){for(var u=[],d=0;d<o[c].numberOfArguments;d++)u.push(n.pop().value);n.push({type:1,value:o[c].value.apply(o[c],u.reverse())})}else o[c].type===10?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s.value=s.concat(r),s.value.push(o[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(o[c]),n.push(r)):n.push({type:1,value:o[c].value(s.value,r.value)})):o[c].type===2||o[c].type===9?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s=s.concat(r),s.push(o[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(o[c]),n.push(r)):n.push({type:1,value:o[c].value(s.value,r.value)})):o[c].type===12?(r=n.pop(),typeof r.type<"u"&&(r=[r]),s=n.pop(),a=n.pop(),n.push({type:1,value:o[c].value(a.value,s.value,new e(r))})):o[c].type===13&&(l?n.push({value:t[o[c].value],type:3}):n.push([o[c]]));if(n.length>1)throw new e.Exception("Uncaught Syntax error");return n[0].value>1e15?"Infinity":parseFloat(n[0].value.toFixed(15))},e.eval=function(t,n,r){return typeof n>"u"?this.lex(t).toPostfix().postfixEval():typeof r>"u"?typeof n.length<"u"?this.lex(t,n).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(n):this.lex(t,n).toPostfix().postfixEval(r)},DT=e,DT}var FT,uZ;function ICt(){if(uZ)return FT;uZ=1;var e=RCt();return e.prototype.formulaEval=function(){for(var t,n,r,s=[],a=this.value,o=0;o<a.length;o++)a[o].type===1||a[o].type===3?s.push({value:a[o].type===3?a[o].show:a[o].value,type:1}):a[o].type===13?s.push({value:a[o].show,type:1}):a[o].type===0?s[s.length-1]={value:a[o].show+(a[o].show!="-"?"(":"")+s[s.length-1].value+(a[o].show!="-"?")":""),type:0}:a[o].type===7?s[s.length-1]={value:(s[s.length-1].type!=1?"(":"")+s[s.length-1].value+(s[s.length-1].type!=1?")":"")+a[o].show,type:7}:a[o].type===10?(t=s.pop(),n=s.pop(),a[o].show==="P"||a[o].show==="C"?s.push({value:"<sup>"+n.value+"</sup>"+a[o].show+"<sub>"+t.value+"</sub>",type:10}):s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+"<sup>"+t.value+"</sup>",type:1})):a[o].type===2||a[o].type===9?(t=s.pop(),n=s.pop(),s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+a[o].show+(t.type!=1?"(":"")+t.value+(t.type!=1?")":""),type:a[o].type})):a[o].type===12&&(t=s.pop(),n=s.pop(),r=s.pop(),s.push({value:a[o].show+"("+r.value+","+n.value+","+t.value+")",type:12}));return s[0].value},FT=e,FT}var UT,dZ;function PCt(){if(dZ)return UT;dZ=1;var e=MCt(),t=TCt(),n=ICt(),r=100,s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,a;UT=o;function o(c,u){a=0,u=Math.pow(10,u===void 0?5:u),c=c.replace(/\n+/g," ");function d(p,h,g){if(a++>r)throw a=0,new Error("Call stack overflow for "+g);if(p==="")throw new Error(h+"(): '"+g+"' must contain a non-whitespace string");p=m(p,g);var y=l(p);if(y.length>1||p.indexOf("var(")>-1)return h+"("+p+")";var v=y[0]||"";v==="%"&&(p=p.replace(/\b[0-9\.]+%/g,function(_){return parseFloat(_.slice(0,-1))*.01}));var x=p.replace(new RegExp(v,"gi"),""),b;try{b=n.eval(x)}catch{return h+"("+p+")"}return v==="%"&&(b*=100),(h.length||v==="%")&&(b=Math.round(b*u)/u),b+=v,b}function m(p,h){p=p.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var g="",y=p,v;v=s.exec(y);){v[0].index>0&&(g+=y.substring(0,v[0].index));var x=e("(",")",y.substring([0].index));if(x.body==="")throw new Error("'"+p+"' must contain a non-whitespace string");var b=d(x.body,"",h);g+=x.pre+b,y=x.post}return g+y}return t(c,/((?:\-[a-z]+\-)?calc)\(/,d)}function l(c){for(var u=[],d=[],m=/[\.0-9]([%a-z]+)/gi,p=m.exec(c);p;)!p||!p[1]||(d.indexOf(p[1].toLowerCase())===-1&&(u.push(p[1]),d.push(p[1].toLowerCase())),p=m.exec(c));return u}return UT}var OCt=PCt();const BT=io(OCt);var VT,fZ;function LCt(){if(fZ)return VT;fZ=1;var e=typeof Ya=="object"&&Ya&&Ya.Object===Object&&Ya;return VT=e,VT}var WT,mZ;function MF(){if(mZ)return WT;mZ=1;var e=LCt(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return WT=n,WT}var $T,pZ;function x_e(){if(pZ)return $T;pZ=1;var e=MF(),t=e.Symbol;return $T=t,$T}var HT,hZ;function DCt(){if(hZ)return HT;hZ=1;var e=x_e(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function a(o){var l=n.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var d=r.call(o);return u&&(l?o[s]=c:delete o[s]),d}return HT=a,HT}var zT,gZ;function FCt(){if(gZ)return zT;gZ=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return zT=n,zT}var GT,yZ;function UCt(){if(yZ)return GT;yZ=1;var e=x_e(),t=DCt(),n=FCt(),r="[object Null]",s="[object Undefined]",a=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:r:a&&a in Object(l)?t(l):n(l)}return GT=o,GT}var qT,vZ;function b_e(){if(vZ)return qT;vZ=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return qT=e,qT}var KT,xZ;function BCt(){if(xZ)return KT;xZ=1;var e=UCt(),t=b_e(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==r||c==s||c==n||c==a}return KT=o,KT}var YT,bZ;function VCt(){if(bZ)return YT;bZ=1;var e=MF(),t=e["__core-js_shared__"];return YT=t,YT}var QT,_Z;function WCt(){if(_Z)return QT;_Z=1;var e=VCt(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return QT=n,QT}var XT,wZ;function $Ct(){if(wZ)return XT;wZ=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return XT=n,XT}var ZT,CZ;function HCt(){if(CZ)return ZT;CZ=1;var e=BCt(),t=WCt(),n=b_e(),r=$Ct(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!n(p)||t(p))return!1;var h=e(p)?d:a;return h.test(r(p))}return ZT=m,ZT}var JT,SZ;function zCt(){if(SZ)return JT;SZ=1;function e(t,n){return t?.[n]}return JT=e,JT}var e6,EZ;function __e(){if(EZ)return e6;EZ=1;var e=HCt(),t=zCt();function n(r,s){var a=t(r,s);return e(a)?a:void 0}return e6=n,e6}var t6,MZ;function H3(){if(MZ)return t6;MZ=1;var e=__e(),t=e(Object,"create");return t6=t,t6}var n6,kZ;function GCt(){if(kZ)return n6;kZ=1;var e=H3();function t(){this.__data__=e?e(null):{},this.size=0}return n6=t,n6}var r6,TZ;function qCt(){if(TZ)return r6;TZ=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return r6=e,r6}var s6,NZ;function KCt(){if(NZ)return s6;NZ=1;var e=H3(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(a){var o=this.__data__;if(e){var l=o[a];return l===t?void 0:l}return r.call(o,a)?o[a]:void 0}return s6=s,s6}var a6,AZ;function YCt(){if(AZ)return a6;AZ=1;var e=H3(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var a=this.__data__;return e?a[s]!==void 0:n.call(a,s)}return a6=r,a6}var o6,jZ;function QCt(){if(jZ)return o6;jZ=1;var e=H3(),t="__lodash_hash_undefined__";function n(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&s===void 0?t:s,this}return o6=n,o6}var i6,RZ;function XCt(){if(RZ)return i6;RZ=1;var e=GCt(),t=qCt(),n=KCt(),r=YCt(),s=QCt();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,i6=a,i6}var l6,IZ;function ZCt(){if(IZ)return l6;IZ=1;function e(){this.__data__=[],this.size=0}return l6=e,l6}var c6,PZ;function JCt(){if(PZ)return c6;PZ=1;function e(t,n){return t===n||t!==t&&n!==n}return c6=e,c6}var u6,OZ;function z3(){if(OZ)return u6;OZ=1;var e=JCt();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return u6=t,u6}var d6,LZ;function eSt(){if(LZ)return d6;LZ=1;var e=z3(),t=Array.prototype,n=t.splice;function r(s){var a=this.__data__,o=e(a,s);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():n.call(a,o,1),--this.size,!0}return d6=r,d6}var f6,DZ;function tSt(){if(DZ)return f6;DZ=1;var e=z3();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return f6=t,f6}var m6,FZ;function nSt(){if(FZ)return m6;FZ=1;var e=z3();function t(n){return e(this.__data__,n)>-1}return m6=t,m6}var p6,UZ;function rSt(){if(UZ)return p6;UZ=1;var e=z3();function t(n,r){var s=this.__data__,a=e(s,n);return a<0?(++this.size,s.push([n,r])):s[a][1]=r,this}return p6=t,p6}var h6,BZ;function sSt(){if(BZ)return h6;BZ=1;var e=ZCt(),t=eSt(),n=tSt(),r=nSt(),s=rSt();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,h6=a,h6}var g6,VZ;function aSt(){if(VZ)return g6;VZ=1;var e=__e(),t=MF(),n=e(t,"Map");return g6=n,g6}var y6,WZ;function oSt(){if(WZ)return y6;WZ=1;var e=XCt(),t=sSt(),n=aSt();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return y6=r,y6}var v6,$Z;function iSt(){if($Z)return v6;$Z=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return v6=e,v6}var x6,HZ;function G3(){if(HZ)return x6;HZ=1;var e=iSt();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return x6=t,x6}var b6,zZ;function lSt(){if(zZ)return b6;zZ=1;var e=G3();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return b6=t,b6}var _6,GZ;function cSt(){if(GZ)return _6;GZ=1;var e=G3();function t(n){return e(this,n).get(n)}return _6=t,_6}var w6,qZ;function uSt(){if(qZ)return w6;qZ=1;var e=G3();function t(n){return e(this,n).has(n)}return w6=t,w6}var C6,KZ;function dSt(){if(KZ)return C6;KZ=1;var e=G3();function t(n,r){var s=e(this,n),a=s.size;return s.set(n,r),this.size+=s.size==a?0:1,this}return C6=t,C6}var S6,YZ;function fSt(){if(YZ)return S6;YZ=1;var e=oSt(),t=lSt(),n=cSt(),r=uSt(),s=dSt();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,S6=a,S6}var E6,QZ;function mSt(){if(QZ)return E6;QZ=1;var e=fSt(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var a=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=a.cache;if(c.has(l))return c.get(l);var u=r.apply(this,o);return a.cache=c.set(l,u)||c,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,E6=n,E6}var pSt=mSt();const hSt=io(pSt);var XZ="__react_svg_text_measurement_id";function gSt(e,t){try{var n=document.getElementById(XZ);if(!n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("aria-hidden","true"),r.style.width="0",r.style.height="0",r.style.position="absolute",r.style.top="-100%",r.style.left="-100%",n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttribute("id",XZ),r.appendChild(n),document.body.appendChild(r)}return Object.assign(n.style,t),n.textContent=e,n.getComputedTextLength()}catch{return null}}const I9=hSt(gSt,function(e,t){return e+"_"+JSON.stringify(t)});var ySt=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function vSt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function M6(e){return typeof e=="number"}function ZZ(e){return typeof e=="number"&&Number.isFinite(e)||typeof e=="string"}function w_e(e){var t=e.verticalAnchor,n=t===void 0?"end":t,r=e.scaleToFit,s=r===void 0?!1:r,a=e.angle,o=e.width,l=e.lineHeight,c=l===void 0?"1em":l,u=e.capHeight,d=u===void 0?"0.71em":u,m=e.children,p=e.style,h=vSt(e,ySt),g=h.x,y=g===void 0?0:g,v=h.y,x=v===void 0?0:v,b=!ZZ(y)||!ZZ(x),_=f.useMemo(function(){var k=m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/);return{wordsWithWidth:k.map(function(T){return{word:T,wordWidth:I9(T,p)||0}}),spaceWidth:I9("",p)||0}},[m,p]),w=_.wordsWithWidth,C=_.spaceWidth,S=f.useMemo(function(){return b?[]:o||s?w.reduce(function(k,T){var j=T.word,R=T.wordWidth,O=k[k.length-1];if(O&&(o==null||s||(O.width||0)+R+C<o))O.words.push(j),O.width=O.width||0,O.width+=R+C;else{var P={words:[j],width:R};k.push(P)}return k},[]):[{words:m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/)}]},[b,o,s,m,w,C]),E=f.useMemo(function(){var k=b?"":BT(n==="start"?"calc("+d+")":n==="middle"?"calc("+(S.length-1)/2+" * -"+c+" + ("+d+" / 2))":"calc("+(S.length-1)+" * -"+c+")");return k},[b,n,d,S.length,c]),M=f.useMemo(function(){var k=[];if(b)return"";if(M6(y)&&M6(x)&&M6(o)&&s&&S.length>0){var T=S[0].width||1,j=s==="shrink-only"?Math.min(o/T,1):o/T,R=j,O=y-j*y,P=x-R*x;k.push("matrix("+j+", 0, 0, "+R+", "+O+", "+P+")")}return a&&k.push("rotate("+a+", "+y+", "+x+")"),k.length>0?k.join(" "):""},[b,y,x,o,s,S,a]);return{wordsByLines:S,startDy:E,transform:M}}var xSt=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function P9(){return P9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P9.apply(null,arguments)}function bSt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var _St={overflow:"visible"};function q3(e){var t=e.dx,n=t===void 0?0:t,r=e.dy,s=r===void 0?0:r,a=e.textAnchor,o=a===void 0?"start":a,l=e.innerRef,c=e.innerTextRef;e.verticalAnchor,e.angle;var u=e.lineHeight,d=u===void 0?"1em":u;e.scaleToFit,e.capHeight,e.width;var m=bSt(e,xSt),p=m.x,h=p===void 0?0:p,g=m.fontSize,y=w_e(e),v=y.wordsByLines,x=y.startDy,b=y.transform;return A.createElement("svg",{ref:l,x:n,y:s,fontSize:g,style:_St},v.length>0?A.createElement("text",P9({ref:c,transform:b},m,{textAnchor:o}),v.map(function(_,w){return A.createElement("tspan",{key:w,x:h,dy:w===0?x:d},_.words.join(" "))})):null)}const wSt=Object.freeze(Object.defineProperty({__proto__:null,Text:q3,getStringWidth:I9,useText:w_e},Symbol.toStringTag,{value:"Module"}));function f_(e,t,n,r,s){var a;switch(e){case"center":return s;case"min":return n??0;case"max":return r??0;case"outside":default:return(a=(t??0)<s?n:r)!=null?a:0}}function JZ(e){var t=e.from,n=e.to;return{fromX:t.x,toX:n.x,fromY:t.y,toY:n.y,opacity:1}}function C_e(e){var t=e.scale,n=e.animateXOrY,r=e.animationTrajectory,s=r===void 0?"outside":r,a=n==="x";return f.useMemo(function(){var o=t.range().map(XE),l=o[0],c=o[1],u=c!=null&&l!=null&&c<l,d=u?[c,l]:[l,c],m=d[0],p=d[1],h=c!=null&&l!=null?Math.abs(c-l):0,g=(m??0)+h/2,y=s;!a&&s==="min"&&(y="max"),!a&&s==="max"&&(y="min");var v=function(b){var _=b.from,w=b.to;return{fromX:a?f_(y,_.x,m,p,g):_.x,toX:a?f_(y,_.x,m,p,g):w.x,fromY:a?_.y:f_(y,_.y,m,p,g),toY:a?w.y:f_(y,_.y,m,p,g),opacity:0}};return{from:v,leave:v,enter:JZ,update:JZ}},[t,a,s])}function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h0.apply(null,arguments)}function CSt(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.scale,a=e.tickClassName,o=e.tickComponent,l=e.tickLabelProps,c=e.tickStroke,u=c===void 0?"#222":c,d=e.tickTransform,m=e.ticks,p=e.tickLineProps,h=e.animationTrajectory,g=Oye(m,h0({},C_e({scale:s,animateXOrY:n?"x":"y",animationTrajectory:h}),{keys:function(v){return"tick-"+v.value+"-"+v.index}}));return A.createElement(A.Fragment,null,g(function(y,v,x,b){var _,w,C=y.fromX,S=y.toX,E=y.fromY,M=y.toY,k=y.opacity,T=x.key,j=(_=(w=l[b])!=null?w:l[0])!=null?_:{};return v==null||T==null?null:A.createElement(l0.g,{key:T,className:U("visx-axis-tick",a),transform:d},!t&&A.createElement(l0.line,h0({x1:C,x2:S,y1:E,y2:M,stroke:u,strokeLinecap:"square",strokeOpacity:k},p)),A.createElement(l0.g,{key:b,transform:lgt([S,M],function(R,O){var P;return"translate("+R+","+(O+(r===ECt.bottom&&typeof j.fontSize=="number"?(P=j.fontSize)!=null?P:10:0))+")"}),opacity:k},o?o(h0({},j,{x:S,y:M,formattedValue:v?.formattedValue})):A.createElement(q3,j,v?.formattedValue)))}))}var m_={};const kF=hh(hmt),TF=hh(lmt);var p_={};const S_e=hh(qpt),E_e=hh(wSt);var h_={},eJ;function SSt(){if(eJ)return h_;eJ=1,h_.__esModule=!0,h_.default=n;var e=t(px());function t(r){return r&&r.__esModule?r:{default:r}}function n(r){var s=r.labelOffset,a=r.labelProps,o=r.orientation,l=r.range,c=r.tickLabelFontSize,u=r.tickLength,d=o===e.default.left||o===e.default.top?-1:1,m,p,h;if(o===e.default.top||o===e.default.bottom){var g=o===e.default.bottom&&typeof a.fontSize=="number"?a.fontSize:0;m=(Number(l[0])+Number(l[l.length-1]))/2,p=d*(u+s+c+g)}else m=d*((Number(l[0])+Number(l[l.length-1]))/2),p=-(u+s),h="rotate("+d*90+")";return{x:m,y:p,transform:h}}return h_}var g_={},tJ;function ESt(){if(tJ)return g_;tJ=1,g_.__esModule=!0,g_.default=c;var e=o(dh()),t=o(Vv()),n=S_e,r=kF,s=E_e,a=o(px());function o(u){return u&&u.__esModule?u:{default:u}}function l(){return l=Object.assign?Object.assign.bind():function(u){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var p in m)({}).hasOwnProperty.call(m,p)&&(u[p]=m[p])}return u},l.apply(null,arguments)}function c(u){var d=u.hideTicks,m=u.horizontal,p=u.orientation,h=u.tickClassName,g=u.tickComponent,y=u.tickLabelProps,v=u.tickStroke,x=v===void 0?"#222":v,b=u.tickTransform,_=u.ticks,w=u.strokeWidth,C=u.tickLineProps;return _.map(function(S){var E,M=S.value,k=S.index,T=S.from,j=S.to,R=S.formattedValue,O=(E=y[k])!=null?E:{},P=Math.max(10,typeof O.fontSize=="number"&&O.fontSize||0),N=j.y+(m&&p!==a.default.top?P:0);return e.default.createElement(r.Group,{key:"visx-tick-"+M+"-"+k,className:(0,t.default)("visx-axis-tick",h),transform:b},!d&&e.default.createElement(n.Line,l({from:T,to:j,stroke:x,strokeWidth:w,strokeLinecap:"square"},C)),g?g(l({},O,{x:j.x,y:N,formattedValue:R})):e.default.createElement(s.Text,l({x:j.x,y:N},O),R))})}return g_}var nJ;function MSt(){if(nJ)return p_;nJ=1,p_.__esModule=!0,p_.default=d;var e=l(dh()),t=l(Vv()),n=S_e,r=E_e,s=l(SSt()),a=l(px()),o=l(ESt());function l(m){return m&&m.__esModule?m:{default:m}}function c(){return c=Object.assign?Object.assign.bind():function(m){for(var p=1;p<arguments.length;p++){var h=arguments[p];for(var g in h)({}).hasOwnProperty.call(h,g)&&(m[g]=h[g])}return m},c.apply(null,arguments)}var u={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function d(m){var p=m.axisFromPoint,h=m.axisLineClassName,g=m.axisToPoint,y=m.hideAxisLine,v=m.hideTicks,x=m.horizontal,b=m.label,_=b===void 0?"":b,w=m.labelClassName,C=m.labelOffset,S=C===void 0?14:C,E=m.labelProps,M=m.orientation,k=M===void 0?a.default.bottom:M,T=m.scale,j=m.stroke,R=j===void 0?"#222":j,O=m.strokeDasharray,P=m.strokeWidth,N=P===void 0?1:P,I=m.tickClassName,D=m.tickComponent,F=m.tickLineProps,B=m.tickLabelProps,V=m.tickLength,$=V===void 0?8:V,G=m.tickStroke,X=G===void 0?"#222":G,Y=m.tickTransform,W=m.ticks,H=m.ticksComponent,Z=H===void 0?o.default:H,re=c({},u,E),q=c({},u,typeof B=="object"?B:null),J=W.map(function(se){var de=se.value,fe=se.index;return typeof B=="function"?B(de,fe,W):q}),te=Math.max.apply(Math,[10].concat(J.map(function(se){return typeof se.fontSize=="number"?se.fontSize:0})));return e.default.createElement(e.default.Fragment,null,Z({hideTicks:v,horizontal:x,orientation:k,scale:T,tickClassName:I,tickComponent:D,tickLabelProps:J,tickStroke:X,tickTransform:Y,ticks:W,strokeWidth:N,tickLineProps:F}),!y&&e.default.createElement(n.Line,{className:(0,t.default)("visx-axis-line",h),from:p,to:g,stroke:R,strokeWidth:N,strokeDasharray:O}),_&&e.default.createElement(r.Text,c({className:(0,t.default)("visx-axis-label",w)},(0,s.default)({labelOffset:S,labelProps:re,orientation:k,range:T.range(),tickLabelFontSize:te,tickLength:$}),re),_))}return p_}var y_={},rJ;function kSt(){if(rJ)return y_;rJ=1,y_.__esModule=!0,y_.default=e;function e(t,n){n===void 0&&(n="center");var r=t;if(n!=="start"&&"bandwidth"in r){var s=r.bandwidth();return n==="center"&&(s/=2),r.round()&&(s=Math.round(s)),function(a){var o=r(a);return typeof o=="number"?o+s:o}}return t}return y_}var v_={},sJ;function TSt(){if(sJ)return v_;sJ=1,v_.__esModule=!0,v_.default=t;var e=TF;function t(n){var r=n;return"tickFormat"in r?r.tickFormat():e.toString}return v_}var x_={},Mu=function(){function e(n){var r=n.x,s=r===void 0?0:r,a=n.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var t=e.prototype;return t.value=function(){return{x:this.x,y:this.y}},t.toArray=function(){return[this.x,this.y]},e}();function NSt(e,t){return new Mu({x:e.x+t.x,y:e.y+t.y})}function ASt(e,t){return new Mu({x:e.x-t.x,y:e.y-t.y})}const jSt=Object.freeze(Object.defineProperty({__proto__:null,Point:Mu,subtractPoints:ASt,sumPoints:NSt},Symbol.toStringTag,{value:"Module"})),M_e=hh(jSt);var aJ;function RSt(){if(aJ)return x_;aJ=1,x_.__esModule=!0,x_.default=t;var e=M_e;function t(n,r){var s=n.x,a=n.y;return new e.Point(r?{x:s,y:a}:{x:a,y:s})}return x_}var im={},oJ;function ISt(){if(oJ)return im;oJ=1,im.__esModule=!0,im.default=n,im.defaultAxisRangePadding=void 0;function e(){return e=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)({}).hasOwnProperty.call(a,o)&&(r[o]=a[o])}return r},e.apply(null,arguments)}var t=im.defaultAxisRangePadding=0;function n(r){return r===void 0&&(r=t),typeof r=="number"?{start:r,end:r}:e({start:t,end:t},r)}return im}var iJ;function PSt(){if(iJ)return m_;iJ=1,m_.__esModule=!0,m_.default=g,m(bO());var e=m(dh()),t=m(Vv()),n=kF,r=TF,s=m(MSt()),a=m(kSt()),o=m(TSt()),l=m(RSt()),c=m(px()),u=m(ISt()),d=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function m(y){return y&&y.__esModule?y:{default:y}}function p(){return p=Object.assign?Object.assign.bind():function(y){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var b in x)({}).hasOwnProperty.call(x,b)&&(y[b]=x[b])}return y},p.apply(null,arguments)}function h(y,v){if(y==null)return{};var x={};for(var b in y)if({}.hasOwnProperty.call(y,b)){if(v.includes(b))continue;x[b]=y[b]}return x}function g(y){var v=y.children,x=v===void 0?s.default:v,b=y.axisClassName,_=y.hideAxisLine,w=_===void 0?!1:_,C=y.hideTicks,S=C===void 0?!1:C,E=y.hideZero,M=E===void 0?!1:E,k=y.innerRef,T=y.left,j=T===void 0?0:T,R=y.numTicks,O=R===void 0?10:R,P=y.orientation,N=P===void 0?c.default.bottom:P,I=y.rangePadding,D=I===void 0?0:I,F=y.scale,B=y.tickFormat,V=y.tickLength,$=V===void 0?8:V,G=y.tickValues,X=y.top,Y=X===void 0?0:X,W=h(y,d),H=B??(0,o.default)(F),Z=N===c.default.left,re=N===c.default.top,q=re||N===c.default.bottom,J=(0,a.default)(F),te=Z||re?-1:1,se=F.range(),de=(0,u.default)(D),fe=(0,l.default)({x:Number(se[0])+.5-de.start,y:0},q),ve=(0,l.default)({x:Number(se[se.length-1])+.5+de.end,y:0},q),ue=(G??(0,r.getTicks)(F,O)).filter(function(be){return!M||be!==0&&be!=="0"}).map(function(be,Se){return{value:be,index:Se}}),ie=ue.map(function(be){var Se=be.value,Ce=be.index,ke=(0,r.coerceNumber)(J(Se));return{value:Se,index:Ce,from:(0,l.default)({x:ke,y:0},q),to:(0,l.default)({x:ke,y:$*te},q),formattedValue:H(Se,Ce,ue)}});return e.default.createElement(n.Group,{className:(0,t.default)("visx-axis",b),innerRef:k,top:Y,left:j},x(p({},W,{axisFromPoint:fe,axisToPoint:ve,hideAxisLine:w,hideTicks:S,hideZero:M,horizontal:q,numTicks:O,orientation:N,rangePadding:D,scale:F,tickFormat:H,tickLength:$,tickPosition:J,tickSign:te,ticks:ie})))}return m_}var OSt=PSt();const LSt=io(OSt);var DSt=["animationTrajectory","tickComponent"];function yC(){return yC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yC.apply(null,arguments)}function FSt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function USt(e){var t=e.animationTrajectory,n=e.tickComponent,r=FSt(e,DSt),s=f.useMemo(function(){return function(o){return A.createElement(CSt,yC({},o,{tickComponent:n,animationTrajectory:t}))}},[t,n]);return A.createElement(LSt,yC({},r,{ticksComponent:s}))}var b_={},__={},lJ;function k_e(){if(lJ)return __;lJ=1,__.__esModule=!0,__.default=o;var e=r(dh()),t=r(Vv()),n=["from","to","fill","className","innerRef"];function r(l){return l&&l.__esModule?l:{default:l}}function s(){return s=Object.assign?Object.assign.bind():function(l){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d])}return l},s.apply(this,arguments)}function a(l,c){if(l==null)return{};var u={},d=Object.keys(l),m,p;for(p=0;p<d.length;p++)m=d[p],!(c.indexOf(m)>=0)&&(u[m]=l[m]);return u}function o(l){var c=l.from,u=c===void 0?{x:0,y:0}:c,d=l.to,m=d===void 0?{x:1,y:1}:d,p=l.fill,h=p===void 0?"transparent":p,g=l.className,y=l.innerRef,v=a(l,n),x=u.x===m.x||u.y===m.y;return e.default.createElement("line",s({ref:y,className:(0,t.default)("visx-line",g),x1:u.x,y1:u.y,x2:m.x,y2:m.y,fill:h,shapeRendering:x?"crispEdges":"auto"},v))}return __}var w_={},cJ;function BSt(){if(cJ)return w_;cJ=1,w_.__esModule=!0,w_.default=e;function e(t){return"bandwidth"in t?t.bandwidth():0}return w_}var uJ;function VSt(){if(uJ)return b_;uJ=1,b_.__esModule=!0,b_.default=p;var e=u(bO()),t=u(dh()),n=u(Vv()),r=u(k_e()),s=kF,a=M_e,o=TF,l=u(BSt()),c=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function u(h){return h&&h.__esModule?h:{default:h}}function d(){return d=Object.assign?Object.assign.bind():function(h){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(h[v]=y[v])}return h},d.apply(this,arguments)}function m(h,g){if(h==null)return{};var y={},v=Object.keys(h),x,b;for(b=0;b<v.length;b++)x=v[b],!(g.indexOf(x)>=0)&&(y[x]=h[x]);return y}function p(h){var g=h.top,y=g===void 0?0:g,v=h.left,x=v===void 0?0:v,b=h.scale,_=h.width,w=h.stroke,C=w===void 0?"#eaf0f6":w,S=h.strokeWidth,E=S===void 0?1:S,M=h.strokeDasharray,k=h.className,T=h.children,j=h.numTicks,R=j===void 0?10:j,O=h.lineStyle,P=h.offset,N=h.tickValues,I=m(h,c),D=N??(0,o.getTicks)(b,R),F=(P??0)+(0,l.default)(b)/2,B=D.map(function(V,$){var G,X=((G=(0,o.coerceNumber)(b(V)))!=null?G:0)+F;return{index:$,from:new a.Point({x:0,y:X}),to:new a.Point({x:_,y:X})}});return t.default.createElement(s.Group,{className:(0,n.default)("visx-rows",k),top:y,left:x},T?T({lines:B}):B.map(function(V){var $=V.from,G=V.to,X=V.index;return t.default.createElement(r.default,d({key:"row-line-"+X,from:$,to:G,stroke:C,strokeWidth:E,strokeDasharray:M,style:O},I))}))}return p.propTypes={tickValues:e.default.array,width:e.default.number.isRequired},b_}var WSt=VSt();const $St=io(WSt);var HSt=["scale","lines","animationTrajectory","animateXOrY","lineKey","lineStyle"];function vC(){return vC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vC.apply(null,arguments)}function zSt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function T_e(e){var t=e.scale,n=e.lines,r=e.animationTrajectory,s=e.animateXOrY,a=e.lineKey,o=e.lineStyle,l=zSt(e,HSt),c=Oye(n,vC({},C_e({scale:t,animateXOrY:s,animationTrajectory:r}),{key:a}));return A.createElement(A.Fragment,null,c(function(u,d,m){var p=u.fromX,h=u.toX,g=u.fromY,y=u.toY,v=u.opacity,x=m.key;return A.createElement(l0.line,vC({key:x,x1:p,x2:h,y1:g,y2:y,strokeOpacity:v,style:o},l))}))}T_e.propTypes={lineKey:Le.func.isRequired};var GSt=["scale","width","numTicks","tickValues","offset","className","animationTrajectory","top","left"];function O9(){return O9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O9.apply(null,arguments)}function qSt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function N_e(e){var t=e.scale,n=e.width,r=e.numTicks,s=e.tickValues,a=e.offset,o=e.className,l=e.animationTrajectory,c=e.top,u=e.left,d=qSt(e,GSt);return A.createElement($St,{scale:t,width:n,numTicks:r,tickValues:s,className:o,top:c,left:u,offset:a},function(m){var p=m.lines;return A.createElement(T_e,O9({scale:t,lines:p,animationTrajectory:l,animateXOrY:"y",lineKey:function(g){var y,v;return"row-"+((y=g==null||(v=g.from)==null?void 0:v.y)!=null?y:"")+"-"+g.index}},d))})}var qs={top:"top",left:"left",bottom:"bottom"};function KSt(e){var t=e.labelOffset,n=e.labelProps,r=e.orientation,s=e.range,a=e.tickLabelFontSize,o=e.tickLength,l=r===qs.left||r===qs.top?-1:1,c,u,d;if(r===qs.top||r===qs.bottom){var m=r===qs.bottom&&typeof n.fontSize=="number"?n.fontSize:0;c=(Number(s[0])+Number(s[s.length-1]))/2,u=l*(o+t+a+m)}else c=l*((Number(s[0])+Number(s[s.length-1]))/2),u=-(o+t),d="rotate("+l*90+")";return{x:c,y:u,transform:d}}function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g0.apply(null,arguments)}function YSt(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.tickClassName,a=e.tickComponent,o=e.tickLabelProps,l=e.tickStroke,c=l===void 0?"#222":l,u=e.tickTransform,d=e.ticks,m=e.strokeWidth,p=e.tickLineProps;return d.map(function(h){var g,y=h.value,v=h.index,x=h.from,b=h.to,_=h.formattedValue,w=(g=o[v])!=null?g:{},C=Math.max(10,typeof w.fontSize=="number"&&w.fontSize||0),S=b.y+(n&&r!==qs.top?C:0);return A.createElement(sa,{key:"visx-tick-"+y+"-"+v,className:U("visx-axis-tick",s),transform:u},!t&&A.createElement(t3,g0({from:x,to:b,stroke:c,strokeWidth:m,strokeLinecap:"square"},p)),a?a(g0({},w,{x:b.x,y:S,formattedValue:_})):A.createElement(q3,g0({x:b.x,y:S},w),_))})}function y0(){return y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y0.apply(null,arguments)}var dJ={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function QSt(e){var t=e.axisFromPoint,n=e.axisLineClassName,r=e.axisToPoint,s=e.hideAxisLine,a=e.hideTicks,o=e.horizontal,l=e.label,c=l===void 0?"":l,u=e.labelClassName,d=e.labelOffset,m=d===void 0?14:d,p=e.labelProps,h=e.orientation,g=h===void 0?qs.bottom:h,y=e.scale,v=e.stroke,x=v===void 0?"#222":v,b=e.strokeDasharray,_=e.strokeWidth,w=_===void 0?1:_,C=e.tickClassName,S=e.tickComponent,E=e.tickLineProps,M=e.tickLabelProps,k=e.tickLength,T=k===void 0?8:k,j=e.tickStroke,R=j===void 0?"#222":j,O=e.tickTransform,P=e.ticks,N=e.ticksComponent,I=N===void 0?YSt:N,D=y0({},dJ,p),F=y0({},dJ,typeof M=="object"?M:null),B=P.map(function($){var G=$.value,X=$.index;return typeof M=="function"?M(G,X,P):F}),V=Math.max.apply(Math,[10].concat(B.map(function($){return typeof $.fontSize=="number"?$.fontSize:0})));return A.createElement(A.Fragment,null,I({hideTicks:a,horizontal:o,orientation:g,scale:y,tickClassName:C,tickComponent:S,tickLabelProps:B,tickStroke:R,tickTransform:O,ticks:P,strokeWidth:w,tickLineProps:E}),!s&&A.createElement(t3,{className:U("visx-axis-line",n),from:t,to:r,stroke:x,strokeWidth:w,strokeDasharray:b}),c&&A.createElement(q3,y0({className:U("visx-axis-label",u)},KSt({labelOffset:m,labelProps:D,orientation:g,range:y.range(),tickLabelFontSize:V,tickLength:T}),D),c))}function XSt(e,t){t===void 0&&(t="center");var n=e;if(t!=="start"&&"bandwidth"in n){var r=n.bandwidth();return t==="center"&&(r/=2),n.round()&&(r=Math.round(r)),function(s){var a=n(s);return typeof a=="number"?a+r:a}}return e}function ZSt(e){var t=e;return"tickFormat"in t?t.tickFormat():Mge}function C_(e,t){var n=e.x,r=e.y;return new Mu(t?{x:n,y:r}:{x:r,y:n})}function L9(){return L9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L9.apply(null,arguments)}var k6=0;function JSt(e){return e===void 0&&(e=k6),typeof e=="number"?{start:e,end:e}:L9({start:k6,end:k6},e)}var eEt=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function D9(){return D9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D9.apply(null,arguments)}function tEt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function xC(e){var t=e.children,n=t===void 0?QSt:t,r=e.axisClassName,s=e.hideAxisLine,a=s===void 0?!1:s,o=e.hideTicks,l=o===void 0?!1:o,c=e.hideZero,u=c===void 0?!1:c,d=e.innerRef,m=e.left,p=m===void 0?0:m,h=e.numTicks,g=h===void 0?10:h,y=e.orientation,v=y===void 0?qs.bottom:y,x=e.rangePadding,b=x===void 0?0:x,_=e.scale,w=e.tickFormat,C=e.tickLength,S=C===void 0?8:C,E=e.tickValues,M=e.top,k=M===void 0?0:M,T=tEt(e,eEt),j=w??ZSt(_),R=v===qs.left,O=v===qs.top,P=O||v===qs.bottom,N=XSt(_),I=R||O?-1:1,D=_.range(),F=JSt(b),B=C_({x:Number(D[0])+.5-F.start,y:0},P),V=C_({x:Number(D[D.length-1])+.5+F.end,y:0},P),$=(E??RL(_,g)).filter(function(X){return!u||X!==0&&X!=="0"}).map(function(X,Y){return{value:X,index:Y}}),G=$.map(function(X){var Y=X.value,W=X.index,H=XE(N(Y));return{value:Y,index:W,from:C_({x:H,y:0},P),to:C_({x:H,y:S*I},P),formattedValue:j(Y,W,$)}});return A.createElement(sa,{className:U("visx-axis",r),innerRef:d,top:k,left:p},n(D9({},T,{axisFromPoint:B,axisToPoint:V,hideAxisLine:a,hideTicks:l,hideZero:u,horizontal:P,numTicks:g,orientation:v,rangePadding:b,scale:_,tickFormat:j,tickLength:S,tickPosition:N,tickSign:I,ticks:G})))}var nEt=k_e();const rEt=io(nEt);function sEt(e){return"bandwidth"in e?e.bandwidth():0}var aEt=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function F9(){return F9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F9.apply(this,arguments)}function oEt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function hx(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,o=e.width,l=e.stroke,c=l===void 0?"#eaf0f6":l,u=e.strokeWidth,d=u===void 0?1:u,m=e.strokeDasharray,p=e.className,h=e.children,g=e.numTicks,y=g===void 0?10:g,v=e.lineStyle,x=e.offset,b=e.tickValues,_=oEt(e,aEt),w=b??RL(a,y),C=(x??0)+sEt(a)/2,S=w.map(function(E,M){var k,T=((k=XE(a(E)))!=null?k:0)+C;return{index:M,from:new Mu({x:0,y:T}),to:new Mu({x:o,y:T})}});return A.createElement(sa,{className:U("visx-rows",p),top:n,left:s},h?h({lines:S}):S.map(function(E){var M=E.from,k=E.to,T=E.index;return A.createElement(rEt,F9({key:"row-line-"+T,from:M,to:k,stroke:c,strokeWidth:d,strokeDasharray:m,style:v},_))}))}hx.propTypes={tickValues:Le.array,width:Le.number.isRequired};function fJ({ref:e}){const t=e.current,[n,r,s]=f.useMemo(()=>{if(t){const a=t.querySelectorAll(".visx-axis-tick"),o=Array.from(a).map(l=>{const{width:c,height:u}=l.getBBox();return[c,u]});if(o.length){const l=Math.max(...o.map(u=>u[0])),c=Math.max(...o.map(u=>u[1]));return[l,c,o.length*l]}}return[0,0,0]},[t]);return f.useMemo(()=>({minRequiredWidth:s,maxLabelWidth:n,maxLabelHeight:r}),[r,n,s])}function K3(){const e=f.useRef(null),{maxLabelWidth:t,minRequiredWidth:n}=fJ({ref:e}),r=f.useRef(null),{maxLabelWidth:s}=fJ({ref:r});return f.useMemo(()=>({xAxisRef:e,yAxisRef:r,maxXLabelWidth:t,maxYLabelWidth:s,minXRequiredWidth:n}),[t,s,n])}const mJ=40,T6=e=>typeof e=="number";function Y3({config:e,innerWidth:t,innerHeight:n,maxXLabelWidth:r}){let s=Math.floor(t/(r+mJ));T6(e?.x?.numTicks)&&T6(s)&&(s=Math.min(s,e.x.numTicks)),r||(s=void 0);let a=Math.floor(n/mJ);return T6(e?.y?.numTicks)&&(a=Math.min(a,e.y.numTicks)),{xTiltTicks:!1,xNumTicks:s,yNumTicks:a}}const A_e="fill-quiet font-mono text-xs font-bold truncate max-w-[100px]",pJ="fill-quiet text-xs font-semibold font-sans",iEt=(e,t,n)=>n?{transform:"rotate(-10deg)",transformOrigin:`${e}px ${t}px`,textAnchor:"end"}:{textAnchor:"middle"};function lEt(e){const{shouldTilt:t,x:n,y:r,formattedValue:s,style:a,className:o,...l}=e;return i.jsx("text",{...l,x:n,y:r,dy:"2px",className:U(A_e,o),style:{...a,...iEt(n,r,t)},children:s})}const gx=A.memo(function(t){const{margin:n,height:r,width:s,xScale:a,yScale:o,xFormat:l,yFormat:c,yNumTicks:u,xNumTicks:d,xTickValues:m,yTickValues:p,xTiltTicks:h,animated:g,tickColor:y,axisColor:v,xAxisRef:x,yAxisRef:b,xAxisLabel:_,yAxisLabel:w,gridDashed:C=!1,gridStrokeWidth:S=.5}=t,E=ls(),M=g?USt:xC,k=g?N_e:hx,T=f.useCallback(R=>i.jsx(lEt,{...R,shouldTilt:h}),[h]),j=f.useMemo(()=>({className:A_e,textAnchor:"start",dx:"0.75em",dy:"-0.25em"}),[]);return i.jsxs(i.Fragment,{children:[i.jsx(xC,{orientation:qs.bottom,top:r-n.bottom,scale:a,stroke:v,hideAxisLine:!0,label:_,labelClassName:pJ,tickFormat:l,numTicks:d,tickStroke:y,innerRef:x,tickValues:m,tickComponent:T,axisClassName:"select-none"}),i.jsx(M,{orientation:qs.left,left:n.left,hideAxisLine:!0,label:w,labelOffset:7.5,labelClassName:pJ,scale:o,tickFormat:c,stroke:v,tickStroke:y,hideTicks:!0,innerRef:b,tickLabelProps:j,numTicks:u,tickValues:p,axisClassName:"select-none"}),E&&i.jsx(k,{left:n.left,scale:o,width:s-n.right-n.left*2,strokeDasharray:C?"8,4":void 0,stroke:v,strokeWidth:S,numTicks:u})]})});gx.displayName="Axes";const cEt=G1("%b %d"),uEt=G1("%b"),dEt=G1("%Y");function fEt(e){return e?(e=new Date(e),(z1(e)<e?cEt:hi(e)<e?uEt:dEt)(e)):""}const aWt=(e,t,n)=>{if(!e&&(e!==0||!n?.renderZero))return"";const s=t&&/^[A-Z]{3}$/.test(t)?t:void 0,a=e%1===0&&!n?.alwaysShowMinor||n?.roundToMajor?0:2;let o=n?.roundToMajor?0:2;if(e>0&&e<1){const c=Math.abs(e).toExponential();o=Math.abs(parseInt(c.split("e")[1]))+1}const l=Intl.NumberFormat(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:1,maximumFractionDigits:1,currencyDisplay:n?.currencyDisplay??"narrowSymbol"});return n?.truncate&&e>=1e6?`${l.format(e/1e6)}M`:n?.truncate&&e>=1e3?`${l.format(e/1e3)}k`:e.toLocaleString(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:a,maximumFractionDigits:o,currencyDisplay:n?.currencyDisplay??"narrowSymbol"})};function mEt(e,t){const n=e>1?0:2;return e.toLocaleString(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:n})}const pEt={time:e=>new Date(e),linear:e=>+e,band:e=>e,ordinal:e=>e,log:e=>+e,point:e=>e};function N6(e,t){if(!e)return r=>null;if(t===void 0)return r=>r[e];const n=pEt[t]||(r=>r);return r=>n(r[e])}function lm(e,t){return typeof t=="function"?t(e):typeof t=="string"?t.replace("%s",e):e instanceof Date?fEt(e):String(e)}const eo={time:q1,linear:Bp,band:TL,log:AL,point:NL,ordinal:jL},hJ=["band","ordinal","point"];function hEt({width:e,height:t,margin:n,hasAxis:r,maxYLabelWidth:s=0}){const a=n.left+(r?s+15:0),o=e-n.right-n.left,l=t-n.bottom,c=n.top,u=[a,o],d=[l,c],m=Math.max(0,o-a);return{innerHeight:Math.max(0,l-c),innerWidth:m,xRange:u,yRange:d}}function oWt(e,t,n){const r=[];let s="";return e.forEach(a=>{const o=t(a),l=o.toISOString().slice(0,10);l!==s&&(s=l,r.push(o))}),r.filter((a,o)=>o%n===0)}function Q3(e){const{colorScheme:t}=Pr(),n=ls(),r=f.useMemo(()=>n?t==="dark":!1,[t,n]);return f.useMemo(()=>({...r?Jgt:eyt,...e}),[r,e])}function X3(e){return f.useMemo(()=>e.data.map(n=>({__key:Math.random(),...n})),[e.data])}function Z3({config:e}){const t=f.useMemo(()=>N6(e.x.accessor,e.x.scale),[e.x]),n=f.useMemo(()=>N6(e.y.accessor,e.y.scale),[e.y]),r=f.useMemo(()=>N6(e.z?.accessor,e.z?.scale),[e.z]);return f.useMemo(()=>({xGet:t,yGet:n,zGet:r}),[t,n,r])}function J3({config:e}){const t=f.useCallback(l=>lm(l,e.x.format),[e.x]),n=f.useCallback(l=>lm(l,e.y.format),[e.y]),r=f.useCallback(l=>lm(l,e.z?.format),[e.z]),s=f.useCallback(l=>lm(l,e.x.tooltipFormat??e.x.format),[e.x]),a=f.useCallback(l=>lm(l,e.y.tooltipFormat??e.y.format),[e.y]),o=f.useCallback(l=>lm(l,e.z?.tooltipFormat??e.z?.format),[e.z]);return f.useMemo(()=>({xFormat:t,yFormat:n,zFormat:r,xTooltipFormat:s,yTooltipFormat:a,zTooltipFormat:o}),[t,n,r,s,a,o])}function yx({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}){return f.useMemo(()=>hEt({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}),[e,t,n,r,s])}function NF({config:e,xGet:t,yGet:n,data:r,endTime:s,previousClose:a}){const o=f.useMemo(()=>{if(hJ.includes(e.x.scale))return[...new Set(r.map(t))];const u=Jl(r,t);return e.x.tickValues?Jl([...e.x.tickValues,...u]):u},[e.x.tickValues,e.x.scale,r,t]),l=f.useMemo(()=>{if(hJ.includes(e.y.scale))return[...new Set(r.map(n))];const d=[...Jl(r,n)];a!==void 0&&d.push(a),e.y.tickValues&&d.push(...e.y.tickValues);const[m,p]=Jl(d),g=(p-m)*.05;return[m-g,p+g]},[e.y.tickValues,e.y.scale,r,n,a]),c=f.useMemo(()=>{if(!s||!o||o.length<2||e.x.scale!=="time")return o;const[u,d]=o;return new Date(d).toDateString()!==s.toDateString()?o:Date.now()<s.getTime()&&d<s?[u,s]:o},[o,s,e.x.scale]);return f.useMemo(()=>({xDomain:c,yDomain:l}),[c,l])}function j_e(e){const[t,n]=f.useState({width:0,height:0,resizing:!1});return f.useEffect(()=>{let r;const s=()=>{e.current&&(clearTimeout(r),n(a=>{const o=e.current?.offsetWidth??0,l=e.current?.offsetHeight??0,c=Math.round(a.width)!==Math.round(o);return{width:o,height:l,resizing:c}}),r=setTimeout(()=>{n(a=>({...a,resizing:!1}))},500))};return s(),window.addEventListener("resize",s),()=>{clearTimeout(r),window.removeEventListener("resize",s)}},[e]),t}const R_e=A.memo(({color:e})=>i.jsx("div",{className:"size-[14px] rounded-full",style:{backgroundColor:e}}));R_e.displayName="Tile";const vx=A.memo(({entries:e})=>i.jsx("ol",{className:"my-sm gap-x-md gap-y-xs flex flex-wrap",children:e.map(({key:t,color:n})=>i.jsxs("li",{className:"gap-xs fade-in flex items-center transition-all duration-200",children:[i.jsx(R_e,{color:n}),i.jsx(L,{variant:"tiny",color:"light",children:String(t)})]},String(t)))}));vx.displayName="Legend";const hg=A.memo(({width:e,height:t,children:n,ref:r})=>{const s=f.useMemo(()=>({position:"relative",height:t,overflow:"visible"}),[t]);return i.jsx(z,{style:s,children:i.jsx("svg",{width:e,ref:r,height:t,style:{position:"absolute",left:0,top:0,overflow:"visible"},children:n})})});hg.displayName="Svg";function gEt(e){return!!e&&e instanceof Element}function yEt(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function vEt(e){return!!e&&"createSVGPoint"in e}function xEt(e){return!!e&&"getScreenCTM"in e}function bEt(e){return!!e&&"changedTouches"in e}function _Et(e){return!!e&&"clientX"in e}function wEt(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v0.apply(this,arguments)}var A6={x:0,y:0};function CEt(e){if(!e)return v0({},A6);if(bEt(e))return e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:v0({},A6);if(_Et(e))return{x:e.clientX,y:e.clientY};var t=e?.target,n=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return n?{x:n.x+n.width/2,y:n.y+n.height/2}:v0({},A6)}function gJ(e,t){if(!e||!t)return null;var n=CEt(t),r=yEt(e)?e.ownerSVGElement:e,s=xEt(r)?r.getScreenCTM():null;if(vEt(r)&&s){var a=r.createSVGPoint();return a.x=n.x,a.y=n.y,a=a.matrixTransform(s.inverse()),new Mu({x:a.x,y:a.y})}var o=e.getBoundingClientRect();return new Mu({x:n.x-o.left-e.clientLeft,y:n.y-o.top-e.clientTop})}function SEt(e,t){if(gEt(e)&&t)return gJ(e,t);if(wEt(e)){var n=e,r=n.target;if(r)return gJ(r,n)}return null}var EEt=["tooltipOpen"];function MEt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function bC(){return bC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bC.apply(null,arguments)}function kEt(e){var t=f.useState(bC({tooltipOpen:!1},e)),n=t[0],r=t[1],s=f.useCallback(function(o){return r(typeof o=="function"?function(l){l.tooltipOpen;var c=MEt(l,EEt);return bC({},o(c),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:o.tooltipLeft,tooltipTop:o.tooltipTop,tooltipData:o.tooltipData})},[r]),a=f.useCallback(function(){return r({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[r]);return{tooltipOpen:n.tooltipOpen,tooltipLeft:n.tooltipLeft,tooltipTop:n.tooltipTop,tooltipData:n.tooltipData,updateTooltip:r,showTooltip:s,hideTooltip:a}}var TEt=["className","top","left","offsetLeft","offsetTop","style","children","unstyled","applyPositionStyle"];function _C(){return _C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_C.apply(null,arguments)}function NEt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var I_e={position:"absolute",backgroundColor:"white",color:"#666666",padding:".3rem .5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"},AF=A.forwardRef(function(e,t){var n=e.className,r=e.top,s=e.left,a=e.offsetLeft,o=a===void 0?10:a,l=e.offsetTop,c=l===void 0?10:l,u=e.style,d=u===void 0?I_e:u,m=e.children,p=e.unstyled,h=p===void 0?!1:p,g=e.applyPositionStyle,y=g===void 0?!1:g,v=NEt(e,TEt);return A.createElement("div",_C({ref:t,className:U("visx-tooltip",n),style:_C({top:r==null||c==null?r:r+c,left:s==null||o==null?s:s+o},y&&{position:"absolute"},!h&&d)},v),m)});AF.propTypes={children:Le.node,className:Le.string,left:Le.number,offsetLeft:Le.number,offsetTop:Le.number,top:Le.number,applyPositionStyle:Le.bool,unstyled:Le.bool};AF.displayName="Tooltip";function U9(){return U9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U9.apply(null,arguments)}function AEt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B9(e,t)}function B9(e,t){return B9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},B9(e,t)}var yJ={top:0,right:0,bottom:0,left:0,width:0,height:0};function jEt(e){var t;return t=function(n){function r(a){var o;return o=n.call(this,a)||this,o.state={rect:void 0,parentRect:void 0},o.nodeRef=A.createRef(),o.getRects=o.getRects.bind(o),o}AEt(r,n);var s=r.prototype;return s.componentDidMount=function(){var o,l=this;this.node=(o=this.nodeRef)!=null&&o.current?this.nodeRef.current:hte.findDOMNode(this),this.setState(function(){return l.getRects()})},s.getRects=function(){if(!this.node)return this.state;var o=this.node,l=o.parentNode,c=o.getBoundingClientRect?o.getBoundingClientRect():yJ,u=l!=null&&l.getBoundingClientRect?l.getBoundingClientRect():yJ;return{rect:c,parentRect:u}},s.render=function(){return A.createElement(e,U9({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},r}(A.PureComponent),t.displayName="withBoundingRects("+(e.displayName||"")+")",t}var P_e=f.createContext({isFlippedVertically:!1,isFlippedHorizontally:!1}),REt=P_e.Provider;P_e.Consumer;var IEt=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function wC(){return wC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wC.apply(null,arguments)}function PEt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function O_e(e){var t=e.children;e.getRects;var n=e.left,r=n===void 0?0:n,s=e.offsetLeft,a=s===void 0?10:s,o=e.offsetTop,l=o===void 0?10:o,c=e.parentRect,u=e.rect,d=e.style,m=d===void 0?I_e:d,p=e.top,h=p===void 0?0:p,g=e.unstyled,y=g===void 0?!1:g,v=e.nodeRef,x=PEt(e,IEt),b,_=!1,w=!1;if(u&&c){var C=r,S=h;if(c.width){var E=C+a+u.width-c.width,M=u.width-C-a;_=E>0&&E>M}else{var k=C+a+u.width-window.innerWidth,T=u.width-C-a;_=k>0&&k>T}if(c.height){var j=S+l+u.height-c.height,R=u.height-S-l;w=j>0&&j>R}else w=S+l+u.height>window.innerHeight;C=_?C-u.width-a:C+a,S=w?S-u.height-l:S+l,C=Math.round(C),S=Math.round(S),b="translate("+C+"px, "+S+"px)"}return A.createElement(AF,wC({ref:v,style:wC({left:0,top:0,transform:b},!y&&m)},x),A.createElement(REt,{value:{isFlippedVertically:!w,isFlippedHorizontally:!_}},t))}O_e.propTypes={nodeRef:Le.oneOfType([Le.string,Le.func,Le.object])};const OEt=jEt(O_e);function vJ(e){return function(){return e}}function LEt(e){return e[0]}function DEt(e){return e[1]}function CC(){this._=null}function e5(e){e.U=e.C=e.L=e.R=e.P=e.N=null}CC.prototype={constructor:CC,insert:function(e,t){var n,r,s;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=xJ(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(s=r.R,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.R&&(ly(this,n),e=n,n=e.U),n.C=!1,r.C=!0,cy(this,r))):(s=r.L,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.L&&(cy(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ly(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,s=e.R,a,o;if(r?s?a=xJ(s):a=r:a=s,t?t.L===e?t.L=a:t.R=a:this._=a,r&&s?(o=a.C,a.C=e.C,a.L=r,r.U=a,a!==s?(t=a.U,a.U=e.U,e=a.R,t.L=e,a.R=s,s.U=a):(a.U=t,t=a,e=a.R)):(o=e.C,e=a),e&&(e.U=t),!o){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,ly(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,cy(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,ly(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,cy(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,ly(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,cy(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function ly(e,t){var n=t,r=t.R,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function cy(e,t){var n=t,r=t.L,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function xJ(e){for(;e.L;)e=e.L;return e}function Ay(e,t,n,r){var s=[null,null],a=ks.push(s)-1;return s.left=e,s.right=t,n&&SC(s,e,t,n),r&&SC(s,t,e,r),Ka[e.index].halfedges.push(a),Ka[t.index].halfedges.push(a),s}function uy(e,t,n){var r=[t,n];return r.left=e,r}function SC(e,t,n,r){!e[0]&&!e[1]?(e[0]=r,e.left=t,e.right=n):e.left===n?e[1]=r:e[0]=r}function FEt(e,t,n,r,s){var a=e[0],o=e[1],l=a[0],c=a[1],u=o[0],d=o[1],m=0,p=1,h=u-l,g=d-c,y;if(y=t-l,!(!h&&y>0)){if(y/=h,h<0){if(y<m)return;y<p&&(p=y)}else if(h>0){if(y>p)return;y>m&&(m=y)}if(y=r-l,!(!h&&y<0)){if(y/=h,h<0){if(y>p)return;y>m&&(m=y)}else if(h>0){if(y<m)return;y<p&&(p=y)}if(y=n-c,!(!g&&y>0)){if(y/=g,g<0){if(y<m)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>m&&(m=y)}if(y=s-c,!(!g&&y<0)){if(y/=g,g<0){if(y>p)return;y>m&&(m=y)}else if(g>0){if(y<m)return;y<p&&(p=y)}return!(m>0)&&!(p<1)||(m>0&&(e[0]=[l+m*h,c+m*g]),p<1&&(e[1]=[l+p*h,c+p*g])),!0}}}}}function UEt(e,t,n,r,s){var a=e[1];if(a)return!0;var o=e[0],l=e.left,c=e.right,u=l[0],d=l[1],m=c[0],p=c[1],h=(u+m)/2,g=(d+p)/2,y,v;if(p===d){if(h<t||h>=r)return;if(u>m){if(!o)o=[h,n];else if(o[1]>=s)return;a=[h,s]}else{if(!o)o=[h,s];else if(o[1]<n)return;a=[h,n]}}else if(y=(u-m)/(p-d),v=g-y*h,y<-1||y>1)if(u>m){if(!o)o=[(n-v)/y,n];else if(o[1]>=s)return;a=[(s-v)/y,s]}else{if(!o)o=[(s-v)/y,s];else if(o[1]<n)return;a=[(n-v)/y,n]}else if(d<p){if(!o)o=[t,y*t+v];else if(o[0]>=r)return;a=[r,y*r+v]}else{if(!o)o=[r,y*r+v];else if(o[0]<t)return;a=[t,y*t+v]}return e[0]=o,e[1]=a,!0}function BEt(e,t,n,r){for(var s=ks.length,a;s--;)(!UEt(a=ks[s],e,t,n,r)||!FEt(a,e,t,n,r)||!(Math.abs(a[0][0]-a[1][0])>zn||Math.abs(a[0][1]-a[1][1])>zn))&&delete ks[s]}function VEt(e){return Ka[e.index]={site:e,halfedges:[]}}function WEt(e,t){var n=e.site,r=t.left,s=t.right;return n===s&&(s=r,r=n),s?Math.atan2(s[1]-r[1],s[0]-r[0]):(n===r?(r=t[1],s=t[0]):(r=t[0],s=t[1]),Math.atan2(r[0]-s[0],s[1]-r[1]))}function L_e(e,t){return t[+(t.left!==e.site)]}function $Et(e,t){return t[+(t.left===e.site)]}function HEt(){for(var e=0,t=Ka.length,n,r,s,a;e<t;++e)if((n=Ka[e])&&(a=(r=n.halfedges).length)){var o=new Array(a),l=new Array(a);for(s=0;s<a;++s)o[s]=s,l[s]=WEt(n,ks[r[s]]);for(o.sort(function(c,u){return l[u]-l[c]}),s=0;s<a;++s)l[s]=r[o[s]];for(s=0;s<a;++s)r[s]=l[s]}}function zEt(e,t,n,r){var s=Ka.length,a,o,l,c,u,d,m,p,h,g,y,v,x=!0;for(a=0;a<s;++a)if(o=Ka[a]){for(l=o.site,u=o.halfedges,c=u.length;c--;)ks[u[c]]||u.splice(c,1);for(c=0,d=u.length;c<d;)g=$Et(o,ks[u[c]]),y=g[0],v=g[1],m=L_e(o,ks[u[++c%d]]),p=m[0],h=m[1],(Math.abs(y-p)>zn||Math.abs(v-h)>zn)&&(u.splice(c,0,ks.push(uy(l,g,Math.abs(y-e)<zn&&r-v>zn?[e,Math.abs(p-e)<zn?h:r]:Math.abs(v-r)<zn&&n-y>zn?[Math.abs(h-r)<zn?p:n,r]:Math.abs(y-n)<zn&&v-t>zn?[n,Math.abs(p-n)<zn?h:t]:Math.abs(v-t)<zn&&y-e>zn?[Math.abs(h-t)<zn?p:e,t]:null))-1),++d);d&&(x=!1)}if(x){var b,_,w,C=1/0;for(a=0,x=null;a<s;++a)(o=Ka[a])&&(l=o.site,b=l[0]-e,_=l[1]-t,w=b*b+_*_,w<C&&(C=w,x=o));if(x){var S=[e,t],E=[e,r],M=[n,r],k=[n,t];x.halfedges.push(ks.push(uy(l=x.site,S,E))-1,ks.push(uy(l,E,M))-1,ks.push(uy(l,M,k))-1,ks.push(uy(l,k,S))-1)}}for(a=0;a<s;++a)(o=Ka[a])&&(o.halfedges.length||delete Ka[a])}var D_e=[],jF;function GEt(){e5(this),this.x=this.y=this.arc=this.site=this.cy=null}function Lm(e){var t=e.P,n=e.N;if(!(!t||!n)){var r=t.site,s=e.site,a=n.site;if(r!==a){var o=s[0],l=s[1],c=r[0]-o,u=r[1]-l,d=a[0]-o,m=a[1]-l,p=2*(c*m-u*d);if(!(p>=-1e-12)){var h=c*c+u*u,g=d*d+m*m,y=(m*h-u*g)/p,v=(c*g-d*h)/p,x=D_e.pop()||new GEt;x.arc=e,x.site=s,x.x=y+o,x.y=(x.cy=v+l)+Math.sqrt(y*y+v*v),e.circle=x;for(var b=null,_=Iv._;_;)if(x.y<_.y||x.y===_.y&&x.x<=_.x)if(_.L)_=_.L;else{b=_.P;break}else if(_.R)_=_.R;else{b=_;break}Iv.insert(b,x),b||(jF=x)}}}}function cp(e){var t=e.circle;t&&(t.P||(jF=t.N),Iv.remove(t),D_e.push(t),e5(t),e.circle=null)}var F_e=[];function qEt(){e5(this),this.edge=this.site=this.circle=null}function bJ(e){var t=F_e.pop()||new qEt;return t.site=e,t}function j6(e){cp(e),up.remove(e),F_e.push(e),e5(e)}function KEt(e){var t=e.circle,n=t.x,r=t.cy,s=[n,r],a=e.P,o=e.N,l=[e];j6(e);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<zn&&Math.abs(r-c.circle.cy)<zn;)a=c.P,l.unshift(c),j6(c),c=a;l.unshift(c),cp(c);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<zn&&Math.abs(r-u.circle.cy)<zn;)o=u.N,l.push(u),j6(u),u=o;l.push(u),cp(u);var d=l.length,m;for(m=1;m<d;++m)u=l[m],c=l[m-1],SC(u.edge,c.site,u.site,s);c=l[0],u=l[d-1],u.edge=Ay(c.site,u.site,null,s),Lm(c),Lm(u)}function YEt(e){for(var t=e[0],n=e[1],r,s,a,o,l=up._;l;)if(a=U_e(l,n)-t,a>zn)l=l.L;else if(o=t-QEt(l,n),o>zn){if(!l.R){r=l;break}l=l.R}else{a>-1e-6?(r=l.P,s=l):o>-1e-6?(r=l,s=l.N):r=s=l;break}VEt(e);var c=bJ(e);if(up.insert(r,c),!(!r&&!s)){if(r===s){cp(r),s=bJ(r.site),up.insert(c,s),c.edge=s.edge=Ay(r.site,c.site),Lm(r),Lm(s);return}if(!s){c.edge=Ay(r.site,c.site);return}cp(r),cp(s);var u=r.site,d=u[0],m=u[1],p=e[0]-d,h=e[1]-m,g=s.site,y=g[0]-d,v=g[1]-m,x=2*(p*v-h*y),b=p*p+h*h,_=y*y+v*v,w=[(v*b-h*_)/x+d,(p*_-y*b)/x+m];SC(s.edge,u,g,w),c.edge=Ay(u,e,null,w),s.edge=Ay(e,g,null,w),Lm(r),Lm(s)}}function U_e(e,t){var n=e.site,r=n[0],s=n[1],a=s-t;if(!a)return r;var o=e.P;if(!o)return-1/0;n=o.site;var l=n[0],c=n[1],u=c-t;if(!u)return l;var d=l-r,m=1/a-1/u,p=d/u;return m?(-p+Math.sqrt(p*p-2*m*(d*d/(-2*u)-c+u/2+s-a/2)))/m+r:(r+l)/2}function QEt(e,t){var n=e.N;if(n)return U_e(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var zn=1e-6,up,Ka,Iv,ks;function XEt(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function ZEt(e,t){return t[1]-e[1]||t[0]-e[0]}function V9(e,t){var n=e.sort(ZEt).pop(),r,s,a;for(ks=[],Ka=new Array(e.length),up=new CC,Iv=new CC;;)if(a=jF,n&&(!a||n[1]<a.y||n[1]===a.y&&n[0]<a.x))(n[0]!==r||n[1]!==s)&&(YEt(n),r=n[0],s=n[1]),n=e.pop();else if(a)KEt(a.arc);else break;if(HEt(),t){var o=+t[0][0],l=+t[0][1],c=+t[1][0],u=+t[1][1];BEt(o,l,c,u),zEt(o,l,c,u)}this.edges=ks,this.cells=Ka,up=Iv=ks=Ka=null}V9.prototype={constructor:V9,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(r){return L_e(t,e[r])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(l=(a=n.halfedges).length)for(var s=n.site,a,o=-1,l,c,u=t[a[l-1]],d=u.left===s?u.right:u.left;++o<l;)c=d,u=t[a[o]],d=u.left===s?u.right:u.left,c&&d&&r<c.index&&r<d.index&&XEt(s,c,d)<0&&e.push([s.data,c.data,d.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r=this,s,a=r._found||0,o=r.cells.length,l;!(l=r.cells[a]);)if(++a>=o)return null;var c=e-l.site[0],u=t-l.site[1],d=c*c+u*u;do l=r.cells[s=a],a=null,l.halfedges.forEach(function(m){var p=r.edges[m],h=p.left;if(!((h===l.site||!h)&&!(h=p.right))){var g=e-h[0],y=t-h[1],v=g*g+y*y;v<d&&(d=v,a=h.index)}});while(a!==null);return r._found=s,n==null||d<=n*n?l.site:null}};function JEt(){var e=LEt,t=DEt,n=null;function r(s){return new V9(s.map(function(a,o){var l=[Math.round(e(a,o,s)/zn)*zn,Math.round(t(a,o,s)/zn)*zn];return l.index=o,l.data=a,l}),n)}return r.polygons=function(s){return r(s).polygons()},r.links=function(s){return r(s).links()},r.triangles=function(s){return r(s).triangles()},r.x=function(s){return arguments.length?(e=typeof s=="function"?s:vJ(+s),r):e},r.y=function(s){return arguments.length?(t=typeof s=="function"?s:vJ(+s),r):t},r.extent=function(s){return arguments.length?(n=s==null?null:[[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(s){return arguments.length?(n=s==null?null:[[0,0],[+s[0],+s[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}var _J=1;function e3t(e){var t=e.width,n=t===void 0?0:t,r=e.height,s=r===void 0?0:r,a=e.x,o=e.y,l=JEt();return a&&l.x(a),o&&l.y(o),l.extent([[-1,-1],[n+_J,s+_J]]),l}function t5({data:e,innerHeight:t,innerWidth:n,xScale:r,yScale:s,xGet:a,yGet:o,voronoiRadius:l=void 0}){const{showTooltip:c,hideTooltip:u,tooltipData:d}=kEt(),m=f.useMemo(()=>e3t({width:n,height:t,x:g=>r(a(g)),y:g=>s(o(g))})(e),[e,n,t,r,s,a,o]),p=f.useCallback(h=>{const{x:g,y}=SEt(h)??{x:0,y:0},v=m.find(g,y,l);if(!v)return u();c({tooltipData:{localPoint:{x:g,y},voronoiSite:v}})},[c,u,m,l]);return f.useMemo(()=>({showTooltip:c,hideTooltip:u,handleTooltip:p,tooltipData:d}),[p,u,c,d])}const xx=A.memo(function({margin:t,height:n,width:r,tooltipHandle:s,tooltipHide:a,maxYLabelWidth:o}){const c=f.useCallback(()=>a(),[a]);return i.jsx(sg,{x:t.left+o-2.5,y:t.top,width:r-t.right-t.left*2-o+2.5*2,height:n-t.bottom-t.top,fill:"transparent",onTouchStart:s,onTouchMove:s,onMouseMove:s,onMouseLeave:c})});xx.displayName="TooltipListener";const Pv=A.memo(({cx:e,cy:t,color:n,r=3})=>i.jsx("circle",{cx:e,cy:t,r,fill:n,stroke:n,strokeWidth:1}));Pv.displayName="YDot";const ah=A.memo(({marginTop:e,tooltipLeft:t=0,innerHeight:n,color:r,strokeWidth:s=1,dotted:a=!1})=>{const o=f.useMemo(()=>({x:t,y:e}),[e,t]),l=f.useMemo(()=>({x:t,y:n+e}),[n,e,t]);return i.jsx("g",{children:i.jsx(t3,{from:o,to:l,stroke:r,strokeWidth:s,strokeDasharray:a?"4 4":void 0,pointerEvents:"none",className:"animate-in fade-in duration-300"})})});ah.displayName="YCrosshair";const R6=e=>e,B_e=A.memo(({entry:e,xFormat:t=R6,yFormat:n=R6,zFormat:r=R6,xGet:s,yGet:a,zGet:o})=>{const l=[{value:t(s(e))},{value:n(a(e))}];o&&l.unshift({value:r(o(e))});const c=l.filter(u=>u.value);return i.jsx(z,{children:c.map(({value:u},d)=>i.jsx(L,{variant:"tiny",className:"py-two",children:String(u)},d))})});B_e.displayName="InnerToolTip";const V_e=A.memo(({tooltipTop:e=0,tooltipLeft:t=0,children:n})=>{const r=f.useMemo(()=>({position:"absolute",pointerEvents:"none"}),[]);return i.jsx(OEt,{top:e,left:t,style:r,children:i.jsx(z,{variant:"background",className:"p-sm dark:border-inverse rounded-md border shadow-sm",children:n})})});V_e.displayName="Tooltip";const bx=A.memo(({tooltipTop:e,tooltipLeft:t,entry:n,data:r,config:s,UserToolTip:a,xFormat:o,yFormat:l,zFormat:c,zGet:u,xGet:d,yGet:m})=>i.jsx(V_e,{tooltipTop:e,tooltipLeft:t,children:a?i.jsx(a,{entry:n,config:s,data:r}):i.jsx(B_e,{entry:n,config:s,xFormat:o,yFormat:l,zFormat:c,zGet:u,xGet:d,yGet:m})}));bx.displayName="ComposedTooltip";const cm=0,W_e=A.memo(function(t){const{width:n,height:r,margin:s,config:a,tooltip:o,colors:l,axes:c=!0}=t,{colorSchema:u,axisColor:d,tickColor:m}=Q3(l),p=ls(),h=X3({data:t.data}),{xAxisRef:g,yAxisRef:y,maxYLabelWidth:v,maxXLabelWidth:x,minXRequiredWidth:b}=K3(),{innerHeight:_,innerWidth:w,xRange:C,yRange:S}=yx({width:n,height:r,margin:s,maxYLabelWidth:v,hasAxis:c}),{xNumTicks:E,yNumTicks:M,xTiltTicks:k}=Y3({config:a,innerWidth:w,innerHeight:_,maxXLabelWidth:x}),{xGet:T,yGet:j,zGet:R}=Z3({config:a}),{xFormat:O,yFormat:P,xTooltipFormat:N,yTooltipFormat:I,zTooltipFormat:D}=J3({config:a}),F=f.useMemo(()=>{if(!a?.z?.accessor)return[{key:"default",data:h}];const fe=a.z.accessor,ve=Q0(h,ue=>String(ue[fe]));return Object.entries(ve).map(([ue,ie])=>({key:ue,data:ie}))},[h,a.z]),B=F.length>1,V=B?F.map(({key:fe})=>fe):h.map(T),$=eo.band({range:C,domain:V,padding:.4}),G=[...new Set(h.map(T))],X=eo.band({range:[0,$.bandwidth()],domain:G,padding:.1}),Y=f.useMemo(()=>{const[fe,ve]=Jl(h,j),ue=Math.min(cm,fe),ie=Math.max(cm,ve);return[ue,ie]},[h,j]),W=f.useMemo(()=>eo.linear({range:S,domain:Y}),[S,Y]),H=eo.ordinal({range:u.slice(0,G.length),domain:B?G:V}),{tooltipData:Z,hideTooltip:re,handleTooltip:q}=t5({data:h,innerHeight:_,innerWidth:w,xScale:B?X:$,yScale:W,xGet:T,yGet:j}),te=f.useCallback(({localPoint:fe})=>{const ve=B?X:$,ue=ve.bandwidth(),ie=(ve.step()-ue)/4;if(isNaN(fe?.x??NaN)||isNaN(fe?.y??NaN))return null;const be=fe?.x,Se=fe?.y;return h.reduce((Ce,ke)=>{let Re=ve(T(ke))||0;const je=W(j(ke)),ct=Math.abs(je-W(0));return B&&(Re+=$(ke.z)||0),Re!==void 0&&je!==void 0&&be>=Re-ie&&be<=Re+ue+ie&&Se>=je-ct&&Se<=je+ct?{x:Re,y:je,data:ke}:Ce},null)},[h,$,T,W,j,B,X])({localPoint:Z?.localPoint}),se=f.useMemo(()=>({marginLeft:s.left,marginRight:s.right}),[s.left,s.right]),de=f.useMemo(()=>[cm],[]);return i.jsxs(z,{className:"relative",children:[B&&G.length>1&&i.jsx(z,{style:se,children:i.jsx(vx,{entries:G.map(fe=>({key:fe,color:H(fe)}))})}),i.jsxs(hg,{width:n,height:r,children:[i.jsx(gx,{xScale:$,yScale:W,xFormat:O,yFormat:P,width:n,height:r,margin:s,yNumTicks:M,xNumTicks:E,yTickValues:a.y.tickValues,xTickValues:a.x.tickValues,xAxisLabel:a.x.label,yAxisLabel:a.y.label,animated:!0,tickColor:m,axisColor:d,xAxisRef:g,yAxisRef:y,xTiltTicks:k}),p&&i.jsx(N_e,{left:s.left,scale:W,width:n-s.right-s.left*2,stroke:d,tickValues:de,strokeWidth:2}),F.map(({key:fe,data:ve})=>i.jsx(sa,{left:$(fe),children:ve.map((ue,ie)=>{const be=B?X:$;return i.jsx(xe.rect,{rx:2,ry:2,x:be(T(ue)),width:be.bandwidth(),fill:H(B?ie:fe),initial:{y:W(cm),height:0,opacity:0},animate:{y:W(Math.max(cm,j(ue))),height:Math.abs(W(j(ue))-W(cm)),opacity:1},transition:{duration:.5,ease:"easeInOut"}},ie)})},fe)),i.jsx(xx,{margin:s,tooltipHandle:q,tooltipHide:re,height:r,width:n,maxYLabelWidth:v})]}),te&&Z&&i.jsx(bx,{UserToolTip:o,tooltipTop:Z?.localPoint?.y,tooltipLeft:Z?.localPoint?.x,entry:te.data,data:h,config:a,xFormat:N,yFormat:I,zFormat:D,zGet:R,xGet:T,yGet:j})]})});W_e.displayName="BarChart";function t3t({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),o=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[o]}function n3t({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",o=f.useMemo(()=>[...(n.find(({key:m})=>m===a)||n[0])?.d||[]].sort((m,p)=>s(m)-s(p)),[a,n,s]),l=e?.localPoint.x,c=f.useMemo(()=>o.map(s),[o,s]);return f.useMemo(()=>{if(l==null)return;if("invert"in r){const p=r.invert(l),h=tg(c,p);if(h<=0)return o[0];if(h>=c.length)return o[c.length-1];const g=o[h-1],y=o[h];return Math.abs(s(g)-p)<Math.abs(s(y)-p)?g:y}const d=t3t({xScale:r,xPosition:l}),m=o.find(p=>String(s(p))===String(d));return m||o.reduce((p,h)=>Math.abs(s(h)-d)<Math.abs(s(p)-d)?h:p,o[0])},[l,r,o,s,c])}const $_e=A.memo(function(t){const{$t:n}=Q(),{width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:o,tooltip:l,axes:c=!0,colors:u,animate:d=!0,includeLegend:m=!0,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y=!1,children:v}=t,[x,b]=f.useState(null),_=X3({data:t.data}),w=f.useRef(new Set),{colorSchema:C,tickColor:S,axisColor:E,textColor:M}=Q3(u),{colorScheme:k}=Pr(),T=k==="dark",{xAxisRef:j,yAxisRef:R,maxYLabelWidth:O,maxXLabelWidth:P,minXRequiredWidth:N}=K3(),{xGet:I,yGet:D,zGet:F}=Z3({config:o}),{xFormat:B,yFormat:V,xTooltipFormat:$,yTooltipFormat:G,zTooltipFormat:X}=J3({config:o}),{xDomain:Y,yDomain:W}=NF({config:o,data:_,xGet:I,yGet:D,endTime:p,previousClose:h}),{innerHeight:H,innerWidth:Z,xRange:re,yRange:q}=yx({width:r,height:s,margin:a,maxYLabelWidth:O,hasAxis:c}),{xNumTicks:J,yNumTicks:te,xTiltTicks:se}=Y3({config:o,innerWidth:Z,innerHeight:H,maxXLabelWidth:P}),de=f.useMemo(()=>eo[o.x.scale]({range:[re[0],P?re[1]-P/2:re[1]],domain:Y}),[o.x.scale,re,Y,P]),fe=f.useMemo(()=>{const qe=o.y.scale==="log";return eo[o.y.scale]({range:q,domain:W,base:qe?2:void 0,nice:!qe,round:!0})},[o.y.scale,q,W]),ve=f.useMemo(()=>{if(!o.z?.accessor)return[{key:"",d:_}];const qe=o.z.accessor,Be=Q0(_,Oe=>String(Oe[qe]));return Object.entries(Be).map(([Oe,nt])=>({key:Oe,d:nt}))},[_,o?.z?.accessor]),ue=f.useMemo(()=>{if(ve.length<=1)return null;const qe=new Map;return ve.forEach(Oe=>{Oe.d.forEach(nt=>{const St=I(nt);qe.set(St,nt)})}),Array.from(qe.values()).sort((Oe,nt)=>I(Oe)-I(nt))},[ve,I]),{tooltipData:ie,hideTooltip:be,handleTooltip:Se}=t5({data:_,innerHeight:H,innerWidth:Z,xScale:de,yScale:fe,xGet:I,yGet:D}),Ce=n3t({tooltipData:ie,config:o,groups:ve,xScale:de,xGet:I}),ke=f.useMemo(()=>!y||!ve.length||!ve[0].d.length?null:ve[0].d.at(-1),[ve,y]),Re=f.useMemo(()=>Lf().x(qe=>de(I(qe))).y(qe=>fe(D(qe))).curve(cf),[de,fe,I,D]),je=f.useMemo(()=>eo.ordinal({domain:ve.map(({key:qe})=>qe),range:C}),[C,ve]),ct=f.useCallback(()=>{ie&&b(Ce||null)},[ie,Ce]),tt=f.useCallback(()=>{b(null)},[]),ut=f.useMemo(()=>{const qe={};if(!x||!Ce||!ve.length)return qe;const Be=I(x),Oe=I(Ce),[nt,St]=Be<Oe?[Be,Oe]:[Oe,Be],Yt=Cn=>{const ln=o.z?.accessor?Cn[o.z.accessor]:ve[0].key,Ke=ve.find(({key:He})=>He===ln);return Ke?Ke.d.filter(He=>{const st=I(He);return st>=nt&&st<=St}):[]},Ft=o.z?.accessor?x[o.z.accessor]:ve[0].key;qe[Ft]=Yt(x);const Gt=o.z?.accessor?Ce[o.z.accessor]:ve[0].key;return Ft!==Gt&&(qe[Gt]=Yt(Ce)),qe},[x,Ce,ve,I,o.z?.accessor]),we=f.useMemo(()=>{const qe=ut[o.z?.accessor?x?.[o.z.accessor]:ve[0]?.key]||[],Be=ut[o.z?.accessor?Ce?.[o.z.accessor]:ve[0]?.key]||[],Oe=[...qe,...Be],nt=new Map;return Oe.forEach(Yt=>{nt.set(I(Yt),Yt)}),Array.from(nt.values()).sort((Yt,Ft)=>I(Yt)-I(Ft))},[ut,o.z?.accessor,x,Ce,ve,I]),Ue=f.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),Ot=f.useMemo(()=>[h],[h]),pt=f.useCallback(qe=>de(I(qe))??0,[de,I]),Mt=f.useCallback(qe=>fe(D(qe))??0,[fe,D]);return i.jsxs(z,{children:[o.z&&ve?.length>1&&m&&i.jsx(z,{style:Ue,children:i.jsx(vx,{entries:ve.map(({key:qe})=>({key:qe,color:je(qe)}))})}),i.jsxs(z,{className:"relative",onMouseDown:ct,onMouseUp:tt,onMouseLeave:tt,children:[i.jsxs(hg,{width:r,height:s,children:[c&&i.jsx(gx,{width:r,height:s,margin:a,xScale:de,yScale:fe,xFormat:B,yFormat:V,yNumTicks:te,xNumTicks:J,yTickValues:o.y.tickValues,xTickValues:o.x.tickValues,tickColor:S,axisColor:E,xAxisRef:j,yAxisRef:R,xTiltTicks:se,xAxisLabel:o.x.label,yAxisLabel:o.y.label}),v&&v({xScale:de,yScale:fe,xGet:I,yGet:D}),h&&i.jsx("text",{x:r-a.right-10,y:fe(h)-5,fill:M,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?n({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof o.y.format=="function"?o.y.format(h):h}):n({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof o.y.format=="function"?o.y.format(h):h})}),h&&i.jsx(hx,{left:a.left,scale:fe,width:r-a.right-a.left*2,stroke:M,tickValues:Ot,strokeWidth:2,strokeDasharray:"2,6",opacity:T?.6:1}),Ce&&i.jsx(ah,{marginTop:a.top,tooltipLeft:de(I(Ce)),innerHeight:H,color:E,strokeWidth:1}),x&&i.jsx(ah,{marginTop:a.top,tooltipLeft:de(I(x)),innerHeight:H,color:E,strokeWidth:1}),ue&&ve.length>1&&ve[1]?.key&&i.jsx(xe.path,{d:Re(ue),stroke:je(ve[1].key),strokeWidth:1.5,fill:"none",shapeRendering:"geometricPrecision",initial:d?{pathLength:d?0:1,opacity:d?0:1}:void 0,animate:d?{pathLength:1,opacity:1}:void 0,transition:d?{duration:.8,ease:_a}:void 0}),ve.map(({d:qe,key:Be},Oe)=>{const nt=w.current.has(Be),St=nt||!d?{initial:void 0,animate:{pathLength:1,opacity:1}}:{initial:{pathLength:d?0:1,opacity:d?0:1},animate:{pathLength:1,opacity:1},transition:{duration:.8,ease:_a,delay:Oe/ve.length}};return nt||w.current.add(Be),i.jsx(xe.path,{d:Re(qe),stroke:je(Be),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",...St},Be)}),(Ce||ke)&&i.jsxs(xe.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[i.jsx(Pv,{cx:de(I(Ce||ke)),cy:fe(D(Ce||ke)),color:je(o.z?.accessor?(Ce||ke)?.[o.z.accessor]:""),r:5}),x&&Ce&&i.jsxs(i.Fragment,{children:[i.jsx(Pv,{cx:de(I(x)),cy:fe(D(x)),color:je(o.z?.accessor?x[o.z.accessor]:""),r:5}),we.length>1&&i.jsx(Vp,{data:we,x:pt,y:Mt,fill:je(ve[0].key),fillOpacity:.2,stroke:"none",yScale:fe,curve:cf})]})]}),(ve.length===1||ve.length===2)&&ve.map(({d:qe,key:Be},Oe)=>{const nt=je(Be);return i.jsx(xe.g,{initial:d?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:d?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:d?{duration:.8,ease:_a,delay:Oe/ve.length}:void 0,children:!x&&(ve.length===1||Oe===0)&&i.jsxs(i.Fragment,{children:[i.jsx(VE,{from:`${nt}22`,to:`${nt}00`,id:Be}),i.jsx(Vp,{data:qe,x:pt,y:Mt,strokeWidth:0,yScale:fe,fill:`url('#${Be}')`},Be)]})},Be)}),i.jsx(xx,{margin:a,tooltipHandle:Se,tooltipHide:be,height:s,width:r,maxYLabelWidth:O})]}),Ce&&ie&&i.jsx(bx,{tooltipTop:ie.localPoint.y,tooltipLeft:ie.localPoint.x,entry:Ce,UserToolTip:l?qe=>i.jsx(l,{...qe,comparisonEntry:x||void 0}):void 0,data:_,config:o,xFormat:$,yFormat:G,zFormat:X,zGet:F,xGet:I,yGet:D})]})]})});$_e.displayName="CompositeLineChart";const r3t=200,s3t={top:24,right:8,bottom:24,left:16};function a3t({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),o=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[o]}function o3t({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",o=f.useMemo(()=>[...(n.find(({key:d})=>d===a)||n[0])?.d||[]].sort((d,m)=>s(d)-s(m)),[a,n,s]),l=e?.localPoint.x;return f.useMemo(()=>{if(!l)return;if("invert"in r){const m=r.invert(l),p=tg(o.map(s),m);return o?.[p-1]}const u=a3t({xScale:r,xPosition:l});return o.find(m=>String(s(m))===String(u))},[l,r,o,s])}const H_e=A.memo(e=>{const{$t:t}=Q(),{enableComparison:n=!0,width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:o,tooltip:l,axes:c=!0,colors:u,animate:d=!0,includeLegend:m=!0,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y=!1,children:v}=e,[x,b]=f.useState(null),_=X3({data:e.data}),w=ls(),{colorSchema:C,tickColor:S,axisColor:E,textColor:M}=Q3(u),{colorScheme:k}=Pr(),T=f.useMemo(()=>w?k==="dark":!1,[k,w]),{xAxisRef:j,yAxisRef:R,maxYLabelWidth:O,maxXLabelWidth:P,minXRequiredWidth:N}=K3(),{xGet:I,yGet:D,zGet:F}=Z3({config:o}),{xFormat:B,yFormat:V,xTooltipFormat:$,yTooltipFormat:G,zTooltipFormat:X}=J3({config:o}),{xDomain:Y,yDomain:W}=NF({config:o,data:_,xGet:I,yGet:D,endTime:p,previousClose:h}),{innerHeight:H,innerWidth:Z,xRange:re,yRange:q}=yx({width:r,height:s,margin:a,maxYLabelWidth:O,hasAxis:c}),{xNumTicks:J,yNumTicks:te,xTiltTicks:se}=Y3({config:o,innerWidth:Z,innerHeight:H,maxXLabelWidth:P}),de=f.useMemo(()=>eo[o.x.scale]({range:[re[0],P?re[1]-P/2:re[1]],domain:Y}),[o.x.scale,re,Y,P]),fe=f.useMemo(()=>{const pt=o.y.scale==="log";return eo[o.y.scale]({range:q,domain:W,base:pt?2:void 0,nice:!pt,round:!0})},[o.y.scale,q,W]),ve=f.useMemo(()=>{if(!o.z?.accessor)return[{key:"",d:_}];const pt=o.z.accessor,Mt=Q0(_,qe=>String(qe[pt]));return Object.entries(Mt).map(([qe,Be])=>({key:qe,d:Be}))},[_,o?.z?.accessor]),{tooltipData:ue,hideTooltip:ie,handleTooltip:be}=t5({data:_,innerHeight:H,innerWidth:Z,xScale:de,yScale:fe,xGet:I,yGet:D}),Se=o3t({tooltipData:ue,config:o,groups:ve,xScale:de,xGet:I}),Ce=f.useMemo(()=>!y||!ve.length||!ve[0].d.length?null:ve[0].d.at(-1),[ve,y]),ke=f.useMemo(()=>Lf().x(pt=>de(I(pt))).y(pt=>fe(D(pt))).curve(cf),[de,fe,I,D]),Re=f.useMemo(()=>eo.ordinal({range:C}),[C]),je=f.useCallback(()=>{!ue||!n||b(Se||null)},[n,ue,Se]),ct=f.useCallback(()=>{n&&b(null)},[n]),tt=f.useMemo(()=>{if(!x||!Se||!ve.length)return[];const pt=ve[0],Mt=I(x),qe=I(Se),[Be,Oe]=Mt<qe?[Mt,qe]:[qe,Mt];return pt.d.filter(nt=>{const St=I(nt);return St>=Be&&St<=Oe})},[x,Se,ve,I]),ut=f.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),we=f.useCallback(pt=>de(I(pt))??0,[de,I]),Ue=f.useCallback(pt=>fe(D(pt))??0,[fe,D]),Ot=f.useMemo(()=>[h],[h]);return i.jsxs(z,{children:[o.z&&ve?.length>1&&m&&i.jsx(z,{style:ut,children:i.jsx(vx,{entries:ve.map(({key:pt})=>({key:pt,color:Re(pt)}))})}),i.jsxs(z,{className:"relative",onMouseDown:je,onMouseUp:ct,onMouseLeave:ct,children:[i.jsxs(hg,{width:r,height:s,children:[c&&i.jsx(gx,{width:r,height:s,margin:a,xScale:de,yScale:fe,xFormat:B,yFormat:V,yNumTicks:te,xNumTicks:J,yTickValues:o.y.tickValues,xTickValues:o.x.tickValues,tickColor:S,axisColor:E,xAxisRef:j,yAxisRef:R,xTiltTicks:se,xAxisLabel:o.x.label,yAxisLabel:o.y.label}),v&&v({xScale:de,yScale:fe,xGet:I,yGet:D}),h&&i.jsx("text",{x:r-a.right-10,y:fe(h)-5,fill:M,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?t({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof o.y.format=="function"?o.y.format(h):h}):t({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof o.y.format=="function"?o.y.format(h):h})}),h&&i.jsx(hx,{left:a.left,scale:fe,width:r-a.right-a.left*2,stroke:M,tickValues:Ot,strokeWidth:2,strokeDasharray:"2,6",opacity:T?.6:1}),Se&&i.jsx(ah,{marginTop:a.top,tooltipLeft:de(I(Se)),innerHeight:H,color:E,strokeWidth:1}),x&&i.jsx(ah,{marginTop:a.top,tooltipLeft:de(I(x)),innerHeight:H,color:E,strokeWidth:1}),(Se||Ce)&&i.jsxs(xe.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[i.jsx(Pv,{cx:de(I(Se||Ce)),cy:fe(D(Se||Ce)),color:Re(o.z?.accessor?(Se||Ce)?.[o.z.accessor]:""),r:5}),x&&Se&&tt.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(Pv,{cx:de(I(x)),cy:fe(D(x)),color:Re(o.z?.accessor?x[o.z.accessor]:""),r:5}),i.jsx(Vp,{data:tt,x:we,y:Ue,fill:Re(o.z?.accessor?x[o.z.accessor]:""),fillOpacity:.2,stroke:"none",yScale:fe,curve:cf})]})]}),ve.length===1&&ve.map(({d:pt,key:Mt},qe)=>{const Be=Re(Mt);return i.jsx(xe.g,{initial:d?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:d?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:d?{duration:.8,ease:"easeInOut",delay:qe/ve.length}:void 0,children:!x&&i.jsxs(i.Fragment,{children:[i.jsx(VE,{from:`${Be}22`,to:`${Be}00`,id:Mt}),i.jsx(Vp,{data:pt,x:we,y:Ue,strokeWidth:0,yScale:fe,fill:`url('#${Mt}')`},Mt)]})},Mt)}),ve.map(({d:pt,key:Mt},qe)=>i.jsx(xe.path,{d:ke(pt),stroke:Re(Mt),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",initial:d?{pathLength:0,opacity:0}:void 0,animate:d?{pathLength:1,opacity:1}:void 0,transition:d?{duration:.8,ease:"easeInOut",delay:qe/ve.length}:void 0},Mt)),i.jsx(xx,{margin:a,tooltipHandle:be,tooltipHide:ie,height:s,width:r,maxYLabelWidth:O})]}),Se&&ue&&i.jsx(bx,{tooltipTop:ue.localPoint.y,tooltipLeft:ue.localPoint.x,entry:Se,UserToolTip:l?pt=>i.jsx(l,{...pt,comparisonEntry:x||void 0}):void 0,data:_,config:o,xFormat:$,yFormat:G,zFormat:X,zGet:F,xGet:I,yGet:D})]})]})});H_e.displayName="LineChart";const z_e=A.memo(e=>{const{width:t,height:n,margin:r,config:s,tooltip:a,colors:o,axes:l=!0}=e,c=3,u=X3({data:e.data}),{colorSchema:d,tickColor:m,axisColor:p}=Q3(o),{xAxisRef:h,yAxisRef:g,maxYLabelWidth:y,maxXLabelWidth:v,minXRequiredWidth:x}=K3(),{innerHeight:b,innerWidth:_,xRange:w,yRange:C}=yx({width:t,height:n,margin:r,maxYLabelWidth:y,hasAxis:l}),{xNumTicks:S,yNumTicks:E,xTiltTicks:M}=Y3({config:s,innerWidth:_,innerHeight:b,maxXLabelWidth:v}),{xGet:k,yGet:T,zGet:j}=Z3({config:s}),{xFormat:R,yFormat:O,xTooltipFormat:P,yTooltipFormat:N,zTooltipFormat:I}=J3({config:s}),{xDomain:D,yDomain:F}=NF({data:u,config:s,xGet:k,yGet:T}),B=f.useMemo(()=>eo[s.x.scale]({range:w,domain:D}),[s.x.scale,w,D]),V=f.useMemo(()=>eo[s.y.scale]({range:C,domain:F,nice:!0,round:!0}),[s.y.scale,C,F]),{tooltipData:$,handleTooltip:G,hideTooltip:X}=t5({data:u,innerHeight:b,innerWidth:_,xScale:B,yScale:V,xGet:k,yGet:T,voronoiRadius:c*2}),Y=f.useMemo(()=>eo.ordinal({range:d}),[d]),W=f.useMemo(()=>{if(!s.z?.accessor)return[];const re=new Set([]);return u.forEach(q=>re.add(q[s?.z?.accessor])),Array.from(re)},[u,s.z]),H=$?.voronoiSite,Z=f.useMemo(()=>({marginLeft:r.left,marginRight:r.right}),[r.left,r.right]);return i.jsxs(z,{children:[W.length>1&&i.jsx(z,{style:Z,children:i.jsx(vx,{entries:W.map(re=>({key:re,color:Y(re)}))})}),i.jsxs(z,{className:"relative",children:[i.jsxs(hg,{width:t,height:n,children:[i.jsx(gx,{xScale:B,yScale:V,xFormat:R,yFormat:O,width:t,height:n,margin:r,yTickValues:s.y.tickValues,xTickValues:s.x.tickValues,tickColor:m,axisColor:p,xAxisRef:h,yAxisRef:g,yNumTicks:E,xNumTicks:S,xTiltTicks:M}),H&&i.jsx(ah,{marginTop:r.top,tooltipLeft:H[0],innerHeight:b,color:p}),i.jsx("g",{children:u.map((re,q)=>{const J=H?.data?.__key==re.__key,te=s.z?.accessor?Y(re[s.z.accessor]):Y("");return i.jsx(xe.circle,{"data-hint":`${k(re)}: ${T(re)}`,cx:B(k(re)),cy:V(T(re)),r:c,strokeWidth:c/2,stroke:te,fill:J?"transparent":te,initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,ease:"easeInOut",delay:q/u.length}},re.__key)})}),i.jsx(xx,{margin:r,tooltipHandle:G,tooltipHide:X,height:n,width:t,maxYLabelWidth:y})]}),H&&i.jsx(bx,{tooltipTop:H?.[1],tooltipLeft:H?.[0],UserToolTip:a,entry:H.data,data:u,config:s,xFormat:P,yFormat:N,zFormat:I,zGet:j,xGet:k,yGet:T})]})]})});z_e.displayName="ScatterChart";function i3t(e){const{type:t,config:n,width:r,data:s,height:a,margin:o,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,children:v,enableComparison:x}=e;return t==="line"?i.jsx(H_e,{data:s,config:n,width:r,height:a,margin:o,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,enableComparison:x,children:v}):t==="bar"?i.jsx(W_e,{data:s,config:n,width:r,height:a,margin:o,tooltip:l,colors:u,includeLegend:m}):t==="scatter"?i.jsx(z_e,{data:s,config:n,width:r,height:a,margin:o,tooltip:l,colors:u,includeLegend:m}):t==="compositeLine"?i.jsx($_e,{data:s,config:n,width:r,height:a,margin:o,tooltip:l,axes:c,colors:u,animate:d,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,children:v}):null}const G_e=A.memo(function({type:t,config:n,data:r,tooltip:s,height:a=r3t,margin:o=s3t,axes:l,className:c,colors:u,includeLegend:d,endTime:m,previousClose:p,exchangeName:h,showLastPoint:g,animate:y,children:v,enableComparison:x}){const b=f.useRef(null),{width:_}=j_e(b);return i.jsx("div",{ref:b,className:c,children:i.jsx(i3t,{type:t,data:r,config:n,width:_,height:a,margin:o,tooltip:s,axes:l,colors:u,includeLegend:d,endTime:m,previousClose:p,exchangeName:h,showLastPoint:g,animate:y,enableComparison:x,children:v})})});G_e.displayName="Chart";const iWt=({data:e,brands:t,teams:n,isLive:r,isFinal:s,startLabel:a,endLabel:o,nowLabel:l,shouldAdjustColors:c=!0,nicknameFormatter:u,tooltip:d})=>{const m=f.useMemo(()=>n.map((N,I)=>({...N,uniqueName:N.name+"".repeat(I+1)})),[n]),{teamsData:p}=f.useMemo(()=>({teamsData:m.map(N=>{const I=N.brand||v_e(N.id,t),D=e[N.id]?.candlesticks||[];return{id:N.id,name:N.name,uniqueName:N.uniqueName,brand:I,candlesticks:D}})}),[m,e,t]),{colorScheme:h,isColorSchemeReady:g}=Pr(),{earliestTimestamp:y,latestTimestamp:v}=f.useMemo(()=>{let N=1/0,I=0;return p.forEach(D=>{if(D.candlesticks.length>0){const F=D.candlesticks[0]?.timestamp,B=D.candlesticks[D.candlesticks.length-1]?.timestamp;F&&(N=Math.min(N,F)),B&&(I=Math.max(I,B))}}),{earliestTimestamp:N===1/0?0:N,latestTimestamp:I}},[p]),x=f.useMemo(()=>y?new Date(y*1e3):null,[y]),b=f.useMemo(()=>v?new Date(v*1e3):null,[v]),_=f.useMemo(()=>p.flatMap(N=>N.candlesticks.map(I=>({timestamp:new Date(I.timestamp*1e3),value:(I.price.open+I.price.close)/2,team:N.uniqueName}))),[p]),{locale:w}=Q(),C=!r&&!s,[S,E]=f.useState(!1),{isMobileStyle:M}=ye();f.useEffect(()=>{E(!0)},[]);const k=f.useMemo(()=>{const N=[];if((r||s)&&x&&b)N.push(x,b);else if(C&&x&&b){const I=b.getTime()-x.getTime();N.push(x,new Date(x.getTime()+I/2),b)}return N},[r,s,C,x,b]),j={x:{accessor:"timestamp",scale:"time",format:f.useMemo(()=>{const N=k.map((I,D)=>{const F=D===0||D>0&&I.toDateString()!==k[D-1]?.toDateString();return{date:I,shouldShowDate:F}});return I=>C?N.find(B=>B.date.getTime()===I.getTime())?.shouldShowDate??!0?M?I.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):I.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):M?I.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):I.toLocaleString(w,{hour:"numeric",minute:"numeric"}):!x||!b?"":I.getTime()===x.getTime()?a:I.getTime()===b.getTime()?s?o:r?l:"":M?I.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):r?I.toLocaleString(w,{hour:"numeric",minute:"numeric"}):I.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},[k,C,M,w,x,b,s,r,a,o,l]),tickValues:k.length>0?k:void 0,tooltipFormat:N=>N.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},y:{accessor:"value",scale:"linear",format:N=>mEt(N/100)},z:{accessor:"team",scale:"ordinal",label:"team",format:N=>N.replace(/\u200B/g,"")}},R=f.useMemo(()=>{if(!S||!c)return p.map(D=>D.brand?.color||"#4a90e2");let N=null;return p.map(D=>{const F=qn(D.brand?.color||"#4a90e2"),B=EC(F,h==="dark"),V=qn(D.brand?.color||"#4a90e2"),$=EC(V,h==="dark"),G=W9(B,$,h==="dark",2);if(N){const X=W9(G,N,G.isDark(),2);return N=X,X.hex()}return N=G,G.hex()}).map(D=>D.toString())},[p,h,g,S,c]),{$t:O}=Q(),P=n.length>2;return i.jsxs("div",{children:[i.jsxs(z,{className:U("mb-sm pb-sm -mx-md -mt-sm px-md flex border-b",{"flex-col":P,"items-center justify-between":!P}),children:[i.jsx(L,{variant:"baseSemi",className:P?"mb-sm":void 0,children:O({id:"J3+o0a6LLR",defaultMessage:"Odds to win"})}),i.jsx("div",{className:U("gap-md flex items-center",{"flex-wrap":P}),children:p.map((N,I)=>i.jsx(d3t,{nickname:u?u(N.name):N.name,color:R[I]||"#4a90e2"},N.id))})]}),i.jsx(G_e,{type:"line",data:_,config:j,height:200,margin:l3t,className:"w-full",includeLegend:!1,colors:{colorSchema:R},enableComparison:!1,tooltip:d})]})},l3t={top:16,right:-6,bottom:10,left:8},EC=(e,t)=>{const n="#f7f1f2",r="#1f2121";return e?W9(e,qn(t?r:n),t):qn(n)},W9=(e,t,n,r=3)=>{if(!e)return qn(t);let s=qn(e),a=0,o=0;for(;s.contrast(qn(t))<r&&(s=n?c3t(s,a):u3t(s,a),a+=.01,o++,!(o>20)););return s};function c3t(e,t){const n=e.lightness();return e.lightness(n+(100-n)*t)}function u3t(e,t){const n=e.lightness();return e.lightness(n-n*t)}const d3t=({nickname:e,color:t})=>i.jsxs(z,{className:"gap-xs flex items-center",children:[i.jsx(z,{className:"size-2 rounded-full",style:{backgroundColor:t}}),i.jsx(L,{variant:"small",children:e})]}),f3t=({event:e})=>{const t=e.event.status==="live",n=e.event.extra.pitch_outcome,r=n?.count?.outs??0,s=n?.count?.balls??0,a=n?.count?.strikes??0,o=n?.runners,l=n?.count,c=n?.type!=="half_over"&&r!==3&&s!==4&&a!==3;return t?i.jsxs("div",{className:"mt-lg md:mt-md flex flex-col items-center gap-0",children:[i.jsx(m3t,{runners:o}),i.jsx(p3t,{outs:r}),i.jsx(h3t,{count:l,show:c})]}):null},m3t=({runners:e})=>{const t=e?.filter(n=>!n.out).map(n=>n.ending_base);return i.jsx("div",{style:{transformStyle:"preserve-3d",perspective:"1000px"},className:"inline-flex",children:i.jsx("div",{style:{transform:"rotateX(45deg)"},children:i.jsxs("div",{className:"gap-three grid rotate-45 grid-cols-2 grid-rows-2",children:[i.jsx(I6,{active:t?.includes(2)??!1}),i.jsx(I6,{active:t?.includes(1)??!1}),i.jsx(I6,{active:t?.includes(3)??!1})]})})})},I6=({active:e})=>i.jsx("div",{className:U("size-3 duration-150 md:size-4",e?"bg-super":"bg-inverse/25")}),p3t=({outs:e})=>i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(P6,{filled:e>=1}),i.jsx(P6,{filled:e>=2}),i.jsx(P6,{filled:e>=3})]}),P6=({filled:e})=>i.jsx("div",{className:U("relative size-1 rounded-full duration-150",e?"bg-inverse":"bg-inverse/25"),children:e&&i.jsx("div",{className:"bg-inverse repeat-1 absolute inset-0 animate-ping rounded-full"})}),h3t=({count:e,show:t})=>{const n=e?.balls??0,r=e?.strikes??0,s=n===0&&r===0;return i.jsx(L,{variant:"micro",color:s?"ultraLight":"light",className:U("mt-1 duration-150",t?"opacity-100":"opacity-0"),children:i.jsx("span",{className:"font-mono",children:t?`${n}-${r}`:i.jsx(i.Fragment,{children:""})})})};function g3t({children:e,className:t}){return i.jsx(L,{variant:"micro",className:U("py-xs !font-mono uppercase",t),color:"light",children:e})}const lWt="[&_tr>td:first-child]:pl-md [&_tr>th:first-child]:pl-md [&_tr>td:last-child]:pr-md [&_tr>th:last-child]:pr-md",n5=({className:e,textCenter:t,finalText:n})=>{const{$t:r}=Q(),{isMobileStyle:s}=ye();return i.jsx("div",{className:U("flex items-center justify-center",e),children:i.jsx(L,{variant:s?"micro":"tiny",color:"light",className:"bg-subtler dark:bg-offsetPlus pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n?n.toUpperCase():r({defaultMessage:"Final",id:"6/JzkWi0di"}).toUpperCase()})})},q_e=({className:e,textCenter:t=!1})=>{const{$t:n}=Q(),{isMobileStyle:r}=ye();return i.jsx("div",{className:U("flex items-center justify-center",e),children:i.jsx(L,{variant:r?"micro":"tiny",color:"light",className:"bg-subtler dark:bg-offsetPlus pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n({defaultMessage:"Upcoming",id:"6/aEFZbs2i"}).toUpperCase()})})},K_e=A.memo(({children:e,innerRef:t,canScrollLeft:n,canScrollRight:r,fadeOut:s})=>i.jsx("div",{className:"gap-md flex w-full flex-col overflow-hidden",children:i.jsxs(ul,{orientation:"horizontal",viewportRef:t,showScrollIndicator:!1,className:"relative",children:[i.jsx("div",{className:"p-md pt-0",children:e}),n&&s&&i.jsx(z,{className:"w-xl to-offset pointer-events-none absolute inset-y-0 left-0 bg-gradient-to-l from-transparent"}),r&&s&&i.jsx(z,{className:"w-xl from-offset pointer-events-none absolute inset-y-0 right-0 bg-gradient-to-l to-transparent"})]})}));K_e.displayName="CanonicalScroll";const r5=A.memo(({title:e,subtitle:t,children:n,scrollable:r,fadeOut:s,trailing:a,titleClassName:o})=>{const l=f.useRef(null),[c,u]=f.useState(!1),[d,m]=f.useState(!1),p=f.useCallback(()=>{l.current?.scrollTo({left:l.current.scrollLeft-l.current.clientWidth,behavior:"smooth"})},[l]),h=f.useCallback(()=>{l.current?.scrollTo({left:l.current.scrollLeft+l.current.clientWidth,behavior:"smooth"})},[l]),g=f.useCallback(()=>{l.current&&(u(l.current.scrollLeft>0),m(l.current.scrollLeft+l.current.clientWidth+10<l.current.scrollWidth&&l.current.scrollWidth>l.current.clientWidth))},[l]);return f.useEffect(()=>{const y=l.current;return y?.addEventListener("scroll",g),()=>{y?.removeEventListener("scroll",g)}},[g,l]),f.useEffect(()=>{const y=new ResizeObserver(g);return y.observe(window.document.body),()=>{y.disconnect()}},[g,l]),f.useEffect(()=>{g()},[g]),i.jsxs(z,{className:"gap-md flex flex-col",children:[i.jsxs(Y_e,{title:e,subtitle:t,className:o,children:[a,r&&i.jsxs("div",{className:"-mr-sm flex items-center",children:[i.jsx(Te,{icon:Wv,size:"small",onClick:p,disabled:!c,variant:c?void 0:"noHover"}),i.jsx(Te,{icon:_r,size:"small",onClick:h,disabled:!d,variant:d?void 0:"noHover"})]})]}),r?i.jsx(K_e,{innerRef:l,canScrollLeft:c,canScrollRight:d,fadeOut:s,children:n}):i.jsx("div",{ref:l,className:"gap-md px-md pb-md flex flex-col",children:n})]})});r5.displayName="CanonicalSection";const Y_e=A.memo(({children:e,title:t,subtitle:n,className:r})=>i.jsxs(z,{className:U("gap-md px-md py-sm flex items-center justify-between border-b",r),children:[i.jsxs(z,{className:"flex items-center justify-between",children:[t&&i.jsx(L,{variant:"baseSemi",children:t}),n&&i.jsx(L,{variant:"smallCaps",color:"light",children:n})]}),e]}));Y_e.displayName="SectionTitle";const y3t={tiny:"size-[16px]",small:"size-[24px]",medium:"size-[32px]",large:"xl:size-[64px] size-[50px]"},v3t={tiny:"p-[0.5px]",small:"p-[0.5px]",medium:"p-[0.5px]",large:"p-[0.5px]"},x3t={tiny:"border-[1px]",small:"border-[1px]",medium:"border-[2px]",large:"border-[4px]"},os=f.memo(({includeStripe:e=!0,includeShadow:t=!1,className:n,includeBackground:r=!1,size:s="large",logo:a,color:o,...l})=>{const c=f.useMemo(()=>{let u=y3t[s];return r&&(u+=` ${v3t[s]}`),u},[r,s]);return i.jsx("div",{className:U(c,{"shadow-subtle":t&&r,"border-subtlest rounded-full border bg-white dark:border-transparent":r},n),...l,children:i.jsx("div",{className:U("rounded-inherit relative flex size-full items-center justify-center",{[x3t[s]]:e&&r}),style:{borderColor:r?o:void 0},children:i.jsx("img",{src:a,alt:"",width:r?"70%":"100%",height:"auto"})})})});os.displayName="SportsTeamLogo";function oh(e,t){return e=Math.abs(e/100),e.toLocaleString(t,{style:"percent",maximumFractionDigits:0})}const b3t=new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]]),_3t=new Intl.PluralRules("en-US",{type:"ordinal"});function Q_e(e){if(!e&&e!==0||isNaN(e))return"";const t=b3t.get(_3t.select(e));return`${e}${t}`}function w3t(e,t){if(t!=="upcoming"||e<new Date)return!1;const n=new Date;return Math.abs(+e-+n)<1e3*60*60*24}function cWt(e){return new Date(e.toLocaleDateString(void 0,{timeZone:"UTC"}))}function MC(e,t){const n=Que();return f.useMemo(()=>!n||!t?e:EC(qn(e),t==="dark").toString(),[e,t,n])}const uWt=(e,t,n,r)=>{if(!e||!t)return n;const s=new Date(e),a=new Date(t),o={month:"short",day:"numeric"};s.getFullYear()!==a.getFullYear()&&(o.year="numeric");const l=s.toLocaleDateString(r,o),c=a.toLocaleDateString(r,{...o,year:"numeric"});return s.toDateString()===a.toDateString()?c:s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()?`${s.toLocaleDateString(r,{month:"short"})} ${s.getDate()}-${a.getDate()}, ${a.getFullYear()}`:`${l} - ${c}`},C3t=(e,t)=>({title:null,team_1_super_text:null,team_2_super_text:null,team_1_text:e,team_2_text:t,team_1_emphasis:!1,team_2_emphasis:!1,isTextColorSuper:!0}),dWt=e=>{const t=e.stat_columns||[],n=[{show:e.team_1.text&&e.team_2.text,team1:e.team_1.text,team2:e.team_2.text},{show:e.team_1.sub_text&&e.team_2.sub_text,team1:e.team_1.sub_text,team2:e.team_2.sub_text}].filter(r=>r.show).map(r=>C3t(r.team1,r.team2));return[...t,...n]},X_e=A.memo(({variant:e="common",active:t,vertical:n,onClick:r,indicatorPos:s="bottom",extraCSS:a,showNewIndicator:o,styleProps:l,isNewRedesign:c=!1,disabled:u,innerRef:d,...m})=>{const p=U("absolute",{"right-0 h-full w-[3px] rounded-l-sm":s=="right","left-0 h-full w-[3px] rounded-l-sm":s=="left","bottom-0 left-0 right-0 h-[3px] rounded-t-sm":s=="bottom","top-0 left-0 right-0 h-[3px] rounded-b-sm":s=="top","bg-inverse":e==="primary","bg-inverse/70":e==="common"},l?.indicatorClass),h=U({"px-xs transition duration-300 relative ":n,"flex items-center":t&&n,"justify-center px-xs":!n,"!cursor-not-allowed":u,"my-0.5 [&_*]:!font-normal [&_*]:!text-foreground [&_a]:hover:bg-subtler":c,"[&_a]:bg-offsetPlus [&_a]:text-foreground [&_a]:hover:bg-offsetPlus":c&&t,"opacity-70 cursor-not-allowed":u},t?l?.activeBgClass:l?.bgClass);return i.jsxs("div",{onClick:u?void 0:r,className:h,children:[o&&i.jsx("div",{className:"right-md top-sm text-super absolute z-10",children:""}),i.jsx(Te,{variant:u?"noHover":t?"primary":"common",...m,fullWidth:!0,extraCSS:U("py-md focus-visible:!bg-transparent before:absolute before:opacity-0 focus-visible:before:opacity-100 before:ring-super/50 before:ring-[1.5px] before:inset-y-0 before:inset-x-[-10px] before:rounded-md",{"cursor-not-allowed":u},a),noXPadding:!n,disabled:u,ref:d??void 0}),t&&!u&&i.jsx(xe.div,{layout:"position",layoutId:"tab-indicator",className:p,transition:{duration:.1,ease:"easeOut"}})]})});X_e.displayName="TabButton";const _x=A.memo(({actionList:e,size:t=Wt.regular,variant:n="primary",fillSpace:r=!1,vertical:s=!1,layout:a="left",indicatorPos:o,iconOnly:l,allowScroll:c,tabClass:u,testId:d,layoutGroupId:m,styleProps:p,isNewRedesign:h=!1,activeTabRef:g})=>{const y=U({"w-full":r&&!c,"flex w-auto":c,"justify-center":a==="center","justify-end":a==="right"},p?.wrapperClass),v=U("items-center relative",{"justify-center":a==="center","flex-1":r,"w-full":r&&!c,"w-auto overflow-hidden flex":c},p?.innerClass),x=U("flex",{"w-full":r&&!c,"w-auto overflow-x-auto overflow-y-hidden flex-1 scrollbar-none":c},p?.scrollClass),b=U("items-center relative scrollbar-none",{"flex-1":r,"space-y-xs":s&&!h,"gap-x-md flex h-14":!s&&t!=="tiny","gap-x-sm flex h-10":!s&&t==="tiny","w-full":!s&&!c,"flex px-md w-auto overflow-x-auto":c},p?.scrollInnerClass),_=U("relative",{"h-full flex items-center":!s,"justify-center":r,"w-full":r&&!c,"flex-1 shrink-0":c},p?.itemClass);return i.jsx("div",{className:y,"data-test-id":d,children:i.jsx("div",{className:v,children:i.jsx("div",{className:x,children:i.jsx("div",{className:b,children:i.jsx(wl,{id:m,children:e.map(w=>w.show?i.jsxs(z,{className:_,children:[i.jsx(X_e,{testId:w.testId,ariaLabel:w.ariaLabel,vertical:s,text:l?void 0:w.text,size:t,variant:n,onClick:w.onClick,fullWidth:r,active:w.active,icon:w.icon,href:w.href,target:w.target,layout:a,tooltipLayout:o==="right"?"right":"top",toolTip:w.tooltip,indicatorPos:o,trailingComponent:w.trailingComponent,extraCSS:u,showNewIndicator:w.showNewIndicator,styleProps:p?.tabButton,isNewRedesign:h,disabled:w.disabled,innerRef:w.active?g:void 0}),!l&&w.badge&&i.jsx(L,{className:"bg-super pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 rounded-md px-1 py-0.5 text-white",variant:"tiny",children:w.badge}),w.children&&i.jsx(i.Fragment,{children:w.children})]},w.key??w.text):null)})})})})})});_x.displayName="TabBar";const S3t=[17,16];function fWt({event:e,brands:t,isLive:n}){const{$t:r}=Q(),[s,a]=f.useState(!1),[o,l]=f.useState("all"),c=f.useMemo(()=>(e.matchEvents?e.matchEvents.liveData.event:[]).filter(d=>o==="all"?!0:S3t.includes(d.typeId[0])).reduce((d,m)=>(d[m.periodId[1].toString()]=d[m.periodId[1].toString()]||[],d[m.periodId[1].toString()]?.push(m),d),{}),[e?.matchEvents,o]),u=f.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>l("all"),show:!0,active:o==="all"},{text:r({defaultMessage:"Key Plays",id:"CyNRXF54hv"}),onClick:()=>l("key"),show:!0,active:o==="key"}],[o,r]);return i.jsxs(i.Fragment,{children:[i.jsx(z,{variant:"raised",className:"rounded-xl border",children:i.jsx(r5,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:i.jsx("div",{className:"-mb-sm",children:i.jsx(_x,{actionList:u,layoutGroupId:"soccer-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:i.jsx("div",{className:"-my-md",children:i.jsx(RF,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:!0,brands:t,inModal:!1})})})}),s&&i.jsx(T3t,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:!0,setOpen:a})]})}const Z_e=({isRed:e,className:t})=>i.jsx("svg",{width:"16",height:"19",viewBox:"0 0 16 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:U("shrink-0",t),children:i.jsx("rect",{x:"4.29248",y:"0.726685",width:"12",height:"15",rx:"2",transform:"rotate(14.6454 4.29248 0.726685)",fill:e?"#EB4E45":"#f6c825"})}),RF=f.memo(({plays:e,onViewAll:t,playsToRender:n=1/0,reverse:r=!0,brands:s,inModal:a=!1})=>{const{$t:o}=Q(),l=r?[...Object.keys(e)].reverse():Object.keys(e),c=f.useMemo(()=>{let u=n;return i.jsxs(z,{children:[l.map(d=>{let m=0;const p=e[d]?.length??0;return u<=0?null:(u<p?(m=u,u=0):(m=p,u-=p),i.jsx(E3t,{plays:e[d]??le,playsToRender:m,period:d,reverse:r,brands:s},d))}),!a&&t&&i.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:i.jsx(Te,{variant:"super",chevron:!0,chevronIcon:_r,text:o({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:t})})]})},[e,n,r,a,t,o,l,s]);return a?c:i.jsx(Uo,{className:"relative isolate",mode:"popLayout",transition:{duration:.2,ease:hn},children:i.jsx(so,{children:c})})});RF.displayName="PlaysByPeriod";function E3t({plays:e,playsToRender:t,period:n,reverse:r,brands:s}){const a=f.useMemo(()=>r?[...e].reverse():e,[e,r]),o=ls();return i.jsxs(z,{children:[t>0&&i.jsx(z,{variant:"offsetPlus",className:U("-mx-md px-md py-sm sticky top-0 z-10 flex items-center justify-between"),children:i.jsx(L,{variant:"smallCaps",color:"light",children:n})}),i.jsx(wl,{children:i.jsx(xe.div,{layout:!0,layoutRoot:!0,children:a.slice(0,t).map(l=>i.jsx(J_e,{play:l,brands:s,parentHasMounted:o},l.id))})})]})}const J_e=f.memo(({play:e,brands:t,parentHasMounted:n})=>{const{$t:r}=Q(),s=f.useRef(!n),a=sh(e.contestantId,t,"soccer"),{colorScheme:o}=Pr(),l=MC(a.color,o).toString();return i.jsxs(xe.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:s.current?void 0:{opacity:0},animate:s.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:hn},opacity:{duration:.2,ease:na}},layout:"position",children:[i.jsx("div",{className:"left-xs inset-y-xs absolute w-1 rounded-full opacity-50",style:{backgroundColor:l}}),!s.current&&i.jsx(xe.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:na,delay:.2}}),i.jsxs("div",{className:"gap-md relative flex items-center",children:[i.jsx(os,{logo:a.logo,color:a.color,size:"small",includeStripe:!1}),i.jsxs("div",{className:"gap-sm flex flex-1 flex-row items-center",children:[i.jsxs("div",{className:"gap-md flex items-baseline",children:[i.jsx(L,{variant:"tiny",color:"light",className:"whitespace-nowrap",children:e.periodId[1]==="PENALTIES"?`${r({defaultMessage:"PK",id:"mG6A02k2Ar"})} ${e.timeMin}`:`${e.timeMin}'`}),i.jsx(L,{variant:"small",children:e.commentary_text})]}),M3t(e)&&i.jsx(Z_e,{isRed:k3t(e)==="red"})]})]})]})});J_e.displayName="Play";const M3t=e=>e.typeId[0]===17,k3t=e=>{const t=e.commentary_text.toLowerCase();return t.includes("second yellow card")||t.includes("red card")?"red":t.includes("yellow card")?"yellow":null},T3t=({plays:e,isOpen:t,setOpen:n,event:r,brands:s,reverse:a})=>{const o=f.useRef(null),{isMobileStyle:l}=ye();return i.jsx(Xt,{modalContentClassname:"!py-0 mb-0 min-h-0",modalClassname:"[&_>div]:min-h-0",isOpen:t,onClose:()=>n(!1),variant:l?"bottom-sheet":"side-sheet",includeBlur:!1,children:i.jsxs("div",{className:"flex min-h-0 flex-1 flex-col",children:[i.jsx(L,{variant:"section-title",className:"py-sm -mt-sm -mx-md px-md border-subtlest shadow-subtle border-b",children:"Play by Play"}),i.jsx("div",{ref:o,className:"-mx-md px-md scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:i.jsx(RF,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})]})})},N3t=({event:e})=>{const n=[...e.matchStats?.contestantStats.map(r=>{const s=r.goal_events.map(o=>({type:"goal",event:o})),a=r.red_card_events.map(o=>({type:"red_card",event:o}));return[...s,...a]})??[]].map(r=>r.sort((s,a)=>s.event[0]-a.event[0]));return!n||n.length===0?null:i.jsx("div",{className:"gap-md p-md grid grid-cols-2",children:n.map((r,s)=>i.jsx(A3t,{events:r,position:s===0?"left":"right"},s))})},A3t=({events:e,position:t})=>i.jsx("div",{className:U("gap-xs flex flex-col",{"items-start":t==="left","items-end":t==="right"}),children:e.map((n,r)=>i.jsx(j3t,{event:n,position:t},r))}),j3t=({event:e,position:t})=>i.jsxs("div",{className:"gap-xs flex items-center",children:[i.jsxs(L,{variant:"tiny",className:U("flex items-center gap-1",{"flex-row-reverse":t==="right"}),children:[i.jsx(R3t,{event:e})," ",e.event[1]]}),i.jsxs(L,{variant:"tiny",color:"light",children:[e.event[0],"'"]})]}),R3t=({event:e})=>e.type!=="goal"?i.jsx(Z_e,{isRed:!0,className:"size-md inline-block"}):i.jsx("div",{className:"size-md inline-block",children:""}),ewe=A.memo(()=>i.jsx("div",{}));ewe.displayName="SportsWidgetErrorFallback";const wJ=new Set,I3t=e=>e.status==="live"||e.status==="upcoming";function P3t({widget:e}){const{isMobileStyle:t}=ye(),{result:{backend_uuid:n,mode:r}}=bn(),s=$3();if(f.useEffect(()=>{!n||!e||!e?.events?.length||wJ.has(n)||(s("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:r}),wJ.add(n))},[n,e?.events?.length,r,e,s]),!e?.events?.length)return null;const a=e.canonical_pages?.[0]?.url_web,o=e.events.at(0),l=!t&&(o&&I3t(o)||e.events.length<5),c=e.league??"nba";return i.jsx(zr,{fallback:ewe,children:i.jsx(Go,{widgetType:"sports",widgetName:e.object,children:({widgetSelected:u})=>i.jsx(twe,{canonicalPageLink:a,children:i.jsx(B3t,{events:e.events,showHero:l,widgetSelected:u,league:c})})})})}const twe=({children:e,canonicalPageLink:t})=>{const{$t:n}=Q();return i.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?i.jsx(Ye,{href:t,children:i.jsxs(L,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),i.jsx(_r,{size:18})]})}):null]})},nwe=({initialData:e,refetch:t=!1,reason:n})=>$e({initialData:e,queryKey:["sports/events/widget",e.id],queryFn:async()=>{if(!e.refetch_url)return e;const r=await sr({urlPath:e.refetch_url,timeoutMs:0,reason:n});if(!r.ok)throw ee.error("Failed to fetch sport event",{url:e.refetch_url,status:r.status,statusText:r.statusText}),new Error(`Failed to fetch sport event ${r.status} ${r.statusText}`);return await r.json()},refetchInterval:r=>r.state.data?.refetch_url?r.state.data?.refetch_interval_secs*1e3:!1,enabled:!!e.refetch_url&&t}),O3t=({event:e,onClick:t,eventCount:n,league:r})=>{const{data:s}=nwe({initialData:e,refetch:!0,reason:"sports-event-row"}),a=rwe(),o=r==="nba"&&y_e(s.title[0]??""),l=iwe(s.team_1,s.team_2),c=o?l:null,u=f.useMemo(()=>[{title:s.team_1.title,score:s.team_1.text,subscore:s.team_1.sub_text,image:s.team_1.img,emphasized:s.team_1.won,period:s.period_text},{title:s.team_2.title,score:s.team_2.text,subscore:s.team_2.sub_text,image:s.team_2.img,emphasized:s.team_2.won,period:s.period_text}],[s]);return i.jsx(owe,{href:s.url?.url_web,onClick:()=>t(s.url?.url_web),children:i.jsx($3t,{title:s.status==="live"?"LIVE":a(s.datetime,s.datetime_tba,s.datetime_end),isLive:s.status==="live",items:u,period:swe(s.period_text,s.period_time,r)??null,eventCount:n,subtitle:c??void 0},s.id)})},L3t=({events:e,onClick:t,league:n})=>i.jsx("div",{className:U("bg-subtlest grid grid-cols-1 rounded-b-lg md:grid-cols-2",{"lg:grid-cols-3":e.length>2}),children:e.map(r=>i.jsx(O3t,{event:r,onClick:t,eventCount:e.length,league:n},r.id))}),D3t=e=>{const{locale:t}=Q();return e?new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):""},F3t=e=>e.join("  "),rwe=({includeTime:e=!0}={})=>{const{$t:t}=Q(),{locale:n}=Q();return f.useCallback((r,s,a)=>{if(a){if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const m=new Date(r),p=new Date(a),h=m.getFullYear();if(!(h===new Date().getFullYear())){const w=m.toLocaleDateString(n,{month:"short"}),C=p.toLocaleDateString(n,{month:"short"}),S=m.getDate(),E=p.getDate();return w===C?`${w} ${S}-${E}, ${h}`:`${w} ${S}-${C} ${E}, ${h}`}const y=m.toLocaleDateString(n,{month:"short"}),v=p.toLocaleDateString(n,{month:"short"}),x=m.getDate(),b=p.getDate();let _;if(y===v?_=`${y} ${x}-${b}`:_=`${y} ${x}-${v} ${b}`,e){const w=s?"TBA":m.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${_}, ${w}`}return _}if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const o=new Date(r),l=r&&s,c=o.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});if(pE(o))return e?`${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}, ${c}`:t({defaultMessage:"Today",id:"zWgbGgjUUg"});if(TQe(o))return e?`${t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"})}, ${c}`:t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"});if(_de(o))return e?`${t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"})}, ${c}`:t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"});if(o.getFullYear()!==new Date().getFullYear())return new Date(o).toLocaleDateString(n,{month:"short",day:"numeric",year:"numeric"});const u=o.toLocaleDateString(n,{month:"short",day:"numeric"});if(!e)return u;const d=l?"TBA":o.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${u}, ${d}`},[n,t,e])},swe=(e,t,n)=>{if(n==="mlb")return U3t(e);if(!e||typeof t?.seconds!="number"&&typeof t?.minutes!="number")return e;const r=t?.seconds?.toString().padStart(2,"0")??"00",s=t?.minutes??0;return`${e} ${s}:${r}`},U3t=e=>e?.replace("Top","").replace("Bot",""),B3t=({events:e,showHero:t,widgetSelected:n,league:r})=>{const s=f.useMemo(()=>t?e.slice(1):e,[e,t]),{data:a}=nwe({initialData:e[0],refetch:t,reason:"sports-widget-dense"});return i.jsxs(z,{children:[t&&i.jsxs(owe,{href:a?.url?.url_web,onClick:()=>{n(a?.url?.url_web)},children:[i.jsx(V3t,{event:a,includeBorder:s.length>0,league:r,statusExtra:a&&r==="mlb"&&a.status==="live"?i.jsx(f3t,{event:{event:a}}):null}),r==="championsleague"&&a&&i.jsx(N3t,{event:{event:a,brands:[],candlestickData:null,matchEvents:null,matchStats:a.extra?.match_stats??null,eventExtra:null}})]}),i.jsx(L3t,{events:s,onClick:n,league:r})]})},awe=()=>i.jsx("span",{className:"text-quietest",children:""}),owe=({children:e,href:t,onClick:n})=>t?i.jsx(Ye,{href:t,className:"group/link group",onClick:n,children:e}):i.jsx("div",{className:"group",onClick:n,children:e}),iwe=(e,t)=>{const{$t:n}=Q(),r=e.subtitle?.split("-"),s=t.subtitle?.split("-"),a=ea(r)?+r[0]:null,o=ea(s)?+s[0]:null,l=4;if(a===null||o===null)return null;const c=a>o?e.abbreviation:t.abbreviation,u=a>o?a:o,d=a>o?o:a;return a>=l||o>=l?n({defaultMessage:"{leadingTeam} Wins {leadingScore}-{trailingScore}",id:"T1UC+k87MZ"},{leadingTeam:c,leadingScore:u,trailingScore:d}):a===o?n({defaultMessage:"Series Tied {team1Record}-{team2Record}",id:"Liahhq+hIg"},{team1Record:a,team2Record:o}):n({defaultMessage:"{leadingTeam} Leads {leadingScore}-{trailingScore}",id:"oO28OWtTlZ"},{leadingTeam:c,leadingScore:u,trailingScore:d})},V3t=({event:e,includeBorder:t=!1,className:n,league:r,scoreExtra:s,statusExtra:a})=>{const{$t:o}=Q(),l=e.team_1.title,c=e.team_2.title,u=e.team_1.text,d=e.team_1.sub_text,m=e.team_2.text,p=e.team_2.sub_text,h=r==="nba"&&y_e(e.title[0]??""),g=iwe(e.team_1,e.team_2),y=h?g:null,v=rwe({includeTime:!1}),x=D3t(e.datetime),b=e.datetime_tba?o({defaultMessage:"TBA",id:"ZfAWFLTzx/"}):x,_=F3t(e.title),w=Que(),{colorScheme:C}=Pr(),S=swe(e.period_text,e.period_time,r),E=e.team_1.won||e.team_2.won,M=f.useMemo(()=>{let k;return E?(e.team_1.won?k=e.team_1.color:k=e.team_2.color,w?EC(k?qn(k):null,C==="dark"):k):null},[e.team_1.won,e.team_1.color,e.team_2.color,C,E,w]);return i.jsxs(z,{className:U(n,"rounded-inherit relative",{"border-b":t}),children:[E&&i.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 overflow-hidden",style:{color:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"},children:i.jsx(MO,{className:"-inset-xl rounded-inherit !absolute ![--dog-bg-highlight:currentColor]",dotClassName:"!text-[currentColor]",highlightClassName:"!bg-black/5 dark:!bg-white/5"})}),i.jsx("div",{className:"px-md gap-sm relative flex items-start justify-between pt-[12px]",children:i.jsxs(L,{variant:"tiny",color:"light",children:[_,y&&" "+y]})}),i.jsxs("div",{className:"p-md md:px-lg md:py-md gap-sm relative grid grid-cols-[1fr_auto_1fr] items-center justify-start md:justify-between md:gap-[12px]",children:[i.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row md:justify-start md:gap-[12px]",children:[i.jsx(EJ,{record:e.team_1.subtitle,name:l,logo:e.team_1.img}),i.jsx("div",{className:"md:mx-auto",children:i.jsx(CJ,{position:"leading",score:u,subscore:d,isWinner:e.team_1.won,hasWinner:E,scoreExtra:s,team:e.team_1,teamIdx:0,league:r})})]}),i.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[i.jsx(W3t,{status:e.status,date:v(e.datetime,e.datetime_tba,e.datetime_end),time:b,isUpcoming:e.datetime?w3t(new Date(e.datetime),e.status):void 0,period:S??null}),a]}),i.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row-reverse md:gap-[12px]",children:[i.jsx(EJ,{record:e.team_2.subtitle,name:c,logo:e.team_2.img}),i.jsx("div",{className:"md:mx-auto",children:i.jsx(CJ,{score:m,subscore:p,position:"trailing",isWinner:e.team_2.won,hasWinner:E,scoreExtra:s,team:e.team_2,teamIdx:1,league:r})})]})]}),e.live_text&&i.jsx("div",{className:"bg-subtlest px-md relative py-[12px]",children:i.jsxs(L,{variant:"tiny",color:"light",className:"gap-sm line-clamp-1 flex items-start md:items-center",children:[i.jsx(yke,{size:16,className:"opacity-80 md:-translate-y-px"}),e.live_text]})}),E&&i.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 opacity-20 mix-blend-multiply dark:opacity-60 dark:mix-blend-soft-light",style:{backgroundColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&i.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[12px] border opacity-40",style:{borderColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&i.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[13px] border opacity-20 dark:opacity-40",style:{borderColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}})]})},CJ=({score:e,subscore:t,position:n,emptyPlaceholder:r=i.jsx(awe,{}),isWinner:s,hasWinner:a,scoreExtra:o,team:l,teamIdx:c,league:u})=>{const{isMobileStyle:d}=ye(),m=u==="ipl"||u==="cricket"||u==="icc"||u==="atp"||u==="wta";return i.jsxs("div",{className:U("md:gap-xs flex flex-col items-center justify-center",{"items-start":n==="leading","items-end":n==="trailing","opacity-50":a&&!s}),children:[i.jsxs(L,{variant:d?m?"section-title":"display":"section-title",className:"gap-xs md:gap-sm flex items-center sm:!text-2xl lg:!text-3xl",children:[s&&n==="trailing"&&i.jsx(SJ,{className:"size-3 rotate-180 md:size-4"}),i.jsxs("span",{className:"font-mono",children:[o&&i.jsx("span",{className:"mr-xs",children:o(l,c)}),e??r]}),s&&n==="leading"&&i.jsx(SJ,{className:"size-2.5 md:size-4"})]}),t&&i.jsx(L,{variant:"tiny",color:"light",children:i.jsx("span",{className:"font-mono",children:t})})]})},SJ=({className:e})=>i.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),EJ=({name:e,logo:t,record:n})=>e?i.jsxs("div",{className:"gap-sm flex flex-col items-center justify-between md:gap-0",children:[t&&i.jsx(os,{logo:t,color:"#000000"}),i.jsx(L,{variant:"baseSemi",children:e}),n&&i.jsx(L,{variant:"tiny",color:"light",children:i.jsx("span",{className:"font-mono",children:n})})]}):null,W3t=({status:e,date:t,time:n,isUpcoming:r,variant:s="stacked",period:a})=>{const o=e==="live",l=e==="final",{isMobileStyle:c}=ye();return i.jsx("div",{className:U("gap-sm flex",{"flex-row items-center":s==="row","flex-col items-center justify-center":s==="stacked"}),children:o?i.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[i.jsx(pg,{size:c?"small":"default",includeDot:!0}),a&&i.jsx(L,{variant:"tiny",color:"light",children:a})]}):i.jsxs("div",{className:U("gap-xs flex",{"flex-col":s==="stacked","flex-row items-center":s==="row"}),children:[r&&i.jsx(q_e,{textCenter:!0,className:"mb-1 hidden md:block"}),l&&i.jsx(n5,{textCenter:!0,className:"-mt-0.5 md:mb-1 md:mt-0 md:block"}),i.jsx(L,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:t}),n&&!l&&i.jsx(L,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:n})]})})},$3t=({items:e,title:t,subtitle:n,isLive:r,period:s,eventCount:a})=>{const o=e.some(d=>d.emphasized),{isMobileStyle:l}=ye(),{isLargeScreen:c,isMediumScreen:u}=f3();return i.jsx(z,{variant:"raised",className:U("px-md h-full py-[12px]",{"border-b border-r-0 group-last:border-b-0 group-even:border-r-0":l,"border-b group-odd:border-r":u&&!c,"group-[&:nth-child(2n):nth-last-child(-n+3)~a]:border-b-0":u&&!c&&a>2,"border-b border-r group-[&:nth-child(3n)]:border-r-0":c,"group-[&:nth-child(3n):nth-last-child(-n+4)~a]:border-b-0":c&&a>3,"!border-b-0":c&&a<=3||u&&!c&&a<=2}),children:i.jsxs("div",{className:"gap-sm flex size-full flex-col items-start justify-between duration-150 group-hover/link:opacity-75",children:[r?i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(pg,{size:"small",className:"-ml-1"}),s&&i.jsx(L,{variant:"tiny",color:"super",children:s})]}):t?i.jsx(L,{variant:"tinyRegular",color:"light",children:t}):null,i.jsx("div",{className:"w-full",children:e.map((d,m)=>i.jsx(H3t,{item:d,anyEmphasized:o},d.title+m))}),n&&i.jsx(L,{variant:"tinyRegular",color:"light",children:n})]})})},H3t=({item:e,anyEmphasized:t})=>{const n=f.useMemo(()=>e.score?e.subscore?`${e.score} ${e.subscore}`:e.score:i.jsx(awe,{}),[e.score,e.subscore]);return i.jsxs(z,{className:"flex w-full items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[e.image&&i.jsx("img",{src:e.image,alt:e.title,className:"size-[24px]"}),i.jsx(L,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:e.title})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[e.emphasized&&i.jsx(qR,{size:14,className:"text-super -translate-y-half"}),i.jsx(L,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:n})]})]})},lwe=A.memo(()=>i.jsx("div",{children:"Error loading individual event widget."}));lwe.displayName="IndvEventsWidgetErrorFallback";const MJ=new Set,z3t=({children:e,canonicalPageLink:t})=>{const{$t:n}=Q();return i.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?i.jsx(Ye,{href:t,children:i.jsxs(L,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),i.jsx(_r,{size:18})]})}):null]})},G3t=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleDateString(t,{month:"short",day:"numeric"})}catch{return""}},q3t=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/^0+/,"")}catch{return""}},cwe=({competitor:e})=>i.jsxs(z,{className:"gap-sm border-subtlest px-md py-sm flex items-center border-b last:border-b-0",children:[i.jsx(L,{className:"w-4 text-center",children:e.rank}),i.jsxs("div",{className:"gap-sm flex grow items-center",children:[e.primary_img_url?i.jsx(os,{logo:e.primary_img_url,color:"transparent",size:"small",className:"shrink-0"}):i.jsx(z,{className:"flex h-5 w-8 shrink-0 items-center justify-center rounded-sm bg-[#44403c] text-xs",children:e.abbreviation}),i.jsxs("div",{className:"flex grow flex-col",children:[i.jsx(L,{variant:"smallBold",children:e.title}),i.jsxs(L,{variant:"tiny",color:"light",children:[e.metadata[0]," "]})]})]}),i.jsxs(z,{className:"flex flex-col items-end text-right",children:[i.jsx(L,{variant:"smallBold",children:e.metadata[1]}),i.jsx(L,{variant:"tiny",color:"light",children:e.metadata[2]})]})]},e.id),K3t=({event:e,league:t})=>{const{locale:n}=Q(),r=e.subtitle,{$t:s}=Q(),a=q3t(e.datetime,n),o=e.datetime?D7(new Date(e.datetime))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):_de(new Date(e.datetime))?s({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"}):new Date(e.datetime).toLocaleDateString(n,{weekday:"short",month:"short",day:"numeric"}):"";return i.jsxs(z,{className:"flex flex-col",children:[i.jsxs(z,{className:"p-md border-subtler flex items-end justify-between border-b",children:[i.jsxs(z,{className:"flex flex-col",children:[i.jsx(L,{variant:"baseSemi",children:e.title.join(" ")}),i.jsxs(L,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})]}),i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx(L,{variant:"small",children:o}),i.jsx(L,{variant:"small",color:"light",children:a})]})]}),e.image_url&&i.jsx(z,{className:"aspect-video w-full overflow-hidden rounded-lg bg-[#292524]",children:i.jsx(is,{src:e.image_url,alt:`${e.title.join(" ")} circuit map`,className:"size-full object-contain"})}),i.jsx(z,{className:"gap-xs p-md flex flex-col",children:e.metadata?.map((l,c)=>i.jsxs(z,{className:"flex justify-between",children:[i.jsx(L,{className:"text-sm",color:"light",children:l[0]}),i.jsx(L,{className:"text-sm",children:l[1]})]},c))})]})},Y3t=({event:e,league:t})=>{const{locale:n}=Q(),r=G3t(e.datetime,n),s=e.competitors.slice(0,3),a=e.subtitle;return i.jsxs(z,{className:"flex flex-col",children:[i.jsxs(z,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[i.jsxs("div",{children:[i.jsx(L,{variant:"baseSemi",className:"flex justify-between",children:i.jsx("span",{children:e.title.join(" ")})}),i.jsxs(L,{variant:"small",color:"light",children:[t.toUpperCase(),a&&`${a}`]})]}),i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(L,{variant:"small",color:"light",children:r}),i.jsx(n5,{})]})]}),i.jsx(z,{className:"flex flex-col",children:s.map(o=>i.jsx(cwe,{competitor:o},o.id))})]})},Q3t=({event:e,league:t})=>{const n=e.competitors.slice(0,3),r=e.subtitle;return i.jsxs(z,{className:"flex flex-col",children:[i.jsxs(z,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[i.jsxs("div",{children:[i.jsx(L,{variant:"baseSemi",className:"flex justify-between",children:i.jsx("span",{children:e.title.join(" ")})}),i.jsx("div",{children:i.jsxs(L,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})})]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(pg,{includeDot:!0}),e.period_text&&i.jsx(L,{color:"light",variant:"small",children:e.period_text})]})]}),i.jsx(z,{className:"flex flex-col",children:n.map(s=>i.jsx(cwe,{competitor:s},s.id))})]})},X3t=({event:e,league:t})=>{switch(e.status){case"upcoming":return i.jsx(K3t,{event:e,league:t});case"live":return i.jsx(Q3t,{event:e,league:t});case"final":return i.jsx(Y3t,{event:e,league:t});default:return null}};function Z3t({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=bn(),r=$3(),s=f.useMemo(()=>e?.event,[e]),a=f.useMemo(()=>e?.league,[e]);if(f.useEffect(()=>{!t||!e||!s||MJ.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),MJ.add(t))},[t,s,n,e,r]),!e||!s)return null;const o=e.canonical_page?.url_web,l=`indv-event-${s.id??"unknown"}`;return i.jsx(zr,{fallback:lwe,children:i.jsx(Go,{widgetType:"sports",widgetName:l,children:({})=>i.jsx(z3t,{canonicalPageLink:o,children:i.jsx(X3t,{event:s,league:a})})})})}const uwe=A.memo(()=>i.jsx("div",{children:"Error loading individual schedule widget."}));uwe.displayName="IndvScheduleWidgetErrorFallback";const kJ=new Set,J3t=({children:e,canonicalPageLink:t})=>{const{$t:n}=Q();return i.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?i.jsx(Ye,{href:t,children:i.jsxs(L,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),i.jsx(_r,{size:18})]})}):null]})},e5t=(e,t,n)=>{if(!e)return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2");try{return new Date(e).toLocaleTimeString(n,{hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"}).replace(/^0+/,"")}catch{return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2")}},O6=({event:e,isFinal:t,isLive:n})=>{const{locale:r}=Q(),s=e.metadata?.[0],a=e.metadata?.[1]??"",o=e5t(e.datetime,a,r),{isMobileStyle:l}=ye(),c=!!e.url?.url_web,u=i.jsxs(i.Fragment,{children:[i.jsxs(z,{className:"p-md col-span-3 grid grid-cols-subgrid items-center md:col-span-4",children:[i.jsx(z,{className:"flex flex-col items-start",children:i.jsx(n5t,{date:e.datetime??""})}),i.jsxs(z,{className:"gap-xs flex flex-col md:gap-0",children:[i.jsx(L,{variant:"baseSemi",className:"text-base leading-snug",children:e.title.join(" ")}),s&&i.jsxs(L,{variant:l?"tiny":"small",className:"mt-0 pt-0",color:"light",children:[!t&&!n&&i.jsxs(i.Fragment,{children:[o,"  "]}),s]})]}),i.jsx("div",{className:"hidden md:block",children:e.live_text&&i.jsx(L,{variant:"small",className:"text-right",children:e.live_text})}),i.jsx("div",{children:t?i.jsx(n5,{}):n?i.jsx(pg,{includeDot:!0}):null})]}),i.jsx("div",{className:"p-md -mt-sm col-span-2 col-start-2 pl-0 pt-0 md:hidden",children:e.live_text&&i.jsx(L,{variant:"tiny",className:"border-subtlest p-xs px-sm rounded border",color:"light",children:e.live_text})})]}),d="col-span-3 grid grid-cols-subgrid border-b border-subtlest last:border-b-0 md:col-span-4";return c?i.jsx(Ye,{href:e.url?.url_web??"",className:U(d,"hover:bg-subtler duration-150"),children:u}):i.jsx(z,{className:d,children:u})};function t5t({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=bn(),r=$3(),s=f.useMemo(()=>e?.events??[],[e]);if(f.useEffect(()=>{!t||!e||!s?.length||kJ.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),kJ.add(t))},[t,e,s,n,r]),!e||!s||s.length===0)return null;const a=e.canonical_page?.url_web,o=`indv-schedule-${e.league??"unknown"}`;return i.jsx(zr,{fallback:uwe,children:i.jsx(Go,{widgetType:"sports",widgetName:o,children:({})=>i.jsx(J3t,{canonicalPageLink:a,children:i.jsx(z,{className:"gap-x-md grid grid-cols-[min-content,1fr,min-content] md:grid-cols-[min-content,1fr,1fr,min-content]",children:s.map(l=>{switch(l.status){case"upcoming":return i.jsx(O6,{event:l},l.id);case"live":return i.jsx(O6,{event:l,isLive:!0},l.id);case"final":return i.jsx(O6,{event:l,isFinal:!0},l.id);default:return null}})})})})})}const n5t=({date:e})=>{const{locale:t}=Q(),n=new Date(e).toLocaleDateString(t,{day:"numeric"}),r=new Date(e).toLocaleDateString(t,{month:"short"}),{isMobileStyle:s}=ye();return i.jsxs("div",{className:"dark:bg-offsetPlus bg-subtler py-xs flex w-full flex-col items-center justify-center rounded-lg px-0.5 md:p-[6px]",children:[i.jsx(L,{className:"px-sm -mb-0.5 rounded-full text-center",variant:"tinyRegular",color:"light",children:r}),i.jsx(L,{className:"px-sm -mb-1 text-center",variant:s?"baseSemi":"section-title",children:n})]})},r5t=({result:e})=>{let t="",n=null;return e==="W"?(t="bg-[#059669] text-white",n=Rr):e==="D"?(t="bg-[#64748b] text-white",n=KC):e==="L"&&(t="bg-[#e11d48] text-white",n=Lt),i.jsx("div",{className:U("flex size-4 items-center justify-center rounded-full",t),children:n&&i.jsx(n,{size:12,strokeWidth:2.5})})},IF=({form:e})=>{const t=String(e).replace(/\s/g,"");return i.jsx("div",{className:"flex gap-0.5",children:t.split("").map((n,r)=>i.jsx(r5t,{result:n},r))})};IF.displayName="FormDisplay";const s5t={form:e=>{const t=e.display_value??e.value??"";return i.jsx(IF,{form:String(t)})},movement:e=>{const t=e.display_value??e.value??"";return i.jsx(a5t,{value:String(t)})}},a5t=({value:e})=>{const t=e.includes(""),n=e.includes(""),r=e==="-",s=e.replace(/[^0-9]/g,"");return i.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[i.jsx(me,{icon:t?vke:n?xke:KC,size:"sm",className:U("scale-90",{"text-quietest":r,"text-positive":t,"text-negative":n})}),!r&&i.jsx(L,{variant:"tinyMono",color:t?"positive":"negative",className:"w-[2ch] shrink-0 text-left",children:s})]})};IF.displayName="FormDisplay";const dwe=(e="left")=>{switch(e){case"center":return"text-center";case"right":return"text-right";case"left":default:return"text-left"}},o5t=(e=!1)=>e?"w-full":"w-0",L6=(e="normal",t)=>{if(t==="pos")return"smallCaps";switch(e){case"bold":return"smallBold";case"normal":default:return"small"}},i5t=(e="")=>e==="pos"?"light":"default",l5t=({cell:e,column:t,columnRenderers:n=s5t})=>{const{inApp:r}=_l();if(!e)return i.jsx("td",{className:"md:px-md p-sm"});let s;const a=t.column_type??"text",o=e.display_value??e.value??"-";t.column_id&&n[t.column_id]?s=n[t.column_id]?.(e,t):(a==="entity"||a==="image")&&e.image_url?s=i.jsxs("div",{className:"md:gap-md gap-sm flex items-center",children:[i.jsx(os,{logo:e.image_url,color:"transparent",size:"small",className:"shrink-0"}),i.jsxs("div",{children:[i.jsx(L,{variant:L6(t.font_weight??"normal",t.column_id),children:o}),a==="entity"&&e.sub_text&&i.jsx(L,{variant:"tiny",color:"light",children:e.sub_text})]})]}):a==="entity"&&!e.image_url?s=i.jsxs("div",{children:[i.jsx(L,{variant:L6(t.font_weight??"normal",t.column_id),children:o}),e.sub_text&&i.jsx(L,{variant:"tiny",color:"light",children:e.sub_text})]}):s=i.jsx(L,{variant:L6(t.font_weight??"normal",t.column_id),color:i5t(t.column_id),children:o});const l=U("md:pl-md pl-sm last:px-sm md:last:px-md py-sm align-middle",dwe(t.alignment),o5t(t.should_fill_width));return e.canonical_page?i.jsx("td",{className:l,children:i.jsx(Du,{href:r?e.canonical_page.url_app:e.canonical_page.url_web,className:"block",children:s})}):i.jsx("td",{className:l,children:s})},c5t=({row:e,columns:t,columnRenderers:n})=>{const r=new Map(e.cells.map(s=>[s.column_id,s]));return i.jsx("tr",{className:U("border-subtlest border-b last:border-b-0"),children:t.map(s=>i.jsx(l5t,{cell:r.get(s.column_id),column:s,columnRenderers:n},s.column_id))})},u5t=({table:e,variant:t="subtler",title:n,className:r,noWrapTitle:s=!1,onGroupClick:a,columnRenderers:o})=>{const[l,c]=f.useState(e?.groups?.[0]?.group_id??""),[u,d]=f.useState(!1),{$t:m}=Q();if(_1("standings"),!e||!e.groups?.length)return null;const p=n??e.title??"Standings",h=e.groups.find(x=>x.group_id===l),g=e.groups.length>1;if(!h)return null;const y=u?h.rows:h.rows.slice(0,10),v=e.groups.map(x=>({type:"default",text:x.title??x.group_id,onClick:()=>{c(x.group_id),a?.(x.group_id)},active:l===x.group_id,show:!0}));return i.jsx(Pn,{className:r,header:i.jsxs("div",{className:"md:pl-md gap-sm sm:gap-md mb-sm flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[i.jsx(L,{variant:"baseSemi",className:U(s?"flex-shrink-0":void 0,"max-sm:pl-sm"),children:p}),g?i.jsx(Jt,{items:v,isMobileStyle:!1,wrapperClassName:"min-w-0",children:i.jsx(ge,{text:h.title??h.group_id,chevron:!0,size:"small",extraCSS:"w-full"})}):i.jsx("div",{className:"invisible min-h-10"})]}),children:i.jsxs("div",{className:"rounded-inherit",children:[i.jsx("div",{className:"rounded-t-inherit overflow-hidden",children:i.jsx(ul,{orientation:"horizontal",children:i.jsxs("table",{className:U("w-full table-auto border-collapse"),children:[i.jsx(z,{as:"thead",variant:t==="raised"?"raisedOffset":"offsetPlus",children:i.jsx("tr",{children:h.columns.map(x=>i.jsx("th",{className:U("md:pl-md pl-sm last:px-sm md:last:px-md py-xs whitespace-nowrap align-middle",dwe(x.alignment)),children:i.jsx(g3t,{className:U({"w-[200px] md:w-auto":x.should_fill_width}),children:x.header_label})},x.column_id))})}),i.jsx("tbody",{children:y.map(x=>i.jsx(c5t,{row:x,columns:h.columns,columnRenderers:o},x.row_id))})]})})}),h.rows.length>10&&i.jsx(z,{className:"p-xs border-t",children:i.jsx(Te,{text:m(u?{id:"UOYN/MXiOT",defaultMessage:"View Less"}:{id:"wbcwKddwLa",defaultMessage:"View All"}),size:"small",fullWidth:!0,onClick:()=>d(x=>!x)})})]},h.group_id)})},fwe=A.memo(()=>i.jsx("div",{children:"Error loading standings widget."}));fwe.displayName="StandingsWidgetErrorFallback";const d5t=new Set,f5t=({children:e,canonicalPageLink:t})=>{const{$t:n}=Q();return i.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?i.jsx(Ye,{href:t,children:i.jsxs(L,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),i.jsx(_r,{size:18})]})}):null]})};function m5t({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=bn(),r=$3(),s=f.useMemo(()=>e?.standings_table?e.standings_table:null,[e]);if(f.useEffect(()=>{!t||!e||!s||d5t.has(t)||r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n})},[t,s,n,e,r]),!e||!s)return null;const a=e.canonical_pages?.[0]?.url_web,o=`standings-${s.table_id??"unknown"}`;return i.jsx(zr,{fallback:fwe,children:i.jsx(Go,{widgetType:"sports",widgetName:o,children:({})=>i.jsx(f5t,{canonicalPageLink:a,children:i.jsx(u5t,{table:s,variant:"raised",className:"!rounded-none border-0"})})})})}const Ov={staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0},p5t=({headshotImageUrl:e,flagUrl:t,name:n,isCompositeFlag:r})=>!e&&!t?null:i.jsxs("div",{className:"relative size-6 shrink-0 rounded md:size-8",children:[i.jsx("img",{src:e??t,alt:n,className:U("rounded-inherit relative size-full shrink-0",{"object-contain":r,"object-cover":!r})}),!r&&i.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-white/10"}),e&&i.jsxs("div",{className:"ml-xs ring-raised absolute right-[90%] top-[90%] size-3 shrink-0 -translate-y-1/2 translate-x-1/2 rounded-full ring-2 md:size-4",children:[i.jsx("img",{src:t,alt:n,className:"rounded-inherit relative size-full shrink-0 object-cover"}),i.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-white/10"})]})]}),mwe=({event:e,team1:t,team2:n,isLive:r})=>{const s=e.datetime&&new Date(e.datetime)>new Date,a=r?t.sub_text:null,o=r?n.sub_text:null,{isMobileStyle:l}=ye(),c=f.useMemo(()=>e?.stat_columns?.map(d=>({team1:{score:d.team_1_text,scoreSuper:d.team_1_super_text,emphasis:d.team_1_emphasis,super:!1},team2:{score:d.team_2_text,scoreSuper:d.team_2_super_text,emphasis:d.team_2_emphasis,super:!1}})),[e?.stat_columns]),u=f.useMemo(()=>r?[...c??[],{team1:{score:t.text,scoreSuper:null,emphasis:!1,super:!0},team2:{score:n.text,scoreSuper:null,emphasis:!1,super:!0}}]:c,[c,r,t.text,n.text]);return s?i.jsxs("div",{className:"gap-sm pr-sm flex h-full flex-col justify-around",children:[i.jsx(L,{variant:"base",color:"ultraLight",className:"opacity-50",children:""}),i.jsx(L,{variant:"base",color:"ultraLight",className:"opacity-50",children:""})]}):c?i.jsxs("div",{className:U("gap-x-md grid h-16 auto-cols-auto grid-flow-col",{"gap-x-sm":l}),children:[u?.map((d,m)=>i.jsxs("div",{className:"gap-sm grid h-full grid-cols-subgrid",children:[i.jsx("div",{className:"flex items-center",children:i.jsxs(L,{variant:l?"smallBold":"section-title",className:"min-w-[2ch] text-center !font-mono leading-none",color:d.team1.super&&d.team1.score?"super":d.team1.emphasis?"default":"ultraLight",children:[d.team1.score??"",d.team1.scoreSuper&&i.jsx("sup",{className:"-translate-y-sm text-2xs !font-mono tracking-tight",children:d.team1.scoreSuper})]})}),i.jsx("div",{className:"flex items-center",children:i.jsxs(L,{variant:l?"smallBold":"section-title",className:"min-w-[2ch] text-center !font-mono leading-none",color:d.team2.super&&d.team2.score?"super":d.team2.emphasis?"default":"ultraLight",children:[d.team2.score??"",d.team2.scoreSuper&&i.jsx("sup",{className:"-translate-y-sm text-2xs !font-mono tracking-tight",children:d.team2.scoreSuper})]})})]},m)),(a||o)&&i.jsxs("div",{className:"gap-sm grid h-full grid-cols-subgrid place-items-center",children:[i.jsx(TJ,{score:a}),i.jsx(TJ,{score:o})]})]}):null},TJ=({score:e})=>{const{isMobileStyle:t}=ye();return i.jsx(z,{variant:"superLight",className:U("px-xs flex w-full items-center justify-center rounded py-0.5",{"opacity-0":!e}),children:i.jsx(L,{variant:t?"smallBold":"section-title",color:"super",className:"flex min-w-[2ch] items-center justify-center",children:i.jsx("span",{className:"font-mono",children:e??""})})})},h5t=({children:e,className:t})=>i.jsx(xe.div,{layout:!0,layoutRoot:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{ease:hn,duration:.5},className:U("p-sm isolate flex-col items-end md:flex",t),children:i.jsx("ul",{className:"-mb-xs flex w-full flex-col items-start",children:i.jsx(wl,{id:"index",children:e})})}),pwe=A.memo(({extraCss:e})=>i.jsx(z,{className:`h-[12px] w-[60px] rounded-full ${e}`,variant:"subtler"}));pwe.displayName="ArticleSkeletonItem";const g5t=({widgetData:e,onClick:t,highlighted:n,idx:r})=>i.jsxs("div",{className:"gap-xs pt-sm ml-6 flex items-center",onClick:t.bind(null,e.id),children:[i.jsx(L,{className:U("border-subtler bg-base relative -top-px inline-flex size-4 shrink-0 scale-[.85] items-center justify-center rounded-full border shadow-sm duration-150",{"border-foreground bg-inverse !text-inverse opacity-70":n}),variant:"smallCaps",color:"light",children:r+1}),i.jsx(L,{variant:"tiny",color:n?void 0:"light",className:U("line-clamp-1 cursor-pointer opacity-80 duration-150 hover:!opacity-100",{"!opacity-100":n}),children:e.name})]}),y5t=({highlighted:e,scrollTopOffset:t,scrollThumbHeight:n,widgets:r,loading:s})=>i.jsxs("div",{className:U("bg-base w-two absolute inset-y-0 left-0 z-[2] rounded-full",{"opacity-0 delay-1000":!e}),children:[i.jsx("div",{className:U("absolute inset-0 overflow-hidden duration-150",{"opacity-0":r.length===0||!e,"opacity-1":r.length>0}),children:i.jsx("div",{className:U("absolute left-0 top-0 w-full rounded-full",{"bg-inverse/70":s},{"bg-inverse":!s}),style:{top:`min(${t}%, calc(100% - 8px - ${n}%))`,height:n+"%"}})}),i.jsx("div",{className:"bg-inverse/10 absolute inset-0 rounded-full"})]}),hwe=(e,t,n=100)=>{const s=e.getBoundingClientRect().top,a=t.clientHeight/2;return s-a<=n},v5t=({title:e,onClick:t,idx:n,onWidgetClick:r,highlighted:s=!1,isStaged:a,loading:o,id:l,widgets:c=le,ref:u,testId:d})=>{const m=s&&!o,[p,h]=f.useState(0),[g,y]=f.useState(0),[v,x]=f.useState(""),b=2,{entityRefs:_}=mF(),{scrollContainerRef:w}=Bo(),C=f.useRef(null),S=f.useCallback(()=>{const k=u?.current;if(k){const T=k.getBoundingClientRect().height,j=k.getBoundingClientRect().top;h(Math.max((1-(T+j)/T)*100,0))}},[u]),E=f.useMemo(()=>fh(()=>{let k=[];Object.keys(_).map(T=>{_[T]?.current&&w?.current&&hwe(_[T]?.current,w.current)&&(k=[...k,T])}),x(k[k.length-1]??"")},100),[x,_,w]);f.useEffect(()=>{const k=w.current;if(k)return c&&c.length>=b&&s?(k.addEventListener("scroll",E),k.addEventListener("scroll",S)):(k.removeEventListener("scroll",E),k.removeEventListener("scroll",S)),()=>{k.removeEventListener("scroll",E),k.removeEventListener("scroll",S)}},[s,E,S,c,w]),f.useEffect(()=>{const k=u?.current;if(C.current&&(C.current.disconnect(),C.current=null),k?.nodeType===Node.ELEMENT_NODE){const T=new ResizeObserver(([j])=>{if(j&&ea(j.borderBoxSize)){const{blockSize:R}=j.borderBoxSize[0];y(window.innerHeight/R*100)}});T.observe(k),C.current=T}return()=>{C.current?.disconnect(),C.current=null}},[u,n]);const M=f.useMemo(()=>c.length>=b&&i.jsx("span",{className:"ml-xs inline-flex",children:i.jsx(me,{icon:Qn,size:"xs"})}),[c.length,b]);return i.jsxs(wn,{as:"li",active:o,speed:"slow",className:"group relative flex select-none flex-col",children:[i.jsx(Uo,{mode:"popLayout",initial:!0,children:i.jsx(so,{children:a&&!e?i.jsx("div",{className:"ml-md flex h-[20px] items-center",children:i.jsx(pwe,{extraCss:"!w-[100px] !h-[10px]"})}):i.jsxs("div",{children:[i.jsx("div",{onClick:t.bind(null,n),"data-testid":d,children:i.jsxs(L,{variant:"small",color:m?"default":a?"ultraLight":"light",className:U("gap-xs pl-md line-clamp-2 cursor-pointer opacity-80 duration-150 group-hover:opacity-100",{"font-[450] !opacity-100":m}),children:[e,M]})}),s&&!a&&c.length>=b&&i.jsx(xe.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0,transition:{delay:.15}},exit:{opacity:0,y:-4},className:"pb-1",children:c.map((k,T)=>{const j=k.meta_data;return j.object==="ShopifyWidget"?i.jsx(g5t,{widgetData:j,onClick:r,idx:T,highlighted:!o&&v===k.meta_data?.id},k.meta_data?.id):null})},e)]})},a&&!e?"placeholder":e)}),i.jsx("div",{className:"h-sm text-inverse relative z-[5] inline-flex w-full",children:i.jsx("svg",{width:"2",height:"10",viewBox:"0 0 2 10",fill:"none",className:"inline-flex",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M2 0C2 0.552284 1.55228 1 1 1C0.447716 1 0 0.552284 0 0V10C0 9.44772 0.447716 9 1 9C1.55228 9 2 9.44772 2 10V0Z",fill:"currentColor"})})}),o&&i.jsx("div",{className:"w-two absolute inset-y-0 left-0 z-[4] animate-pulse rounded-full",children:i.jsx("div",{className:U("bg-inverse absolute inset-0 opacity-10")})}),i.jsx("div",{className:U("bg-base w-two absolute inset-y-0 left-0 z-[3] opacity-0 duration-150",{"!opacity-100":a})}),c.length>=b&&i.jsx(y5t,{highlighted:s,scrollTopOffset:p,scrollThumbHeight:g,widgets:c,loading:o??!1}),s&&i.jsx(xe.div,{layoutId:"layout"+l,transition:{ease:hn,duration:.3},className:U("bg-inverse w-two absolute inset-y-0 left-0 z-[1] rounded-full",{"!bg-inverse/70":a||o},{"opacity-0 delay-100":c.length>=b})}),i.jsx("div",{className:U("bg-inverse w-two absolute inset-y-0 left-0 z-[1] rounded-full opacity-10 duration-150")})]})},x5t=({items:e,sectionRefs:t,onItemClick:n,onWidgetClick:r,className:s,id:a})=>{const[o,l]=f.useState(0),c=h=>{r?.(h)},{scrollContainerRef:u}=Bo(),d=h=>{h===0?u?.current?.scrollTo({top:0,behavior:"smooth"}):n(h)},m=f.useMemo(()=>fh(()=>{if(!u?.current)return;const h=u.current;if((h?.scrollTop??0)===0){l(0);return}if(G2(h)){l(e.length-1);return}let y=[];Array.from({length:Object.keys(t).length}).map((v,x)=>{const b=t?.[x]?.current;b&&hwe(b,h,0)&&(y=[...y,x])}),l(y[y.length-1]??0)},100),[t,l,e.length,u]),p=f.useCallback(()=>{m()},[m]);return f.useEffect(()=>{const h=u?.current;return h?.addEventListener("scroll",p),()=>{h?.removeEventListener("scroll",p)}},[p,u]),i.jsx(h5t,{className:s,children:e.filter(h=>h.show).map((h,g)=>i.jsx(v5t,{title:h.title,onClick:d,onWidgetClick:c,idx:g,loading:h.loading,highlighted:g===o,isStaged:h.staged,id:a,testId:h.testId,widgets:g!==0?h.widgets:void 0,ref:t[g]},h.id))})},gwe=A.memo(()=>i.jsx("div",{}));gwe.displayName="MenuSectionErrorFallback";const ywe=A.memo(({children:e,entries:t,className:n,showMenu:r=!0,header:s,footer:a,variant:o="default",id:l})=>{const{isMobileStyle:c}=ye();return i.jsxs("div",{className:U(n,"mx-md mb-md max-w-threadWidth gap-x-lg md:mx-lg relative md:grid",{"grid-cols-4":o==="default","grid-cols-3":o==="twoThirds"}),children:[i.jsx("div",{className:U("space-y-md pt-md",{"col-span-3":o==="default","col-span-2":o==="twoThirds"}),children:e}),i.jsx("div",{className:U("relative",{"col-span-1 col-start-4":o==="default","col-span-1":o==="twoThirds"}),children:r&&!c&&i.jsxs("div",{className:"sticky top-0",children:[s&&i.jsx("div",{children:s}),i.jsx(vwe,{entries:t,id:l}),a&&i.jsx("div",{children:a})]})})]})});ywe.displayName="WithMenu";const D6=({children:e,className:t,show:n=!0,ref:r})=>n?i.jsx(zr,{fallback:gwe,children:i.jsx("div",{ref:r,className:t,children:e})}):null,vwe=A.memo(({entries:e,id:t})=>{const{scrollContainerRef:n}=Bo();A.useEffect(()=>{const o=window.location.hash.slice(1);if(o){const l=e.find(c=>c.id===o);l?.ref.current&&NJ(l.ref.current,!1,n.current)}},[e,n]);const r=f.useMemo(()=>Object.fromEntries(e.filter(o=>o.show).map((o,l)=>[l,o.ref])),[e]),s=f.useMemo(()=>e.map(o=>({title:o.title,id:o.id,loading:!1,show:o.show??!0})).filter(o=>o.show),[e]),a=f.useCallback(o=>{r[o]?.current&&NJ(r[o].current,!0,n.current)},[r,n]);return i.jsx(x5t,{className:"pt-md",items:s,sectionRefs:r,onItemClick:a,id:`menu-list-${t}`})});vwe.displayName="MenuList";function NJ(e,t=!0,n){const r=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--header-height"))||50,s=parseFloat(window.getComputedStyle(e).marginTop),{top:a}=e.getBoundingClientRect();if(!n)return;const o=a+n.scrollTop-r-s;n.scrollTo({top:o,behavior:t?"smooth":"auto"})}async function b5t(){const{error:e,data:t}=await ne.GET("/rest/sports/f1/","f1-index",{timeoutMs:0});if(e)throw new Ee("API_CLIENTS_ERROR",{details:{league:"f1"}});return t?.data}async function _5t(){const{error:e,data:t}=await ne.GET("/rest/sports/nba","nba-index",{timeoutMs:0});if(e)throw new Ee("API_CLIENTS_ERROR",{details:{league:"nba"}});return t?.data??null}async function w5t(){const{error:e,data:t}=await ne.GET("/rest/sports/wnba/","wnba-index",{timeoutMs:0});if(e)throw new Ee("API_CLIENTS_ERROR",{details:{league:"wnba"}});return t?.data}async function C5t(){const{error:e,data:t}=await ne.GET("/rest/sports/pga/","pga-index",{timeoutMs:0});if(e)throw new Ee("API_CLIENTS_ERROR",{details:{league:"pga"}});return t?.data}async function S5t(){const{error:e,data:t}=await ne.GET("/rest/sports/european_tour/","european-tour-index",{timeoutMs:0});if(e)throw new Ee("API_CLIENTS_ERROR",{details:{league:"european_tour"}});return t?.data}async function E5t(e){const{error:t,data:n}=await ne.GET("/rest/sports/tennis/{league}",`${e}-index-client-page`,{params:{path:{league:e}},timeoutMs:3e4});if(t)throw new Ee("API_CLIENTS_ERROR",{cause:t,details:{league:e}});return n?.data}async function M5t(){const{error:e,data:t}=await ne.GET("/rest/sports/mlb","mlb-index",{timeoutMs:0});if(e)throw new Ee("API_CLIENTS_ERROR",{details:{league:"mlb"}});return t?.data}async function k5t(){const{error:e,data:t}=await ne.GET("/rest/sports/ipl","ipl-index",{timeoutMs:0});if(e)throw new Ee("API_CLIENTS_ERROR",{details:{league:"ipl"}});return t?.data??null}async function T5t(){const e=await ne.GET("/rest/sports/cricket/icc","icc-index",{timeoutMs:0,numRetries:0});if(e.error)throw new Ee("API_CLIENTS_ERROR",{details:{league:"icc"}});return e.data}const N5t=e=>["sports/",e],xwe=e=>["wsc-story",e];async function bwe({eventId:e,headers:t}){const n=await ne.GET("/rest/sports/wsc/story/{event_id}","wsc-story-fetch",{params:{path:{event_id:String(e)}},headers:t,timeoutMs:0});if(n.error)throw new Ee("API_CLIENTS_ERROR",{details:{eventId:e,endpoint:"/rest/sports/wsc/story"}});if(!n.data)throw new Error(`No URL found in WSC story response for event ${e}`);return n.data}async function _we({league:e,headers:t,reason:n}){try{const{error:r,data:s}=await ne.GET("/rest/sports/{league}/hype",n,{params:{path:{league:e}},headers:t,timeoutMs:0});if(r)throw new Ee("API_CLIENTS_ERROR",{details:{league:e,reason:n}});return s.data}catch(r){return ee.error(r),null}}const mWt=Object.freeze(Object.defineProperty({__proto__:null,getEuropeanTourIndex:S5t,getF1Index:b5t,getICCIndex:T5t,getIPLIndex:k5t,getMLBIndex:M5t,getNBAIndex:_5t,getPGAIndex:C5t,getSportsLeagueHype:_we,getTennisIndex:E5t,getWNBAIndex:w5t,getWscStory:bwe,sportsIndexKey:N5t,wscStoryKey:xwe},Symbol.toStringTag,{value:"Module"})),wwe=A.memo(function(){const{$t:t}=Q();return i.jsx(z,{className:"mt-md py-md border-t",children:i.jsx(L,{variant:"tiny",color:"ultraLight",className:"text-center",children:t({defaultMessage:"Data: Sportradar",id:"qJEB1Innr2"})})})});wwe.displayName="SportsCommonDisclaimer";const Cwe=A.memo(({query:e,children:t,nofollow:n=!0,sources:r,...s})=>{const a=`/search/new?q=${encodeURIComponent(e)}${r?`&sources=${r.join(",")}`:""}`,o=f.useCallback(()=>g6e({query:e}),[e]);return i.jsx(Ye,{href:h6e()?void 0:a,rel:n?"nofollow":void 0,onClick:o,...s,children:t})});Cwe.displayName="CanonicalQuery";var F6,s5="HoverCard",[Swe,pWt]=Ra(s5,[_h]),a5=_h(),[A5t,o5]=Swe(s5),Ewe=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:s,onOpenChange:a,openDelay:o=700,closeDelay:l=300}=e,c=a5(t),u=f.useRef(0),d=f.useRef(0),m=f.useRef(!1),p=f.useRef(!1),[h,g]=_i({prop:r,defaultProp:s??!1,onChange:a,caller:s5}),y=f.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>g(!0),o)},[o,g]),v=f.useCallback(()=>{clearTimeout(u.current),!m.current&&!p.current&&(d.current=window.setTimeout(()=>g(!1),l))},[l,g]),x=f.useCallback(()=>g(!1),[g]);return f.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),i.jsx(A5t,{scope:t,open:h,onOpenChange:g,onOpen:y,onClose:v,onDismiss:x,hasSelectionRef:m,isPointerDownOnContentRef:p,children:i.jsx(GI,{...c,children:n})})};Ewe.displayName=s5;var Mwe="HoverCardTrigger",kwe=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=o5(Mwe,n),a=a5(n);return i.jsx(fS,{asChild:!0,...a,children:i.jsx(nn.a,{"data-state":s.open?"open":"closed",...r,ref:t,onPointerEnter:Pt(e.onPointerEnter,TC(s.onOpen)),onPointerLeave:Pt(e.onPointerLeave,TC(s.onClose)),onFocus:Pt(e.onFocus,s.onOpen),onBlur:Pt(e.onBlur,s.onClose),onTouchStart:Pt(e.onTouchStart,o=>o.preventDefault())})})});kwe.displayName=Mwe;var PF="HoverCardPortal",[j5t,R5t]=Swe(PF,{forceMount:void 0}),Twe=e=>{const{__scopeHoverCard:t,forceMount:n,children:r,container:s}=e,a=o5(PF,t);return i.jsx(j5t,{scope:t,forceMount:n,children:i.jsx(Os,{present:n||a.open,children:i.jsx(i1,{asChild:!0,container:s,children:r})})})};Twe.displayName=PF;var kC="HoverCardContent",Nwe=f.forwardRef((e,t)=>{const n=R5t(kC,e.__scopeHoverCard),{forceMount:r=n.forceMount,...s}=e,a=o5(kC,e.__scopeHoverCard);return i.jsx(Os,{present:r||a.open,children:i.jsx(I5t,{"data-state":a.open?"open":"closed",...s,onPointerEnter:Pt(e.onPointerEnter,TC(a.onOpen)),onPointerLeave:Pt(e.onPointerLeave,TC(a.onClose)),ref:t})})});Nwe.displayName=kC;var I5t=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,...l}=e,c=o5(kC,n),u=a5(n),d=f.useRef(null),m=In(t,d),[p,h]=f.useState(!1);return f.useEffect(()=>{if(p){const g=document.body;return F6=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=F6,g.style.webkitUserSelect=F6}}},[p]),f.useEffect(()=>{if(d.current){const g=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),f.useEffect(()=>{d.current&&L5t(d.current).forEach(y=>y.setAttribute("tabindex","-1"))}),i.jsx(a1,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:Pt(a,g=>{g.preventDefault()}),onDismiss:c.onDismiss,children:i.jsx(qI,{...u,...l,onPointerDown:Pt(l.onPointerDown,g=>{g.currentTarget.contains(g.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:m,style:{...l.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),P5t="HoverCardArrow",O5t=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=a5(n);return i.jsx(KI,{...s,...r,ref:t})});O5t.displayName=P5t;function TC(e){return t=>t.pointerType==="touch"?void 0:e()}function L5t(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var Awe=Ewe,jwe=kwe,Rwe=Twe,Iwe=Nwe;const U6="text-foreground text-left hover:text-super focus:text-super mb-xs transition-color line-clamp-2 cursor-pointer font-sans text-sm font-medium duration-150",i5=A.memo(({hideHoverCard:e=!1,children:t,contentProps:n,linkProps:r,result:s,webResultCitation:a,timestampComponent:o,trackEvent:l,getAttachmentUrl:c})=>{const u=s?.is_conversation_history??!1,d=s?.is_memory??!1,m=u||d,[p,h]=f.useState(!1),[g,y]=f.useState(null),v=s.is_attachment??!1,x=Vh(s),b=Ja(s.url),_=f.useCallback(async()=>{if(!c)return;const X=await c(s.url);b&&(y(X),h(!0),T(!1),j.current=!1)},[c,s.url,b]),w=mE(s),C=vde(s),S=C||m&&!w?null:s.meta_data?.generated_file_title??s.name,E=a?.cited_texts??[],M=s.meta_data?.generated_file_description??s.snippet,[k,T]=f.useState(!1),j=f.useRef(!1),[R,O]=f.useState(!1),P=!!(s.url&&Wh(s.url)),N=s1(),I=s.meta_data?.authors,D=typeof s.meta_data?.wiley_book_uuid=="string",F=typeof s.meta_data?.domain_name=="string"?s.meta_data?.domain_name:void 0,B=f.useMemo(()=>aO(s),[s]);f.useEffect(()=>{if(typeof window>"u")return;function X(){j.current=!1}return document.addEventListener("visibilitychange",X),()=>{window.removeEventListener("visibilitychange",X)}},[]);const V=s.url||w,$=f.useCallback(()=>h(!1),[]),G=f.useMemo(()=>({src:g??void 0}),[g]);return i.jsxs(Awe,{onOpenChange:X=>{!X&&j.current||T(e?!1:X)},open:k,openDelay:200,closeDelay:200,children:[P&&s.url&&i.jsx(k1,{isOpen:R,name:S,setisOpen:O,url:s.url}),b&&g&&i.jsx(M1,{isOpen:p,onClose:$,imgProps:G}),i.jsx(jwe,{asChild:!0,"aria-label":S,onPointerEnter:()=>{j.current=!0},onClick:()=>{T(!1),j.current=!1},onPointerLeave:()=>{j.current=!1},children:t}),i.jsx(Rwe,{children:i.jsx(Iwe,{className:U({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!N}),side:"bottom",sideOffset:8,...n,children:i.jsxs("div",{className:"bg-base dark:border-subtler px-md w-80 rounded-xl border py-3 shadow-lg",children:[m&&!w?i.jsx(vO,{variant:"medium",searchType:d?"memory":"conversation-history"}):i.jsxs("div",{className:"gap-sm flex flex-col",children:[(V||o)&&i.jsxs("div",{className:"flex items-center justify-between",children:[V&&i.jsx(bu,{className:"text-right",variant:"tiny",color:"light",url:s.url,isAttachment:v,source:F,connectionType:s.meta_data?.connection_type}),o]}),P?i.jsx("button",{className:U6,onClick:()=>{O(!0)},children:S}):x?i.jsx("button",{className:U6,onClick:_,children:S}):B?i.jsx(yO,{className:U6,result:s,trackEvent:l,...r,children:S}):i.jsx("span",{className:"text-foreground mb-xs line-clamp-2 text-left font-sans text-sm",children:S})]}),I?i.jsx(L,{color:"light",variant:"small",className:"line-clamp-3",children:I.join(", ")}):null,C?i.jsx(L,{variant:"small",color:"light",children:i.jsx(pe,{defaultMessage:"This is a private source.",id:"jKReyt0qq8",description:"Text shown when a source is private and obfuscated"})}):null,S!==s.name&&!d&&!C?i.jsx(L,{variant:"small",color:"light",children:s.name}):null,E.length>0?i.jsx("ul",{children:E.map((X,Y)=>i.jsx("li",{className:"border-b last:border-b-0",children:i.jsx(L,{variant:"small",className:"line-clamp-[20] italic",children:X})},Y))}):M&&i.jsx(L,{variant:"small",className:"line-clamp-4 whitespace-pre-wrap",children:M}),D?i.jsxs(z,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(me,{size:"sm",icon:Bte})}),i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(pe,{defaultMessage:"Premium Source",id:"K/sjkPqxv7",description:"title"})})]}):null,w&&!C?i.jsxs(z,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(me,{size:"sm",icon:Vte})}),i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(pe,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})})})]})});i5.displayName="CitationHoverCard";const lc=A.memo(({variant:e=r7.subtle,label:t,accessory:n,onClick:r,className:s,size:a="default",textColor:o="default",icon:l,iconClassName:c,iconOnly:u=!1,tooltip:d,truncate:m=!1,hover:p=!0,href:h,linkBehavior:g="none",trackEvent:y})=>{const v=f.useCallback(w=>{g==="external"&&h&&y&&y("click citation",{source:"inline",citation_url:h}),g!=="external"&&r?.(w)},[r,g,h,y]),x=i.jsxs(z,{as:"span",variant:e,className:U("text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums",{"py-[0.1875rem] leading-snug":a==="default","py-[0.175rem] leading-none":a==="small","py-[0.125rem] leading-none":a==="extraSmall"},{"px-[0.3rem]":!u,"inline-block px-[0.1875rem]":u,"[@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white":p}),onClick:g==="external"?void 0:r,children:[l&&i.jsx(me,{icon:l,size:"2xs",className:U("-mt-px inline-block align-middle opacity-80",{"mr-xs":!u},c)}),i.jsx("span",{ref:w=>{if(w&&m){const C=w.scrollWidth>w.clientWidth;w.style.maskImage=C?"linear-gradient(to right, black 70%, transparent 100%)":""}},className:U("relative -mt-px inline-block align-middle",{"max-w-[25ch] overflow-hidden":m}),children:t}),!!n&&i.jsx("span",{className:"ml-xs -mt-px mr-px inline-block align-middle",children:n})]}),b=d?i.jsx(pn,{tooltipText:d,tooltipLayout:"top",asChild:!0,children:x}):x,_=i.jsx(L,{as:"span",color:o,className:U("relative -mt-px select-none whitespace-nowrap",{"-top-px":a==="default","-top-[3px] leading-none":a==="small","-top-two leading-none":a==="extraSmall"},s),children:b});return g==="external"&&h?i.jsx(Ye,{href:h,target:"_blank",rel:"noopener",className:"inline",onClick:v,children:_}):_});lc.displayName="CitationBubble";const l5=A.memo(e=>i.jsx(lc,{...e}));l5.displayName="CitationNumberBubble";const OF=A.memo(({sources:e,count:t,variant:n="default",className:r})=>{const s="clip-path-small",a="clip-path-default",o=Math.min(e.length,t),l=f.useMemo(()=>e.slice(0,o),[e,o]);return o===0?null:i.jsxs(i.Fragment,{children:[i.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:i.jsx("defs",{children:i.jsx("clipPath",{id:a,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z",fill:"#D9D9D9"})})})}),i.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:i.jsx("defs",{children:i.jsx("clipPath",{id:s,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z",fill:"#D9D9D9"})})})}),i.jsx("div",{className:U("gap-xs relative flex shrink-0 items-center",r),children:i.jsx("div",{className:"ml-xs flex",children:l.map((c,u)=>i.jsx(fl,{domain:c,size:n==="small"?12:14,className:U("bg-offsetPlus relative z-0 shrink-0",{"-ml-[5px]":n==="default"},{"-ml-xs":n==="small"}),style:u!==o-1?{clipPath:`url(#${n==="small"?s:a})`}:void 0},u))})})]})});OF.displayName="CitationPile";function D5t(e,t){return e==null?1:t==null?-1:e==null&&t==null?0:!isNaN(Number(e))&&!isNaN(Number(t))?Number(e)-Number(t):String(e).localeCompare(String(t))}const F5t=({children:e,...t})=>i.jsx("table",{...t,children:e}),U5t=({children:e,...t})=>i.jsx("tr",{...t,children:e}),B5t=({children:e,index:t,id:n,data:r,...s})=>i.jsx("td",{...s,children:i.jsx(L,{variant:"tiny",className:U({"font-normal":t}),children:e})}),V5t=({SortButton:e,children:t})=>i.jsx("th",{className:"py-sm pr-sm text-left align-text-top outline-none",children:i.jsxs(z,{className:U("group relative flex items-center justify-between"),children:[i.jsx(L,{variant:"tiny",color:"light",children:t}),e]})}),Pwe=A.memo(function({name:t,setSortDescriptor:n}){return i.jsx("button",{className:"right-sm absolute opacity-0 transition-opacity duration-200 group-hover:opacity-100",onClick:()=>{n(r=>({...r,column:t,reverse:!r.reverse}))},children:i.jsx(L,{variant:"tiny",color:"super",children:i.jsx(me,{icon:bke,size:"xs"})})})});Pwe.displayName="SortButton";const Owe=A.memo(({collapsed:e,setCollapsed:t,viewMoreText:n,viewLessText:r})=>{const s=f.useCallback(()=>{t(a=>!a)},[t]);return i.jsx(z,{className:"pb-sm",children:i.jsx(ge,{pill:!0,variant:"border",size:"tiny",chevron:!0,chevronIcon:e?Qn:YC,text:e?n:r,onClick:s})})});Owe.displayName="ResponsiveTableExpander";const AJ="focus-visible:outline-super focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-0",Lwe=A.memo(function(t){const{data:n,columns:r,compareFunction:s,RowCell:a,HeaderCell:o,Row:l,Table:c,limit:u}=t,[d,m]=f.useState({column:void 0,reverse:!1}),p=n.at(0),h=f.useMemo(()=>r??Object.keys(p??{}).map(w=>({name:w})),[p,r]),g=s??D5t,y=f.useMemo(()=>{const w=n.map(C=>({data:C,key:C.key??Math.random().toString(36).substring(7)}));return d.column&&w.sort((C,S)=>g(C.data[d.column],S.data[d.column])*(d.reverse?-1:1)),w.slice(0,u||w.length)},[n,u,d,g]),v=o??V5t,x=c??F5t,b=l??U5t,_=a??B5t;return i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(x,{className:"w-full border-collapse",children:[i.jsx("thead",{children:i.jsx(b,{id:"_header",children:h.map((w,C)=>i.jsx(Dwe,{index:C,HeaderCell:v,setSortDescriptor:m,...w},w.name))})}),i.jsx("tbody",{children:y.map(w=>i.jsx(b,{id:w.key,className:U("group",AJ,"border-subtlest border-t border-dashed !outline-none first:border-solid"),children:h.map(({name:C},S)=>i.jsx(_,{id:C,index:S,data:w.data,className:U("pr-sm align-text-top last:pr-0",AJ,'group-data-[selected="true"]:first:border-l-super py-sm group-data-[selected="true"]:border-super group-data-[selected="true"]:bg-super/10 group-data-[selected="true"]:first:pl-xs group-data-[selected="true"]:last:pr-xs dark:group-data-[selected="true"]:bg-super/10 rounded-sm outline-none transition-all duration-300 ease-in-out group-data-[selected="true"]:first:border-l-2 group-data-[selected="true"]:last:border-r-2'),children:String(w.data[C])},C))},w.key))})]})})});Lwe.displayName="ResponsiveTable";const Dwe=A.memo(({index:e,HeaderCell:t,setSortDescriptor:n,...r})=>{const s=f.useMemo(()=>i.jsx(Pwe,{name:r.name,setSortDescriptor:n}),[r.name,n]);return i.jsx(t,{index:e,id:r.name,data:r,SortButton:s,children:r.label??r.name},r.name)});Dwe.displayName="HeaderCellFactory";const $9=3,NC=A.memo(({children:e})=>i.jsx(L,{variant:"tinyRegular",color:"light",children:i.jsx("time",{className:"text-nowrap",children:e})}));NC.displayName="Timestamp";const Fwe=A.memo(({source:e,includeRootLink:t=!0})=>{const{$t:n}=Q(),{trackEvent:r}=Me(),s=f.useMemo(()=>({onClick(){r("click citation",{source:"hoverCard",citation_url:e.url})}}),[e.url,r]),a=f.useMemo(()=>({color:"light"}),[]);return i.jsx(i5,{timestampComponent:e.timestamp?i.jsx(gE,{recentlyUpdatedLabel:n({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:e.timestamp,timestampProps:a,children:n({defaultMessage:"Updated",id:"xrk6zgu9jU"})}):null,linkProps:s,result:e,children:i.jsx(W5t,{url:t?e.url:void 0,children:i.jsx(l5,{label:`${e.id}`,className:"mb-xs"})})})});Fwe.displayName="Citation";const W5t=({children:e,url:t,ref:n,...r})=>t!==void 0?i.jsx(Ye,{href:t,target:"_blank",rel:"noopener nofollow",ref:n,...r,children:e}):i.jsx("span",{ref:n,...r,children:e}),$5t=(e,t)=>{if(!e)return"";const n=new Date(e),r=new Date;return Math.abs(+n-+r)<1e3*60*60*24?new Intl.RelativeTimeFormat(t,{localeMatcher:"best fit",numeric:"auto",style:"long"}).format(0,"day"):n.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},Uwe=A.memo(({post:e})=>{const{locale:t}=Q(),{isMobileStyle:n}=ye(),r=f.useMemo(()=>e.timestamp?$5t(e.timestamp,t):"",[e.timestamp,t]);return i.jsx(z,{children:i.jsx(Cwe,{query:e.headline,nofollow:!0,children:i.jsxs("span",{className:"group/post pb-xs cursor-pointer",children:[i.jsxs(L,{variant:n?"smallBold":"baseSemi",className:"mb-xs gap-sm flex items-baseline justify-between",children:[i.jsx("span",{className:"leading-snug duration-150",children:e.headline}),i.jsxs("div",{className:"flex translate-x-1 items-center gap-0.5",children:[e.timestamp&&!n&&i.jsx(z,{className:"gap-sm capitalize",children:i.jsx(NC,{children:r})}),i.jsx(me,{icon:_r,size:"sm",className:"text-quiet group-hover/post:text-foreground translate-y-1 opacity-75 duration-150 md:translate-y-0"})]})]}),i.jsxs(L,{variant:n?"small":"base",className:"text-pretty leading-tight",children:[i.jsx("span",{className:"opacity-75",children:e.text}),i.jsx("span",{className:"ml-xs inline-flex",children:e.sources.map((s,a)=>i.jsx("span",{className:"mr-xs",children:i.jsx(Fwe,{source:s,includeRootLink:!1},s.id)},a))})]}),e.timestamp&&n&&i.jsxs(z,{className:"mt-sm gap-xs flex items-center capitalize",children:[i.jsx(zR,{className:"text-quiet opacity-80",size:16}),i.jsx(NC,{children:r})]})]})})})});Uwe.displayName="Post";const Bwe=A.memo(({created:e,posts:t,title:n,variant:r})=>{const{$t:s}=Q(),[a,o]=f.useState(!0),[l,c]=f.useState(!1),{locale:u}=Q(),[d,m]=f.useState(Date.now());f.useEffect(()=>{const b=setInterval(()=>m(Date.now()),15e3);return()=>clearInterval(b)},[]);const p=ls(),h=f.useMemo(()=>{if(!e||!p)return"";const b=Date.parse(e),_=d-b;let w=_/6e4,C="days";w<1?(w=_/1e3,C="seconds"):w<60?(w=_/6e4,C="minutes"):w<1440?(w=_/36e5,C="hours"):(w=_/864e5,C="days"),w=-Math.abs(Math.floor(w));const S=new Intl.RelativeTimeFormat(u,{localeMatcher:"best fit",numeric:"auto",style:"short"});return s({defaultMessage:"Updated {time}",id:"0aJxT29U/1"},{time:S.format(w,C)})},[e,d,s,u,p]),g=f.useMemo(()=>{if(!t?.length)return[];const b=t.flatMap(_=>_.sources).map(_=>[_.id,_]);return Object.values(Object.fromEntries(b))},[t]),y=f.useMemo(()=>g.map(b=>b.url),[g]),v=f.useCallback(()=>c(!0),[]),x=f.useCallback(()=>c(!1),[]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs(z,{className:U("gap-xs px-md py-sm flex flex-wrap items-center justify-between",{"border-b":r!=="raised"}),children:[i.jsxs(L,{variant:"baseSemi",color:t.length>0?"super":"ultraLight",className:"gap-sm flex items-center",as:"h2",children:[i.jsx(G5t,{animate:t.length>0}),i.jsx("span",{children:n??s({defaultMessage:"What's Happening",id:"wVxgwE2ray"})})]}),i.jsx(NC,{children:h})]}),i.jsxs(z,{variant:r,className:U({"rounded-xl border":r==="raised"}),children:[i.jsx(Uo,{transition:{ease:hn,duration:.2},children:i.jsx(so,{children:t.length===0?i.jsx(H5t,{}):i.jsx("ul",{className:"pb-md grid",children:t.slice(0,a?$9:t.length).map((b,_)=>i.jsx(xe.li,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{y:{ease:hn,duration:.2}},className:"mx-md border-subtlest py-md block border-b last:border-b-0 last:pb-0",children:i.jsx(Uwe,{post:b},_)},b.headline))})})}),t.length>0&&i.jsxs(i.Fragment,{children:[t.length>$9&&i.jsx(z,{className:"px-md",children:i.jsx(Owe,{collapsed:a,setCollapsed:o,viewMoreText:s({defaultMessage:"View More",id:"QQSdHPJWXu"}),viewLessText:s({defaultMessage:"View Less",id:"UOYN/MXiOT"})})}),i.jsx("div",{className:"pb-md pl-md",children:i.jsxs(z,{as:"button",bgHover:"offsetPlus",className:"gap-sm px-sm inline-flex items-center rounded-full border py-1.5",onClick:v,children:[i.jsx(OF,{sources:y,count:4}),i.jsxs(L,{variant:"tiny",color:"light",children:[g.length," Sources"]})]})})]})]})]}),i.jsx(CO,{isOpen:l,onClose:x,webResults:g})]})});Bwe.displayName="WhatsHappening";const H5t=()=>i.jsx(wn,{className:"px-md",children:i.jsx("div",{className:"divide-y",style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},children:Array.from({length:$9}).map((e,t)=>i.jsx(z5t,{},t))})}),z5t=()=>i.jsxs(z,{className:"gap-sm py-md flex flex-col",children:[i.jsx(z,{className:"mb-sm h-2 w-4/5 rounded-full",variant:"offsetPlus"}),i.jsx(z,{className:"h-2 w-3/5 rounded-full",variant:"offsetPlus"}),i.jsx(z,{className:"h-2 w-3/5 rounded-full",variant:"offsetPlus"}),i.jsx(z,{className:"h-2 w-2/5 rounded-full",variant:"offsetPlus"})]}),S_=(e,t)=>t?{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,repeat:1/0,repeatDelay:5,ease:na,delay:e}}:{opacity:1},G5t=({animate:e})=>i.jsx("svg",{viewBox:"0 0 576 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-super inline-block h-[1em] overflow-visible align-[-0.125em]",children:i.jsxs("g",{children:[i.jsx(xe.path,{d:"M99.8 69.4C110 77.8 111.4 93 103 103.2C68.6 144.7 48 197.9 48 256C48 314.1 68.6 367.3 103 408.8C111.4 419 110 434.1 99.8 442.6C89.6 451.1 74.5 449.6 66 439.4C24.8 389.6 0 325.7 0 256C0 186.3 24.8 122.4 66 72.6C74.4 62.4 89.6 61 99.8 69.4ZM476.3 69.4C486.5 61 501.6 62.4 510.1 72.6C551.3 122.4 576.1 186.4 576.1 256C576.1 325.6 551.3 389.6 510.1 439.4C501.7 449.6 486.5 451 476.3 442.6C466.1 434.2 464.7 419 473.1 408.8C507.4 367.3 528.1 314.1 528.1 256C528.1 197.9 507.5 144.7 473.1 103.2C464.7 93 466.1 77.9 476.3 69.4Z",fill:"currentColor",...S_(.3,e)}),i.jsx(xe.path,{...S_(.15,e),d:"M160 256C160 226.4 170 199.2 186.9 177.5C195 167 193.2 151.9 182.7 143.8C172.2 135.7 157.1 137.5 149 148C125.8 177.8 112 215.3 112 256C112 296.7 125.8 334.2 149 364C157.2 374.5 172.2 376.4 182.7 368.2C193.2 360 195 345 186.9 334.5C170 312.8 160 285.6 160 256Z",fill:"currentColor"}),i.jsx(xe.path,{...S_(.15,e),d:"M464 256C464 215.3 450.2 177.8 427 148C418.8 137.5 403.8 135.6 393.3 143.8C382.8 152 381 167 389.1 177.5C406 199.2 416 226.4 416 256C416 285.6 406 312.8 389.1 334.5C381 345 382.8 360.1 393.3 368.2C403.8 376.3 418.9 374.5 427 364C450.2 334.2 464 296.7 464 256Z",fill:"currentColor"}),i.jsx(xe.path,{...S_(0,e),d:"M259.716 227.716C252.214 235.217 248 245.391 248 256C248 266.609 252.214 276.783 259.716 284.284C267.217 291.786 277.391 296 288 296C298.609 296 308.783 291.786 316.284 284.284C323.786 276.783 328 266.609 328 256C328 245.391 323.786 235.217 316.284 227.716C308.783 220.214 298.609 216 288 216C277.391 216 267.217 220.214 259.716 227.716Z",fill:"currentColor"})]})}),q5t=({hype:e,title:t,variant:n})=>i.jsx(Bwe,{title:t,created:e?.created,posts:e?.posts??le,variant:n}),K5t=({hype:e,variant:t="subtler",className:n})=>{const{$t:r}=Q(),s=r({defaultMessage:"Latest News",id:"BlFeZAX10O"});return i.jsx(zr,{children:i.jsx(z,{variant:t==="raised"?"transparent":"subtler",className:U("rounded",n),children:i.jsx(q5t,{variant:t!=="raised"?"transparent":t,hype:e,title:s})})})},Y5t=({eventId:e,enabled:t})=>$e({queryKey:xwe(e??""),queryFn:()=>bwe({eventId:e??""}),enabled:!!e&&!!t,retry:!1,staleTime:5*60*1e3}),hWt=({league:e,story:t})=>i.jsx(Wwe,{league:e,story:t,children:i.jsxs(z,{className:"bg-subtle hover:bg-subtler gap-sm py-xs flex w-fit place-items-center rounded-full pl-3 pr-2 transition-colors",variant:"subtle",children:[i.jsx(L,{variant:"smallBold",color:"light",children:i.jsx(pe,{defaultMessage:"Watch the highlights",id:"Z2uaDmB5pt"})}),i.jsx(Vwe,{story:t,className:"p-two size-9",border:!1})]})}),Vwe=({story:e,className:t,border:n=!0})=>{const r=e?.storyThumbnailUrls?.find(s=>s.aspectRatio==="1x1")?.url||e?.storyThumbnailUrl;return i.jsx(z,{variant:"super",className:U("group rounded-full",{"p-one sm:p-three":n},t),children:i.jsx(z,{className:U({"p-two rounded-full bg-white dark:bg-black":n}),children:i.jsx(z,{className:"relative overflow-hidden rounded-full",children:i.jsx("img",{src:r,alt:e.title||"",className:U("aspect-square object-cover transition-opacity group-hover:opacity-80"),loading:"lazy"})})})})},Wwe=({league:e,story:t,children:n})=>{const{trackEvent:r}=Me(),{inApp:s}=_l(),a=f.useCallback(()=>{r("sports wsc story clicked",{eventId:t.id,league:e})},[r,e,t?.id]);return i.jsx("a",{href:t.storyUrl,target:s?void 0:"_blank",onClick:a,className:"cursor-pointer",children:n})};function Q5t({className:e,league:t,story:n}){return n?.id?i.jsx(Wwe,{league:t,story:n,children:i.jsx(Vwe,{story:n,className:e})}):null}function X5t({type:e,season:t,imgUrl:n,eventId:r}){_1("header");const{$t:s}=Q(),a="#84754E",{data:o}=Y5t({eventId:r,enabled:!!r}),l=f.useCallback(p=>{if(!p)return null;const h=new Date(p);return isNaN(h.getTime())?null:h.toLocaleDateString("en-US",{month:"short",day:"numeric"})},[]),c=l(t.start_date),u=l(t.end_date),d=f.useMemo(()=>[c&&u?s({defaultMessage:"{startDate} - {endDate},",id:"uLiKxHxStJ"},{startDate:c,endDate:u}):c||u,t.year].filter(Boolean).join(" "),[c,u,t.year,s]),m=t?e==="season"?s({defaultMessage:"{year} Season",id:"oERTY0/4Zj"},{year:t.year}):e==="tournament"?d:null:null;return i.jsxs("div",{className:"gap-sm p-md relative flex h-[120px] items-end overflow-hidden rounded-xl",style:{"--header-bg":a},children:[i.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-xl dark:after:absolute dark:after:inset-0 dark:after:rounded-xl dark:after:border dark:after:border-white/10",children:i.jsx(MO,{className:"-inset-xl !absolute !bg-[var(--header-bg,#84754E)] ![--dot-bg:var(--header-bg,#84754E)]",dotClassName:"!text-[white]",highlightClassName:"!bg-white/10"})}),i.jsx("div",{className:"gap-md flex items-end md:items-center",children:i.jsxs("div",{className:"gap-sm relative flex flex-col items-start",children:[i.jsx("img",{className:"relative w-[180px]",src:n,alt:"Laver Cup Logo"}),i.jsx(L,{variant:"small",color:"white",className:"leading-tight opacity-80",children:m}),o&&i.jsx(Q5t,{league:"atp",story:o})]})})]})}function $we({src:e,name:t,onBroken:n,className:r}){const[s,a]=f.useState(void 0),o=f.useRef(null),l=()=>{a(!0),n?.()},c=()=>{o.current&&o.current.naturalHeight>0&&a(!1)};return f.useEffect(()=>{o.current&&(o.current.complete&&o.current.naturalHeight===0?(a(!0),n?.()):a(!1))},[o,n]),s||!e?i.jsxs("svg",{viewBox:"0 0 62 62",children:[i.jsx("mask",{id:"mask0_634_1278",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"62",height:"62",children:i.jsx("path",{d:"M31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62Z"})}),i.jsxs("g",{mask:"url(#mask0_634_1278)",children:[i.jsx("path",{d:"M31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62Z",className:"fill-offsetPlus"}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31 44C39.8366 44 47 36.165 47 26.5C47 16.835 39.8366 9 31 9C22.1634 9 15 16.835 15 26.5C15 36.165 22.1634 44 31 44ZM-11 70.5C-11 57.1768 1.57462 45.9165 18.8426 42.2547C22.1373 45.2176 26.3757 47 31 47C35.6243 47 39.8627 45.2176 43.1574 42.2547C60.4254 45.9165 73 57.1768 73 70.5C73 86.7924 54.196 100 31 100C7.80404 100 -11 86.7924 -11 70.5Z",className:"fill-foreground opacity-10"})]})]}):i.jsx("img",{ref:o,src:e,className:U(r,{"opacity-0":s===void 0}),alt:t,onError:l,onLoad:c})}const gWt=({style:e,...t})=>i.jsx("div",{className:"bg-offsetPlus relative size-10 shrink-0 overflow-hidden rounded-full md:size-[60px]",style:e,children:i.jsx($we,{...t,className:"block size-full object-cover object-center"})}),Z5t=(e,t,n)=>{if(!e||!t)return null;try{return e.toLocaleString(n,{style:"currency",currency:t,notation:"compact",compactDisplay:"short"})}catch{return null}},J5t=({title:e=!0,tournamentInfo:t})=>{const{$t:n}=Q(),{season:r}=t,{info:s,competition:a}=r,{isMobileStyle:o}=ye(),l=f.useMemo(()=>[{label:n({defaultMessage:"Location",id:"rvirM238ZE"}),value:s?.complex},{label:n({defaultMessage:"Surface",id:"/AElfCMvxg"}),value:s?.surface_text},{label:n({defaultMessage:"Competitors",id:"GnmePy5BjJ"}),value:s?.number_of_competitors},{label:n({defaultMessage:"Prize Money",id:"bFVLOCMwiJ"}),value:Z5t(s?.prize_money,s?.prize_currency)},{label:n({defaultMessage:"Level",id:"y1Qr811Pys"}),value:a?.level_text}].filter(c=>c.value!=null&&c.value!==""),[s,a,n]);return o?i.jsx("div",{children:i.jsx(tMt,{children:l.map(c=>i.jsx(AC,{...c},c.label))})}):i.jsx(Pn,{header:e&&i.jsx(L,{variant:"baseSemi",className:"ml-md mb-sm",children:n({defaultMessage:"Tournament Info",id:"Z/95hzDc2J"})}),children:i.jsx(eMt,{children:l.map(c=>i.jsx(AC,{...c},c.label))})})},eMt=({children:e})=>i.jsx("div",{className:"p-md gap-sm flex flex-col overflow-hidden",children:i.jsx(z,{className:"gap-sm grid grid-cols-[1fr_1fr_1fr] lg:grid-cols-[1fr_1fr_1fr_1fr]",children:e})}),tMt=({children:e})=>i.jsx("div",{className:"gap-sm -mx-md scrollbar-none flex overflow-x-auto",children:i.jsx("div",{className:"px-md gap-sm flex",children:e})});function AC({label:e,value:t,className:n}){const{isMobileStyle:r}=ye(),s=r?Pn:z,a=r?"py-sm px-[12px]":void 0;return t==null||t===""?null:i.jsxs(s,{className:U(a,n),children:[i.jsx(L,{variant:r?"tinyRegular":"small",color:"light",className:r?"whitespace-nowrap":void 0,children:e}),i.jsx(L,{variant:"smallBold",children:t})]})}function nMt({teams:e}){const{europe:t,world:n}=wx();return i.jsxs(z,{className:"gap-lg mt-lg flex flex-col",children:[i.jsxs(z,{children:[i.jsx(jJ,{name:"europe",color:t,prevWinner:!0}),i.jsx(RJ,{config:e.europe,color:t,team:"europe"})]}),i.jsxs(z,{children:[i.jsx(jJ,{name:"world",color:n}),i.jsx(RJ,{config:e.world,color:n,team:"world"})]})]})}const jJ=({name:e,color:t,prevWinner:n})=>{const r=e==="europe"?"Europe":"World",{$t:s}=Q();return i.jsxs("div",{className:"gap-sm mb-sm pl-sm md:pl-md flex items-center",children:[i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx("div",{className:"flex size-6 items-center justify-center rounded-md",style:{backgroundColor:t},children:i.jsx("img",{src:Gwe[e],alt:e})}),i.jsx(L,{variant:"baseSemi",children:s({defaultMessage:"Team {name}",id:"HTz+p5sZsy"},{name:r})})]}),n&&i.jsxs(z,{className:"px-sm py-xs gap-xs ml-auto flex items-center rounded-full border",children:[i.jsx(me,{icon:qR,size:"2xs",className:"opacity-50"}),i.jsx(L,{variant:"tinyRegular",color:"light",children:s({defaultMessage:"Defending Champion",id:"4+F8AQjH+h"})})]})]})},RJ=({config:e,color:t,team:n})=>{const{$t:r}=Q(),{captain:s,viceCaptain:a,players:o}=e;return i.jsxs(Pn,{className:"p-md relative overflow-hidden border-none",children:[i.jsx("div",{className:"absolute inset-0 opacity-10 dark:opacity-25",style:{backgroundColor:t,maskImage:"linear-gradient(to bottom right, black, transparent 40%, rgba(0, 0, 0, 0))"}}),i.jsx("div",{className:"rounded-inherit absolute inset-0 border opacity-10",style:{borderColor:t,maskImage:"linear-gradient(to bottom right, black, transparent 40%, rgba(0, 0, 0, 0))"}}),i.jsx(z,{className:"rounded-inherit absolute inset-0 border"}),i.jsxs("div",{className:"relative",children:[i.jsxs(rMt,{children:[i.jsx(AC,{label:r({defaultMessage:"Captain",id:"n47Ce9YDZE"}),value:s,className:"gap-sm items-center !bg-transparent md:flex"}),i.jsx(AC,{label:r({defaultMessage:"Vice Captain",id:"M46+waT3VZ"}),value:a,className:"gap-sm items-center !bg-transparent md:flex"})]}),i.jsx(z,{className:"gap-md flex flex-col",children:o.map(l=>i.jsx(sMt,{...l,team:n},l.name))})]})]})},rMt=({children:e})=>{const{isMobileStyle:t}=ye();return t?i.jsx(z,{className:"pb-md mb-md gap-sm flex border-b",children:e}):i.jsx(z,{className:"pb-md mb-md gap-lg flex items-center border-b",children:e})},sMt=({name:e,img:t,rank:n,country:r,description:s,team:a})=>{const{europe:o,world:l}=wx(),c=a==="europe"?o:l;return i.jsxs(z,{className:"grid grid-cols-[1fr_auto] gap-3",children:[i.jsxs(z,{className:"size-xl relative translate-y-1",children:[i.jsx($we,{src:t,name:e,className:"shadow-overlay aspect-square overflow-hidden rounded-full"}),i.jsx($p,{countryCode:r,className:"shadow-subtle ring-offset absolute left-1/2 top-full w-4 -translate-x-1/2 -translate-y-1/2 rounded-sm ring-2"})]}),i.jsxs(z,{children:[i.jsxs(z,{className:"gap-sm flex items-center justify-start",children:[i.jsx(L,{variant:"baseSemi",children:e}),i.jsxs(L,{variant:"tiny",color:"light",className:"relative rounded-md px-[6px] py-0.5",children:[i.jsx("span",{className:"rounded-inherit mix-blend-hardlight absolute inset-0 opacity-10 dark:opacity-20",style:{backgroundColor:c}}),i.jsx("span",{className:"relative inline-flex translate-y-px",style:{color:c},children:n})]})]}),i.jsx(L,{variant:"small",color:"light",children:s})]})]})},Hwe=A.memo(({children:e,maxFaces:t=3,showMore:n=!0,clickable:r=!1,size:s="medium",onAvatarClick:a,backgroundClass:o})=>{const l=A.Children.count(e);return i.jsxs(z,{onClick:r?a:void 0,bgHover:r?"subtler":void 0,className:U("group flex items-center",{"p-xs cursor-pointer rounded-full transition-all":r}),children:[A.Children.map(e,(c,u)=>u<t?i.jsx(z,{variant:"background",className:U("rounded-full group-hover:bg-transparent",{"relative transition-all duration-200 ease-in-out":u!==0,"p-two group-hover:-ml-xs -ml-[10px]":u!==0&&s==="small","p-two group-hover:-ml-sm -ml-[16px]":u!==0&&s==="medium"},o),children:i.jsx("div",{children:c})},u):null),n&&l>t&&i.jsx(z,{children:i.jsxs(L,{variant:"smallCaps",color:"light",className:"px-xs",children:["+",l-t]})})]})});Hwe.displayName="AvatarList";const IJ=({score:e,team:t,players:n,last:r})=>{const{$t:s}=Q(),{isMobileStyle:a}=ye(),o=Gwe[t.toLowerCase()],{europe:l,world:c}=wx(),u=t.toLowerCase()==="europe"?l:c;return i.jsxs(Pn,{className:U("relative flex items-center overflow-hidden border-none",{"flex-row-reverse":r,"gap-sm p-[12px]":a,"p-md gap-md":!a}),children:[i.jsxs("div",{className:"rounded-inherit absolute inset-0",children:[i.jsx("div",{className:"rounded-inherit absolute inset-0 opacity-10 dark:opacity-25",style:{backgroundColor:u,maskImage:r?"linear-gradient(to right, transparent, black)":"linear-gradient(to left, transparent, black)"}}),i.jsx("div",{className:"rounded-inherit absolute inset-0 border opacity-10",style:{borderColor:u}})]}),i.jsx("div",{className:U("relative flex aspect-square w-12 items-center justify-center rounded-md",{hidden:a}),style:{backgroundColor:u},children:i.jsx("img",{src:o,alt:t,className:"relative h-auto w-10 object-contain"})}),i.jsx("div",{className:"gap-sm relative flex flex-col items-center",children:i.jsxs("div",{className:U("gap-xs flex flex-col",{"items-end":r,"items-start":!r}),children:[i.jsx(L,{variant:"smallBold",className:"whitespace-nowrap",children:s({defaultMessage:"Team {team}",id:"5gr4uNrlJ2"},{team:t})}),n&&i.jsx(z,{className:"gap-sm flex flex-col",children:i.jsx(Hwe,{size:"small",backgroundClass:"bg-transparent",showMore:!1,maxFaces:6,children:n.filter(d=>d.img).map(d=>i.jsx(Rt,{size:"small",user:d.img??"",className:"shadow-overlay rounded-full bg-white",showBackground:!1},d.img))})})]})}),i.jsxs("div",{className:U("-mt-xs relative flex flex-col items-center",{"mr-sm ml-auto":!r,"ml-sm mr-auto":r}),children:[i.jsx(L,{variant:a?"section-title":"page-title",className:"leading-none",color:e>0?"default":"light",children:i.jsx(ii,{animated:!0,value:e,format:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}})}),i.jsx(L,{variant:a?"tinyRegular":"small",color:"light",className:U("leading-none",{"-mt-xs":!a}),children:s({defaultMessage:"{count, plural, one {point} other {points}}",id:"OTgg6EBiyt"},{count:e})})]})]})};function aMt({scoreEurope:e,scoreWorld:t,teams:n}){const{$t:r}=Q(),{europe:s,world:a}=wx();return i.jsxs(z,{className:"grid grid-cols-[1fr_auto_1fr] items-center",children:[i.jsx(IJ,{score:e,team:r({defaultMessage:"Europe",id:"X3AIiKlYIf"}),players:n?.europe.players}),i.jsxs(z,{className:"relative z-10 mx-[-12px] flex size-8 items-center justify-center rounded-full shadow-md",variant:"raised",children:[i.jsxs("div",{className:"absolute inset-0 opacity-25",children:[i.jsx("div",{className:"absolute inset-0 rounded-full border",style:{borderColor:a,maskImage:"linear-gradient(to right, transparent, black)"}}),i.jsx("div",{className:"absolute inset-0 rounded-full border",style:{borderColor:s,maskImage:"linear-gradient(to left, transparent, black)"}})]}),i.jsx(L,{variant:"smallCaps",color:"light",className:"relative text-center",children:"VS"})]}),i.jsx(IJ,{score:t,team:r({defaultMessage:"World",id:"jqdzk6QquP"}),players:n?.world.players,last:!0})]})}const zwe="laver-cup-client-page",oMt=async e=>{const{error:t,data:n}=await ne.GET("/rest/sports/tennis/atp/tournaments/lavercup",zwe,{params:{query:{year:e}},timeoutMs:0});if(t)throw new Ee("API_CLIENTS_ERROR",{cause:t,details:{year:e}});return n},E_={europe:{light:"#003359",dark:"#006CBD"},world:{light:"#782327",dark:"#C53A40"}},wx=()=>{const{colorScheme:e}=Pr();return{europe:e==="dark"?E_.europe.dark:E_.europe.light,world:e==="dark"?E_.world.dark:E_.world.light}},Gwe={europe:"https://lavercup.com/wp-content/themes/lavercup_spark/assets/graphics/trophy-europe-no-text.svg",world:"https://lavercup.com/wp-content/themes/lavercup_spark/assets/graphics/trophy-world-no-text.svg"},iMt=()=>+(Dt().get("year")??new Date().getFullYear());function yWt(){const e=iMt(),{data:t,isLoading:n}=$e({...Ov,queryFn:()=>oMt(e),queryKey:["/sports/atp/tournaments/lavercup"]}),{data:r}=$e({...Ov,queryFn:()=>_we({league:`${e} Laver Cup`,reason:zwe}),queryKey:["/sports/hype/lavercup"]}),{$t:s}=Q(),a=f.useMemo(()=>({tournamentInfo:{title:s({defaultMessage:"Tournament Info",id:"Z/95hzDc2J"}),id:"tournamentInfo",ref:f.createRef(),show:!0},schedule:{title:s({defaultMessage:"Schedule",id:"hGQqkWwmJD"}),id:"schedule",ref:f.createRef(),show:!!t?.events&&t?.events?.length>0},participants:{title:s({defaultMessage:"Participants",id:"zx0myyxie/"}),id:"participants",ref:f.createRef(),show:!!t?.teams},latestNews:{title:s({defaultMessage:"Latest News",id:"BlFeZAX10O"}),id:"latestNews",show:!0,ref:f.createRef()}}),[s,t?.teams,t?.events]),o=f.useMemo(()=>Object.values(a),[a]);if(!t?.tournamentInfo||n)return null;const l=t.events.map(p=>p.team_1.id),c=t.events.map(p=>p.team_2.id),u=t.brands.filter(p=>c.includes(String(p.teamId))),d=t.brands.filter(p=>l.includes(String(p.teamId))),m={world:u,europe:d};return i.jsx("div",{children:i.jsxs(ywe,{entries:o,children:[i.jsxs("div",{className:"gap-sm flex flex-col",children:[i.jsx(X5t,{season:t.tournamentInfo.season,league:"atp",type:"tournament",imgUrl:"/static/images/sports/atp/laver-cup-logo.svg",eventId:"lavercup"}),i.jsxs("div",{className:"gap-sm flex flex-col",children:[i.jsx(J5t,{tournamentInfo:t.tournamentInfo,title:!1}),i.jsx(aMt,{scoreEurope:t.scoreEurope,scoreWorld:t.scoreWorld,teams:t.teams})]})]}),i.jsx(D6,{ref:a.schedule?.ref,show:a.schedule?.show,children:i.jsx(XMt,{events:t.events,players:m})}),i.jsx(D6,{ref:a.participants?.ref,show:a.participants?.show,children:i.jsx(nMt,{teams:t.teams})}),i.jsx(D6,{show:a.latestNews?.show,ref:a.latestNews?.ref,children:i.jsx(K5t,{hype:r??null,variant:"raised"})}),i.jsx(wwe,{})]})})}const lMt=e=>{try{const t=e.split("-").map(Number);if(t.length!==3||t.some(isNaN))return null;const[n,r,s]=t;return new Date(n,r-1,s)}catch{return null}},cMt=({selectedDate:e,eventsByDay:t,setSelectedDate:n})=>{const r=f.useMemo(()=>Object.keys(t),[t]),{$t:s}=Q();return!r.length||r?.length<=1?i.jsx(L,{variant:"baseSemi",className:"ml-md mb-sm",children:s({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}):i.jsx("div",{className:"mb-sm gap-sm flex flex-row justify-around",children:r.map(a=>{const o=lMt(a);return o?i.jsx(uMt,{date:o,selected:e.toDateString()===o.toDateString(),onClick:()=>n(o)},a):null})})},uMt=({date:e,selected:t,onClick:n})=>{const r=e.toLocaleDateString("en-US",{weekday:"short"}),s=e.toLocaleDateString("en-US",{day:"numeric"}),{isMobileStyle:a}=ye();return i.jsxs("button",{className:"group flex flex-1 appearance-none flex-col items-center gap-1 rounded-lg",onClick:n,children:[i.jsx(z,{className:U("flex items-center justify-center rounded-full duration-150",{"group-hover:bg-offset":!t,"size-8":a,"size-10":!a}),variant:t?"textColor":"transparent",children:i.jsx(L,{variant:a?"baseSemi":"section-title",color:t?"defaultInverted":"default",children:s})}),i.jsx(L,{variant:t?"tiny":"tinyRegular",color:t?"default":"light",children:r})]})},H9=({value:e,digitClassName:t,className:n})=>{const[r,s]=f.useState(!1),a=String(e).split("");return f.useEffect(()=>{s(!0)},[]),i.jsx("div",{className:U("flex",n),children:a.map((o,l)=>isNaN(parseInt(o))?i.jsx("span",{className:t,children:o},l):i.jsx(dMt,{className:t,value:parseInt(o),animate:r,idx:l,hasValue:+e.replace(/[^\d.-]/g,"")>0},l))})},dMt=({value:e,className:t,hasValue:n,animate:r,idx:s})=>{const[a,{height:o}]=ml();return i.jsxs("div",{className:"relative overflow-hidden",style:{maskImage:"linear-gradient(to bottom, transparent, black 4px, black calc(100% - 4px), transparent)"},children:[i.jsx("div",{className:"pointer-events-none flex opacity-0",ref:a,children:i.jsx("span",{className:t,children:"0"})}),i.jsx("div",{className:"absolute inset-0",children:i.jsx(xe.div,{initial:{opacity:.25},animate:{opacity:r&&n?1:void 0,y:r?-1*e*o:void 0},className:"flex flex-col",transition:{y:{ease:hn,duration:1,delay:s*.1},opacity:{ease:"linear",duration:.5}},children:Array.from({length:10}).map((l,c)=>i.jsx("span",{className:U("flex",t),children:c},c))})})]})};function PJ(e){return!isNaN(new Date(e).getTime())}function OJ(e){const t=e+"+00:00";return PJ(t)?t:PJ(e)?e:null}function fMt(e){if(typeof e.startDate=="string")return{full:OJ(e.startDate)??"",dateType:"UTC",year:0,month:0,date:0,hour:0,minute:0};const t=e.startDate?.find(r=>r.dateType==="UTC");if(!t)return;const n=OJ(t.full);if(n)return{...t,full:n}}function vWt(e){return!isNaN(e.hour)&&!isNaN(e.minute)}function mMt(e){const t=e?.tvStations?.[0]?.name;switch(t){case"Amazon Prime Video":return"Prime Video";default:return t}}function pMt(e){return e?.venue?.name||""}function hMt(e){return[e?.venue?.city,e?.venue?.state?.abbreviation].filter(Boolean).join(", ")}function gMt(e,t){const n=e?.[0]?.forecasts?.[0],r=n?.condition;return{temperature:n?.temperature?.find(a=>a.temperatureScaleId===(t?2:1)),weatherCondition:r}}function gg(e){return typeof e.eventStatus=="string"?e.eventStatus==="live":e?.eventStatus?.eventStatusId===2}function xf(e){return typeof e.eventStatus=="string"?e.eventStatus==="final":e.eventStatus?.eventStatusId===4}function xWt(e){return gg(e)||xf(e)}function bWt(e,t){return mx(e.teams)[1]?.teamId===t.teamId}function qwe(e,t=4){return t===2?e.period===1&&e.minutes===0&&e.seconds===0&&e.isActive===!1:e.period===2&&e.minutes===0&&e.seconds===0&&e.isActive===!1}function _Wt(e){return e.status==="live"}function wWt(e){return e.status==="final"}function CWt(e){return"id"in e}function SWt(e,t){return new Date(e.datetime).toLocaleString(t,{month:"short",day:"numeric"})}const yMt=dt({perplexitySports:{defaultMessage:"{pplx} Sports",id:"K65/hgZBjY"},teamVsTeam:{defaultMessage:"{team1} vs {team2}",id:"lyaxuodMxh"},nfl:{defaultMessage:"NFL",id:"Lv6pQppd/V"},nba:{defaultMessage:"NBA",id:"D+pbqZQpNj"},wnba:{defaultMessage:"WNBA",id:"avDAamqQm4"},ncaam:{defaultMessage:"NCAAM",id:"gC9NSK3/R6"},ncaaw:{defaultMessage:"NCAAW",id:"eERAIF8MIh"},cricket:{defaultMessage:"Cricket",id:"hJ+aKKEPPW"},conference:{defaultMessage:"Conference",id:"E0mu0BuhfL"},division:{defaultMessage:"Division",id:"dETzL9JuSD"},league:{defaultMessage:"League",id:"P3y4FpCWKK"},nflByeNote:{defaultMessage:"Plays lowest remaining seed",id:"ivzjhdMH5D"},playoffBracket:{defaultMessage:"Playoff Bracket",id:"5T8u2ZRrKO"},watchOn:{defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},overview:{defaultMessage:"Overview",id:"9uOFF3L8kp"},highlights:{defaultMessage:"Highlight Videos",id:"J4ZW4MNVky"},moreAboutNfl:{defaultMessage:"More about the NFL",id:"JGDrER55OW"},pregameHighlights:{defaultMessage:"Pregame Highlights",id:"pTASonM2gu"},gameHighlights:{defaultMessage:"Game Highlights",id:"nX0XrAiLIA"},final:{defaultMessage:"Final",id:"6/JzkWi0di"},videos:{defaultMessage:"Videos",id:"4XfMuxy3FO"},playerPhotos:{defaultMessage:"{player} Photos",id:"YRfYXYpNfE"},noInjuries:{defaultMessage:"No Team Injuries",id:"9D6SP/NB3G"},seasonLeaders:{defaultMessage:"Season Leaders",id:"lT3vL7pgxM"},gameLeaders:{defaultMessage:"Game Leaders",id:"BpPX7CGEMm"},bettingOdds:{defaultMessage:"Betting Odds",id:"taELAJbik0"},teamComparisons:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},seasonComparisons:{defaultMessage:"Season Comparison",id:"1fVXZNAk6A"},seasonPerformance:{defaultMessage:"Season Performance",id:"+XGEnxB3qU"},injuries:{defaultMessage:"Injuries",id:"+9VW01o/qa"},nextGame:{defaultMessage:"Next Game",id:"GHv/zzzbyP"},gameWinnerOdds:{defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"},offense:{defaultMessage:"Offense",id:"gkhnHmdS3n"},pointsPerGame:{defaultMessage:"Points Per Game",id:"oiTKA0iiEO"},totalYardsPerGame:{defaultMessage:"Total Yards Per Game",id:"1hUUAbKwNU"},passingYardsPerGame:{defaultMessage:"Passing Yards Per Game",id:"NZ1ECBKywu"},rushingYardsPerGame:{defaultMessage:"Rushing Yards Per Game",id:"XaZf8sSKrF"},thirdDownConversionRate:{defaultMessage:"Third Down Conversion Rate",id:"ffvMztEyfa"},redZoneEfficiency:{defaultMessage:"Red Zone Efficiency",id:"KD1EYvEBXL"},freeThrowsMade:{defaultMessage:"Free Throws Made",id:"qngxYnoujX"},fieldGoalsMade:{defaultMessage:"Field Goals Made",id:"8hkrjZ6IYu"},turnovers:{defaultMessage:"Turnovers",id:"ix10Ldc+00"},blocks:{defaultMessage:"Blocked Shots",id:"H+onZtcuVa"},steals:{defaultMessage:"Steals",id:"6WYTxwolV8"},threePointFieldGoalsMade:{defaultMessage:"Three Point Field Goals Made",id:"sHR4TS9YOq"},defense:{defaultMessage:"Defense",id:"7Y+mK49r3z"},pointsAllowed:{defaultMessage:"Points Allowed",id:"oIj9CdpmXY"},turnoverDiff:{defaultMessage:"Turnover Diff",id:"XAiSFr028u"},pointsAllowedPerGame:{defaultMessage:"Points Allowed Per Game",id:"crP3Q4G1sg"},assistsPerGame:{defaultMessage:"Assists Per Game",id:"iVrCmaL1xp"},reboundsPerGame:{defaultMessage:"Rebounds Per Game",id:"luHpkidK/P"},fieldGoalPercentage:{defaultMessage:"Field Goal Percentage",id:"eFfteQzdQj"},blocksPerGame:{defaultMessage:"Blocks Per Game",id:"GZdk7v9wsc"},stealsPerGame:{defaultMessage:"Steals Per Game",id:"AsfNOOP1Pv"},threePointPercentage:{defaultMessage:"Three Point Percentage",id:"47T2zZRSFt"},freeThrowPercentage:{defaultMessage:"Free Throw Percentage",id:"/G3PY4IYf7"},yardsAllowedPerGame:{defaultMessage:"Yards Allowed Per Game",id:"B15PuOjR7R"},passingYardsAllowed:{defaultMessage:"Passing Yards Allowed",id:"0HGZ3V81cB"},rushingYardsAllowed:{defaultMessage:"Rushing Yards Allowed",id:"ftA+LXAEQL"},firstDowns:{defaultMessage:"First Downs",id:"aHqkLRqHjr"},penalties:{defaultMessage:"Penalties",id:"fa38C8rLbM"},penaltyYards:{defaultMessage:"Penalty Yards",id:"ZC7MShyuR1"},possessionMinutes:{defaultMessage:"Possession Minutes",id:"khpuL1ieoV"},fumblesLost:{defaultMessage:"Fumbles Lost",id:"IzuROyqz+7"},interceptionsThrown:{defaultMessage:"Interceptions Thrown",id:"tmQq6pHbYi"},other:{defaultMessage:"Other",id:"/VnDMl81rh"},totalYards:{defaultMessage:"Total Yards",id:"veZmYTt6MN"},points:{defaultMessage:"Points",id:"P0PLlQxVoe"},turnoversPerGame:{defaultMessage:"Turnovers Per Game",id:"uTgBwtAPGV"},foulsPerGame:{defaultMessage:"Fouls Per Game",id:"SMqdG+QmGB"},penaltiesPerGame:{defaultMessage:"Penalties Per Game",id:"9wKTlQSR/j"},penaltyYardsPerGame:{defaultMessage:"Penalty Yards Per Game",id:"Jm5WpbiViO"},gamePreview:{defaultMessage:"Game Preview",id:"GvobedfNcN"},gameSummary:{defaultMessage:"Game Summary",id:"+eeGQlcxzW"},gameLive:{defaultMessage:"LIVE",id:"UqyNCCygYW"},carries:{defaultMessage:"{value} carries",id:"rq9+96YlFa"},receptions:{defaultMessage:"{value} rec",id:"sTvPmiSZD7"},pointsStat:{defaultMessage:"{value} points",id:"UrDn6NGZfb"},reboundsStat:{defaultMessage:"{value} rebounds",id:"9vdJ9I7bdt"},assists:{defaultMessage:"Assists",id:"PqEAty/m8X"},rebounds:{defaultMessage:"Rebounds",id:"VXRs2esXLO"},assistsStat:{defaultMessage:"{value} assists",id:"bWLYwKNgJ3"},passingYards:{defaultMessage:"Passing Yards",id:"aQGqkCWSsl"},rushingYards:{defaultMessage:"Rushing Yards",id:"MpZ23vuQex"},receivingYards:{defaultMessage:"Receiving Yards",id:"GbfiEHr37J"},bettingOddsSpread:{defaultMessage:"Spread",id:"B7hDsYrvQe"},bettingOddsTotal:{defaultMessage:"Total",id:"MJ2jZQxQnT"},bettingOddsMoneyline:{defaultMessage:"Money Line",id:"kW0GAibgTH"},injuryReport:{defaultMessage:"Injury Report",id:"/YN/gLAPJU"},player:{defaultMessage:"Player",id:"1AGL1rdLFR"},position:{defaultMessage:"Position",id:"U6qGuOVs+L"},injury:{defaultMessage:"Injury",id:"PQiOxuIu/I"},status:{defaultMessage:"Status",id:"tzMNF3jWoU"},noRelatedGames:{defaultMessage:"No related games",id:"Ot5mpNSKsp"},teamComparison:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},noUpdatesAvailable:{defaultMessage:"No updates available",id:"0Pg/1iJOgA"},halftime:{defaultMessage:"Halftime",id:"iC0AL294Dr"},viewMatchDetails:{defaultMessage:"View Game Details",id:"jBJqA9z9lD"},viewStandings:{defaultMessage:"View Standings",id:"oaPWiK0oYi"},followGameLive:{defaultMessage:"Follow Game Live",id:"CWFVI1BPrZ"},latestNews:{defaultMessage:"Latest News",id:"BlFeZAX10O"},imageSource:{defaultMessage:"Image source: {source}",id:"O/d/1HvfyG"},week:{defaultMessage:"Week {week}",id:"RE27WbGe9C"},total:{defaultMessage:"T",id:"sjlqAC/nrs"},team:{defaultMessage:"Team",id:"wsUmh9XWBm"},sources:{defaultMessage:"Data: Stats Perform  Player Photos: Associated Press",id:"g0CN3T/ISr"},nflSeason:{defaultMessage:"{year} NFL Season",id:"n6vqth75CA"},nbaSeason:{defaultMessage:"{year} NBA Season",id:"rrCa+R0f7X"},undrafted:{defaultMessage:"Undrafted",id:"ZpiNk0Z5Np"},pre:{defaultMessage:"Pre",id:"hMX10Ja0Xm"},preseason:{defaultMessage:"Preseason",id:"HENGOVahPR"},regularSeason:{defaultMessage:"Regular Season",id:"Ea9LD9vfyQ"},postSeason:{defaultMessage:"Postseason",id:"xvhy/ycHzu"},proBowl:{defaultMessage:"Pro Bowl",id:"pxho4sLngT"},wildCardPlayoff:{defaultMessage:"Wild Card Playoff",id:"EvhXzrm4Ix"},divisionalPlayoff:{defaultMessage:"Divisional Playoff",id:"p1LmAErYhB"},conferenceChampionship:{defaultMessage:"Conference Championship",id:"AVW9uMIxMK"},superBowl:{defaultMessage:"Super Bowl",id:"khEvs6DTrv"},relatedGames:{defaultMessage:"Related Games",id:"Vii6YKE9t9"},noEvents:{defaultMessage:"No events",id:"xPFOlw/kys"},showAllTeams:{defaultMessage:"Show all teams",id:"k112pFsCZU"},tba:{defaultMessage:"TBA",id:"ZfAWFLTzx/"},live:{defaultMessage:"Live",id:"Dn82ALx/+V"},standings:{defaultMessage:"Standings",id:"o2v7SB+ObO"},schedule:{defaultMessage:"Schedule",id:"hGQqkWwmJD"},wins:{defaultMessage:"Wins",id:"f++h1REg9b"},losses:{defaultMessage:"Losses",id:"eQJCl5DaWL"},ties:{defaultMessage:"Ties",id:"LYMVZdnuVv"},winPct:{defaultMessage:"Win Pct",id:"sHcBpWJlFR"},pointsFor:{defaultMessage:"PF",id:"zG5bX7TOdX"},pointsAgainst:{defaultMessage:"PA",id:"+09k0C5AlI"},streak:{defaultMessage:"Str",id:"/K3fzWE90S"},teamSchedule:{defaultMessage:"{year} {team} Schedule",id:"1Z4UTJhHPZ"},home:{defaultMessage:"Home",id:"ejEGdxSUGs"},away:{defaultMessage:"Away",id:"0JXAskjV4d"},previous:{defaultMessage:"Previous",id:"JJNc3cbYIJ"},upcoming:{defaultMessage:"Upcoming",id:"6/aEFZbs2i"},relatedTeams:{defaultMessage:"Related Teams",id:"ZzOufqyGoL"},seasonStats:{defaultMessage:"{year} Season Stats",id:"0p+BU5Jj9p"},coachName:{defaultMessage:"Coach",id:"uQg6UcdK4Y"},diff:{defaultMessage:"Diff",id:"Fm3StihZV6"},teams:{defaultMessage:"Teams",id:"DNeuzb5ky2"},seasonHighlights:{defaultMessage:"Season Highlights",id:"u0NXd7YWeO"},playByPlay:{defaultMessage:"Play by Play",id:"g2y6uMg3RU"},playSummary:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"},activeDrive:{defaultMessage:"Active Drive",id:"9WRCeRXYnG"},drive:{defaultMessage:"Drive",id:"1YAWJ379IQ"},gameDown:{defaultMessage:"{down} Down",id:"D6NiYuphxA"},noLeader:{defaultMessage:"No Leader",id:"nEuoHaJ7ix"},endOfPeriod:{defaultMessage:"End of Quarter",id:"tY+g5ifXSh"},playSubtitle:{defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},downloadIosNotificationCta:{defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"},downloadIosNotificationCtaSub:{defaultMessage:"Scan the QR code to download the app",id:"1j+FmhPZ8J"},iosNotificationsCta:{defaultMessage:"Turn on live game updates",id:"B3DARItQiv"},iosNotificationsCtaOff:{defaultMessage:"Turn off live game updates",id:"MJ3BTMxxFR"},iosNotificationsCtaSub:{defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"},iosNotificationsCtaSubOff:{defaultMessage:"You are subscribed to live game alerts.",id:"ESQg4GtLBi"},moreGames:{defaultMessage:"More Games",id:"ssuX7Q5/hn"},goals:{defaultMessage:"Goals",id:"XHLYdJ4a0Y"},shots:{defaultMessage:"Shots",id:"MtAfOi/9Z4"},shotsOnTarget:{defaultMessage:"Shots on Target",id:"XypPx7GnSa"},fouls:{defaultMessage:"Fouls",id:"ULgxB5+kkl"},yellowCards:{defaultMessage:"Yellow Cards",id:"OgfXSatXn2"},redCards:{defaultMessage:"Red Cards",id:"iM3q/GTmBa"},corners:{defaultMessage:"Corners",id:"SG1mA2ViLF"},saves:{defaultMessage:"Saves",id:"OXuG5Tbo0I"},passes:{defaultMessage:"Passes",id:"zt/qs3N6e3"},pointsWon:{defaultMessage:"Points Won",id:"XinSz02Vcr"},totalWinners:{defaultMessage:"Winners",id:"upRjwyuG/1"},forehandWinners:{defaultMessage:"Forehand Winners",id:"dhq2amJ4Pc"},backhandWinners:{defaultMessage:"Backhand Winners",id:"7LkIR0bV+s"},aces:{defaultMessage:"Aces",id:"sZJa/S3ekv"},doubleFaults:{defaultMessage:"Double Faults",id:"+3VTXdG9VS"},firstServePercentage:{defaultMessage:"First Serve %",id:"L5NV6vruFx"},firstServePointsWonPercentage:{defaultMessage:"First Serve Points Won %",id:"QOFjHS/pnz"},secondServePointsWonPercentage:{defaultMessage:"Second Serve Points Won %",id:"GfQX2xkNys"},breakpointsWon:{defaultMessage:"Break Points Won",id:"vuAxPAew9k"},totalUnforcedErrors:{defaultMessage:"Unforced Errors",id:"4F6jzAUiDp"}}),Kwe=(e,t)=>{if(!t)return"";const n=yMt[t];return n?e(n):""};function vMt(e,t){const{$t:n}=Q();if(t){if(e==="nfl")switch(t){case 19:return"Wildcard Round";case 20:return"Divisional Round";case 21:return"Conference Round";case 22:return"Super Bowl";default:return n({defaultMessage:"Week {week}",id:"RE27WbGe9C"},{week:t})}return n({defaultMessage:"Week {week}",id:"RE27WbGe9C"},{week:t})}}function xMt(e,t){return wCt(e.event.teams,e.brands,t).map(s=>{const a=vCt(s.teamId,e);return{...s,winProbability:a?.probability??0}})}function Ywe({event:e,league:t}){const{$t:n,formatNumber:r}=Q(),s=mMt(e?.event),{isMobileStyle:a}=ye(),o=s?a?s:n({defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},{network:s}):"",l=Kwe(n,t),c=pMt(e.event),u=hMt(e.event),{locale:d}=Q(),[m,p]=f.useState(!1),{temperature:h,weatherCondition:g}=gMt(e.weather,m),y=h?.degrees?r(h?.degrees,{style:"unit",unit:m?"celsius":"fahrenheit"}):"",[v,x]=xMt(e,t),b=vMt(t,e.event.week),_=e.event.eventRound?.name||null;return{whereToWatch:o,league:t,gameVenue:c,gameLocation:u,roundName:_,locale:d,celcius:m,setCelcius:p,weatherCondition:g,degrees:y,team1:v,team2:x,weekLabel:b,leagueName:l}}const Qwe=({event:e,final:t,className:n,isLive:r})=>{const{$t:s}=Q(),{locale:a}=Q(),{isMobileStyle:o}=ye(),l=fMt(e);if(!l)return null;const c=l.year===new Date().getFullYear(),u=qwe(e.eventStatus,e.scheduledPeriods),d=pE(new Date(l.full))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):new Date(l.full).toLocaleString(a,{weekday:c||o?void 0:"short",month:o?"numeric":"short",day:"numeric",year:c?void 0:"numeric"}),m=e?.scheduledPeriods==2?`H${e.eventStatus?.period}`:`Q${e.eventStatus?.period}`;return i.jsxs(z,{className:U("gap-xs p-sm md:px-sm flex flex-1 flex-col items-center justify-center md:gap-0",n),children:[!r&&i.jsx(L,{variant:"smallBold",className:"text-center leading-tight",children:d}),r?i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs(gc,{className:"gap-xs text-super",children:[i.jsx(br,{id:"period",children:i.jsx(L,{variant:"smallBold",color:"super",className:"text-center uppercase leading-tight",children:u?s({defaultMessage:"Halftime",id:"iC0AL294Dr"}):m})}),!u&&i.jsx(br,{id:"time",children:i.jsxs(L,{variant:"smallBold",color:"super",className:"text-center",children:[e.eventStatus.minutes,":",e.eventStatus.seconds?.toString()?.padStart?.(2,"0")]})})]}),i.jsx(Xwe,{})]}):i.jsx(L,{color:"light",variant:o?"tiny":"small",className:"text-center",children:t?s({defaultMessage:"Final",id:"6/JzkWi0di"}):l.full&&!e.isTba?new Date(l.full).toLocaleTimeString(a,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):"TBA"})]})},Xwe=f.memo(({className:e})=>{const[t,n]=f.useState(!1);return f.useEffect(()=>{const r=setInterval(()=>{n(s=>!s)},1500);return()=>clearInterval(r)},[]),i.jsx(xe.div,{className:U("h-0.5 w-16 overflow-hidden rounded-full md:w-20",e),children:i.jsx("div",{className:U("-mx-5 flex h-full",{"justify-end":t},{"justify-start":!t}),children:i.jsx(xe.div,{className:U("bg-super h-full w-6 rounded-full"),layout:"position",transition:{duration:1.5,ease:hn}})})})});Xwe.displayName="LiveIndicator";const EWt=({seriesEvents:e,league:t,eventId:n,gameLabel:r})=>{const{isMobileStyle:s}=ye(),{inApp:a}=_l(),o=Dt(),l=_t(),{$t:c}=Q(),u=c({defaultMessage:"Game",id:"Am8glJTtny"}),d=r??u,m=f.useMemo(()=>!e?.length||!t?[]:e.map((g,y)=>{const v=g.eventId===n,x=PL({href:`/sports/${t}/events/${g.eventId}`,inApp:a,queryParams:o});return{type:"default",text:`${d} ${y+1}`,onClick:()=>{!v&&x&&l.push(x)},active:v}}),[e,t,l,n,d,a,o]);if(!e?.length)return null;const p=n?e.findIndex(g=>g.eventId===n):0,h=n?p+1:1;return i.jsx(Jt,{items:m,isMobileStyle:s,menuItemClassName:"items-center",children:i.jsx(ge,{size:"small",chevron:!0,text:`${d} ${h}`})})},Zwe=({title:e,gameVenue:t,gameLocation:n,roundName:r,setCelcius:s,weatherCondition:a,degrees:o,whereToWatch:l,weekLabel:c,isFinal:u})=>{const{locale:d}=Q(),m=a&&o,p=l&&!u||c;return i.jsxs(z,{className:"gap-md p-md flex items-center justify-between",children:[i.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[i.jsx(L,{variant:"baseSemi",className:"leading-tight",children:e}),p&&i.jsxs(gc,{className:"gap-xs text-quiet",children:[l&&!u&&i.jsx(br,{id:"watch",children:i.jsxs(L,{variant:"tiny",color:"light",className:"gap-xs flex truncate whitespace-nowrap",children:[i.jsx(tne,{size:14,className:"mb-xs"}),l]})}),c&&i.jsx(br,{id:"week",children:i.jsx(L,{variant:"tiny",color:"light",className:"gap-sm flex items-center truncate whitespace-nowrap",children:c})})]})]}),i.jsxs("button",{className:"flex min-w-0 flex-col items-end",onClick:()=>s(h=>!h),children:[i.jsx(L,{variant:"tiny",color:"light",className:"w-full min-w-0 truncate whitespace-nowrap text-end",children:t}),m?i.jsxs(gc,{className:"gap-xs text-quiet text-xs",children:[d.startsWith("en-")&&a&&i.jsx(br,{id:"condition",children:i.jsx(L,{variant:"tiny",color:"light",className:"gap-xs flex items-center whitespace-nowrap",children:a})}),o&&i.jsx(br,{id:"temperature",children:i.jsx(L,{variant:"tiny",color:"light",className:"gap-xs flex items-center",children:o})})]}):i.jsx(L,{variant:"tiny",color:"light",className:"w-full min-w-0 truncate whitespace-nowrap text-end",children:n}),r&&i.jsx(L,{variant:"tiny",color:"light",className:"w-full min-w-0 truncate whitespace-nowrap text-end",children:r})]})]})},bMt=f.createContext({blazeSDK:null,isBlazeSDKReady:!1}),_Mt=()=>f.useContext(bMt);function wMt(e,t){const n=e.Theme(t?"row-rectangle":"row-rectangle-horizontal");return n.layoutStyle.borderRadius="5px",n.layoutStyle.statusLiveStyle.isVisible=!1,n.layoutStyle.statusLiveUnreadStyle.isVisible=!1,n.layoutStyle.statusReadStyle.isVisible=!1,n.layoutStyle.statusUnreadStyle.isVisible=!1,n.playerStyle.titleFont="var(--font-fk-grotesk-neue)",n.playerStyle.publishedDateFont="var(--font-fk-grotesk-neue)",n.layoutStyle.labelStyle.font="var(--font-fk-grotesk-neue)",n.layoutStyle.labelStyle.fontSize=".75rem",n.playerStyle.iconsButton=[{value:"MUTE_UNMUTE",isVisible:!0},{value:"EXIT_PLAYER",isVisible:!0}],n}function CMt(e,t){return pte(t)?e.LabelBuilder().singleLabel(t[0]):e.LabelBuilder().mustInclude(t?.join?.(" , "))}function SMt(e,{isMobile:t,labels:n,maxItems:r,onData:s}){const a=e.DataSourceBuilder().labels({labels:CMt(e,n),maxItems:r,orderType:"RecentlyUpdatedFirst"}),o=wMt(e,t);e.WidgetRowView("stories-container",{dataSource:a,theme:o,contentType:"story",delegates:{[e.Delegations.onWidgetDataLoadCompleted]:l=>{s?.({detail:l.detail,error:null})},[e.Delegations.onErrorThrown]:l=>{s?.({error:l,detail:null})}}})}function EMt({labels:e,maxItems:t,onData:n,style:r,className:s}){const{isMobileStyle:a}=ye(),{blazeSDK:o,isBlazeSDKReady:l}=_Mt(),c=f.useRef(!1);return f.useEffect(()=>{if(!(!l||c.current))try{SMt(o,{isMobile:a,labels:e,maxItems:t,onData:n}),c.current=!0}catch(u){n?.({error:u,detail:null})}},[o,l,a,t,n,c]),i.jsx("div",{id:"stories-container",className:U("overrides [&_blaze-widget-layout]:p-0",s),style:r},a?"m":"d")}async function MMt({url:e}){const{default:t}=await ae(async()=>{const{default:r}=await import("./qrcode-DzQwd33t.js").then(s=>s.q);return{default:r}},__vite__mapDeps([126,1])),n=t(0,"M");return n.addData(e.toString()),n.make(),n.createSvgTag(2,0)}async function kMt({deviceId:e,liveEventId:t,reason:n}){const r=await ne.GET("/rest/live-events/subscription",n,{params:{query:{device_id:e,live_event_id:t}}});return r.error?(ee.error(`Failed to get subscription status: ${e}`),!1):r.data?.subscribed??!1}async function TMt({apns:e}){const t=tS({type:"pplx.sports.notifications",data:{apns:e}});return await new Promise(n=>setTimeout(n,500)),t||ee.error("Failed to subscribe user to event."),t}async function NMt({liveEventId:e,deviceId:t,apns:n}){try{const{error:r}=await ne.DELETE("/rest/live-events/subscription","sports-ios-notification-sub-unsubscribe",{params:{query:{device_id:t,live_event_id:e}}});if(tS({type:"pplx.sports.notifications.unsubscribe",data:{apns:n}}),r)throw new Ee("API_CLIENTS_ERROR",{cause:r});return!0}catch(r){return ee.error(r),!1}}const Jwe=(e,t)=>["events/subscription",e,t];function AMt({apns:e,liveEventId:t,deviceId:n}){const r=mt(),s=Jwe(n,t);return bt({mutationFn:async a=>a.subscribe?TMt({apns:e}):await NMt({liveEventId:t,deviceId:n,apns:e}),onMutate:async a=>{await r.cancelQueries({queryKey:s});const o=r.getQueryData(s);return r.setQueryData(s,a),{prevState:o}},onError:(a,o,l)=>{r.setQueryData(s,l?.prevState)},onSettled:()=>{r.invalidateQueries({queryKey:s})}})}const jMt=({apns:e,deviceId:t})=>{const n="sports-ios-notification-sub",r=e.attributes?.live_event_id,{trackEvent:s}=Me(),{data:a}=$e({queryKey:Jwe(t,r),queryFn:()=>kMt({deviceId:t,liveEventId:r,reason:n}),staleTime:0}),{mutate:o,isPending:l}=AMt({apns:e,liveEventId:r,deviceId:t}),c=f.useRef(null);return aE(c,()=>{s("live event subscribe toggle impression",{deviceId:t,liveEventId:r,subscribed:!!a})},{threshold:.5}),i.jsx("div",{ref:c,className:"gap-x-sm flex items-center pl-4",children:i.jsx(Ao,{active:!!a,onChange:()=>o({subscribe:!a}),disabled:l})})},RMt=({url:e})=>{const[t,n]=f.useState("");return f.useEffect(()=>{MMt({url:e}).then(n).catch(ee.error)},[e]),t?i.jsx(z,{variant:"background",className:"p-xs shadow-subtle aspect-square w-full rounded border",children:i.jsx("div",{className:"[&_path]:fill-foreground [&_rect]:fill-inverse flex items-center justify-center [&_svg]:h-auto [&_svg]:w-full",dangerouslySetInnerHTML:{__html:t}})}):i.jsx(wn,{className:"bg-subtler block aspect-square w-full rounded"})},LF=({title:e,subtitle:t="",children:n,className:r,expandedCta:s=!1})=>i.jsxs(z,{className:U("mx-md gap-sm md:-mt-md md:px-md grid border-t",r),children:[i.jsxs(z,{className:"gap-md flex min-h-[50px] items-center justify-between",children:[i.jsxs(z,{children:[i.jsx(L,{variant:"smallBold",children:e}),i.jsx(L,{variant:"small",color:"light",children:t})]}),n]}),s&&i.jsx(IMt,{})]}),IMt=()=>{const{isMobileStyle:e}=ye(),{actions:t,isSportsIosCtaDismissed:n}=dn();return i.jsx(i.Fragment,{children:!n&&e&&i.jsxs(z,{className:"relative block overflow-hidden rounded","aria-hidden":"true",children:[i.jsx(z,{className:"p-sm absolute right-0 top-0",children:i.jsx("button",{onClick:()=>t.setIsSportsIosCtaDismissed(!0),children:i.jsx(Lt,{color:"white"})})}),i.jsx("img",{className:"max-h-[200px] w-full object-cover object-[0_90%]",src:"https://r2cdn.perplexity.ai/images/ios-live-game-alerts-promo.jpg",alt:""})]})})},PMt={SportsEventAttributes:"2.37.1",SportsIndividualEventAttributes:"2.45.0"};function e2e({apns:e,containerClassName:t,title:n,subtitle:r}){const{$t:s}=Q(),{device:{isAndroid:a}}=Et(),{inApp:o,appVersion:l,deviceId:c}=_l(),{handleAppDownloadClicked:u}=Nf("sports-ios-notification-sub"),{isMobileStyle:d}=ye();if(a||!e)return null;if(n=n||s({defaultMessage:"Turn on live game updates",id:"B3DARItQiv"}),r=r||s({defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"}),o){const m=PMt[e.attributesType];return m?y6e(l,m)?i.jsx(LMt,{containerClassName:t,onClick:u}):!e||!c?null:i.jsx(LF,{title:n,subtitle:r,className:t,children:i.jsx(f.Suspense,{children:i.jsx(jMt,{apns:e,deviceId:c})})}):null}return d?i.jsx(OMt,{containerClassName:t,onClick:u}):null}const OMt=({containerClassName:e,onClick:t})=>{const{$t:n}=Q();return i.jsx(LF,{title:n({defaultMessage:"Download the app to get live updates during the event",id:"vBmN5Ou5qa"}),className:e,children:i.jsx(ge,{size:"small",pill:!0,variant:"primary",icon:qv,text:n({defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:t})})},LMt=({containerClassName:e,onClick:t})=>{const{$t:n}=Q();return i.jsx(LF,{title:n({defaultMessage:"Update the app to follow the event live",id:"DKTCeuOgpP"}),className:e,children:i.jsx(ge,{size:"small",pill:!0,variant:"primary",icon:qv,text:n({defaultMessage:"Update App",id:"NEMhhhqxf3"}),onClick:t})})};function MWt({apns:e}){const{$t:t}=Q(),{downloadAppLink:n}=Nf("sports-ios-notification-sub"),{isMobileStyle:r}=ye(),{actions:s,isSportsIosCtaDismissed:a}=dn(),o=f.useCallback(()=>{s.setIsSportsIosCtaDismissed(!0)},[s]);return a||r||!e?null:i.jsxs(z,{variant:"raised",className:"ml-sm mt-md p-md shadow-subtle relative flex max-w-[160px] flex-col items-center rounded-xl border",children:[i.jsx("div",{className:"mb-sm flex w-full justify-center",children:i.jsx(RMt,{url:n})}),i.jsx(L,{variant:"smallBold",className:"text-center leading-tight",children:t({defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"})}),i.jsx(Te,{size:"tiny",pill:!0,icon:Lt,extraCSS:"!absolute -top-0.5 opacity-50 hover:opacity-100 -right-0.5",onClick:o,variant:"noBackground"}),i.jsxs(z,{className:"mt-sm px-sm gap-xs mx-auto inline-flex items-center justify-center rounded-full border py-1",children:[i.jsx(tu,{size:12,className:"text-quiet"}),i.jsxs("div",{className:"flex gap-px",children:[i.jsx(L,{variant:"smallCaps",color:"light",className:"whitespace-nowrap text-center",children:"4.9"}),i.jsx(L,{variant:"smallCaps",color:"ultraLight",className:"whitespace-nowrap text-center",children:""}),i.jsx(L,{variant:"smallCaps",color:"light",className:"text-center",children:"100k+"})]})]})]})}function DMt({team1:e,team2:t}){const{$t:n}=Q(),[r,s]=f.useState(!1),{colorScheme:a}=Pr(),o=f.useRef(null);xF({ref:o,onInView:()=>{s(!0)}});const l=Ta(.16,1,.3,1),{locale:c}=Q(),u=MC(e.color,a),d=MC(t.color,a);return i.jsxs("div",{className:"gap-sm px-md pb-md mx-auto flex flex-col items-center",ref:o,children:[i.jsx(wn,{className:"w-full shrink-0",active:!r,children:i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:U("relative flex h-2 w-full shrink-0 justify-between overflow-hidden rounded-full duration-150",{"bg-offsetPlus":!r}),children:[i.jsx(xe.div,{className:"absolute inset-y-0 left-0 h-full rounded-full",style:{background:t.winProbability?d:"#00000010",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"},animate:{width:r?`calc(${t.winProbability}%)`:0,left:r?`calc(${e.winProbability}% + 1px)`:0},transition:{ease:l,duration:.5}}),i.jsx(xe.div,{className:"relative h-full rounded-full",style:{background:e.winProbability?u:"#00000010",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"},animate:{width:r?`calc(${e.winProbability}% - 1px)`:0},transition:{ease:l,duration:.5}})]}),i.jsx("div",{className:"bg-inverse/70 ring-offset absolute left-1/2 top-1/2 h-4 w-[1.5px] -translate-x-1/2 -translate-y-1/2 rounded-full ring-2"})]})}),i.jsxs("div",{className:"grid w-full grid-cols-3",children:[i.jsx(L,{variant:"small",className:"text-left",children:i.jsx(H9,{value:oh(e.winProbability,c),digitClassName:"font-mono",className:"inline-flex"})}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"mt-px text-center",children:n({defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"})}),i.jsx(L,{variant:"small",className:"text-right",children:i.jsx(H9,{value:oh(t.winProbability,c),digitClassName:"font-mono",className:"inline-flex"})})]})]})}const FMt=({width:e,height:t,fraction:n,className:r,colors:s,onAnimationEnd:a,onArcSelect:o,onArcDeselect:l,selectedArc:c,animate:u})=>{const m=Math.PI*2*(1-n),[p,h]=f.useState(!1),[g,y]=f.useState(!1);f.useEffect(()=>{p&&g&&a?.()},[p,g,a]);const v=b=>{o?.(b)},x=()=>{l?.()};return i.jsx("svg",{width:e,height:t,viewBox:`0 0 ${e} ${t}`,className:r,children:i.jsxs(sa,{top:t/2,left:e/2,children:[i.jsx(LJ,{startAngle:0,endAngle:m,outerRadius:e/2,innerRadius:e/2-(c===0?12:10),padAngle:.04,cornerRadius:999,fill:s[1],onAnimationEnd:()=>h(!0),onMouseEnter:()=>v(0),onMouseLeave:x,animationEnded:p&&g,className:c===1?"opacity-20":void 0,animate:u}),i.jsx(LJ,{startAngle:m,endAngle:Math.PI*2,padAngle:.02,outerRadius:e/2,innerRadius:e/2-(c===1?12:10),cornerRadius:999,fill:s[0],onAnimationEnd:()=>y(!0),onMouseEnter:()=>v(1),onMouseLeave:x,animationEnded:p&&g,className:c===0?"opacity-20":void 0,animate:u})]})})},UMt=l0(Age),LJ=({startAngle:e,endAngle:t,onAnimationEnd:n,animationEnded:r,className:s,animate:a,...o})=>{const l=Pye({to:{startAngle:a?e:Math.PI*2,endAngle:a?t:Math.PI*2},from:{startAngle:Math.PI*2,endAngle:Math.PI*2},delay:200,onRest:m=>{m.finished===!0&&n?.()}}),{colorScheme:c,isColorSchemeReady:u}=Pr({addSecondPass:!0}),d=u&&c==="dark"?"stroke-white/5":void 0;return i.jsx(UMt,{...o,startAngle:a?l.startAngle:0,endAngle:a?l.endAngle:0,className:U(d,r?"duration-200 ease-out":"",s)})},BMt=({className:e,team1:t,team2:n,size:r=150})=>{const[s,a]=f.useState(!1),[o,l]=f.useState(!1),[c,u]=f.useState(null),d=f.useRef(null),m=f.useRef(null),p="duration-200",h=f.useRef(null),[g,y]=f.useState(!1),{locale:v}=Q(),{isMobileStyle:x}=ye(),b=f.useMemo(()=>[t.winProbability?t.color:"#00000010",n.winProbability?n.color:"#00000010"],[t,n]);xF({ref:h,onInView:()=>{a(!0),vW(Math.max(t.winProbability-30,0),t.winProbability,{duration:2,ease:"easeOut",onUpdate:S=>{d.current&&(d.current.textContent=oh(S,v))}}),vW(Math.max(n.winProbability-20,0),n.winProbability,{duration:2,ease:"easeOut",onUpdate:S=>{m.current&&(m.current.textContent=oh(S,v))}}),y(!0)}});const _=S=>{u(S)},w=()=>{u(null)},C=Math.abs(t.winProbability/100);return i.jsx("div",{className:e,ref:h,children:i.jsxs("div",{className:"gap-sm md:gap-md isolate grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[i.jsx(DJ,{innerRef:d,show:s,textBlockVariant:x?"smallBold":"baseSemi",className:U("translate-x-md self-start text-right !delay-0 !ease-out md:translate-x-0 md:self-center",p,{"scale-110":c===1,"opacity-20":c===0}),onMouseEnter:()=>_(1),onMouseLeave:w}),i.jsxs("div",{className:"relative",style:{width:r,height:r},children:[i.jsx(FMt,{height:r,width:r,fraction:C,animate:g,className:"relative z-[2] size-full",colors:b,onAnimationEnd:()=>l(!0),onArcSelect:S=>{u(S)},onArcDeselect:()=>u(null),selectedArc:c}),i.jsx(wn,{active:!s,className:"absolute inset-0 z-[1]",children:i.jsx("div",{className:U("border-subtlest absolute inset-0 rounded-full border-[10px]",p,{"opacity-0":s})})}),i.jsx("div",{className:U("absolute inset-0 z-[1] rounded-full opacity-10 blur-md dark:opacity-20",p,{"!opacity-0":!o}),style:{backgroundImage:`conic-gradient(${t.color} 0deg, ${n.color} 10deg, ${n.color} ${(1-C)*360-10}deg, ${t.color} ${(1-C)*360}deg)`,maskImage:"radial-gradient(transparent, black)"}}),i.jsx("div",{className:"absolute inset-0 z-[3] flex items-center justify-center",children:i.jsxs("div",{className:"gap-sm flex size-full items-center justify-center",children:[i.jsx("div",{onMouseEnter:()=>_(1),onMouseLeave:w,className:"flex size-full items-center justify-end",children:i.jsx(os,{color:t.color,logo:t.logo,includeStripe:!1,size:"medium",className:U("pointer-events-auto ease-out",p,c===1?"scale-110":void 0,c===0?"opacity-20":void 0)})}),i.jsx(z,{className:"h-lg hidden border-l md:block"}),i.jsx("div",{onMouseEnter:()=>_(0),onMouseLeave:w,className:"flex size-full items-center justify-start",children:i.jsx(os,{color:n.color,logo:n.logo,includeStripe:!1,size:"medium",className:U("pointer-events-auto ease-out",p,c===0?"scale-110":void 0,c===1?"opacity-20":void 0)})})]})})]}),i.jsx(DJ,{innerRef:m,show:s,textBlockVariant:x?"smallBold":"baseSemi",className:U("-translate-x-md self-end !delay-0 !ease-out md:-translate-x-0 md:self-center",p,{"scale-110":c===0,"opacity-20":c===1}),onMouseEnter:()=>_(0),onMouseLeave:w})]})})},DJ=({innerRef:e,show:t,className:n,textBlockVariant:r="section-title",...s})=>{const{locale:a}=Q();return i.jsx("div",{className:U("flex-1 cursor-default",{"translate-y-2 opacity-0":!t},n),...s,children:i.jsxs(L,{variant:r,className:U("relative !font-mono"),children:[i.jsx("span",{ref:e,className:"absolute inset-0",children:oh(0,a)}),i.jsx("span",{className:"opacity-0",children:oh(100,a)})]})})},VMt=({watchlistType:e,identifier:t,category:n,modalOrigin:r,loginPrompt:s,reason:a})=>{const{$t:o}=Q(),l=mt(),c=Qe(),{openModal:u}=vt(),d=f.useRef(!1),[m,p]=f.useState(!1),[h,g]=f.useState(!1),[y,v]=f.useState(!1),{data:x,isLoading:b}=SO({watchlistType:e,reason:a}),{mutate:_}=$de({watchlistType:e,queryClient:l,reason:a}),{mutate:w}=Hde({watchlistType:e,queryClient:l,reason:a}),C=f.useCallback(S=>{const{invalidateOnSuccess:E=!0}=S??{};if(g(!1),v(!1),!c){const M=o({defaultMessage:"Sign in to follow your interests",id:"ebRSvhaBXI"});u("loginModal",{pitchMessage:{title:s||M},origin:r});return}m?(w({identifier:t,category:n}),v(!0)):(_({identifier:t,category:n}),g(!0)),p(!m),E&&l.invalidateQueries({queryKey:[Rp]})},[o,_,n,t,m,c,s,r,u,l,w]);return f.useEffect(()=>{if(!d.current&&!b&&x){d.current=!0;const S=M=>{const k=M.identifier===t;return n?k&&M.category===n:k},E=x.some(S);p(E)}},[b,x,t,n]),f.useMemo(()=>({isFollowed:m,toggleFollow:C,showFollowToast:h,showUnfollowToast:y,setShowFollowToast:g,setShowUnfollowToast:v,isLoadingSubscriptions:b}),[m,b,h,y,C])},t2e=A.memo(({isFollowed:e,toggleFollow:t,iconOnly:n=!1,size:r="small",selectedButtonClassName:s,unselectedButtonClassName:a,tooltip:o,variant:l})=>{const c=Q(),{isMobileStyle:u}=ye();return i.jsx(it,{mode:"wait",children:e?i.jsx(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:hn},children:i.jsx(ge,{variant:l??"primaryGhost",pill:!0,size:r,text:u||n?void 0:c.formatMessage({defaultMessage:"Following",id:"cPIKU2QdyN"}),onClick:t,extraCSS:s,toolTip:o,icon:tu})},"confirmed"):i.jsx(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:hn},children:i.jsx(ge,{pill:!0,variant:l,icon:rr,size:r,text:u||n?void 0:c.formatMessage({defaultMessage:"Follow",id:"ieGrWod3CN"}),onClick:t,extraCSS:a,toolTip:o})},"follow")})});t2e.displayName="FollowButton";const WMt=({team:e,size:t,variant:n,league:r="nfl"})=>{const[s,a]=f.useState(0),o=f.useMemo(()=>{switch(t){case"large":return s>=1280?64:50;case"medium":default:return 32;case"small":return 20}},[t,s]),l=()=>{a(window.innerWidth)};f.useEffect(()=>(window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)),[]),f.useEffect(()=>{a(window.innerWidth)},[]);const c=6,u=32,d=u/2,m=Math.sin(Math.PI/u),p=o*m,[h,g]=f.useState(!1),[y,v]=f.useState(0),x=1600,b=n==="angled-first"?20:n==="angled-last"?-20:0;f.useEffect(()=>{h&&(v(w=>w+(n==="angled-last"?-360:360)*2),setTimeout(()=>{g(!1)},x))},[h,n]);const _=()=>{g(!0)};return i.jsxs(xe.div,{onMouseEnter:_,transition:{ease:na,duration:1},className:U("wrapper transition-opacity duration-150",{"opacity-0":s===0}),style:{width:o,height:o},children:[i.jsx("div",{className:"shadow"}),i.jsxs(xe.div,{className:U("coin size-full"),initial:{rotateY:"0deg"},animate:{rotateY:`${y+b}deg`},transition:{rotateY:{ease:aI,duration:x/1e3}},children:[i.jsx("div",{className:"front flex items-center justify-center bg-white",style:{width:o,height:o,transform:`translateZ(${c/2}px)`},children:i.jsx(os,{color:e.color,logo:e.logo,size:t})}),i.jsx("div",{className:"back border-subtler flex items-center justify-center border bg-white dark:border-transparent",style:{width:o,height:o,transform:`translateZ(${c/-2}px) rotateY(180deg)`},children:r==="nfl"?i.jsx($Mt,{className:"h-auto w-2/5 opacity-40 grayscale"}):i.jsx(HMt,{className:"h-[70%] w-auto opacity-40 grayscale"})}),i.jsx("div",{className:"side",style:{transform:`translateX(${o*.5-c/2}px)`},children:Array.from({length:d}).map((w,C)=>i.jsxs("div",{className:"spoke",style:{width:c,height:o,transform:`rotateY(90deg) rotateX(calc((180deg / ${d}) * ${C+1}))`},children:[i.jsx("div",{className:"facet",style:{height:p,width:c,transform:`rotateX(calc(((180deg - (360deg / ${u})) / 2)))`}}),i.jsx("div",{className:"facet",style:{height:p,width:c,transform:`rotateX(calc(((180deg - (360deg / ${u})) / 2)))`}})]},C))})]})]})},$Mt=({className:e})=>i.jsx("img",{alt:"",className:e,src:"https://upload.wikimedia.org/wikipedia/en/a/a2/National_Football_League_logo.svg"}),HMt=({className:e})=>i.jsx("img",{alt:"",className:e,src:"https://upload.wikimedia.org/wikipedia/en/0/03/National_Basketball_Association_logo.svg"}),kWt=({eventId:e,league:t,children:n,...r})=>e?i.jsx(Du,{...r,href:`/sports/${t}/events/${e}`,children:n}):i.jsx(i.Fragment,{children:n}),zMt=({teamId:e,league:t,children:n,...r})=>t==="ncaam"||t==="ncaaw"||t==="championsleague"||t==="wnba"||t==="atp"||t==="wta"?i.jsx(L,{children:n}):i.jsx(Du,{...r,href:`/sports/${t}/teams/${e}`,className:"cursor-pointer duration-150 hover:opacity-60",children:n}),TWt=({playerId:e,league:t,children:n,...r})=>t==="ncaam"||t==="ncaaw"||t==="wnba"||t==="atp"||t==="wta"?i.jsx(L,{children:n}):i.jsx(Du,{...r,href:`/sports/${t}/players/${e}`,children:n}),z9=A.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=Rn,icon:a,...o})=>{const[l,c]=f.useState(t),u=f.useRef(null),{$t:d}=Q();f.useEffect(()=>{c(t)},[t]);const m=f.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),p=f.useCallback(h=>{h?.stopPropagation(),c(!1),s(),m()},[s,m]);return f.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{p()},n*1e3)),()=>{m()}),[l,n,t,s,p,m]),i.jsx(Nu,{children:i.jsx(it,{children:l&&i.jsx(xe.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:ao,...o,children:i.jsxs(z,{variant:"raised",className:U("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&i.jsx("div",{className:"p-sm bg-subtler dark:bg-offsetPlus my-[12px] flex aspect-square items-center justify-center rounded-md",children:i.jsx(me,{icon:a,className:"text-quiet",size:"md"})}),i.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[i.jsx(L,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),i.jsxs(z,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[i.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60"}),i.jsx(z,{className:"border-t"}),i.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:p,extraCSS:"!px-[12px] flex-1 hover:opacity-60"})]})]})]})},"toast")})})});z9.displayName="FollowConfirmationToast";const jC=({team:e,metadata:t,className:n,logoClassName:r,textClassName:s,nameClassName:a,size:o="large",coinLogoProps:l,hasPosession:c,posessionIndicatorClassName:u,league:d,position:m})=>{const p="team-info",{isMobileStyle:h}=ye(),g=Q(),y=_t(),v=kc(),{inApp:x}=_l(),{isFollowed:b,toggleFollow:_,showFollowToast:w,showUnfollowToast:C,setShowFollowToast:S,setShowUnfollowToast:E,isLoadingSubscriptions:M}=VMt({watchlistType:"SPORTS",identifier:e.teamId.toString(),category:d.toLowerCase(),modalOrigin:Ie.SPORTS_WATCHLIST,loginPrompt:"Sign in to follow your teams",reason:p});return i.jsxs("div",{className:U("gap-sm flex min-w-0 flex-col items-center",n),children:[i.jsx(z9,{message:g.formatMessage({defaultMessage:"Added {team} to your watchlist",id:"ASZzl0rkyl"},{team:e.nickname}),isVisible:w,onSettingsClick:()=>{y.push(`${v}/personalize?watchlistModal=sports`)},timeout:5,onTimeout:()=>S(!1)}),i.jsx(z9,{message:g.formatMessage({defaultMessage:"Removed {team} from your watchlist",id:"9NeRSAm+wb"},{team:e.nickname}),isVisible:C,onSettingsClick:()=>{y.push(`${v}/personalize?watchlistModal=sports`)},timeout:5,onTimeout:()=>E(!1)}),i.jsxs("div",{className:"relative shrink-0",children:[l?i.jsx(WMt,{...l,team:e,size:o,league:d}):i.jsx(os,{className:U("shrink-0",r),logo:e.logo,color:e.color,size:o}),!M&&!x&&i.jsx("div",{className:U("absolute bottom-1/2",m==="left"?"-translate-x-xs right-full":"translate-x-xs left-full"),children:i.jsx(t2e,{isFollowed:b,toggleFollow:_,size:"tiny",iconOnly:!0,selectedButtonClassName:"!bg-inverse/5 !border-transparent !text-foreground scale-[0.85]",unselectedButtonClassName:"!bg-transparent border-subtlest !text-quiet border scale-[0.85]",tooltip:b?g.formatMessage({defaultMessage:"Following",id:"cPIKU2QdyN"}):g.formatMessage({defaultMessage:"Follow Team",id:"QrB7VHb46Y"})})})]}),i.jsxs("div",{className:U("flex flex-col items-center",s),children:[i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:U("-translate-x-xs text-super absolute right-full top-1/2 -translate-y-1/2 text-base",u),children:c&&i.jsx(OR,{size:h?12:16,className:"relative"})}),i.jsx(zMt,{teamId:e.teamId,league:d,children:i.jsxs("div",{className:"gap-sm flex items-center",children:[e.seed&&i.jsx(L,{variant:"tinyRegular",color:"light",children:e.seed}),i.jsx(L,{variant:"baseSemi",className:U("truncate xl:!text-lg",a),children:e.nickname})]})})]}),t&&i.jsx(L,{variant:"smallCaps",color:"light",className:"text-center",children:t})]})]})},NWt=({event:e,showWsc:t,onWscData:n,league:r})=>{const{$t:s}=Q(),[a,o]=f.useState(!1),{whereToWatch:l,gameLocation:c,gameVenue:u,setCelcius:d,weatherCondition:m,degrees:p,team1:h,team2:g,weekLabel:y,roundName:v}=Ywe({event:e,league:r});f.useEffect(()=>{const b=new ResizeObserver(()=>{o(window.innerWidth<1e3)});return b.observe(document.body),()=>{b.disconnect()}},[]);const x=(h?.winProbability??0)>0||(g?.winProbability??0)>0;return i.jsxs(z,{variant:"raised",className:"relative rounded-xl border",children:[i.jsx(Zwe,{title:s({defaultMessage:"Game Preview",id:"GvobedfNcN"}),gameLocation:c,gameVenue:u,roundName:v,setCelcius:d,weatherCondition:m??"",degrees:p,whereToWatch:l,weekLabel:y,isFinal:xf(e.event)}),i.jsx(z,{className:"mx-md border-t"}),i.jsx(z,{children:i.jsxs("div",{className:"gap-xs p-md md:gap-md grid grid-cols-3",children:[i.jsx("div",{className:"gap-lg flex items-center justify-center",children:h&&i.jsx(jC,{team:h,league:r,metadata:gC(h.record),position:"left"})}),i.jsx(Qwe,{event:e.event}),i.jsx("div",{className:"gap-lg flex items-center justify-center",children:g&&i.jsx(jC,{team:g,league:r,metadata:gC(g.record),position:"right"})})]})}),i.jsx(GMt,{showWsc:t,predictionExists:x,narrowWindow:a,team1:h,team2:g,wsc:e.wsc,onWscData:n}),i.jsx(e2e,{apns:e.apns})]})};function GMt({predictionExists:e,showWsc:t,narrowWindow:n,team1:r,team2:s,wsc:a,onWscData:o}){const{$t:l}=Q();return!r||!s?null:t?i.jsxs("div",{className:"gap-md md:pb-md grid grid-cols-2 md:gap-0",children:[e&&i.jsxs("div",{className:"gap-md p-md md:gap-sm md:p-lg md:pb-md flex flex-col-reverse items-center md:flex-col",children:[i.jsx("div",{className:"flex flex-1 items-center justify-center",children:i.jsx(BMt,{size:n?115:140,team1:r,team2:s})}),i.jsx(L,{color:"light",variant:"tiny",children:l({defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"})})]}),t&&i.jsx(n2e,{wsc:a,onWscData:o})]}):e?i.jsx(z,{className:"md:mx-md pt-md border-t",children:i.jsx(DMt,{team1:r,team2:s})}):null}const AWt=({title:e,subtitle:t,children:n})=>i.jsxs(z,{className:"gap-md flex flex-col",children:[i.jsxs(z,{className:"px-md py-sm flex items-center justify-between border-b",children:[e&&i.jsx(L,{variant:"baseSemi",children:e}),t&&i.jsx(L,{variant:"smallCaps",color:"light",className:"gap-xs flex items-center",children:t})]}),i.jsx("div",{className:"gap-md px-md pb-md flex flex-col",children:n})]});function n2e({wsc:e,onWscData:t,wscTitle:n,includeLabel:r=!0}){const{$t:s}=Q(),a=e?.labels,o=f.useRef(null),[l,c]=f.useState({width:0,height:0}),{isMobileStyle:u}=ye(),d=n||s({defaultMessage:"Pregame Highlights",id:"pTASonM2gu"}),m=e?.labels?.length>0;return f.useEffect(()=>{const p=new ResizeObserver(()=>{c({width:o.current?.clientWidth||0,height:o.current?.clientHeight||0})});return p.observe(document.body),()=>{p.disconnect()}},[]),m?i.jsxs(z,{className:"gap-md p-md md:gap-sm md:p-lg md:pb-md flex flex-col-reverse items-center justify-center md:flex-col md:border-l",children:[i.jsx("div",{className:"flex w-full flex-1 items-center justify-center",ref:o,children:i.jsx("div",{className:"flex aspect-video h-full items-center justify-center",children:l.width>0?i.jsx(EMt,{labels:a,onData:t,style:{width:u?void 0:l.width,height:u?l.height:void 0},className:"rounded shadow-md duration-200 ease-in-out hover:scale-[1.02]"}):i.jsx(wn,{className:"bg-offsetPlus size-full self-stretch rounded-md"})})}),r&&i.jsx(L,{variant:"tiny",color:"light",className:"text-center",children:d})]}):null}const jWt=({event:e,onWscData:t,showWsc:n,league:r})=>{const{$t:s}=Q(),{isMobileStyle:a}=ye(),{gameVenue:o,setCelcius:l,weatherCondition:c,degrees:u,team1:d,team2:m,weekLabel:p,whereToWatch:h,gameLocation:g,roundName:y}=Ywe({event:e,league:r}),v=[d?.winner?d.color:"transparent","transparent",m?.winner?m.color:"transparent"],x=gg(e.event);return i.jsxs(Pn,{className:"overflow-hidden",children:[!x&&i.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-r opacity-10 dark:opacity-20",style:{background:`linear-gradient(100deg, ${v.join(" , ")})`}}),i.jsx(Zwe,{title:s(x?{defaultMessage:"LIVE",id:"UqyNCCygYW"}:{defaultMessage:"Game Summary",id:"+eeGQlcxzW"}),gameVenue:o,roundName:y,setCelcius:l,weatherCondition:c??"",degrees:u,weekLabel:p,whereToWatch:h,gameLocation:g,isFinal:xf(e.event)}),i.jsx(z,{className:"mx-md border-t"}),i.jsx(z,{children:i.jsxs("div",{className:"gap-xs p-md md:gap-md relative grid grid-cols-[1fr,1fr,1fr] overflow-hidden md:grid-cols-[1fr,3fr,1fr]",children:[i.jsxs("div",{className:"gap-md flex min-w-0 flex-col items-center justify-center md:flex-row",children:[i.jsx("div",{className:"block md:hidden",children:d&&i.jsx(M_,{team:d,isLive:x,position:"left"})}),d&&i.jsx(jC,{team:d,metadata:gC(d.record),hasPosession:x&&d.teamId===e.event.eventStatus.teamPossessionId,league:r,position:"left"})]}),i.jsxs("div",{className:"gap-sm flex items-center md:gap-0",children:[i.jsx("div",{className:"flex-1 items-center justify-start md:flex",children:d&&i.jsx(M_,{team:d,isLive:x,position:"left"})}),i.jsx(Qwe,{event:e.event,final:xf(e.event),isLive:x}),i.jsx("div",{className:"flex-1 items-center justify-end md:flex",children:m&&i.jsx(M_,{team:m,isLive:x,position:"right"})})]}),i.jsxs("div",{className:"gap-md flex min-w-0 flex-col items-center justify-center md:flex-row",children:[i.jsx("div",{className:"block md:hidden",children:m&&i.jsx(M_,{team:m,isLive:x,position:"right"})}),m&&i.jsx(jC,{team:m,metadata:gC(m.record),hasPosession:x&&m.teamId===e.event.eventStatus.teamPossessionId,league:r,position:"right"})]})]})}),i.jsx(z,{className:"mx-md border-t"}),i.jsxs("div",{className:U("md:pb-md grid",{"grid-cols-[65%,35%]":n}),children:[i.jsx("div",{className:"py-sm md:p-md flex w-full flex-1 items-center justify-center md:pb-0",children:i.jsx(qMt,{event:e,isLive:x})}),n&&i.jsx(n2e,{wsc:e.wsc,onWscData:t,wscTitle:s({defaultMessage:"Game Highlights",id:"nX0XrAiLIA"}),includeLabel:!a})]}),x&&i.jsx(e2e,{apns:e.apns})]})},M_=({team:e,isLive:t,position:n})=>i.jsxs(L,{variant:"page-title",color:e.winner||t?void 0:"light",className:"relative",children:[i.jsx(H9,{value:String(e.score),digitClassName:"font-mono"}),e.winner&&!t&&i.jsx(G9,{className:U("absolute top-1/2 -translate-y-1/2",{"-left-sm -translate-x-full rotate-180":n==="right","-right-sm translate-x-full":n==="left"})})]}),G9=({className:e})=>i.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),r2e="text-right ml-4",s2e="text-left",B6=({children:e,right:t,light:n,bold:r})=>i.jsx(z,{as:"th",className:"border-b border-dashed",children:i.jsx(L,{variant:"smallCaps",color:n?"light":void 0,className:U("pb-sm",{[r2e]:t,[s2e]:!t}),children:i.jsx("span",{className:r?"font-semibold":"",children:e})})}),V6=({children:e,right:t,bold:n,light:r,className:s})=>i.jsx("td",{children:i.jsx(L,{variant:n?"smallBold":"small",color:r?"light":void 0,className:U("pt-xs",{[r2e]:t,[s2e]:!t},s),children:e})});function qMt({event:e,isLive:t}){const{$t:n}=Q(),{locale:r}=Q(),{isMobileStyle:s}=ye(),a=e.event.scheduledPeriods??4,o=e.event.eventStatus.period&&e.event.eventStatus.period>a?e.event.eventStatus.period:a,l=mx(e.event.teams);return i.jsxs("table",{className:"p-md w-full border-separate",cellPadding:0,cellSpacing:0,children:[i.jsx("colgroup",{children:i.jsx("col",{className:"w-full"})}),i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx(B6,{light:!0,children:n({defaultMessage:"Team",id:"wsUmh9XWBm"})}),Array.from({length:o}).map((c,u)=>i.jsx(B6,{right:!0,light:!0,children:u<a?(u+1).toLocaleString(r):u===a?"OT":`${u-a+1}OT`},u)),i.jsx(B6,{right:!0,bold:!0,children:n({defaultMessage:"T",id:"sjlqAC/nrs"})})]})}),i.jsx("tbody",{children:l.map(({location:c,nickname:u,teamId:d,abbreviation:m,score:p,linescores:h})=>{const g=Object.fromEntries(h.map(({period:y,score:v})=>[y,v]));return i.jsxs("tr",{children:[i.jsxs(V6,{bold:!0,className:"relative",children:[t&&d===e.event.eventStatus.teamPossessionId&&i.jsx("span",{className:"-translate-x-xs pt-xs absolute right-full top-0 flex h-[1lh] items-center",children:i.jsx("span",{className:"size-xs bg-inverse inline-flex translate-y-px rounded-full"})}),i.jsx("span",{className:s?"uppercase":"",children:s?m:`${c} ${u}`})]}),Array.from({length:o}).map((y,v)=>i.jsx(V6,{right:!0,light:!0,children:i.jsx("span",{className:g[v+1]!==void 0?"":"opacity-50",children:g[v+1]??""})},v)),i.jsx(V6,{bold:!0,right:!0,children:p??""})]},u)})})]})}const a2e=e=>!!e.extra.team_1_competitor_types?.map(n=>n.type).includes("team");function RWt({event:e}){const t=e.event.extra,n=a2e(e.event),r=e.event.status==="live";return i.jsx("div",{className:"px-md flex w-full flex-col pb-3 pt-2",children:i.jsxs("div",{className:"gap-lg relative flex w-full items-center",children:[i.jsx("div",{className:"gap-sm flex flex-1",children:i.jsxs("div",{className:"flex flex-1 flex-col sm:gap-3",children:[i.jsx(UJ,{team:e.event.team_1,isDoubles:!!n,teamCompetitorTypes:t?.team_1_competitor_types,brands:e.brands}),i.jsx("div",{className:"bg-subtle my-1.5 h-px w-full sm:hidden"}),i.jsx(UJ,{team:e.event.team_2,isDoubles:!!n,teamCompetitorTypes:t?.team_2_competitor_types,brands:e.brands})]})}),i.jsx("div",{className:"flex h-full items-center justify-end",children:i.jsxs("div",{className:"gap-x-md relative grid h-full auto-cols-auto grid-flow-col",children:[i.jsx(mwe,{event:e.event,team1:e.event.team_1,team2:e.event.team_2,isLive:r}),(e.event.team_1.won||e.event.team_2.won)&&i.jsx(QMt,{event:e})]})})]})})}const FJ=(e,t={includeFirstInitial:!0})=>{const n=e.trim().split(/\s+/);if(n.length===0)return"";const[r,...s]=n,a=t.includeFirstInitial&&r?r[0]?.toUpperCase()+".":"";return s.length>0?`${a}${a?" ":""}${s.join(" ")}`:a.trim()},KMt=(e,t={includeFirstInitial:!0})=>{try{const n=e.split(" / ");if(n.length!==2)return e;const[r="",s=""]=n;return`${FJ(r,t)} / ${FJ(s,t)}`}catch{return e}};function UJ({team:e,isDoubles:t,teamCompetitorTypes:n,brands:r}){const{isMobileStyle:s}=ye(),a=e.emphasis,o=t?i.jsx(i.Fragment,{children:KMt(e.title??"",{includeFirstInitial:!0})}):s?e.abbreviation??e.title:e.title;return i.jsx("div",{className:"relative flex items-center",children:i.jsxs("div",{className:U("relative flex items-center",{"gap-md":t,"gap-sm":!t}),children:[t?i.jsx(YMt,{competitorTypes:n,brands:r}):e.img&&e.color&&i.jsx(os,{logo:e.img,color:e.color,size:"small"}),e.seed&&i.jsx(L,{variant:"tinyRegular",color:"light",children:e.seed}),i.jsxs(L,{variant:"base",className:"font-regular max-sm:text-sm",children:[o,a&&" "]})]})})}const YMt=({competitorTypes:e,brands:t,className:n,topFlagClass:r})=>{const s=e?.filter(o=>o.type==="player").map(o=>t.find(c=>c.teamId===o.id));if(!s)return null;const a='after:content-[" "] after:absolute after:inset-0 after:border after:border-black/10';return i.jsxs("div",{className:U("-translate-y-three grid grid-cols-1 grid-rows-1 place-items-center",n),children:[i.jsx(os,{logo:s[0]?.logo??"",color:s[0]?.color??"",size:"tiny",className:U(a,"relative col-start-1 row-start-1 !h-auto")}),i.jsx(os,{logo:s[1]?.logo??"",color:s[1]?.color??"",size:"tiny",className:U(a,"dark:ring-offset col-start-1 row-start-1 !h-auto translate-x-[6px] translate-y-[6px] ring-2 ring-[oklch(var(--background-raised-color))]",r)})]})},QMt=({event:e})=>i.jsxs("div",{className:"-right-md gap-sm absolute grid h-full grid-rows-2",children:[i.jsx("div",{className:"flex items-center",children:e.event.team_1.won&&i.jsx(G9,{className:"shrink-0"})}),i.jsx("div",{className:"flex items-center",children:e.event.team_2.won&&i.jsx(G9,{className:"shrink-0"})})]}),o2e=({event:e,subtitles:t,headshots:n})=>{const{locale:r}=Q(),s=f.useMemo(()=>{if(!e.datetime)return null;const m=new Date(e.datetime);return isNaN(m.getTime())?null:m.toLocaleTimeString(r,{hour:"numeric",minute:"numeric",hour12:!0})},[e.datetime,r]),a=e.status==="live",o=e.status==="final",l=e.datetime&&new Date(e.datetime)>new Date,c=e.team_1.won||e.team_2.won,{isMobileStyle:u}=ye(),d=a2e(e);return i.jsxs(z,{className:"group relative",children:[i.jsx(z,{className:"bg-subtler duration-quick absolute inset-0 opacity-0 transition-opacity group-hover:opacity-50",variant:"subtle"}),i.jsxs(Du,{href:`/sports/atp/events/${e.id}`,className:U("p-md gap-y-md relative grid w-full flex-col",{"gap-y-sm":u}),children:[i.jsxs("div",{className:"gap-md flex items-center justify-between",children:[i.jsx(L,{variant:u?"tinyRegular":"small",color:"light",children:e.title[0]}),l?i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(L,{variant:u?"tinyRegular":"small",color:"light",children:s}),i.jsx(q_e,{className:"-mr-0.5"})]}):a?i.jsx(pg,{className:"-mr-0.5",includeDot:!0}):o&&i.jsx(n5,{className:"-mr-0.5"})]}),i.jsxs(z,{className:"gap-lg flex w-full items-center",children:[i.jsx("div",{className:"gap-sm flex flex-1",children:i.jsxs("div",{className:U("flex flex-1 flex-col gap-[12px]",{"gap-sm":u}),children:[i.jsx(BJ,{team:e.team_1,headshotImageUrl:n?.team1??null,anyWinner:c,subtitle:t?.team1,isDoubles:d,serving:e.team_1.emphasis,isLive:a}),i.jsx(BJ,{team:e.team_2,headshotImageUrl:n?.team2??null,anyWinner:c,subtitle:t?.team2,isDoubles:d,serving:e.team_2.emphasis,isLive:a})]})}),i.jsx("div",{className:"flex h-full items-center justify-end",children:i.jsx(mwe,{event:e,team1:e.team_1,team2:e.team_2,isLive:a})})]})]})]})},BJ=({team:e,headshotImageUrl:t,anyWinner:n,subtitle:r,isDoubles:s,serving:a,isLive:o})=>{const l=e.won,{isMobileStyle:c}=ye();return i.jsxs("div",{className:U("gap-sm flex items-center",{"opacity-30 grayscale":n&&!l}),children:[i.jsx(p5t,{headshotImageUrl:t??void 0,flagUrl:e.img??void 0,name:e.title??"",isCompositeFlag:s}),i.jsxs("div",{children:[i.jsxs(L,{variant:c?"smallBold":"baseSemi",className:"gap-xs flex items-center",children:[e.title,l&&i.jsx(z,{variant:"superLight",className:"p-xs ml-auto inline-flex aspect-square rounded-full",children:i.jsx(qR,{size:12,className:"text-super"})}),a&&o&&i.jsx(me,{icon:_ke,size:14,className:"text-super"})]}),typeof r=="string"?i.jsx(L,{variant:"micro",color:"light",className:"-mt-0.5",children:r}):r]})]})},VJ=e=>e.toISOString().split("T")[0];function XMt({events:e,players:t}){const n=f.useMemo(()=>e.reduce((l,c)=>{let u="";if(c.datetime){const d=new Date(c.datetime),m=d.getFullYear(),p=String(d.getMonth()+1).padStart(2,"0"),h=String(d.getDate()).padStart(2,"0");u=`${m}-${p}-${h}`}return l[u]=l[u]||[],l[u]?.push(c),l},{}),[e]),r=f.useMemo(()=>{const l=new Date,c=VJ(l),u=Object.keys(n);return u.length===0?c:u.reduce((d,m)=>{const p=new Date(m+"T00:00:00"),h=new Date(d+"T00:00:00"),g=Math.abs(p.getTime()-l.getTime()),y=Math.abs(h.getTime()-l.getTime());return g<y?m:d})},[n]),[s,a]=f.useState(new Date(r+"T00:00:00")),o=n[VJ(s)??""];return!o||o?.length===0?null:i.jsxs(z,{className:"mt-lg",children:[i.jsx(cMt,{selectedDate:s,setSelectedDate:a,eventsByDay:n}),i.jsx(Pn,{className:"overflow-hidden",children:i.jsx("div",{className:"grid",children:i.jsx(ZMt,{events:o??[],players:t})})})]})}const ZMt=({events:e,players:t})=>{const{locale:n}=Q(),r=f.useCallback(a=>{if(!a)return null;const o=new Date(a);if(isNaN(o.getTime()))return null;const l=new Date,c=o.getFullYear()!==l.getFullYear();return o.toLocaleDateString(n,{month:"short",day:"numeric",...c?{year:"numeric"}:{}})},[n]),{isMobileStyle:s}=ye();return i.jsxs("div",{className:"grid",children:[i.jsxs(z,{className:"px-md py-sm gap-sm flex w-full flex-row items-center justify-between",variant:"subtler",children:[i.jsx(L,{variant:s?"tiny":"smallBold",children:r(e[0]?.datetime)}),i.jsx(L,{variant:s?"tinyRegular":"small",color:"light",children:e[0]?.title[1]})]}),i.jsx("div",{className:"grid divide-y",children:e.map(a=>i.jsx(JMt,{event:a,players:t},a.id))})]})},JMt=({event:e,players:t})=>{const{europe:n,world:r}=wx(),s={team1:i.jsx(L,{variant:"micro",color:"light",className:"-mt-0.5",style:{color:n},children:"Team Europe"}),team2:i.jsx(L,{variant:"micro",color:"light",className:"-mt-0.5",style:{color:r},children:"Team World"})},a=t.world.concat(t.europe),o=a.find(u=>u.teamId===e.team_1.id),l=a.find(u=>u.teamId===e.team_2.id),c={team1:o?.logo_secondary??null,team2:l?.logo_secondary??null};return i.jsx(o2e,{event:e,subtitles:s,headshots:c})},e4t=async(e,t)=>{if(!t)return null;const n=await ne.POST("/rest/sports/{league}/widget","sports-widget",{body:t,params:{path:{league:e}}});if(n?.error)throw new Ee("API_CLIENTS_ERROR",{cause:n.error,details:t});return n.data},t4t=({data:e})=>{const{data:t}=$e({...Ov,queryKey:["/sports/widget",e.events.map(r=>r.id).join(",")],queryFn:()=>e4t(e.league,e.debug_fn_args),placeholderData:Ch,refetchInterval:3e4}),n=t||e;return n?.object!==e.object?null:i.jsx(twe,{canonicalPageLink:n?.canonical_pages?.[0]?.url_web,children:i.jsx(z,{variant:"raised",className:"divide-y overflow-hidden rounded-xl border",children:n?.events?.map(r=>i.jsx(o2e,{event:r},r.id))})})},jy=A.memo(({data:e})=>ns(e).with({object:"SportsEventsWidget"},t=>t.league==="atp"||t.league==="wta"?i.jsx(t4t,{data:t}):i.jsx(P3t,{widget:t})).with({object:"SportsStandingsWidget"},t=>i.jsx(m5t,{widgetData:t})).with({object:"SportsIndvScheduleWidget"},t=>i.jsx(t5t,{widgetData:t})).with({object:"SportsIndvEventsWidget"},t=>i.jsx(Z3t,{widgetData:t})).exhaustive());jy.displayName="SportsWidget";function n4t({csvString:e,filename:t="perplexity.csv"}){if(typeof window>"u")throw new Error("Attempting to download a CSV file in a server context.");try{const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(n){throw n}}function r4t(){return f.useCallback(e=>{n4t(e)},[])}var W6,WJ;function s4t(){if(WJ)return W6;WJ=1;var e=typeof Element<"u",t=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,o){if(a===o)return!0;if(a&&o&&typeof a=="object"&&typeof o=="object"){if(a.constructor!==o.constructor)return!1;var l,c,u;if(Array.isArray(a)){if(l=a.length,l!=o.length)return!1;for(c=l;c--!==0;)if(!s(a[c],o[c]))return!1;return!0}var d;if(t&&a instanceof Map&&o instanceof Map){if(a.size!==o.size)return!1;for(d=a.entries();!(c=d.next()).done;)if(!o.has(c.value[0]))return!1;for(d=a.entries();!(c=d.next()).done;)if(!s(c.value[1],o.get(c.value[0])))return!1;return!0}if(n&&a instanceof Set&&o instanceof Set){if(a.size!==o.size)return!1;for(d=a.entries();!(c=d.next()).done;)if(!o.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(o)){if(l=a.length,l!=o.length)return!1;for(c=l;c--!==0;)if(a[c]!==o[c])return!1;return!0}if(a.constructor===RegExp)return a.source===o.source&&a.flags===o.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof o.valueOf=="function")return a.valueOf()===o.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof o.toString=="function")return a.toString()===o.toString();if(u=Object.keys(a),l=u.length,l!==Object.keys(o).length)return!1;for(c=l;c--!==0;)if(!Object.prototype.hasOwnProperty.call(o,u[c]))return!1;if(e&&a instanceof Element)return!1;for(c=l;c--!==0;)if(!((u[c]==="_owner"||u[c]==="__v"||u[c]==="__o")&&a.$$typeof)&&!s(a[u[c]],o[u[c]]))return!1;return!0}return a!==a&&o!==o}return W6=function(o,l){try{return s(o,l)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},W6}var a4t=s4t();const o4t=io(a4t),i2e=A.memo(({domain:e,url:t,suffix:n,overflowCount:r,...s})=>{if(!t&&!e)return null;const a=e||$ue(t).replace(/^[a-z]{1,2}\./i,""),o=n?`${a}.${n}`:a,l=r&&r>0?i.jsxs("span",{className:"opacity-50",children:["+",r]}):void 0;return i.jsx(lc,{label:o,accessory:l,truncate:!0,...s})});i2e.displayName="CitationDomainBubble";const l2e=A.memo(function({href:t,overflowCount:n,getAttachmentUrl:r,onCitationClick:s,...a}){const[o,l]=f.useState(!1),[c,u]=f.useState(null),d=f.useCallback(async y=>{if(s?.(y),y?.defaultPrevented||!t||!r)return;const v=await r(t);Ja(t)&&(u(v),l(!0))},[s,r,t]),m=n&&n>0?i.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0,p=f.useCallback(()=>l(!1),[]),h=f.useMemo(()=>({src:c??void 0}),[c]);return C1(t||"")?i.jsx(lc,{accessory:m,icon:Pte,className:"cursor-pointer",truncate:!0,onClick:d,...a}):i.jsxs(i.Fragment,{children:[i.jsx(lc,{accessory:m,icon:RR,className:"cursor-pointer",truncate:!0,onClick:d,...a}),c&&i.jsx(M1,{isOpen:o,onClose:p,imgProps:h})]})});l2e.displayName="FileCitationBubble";const c2e=A.memo(({children:e,webResults:t,citationGroup:n,contentProps:r,hideHoverCard:s=!1,trackEvent:a,getAttachmentUrl:o,openMemorySearchHistoryModal:l,onCitationClick:c})=>{const[u,d]=f.useState(!1),[m,p]=f.useState(!1),[h,g]=f.useState(null),[y,v]=f.useState(!1),[x,b]=f.useState(null),_=s1(),w=Q(),{isMobileStyle:C}=ye(),S=f.useCallback(()=>v(!1),[]),E=f.useMemo(()=>({src:x??void 0}),[x]),M=f.useMemo(()=>t.every(R=>R.is_conversation_history),[t]),k=f.useCallback(()=>{if(M)return w.formatMessage({defaultMessage:"Library",id:"StcK672jB9"});switch(n.category){case"memory":return w.formatMessage({defaultMessage:"Memory",id:"dVx3yznM2C"});case"attachment":return w.formatMessage({defaultMessage:"Attachments",id:"Vlx13nOMtX"});case"youtube":return w.formatMessage({defaultMessage:"YouTube",id:"zuA3BgDC6u"});default:return w.formatMessage({defaultMessage:"Sources",id:"fhwTpAcBLC"})}},[n.category,M,w]),T=f.useCallback(R=>async O=>{if(O.preventDefault(),R.is_conversation_history||R.is_memory)if(c){c(R,O);return}else if(l){l(R);return}else{console.warn("Memory/conversation history modal handler not provided");return}if(R.url?Wh(R.url):null){g(R),p(!0),d(!1);return}const N=R.is_attachment||!1,I=Ja(R.url);if(N&&I&&o){const D=await o(R.url);b(D),v(!0),d(!1);return}if(N&&Vh(R)&&o){const D=await o(R.url);window.open(D,"_blank");return}a&&R.url&&a("click citation",{source:"grouped_hovercard",citation_url:R.url}),aO(R)&&window.open(R.url,"_blank")},[c,l,a,o]),j=f.useCallback(R=>{const O=R.is_memory?i.jsx(me,{icon:Xi,size:"sm"}):R.is_conversation_history?i.jsx(me,{icon:Tf,size:"sm"}):i.jsx(bu.Icon,{url:R.url,isAttachment:R.is_attachment||!1,connectionType:R.meta_data?.connection_type}),P=R.meta_data?.connection_type,N=P==="WILEY"?"Wiley":P||R.is_memory||R.is_conversation_history?R.name:void 0,I=R.is_memory?R.snippet:R.name;return i.jsxs("div",{className:"hover:bg-subtler relative flex min-w-0 cursor-pointer select-none items-start gap-3 rounded-lg px-2 py-1.5 align-top",children:[i.jsx("span",{className:"mt-two shrink-0",children:O}),i.jsxs("span",{className:U("flex min-w-0 select-none",{"gap-two flex-col items-start":R.is_memory,"gap-xs items-center":!R.is_memory}),children:[I&&i.jsx(L,{className:U("min-w-0 shrink",{"truncate text-ellipsis":!R.is_memory},{"line-clamp-2":R.is_memory}),variant:"small",as:"span",children:I}),!M&&i.jsx(L,{variant:"tinyMono",color:"light",className:"shrink-0",children:i.jsx(bu.Source,{url:R.url,source:N,isAttachment:R.is_attachment||!1,connectionType:R.meta_data?.connection_type,isMemory:R.is_memory||!1,isConversationHistory:R.is_conversation_history||!1})})]})]})},[M]);return i.jsxs(i.Fragment,{children:[h&&h.url&&i.jsx(k1,{isOpen:m,name:h.name,setisOpen:p,url:h.url}),x&&i.jsx(M1,{isOpen:y,onClose:S,imgProps:E}),i.jsxs(Awe,{onOpenChange:R=>{d(s?!1:R)},open:u,openDelay:0,closeDelay:C?0:200,children:[i.jsx(jwe,{asChild:!0,onPointerDown:R=>{(C||R.pointerType==="touch")&&d(!0)},children:e}),i.jsx(Rwe,{children:i.jsx(Iwe,{className:U({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!_}),side:"bottom",sideOffset:8,collisionPadding:C?8:10,align:C?"center":"start",...r,children:i.jsxs("div",{className:U("bg-base dark:border-subtler rounded-xl border pt-3 shadow-lg",{"w-96":!C,"w-[calc(100vw-16px)]":C}),children:[i.jsxs("div",{className:"gap-two flex px-5 pb-2 pt-1",children:[i.jsx(L,{variant:"tinyMono",children:k()}),i.jsx(L,{variant:"tinyMono",as:"span",color:"light",className:"mx-two",children:""}),i.jsx(L,{variant:"tinyMono",color:"light",children:n.totalCount||t.length})]}),i.jsx("div",{className:"max-h-60 overflow-y-auto px-3 pb-3 [scrollbar-gutter:stable]",children:i.jsx("div",{className:"space-y-px",children:t.map((R,O)=>i.jsx(Ye,{className:"block",href:R.url||"#",target:"_blank",rel:"noopener nofollow",onClick:T(R),children:j(R)},R.url||O))})})]})})})]})]})});c2e.displayName="GroupedCitationHoverCard";const u2e=A.memo(({ytID:e,timestamp:t,overflowCount:n,...r})=>{const[s,a]=f.useState(!1),o=f.useCallback(()=>a(!0),[]),l=n&&n>0?i.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0;return i.jsxs(i.Fragment,{children:[i.jsx(lc,{label:"youtube",accessory:l,icon:nne,onClick:o,className:"cursor-pointer",...r}),e&&i.jsx(k1,{url:`https://www.youtube.com/watch?v=${e}`,name:"",isOpen:s,setisOpen:a,timestamp:t})]})});u2e.displayName="YoutubeCitationBubble";const i4t="_entity_chip",$J="pplx-entity-id";function IWt(e){const t=e.match(/^pplx:\/\/entity_chip\/(?<id>.+)$/);if(!(!t||!t.groups?.id))return t.groups.id}var va;(function(e){e.YOUTUBE="youtube",e.FILE="file",e.MEMORY="memory",e.CONVERSATION_HISTORY="conversation_history",e.WEB="web",e.NUMBERED="numbered"})(va||(va={}));function l4t(e){if(e){if(e.is_memory)return Xi;if(e.is_conversation_history)return Tf}}function c4t(e){const{ytID:t,isMobileStyle:n,isFile:r,isMemory:s,isConversationHistory:a,enableCitationGrouping:o}=e;return t&&!n?va.YOUTUBE:r?va.FILE:o?s?va.MEMORY:a?va.CONVERSATION_HISTORY:va.WEB:va.NUMBERED}function u4t(e){const t=e.indexOf("&t=");return t!==-1?e.substring(t+3):void 0}function d4t({count:e}){return!e||e<=0?null:i.jsxs("span",{className:"pl-two opacity-50",children:["+",e]})}const DF=A.memo(e=>{const{str:t,href:n,className:r,trackEvent:s,isFile:a,isDownloadable:o,citationSize:l,onCitationClick:c,getAttachmentUrl:u,isMemory:d,isConversationHistory:m,citationGroup:p,enableCitationGrouping:h,citationDomain:g,fileName:y,webResult:v,ref:x,...b}=e,{isMobileStyle:_}=ye(),w=QS.test(t),C=f.useCallback(()=>{s?.("click citation",{source:"inline",citation_url:n})},[n,s]),S=f.useMemo(()=>{const D=p?.overflowCount;return!D||D<=0?null:i.jsx(d4t,{count:D})},[p?.overflowCount]);if(!w)return i.jsx("span",{children:t});const E=u4t(n),M=Wh(n),k=t.replace(/\[|\]|,.*$/g,""),j=!!(n&&!d&&!m&&(!(M||o)||_)),R=c4t({ytID:M,isMobileStyle:_,isFile:a,isMemory:d,isConversationHistory:m,enableCitationGrouping:h}),O=h&&p&&p.citations.length>1,P=_&&O,N=!j||P?"onClick":"external";let I;switch(R){case va.YOUTUBE:I=M&&i.jsx(u2e,{...!h&&{label:k},ytID:M,overflowCount:p?.overflowCount??0,timestamp:E,size:l});break;case va.FILE:I=i.jsx(l2e,{label:h?y??k:k,overflowCount:p?.overflowCount??0,size:l,href:n,getAttachmentUrl:o?u:void 0,onCitationClick:c});break;case va.NUMBERED:{const D=l4t(v);I=D?i.jsx(lc,{label:k,icon:D,size:l,onClick:c,href:n,linkBehavior:N,trackEvent:s}):i.jsx(l5,{label:k,size:l,onClick:c,href:n,linkBehavior:N,trackEvent:s});break}case va.MEMORY:I=i.jsx(lc,{label:v?.name.toLocaleLowerCase(),icon:Xi,accessory:S,size:l,truncate:!0,onClick:c,linkBehavior:"onClick"});break;case va.CONVERSATION_HISTORY:I=i.jsx(lc,{label:"library",icon:Tf,accessory:S,size:l,truncate:!1,onClick:c,linkBehavior:"onClick"});break;case va.WEB:default:I=i.jsx(i2e,{domain:g,url:n,overflowCount:p?.overflowCount??0,size:l,href:n,linkBehavior:N,trackEvent:s,onClick:P?c:C})}return i.jsx("span",{className:U(r,"citation inline"),ref:x,...b,children:I})});DF.displayName="MdStringToLink";const f4t=function(t){const{ref:n,...r}=t,{anchor:s,className:a,...o}=r,l=d=>{const m=document.getElementById(d);m&&m.scrollIntoView({behavior:"smooth"})},c=s.replace(/\[|\]/g,""),u=f.useCallback(()=>l(`#search${s}`),[s]);return i.jsx(Ye,{href:`#search${s}`,onClick:u,className:a,ref:n,...o,children:i.jsx(l5,{label:c})})},PWt=e=>{const{hideHoverCard:t=!1,trackEvent:n,citationSize:r,onCitationClick:s,getAttachmentUrl:a,enableCitationGrouping:o=!1,webResults:l=[],EntityChipComponent:c,inlineTokenAnnotationsLookup:u}=e;return A.memo(m=>{const{className:p,href:h,title:g,children:y,target:v="_blank",node:x,ref:b,..._}=m,w=x?.data?.webResult,C=w?.is_attachment??!1,S=x?.data?.webResultCitation,E=w?.is_memory??!1,M=w?.is_conversation_history??!1,{$t:k}=Q(),T=o&&x?.data?x.data.citationGroup:void 0,{isMobileStyle:j}=ye(),R=f.useCallback(B=>{if(T&&T.citations.length>1&&j){B?.preventDefault();return}if(o&&T&&T.citations.length>0&&(w?.is_memory||w?.is_conversation_history)){const $=T.citations[0],G=l?.[$-1];G&&s&&s(G,B)}else w&&s&&s(w,B)},[w,T,j]),O=f.useMemo(()=>{if(!x||!u||!($J in x.properties))return;const B=x.properties[$J];if(typeof B!="string")return;const V=u[B];if(V&&V.annotation_type===s$.FINANCE){const $=V.data;return $?.symbol?{id:V.id,annotation_type:V.annotation_type,symbol:$.symbol,quoteUrl:$.quote_url||""}:void 0}},[x]),P=f.useCallback(()=>{n&&O&&n("click entity chip",{type:O.annotation_type,symbol:O.symbol})},[O]),N=f.useMemo(()=>({side:"bottom"}),[]),I=f.useMemo(()=>w?{onClick(B){n&&n("click citation",{source:"inline hoverCard",citation_url:w.url}),R(B)}}:void 0,[w,R]),D=f.useMemo(()=>({color:"light"}),[]);let F;switch(g){case"_citation":{if(T?.isHidden)return null;F=i.jsx(DF,{isMemory:E,isConversationHistory:M,onCitationClick:R,className:p,str:A.Children.toArray(y).join(""),href:h,rel:"nofollow noopener",trackEvent:n,isFile:C,isDownloadable:w?Vh(w):!1,citationSize:r,getAttachmentUrl:a,citationGroup:T,enableCitationGrouping:o,citationDomain:w?.meta_data?.citation_domain_name,fileName:w?.name,webResult:w,ref:b});break}case"_anchor_citation":{F=i.jsx(f4t,{anchor:A.Children.toArray(y).join(""),className:p,ref:b,..._});break}case i4t:return!O||!c?null:i.jsx(c,{type:s$.FINANCE,data:O,className:p,onClick:P,ref:b});default:F=i.jsx(Ye,{href:h,target:v,title:g,rel:"nofollow noopener",className:U(p,"hover:text-super hover:decoration-super break-words underline decoration-from-font underline-offset-1 transition-all duration-300"),ref:b,..._,children:y})}if(w){if(o&&T&&T.citations.length>1){const V=T.citations.map($=>l[$-1]).filter($=>$!==void 0);return i.jsx(c2e,{webResults:V,citationGroup:T,hideHoverCard:t,trackEvent:n,getAttachmentUrl:a,onCitationClick:s,contentProps:N,children:F})}return i.jsx(i5,{hideHoverCard:t,contentProps:N,linkProps:I,result:w,trackEvent:n,timestampComponent:yE.isRecentlyTrending(w)?i.jsx(gE,{recentlyUpdatedLabel:k({defaultMessage:"Just now",description:"Label for recently updated content",id:"FlgDFQFpF1"}),timestamp:w.meta_data?.published_date,timestampProps:D,children:"Updated"}):null,webResultCitation:S,getAttachmentUrl:a,children:F})}return F},o4t)},d2e=A.memo(({status:e})=>i.jsx(L,{as:"span",variant:"smallBold",color:e?"super":"light",children:i.jsx(me,{icon:e?Rr:Lt,size:"md"})}));d2e.displayName="BoolCell";const f2e=A.memo(({url:e})=>i.jsx(Ye,{href:e,target:"_blank",rel:"noopener",className:"top-xs relative inline-block transition-opacity duration-300 hover:opacity-50",children:i.jsx(bu,{color:"light",variant:"tiny",url:e,isAttachment:!1})}));f2e.displayName="LinkCell";const hw=A.memo(({text:e})=>i.jsx(L,{as:"span",variant:"tiny",className:"text-pretty break-words font-normal",children:e}));hw.displayName="TextCell";const m2e=function(e){if(e==null)return g4t;if(typeof e=="function")return c5(e);if(typeof e=="object")return Array.isArray(e)?m4t(e):p4t(e);if(typeof e=="string")return h4t(e);throw new Error("Expected function, string, or object as test")};function m4t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=m2e(e[n]);return c5(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function p4t(e){const t=e;return c5(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function h4t(e){return c5(t);function t(n){return n&&n.type===e}}function c5(e){return t;function t(n,r,s){return!!(y4t(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function g4t(){return!0}function y4t(e){return e!==null&&typeof e=="object"&&"type"in e}const p2e=[],v4t=!0,HJ=!1,x4t="skip";function b4t(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=m2e(s),o=r?-1:1;l(e,void 0,[])();function l(c,u,d){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const h=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})}return p;function p(){let h=p2e,g,y,v;if((!t||a(c,u,d[d.length-1]||void 0))&&(h=_4t(n(c,d)),h[0]===HJ))return h;if("children"in c&&c.children){const x=c;if(x.children&&h[0]!==x4t)for(y=(r?x.children.length:-1)+o,v=d.concat(x);y>-1&&y<x.children.length;){const b=x.children[y];if(g=l(b,y,v)(),g[0]===HJ)return g;y=typeof g[1]=="number"?g[1]:y+o}}return h}}}function _4t(e){return Array.isArray(e)?e:typeof e=="number"?[v4t,e]:e==null?p2e:[e]}function um(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),b4t(e,a,l,s);function l(c,u){const d=u[u.length-1],m=d?d.children.indexOf(c):void 0;return o(c,m,d)}}class zJ{static stringArrayToCSV(t){return t.map(this.escapeCSVString).join(",")}static escapeCSVString(t){return`"${t.replace(/"/g,'""')}"`}static tableCellToText(t){const n=[];let r="";return um(t,[{type:"text"},{tagName:"br"},{tagName:"a"}],s=>{if(s.type==="element"&&s.tagName==="br"){n.push(`
`);return}s.type==="element"&&s.tagName==="a"&&s.properties?.href&&(r=String(s.properties.href)),s.type==="text"&&n.push(s.value.trim())}),r||n.join("")}static tableToCSV(t){if(t.tagName!=="table")throw new Error("Attempting to convert node of wrong tagName to CSV from 'table'");try{const n=[];let r="";return um(t,{tagName:"thead"},s=>{const a=[];um(s,{tagName:"th"},o=>{const l=this.tableCellToText(o);a.push(l)}),n.push(this.stringArrayToCSV(a)),r+=a.join("-").replace(/[^a-z0-9\\-]/gi,"")}),um(t,{tagName:"tbody"},s=>{um(s,{tagName:"tr"},a=>{const o=[];um(a,{tagName:"td"},l=>{const c=this.tableCellToText(l);o.push(c)}),n.push(this.stringArrayToCSV(o))})}),{csvString:n.join(`
`),filename:r}}catch(n){throw new Error(`Error attempting to convert table node to CSV string: ${n}`)}}}const h2e=A.memo(({tableData:e,citationOffset:t})=>{const{$t:n}=Q(),{trackEvent:r}=Me(),{data:s,column_metadata:a,search_results:o}=e,l=f.useMemo(()=>a.reduce((g,{name:y,display_name:v})=>(g[y]=v,g),{}),[a]),c=f.useMemo(()=>a.reduce((g,{name:y,display_format:v})=>(g[y]=v,g),{}),[a]),u=f.useCallback((g,y)=>g.value===null&&y.value===null?0:g.value===null?-1:y.value===null?1:typeof g.value=="string"?String(g.value).localeCompare(String(y.value)):Number(g.value)-Number(y.value),[]),d=f.useCallback(({data:g,id:y,...v})=>{const x=c[y],b=g[y]?.citation_index??null,_=b!==null?o[b]:null,w=_?.is_attachment??!1,C=g[y]?.value;let S=i.jsx(hw,{text:String(C)});return x==="url"&&(S=i.jsx(f2e,{url:String(C)})),x==="boolean"&&(S=i.jsx(d2e,{status:!!C})),x==="long_text"&&(S=i.jsx(hw,{text:String(C)})),x==="date"&&(S=i.jsx(hw,{text:String(C)})),C===null?i.jsx("td",{...v,children:i.jsx(L,{variant:"tiny",color:"ultraLight",children:i.jsx(me,{icon:KC,size:"xs"})})}):i.jsxs("td",{...v,children:[i.jsx("span",{children:S}),x!=="url"&&_&&_.url&&b!==null&&i.jsx(i5,{result:_,children:i.jsx(DF,{str:`[${b+t+1}]`,href:_.url,isFile:w,isDownloadable:Vh(_),className:U("citation ml-xs inline")})})]})},[o,c,t]),m=f.useMemo(()=>a.map(({name:g})=>({name:g,label:l[g],sortable:!0,resizable:!0})),[a,l]),p=r4t(),h=f.useCallback(()=>{const g=a.reduce((b,_)=>(b.push(_.name),b),[]).join("-"),y=a.map(({display_name:b})=>zJ.escapeCSVString(b)).join(","),v=s.map(b=>a.map(({name:_})=>zJ.escapeCSVString(String(b[_]?.value))).join(",")),x=[y,...v].join(`
`);return r("clicked download table as csv",{source:"widget"}),p({csvString:x,filename:g})},[a,s,p,r]);return i.jsx(Go,{widgetType:"table",widgetName:"table",widgetSize:"full",children:i.jsxs(z,{variant:"subtler",className:"px-md pb-xs rounded-lg",children:[i.jsx(Lwe,{data:s,columns:m,RowCell:d,compareFunction:u}),i.jsx(z,{className:"border-subtlest py-sm flex justify-end border-t",children:i.jsx(Te,{icon:ph,variant:"super",onClick:h,pill:!0,size:"tiny",text:n({defaultMessage:"Export CSV",id:"TE51b7zSWC"}),toolTip:n({defaultMessage:"Download Table as CSV",id:"X3dYB0f+/Q"})})})]})})});h2e.displayName="TableWidget";const g2e=f.memo(({children:e,defaultExpanded:t=!1,title:n})=>{const{$t:r}=Q(),[s,a]=f.useState(t),o=f.useCallback(()=>{a(c=>!c)},[]),l=f.useMemo(()=>s?Qn:_r,[s]);return i.jsx(Uo,{className:"overflow-hidden",transition:{duration:.3,ease:hn},children:i.jsxs("div",{children:[i.jsx(ge,{variant:"common",text:n??r({defaultMessage:"Advanced",id:"3Rx6Qo1x+1"}),onClick:o,size:"tiny",icon:l,noPadding:!0,extraCSS:"!bg-transparent hover:!bg-subtler"}),i.jsx(so,{children:s&&i.jsx("div",{className:"pt-2",children:e})})]})})});g2e.displayName="AutomationAdvancedSection";const w4t=[{value:"ONCE",label:"Once"},{value:"DAILY",label:"Daily"},{value:"WEEKLY",label:"Weekly"},{value:"WEEKDAYS",label:"Every weekday"},{value:"MONTHLY",label:"Monthly"},{value:"YEARLY",label:"Yearly"}],C4t=[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"2",label:"Tuesday"},{value:"3",label:"Wednesday"},{value:"4",label:"Thursday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}],S4t=[...Array(31)].map((e,t)=>({value:String(t+1),label:String(t+1)})),E4t=[{value:"0",label:"January"},{value:"1",label:"February"},{value:"2",label:"March"},{value:"3",label:"April"},{value:"4",label:"May"},{value:"5",label:"June"},{value:"6",label:"July"},{value:"7",label:"August"},{value:"8",label:"September"},{value:"9",label:"October"},{value:"10",label:"November"},{value:"11",label:"December"}];var It=function(){return It=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},It.apply(this,arguments)};function M4t(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function y2e(e,t,n){for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Cx(e){return e.mode==="multiple"}function Sx(e){return e.mode==="range"}function u5(e){return e.mode==="single"}var k4t={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function T4t(e,t){return Ec(e,"LLLL y",t)}function N4t(e,t){return Ec(e,"d",t)}function A4t(e,t){return Ec(e,"LLLL",t)}function j4t(e){return"".concat(e)}function R4t(e,t){return Ec(e,"cccccc",t)}function I4t(e,t){return Ec(e,"yyyy",t)}var P4t=Object.freeze({__proto__:null,formatCaption:T4t,formatDay:N4t,formatMonthCaption:A4t,formatWeekNumber:j4t,formatWeekdayName:R4t,formatYearCaption:I4t}),O4t=function(e,t,n){return Ec(e,"do MMMM (EEEE)",n)},L4t=function(){return"Month: "},D4t=function(){return"Go to next month"},F4t=function(){return"Go to previous month"},U4t=function(e,t){return Ec(e,"cccc",t)},B4t=function(e){return"Week n. ".concat(e)},V4t=function(){return"Year: "},W4t=Object.freeze({__proto__:null,labelDay:O4t,labelMonthDropdown:L4t,labelNext:D4t,labelPrevious:F4t,labelWeekNumber:B4t,labelWeekday:U4t,labelYearDropdown:V4t});function $4t(){var e="buttons",t=k4t,n=Woe,r={},s={},a=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:P4t,labels:W4t,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:o,today:l,mode:"default"}}function H4t(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,a=e.fromDate,o=e.toDate;return r?a=Ea(r):t&&(a=new Date(t,0,1)),s?o=DS(s):n&&(o=new Date(n,11,31)),{fromDate:a?yu(a):void 0,toDate:o?yu(o):void 0}}var v2e=f.createContext(void 0);function z4t(e){var t,n=e.initialProps,r=$4t(),s=H4t(n),a=s.fromDate,o=s.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(u5(n)||Cx(n)||Sx(n))&&(c=n.onSelect);var u=It(It(It({},r),n),{captionLayout:l,classNames:It(It({},r.classNames),n.classNames),components:It({},n.components),formatters:It(It({},r.formatters),n.formatters),fromDate:a,labels:It(It({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:It(It({},r.modifiers),n.modifiers),modifiersClassNames:It(It({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:It(It({},r.styles),n.styles),toDate:o});return A.createElement(v2e.Provider,{value:u},e.children)}function ar(){var e=f.useContext(v2e);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function x2e(e){var t=ar(),n=t.locale,r=t.classNames,s=t.styles,a=t.formatters.formatCaption;return A.createElement("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id},a(e.displayMonth,{locale:n}))}function G4t(e){return A.createElement("svg",It({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e),A.createElement("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"}))}function b2e(e){var t,n,r=e.onChange,s=e.value,a=e.children,o=e.caption,l=e.className,c=e.style,u=ar(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:G4t;return A.createElement("div",{className:l,style:c},A.createElement("span",{className:u.classNames.vhidden},e["aria-label"]),A.createElement("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r},a),A.createElement("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true"},o,A.createElement(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})))}function q4t(e){var t,n=ar(),r=n.fromDate,s=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return A.createElement(A.Fragment,null);if(!s)return A.createElement(A.Fragment,null);var m=[];if(zoe(r,s))for(var p=Ea(r),h=r.getMonth();h<=s.getMonth();h++)m.push(YM(p,h));else for(var p=Ea(new Date),h=0;h<=11;h++)m.push(YM(p,h));var g=function(v){var x=Number(v.target.value),b=YM(Ea(e.displayMonth),x);e.onChange(b)},y=(t=u?.Dropdown)!==null&&t!==void 0?t:b2e;return A.createElement(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o})},m.map(function(v){return A.createElement("option",{key:v.getMonth(),value:v.getMonth()},l(v,{locale:o}))}))}function K4t(e){var t,n=e.displayMonth,r=ar(),s=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!s)return A.createElement(A.Fragment,null);if(!a)return A.createElement(A.Fragment,null);for(var h=s.getFullYear(),g=a.getFullYear(),y=h;y<=g;y++)p.push(C$(lLe(new Date),y));var v=function(b){var _=C$(Ea(n),Number(b.target.value));e.onChange(_)},x=(t=u?.Dropdown)!==null&&t!==void 0?t:b2e;return A.createElement(x,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:n.getFullYear(),caption:d(n,{locale:o})},p.map(function(b){return A.createElement("option",{key:b.getFullYear(),value:b.getFullYear()},d(b,{locale:o}))}))}function Y4t(e,t){var n=f.useState(e),r=n[0],s=n[1],a=t===void 0?r:t;return[a,s]}function Q4t(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,a=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(a&&Ep(a,s)<0){var u=-1*(c-1);s=fi(a,u)}return o&&Ep(s,o)<0&&(s=o),Ea(s)}function X4t(){var e=ar(),t=Q4t(e),n=Y4t(t,e.month),r=n[0],s=n[1],a=function(o){var l;if(!e.disableNavigation){var c=Ea(o);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,a]}function Z4t(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=Ea(e),a=Ea(fi(s,r)),o=Ep(a,s),l=[],c=0;c<o;c++){var u=fi(s,c);l.push(u)}return n&&(l=l.reverse()),l}function J4t(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Ea(e);if(!n)return fi(l,o);var c=Ep(n,e);if(!(c<a))return fi(l,o)}}function ekt(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,o=r?a:1,l=Ea(e);if(!n)return fi(l,-o);var c=Ep(l,n);if(!(c<=0))return fi(l,-o)}}var _2e=f.createContext(void 0);function tkt(e){var t=ar(),n=X4t(),r=n[0],s=n[1],a=Z4t(r,t),o=J4t(r,t),l=ekt(r,t),c=function(m){return a.some(function(p){return L7(m,p)})},u=function(m,p){c(m)||(p&&Hoe(m,p)?s(fi(m,1+t.numberOfMonths*-1)):s(m))},d={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return A.createElement(_2e.Provider,{value:d},e.children)}function Ex(){var e=f.useContext(_2e);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function GJ(e){var t,n=ar(),r=n.classNames,s=n.styles,a=n.components,o=Ex().goToMonth,l=function(d){o(d)},c=(t=a?.CaptionLabel)!==null&&t!==void 0?t:x2e,u=A.createElement(c,{id:e.id,displayMonth:e.displayMonth});return A.createElement("div",{className:r.caption_dropdowns,style:s.caption_dropdowns},A.createElement("div",{className:r.vhidden},u),A.createElement(q4t,{onChange:l,displayMonth:e.displayMonth}),A.createElement(K4t,{onChange:l,displayMonth:e.displayMonth}))}function nkt(e){return A.createElement("svg",It({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),A.createElement("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"}))}function rkt(e){return A.createElement("svg",It({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),A.createElement("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"}))}var RC=f.forwardRef(function(e,t){var n=ar(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];e.className&&a.push(e.className);var o=a.join(" "),l=It(It({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),A.createElement("button",It({},e,{ref:t,type:"button",className:o,style:l}))});function skt(e){var t,n,r=ar(),s=r.dir,a=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return A.createElement(A.Fragment,null);var p=u(e.previousMonth,{locale:a}),h=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:a}),y=[o.nav_button,o.nav_button_next].join(" "),v=(t=m?.IconRight)!==null&&t!==void 0?t:rkt,x=(n=m?.IconLeft)!==null&&n!==void 0?n:nkt;return A.createElement("div",{className:o.nav,style:l.nav},!e.hidePrevious&&A.createElement(RC,{name:"previous-month","aria-label":p,className:h,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick},s==="rtl"?A.createElement(v,{className:o.nav_icon,style:l.nav_icon}):A.createElement(x,{className:o.nav_icon,style:l.nav_icon})),!e.hideNext&&A.createElement(RC,{name:"next-month","aria-label":g,className:y,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick},s==="rtl"?A.createElement(x,{className:o.nav_icon,style:l.nav_icon}):A.createElement(v,{className:o.nav_icon,style:l.nav_icon})))}function qJ(e){var t=ar().numberOfMonths,n=Ex(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(g){return L7(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),m=t>1&&(u||!c),p=function(){r&&a(r)},h=function(){s&&a(s)};return A.createElement(skt,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:h})}function akt(e){var t,n=ar(),r=n.classNames,s=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,c=(t=l?.CaptionLabel)!==null&&t!==void 0?t:x2e,u;return s?u=A.createElement(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=A.createElement(GJ,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=A.createElement(A.Fragment,null,A.createElement(GJ,{displayMonth:e.displayMonth,id:e.id}),A.createElement(qJ,{displayMonth:e.displayMonth,id:e.id})):u=A.createElement(A.Fragment,null,A.createElement(c,{id:e.id,displayMonth:e.displayMonth}),A.createElement(qJ,{displayMonth:e.displayMonth,id:e.id})),A.createElement("div",{className:r.caption,style:a.caption},u)}function okt(e){var t=ar(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?A.createElement("tfoot",{className:s,style:r.tfoot},A.createElement("tr",null,A.createElement("td",{colSpan:8},n))):A.createElement(A.Fragment,null)}function ikt(e,t,n){for(var r=n?Jd(new Date):ll(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var o=ys(r,a);s.push(o)}return s}function lkt(){var e=ar(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,a=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=ikt(s,a,o);return A.createElement("tr",{style:n.head_row,className:t.head_row},r&&A.createElement("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,m){return A.createElement("th",{key:m,scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:s})},l(d,{locale:s}))}))}function ckt(){var e,t=ar(),n=t.classNames,r=t.styles,s=t.components,a=(e=s?.HeadRow)!==null&&e!==void 0?e:lkt;return A.createElement("thead",{style:r.head,className:n.head},A.createElement(a,null))}function ukt(e){var t=ar(),n=t.locale,r=t.formatters.formatDay;return A.createElement(A.Fragment,null,r(e.date,{locale:n}))}var FF=f.createContext(void 0);function dkt(e){if(!Cx(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return A.createElement(FF.Provider,{value:t},e.children)}return A.createElement(fkt,{initialProps:e.initialProps,children:e.children})}function fkt(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,a=t.max,o=function(u,d,m){var p,h;(p=t.onDayClick)===null||p===void 0||p.call(t,u,d,m);var g=!!(d.selected&&s&&r?.length===s);if(!g){var y=!!(!d.selected&&a&&r?.length===a);if(!y){var v=r?y2e([],r):[];if(d.selected){var x=v.findIndex(function(b){return vs(u,b)});v.splice(x,1)}else v.push(u);(h=t.onSelect)===null||h===void 0||h.call(t,v,u,d,m)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=a&&r.length>a-1,m=r.some(function(p){return vs(p,u)});return!!(d&&!m)});var c={selected:r,onDayClick:o,modifiers:l};return A.createElement(FF.Provider,{value:c},n)}function UF(){var e=f.useContext(FF);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function mkt(e,t){var n=t||{},r=n.from,s=n.to;if(!r)return{from:e,to:void 0};if(!s&&vs(r,e))return{from:r,to:e};if(!s&&Hoe(e,r))return{from:e,to:r};if(!s)return{from:r,to:e};if(!(vs(s,e)&&vs(r,e))){if(vs(s,e))return{from:s,to:void 0};if(!vs(r,e))return $oe(r,e)?{from:e,to:s}:{from:r,to:e}}}var BF=f.createContext(void 0);function pkt(e){if(!Sx(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return A.createElement(BF.Provider,{value:t},e.children)}return A.createElement(hkt,{initialProps:e.initialProps,children:e.children})}function hkt(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},a=s.from,o=s.to,l=t.min,c=t.max,u=function(h,g,y){var v,x;(v=t.onDayClick)===null||v===void 0||v.call(t,h,g,y);var b=mkt(h,r);(x=t.onSelect)===null||x===void 0||x.call(t,b,h,g,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a&&(d.range_start=[a],o?(d.range_end=[o],vs(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]),l&&(a&&!o&&d.disabled.push({after:pA(a,l-1),before:ys(a,l-1)}),a&&o&&d.disabled.push({after:a,before:ys(a,l-1)})),c&&(a&&!o&&(d.disabled.push({before:ys(a,-c+1)}),d.disabled.push({after:ys(a,c-1)})),a&&o)){var m=Gi(o,a)+1,p=c-m;d.disabled.push({before:pA(a,p)}),d.disabled.push({after:ys(o,p)})}return A.createElement(BF.Provider,{value:{selected:r,onDayClick:u,modifiers:d}},n)}function VF(){var e=f.useContext(BF);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function gw(e){return Array.isArray(e)?y2e([],e):e!==void 0?[e]:[]}function gkt(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=gw(s)}),t}var vi;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(vi||(vi={}));var ykt=vi.Selected,Fl=vi.Disabled,vkt=vi.Hidden,xkt=vi.Today,$6=vi.RangeEnd,H6=vi.RangeMiddle,z6=vi.RangeStart,bkt=vi.Outside;function _kt(e,t,n){var r,s=(r={},r[ykt]=gw(e.selected),r[Fl]=gw(e.disabled),r[vkt]=gw(e.hidden),r[xkt]=[e.today],r[$6]=[],r[H6]=[],r[z6]=[],r[bkt]=[],r);return e.fromDate&&s[Fl].push({before:e.fromDate}),e.toDate&&s[Fl].push({after:e.toDate}),Cx(e)?s[Fl]=s[Fl].concat(t.modifiers[Fl]):Sx(e)&&(s[Fl]=s[Fl].concat(n.modifiers[Fl]),s[z6]=n.modifiers[z6],s[H6]=n.modifiers[H6],s[$6]=n.modifiers[$6]),s}var w2e=f.createContext(void 0);function wkt(e){var t=ar(),n=UF(),r=VF(),s=_kt(t,n,r),a=gkt(t.modifiers),o=It(It({},s),a);return A.createElement(w2e.Provider,{value:o},e.children)}function C2e(){var e=f.useContext(w2e);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Ckt(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Skt(e){return!!(e&&typeof e=="object"&&"from"in e)}function Ekt(e){return!!(e&&typeof e=="object"&&"after"in e)}function Mkt(e){return!!(e&&typeof e=="object"&&"before"in e)}function kkt(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Tkt(e,t){var n,r=t.from,s=t.to;if(!r)return!1;if(!s&&vs(r,e))return!0;if(!s)return!1;var a=Gi(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var o=Gi(e,r)>=0&&Gi(s,e)>=0;return o}function Nkt(e){return R7(e)}function Akt(e){return Array.isArray(e)&&e.every(R7)}function jkt(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(Nkt(n))return vs(e,n);if(Akt(n))return n.includes(e);if(Skt(n))return Tkt(e,n);if(kkt(n))return n.dayOfWeek.includes(e.getDay());if(Ckt(n)){var r=Gi(n.before,e),s=Gi(n.after,e),a=r>0,o=s<0,l=$oe(n.before,n.after);return l?o&&a:a||o}return Ekt(n)?Gi(e,n.after)>0:Mkt(n)?Gi(n.before,e)>0:typeof n=="function"?n(e):!1})}function WF(e,t,n){var r=Object.keys(t).reduce(function(a,o){var l=t[o];return jkt(e,l)&&a.push(o),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!L7(e,n)&&(s.outside=!0),s}function Rkt(e,t){for(var n=Ea(e[0]),r=DS(e[e.length-1]),s,a,o=n;o<=r;){var l=WF(o,t),c=!l.disabled&&!l.hidden;if(!c){o=ys(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),s||(s=o),o=ys(o,1)}return a||s}var Ikt=365;function S2e(e,t){var n=t.moveBy,r=t.direction,s=t.context,a=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,m=s.locale,p={day:ys,week:Vw,month:fi,year:$Oe,startOfWeek:function(v){return s.ISOWeek?Jd(v):ll(v,{locale:m,weekStartsOn:c})},endOfWeek:function(v){return s.ISOWeek?Foe(v):O7(v,{locale:m,weekStartsOn:c})}},h=p[n](e,r==="after"?1:-1);r==="before"&&u?h=HOe([u,h]):r==="after"&&d&&(h=zOe([d,h]));var g=!0;if(a){var y=WF(h,a);g=!y.disabled&&!y.hidden}return g?h:l.count>Ikt?l.lastFocused:S2e(h,{moveBy:n,direction:r,context:s,modifiers:a,retry:It(It({},l),{count:l.count+1})})}var E2e=f.createContext(void 0);function Pkt(e){var t=Ex(),n=C2e(),r=f.useState(),s=r[0],a=r[1],o=f.useState(),l=o[0],c=o[1],u=Rkt(t.displayMonths,n),d=s??(l&&t.isDateDisplayed(l))?l:u,m=function(){c(s),a(void 0)},p=function(v){a(v)},h=ar(),g=function(v,x){if(s){var b=S2e(s,{moveBy:v,direction:x,context:h,modifiers:n});vs(s,b)||(t.goToDate(b,s),p(b))}},y={focusedDay:s,focusTarget:d,blur:m,focus:p,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return A.createElement(E2e.Provider,{value:y},e.children)}function $F(){var e=f.useContext(E2e);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Okt(e,t){var n=C2e(),r=WF(e,n,t);return r}var HF=f.createContext(void 0);function Lkt(e){if(!u5(e.initialProps)){var t={selected:void 0};return A.createElement(HF.Provider,{value:t},e.children)}return A.createElement(Dkt,{initialProps:e.initialProps,children:e.children})}function Dkt(e){var t=e.initialProps,n=e.children,r=function(a,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,a,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,a,a,o,l)},s={selected:t.selected,onDayClick:r};return A.createElement(HF.Provider,{value:s},n)}function M2e(){var e=f.useContext(HF);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Fkt(e,t){var n=ar(),r=M2e(),s=UF(),a=VF(),o=$F(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,m=o.blur,p=o.focus,h=o.focusMonthBefore,g=o.focusMonthAfter,y=o.focusYearBefore,v=o.focusYearAfter,x=o.focusStartOfWeek,b=o.focusEndOfWeek,_=function(D){var F,B,V,$;u5(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,e,t,D):Cx(n)?(B=s.onDayClick)===null||B===void 0||B.call(s,e,t,D):Sx(n)?(V=a.onDayClick)===null||V===void 0||V.call(a,e,t,D):($=n.onDayClick)===null||$===void 0||$.call(n,e,t,D)},w=function(D){var F;p(e),(F=n.onDayFocus)===null||F===void 0||F.call(n,e,t,D)},C=function(D){var F;m(),(F=n.onDayBlur)===null||F===void 0||F.call(n,e,t,D)},S=function(D){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,e,t,D)},E=function(D){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,e,t,D)},M=function(D){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,e,t,D)},k=function(D){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,e,t,D)},T=function(D){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,e,t,D)},j=function(D){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,e,t,D)},R=function(D){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,e,t,D)},O=function(D){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,e,t,D)},P=function(D){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,e,t,D)},N=function(D){var F;switch(D.key){case"ArrowLeft":D.preventDefault(),D.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":D.preventDefault(),D.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":D.preventDefault(),D.stopPropagation(),u();break;case"ArrowUp":D.preventDefault(),D.stopPropagation(),d();break;case"PageUp":D.preventDefault(),D.stopPropagation(),D.shiftKey?y():h();break;case"PageDown":D.preventDefault(),D.stopPropagation(),D.shiftKey?v():g();break;case"Home":D.preventDefault(),D.stopPropagation(),x();break;case"End":D.preventDefault(),D.stopPropagation(),b();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,e,t,D)},I={onClick:_,onFocus:w,onBlur:C,onKeyDown:N,onKeyUp:P,onMouseEnter:S,onMouseLeave:E,onPointerEnter:M,onPointerLeave:k,onTouchCancel:T,onTouchEnd:j,onTouchMove:R,onTouchStart:O};return I}function Ukt(){var e=ar(),t=M2e(),n=UF(),r=VF(),s=u5(e)?t.selected:Cx(e)?n.selected:Sx(e)?r.selected:void 0;return s}function Bkt(e){return Object.values(vi).includes(e)}function Vkt(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(Bkt(r)){var a=e.classNames["day_".concat(r)];a&&n.push(a)}}),n}function Wkt(e,t){var n=It({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=It(It({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function $kt(e,t,n){var r,s,a,o=ar(),l=$F(),c=Okt(e,t),u=Fkt(e,c),d=Ukt(),m=!!(o.onDayClick||o.mode!=="default");f.useEffect(function(){var S;c.outside||l.focusedDay&&m&&vs(l.focusedDay,e)&&((S=n.current)===null||S===void 0||S.focus())},[l.focusedDay,e,n,m,c.outside]);var p=Vkt(o,c).join(" "),h=Wkt(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:ukt,v=A.createElement(y,{date:e,displayMonth:t,activeModifiers:c}),x={style:h,className:p,children:v,role:"gridcell"},b=l.focusTarget&&vs(l.focusTarget,e)&&!c.outside,_=l.focusedDay&&vs(l.focusedDay,e),w=It(It(It({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||b?0:-1,r)),u),C={isButton:m,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:w,divProps:x};return C}function Hkt(e){var t=f.useRef(null),n=$kt(e.date,e.displayMonth,t);return n.isHidden?A.createElement("div",{role:"gridcell"}):n.isButton?A.createElement(RC,It({name:"day",ref:t},n.buttonProps)):A.createElement("div",It({},n.divProps))}function zkt(e){var t=e.number,n=e.dates,r=ar(),s=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!s)return A.createElement("span",{className:o.weeknumber,style:a.weeknumber},d);var m=c(Number(t),{locale:l}),p=function(h){s(t,n,h)};return A.createElement(RC,{name:"week-number","aria-label":m,className:o.weeknumber,style:a.weeknumber,onClick:p},d)}function Gkt(e){var t,n,r=ar(),s=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l?.Day)!==null&&t!==void 0?t:Hkt,u=(n=l?.WeekNumber)!==null&&n!==void 0?n:zkt,d;return o&&(d=A.createElement("td",{className:a.cell,style:s.cell},A.createElement(u,{number:e.weekNumber,dates:e.dates}))),A.createElement("tr",{className:a.row,style:s.row},d,e.dates.map(function(m){return A.createElement("td",{className:a.cell,style:s.cell,key:mDe(m),role:"presentation"},A.createElement(c,{displayMonth:e.displayMonth,date:m}))}))}function KJ(e,t,n){for(var r=n?.ISOWeek?Foe(t):O7(t,n),s=n?.ISOWeek?Jd(e):ll(e,n),a=Gi(r,s),o=[],l=0;l<=a;l++)o.push(ys(s,l));var c=o.reduce(function(u,d){var m=n?.ISOWeek?dDe(d):yDe(d,n),p=u.find(function(h){return h.weekNumber===m});return p?(p.dates.push(d),u):(u.push({weekNumber:m,dates:[d]}),u)},[]);return c}function qkt(e,t){var n=KJ(Ea(e),DS(e),t);if(t?.useFixedWeeks){var r=xDe(e,t);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],o=Vw(a,6-r),l=KJ(Vw(a,1),o,t);n.push.apply(n,l)}}return n}function Kkt(e){var t,n,r,s=ar(),a=s.locale,o=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,m=s.weekStartsOn,p=s.firstWeekContainsDate,h=s.ISOWeek,g=qkt(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:h,locale:a,weekStartsOn:m,firstWeekContainsDate:p}),y=(t=d?.Head)!==null&&t!==void 0?t:ckt,v=(n=d?.Row)!==null&&n!==void 0?n:Gkt,x=(r=d?.Footer)!==null&&r!==void 0?r:okt;return A.createElement("table",{className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"]},!c&&A.createElement(y,null),A.createElement("tbody",{className:o.tbody,style:l.tbody,role:"rowgroup"},g.map(function(b){return A.createElement(v,{displayMonth:e.displayMonth,key:b.weekNumber,dates:b.dates,weekNumber:b.weekNumber})})),A.createElement(x,{displayMonth:e.displayMonth}))}function Ykt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Qkt=Ykt()?f.useLayoutEffect:f.useEffect,G6=!1,Xkt=0;function YJ(){return"react-day-picker-".concat(++Xkt)}function Zkt(e){var t,n=e??(G6?YJ():null),r=f.useState(n),s=r[0],a=r[1];return Qkt(function(){s===null&&a(YJ())},[]),f.useEffect(function(){G6===!1&&(G6=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function Jkt(e){var t,n,r=ar(),s=r.dir,a=r.classNames,o=r.styles,l=r.components,c=Ex().displayMonths,u=Zkt(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=[a.month],m=o.month,p=e.displayIndex===0,h=e.displayIndex===c.length-1,g=!p&&!h;s==="rtl"&&(t=[p,h],h=t[0],p=t[1]),p&&(d.push(a.caption_start),m=It(It({},m),o.caption_start)),h&&(d.push(a.caption_end),m=It(It({},m),o.caption_end)),g&&(d.push(a.caption_between),m=It(It({},m),o.caption_between));var y=(n=l?.Caption)!==null&&n!==void 0?n:akt;return A.createElement("div",{key:e.displayIndex,className:d.join(" "),style:m},A.createElement(y,{id:u,displayMonth:e.displayMonth}),A.createElement(Kkt,{"aria-labelledby":u,displayMonth:e.displayMonth}))}function eTt(e){var t=e.initialProps,n=ar(),r=$F(),s=Ex(),a=f.useState(!1),o=a[0],l=a[1];f.useEffect(function(){n.initialFocus&&r.focusTarget&&(o||(r.focus(r.focusTarget),l(!0)))},[n.initialFocus,o,r.focus,r.focusTarget,r]);var c=[n.classNames.root,n.className];n.numberOfMonths>1&&c.push(n.classNames.multiple_months),n.showWeekNumber&&c.push(n.classNames.with_weeknumber);var u=It(It({},n.styles.root),n.style),d=Object.keys(t).filter(function(m){return m.startsWith("data-")}).reduce(function(m,p){var h;return It(It({},m),(h={},h[p]=t[p],h))},{});return A.createElement("div",It({className:c.join(" "),style:u,dir:n.dir,id:n.id},d),A.createElement("div",{className:n.classNames.months,style:n.styles.months},s.displayMonths.map(function(m,p){return A.createElement(Jkt,{key:p,displayIndex:p,displayMonth:m})})))}function tTt(e){var t=e.children,n=M4t(e,["children"]);return A.createElement(z4t,{initialProps:n},A.createElement(tkt,null,A.createElement(Lkt,{initialProps:n},A.createElement(dkt,{initialProps:n},A.createElement(pkt,{initialProps:n},A.createElement(wkt,null,A.createElement(Pkt,null,t)))))))}function nTt(e){return A.createElement(tTt,It({},e),A.createElement(eTt,{initialProps:e}))}const k2e=A.memo(({className:e,showOutsideDays:t=!0,...n})=>{const r=A.useMemo(()=>({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-between relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 p-0 rounded hover:bg-offsetPlus flex items-center justify-center bg-subtler [&_*]:fill-quiet",table:"w-full border-collapse",head_row:"flex",head_cell:"text-quiet rounded-md w-8 font-normal text-sm font-mono",row:"flex w-full mt-1",cell:U("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected].day-range-end)]:rounded-r-full",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-full [&:has([aria-selected])]:bg-superBG [&:has(>.day-range-start)]:rounded-l-full first:[&:has([aria-selected])]:rounded-l-full last:[&:has([aria-selected])]:rounded-r-full":"[&:has([aria-selected])]:rounded-md"),day:U("size-8 p-0 font-normal select-none aria-selected:opacity-100 flex items-center justify-center rounded-full hover:bg-subtler cursor-pointer"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:U(n.mode==="range"?"[&.day-range-start]:!bg-super [&.day-range-start]:!text-inverse [&.day-range-start]:hover:!bg-super [&.day-range-end]:!bg-super [&.day-range-end]:!text-inverse [&.day-range-end]:hover:!bg-super":"!bg-super !text-inverse hover:!bg-super"),day_today:"bg-superBG text-super hover:bg-superBG",day_outside:"day-outside text-quiet aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-quiet opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...U}),[n.mode]),s=f.useMemo(()=>({IconLeft:({className:a,...o})=>i.jsx(me,{icon:Wv,className:a,size:"sm",...o}),IconRight:({className:a,...o})=>i.jsx(me,{icon:_r,className:a,size:"sm",...o})}),[]);return i.jsx(nTt,{showOutsideDays:t,className:U("p-3 font-sans text-base",e),classNames:r,components:s,...n})});k2e.displayName="Calendar";var d5="Popover",[T2e,OWt]=Ra(d5,[_h]),Mx=_h(),[rTt,Wu]=T2e(d5),N2e=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!1}=e,l=Mx(t),c=f.useRef(null),[u,d]=f.useState(!1),[m,p]=_i({prop:r,defaultProp:s??!1,onChange:a,caller:d5});return i.jsx(GI,{...l,children:i.jsx(rTt,{scope:t,contentId:Um(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:o,children:n})})};N2e.displayName=d5;var A2e="PopoverAnchor",sTt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Wu(A2e,n),a=Mx(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(fS,{...a,...r,ref:t})});sTt.displayName=A2e;var j2e="PopoverTrigger",R2e=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Wu(j2e,n),a=Mx(n),o=In(t,s.triggerRef),l=i.jsx(nn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":D2e(s.open),...r,ref:o,onClick:Pt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(fS,{asChild:!0,...a,children:l})});R2e.displayName=j2e;var zF="PopoverPortal",[aTt,oTt]=T2e(zF,{forceMount:void 0}),I2e=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=Wu(zF,t);return i.jsx(aTt,{scope:t,forceMount:n,children:i.jsx(Os,{present:n||a.open,children:i.jsx(i1,{asChild:!0,container:s,children:r})})})};I2e.displayName=zF;var ih="PopoverContent",P2e=f.forwardRef((e,t)=>{const n=oTt(ih,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=Wu(ih,e.__scopePopover);return i.jsx(Os,{present:r||a.open,children:a.modal?i.jsx(lTt,{...s,ref:t}):i.jsx(cTt,{...s,ref:t})})});P2e.displayName=ih;var iTt=P0("PopoverContent.RemoveScroll"),lTt=f.forwardRef((e,t)=>{const n=Wu(ih,e.__scopePopover),r=f.useRef(null),s=In(t,r),a=f.useRef(!1);return f.useEffect(()=>{const o=r.current;if(o)return doe(o)},[]),i.jsx(v7,{as:iTt,allowPinchZoom:!0,children:i.jsx(O2e,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pt(e.onCloseAutoFocus,o=>{o.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Pt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Pt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),cTt=f.forwardRef((e,t)=>{const n=Wu(ih,e.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return i.jsx(O2e,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),O2e=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...m}=e,p=Wu(ih,n),h=Mx(n);return eoe(),i.jsx(g7,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(a1,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:i.jsx(qI,{"data-state":D2e(p.open),role:"dialog",id:p.contentId,...h,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),L2e="PopoverClose",uTt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Wu(L2e,n);return i.jsx(nn.button,{type:"button",...r,ref:t,onClick:Pt(e.onClick,()=>s.onOpenChange(!1))})});uTt.displayName=L2e;var dTt="PopoverArrow",fTt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Mx(n);return i.jsx(KI,{...s,...r,ref:t})});fTt.displayName=dTt;function D2e(e){return e?"open":"closed"}var mTt=N2e,pTt=R2e,hTt=I2e,gTt=P2e;const GF=A.memo(e=>{const{children:t,content:n,disableAnimation:r,isOpen:s,onClose:a,onOpen:o,contentClassName:l}=e;return i.jsxs(mTt,{open:s,onOpenChange:c=>{c?o?.():a?.()},children:[i.jsx(pTt,{asChild:!0,children:t}),i.jsx(hTt,{children:i.jsx(gTt,{asChild:!0,sideOffset:4,side:"bottom",align:"start",children:i.jsx(z,{variant:"background",className:U("p-xs relative rounded-lg border shadow-sm",{"data-close:zoom-out-95 data-close:fade-out data-close:animate-out":!r,"data-open:duration-150 data-open:ease-in-out data-open:animate-in data-open:fade-in data-open:zoom-in-95":!r},l),children:n})})})]})});GF.displayName="Popover";const yTt=e=>e.toLocaleDateString();function F2e({value:e,onChange:t,placeholder:n="Select date",formatDate:r=yTt,showIcon:s=!0,buttonClassName:a,variant:o="default",trailingIcon:l,fromDate:c}){const[u,d]=f.useState(!1),m=()=>{d(!u)},p=y=>{t(y),d(!1)},h=f.useMemo(()=>{const y=new Date;return y.setHours(0,0,0,0),y},[]),g=(()=>{switch(o){case"offsetPlus":return"bg-offsetPlus";case"default":return"bg-subtler";default:$t(o)}})();return i.jsx("div",{className:"relative size-full",children:i.jsx(GF,{isOpen:u,onOpen:()=>d(!0),onClose:()=>d(!1),placement:"bottom-start",content:i.jsx(k2e,{mode:"single",selected:e,onSelect:p,disabled:[{before:c??h}],fromDate:c??h}),children:i.jsxs("div",{role:"button",tabIndex:0,onClick:()=>m(),className:U(g,"flex cursor-pointer items-center justify-between rounded-lg px-4 font-sans","hover:border-subtler focus:border-subtler border border-transparent","transition-colors duration-200 ease-out","size-full","outline-none focus:outline-none focus:ring-0",a),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[s&&i.jsx(zC,{size:16,className:"text-foreground"}),i.jsx("span",{className:"text-foreground text-sm",children:e?r(e):n})]}),l]})})})}const QJ=({hour:e,minute:t})=>`${e%12||12}:${t.toString().padStart(2,"0")} ${e>=12?"PM":"AM"}`,XJ=e=>{const t=e.trim().match(/^((?:0?[1-9]|1[0-2])):([0-5]\d)\s*([ap]m)$/i);if(!t||t.length!==4)return null;const n=parseInt(t[1]??"",10),r=parseInt(t[2]??"",10);if(isNaN(n)||isNaN(r))return null;const s=t[3]?.toLowerCase();return s==="pm"&&n!==12?{hour:n+12,minute:r}:s==="am"&&n===12?{hour:0,minute:r}:{hour:n,minute:r}},vTt=Array.from({length:48},(e,t)=>({hour:Math.floor(t/2),minute:t%2*30}));function xTt({value:e,onChange:t,placeholder:n="Select time",variant:r="default"}){const[s,a]=f.useState(""),[o,l]=f.useState(!1),c=f.useRef(null),u=s.trim()!==""&&!XJ(s),d=e?QJ(e):n,m=f.useMemo(()=>vTt.map(x=>({key:`${x.hour}:${x.minute}`,label:QJ(x),value:x})),[]),p=()=>{const x=XJ(s);x&&t(x),a("")},h=x=>{t(x),a(""),l(!1)},g=()=>{l(!o)},y=()=>{l(!o),setTimeout(()=>{c.current&&c.current.focus()},0)},v=(()=>{switch(r){case"offsetPlus":return"bg-offsetPlus";case"default":return"bg-subtler";default:$t(r)}})();return i.jsx("div",{className:"relative size-full",children:i.jsx(GF,{contentClassName:"rounded-xl min-w-[var(--radix-popper-anchor-width)]",isOpen:o,onOpen:()=>l(!0),onClose:()=>l(!1),placement:"bottom-start",matchTargetWidth:!0,content:i.jsx("div",{className:"p-xs scrollbar-subtle max-h-64 overflow-y-auto",children:m.map(x=>i.jsx("div",{role:"button",tabIndex:0,onClick:()=>h(x.value),className:U("px-sm text-foreground cursor-pointer rounded-lg py-1.5","hover:bg-subtler"),children:i.jsx(L,{variant:"extraSmall",children:x.label})},x.key))}),children:i.jsxs("div",{role:"button",tabIndex:0,onClick:g,className:U(v,"text-foreground flex size-full cursor-pointer items-center rounded-lg px-4 font-sans","border transition-colors duration-200 ease-out","outline-none focus:outline-none focus:ring-0","hover:border-subtler focus-within:border-subtler border-transparent",{"!border-negative":u}),children:[i.jsx("input",{ref:c,type:"text",value:s||d,placeholder:n,onChange:x=>a(x.target.value),onBlur:p,onClick:y,className:"w-full bg-transparent text-sm focus:outline-none"}),i.jsx(me,{size:"xs",icon:Qn,className:"right-sm pointer-events-none absolute text-inherit opacity-50"})]})})})}const lh=f.memo(({children:e})=>i.jsx("div",{className:"min-w-0 flex-1 rounded-md",children:e}));lh.displayName="InputWrapper";const Ry=f.memo(({options:e,value:t,onChange:n,isMobileStyle:r,variant:s="default"})=>{const a=Q(),o=f.useMemo(()=>e.map(p=>({type:"default",text:p.label,onClick:()=>n(p.value),active:p.value===t,role:"menuitemradio"})),[n,e,t]),c=f.useMemo(()=>e.find(p=>p.value===t),[e,t])?.label||a.formatMessage({defaultMessage:"Select...",id:"724CrE1YuG"}),u=f.useMemo(()=>({className:"w-full"}),[]),d=f.useMemo(()=>({matchTargetWidth:!0,avoidPositionCollisions:!1}),[]),m=(()=>{switch(s){case"offsetPlus":return"";case"default":return"!bg-subtler";default:$t(s)}})();return i.jsx(lh,{children:i.jsx(Jt,{items:o,isMobileStyle:r,placement:"bottom",contentClassName:"w-full",boxProps:u,popoverProps:d,children:i.jsx(ge,{text:c,extraCSS:U("px-4 size-full !h-10 border-0 !outline-none !justify-start font-normal",m),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Qn})})})});Ry.displayName="FormSelect";const qF=f.memo(({schedule:e,onScheduleChange:t,variant:n="default"})=>{const{formatMessage:r}=Q(),{isMobileStyle:s}=ye(),a=f.useMemo(()=>new Date(e.year,e.month,e.day,e.hour,e.minute),[e.year,e.month,e.day,e.hour,e.minute]),{kind:o}=e,l=o==="ONCE",c=o==="WEEKLY",u=o==="MONTHLY"||o==="YEARLY",d=o==="YEARLY",m=f.useCallback(b=>{t({kind:b})},[t]),p=f.useCallback(b=>{t({dayOfWeek:parseInt(b,10)})},[t]),h=f.useCallback(b=>{t({month:parseInt(b,10)})},[t]),g=f.useCallback(b=>{t({day:parseInt(b,10)})},[t]),y=f.useCallback(b=>{b&&t({day:b.getDate(),month:b.getMonth(),year:b.getFullYear()})},[t]),v=f.useCallback(b=>{t({hour:b.hour,minute:b.minute})},[t]),x=f.useMemo(()=>({hour:e.hour,minute:e.minute}),[e.hour,e.minute]);return i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",className:"select-none",children:r({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}),i.jsxs("div",{className:"flex h-10 flex-wrap gap-3",children:[i.jsx(Ry,{options:w4t,value:e.kind,onChange:m,isMobileStyle:s,variant:n}),c&&i.jsx(Ry,{options:C4t,value:String(e.dayOfWeek),onChange:p,isMobileStyle:s,variant:n}),d&&i.jsx(Ry,{options:E4t,value:String(e.month),onChange:h,isMobileStyle:s,variant:n}),u&&i.jsx(Ry,{options:S4t,value:String(e.day),onChange:g,isMobileStyle:s,variant:n}),l&&i.jsx(lh,{children:i.jsx(F2e,{value:a,onChange:y,variant:n})}),i.jsx(lh,{children:i.jsx(xTt,{value:x,onChange:v,variant:n})})]})]})});qF.displayName="ScheduleSelect";const bTt=dt({selectModel:{defaultMessage:"Select model...",id:"XZsGHYyuKM"}}),_Tt=({selectedModel:e,onModelChange:t,variant:n="default"})=>{const r="task-modal-model-selector",s=e||ce.PRO,{$t:a}=Q(),{isMobileStyle:o}=ye(),{isSearchModelReasoningToggleEnabled:l}=iF(),{selectOptions:c}=W1e({reason:r,selectedSearchMode:oe.SEARCH,currentModel:s,onModelSelect:g=>{t?.(g)}}),{menuItems:u}=H1e({searchMode:oe.SEARCH,currentModel:s,onModelSelect:g=>{t?.(g)}}),d=f.useMemo(()=>c.map(g=>({type:"default",text:g.label,onClick:()=>t?.(g.value),active:g.value===s})),[c,s,t]),m=f.useMemo(()=>l?u:d,[l,u,d]),p=bo[s].name||bTt.selectModel,h=(()=>{switch(n){case"offsetPlus":return"bg-offsetPlus";case"default":return"!bg-subtler";default:$t(n)}})();return i.jsx(Jt,{items:m,isMobileStyle:o,placement:"bottom",contentClassName:"w-full",boxProps:{className:"w-full"},popoverProps:{matchTargetWidth:!0,avoidPositionCollisions:!1},children:i.jsx(ge,{text:a(p),extraCSS:U("px-4 size-full !h-10 border-0 !outline-none !justify-start font-normal",h),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Qn})})};function wTt(e,t){if(e.includes(t)){let n=e.filter(r=>r!==t);return t==="web"&&e.includes("crunchbase")&&(n=n.filter(r=>r!=="crunchbase")),n}else{const n=[...e];return t==="crunchbase"&&!n.includes("web")&&n.push("web"),n.push(t),n}}function CTt({sources:e,onChange:t,variant:n="default"}){const[r,s]=f.useState(!1),a=f.useCallback(o=>{const l=wTt(e,o);t(l)},[t,e]);return i.jsx(cF,{isOpen:r,onOpen:()=>s(!0),onClose:()=>s(!1),selectedSources:e,onSourcesChange:a,variant:"button",buttonVariant:n,hiddenSources:[$i.org,$i.google_drive,$i.onedrive,$i.sharepoint,$i.my_files]})}const f5=f.memo(({searchModel:e,onSearchModelChange:t,sources:n,onSourcesChange:r,variant:s="default"})=>{const a=Aa[e]??oe.SEARCH,{hasActiveSubscription:o}=yt();return i.jsx("div",{className:"flex w-full flex-col gap-2",children:i.jsxs("div",{className:"flex gap-3",children:[o&&i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",className:"select-none",children:i.jsx(pe,{defaultMessage:"Mode",id:"mrOnjMzgC4"})}),i.jsx("div",{className:"h-full w-fit",children:i.jsx(oF,{value:e,onChange:t,layoutKey:"task-modal",className:"h-full",variant:s,buttonSize:"regular"})})]}),o&&a===oe.SEARCH&&i.jsxs("div",{className:"flex min-w-[100px] flex-1 flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",className:"select-none",children:i.jsx(pe,{defaultMessage:"Model",id:"rhSI1/3g21"})}),i.jsx(lh,{children:i.jsx(_Tt,{selectedModel:e,onModelChange:t,variant:s})})]}),o&&i.jsxs("div",{className:"flex min-w-[100px] flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",className:"select-none",children:i.jsx(pe,{defaultMessage:"Sources",id:"fhwTpAcBLC"})}),i.jsx(lh,{children:i.jsx(CTt,{sources:n,onChange:r,variant:s})})]})]})})});f5.displayName="QuerySearchConfigurationSelector";const U2e=f.memo(({query:e,onQueryChange:t})=>{const{$t:n}=Q(),{hasActiveSubscription:r}=yt(),s=f.useCallback(l=>{t({...e,searchModel:l})},[t,e]),a=f.useCallback(l=>{t({...e,sources:l})},[t,e]);if(!r)return null;const o=n({defaultMessage:"Model options",id:"ObVxV7yacw"});return i.jsx(g2e,{title:o,children:i.jsx(f5,{searchModel:e.searchModel,onSearchModelChange:s,sources:e.sources??d1(),onSourcesChange:a,variant:"offsetPlus"})})});U2e.displayName="ScheduledAutomationAdvancedConfiguration";const B2e=f.memo(({trigger:e,query:t,onQueryChange:n})=>{switch(e.type){case ft.SCHEDULED:return i.jsx(U2e,{query:t,onQueryChange:n});case ft.PRICE_ALERT:case ft.SHORTCUT:return null;default:$t(e)}});B2e.displayName="AutomationAdvancedSettingsConfiguration";const V2e=f.memo(({expiryDate:e,onExpiryDateChange:t,schedule:n})=>{const{$t:r}=Q(),s=f.useCallback(l=>{l.stopPropagation(),t(null)},[t]),a=f.useMemo(()=>i.jsx(ge,{type:"button",onClick:s,icon:Lt,size:"tiny",variant:"common"}),[s]),o=f.useMemo(()=>{if(e===null)return;const l=n?H7(n):void 0;return l?ys(l,1):void 0},[e,n]);return i.jsx(F2e,{value:e===null?void 0:e,onChange:t,buttonClassName:"w-full py-sm bg-offsetPlus",trailingIcon:a,fromDate:o,placeholder:r({defaultMessage:"None selected",id:"7MYtB45RD0"})})});V2e.displayName="AutomationExpiryDatePicker";const W2e=f.memo(({defaultExpiryDate:e,expiryDate:t,onExpiryDateChange:n,schedule:r})=>{const s=f.useCallback(a=>{n?.(a)},[n]);return i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",className:"select-none",children:i.jsx(pe,{defaultMessage:"Expiration date",id:"CICBj0Td+l"})}),i.jsx(V2e,{expiryDate:t||e,onExpiryDateChange:s,schedule:r})]})});W2e.displayName="ExpiryDateSection";const $2e=f.memo(({trigger:e,onTriggerChange:t})=>{const n=f.useCallback(r=>{e.type===ft.SCHEDULED&&t({...e,type:ft.SCHEDULED,expiryDate:r})},[t,e]);switch(e.type){case ft.SCHEDULED:return e.schedule.kind!=="ONCE"?i.jsx(W2e,{defaultExpiryDate:e.defaultExpiryDate,expiryDate:e.expiryDate,onExpiryDateChange:n,schedule:e.schedule}):null;case ft.PRICE_ALERT:case ft.SHORTCUT:return null;default:$t(e)}});$2e.displayName="AutomationExpiryDateConfiguration";const STt=({options:e,selectedValues:t,onSelectionChange:n,placeholder:r="Select options...",disabled:s=!1})=>{const a=Q(),{isMobileStyle:o}=ye(),[l,c]=f.useState(!1),u=f.useCallback(v=>{const b=t.includes(v)?t.filter(_=>_!==v):[...t,v];n(b)},[t,n]),d=f.useMemo(()=>e.map(v=>{const x=t.includes(v.value);return{type:"multiSelect",text:v.label,onClick:()=>{u(v.value)},selected:x,iconVariant:"check",disableActiveStyles:!0}}),[e,t,u]),m=f.useMemo(()=>{if(t.length===0)return r;const v=t.map(x=>e.find(b=>b.value===x)?.label).filter(Boolean);return new Intl.ListFormat(a.locale,{style:"long",type:"conjunction"}).format(v)},[t,e,r,a.locale]),p=f.useCallback(()=>c(!0),[]),h=f.useCallback(()=>c(!1),[]),g=f.useMemo(()=>({className:"w-[180px]"}),[]),y=f.useMemo(()=>({matchTargetWidth:!1,avoidPositionCollisions:!1}),[]);return i.jsx(Jt,{isOpen:l,onOpen:p,onClose:h,items:d,isMobileStyle:o,placement:"bottom-end",contentClassName:"w-full",boxProps:g,popoverProps:y,disabled:s,alwaysShowChildren:!0,children:i.jsx(ge,{text:m,extraCSS:U("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal"),textClassName:"text-left text-foreground text-sm font-normal truncate",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Qn,disabled:s})})},H2e=(e,t)=>{const{value:n,loading:r}=At({flag:"app-notifications",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},z2e=f.memo(({notificationSettings:e,onNotificationSettingsChange:t,disabled:n})=>{const{$t:r}=wne(),{variation:s,loading:a}=H2e(!1),o=f.useMemo(()=>{const u=[];return s&&!a&&u.push({value:"in_app",label:r({defaultMessage:"In-app",id:"E7zWOQXV+k"})}),u.push({value:"email",label:r({defaultMessage:"Email",id:"sy+pv5U9ls"})},{value:"push",label:r({defaultMessage:"Mobile",id:"GWtmtuCmOx"})}),u},[r,s,a]),l=f.useMemo(()=>{const u=[];return s&&!a&&e.should_send_in_app&&u.push("in_app"),e.should_send_email&&u.push("email"),e.should_send_push&&u.push("push"),u},[e,s,a]),c=f.useCallback(u=>{t({should_send_email:u.includes("email"),should_send_push:u.includes("push"),should_send_in_app:u.includes("in_app")})},[t]);return i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",className:"select-none",children:i.jsx(pe,{defaultMessage:"Notification platform",id:"L9evilaxeT"})}),i.jsx(STt,{options:o,selectedValues:l,onSelectionChange:c,placeholder:r({defaultMessage:"Select platform",id:"Gl5w1+hLYC"}),disabled:n})]})});z2e.displayName="AutomationNotificationConfiguration";const xa=`
`;function G2e({baseInstructions:e,additionalInstructions:t}){let n=e+xa;return t&&(n+=t),n}function ZJ({prompt:e,baseInstructions:t}){if(!e||!t)return"";const n=e.replace(/\\n/g,xa),r=t.replace(/\\n/g,xa),s=r+xa;if(n.startsWith(s))return n.slice(s.length);if(n.startsWith(r)){const l=n.slice(r.length);if(l.startsWith(xa))return l.slice(xa.length);if(l.trim()==="")return""}return n.startsWith(r)?"":n}function ETt(e){const t=e.split(xa),n=t[0]||"",r=t.length>1?t.slice(1).join(xa):"";return{baseInstructions:n,additionalInstructions:r}}function MTt(e,t){let n=e;for(const[r,s]of Object.entries(t))n=n.replaceAll(r,s);return n}function JJ({rawInstructions:e,symbol:t,quoteName:n="",eventValue:r,direction:s}){return MTt(e,{"\\\\n":`
`,"{symbol}":t,"{quoteName}":n,"{{event_value}}":r,"{{direction}}":s})}function q2e({prompt:e,symbol:t,quoteName:n=""}){if(!t||!e)return"";let r=e;r.startsWith('"')&&r.endsWith('"')&&(r=r.slice(1,-1));const s="Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.",a="Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.";let o=r;if(o.startsWith(s+xa))o=o.slice((s+xa).length);else if(o.startsWith(a+xa))o=o.slice((a+xa).length);else if(o===s||o===a)return"";if(o.includes(xa)){const l=o.split(xa);o=l[l.length-1]}return o}function q9({selectedSymbol:e,symbol:t,quote:n,isLoading:r=!1,alertType:s,priceValue:a,percentValue:o,currencySymbol:l,$t:c}){const u=e??t,d=n?.name?` (${n.name})`:"",m=f.useMemo(()=>s==="price"?kTt({symbol:u,quoteName:d,priceValue:a,currencySymbol:l,$t:c}):TTt({symbol:u,quoteName:d,percentValue:o,$t:c}),[s,u,d,a,l,c,o]),p=f.useMemo(()=>!u||!n?"":s==="price"?m5({symbol:u,quoteName:d}):p5({symbol:u,quoteName:d}),[u,n,s,d]),h=!r&&n?.name;return f.useMemo(()=>({shouldShowDisplayInstructions:h,displayInstructions:m,baseInstructions:p,effectiveSymbol:u,quoteName:d}),[p,m,u,d,h])}function m5({symbol:e,quoteName:t,$t:n}){return n?n({id:"0J1c9pn78+",defaultMessage:"Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent '{{direction}}' to '{{event_value}}'. Contextualize this price movement within the last few weeks of price movement and investor narrative."},{symbol:e||"",quoteName:t||""}):`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function p5({symbol:e,quoteName:t,$t:n}){return n?n({id:"9XAm3nfaVB",defaultMessage:"Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent '{{event_value}}%' '{{direction}}'. Contextualize this price movement within the last few weeks of price movement and investor narrative."},{symbol:e||"",quoteName:t||""}):`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function kTt({symbol:e,quoteName:t,priceValue:n,currencySymbol:r,$t:s}){if(!e)return s({id:"39tYCstx5d",defaultMessage:"Explain the factors driving the latest movement of this asset, including its recent rise/fall. Contextualize this price movement within the last few weeks of price movement and investor narrative."});const a=n&&n!=="$"?s({defaultMessage:" to {currencySymbol}{priceValue}",id:"zSy/VeEpR9"},{priceValue:n,currencySymbol:r}):"",o=s({defaultMessage:"rise/fall",id:"+dqzTFX/gy"});return m5({symbol:e,quoteName:t,$t:s}).replace(" to {{event_value}}",a).replace("{{direction}}",o)}function TTt({symbol:e,quoteName:t,percentValue:n,$t:r}){if(!e)return r({id:"pP0ylRs8IX",defaultMessage:"Explain the factors driving the latest movement of this asset, including its recent increase/decrease. Contextualize this price movement within the last few weeks of price movement and investor narrative."});const s=r({id:"QBY86oKDNP",defaultMessage:"increase/decrease"});return p5({symbol:e,quoteName:t,$t:r}).replace(" {{event_value}}%",n?` ${parseFloat(n).toFixed(2)}%`:"").replace("{{direction}}",s)}const bf=1e9,_f=-1e9;function K9({symbol:e,alertType:t,priceValue:n,priceThreshold:r,percentValue:s,positiveSelected:a=!0,negativeSelected:o=!0,baseInstructions:l,additionalInstructions:c=""}){let u,d="";if(t==="price"){if(!n||!r)return null;const p=parseFloat(n.replace(/[^0-9.]/g,""));if(isNaN(p))return null;u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_TARGET",value_lower_bound:r==="below"?p:_f,value_upper_bound:r==="above"?p:bf},d=`Alert when ${e} is ${r} ${n}`}else if(t==="movement"){if(!s)return null;const p=parseFloat(s);if(isNaN(p))return null;a&&o?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-p,value_upper_bound:p},d=`Alert when ${e} moves +${s}% or -${s}% in a day`):a?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:_f,value_upper_bound:p},d=`Alert when ${e} moves +${s}% in a day`):o&&(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-p,value_upper_bound:bf},d=`Alert when ${e} moves -${s}% in a day.`)}if(!u)return null;const m=G2e({baseInstructions:l,additionalInstructions:c});return{task_name:d,prompt:m,event_subscription:u,model_preference:"turbo"}}const h5="5";function Y9(e){const t={selectedSymbol:e.symbol,additionalInstructions:"",selectedOption:"price",priceValue:"",percentValue:"",positiveSelected:!0,negativeSelected:!0};switch(e.alertType){case Is.TARGET_PRICE:return{...t,selectedOption:"price",priceValue:e.price===0?"":e.price.toString()};case Is.MOVEMENT_AMOUNT:{const n=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==bf/100,r=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==_f/100;let s="";return n?s=(e.percentageDecimalUpperBound*100).toFixed(2):r&&(s=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2)),s?{...t,selectedOption:"movement",percentValue:s,positiveSelected:n,negativeSelected:r}:{...t,selectedOption:"movement",percentValue:h5,positiveSelected:!0,negativeSelected:!0}}default:$t(e)}}function NTt(e){switch(e.selectedOption){case"price":{const t=parseFloat(e.priceValue.replace(/[^0-9.]/g,""));return{type:ft.PRICE_ALERT,alertType:Is.TARGET_PRICE,symbol:e.selectedSymbol??"",price:t||0,currency:"usd"}}case"movement":{const n=(parseFloat(e.percentValue)||0)/100;let r=0,s=0;return e.positiveSelected&&e.negativeSelected?(r=n,s=-n):e.positiveSelected?r=n:e.negativeSelected&&(s=-n),{type:ft.PRICE_ALERT,alertType:Is.MOVEMENT_AMOUNT,symbol:e.selectedSymbol??"",percentageDecimalUpperBound:r,percentageDecimalLowerBound:s}}default:$t(e.selectedOption)}}function ATt({trigger:e,onTriggerChange:t}){const[n,r]=f.useState(()=>Y9(e)),s=f.useMemo(()=>e.alertType===Is.TARGET_PRICE?`${e.symbol}-${e.alertType}-${e.price}`:`${e.symbol}-${e.alertType}-${e.percentageDecimalUpperBound}-${e.percentageDecimalLowerBound}`,[e]),a=f.useRef(s);f.useEffect(()=>{s!==a.current&&(r(Y9(e)),a.current=s)},[s,e]);const o=f.useCallback(y=>{const v=NTt(y);t(v)},[t]),l=f.useCallback(y=>{r(v=>{const x=y(v);return o(x),x})},[o]),c=f.useCallback(y=>{l(v=>({...v,selectedSymbol:y}))},[l]),u=f.useCallback((y,v="")=>{l(x=>{switch(y){case"price":return{...x,selectedOption:y,priceValue:v};case"movement":return{...x,selectedOption:y,percentValue:h5,positiveSelected:!0,negativeSelected:!0};default:$t(y)}})},[l]),d=f.useCallback(y=>{l(v=>({...v,priceValue:typeof y=="function"?y(v.priceValue):y}))},[l]),m=f.useCallback(y=>{l(v=>({...v,percentValue:typeof y=="function"?y(v.percentValue):y}))},[l]),p=f.useCallback(y=>{l(v=>({...v,positiveSelected:y}))},[l]),h=f.useCallback(y=>{l(v=>({...v,negativeSelected:y}))},[l]),g=f.useCallback(y=>{r(v=>({...v,additionalInstructions:y}))},[]);return f.useMemo(()=>({formState:n,onSymbolChange:c,onOptionChange:u,onPriceValueChange:d,onPercentValueChange:m,onPositiveChange:p,onNegativeChange:h,onAdditionalInstructionsChange:g}),[n,c,u,d,m,p,h,g])}const kx=({symbol:e,enabled:t=!!e,onInitialSuccess:n})=>{const r=f.useRef(!1),s=$e({enabled:t&&!!e,queryKey:ohe({symbol:e}),queryFn:()=>UE({symbol:e}),refetchInterval:5*1e3});return f.useEffect(()=>{s.isSuccess&&s.data&&!r.current&&n&&(r.current=!0,n(s.data))},[s.isSuccess,s.data,n]),s},jTt=async({query:e,locale:t,reason:n})=>{try{const{data:r,error:s}=await ne.GET("/rest/autosuggest/finance/tasks-autosuggest",n,{params:{query:{query:e}},headers:{"accept-language":t}});if(s)throw new Ee("API_CLIENTS_ERROR",{message:"Failed to get finance tasks suggestions",cause:s});return"results"in r?r.results:[]}catch(r){return ee.error(r),[]}},K2e="[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent",RTt=e=>/^(\d+(\.\d{0,2})?|\.\d{1,2})$/.test(e),ITt=e=>/^(\d+(\.\d{0,1})?|\.\d{0,1})$/.test(e),g5=(e,t)=>{try{return new Intl.NumberFormat(t,{style:"currency",currency:e.toUpperCase(),currencyDisplay:"symbol"}).format(0).replace(/[0-9.,\s]/g,"").trim()||"$"}catch{return"$"}},PTt=({currentPrice:e,value:t,onChange:n,variant:r="default",currency:s="USD"})=>{const{isMobileUserAgent:a}=ye(),{locale:o,$t:l}=Q(),c=f.useMemo(()=>g5(s,o),[s,o]),u=f.useMemo(()=>e?.toLocaleString(o,{style:"currency",currency:s.toUpperCase()}),[e,o,s]),d=f.useCallback(y=>{n(v=>{if(y===c)return y;const x=y.replace(c,"");return RTt(x)||y===""?c+x:v})},[n,c]),m=f.useCallback(()=>{t===""&&n(c)},[n,t,c]),p=f.useCallback(()=>{t===c&&n("")},[n,t,c]),h=(()=>{switch(r){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"offsetPlus":return"bg-offsetPlus [&_textarea]:bg-offsetPlus";default:$t(r)}})(),g=U(K2e,h);return i.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[i.jsx(L,{variant:"tiny",color:"light",children:u?l({id:"74LVOPcS2E",defaultMessage:"Target Price (currently {formattedPrice})"},{formattedPrice:u}):l({id:"xPMPP84OOV",defaultMessage:"Target Price"})}),i.jsx("div",{className:"gap-sm flex items-stretch",children:i.jsx(ra,{placeholder:c,className:U(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:a,value:t,onChange:d,onFocus:m,onBlur:p,disable1pass:!0,colorVariant:r})})]})},OTt=({value:e,onChange:t,positiveSelected:n,onPositiveChange:r,negativeSelected:s,onNegativeChange:a,variant:o="default"})=>{const{isMobileUserAgent:l}=ye(),{$t:c}=Q(),u=f.useCallback(()=>{a(!s)},[s,a]),d=f.useCallback(()=>{r(!n)},[r,n]),m=f.useCallback(y=>{t(v=>ITt(y)||y===""?y:v)},[t]),p=f.useMemo(()=>({delayDuration:100}),[]),h=(()=>{switch(o){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"offsetPlus":return"bg-offsetPlus [&_textarea]:bg-offsetPlus";default:$t(o)}})(),g=U(K2e,h);return i.jsx("div",{className:"gap-md flex flex-col",children:i.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[i.jsx(L,{variant:"tiny",color:"light",children:c({id:"agMnIX4PMS",defaultMessage:"Movement Amount (%)"})}),i.jsxs("div",{className:"gap-md flex h-full items-center",children:[i.jsxs("div",{className:"gap-sm flex h-full items-center",children:[i.jsx(ge,{variant:s?"primaryGhost":"border",size:"small",onClick:u,pill:!0,icon:KC,toolTip:c({id:"M9L9vXrgoN",defaultMessage:"Negative Movement"}),tooltipProps:p}),i.jsx(ge,{variant:n?"primaryGhost":"border",size:"small",onClick:d,pill:!0,icon:rr,toolTip:c({id:"iFYP+IX00i",defaultMessage:"Positive Movement"}),tooltipProps:p})]}),i.jsx(ra,{className:U(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:l,value:e,onChange:m,disable1pass:!0,colorVariant:o})]})]})})},KF=A.memo(e=>{const{selectedSymbol:t,selectedOption:n,onSymbolChange:r,onOptionChange:s,showSymbolInput:a=!0,currentPrice:o,priceValue:l,onPriceValueChange:c,percentValue:u,onPercentValueChange:d,positiveSelected:m,onPositiveChange:p,negativeSelected:h,onNegativeChange:g,externalInputValue:y,variant:v,colorVariant:x="default",currency:b,isAssetSelected:_=!0}=e,w=()=>{switch(v){case"full":return{additionalInstructions:e.additionalInstructions,onAdditionalInstructionsChange:e.onAdditionalInstructionsChange,displayPriceInstructions:e.displayPriceInstructions,displayMovementInstructions:e.displayMovementInstructions};case"trigger":return{additionalInstructions:"",onAdditionalInstructionsChange:()=>{},displayPriceInstructions:void 0,displayMovementInstructions:void 0};default:return $t(v)}},{additionalInstructions:C,onAdditionalInstructionsChange:S,displayPriceInstructions:E,displayMovementInstructions:M}=w(),{isMobileUserAgent:k}=ye(),{$t:T,locale:j}=Q(),[R,O]=f.useState(!1),[P,N]=f.useState(0),[I,D]=f.useState(""),[F,B]=f.useState([]),V=f.useRef(null),$=mt(),G=f.useRef(I);G.current=I,f.useEffect(()=>{D(y??"")},[y]),f.useEffect(()=>{if(b&&l){const be=g5(b.toUpperCase(),j);if(/^\d+(\.\d+)?$/.test(l)){c(be+l);return}const Ce=l.replace(/[^0-9.]/g,"");l.replace(/[0-9.]/g,"").trim()!==be&&Ce&&c(be+Ce)}},[b,j,l,c]);const X=f.useMemo(()=>[{label:T({id:"xPMPP84OOV",defaultMessage:"Target Price"}),value:"price"},{label:T({id:"24152tl1L3",defaultMessage:"Movement Amount"}),value:"movement"}].map(Se=>({label:Se.label,value:Se.value,children:i.jsx("div",{className:"w-full flex-1",children:i.jsx(aF,{label:Se.label,isActiveOption:n===Se.value})})})),[n,T]),Y=f.useCallback(async be=>{const Ce=(await $.fetchQuery({queryKey:["finance-tasks-autosuggest",be],queryFn:()=>jTt({query:be,reason:"finance-add-alert"}),staleTime:0})).map(ke=>({query:ke.title??"",title:ke.title??"",image:ke.image??"",imageDark:ke.image_dark??"",description:ke.description??"",identifier:ke.title??""}));B(Ce)},[$]),W=ta(Y,100,{leading:!0,trailing:!0}),H=f.useCallback(be=>{W(be)},[W]),Z=f.useCallback(()=>{O(!0),N(-1),H(G.current)},[H]),re=f.useCallback(()=>{O(!1)},[]),q=f.useCallback(be=>{const Se=be;D(Se),H(Se),Se.trim()===""&&(r(null),c(""),d(""))},[H,r,c,d]),J=f.useCallback(be=>{r(be.identifier??null),D(be.title??""),O(!1),V.current?.blur()},[r]),te=dxe({userInputQuery:I,suggestionsDisabled:!R||F.length===0,suggestions:F,focusedIndex:P,setFocusedIndex:N,onChange:be=>{D(be)},handleSuggestionSubmission:J,inputRef:V}),se=f.useCallback(be=>{s(be)},[s]),de=f.useCallback(be=>{S?.(be)},[S]),fe=U("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-offsetPlus p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":R&&F.length>0}),ve=f.useMemo(()=>({image:be,imageDark:Se,alt:Ce})=>i.jsx(Vde,{image:be,imageDark:Se,alt:Ce,watchlistType:"FINANCE",className:"bg-subtler mr-sm !size-8 rounded",imageClassName:"inset-xs"}),[]),ue=({onClear:be})=>i.jsx(Te,{icon:Lt,size:"tiny",pill:!0,onClick:be}),ie=f.useMemo(()=>({RightIconComponent:()=>null,LeftIconComponent:ve}),[ve]);return i.jsxs("div",{className:"flex flex-col gap-3",children:[a&&i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",children:i.jsx(pe,{defaultMessage:"Find a stock, token, or fund...",id:"DTOgClV6qi"})}),i.jsx(zh,{isOpen:R&&F.length>0,suggestedQueries:F,focusedIndex:P,setFocusedIndex:N,handlePasteQuery:Rn,handleSubmit:J,value:I,components:ie,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:i.jsx(ra,{autoFocus:!t,onFocus:Z,onBlur:re,onKeyDown:te,className:fe,pill:!1,ref:V,isMobileUserAgent:k,placeholder:T({defaultMessage:"Search for any asset",id:"BeYic/1TvC"}),value:I,onChange:q,ClearIcon:ue,colorVariant:x})})]}),i.jsxs("div",{className:U("flex flex-col gap-3 sm:flex-row",!_&&"pointer-events-none opacity-50"),children:[i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",children:i.jsx(pe,{defaultMessage:"Alert criteria",id:"h44KqVtM6/"})}),i.jsx(xe.div,{layout:!0,layoutRoot:!0,children:i.jsx(sF,{layoutKey:"task",options:X,value:n,onValueChange:se,className:"p-three inline-flex",variant:x})})]}),i.jsxs("div",{className:"gap-md flex flex-col",children:[n==="price"&&i.jsx(PTt,{currentPrice:o,value:l,onChange:c,variant:x,currency:b}),n==="movement"&&i.jsx(OTt,{value:u,onChange:d,positiveSelected:m,onPositiveChange:p,negativeSelected:h,onNegativeChange:g,variant:x})]})]}),v==="full"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[i.jsx("div",{className:"gap-xs flex w-full items-center",children:i.jsx(L,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:T({id:"qax5d8pQCh",defaultMessage:"Default Query"})})}),i.jsx("div",{className:"w-full [&>*]:w-full",children:i.jsx(L,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:n==="price"?E:M})})]}),i.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[i.jsx("div",{className:"gap-xs flex w-full items-center",children:i.jsx(L,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:T({id:"QFuOkrgHHJ",defaultMessage:"Additional Instructions (optional)"})})}),i.jsx("div",{className:"w-full [&>*]:w-full",children:i.jsx(cl,{value:C,onChange:de,isMobileUserAgent:k,isMobileStyle:!1,minRows:3,placeholder:T({id:"DtwY5RHKrT",defaultMessage:"Check news and social media sentiment to assess consensus or controversy"})})})]})]})]})});KF.displayName="FinanceAlertForm";const Y2e=f.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s="default",disabled:a})=>{const{isMobileUserAgent:o}=ye(),{$t:l,locale:c}=Q(),u=Y9(e),{selectedSymbol:d,priceValue:m,percentValue:p}=u,{data:h,isLoading:g}=kx({symbol:u.selectedSymbol}),y=e.alertType===Is.TARGET_PRICE?"price":"movement",v=h?.currency?g5(h?.currency,c):"$",{displayInstructions:x}=q9({selectedSymbol:d,quote:h,isLoading:g,alertType:y,priceValue:m,percentValue:p,currencySymbol:v,$t:l});return i.jsxs("div",{className:U("gap-md flex flex-col",a&&"pointer-events-none opacity-50"),children:[i.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[i.jsx("div",{className:"gap-xs flex w-full items-center",children:i.jsx(L,{variant:"tiny",color:"light",className:"flex shrink-0 items-center",children:i.jsx(pe,{defaultMessage:"Default query",id:"7SalR4PwjB"})})}),i.jsx("div",{className:"w-full [&>*]:w-full",children:i.jsx(L,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:x})})]}),i.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[i.jsx("div",{className:"gap-xs flex w-full items-center",children:i.jsx(L,{variant:"tiny",color:"light",className:"flex shrink-0 items-center",children:i.jsx(pe,{defaultMessage:"Additional Instructions (optional)",id:"QFuOkrgHHJ"})})}),i.jsx("div",{className:"w-full [&>*]:w-full",children:i.jsx(cl,{value:t,onChange:n,isMobileUserAgent:o,isMobileStyle:!1,minRows:3,maxLength:Iae,className:U("[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent","w-full"),placeholder:"Check news and social media sentiment to assess consensus or controversy",variant:s,disabled:a})})]}),r&&i.jsxs("div",{className:"gap-xs flex items-center",children:[i.jsx(Hv,{size:12,className:"text-caution"}),i.jsx(L,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:r})]})]})});Y2e.displayName="PriceAlertQueryPromptInput";const Q2e=f.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s,disabled:a})=>{const{data:o}=kx({symbol:e.symbol}),l=f.useMemo(()=>{if(!e.symbol)return"";const d=o?.name?` (${o.name})`:"";return e.alertType===Is.TARGET_PRICE?m5({symbol:e.symbol,quoteName:d}):p5({symbol:e.symbol,quoteName:d})},[e.symbol,e.alertType,o?.name]),c=f.useMemo(()=>{const d=o?.name?` (${o.name})`:"";return q2e({prompt:t,symbol:e.symbol,quoteName:d})},[t,e.symbol,o?.name]),u=d=>{const m=G2e({baseInstructions:l,additionalInstructions:d});n(m)};return i.jsx(Y2e,{trigger:e,prompt:c,onPromptChange:u,error:r,variant:s,disabled:a})});Q2e.displayName="PriceAlertPromptWrapper";const y5=f.memo(({trigger:e,prompt:t,onPromptChange:n,placeholder:r,error:s,variant:a="default",disabled:o})=>{const{isMobileUserAgent:l}=ye(),c=(()=>{switch(a){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"offsetPlus":return"bg-offsetPlus [&_textarea]:bg-offsetPlus";default:$t(a)}})();switch(e.type){case ft.SCHEDULED:case ft.SHORTCUT:return i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(L,{variant:"tiny",color:"light",className:"select-none",children:i.jsx(pe,{defaultMessage:"Instructions",id:"sV2v5LjRpX"})}),i.jsx(cl,{placeholder:r,value:t,onChange:n,isMobileUserAgent:l,isMobileStyle:!1,minRows:3,maxLength:Iae,allowEnterNewlines:!0,className:U("hover:!border-subtler focus-within:!border-subtler !border !border-transparent",c),variant:a,disabled:o}),s&&i.jsxs("div",{className:"gap-xs flex items-center",children:[i.jsx(Hv,{size:12,className:"text-caution"}),i.jsx(L,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:s})]})]});case ft.PRICE_ALERT:return i.jsx(Q2e,{trigger:e,prompt:t,onPromptChange:n,error:s,variant:a,disabled:o});default:$t(e)}});y5.displayName="QueryPromptInput";const X2e=f.memo(({trigger:e,query:t,onQueryChange:n})=>{const{$t:r}=Q(),s=f.useCallback(c=>{n({...t,prompt:c})},[n,t]),a=f.useCallback(c=>{n({...t,searchModel:c})},[n,t]),o=f.useCallback(c=>{n({...t,sources:c})},[n,t]),l=f.useMemo(()=>{switch(e.type){case ft.SCHEDULED:return null;case ft.PRICE_ALERT:return null;case ft.SHORTCUT:return i.jsx(f5,{searchModel:t.searchModel,onSearchModelChange:a,sources:t.sources??d1(),onSourcesChange:o,variant:"offsetPlus"});default:$t(e)}},[a,o,t.searchModel,t.sources,e]);return e.type===ft.PRICE_ALERT?null:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx(y5,{trigger:e,prompt:t.prompt,placeholder:r({defaultMessage:"Describe what you want to automate",id:"79ZUaZU8Ho"}),onPromptChange:s,variant:"offsetPlus"}),l]})});X2e.displayName="AutomationQueryConfiguration";const Z2e=f.memo(({trigger:e,onTriggerChange:t,isEditing:n,defaultTargetPriceValue:r})=>{const{formState:s,onSymbolChange:a,onOptionChange:o,onPriceValueChange:l,onPercentValueChange:c,onPositiveChange:u,onNegativeChange:d}=ATt({trigger:e,onTriggerChange:t}),m=f.useCallback(v=>r||(v.price?LTt(v.price):""),[r]),p=f.useCallback(v=>{switch(s.selectedOption){case"price":{if(v&&!s.priceValue){const x=m(v);x&&l(x)}break}case"movement":break;default:$t(s.selectedOption)}},[s.priceValue,s.selectedOption,m,l]),{data:h}=kx({symbol:s.selectedSymbol,onInitialSuccess:p}),g=f.useCallback(v=>{let x="";switch(v){case"price":{x=s.priceValue,h&&(x=m(h));break}case"movement":break;default:$t(v)}o(v,x)},[s.priceValue,m,o,h]),y=!!e.symbol&&e.symbol.trim()!=="";return i.jsx("div",{children:i.jsx(KF,{variant:"trigger",externalInputValue:s.selectedSymbol??void 0,selectedSymbol:s.selectedSymbol,selectedOption:s.selectedOption,onSymbolChange:a,onOptionChange:g,showSymbolInput:!n,currentPrice:h?.price,priceValue:s.priceValue,onPriceValueChange:l,percentValue:s.percentValue,onPercentValueChange:c,positiveSelected:s.positiveSelected,onPositiveChange:u,negativeSelected:s.negativeSelected,onNegativeChange:d,colorVariant:"offsetPlus",currency:h?.currency??void 0,isAssetSelected:y})})});Z2e.displayName="PriceAlertTriggerConfiguration";function LTt(e){return(e*(1+parseInt(h5,10)/100)).toFixed(2)}const Q9=f.memo(({trigger:e,onTriggerChange:t})=>{const n=f.useMemo(()=>e?.schedule??FS(),[e?.schedule]),r=f.useCallback(s=>{t({type:ft.SCHEDULED,...e,schedule:{...n,...s}})},[t,n,e]);return i.jsx(qF,{schedule:n,onScheduleChange:r,variant:"offsetPlus"})});Q9.displayName="ScheduledAutomationTriggerConfiguration";const J2e=f.memo(()=>i.jsx("div",{children:"Shortcut Trigger Configuration"}));J2e.displayName="ShortcutTriggerAutomationConfiguration";const eCe=f.memo(({trigger:e,onTriggerChange:t,isEditing:n=!1,defaultTargetPriceValue:r})=>{if(!e)return i.jsx(Q9,{trigger:null,onTriggerChange:t});switch(e.type){case ft.SCHEDULED:return i.jsx(Q9,{trigger:e,onTriggerChange:t});case ft.PRICE_ALERT:return i.jsx(Z2e,{trigger:e,onTriggerChange:t,isEditing:n,defaultTargetPriceValue:r});case ft.SHORTCUT:return i.jsx(J2e,{});default:$t(e)}});eCe.displayName="AutomationTriggerConfiguration";const DTt=(e,t)=>{const{value:n,loading:r}=At({flag:"tasks-notification-settings-enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},tCe=f.memo(({configuration:e,onConfigurationChange:t,errorMessage:n,onError:r})=>{const s=!!e.id,a=f.useCallback(m=>{let p=e.query;switch(m.type){case ft.PRICE_ALERT:{p={...e.query,prompt:e.query.prompt};break}case ft.SCHEDULED:case ft.SHORTCUT:break;default:$t(m)}const h={...e,trigger:m,query:p};r?.(null),t(h)},[e,t,r]),o=f.useCallback(m=>{const p={...e,query:m};t(p)},[e,t]),l=f.useCallback(m=>{const p={...e,notificationSettings:m};t(p)},[e,t]),{variation:c,loading:u}=DTt(!0),d=e.trigger.type===ft.PRICE_ALERT&&(!e.trigger.symbol||e.trigger.symbol.trim()==="");return i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx(X2e,{trigger:e.trigger,query:e.query,onQueryChange:o}),i.jsx(eCe,{trigger:e.trigger,onTriggerChange:a,isEditing:s,defaultTargetPriceValue:e.defaultTargetPriceValue}),i.jsx($2e,{trigger:e.trigger,onTriggerChange:a}),!u&&c&&i.jsx(z2e,{notificationSettings:e.notificationSettings??Mh,onNotificationSettingsChange:l,disabled:d}),e.trigger.type===ft.PRICE_ALERT&&i.jsx("div",{className:"flex flex-col gap-2",children:i.jsx(y5,{trigger:e.trigger,prompt:e.query.prompt,onPromptChange:m=>o({...e.query,prompt:m}),variant:"offsetPlus",disabled:d})}),i.jsx(B2e,{trigger:e.trigger,query:e.query,onQueryChange:o}),n&&i.jsxs("div",{className:"gap-xs flex items-center",children:[i.jsx(Hv,{size:12,className:"text-caution"}),i.jsx(L,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:n})]})]})});tCe.displayName="AutomationConfiguration";const FTt={settings_create:!0,settings_edit:!0,settings_suggest:!0,settings_primer:!0,task_widget:!0,discover_task_widget:!0,thread_dropdown:!0,typeahead_create:!0,notifications_panel:!0,router:!0};function X9(e){return e in FTt}const UTt={settings_create:!0,settings_edit:!0,settings_suggest:!0,finance_home_page:!0,finance_asset_page:!0};function eee(e){return e in UTt}const BTt={settings_create:!0,settings_edit:!0,typeahead_create:!0,thread_create:!0,suggestions_dropdown:!0,notifications_panel:!0,typeahead_edit:!0,shortcut_widget:!0,settings_paste:!0,try_assistant_suggestions:!0,thread_upsell_create:!0};function tee(e){return e in BTt}const VTt={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0,skipped:!0};function nCe(e){return e in VTt}const WTt={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0,skipped:!0};function $Tt(e){return e in WTt}const HTt={created:!0,updated:!0,deleted:!0,copied:!0,skipped:!0};function zTt(e){return e in HTt}function GTt(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,schedule:Ky(e.schedule),task_name:"",expiry_date:sie(e.expiryDate??e.defaultExpiryDate),notification_settings:n}}function qTt(e,t){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,task_name:e.shortcut,schedule:{rrule:"",start_at:"",tzid:""}}}function rCe({trigger:e,query:t,quote:n}){const{symbol:r}=e,s=n?.name?` (${n.name})`:void 0;switch(e.alertType){case Is.TARGET_PRICE:{const a=n?.price||0,o=m5({symbol:r,quoteName:s}),l=e.price>a?"above":"below",c=JJ({rawInstructions:o,symbol:r,quoteName:s||"",eventValue:`$${e.price}`,direction:l}),u=ZJ({prompt:t.prompt,baseInstructions:c});return K9({symbol:r,alertType:"price",priceValue:`$${e.price}`,priceThreshold:l,baseInstructions:c,additionalInstructions:u})}case Is.MOVEMENT_AMOUNT:{const a=p5({symbol:r,quoteName:s}),o=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==bf/100,l=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==_f/100;let c,u;o&&l?(c=(e.percentageDecimalUpperBound*100).toFixed(2),u="increase or decrease"):o?(c=(e.percentageDecimalUpperBound*100).toFixed(2),u="increase"):l?(c=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2),u="decrease"):(c="0.00",u="change");const d=JJ({rawInstructions:a,symbol:r,quoteName:s||"",eventValue:c,direction:u}),m=ZJ({prompt:t.prompt,baseInstructions:d});return K9({symbol:r,alertType:"movement",percentValue:c,positiveSelected:o,negativeSelected:l,baseInstructions:d,additionalInstructions:m})}default:$t(e)}}function KTt(e,t,n,r){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,schedule:Ky(e.schedule),expiry_date:sie(e.expiryDate??e.defaultExpiryDate),clear_expiry:e.expiryDate===null?!0:void 0,notification_settings:r}}function YTt(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,task_name:e.shortcut}}function QTt({trigger:e,query:t,status:n,quote:r}){const s=rCe({trigger:e,query:t,quote:r});return s?{task_name:s.task_name,prompt:s.prompt,event_subscription:s.event_subscription,model_preference:s.model_preference,status:n==="COMPLETED"?"PAUSED":n}:null}function sCe({onCreateSuccess:e,onCreateError:t,onUpdateSuccess:n,onUpdateError:r,onDeleteSuccess:s,onDeleteError:a}={}){const{$t:o}=Q(),l=mt(),c=bt({mutationFn:p=>got({payload:p,reason:"finance-add-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:B_()}),e?.()},onError:p=>t?.(p)}),u=bt({mutationFn:({taskId:p,payload:h})=>yot({taskId:p,payload:h,reason:"finance-edit-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:B_()}),n?.()},onError:p=>{if(p instanceof Error)switch(p.name){case"TimeoutError":r?.({detail:o({defaultMessage:"Network Timeout",id:"Z+mLGQc4GD"})});break;default:ee.error(`Unknown error occured: ${p.name}`),r?.({detail:o({defaultMessage:"Unknown error occurred",id:"y1q3uzCFY6"})})}else r?.(p)}}),d=bt({mutationFn:p=>Ope({taskId:p,reason:"finance-delete-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:B_()}),s?.()},onError:()=>a?.()}),m=c.isPending||u.isPending||d.isPending;return f.useMemo(()=>({createMutation:c,updateMutation:u,deleteMutation:d,isMutationLoading:m}),[c,u,d,m])}const XTt=()=>{const{formatMessage:e}=Q();return{getErrorMessage:n=>{switch(n?.detail?.error_code){case fK.TASK_LIMIT_EXCEEDED:return e({defaultMessage:"You have reached the maximum of number of active tasks of this type for your subscription level.",id:"3H43PMJpfD"});case fK.SHORTCUT_NAME_ALREADY_EXISTS:return e({defaultMessage:"A shortcut with this name already exists. Please choose a different name.",id:"GpnXJDWEkN"});default:return e({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"})}}}};function aCe({reason:e,source:t,onSuccess:n,onError:r}){const s=mt(),{trackEvent:a}=Me(),{getErrorMessage:o}=XTt(),l=f.useCallback((g,y)=>{s.invalidateQueries({queryKey:B_()}),y&&s.invalidateQueries({queryKey:aP(y)}),n?.(g)},[s,n]),c=f.useCallback((g,y)=>{X9(t)&&nCe(g)&&a("task modal action",{source:t,action:g}),l(g,y)},[t,a,l]),u=bt({mutationFn:g=>hot({payload:g,reason:e}),onSuccess:g=>c("created",g.task_id),onError:g=>r(o(g))}),d=bt({mutationFn:({id:g,payload:y})=>h8({taskId:g,payload:y,reason:e}),onSuccess:g=>c("updated",g.task.task_id),onError:g=>r(o(g))}),m=bt({mutationFn:({id:g,newStatus:y})=>h8({taskId:g,payload:{status:y},reason:e}),onSuccess:g=>{c(g.task.status==="PAUSED"?"paused":"resumed",g.task.task_id)},onError:g=>r(o(g))}),p=bt({mutationFn:g=>Ope({taskId:g,reason:e}),onSuccess:()=>c("deleted"),onError:g=>r(o(g))}),h=u.isPending||d.isPending||m.isPending||p.isPending;return{createMutation:u,updateMutation:d,toggleMutation:m,deleteMutation:p,isMutationLoading:h,invalidateAndClose:l}}function ZTt({initialConfiguration:e,isModalOpened:t,reason:n,source:r,onSuccess:s,onError:a}){const{$t:o}=Q(),{hasActiveSubscription:l}=yt(),[c,u]=f.useState(uie(e??z7(l))),d=f.useCallback(M=>{u(M)},[]),m=(()=>{switch(c.trigger.type){case ft.PRICE_ALERT:return c.trigger.symbol;case ft.SCHEDULED:case ft.SHORTCUT:return null;default:$t(c.trigger)}})(),{data:p,isLoading:h}=kx({symbol:m,enabled:!!m&&t}),g=aCe({reason:n,source:r,onSuccess:s,onError:a}),y=sCe({onCreateSuccess:()=>s("created"),onCreateError:M=>a(`Failed to create price alert - ${M.detail}`),onUpdateSuccess:()=>s("updated"),onUpdateError:M=>a(`Failed to update price alert - ${M.detail}`),onDeleteSuccess:()=>s("deleted"),onDeleteError:()=>a("Failed to delete price alert")}),v=h||g.isMutationLoading||y.isMutationLoading,x=f.useCallback(M=>{const k=M?{...c,...M}:c;if(k.id)switch(k.trigger.type){case ft.SCHEDULED:g.updateMutation.mutate({id:k.id,payload:KTt(k.trigger,k.query,k.status,k.notificationSettings)});break;case ft.PRICE_ALERT:{const T=QTt({trigger:k.trigger,query:k.query,status:k.status,quote:p});T?y.updateMutation.mutate({taskId:k.id,payload:T}):a(o({defaultMessage:"Failed to update price alert payload - Missing inputs",id:"293dgMfZdE"}));break}case ft.SHORTCUT:g.updateMutation.mutate({id:k.id,payload:YTt(k.trigger,k.query,k.status)});break;default:$t(k.trigger)}else switch(k.trigger.type){case ft.SCHEDULED:g.createMutation.mutate(GTt(k.trigger,k.query,k.notificationSettings??Mh));break;case ft.PRICE_ALERT:{const T=rCe({trigger:k.trigger,query:k.query,quote:p});T?y.createMutation.mutate(T):a(o({defaultMessage:"Failed to create price alert payload - Missing inputs",id:"Fimh9vZMY/"}));break}case ft.SHORTCUT:g.createMutation.mutate(qTt(k.trigger,k.query));break;default:$t(k.trigger)}},[c,g.updateMutation,g.createMutation,p,y.updateMutation,y.createMutation,a,o]),b=f.useCallback(()=>{x()},[x]),_=f.useCallback(M=>{if(!c.id)return;x({status:M?"ACTIVE":"PAUSED"})},[c.id,x]),w=f.useCallback(()=>{if(c.id)switch(c.trigger.type){case ft.SCHEDULED:g.deleteMutation.mutate(c.id);break;case ft.PRICE_ALERT:y.deleteMutation.mutate(c.id);break;case ft.SHORTCUT:g.deleteMutation.mutate(c.id);break;default:$t(c.trigger)}},[c.id,c.trigger,y.deleteMutation,g.deleteMutation]),C=JTt({isLoading:v,currentConfiguration:c}),S=f.useMemo(()=>{switch(c.trigger.type){case ft.SCHEDULED:case ft.SHORTCUT:return;case ft.PRICE_ALERT:return C?o({defaultMessage:"Select stock, token or fund to begin",id:"x/nyvvB4aQ"}):void 0;default:$t(c.trigger)}},[o,c.trigger,C]),E=c.status==="ACTIVE";return{currentConfiguration:c,setCurrentConfiguration:d,onClickSave:b,onClickToggle:_,onClickDelete:w,isEnabled:E,isLoading:v,isSaveDisabled:C,saveButtonTooltipText:S}}function JTt({isLoading:e,currentConfiguration:t}){if(e)return!0;switch(t.trigger.type){case ft.SCHEDULED:case ft.SHORTCUT:return!t.query.prompt;case ft.PRICE_ALERT:{const n=t.trigger;if(!n.symbol||n.symbol.trim()==="")return!0;switch(n.alertType){case Is.TARGET_PRICE:if(!n.price||n.price<=0)return!0;break;case Is.MOVEMENT_AMOUNT:{const r=n.percentageDecimalLowerBound!==_f/100&&n.percentageDecimalLowerBound!==0;if(!(n.percentageDecimalUpperBound!==bf/100&&n.percentageDecimalUpperBound!==0)&&!r)return!0;break}default:$t(n)}break}default:$t(t.trigger)}return!1}const e6t=(e,t)=>{if(!e?.id)return!1;const{status:n,...r}=e,{status:s,...a}=t;return ms(r,a)&&n!==s},v5=f.memo(({open:e,onClose:t,initialConfiguration:n,onSave:r,source:s,trackEvent:a,errorMessage:o})=>{const l=wne(),{$t:c}=l,u="automation-modal",[d,m]=f.useState(!1),[p,h]=f.useState(null),[g,y]=f.useState(!1),v=f.useCallback(()=>{h(null),t()},[t]),{currentConfiguration:x,setCurrentConfiguration:b,onClickSave:_,onClickDelete:w,isLoading:C,isSaveDisabled:S,saveButtonTooltipText:E}=ZTt({initialConfiguration:n,isModalOpened:e,reason:u,source:s,onSuccess:O=>{let P=O;O==="updated"&&e6t(n,x)&&(P=x.status==="PAUSED"?"paused":"resumed"),r?.(P),v(),m(P)},onError:h});f.useEffect(()=>{e&&(X9(s)?a?.("task modal opened",{source:s}):eee(s)?a?.("price alert modal opened",{source:s}):tee(s)&&a?.("shortcut modal opened",{source:s}))},[e,s,a]);const M=f.useMemo(()=>{const O=[];return x.id&&O.push({text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),variant:"rejecter",onClick:w,disabled:C}),O.push({text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:v}),O.push({text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:_,disabled:S,tooltipText:E}),O},[c,x.id,C,S,w,_,v,E]),k=f.useCallback(O=>{const P=O?"ACTIVE":"PAUSED",N=P==="PAUSED"?"paused":"resumed";switch(b({...x,status:P}),x.trigger.type){case ft.SCHEDULED:X9(s)&&nCe(N)&&a?.("task modal action",{source:s,action:N});break;case ft.PRICE_ALERT:eee(s)&&$Tt(N)&&a?.("price alert modal action",{source:s,action:N});break;case ft.SHORTCUT:tee(s)&&zTt(N)&&a?.("shortcut modal action",{source:s,action:N});break;default:$t(x.trigger)}},[x,b,s,a]),T=f.useMemo(()=>{if(!x.id||x.trigger.type===ft.PRICE_ALERT)return null;const O=x.status!=="PAUSED";return i.jsx(Ao,{active:O,text:O?"Active":"Paused",onChange:k,disabled:C,testId:"automation-status-switch"})},[x.id,x.status,x.trigger.type,k,C]),j=f.useCallback(O=>{const P=uie(O);b(P)},[b]),R=f.useCallback(()=>{m(!1)},[]);return f.useEffect(()=>{n&&!g&&e&&(j(n),y(!0))},[j,g,n,e]),f.useEffect(()=>{e||y(!1)},[e]),i.jsxs(i.Fragment,{children:[i.jsx(Xt,{isOpen:e,onClose:v,title:FFe({intl:l,triggerType:x.trigger.type}),titleTextVariant:"base",footerContent:T,actionList:M,footerClassname:"!pt-4",wrapperClassname:"!w-full",children:i.jsx(tCe,{configuration:x,onConfigurationChange:j,errorMessage:(o||p)??void 0,onError:h})}),i.jsx(_u,{message:d?UFe({intl:l,triggerType:x.trigger.type,actionPerformed:d}):"",variant:"success",isVisible:!!d,handleClose:R})]})});v5.displayName="AutomationModal";const t6t=Object.freeze(Object.defineProperty({__proto__:null,AutomationModal:v5},Symbol.toStringTag,{value:"Module"})),oCe=(e,t)=>{const{value:n,loading:r}=At({flag:"tasks-price-alerts-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},x5=(e,t)=>{const{value:n,loading:r}=At({flag:"tasks-settings-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},n6t=(e,t)=>{const n={selectedOption:"price",priceValue:"",percentValue:h5,positiveSelected:!0,negativeSelected:!0,additionalInstructions:"",selectedSymbol:t??null,inputValue:t??""};if(!e)return n;const{subscription:r,prompt:s}=e,a=r?q2e({prompt:s,symbol:r.event_entity}):ETt(s).additionalInstructions,o={...n,additionalInstructions:a};if(!r)return o;const{event_type:l,value_lower_bound:c,value_upper_bound:u,event_entity:d}=r;if(o.selectedSymbol=d??null,o.inputValue=d??"",l==="STOCK_PRICE_TARGET")o.selectedOption="price",u&&u!==bf?o.priceValue=`$${u}`:c&&c!==_f&&(o.priceValue=`$${c}`);else if(l==="STOCK_PRICE_MOVEMENT"){o.selectedOption="movement";const m=u!=null&&u!==bf,p=c!=null&&c!==_f;o.positiveSelected=m,o.negativeSelected=p,m?o.percentValue=`${u}`:p&&(o.percentValue=`${Math.abs(c)}`)}return o},iCe=A.memo(({symbol:e,buttonProps:t,watchlistAddedForSymbol:n,modalOpenedSource:r})=>{const{trackEvent:s}=Me(),a=f.useMemo(()=>{try{return decodeURIComponent(e.toUpperCase())}catch{return e.toUpperCase()}},[e]),{data:o,isLoading:l}=$e({queryKey:["getFinanceTicker",a],queryFn:()=>vot({ticker:a,reason:"finance-ticker-supported-check"}),staleTime:1/0}),[c,u]=f.useState(!1),{isMobileStyle:d}=ye(),{$t:m}=Q(),p=!!o?.supported,h=!!(o?.supported&&n),g=n?`finance-alert-watchlist-${a}`:"finance-alert-page-visit",y=(p||h)&&!c,{variation:v,loading:x}=x5(!1),{variation:b,loading:_}=oCe(!1),w=f.useCallback(()=>u(!1),[]),C=f.useCallback(()=>{s("price alert modal opened",{source:r}),u(!0)},[r,s]);return l||!o?.supported||x||_?null:i.jsxs(i.Fragment,{children:[i.jsx(L3,{cueKey:g,title:m({defaultMessage:"Set an alert for {ticker}",id:"bb+ueMBxHa"},{ticker:a}),enabled:y,placement:"bottom",variant:"primary",size:"sm",children:i.jsx(ge,{text:d?void 0:m({id:"hrmMcFoV7/",defaultMessage:"Price Alert"}),size:"small",variant:"border",icon:ane,onClick:C,...t})},g),v&&b?i.jsx(v5,{open:c,onClose:w,source:"settings_create",initialConfiguration:cie({symbol:e})}):i.jsx(b5,{isOpen:c,onClose:w,symbol:a})]})});iCe.displayName="FinanceAddAlertIfSupported";const b5=A.memo(({isOpen:e,onClose:t,symbol:n,task:r})=>{const s=_t(),{openToast:a}=xn(),o=!!r,[l,c]=f.useState(null),[u,d]=f.useState("price"),{isMobileStyle:m}=ye(),[p,h]=f.useState(""),{$t:g}=Q(),[y,v]=f.useState(n??null),[x,b]=f.useState(!1),{data:_}=$e({queryKey:ohe({symbol:y}),queryFn:()=>UE({symbol:y}),enabled:!!y&&e,refetchInterval:5*1e3}),[w,C]=f.useState(""),[S,E]=f.useState(""),[M,k]=f.useState(!0),[T,j]=f.useState(!0),R=f.useMemo(()=>{if(u!=="price"||!_?.price)return;const te=parseFloat(w.replace(/[^0-9.]/g,""));if(!(isNaN(te)||te===_.price))return te>_.price?"above":"below"},[w,_?.price,u]),O=f.useCallback(()=>{b(!1),v(n??null)},[n]),{createMutation:P,updateMutation:N,deleteMutation:I}=sCe({onCreateSuccess:()=>{t(),b(!1),O(),a(g({defaultMessage:"Price alert created",id:"YccmIRCItP"}),"success",3,void 0,g({defaultMessage:"Manage Alerts",id:"t6akfMv9BC"}),()=>{s.push("/account/tasks?tab=alerts")})},onCreateError:()=>{a(g({defaultMessage:"Failed to create price alert",id:"vkLT4iLR3O"}),"error",3,g({defaultMessage:"Please try again",id:"fHqssj/1KO"})),b(!1)},onUpdateSuccess:()=>{t(),b(!1),O(),a(g({defaultMessage:"Price alert updated",id:"wTPvmuiyuE"}),"success",3,void 0,g({defaultMessage:"Manage Alerts",id:"t6akfMv9BC"}),()=>{s.push("/account/tasks?tab=alerts")})},onUpdateError:()=>{a(g({defaultMessage:"Failed to update price alert",id:"Fpz5cXYABV"}),"error",3,g({defaultMessage:"Please try again",id:"fHqssj/1KO"})),b(!1)},onDeleteSuccess:()=>{t()}}),D=f.useCallback(()=>{t(),O()},[t,O]),F=f.useCallback(()=>{r&&I.mutate(r.id)},[r,I]),B=q9({selectedSymbol:y,symbol:n,quote:_,alertType:"price",priceValue:w,$t:g}),V=q9({selectedSymbol:y,symbol:n,quote:_,alertType:"movement",percentValue:S,$t:g}),$=B.baseInstructions,G=B.displayInstructions,X=V.baseInstructions,Y=V.displayInstructions;f.useEffect(()=>{if(e){const te=n6t(r,n);c(te),d(te.selectedOption),C(te.priceValue),E(te.percentValue),k(te.positiveSelected),j(te.negativeSelected),h(te.additionalInstructions),v(te.selectedSymbol)}else c(null),O()},[e,r,n,O]);const{locale:W}=Q();f.useEffect(()=>{if(o&&_?.currency&&w&&w.startsWith("$")){const te=g5(_.currency,W);te!=="$"&&C(w.replace("$",te))}},[o,_?.currency,W,w]);const H=f.useCallback(()=>{b(!0);const te=y??n;if(!te){b(!1);return}const de=K9({symbol:te,alertType:u,priceValue:w,priceThreshold:R,percentValue:S,positiveSelected:M,negativeSelected:T,baseInstructions:u==="price"?$:X,additionalInstructions:p});if(!de){b(!1);return}o&&r?N.mutate({taskId:r.id,payload:de}):P.mutate(de)},[o,r,y,n,u,w,R,S,M,T,p,$,X,P,N]),Z=f.useMemo(()=>{if(!o||!l)return!0;const te={selectedOption:u,priceValue:w,percentValue:S,positiveSelected:M,negativeSelected:T,additionalInstructions:p,selectedSymbol:y},{inputValue:se,...de}=l;return!ms(te,de)},[o,l,u,w,S,M,T,p,y]),re=f.useMemo(()=>{const te=w.replace(/[^0-9.]/g,""),se=S.replace("%","");return u==="price"?!y||!te||!R:!y||!se},[y,u,w,S,R]),q=f.useMemo(()=>re||!Z,[re,Z]),J=f.useMemo(()=>[{text:g({id:"47FYwba+bI",defaultMessage:"Cancel"}),onClick:D,variant:"border"},{text:g(o?{id:"KjhtiKJItq",defaultMessage:"Edit Alert"}:{id:"KHrQobwBBl",defaultMessage:"Add Alert"}),onClick:H,variant:"primary",disabled:o?q:re,isLoading:x}],[H,g,re,x,D,o,q]);return i.jsxs(Xt,{isOpen:e,onClose:t,title:g({id:"hrmMcFoV7/",defaultMessage:"Price Alert"}),variant:m?"bottom-sheet":"default",children:[i.jsx("div",{className:"gap-md flex min-h-[60vh] flex-col md:min-h-0",children:i.jsx(KF,{variant:"full",selectedSymbol:y,selectedOption:u,onSymbolChange:v,onOptionChange:d,showSymbolInput:!o,currentPrice:_?.price,priceValue:w,onPriceValueChange:C,percentValue:S,onPercentValueChange:E,positiveSelected:M,onPositiveChange:k,negativeSelected:T,onNegativeChange:j,additionalInstructions:p,onAdditionalInstructionsChange:h,displayPriceInstructions:G,displayMovementInstructions:Y,externalInputValue:l?.inputValue,currency:_?.currency??void 0})}),i.jsxs("div",{className:"mt-md flex w-full items-center justify-between",children:[i.jsx("div",{children:o&&i.jsx(ge,{text:g({id:"K3r6DQW7h+",defaultMessage:"Delete"}),variant:"border",onClick:F,isLoading:I.isPending})}),i.jsx("div",{className:"gap-sm md:-mb-md flex items-center",children:J.map(te=>i.jsx(ge,{text:te.text,onClick:te.onClick,variant:te.variant,disabled:te.disabled,isLoading:te.isLoading},te.text))})]})]})});b5.displayName="FinanceAlertModal";const r6t=Object.freeze(Object.defineProperty({__proto__:null,FinanceAddAlertIfSupported:iCe,FinanceAlertModal:b5},Symbol.toStringTag,{value:"Module"})),Ff=(e,t)=>{const{value:n,loading:r}=At({flag:"tasks-automations-rename",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},lCe=A.memo(({isOpened:e,onOpen:t,onClose:n,onEdit:r})=>{const s=Q(),a=_t(),{isMobileStyle:o}=ye(),{variation:l,loading:c}=Ff(!1),u=f.useMemo(()=>[{type:"default",text:s.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),onClick:r,testId:"task-widget-edit"},{type:"default",text:l?s.formatMessage({defaultMessage:"View Automations",id:"ykWUMgOBHX"}):s.formatMessage({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),rightElement:i.jsx("div",{className:"flex items-center",children:i.jsx(_r,{size:16})}),onClick:()=>{a.push("/account/tasks")},testId:"task-widget-view-tasks"}],[s,r,l,a]);return c?null:i.jsx(Jt,{placement:"bottom-start",items:u,onOpen:t,onClose:n,isMobileStyle:o,children:i.jsx(Te,{size:"tiny",icon:Ute,extraCSS:U("",{"!text-foreground !bg-offsetPlus":e})})})});lCe.displayName="TaskWidgetMenu";const s6t=e=>({id:e.id,title:e.title,prompt:e.prompt,schedule:Kw(e.scheduleInfo),searchModel:e.searchModel,sources:e.sources||["web"]}),nee=(e={})=>e.prefill?e.prefill:e.initial?s6t(e.initial):{...AFe(),searchModel:ce.PRO},Iy=({text:e,onClick:t,variant:n="secondary",disabled:r=!1})=>i.jsx(ge,{text:e,onClick:t,disabled:r,testId:`task-modal-${e.toLowerCase()}-button`,variant:n==="secondary"?"common":"inverted",extraCSS:U("min-w-[100px]")}),a6t=(e,t)=>e.schedule.kind==="ONCE"&&new Date(e.schedule.year,e.schedule.month,e.schedule.day,e.schedule.hour,e.schedule.minute)<=new Date(Date.now())?{ok:!1,message:t({defaultMessage:"Please schedule this task for a future time.",id:"loBg9tvLRE"})}:{ok:!0};function YF({open:e,onClose:t,onSuccess:n,initial:r,prefill:s,errorMessage:a,source:o}){const l="task-modal",{formatMessage:c}=Q(),{trackEvent:u}=Me(),{configuredModel:d}=Hn();f.useEffect(()=>{e&&u("task modal opened",{source:o})},[e,o,u]);const[m,p]=f.useState(a),{createMutation:h,updateMutation:g,deleteMutation:y,isMutationLoading:v,invalidateAndClose:x}=aCe({reason:l,source:o,onSuccess:f.useCallback(N=>{n?.(N),t?.()},[n,t]),onError:p}),b=f.useRef(r?rB(r):void 0);f.useEffect(()=>{e&&(b.current=r?rB(r):void 0)},[e,r]);const[_,w]=f.useState(()=>nee({initial:r,prefill:s})),C=f.useMemo(()=>Aa[_.searchModel]??oe.SEARCH,[_.searchModel]);f.useEffect(()=>{p(e?a:void 0)},[e,a]),f.useEffect(()=>{e&&w(nee({initial:r,prefill:s}))},[e,r,s,d]),f.useEffect(()=>{const N=Kl(C);w(I=>({...I,searchModel:N}))},[C]);const S=!!b.current,E=b.current?.status==="PAUSED",M=b.current?.status==="COMPLETED",k=N=>w(I=>({...I,...N})),T=N=>w(I=>({...I,schedule:{...I.schedule,...N}})),j=()=>{p(void 0);const N=a6t(_,c);if(!N.ok){p(N.message);return}S?g.mutate({id:b.current.id,payload:{task_name:_.title,prompt:_.prompt,schedule:Ky(_.schedule),status:"ACTIVE",model_preference:_.searchModel,sources:_.sources}},{onSuccess:()=>{u("task modal action",{source:o,action:"updated"}),x("updated",b.current.id)}}):h.mutate({task_id:_.id,task_name:_.title,prompt:_.prompt,schedule:Ky(_.schedule),model_preference:_.searchModel,sources:_.sources},{onSuccess:()=>{u("task modal action",{source:o,action:"created"})}})},R=f.useMemo(()=>{if(!S)return!0;const N=_.prompt!==b.current?.prompt,I=b.current.scheduleInfo,D=Ky(_.schedule),F=!ms(D.rrule,I.rrule)||!ms(D.tzid,I.tzid),B=_.schedule.kind==="ONCE"&&D.start_at!==I.start_at,V=_.searchModel!==b.current?.searchModel,$=!ms(_.sources||["web"],b.current?.sources||["web"]);return N||(F||B||V)||$},[S,_,b]),{variation:O,loading:P}=Ff(!1);return P?null:i.jsx(Xt,{isOpen:e,onClose:t,title:c(O?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),titleTextVariant:"base",modalContentClassname:"!pb-4 md:!pb-4",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx(y5,{trigger:{type:ft.SCHEDULED,schedule:_.schedule},prompt:_.prompt,onPromptChange:N=>k({prompt:N}),error:m}),i.jsx(qF,{schedule:_.schedule,onScheduleChange:T}),i.jsx(f5,{searchModel:_.searchModel,onSearchModelChange:N=>k({searchModel:N}),sources:_.sources||["web"],onSourcesChange:N=>k({sources:N})}),i.jsxs(z,{variant:"background",className:"mt-md pt-md -mx-md px-md flex items-center justify-between border-t",children:[S&&i.jsxs("div",{className:"flex gap-4",children:[!M&&i.jsx(Iy,{text:c(E?{defaultMessage:"Resume",id:"3y9DGgura7"}:{defaultMessage:"Pause",id:"tFFMkFDBMO"}),onClick:()=>g.mutate({id:b.current.id,payload:{status:E?"ACTIVE":"PAUSED"}},{onSuccess:()=>{const N=E?"resumed":"paused";u("task modal action",{source:o,action:N}),x(N,b.current.id)}}),disabled:v}),i.jsx(Iy,{text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>y.mutate(b.current.id),disabled:v})]}),i.jsxs("div",{className:"ml-auto flex gap-4",children:[i.jsx(Iy,{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:()=>t?.()}),i.jsx(Iy,{text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",disabled:v||!_.prompt||!R,onClick:j})]})]})]})})}const o6t=Object.freeze(Object.defineProperty({__proto__:null,FormButton:Iy,default:YF},Symbol.toStringTag,{value:"Module"}));var ree={};const i6t=()=>i.jsxs(wn,{className:"flex w-full items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"bg-offsetPlus size-4 shrink-0 rounded"}),i.jsx("div",{className:"bg-offsetPlus h-4 w-32 rounded"})]}),i.jsx("div",{className:"bg-offsetPlus h-4 w-20 rounded"})]}),cCe=A.memo(({data:e})=>{const{$t:t}=Q(),{suggested_prompt:n,suggested_schedule:r,widget_uuid:s}=e,a=f.useMemo(()=>({id:s,title:"",prompt:n,schedule:r?Kw(r):FS(),searchModel:ce.PRO}),[n,r,s]),o=wr(),l=f.useCallback(()=>{if(!ree.NEXT_PUBLIC_IS_SIDECAR_BUILD)throw new Error("handleOpenTaskFromSidecar can only be called in sidecar mode");o.openTab({url:`${window.location.origin}${Zt.Tasks.href}`})},[o]),[c,u]=f.useState(!1),[d,m]=f.useState(!1),[p,h]=f.useState(!1),[g,y]=f.useState(null),[v,x]=f.useState(!1);f.useEffect(()=>{if(!g)return;const V=setTimeout(()=>{y(null)},2e3);return()=>clearTimeout(V)},[g]);const b=Q(),{data:_,isLoading:w}=$e({queryKey:aP(s),queryFn:()=>LE({taskId:s,reason:"task-widget"})}),C=f.useCallback(()=>{_?.type==="ALERT"&&_?.subscription?h(!0):m(!0)},[_]),S=f.useMemo(()=>{if(!_)return null;if(_.type==="ALERT"&&_.subscription)return DOe({..._.subscription,event_type:_.subscription.event_type},b);const V=Kw(_.scheduleInfo);return{kind:jFe(V.kind,b),friendly:TFe(V,b),isRecurring:V.kind!=="ONCE"}},[_,b]),E=f.useMemo(()=>{if(!_)return"";if(_.type==="ALERT"&&_.subscription){const{subscription:V}=_,$=V.event_entity||"",G=V.event_type==="STOCK_PRICE_TARGET",X=V.event_type==="STOCK_PRICE_MOVEMENT";if(G){const Y=V.value_upper_bound||V.value_lower_bound;if(Y)return`${$} reaches $${Y}`}else if(X){const Y=V.value_upper_bound||0,W=V.value_lower_bound||0,H=Y>0,Z=W<0;if(H&&Z)return`${$} moves ${Y}%`;if(H)return`${$} rises ${Y}%`;if(Z)return`${$} falls ${Math.abs(W)}%`}return`Price alert for ${$}`}return _.prompt},[_]),M=f.useMemo(()=>{if(!g)return null;const V=g==="created"?i.jsx(pe,{defaultMessage:"Task created",id:"991WgJt61N"}):g==="updated"?i.jsx(pe,{defaultMessage:"Task updated",id:"sQGGdcVjgL"}):g==="deleted"?i.jsx(pe,{defaultMessage:"Task deleted",id:"kGP3l1jr/4"}):g==="paused"?i.jsx(pe,{defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}):i.jsx(pe,{defaultMessage:"Task resumed",id:"fqAqWnF85q"});return i.jsx(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:hn},children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(wke,{className:"text-super",size:16}),i.jsx(L,{variant:"small",color:"super",className:"truncate",children:V})]})},"confirmed")},[g]),{variation:k,loading:T}=Ff(!1),j=f.useCallback(()=>{x(!1)},[]),R=f.useCallback(()=>x(!0),[]),O=f.useMemo(()=>t(k?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),[t,k]),P=f.useMemo(()=>i.jsx(rr,{size:12}),[]),N=f.useCallback(()=>{m(!1),x(!1)},[]),I=f.useCallback(()=>{h(!1),x(!1)},[]),D=f.useCallback(V=>{m(!1),x(!1),y(V)},[]),F=f.useCallback(()=>{u(!0)},[]),B=f.useCallback(()=>{u(!1)},[]);return T?null:i.jsx(Go,{widgetType:"task",widgetName:"task",widgetSize:"mini",children:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-subtler border-subtlest p-md group relative flex h-14 items-center justify-between gap-2 rounded-xl border transition-transform duration-200 hover:scale-[1.01] hover:transform",onMouseEnter:R,onMouseLeave:j,children:i.jsx(it,{mode:"wait",children:w?i.jsx(i6t,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex min-w-0 shrink items-center gap-2",children:[i.jsx("div",{className:"bg-offsetPlus flex size-8 items-center justify-center rounded-lg",children:_?.type==="ALERT"&&_?.subscription?i.jsx(ane,{size:16,className:"text-quiet shrink-0"}):i.jsx(zR,{size:16,className:"text-quiet shrink-0"})}),i.jsx("div",{className:"flex w-full min-w-0 flex-col items-start",children:_?i.jsx(L,{variant:"small",color:"default",className:"w-full truncate",children:E}):i.jsxs(i.Fragment,{children:[i.jsx(L,{variant:"small",color:"default",className:"w-full truncate",children:n}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"truncate",children:i.jsx(pe,{defaultMessage:"Create a task to get this sent automatically.",id:"1AmBIpC9N9"})})]})})]}),ree.NEXT_PUBLIC_IS_SIDECAR_BUILD?i.jsx(Te,{size:"tiny",icon:wc,onClick:l}):i.jsx(it,{mode:"wait",children:M||(S?i.jsx("div",{className:"flex min-w-0 shrink-0 items-center gap-1.5",children:(v||c)&&_?i.jsx(lCe,{isOpened:c,onOpen:F,onClose:B,onEdit:C}):i.jsxs(i.Fragment,{children:[S.isRecurring&&i.jsx(Cke,{size:16,className:"shrink-0"}),i.jsx(L,{className:"truncate",variant:"small",children:S.kind}),i.jsx(L,{className:"truncate",variant:"small",color:"light",children:S.friendly})]})}):i.jsx(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:hn},children:i.jsx(ge,{text:O,leadingComponent:P,size:"small",onClick:C})},"default"))})]})})}),i.jsx(sf,{children:i.jsx(YF,{source:"task_widget",open:d,prefill:_?void 0:a,initial:_??void 0,onClose:N,onSuccess:D})}),_&&i.jsx(b5,{isOpen:p,onClose:I,task:_,symbol:_.subscription?.event_entity})]})})});cCe.displayName="TaskWidget";const uCe=A.memo(e=>{const{data:t}=e,{menuItems:n}=fg();return i.jsx(Go,{widgetType:"time",widgetName:"time",widgetSize:"full",children:i.jsxs(z,{className:"flex w-full",children:[i.jsx(L,{children:i.jsx(z,{className:"mr-md pr-md border-r font-mono text-4xl",children:t.time})}),i.jsxs("div",{children:[i.jsx(L,{variant:"smallBold",children:t.date}),i.jsx(L,{variant:"small",color:"light",children:t.location?`${t.location}`:null})]}),n&&n.length>0&&i.jsx("div",{className:"-mr-sm -mt-sm flex grow justify-end",children:i.jsx("div",{children:i.jsx(er.Menu,{menuItems:n})})})]})})});uCe.displayName="TimeWidget";const dCe=A.memo(e=>{const{data:t}=e,{duration_seconds:n}=t,{menuItems:r}=fg(),{result:s}=bn(),a=s?.uuid,o=f.useMemo(()=>`timer_widget_state_${a}_${n}`,[a,n]),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[m,p]=f.useState(null),[h,g]=f.useState(n*1e3),[y,v]=f.useState(!0),[x,b]=f.useState(!1),_=f.useRef(void 0),w=f.useRef(void 0),C=f.useRef(!1),S=f.useRef(null);f.useEffect(()=>{if(!a)return;const P=Ae.getItem(o);if(P)try{const N=JSON.parse(P),I=Date.now();if(N.status==="expired"){d(!0),g(0),p(null);return}if(N.pausedAt&&N.remainingMillis!==void 0)c(!0),g(N.remainingMillis),p(null);else if(N.endTime){const D=N.endTime-I;if(D>0)p(N.endTime),g(D),c(!1);else{g(0),p(null),d(!0);const F={status:"expired",endTime:0,remainingMillis:0};Ae.setItem(o,JSON.stringify(F))}}}catch{Ae.removeItem(o)}else{const N=Date.now()+n*1e3;p(N),c(!1)}},[o,n,a]),f.useEffect(()=>{if(!a||u)return;const P=l?{status:"paused",endTime:0,pausedAt:Date.now(),remainingMillis:h}:{status:"running",endTime:m||Date.now()+h};Ae.setItem(o,JSON.stringify(P))},[h,l,m,o,u,a]);const E=f.useCallback(()=>{if(C.current||u)return;C.current=!0,g(0),p(null),d(!0),b(!0);const P={status:"expired",endTime:0,remainingMillis:0};Ae.setItem(o,JSON.stringify(P)),!y&&S.current&&S.current.play().catch(()=>{})},[o,u,y]),M=f.useCallback(()=>{if(!l&&m){const P=Date.now(),N=m-P;N>0?(g(N),_.current=requestAnimationFrame(M)):E()}},[l,m,E]);f.useEffect(()=>{if(!l&&m&&h>0&&!u){_.current=requestAnimationFrame(M);const P=m-Date.now();P>0&&(w.current=window.setTimeout(E,P))}return()=>{_.current&&cancelAnimationFrame(_.current),w.current&&clearTimeout(w.current)}},[l,m,h,u,M,E]),f.useEffect(()=>{const P=()=>{if(!document.hidden&&!l&&m){const N=Date.now(),I=m-N;I>0?g(I):E()}};return document.addEventListener("visibilitychange",P),()=>{document.removeEventListener("visibilitychange",P)}},[l,m,E]);const k=f.useCallback(()=>{if(!u)if(l){const P=Date.now()+h;p(P),c(!1)}else c(!0),p(null)},[u,l,h]),T=f.useCallback(()=>{_.current&&(cancelAnimationFrame(_.current),_.current=void 0),w.current&&(clearTimeout(w.current),w.current=void 0),C.current=!1;const P=Date.now()+n*1e3;d(!1),c(!1),g(n*1e3),p(P)},[n]),j=f.useCallback(()=>{v(P=>!P)},[]),R=f.useCallback(()=>{b(!1),S.current&&(S.current.pause(),S.current.currentTime=0)},[]),O=f.useMemo(()=>{const P=Math.ceil(h/1e3),N=Math.floor(P/3600),I=Math.floor(P%3600/60),D=Math.floor(P%60),F=I.toString().padStart(2,"0"),B=D.toString().padStart(2,"0");return N>0?`${N}:${F}:${B}`:`${F}:${B}`},[h]);return i.jsx(Go,{widgetType:"timer",widgetName:"timer",widgetSize:"full",children:i.jsxs(z,{className:U("relative flex transition-all duration-200",{"hover:scale-[1.01]":x}),children:[x&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"-m-md absolute inset-0 z-20 cursor-pointer rounded-xl",onClick:R,title:"Click anywhere to stop alarm","aria-label":"Stop alarm"}),i.jsx("div",{className:"-m-md to-attention/20 from-negative/20 absolute inset-0 animate-pulse rounded-xl bg-gradient-to-br"})]}),i.jsxs("div",{className:"relative z-10 flex w-full items-center",children:[i.jsxs(z,{className:"gap-sm flex items-center",children:[i.jsx(ge,{variant:"primaryGhost",size:"small",onClick:k,icon:l?Lte:Ote,disabled:u,pill:!0}),i.jsx(ge,{variant:"primaryGhost",size:"small",onClick:T,icon:Ske,"aria-label":"Restart timer",disabled:x,pill:!0})]}),i.jsx(L,{className:"flex-1",children:i.jsx(z,{className:`pl-lg font-mono text-2xl ${x?"text-negative":""}`,children:O})}),i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(L3,{cueKey:`timer-unmute-${a}`,title:"Tap to unmute",enabled:y&&!u,placement:"top",sideOffset:8,variant:"common",size:"xs",children:i.jsx(ge,{variant:"primaryGhost",size:"small",onClick:j,icon:y?Dte:Fte,disabled:u,pill:!0})}),r&&r.length>0&&i.jsx(er.Menu,{menuItems:r})]})]}),i.jsx("audio",{ref:S,src:"https://r2cdn.perplexity.ai/Hole_In_One.wav?v=1",preload:"auto",style:{display:"none"},loop:!0})]})})});dCe.displayName="TimerWidget";function fCe(){const[e,t]=f.useState(!1),n=jf(),r=f.useCallback(s=>{Qt(X$,s.toString()),t(s)},[t]);return f.useEffect(()=>{const s=Tn(X$);t(s==="true"||s===void 0&&n!=="US")},[n]),f.useMemo(()=>({prefersMetric:e,setPrefersMetric:r}),[e,r])}const mCe=A.memo(({day:e,icon:t,high:n,low:r,selected:s})=>i.jsxs("div",{className:"relative col-span-1",children:[s&&i.jsx("div",{className:"-inset-sm right-md absolute",children:i.jsx("div",{className:"absolute inset-0 rounded-md bg-white opacity-10"})}),i.jsxs("div",{className:"relative flex flex-col items-start",children:[i.jsx(L,{color:"white",children:i.jsx(me,{icon:t,size:"xl",className:"mb-xs -ml-two"})}),i.jsx(L,{variant:"smallBold",color:"white",children:e}),i.jsxs("div",{className:"mt-xs gap-x-xs flex",children:[i.jsx(L,{variant:"smallCaps",color:"white",className:"gap-x-two flex",children:i.jsxs("span",{children:[n,""]})}),i.jsx(L,{variant:"smallCaps",color:"white",className:"gap-x-two flex opacity-75",children:i.jsxs("span",{children:[r,""]})})]})]})]}));mCe.displayName="ForecastItem";const see=e=>e.time,aee=e=>e.temp,l6t="white",oee="white",q6="rgba(255, 255, 255, 0.5)",iee="rgba(255, 255, 255, 0.3)",lee="font-mono text-[11px]",dy={top:30,right:0,bottom:5,left:0},c6t=100,u6t=35,d6t=40,QF=130,pCe=A.memo(({forecast:e,activeDay:t,isMetric:n})=>{const{locale:r}=Q(),s=f.useMemo(()=>e.map(S=>S?.hour?.map(E=>({time:new Date(E.time),temp:n?E.temp_c:E.temp_f}))),[e,n]),a=f.useMemo(()=>Jl(s.flat(),aee),[s]),o=f.useMemo(()=>s[t]??[],[t,s]),l=f.useRef(null),{width:c,height:u}=j_e(l),d=c/c6t,{xRange:m,yRange:p}=yx({width:c,height:u,margin:dy,maxYLabelWidth:u6t}),h=f.useMemo(()=>q1({range:m,domain:Jl(o,see),round:!0}),[o,m]),g=u/d6t,y=f.useMemo(()=>Bp({range:p,domain:a,nice:!0,round:!0}),[p,a]),v=f.useMemo(()=>Lf().x(S=>h(see(S))).y(S=>y(aee(S))).curve(Pct),[h,y]),x=f.useMemo(()=>v(o),[v,o]),b=f.useCallback(S=>`${S}`,[]),_=f.useCallback(S=>typeof S=="number"?S.toString():S.toLocaleString(r,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00",""),[r]),w=f.useCallback((S,E,M)=>({className:lee,fill:oee,dx:E===0?"-0.3em":E===M.length-1?"0.3em":"0",dy:"0.3em",textAnchor:E===0?"start":E===M.length-1?"end":"middle"}),[]),C=f.useMemo(()=>({className:lee,textAnchor:"start",dx:"0.75em",dy:"-0.5em",fill:oee}),[]);return i.jsx("div",{className:"relative",ref:l,style:{height:QF},children:i.jsxs(hg,{width:c,height:u,children:[i.jsx(xC,{orientation:qs.bottom,scale:h,top:u,stroke:q6,hideAxisLine:!0,numTicks:d,tickStroke:iee,tickLabelProps:w,tickFormat:_}),i.jsx(xC,{orientation:qs.left,left:dy.left,hideAxisLine:!0,tickFormat:b,scale:y,stroke:q6,tickStroke:iee,hideTicks:!0,tickLabelProps:C,numTicks:g}),i.jsx(hx,{left:dy.left,scale:y,width:c-dy.right-dy.left*2,strokeDasharray:"2,2",stroke:q6,pointerEvents:"none",numTicks:g}),i.jsx("path",{d:x,stroke:l6t,strokeWidth:2,fill:"none",strokeLinecap:"round",shapeRendering:"geometricPrecision"})]})})});pCe.displayName="HourlyTemperature";const f6t=Object.freeze(Object.defineProperty({__proto__:null,HOURLY_TEMPERATURE_HEIGHT:QF,HourlyTemperature:pCe},Symbol.toStringTag,{value:"Module"})),m6t=he(async()=>{const{HourlyTemperature:e}=await ae(async()=>{const{HourlyTemperature:t}=await Promise.resolve().then(()=>f6t);return{HourlyTemperature:t}},void 0);return{default:e}},{loading:()=>i.jsx("div",{style:{height:QF}})}),hCe=A.memo(e=>{const{$t:t}=Q(),{prefersMetric:n,setPrefersMetric:r}=fCe(),s=n,[a,o]=f.useState(0),[l,c]=f.useState(!1),u=e,{menuItems:d}=fg(),{openModal:m}=vt(),{permissionStatus:p}=$h(),{submitQuery:h}=Oa(),{trackEvent:g}=Me(),{locale:y}=Q(),{value:v}=sE({flag:"weather-provider",defaultValue:"weatherapi",subjectType:"visitor_id"}),x=f.useCallback(()=>{g("precise location modal opened",{origin:"weather_widget"}),m("locationPermissionModal",{onPermissionGranted:T=>{c(!1);const j=ja();h({rawQuery:"weather",copilotOverride:!1,attachments:[],collection:null,newFrontendContextUUID:j,promptSource:"device_location_request",querySource:"device_location_request",deviceLocation:{latitude:T.coords.latitude,longitude:T.coords.longitude},shouldRedirectToBackendUUID:!0})},origin:"weather_widget"})},[g,m,h]);f.useEffect(()=>{p!==void 0&&p!=="granted"&&c(!0)},[p]);const b=f.useCallback(()=>{window.open(u.url||"https://www.accuweather.com/","_blank")},[u.url]);if(!u||!u.current||!u.location)return null;const{current:_,location:w,forecast:C}=u,S=C[0],E=_.condition?.icon,M=UC(h3,E)?wv[E]:Kv,k="col-span-1";return i.jsx(Go,{widgetType:"weather",widgetName:"weather_forecast",widgetSize:"full",children:i.jsxs(z,{className:"p-md relative select-none",children:[i.jsx(q2,{variant:a===0?_.condition?.icon||"clear-day":C[a]?.icon||"clear-day"}),i.jsxs(z,{className:"gap-md relative flex flex-col drop-shadow-sm",children:[i.jsxs("div",{className:"gap-x-lg flex",children:[i.jsx(z,{className:k,children:i.jsx("div",{className:"flex h-full items-center",children:i.jsxs(L,{className:"gap-x-md flex items-center",color:"white",children:[i.jsx(me,{icon:M,size:40,className:"-mt-xs -ml-two"}),i.jsxs("div",{className:"flex items-baseline",children:[i.jsx("div",{className:"font-mono text-4xl",children:i.jsx(ii,{value:s?_.temp_c??0:_.temp_f??0,suffix:""})}),i.jsxs("div",{className:"ml-xs mt-two flex",children:[i.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer appearance-none",children:i.jsx(L,{color:"white",className:s?"opacity-60":void 0,children:i.jsx("div",{className:"font-mono",children:"F"})})}),i.jsx("button",{onClick:()=>r(!0),className:"ml-xs cursor-pointer appearance-none",children:i.jsx(L,{color:"white",className:s?void 0:"opacity-60",children:i.jsx("div",{className:"font-mono",children:"C"})})})]})]})]})})}),i.jsxs(z,{className:k,children:[_.condition&&i.jsx(L,{variant:"section-title",color:"white",children:_.condition.text}),i.jsx("div",{className:"gap-x-sm flex",children:i.jsxs("div",{className:"gap-x-xs flex",children:[i.jsx(L,{variant:"smallCaps",color:"white",children:i.jsx(ii,{value:s?S?.maxtemp_c??0:S?.maxtemp_f??0,suffix:""})}),i.jsx(L,{variant:"smallCaps",className:"flex opacity-70",color:"white",children:i.jsx(ii,{value:s?S?.mintemp_c??0:S?.mintemp_f??0,suffix:""})})]})})]})]}),i.jsxs("div",{className:"gap-sm flex",children:[i.jsxs(z,{className:"flex flex-col items-start justify-center",children:[i.jsx("div",{className:"gap-sm relative flex items-center",children:i.jsxs(gc,{className:"gap-xs text-xs text-white",children:[i.jsx(br,{id:"location-name",children:i.jsxs(L,{variant:"smallBold",className:"text-right",color:"white",children:[w.name,w.is_usa?w.region?`, ${w.region}`:"":`, ${w.country}`]})}),l&&i.jsx(br,{id:"precise",children:i.jsx(Te,{onClick:x,size:"small",extraCSS:"!text-white hover:underline hover:opacity-100 !p-0 !h-0 decoration-white/50 decoration-offset-[4px] opacity-70 !font-normal",pill:!0,variant:"noBackground",text:t({defaultMessage:"Use precise location",id:"Si49wMl5CP"})})})]})}),w.localtime&&i.jsx(L,{variant:"tiny",color:"white",className:"opacity-75",children:nKe(w.localtime,y)})]}),d&&d?.length>0&&i.jsx("div",{className:"absolute right-0 top-0",children:i.jsx(er.Menu,{buttonClass:"!text-white opacity-40 hover:opacity-100 hover:!bg-white/10",menuItems:d})})]})]}),i.jsx(z,{className:"mt-xl relative grid grid-cols-3 gap-x-4 gap-y-6 drop-shadow-sm md:grid-cols-6 md:gap-0",children:C.map((T,j)=>i.jsx("button",{onClick:()=>o(j),className:j!==a?"duration-150 hover:opacity-70 active:scale-[0.98]":"",children:i.jsx(mCe,{day:tO(T.dow??"",y),high:(s?T.maxtemp_c:T.maxtemp_f)??0,low:(s?T.mintemp_c:T.mintemp_f)??0,icon:wv[T.icon],selected:a===j})},j))}),i.jsx(z,{className:"mt-sm",children:i.jsx(m6t,{forecast:C,activeDay:a,isMetric:s})}),v==="accuweather"&&i.jsx(z,{className:"mt-lg flex cursor-pointer justify-end",onClick:b,children:i.jsxs(L,{variant:"micro",color:"white",className:"mt-xs gap-xs -mb-sm -mr-xs flex items-center opacity-65 hover:opacity-40",children:["The AccuWeather",i.jsx("sup",{className:"-ml-xs",children:""})," Forecast",i.jsx(me,{icon:no,size:"xs"})]})})]})})});hCe.displayName="WeatherWidget";const gCe=()=>null,p6t=he(()=>ae(()=>import("./index-DuGhojEe.js"),__vite__mapDeps([127,3,1,4,6,5])),{loading:()=>i.jsx(gCe,{})}),h6t=he(async()=>{const{CharityWidget:e}=await ae(async()=>{const{CharityWidget:t}=await import("./CharityWidget-PCYvyCUH.js");return{CharityWidget:t}},__vite__mapDeps([128,3,1,4,113,114,115,116,5,6]));return{default:e}},{loading:()=>i.jsx(gCe,{})}),yCe=A.memo(({widgetData:e,menuItems:t,tableCitationOffset:n})=>{const r=dx(e);return r?ns(r).with({object:"CalculatorWidget"},s=>i.jsx(er,{menuItems:t,children:i.jsx(Kbe,{...s})})).with({object:"FinanceWidget"},()=>null).with({object:"CrunchbaseWidget"},s=>i.jsx(er,{menuItems:t,variant:"noChrome",children:i.jsx(p6t,{...s})})).with({object:"PlaceWidget"},()=>null).with({object:"ShopifyWidget"},()=>null).with({object:"JobsWidget"},()=>null).with({object:"TimeWidget"},s=>i.jsx(er,{menuItems:t,children:i.jsx(uCe,{...s})})).with({object:"TimerWidget"},s=>i.jsx(er,{menuItems:t,children:i.jsx(dCe,{...s})})).with({object:"CurrencyExchangeWidget"},s=>i.jsx(er,{menuItems:t,className:"overflow-hidden !p-0",children:i.jsx(a_e,{...s})})).with({object:"WeatherWidget"},s=>i.jsx(er,{menuItems:t,variant:"noChrome",children:i.jsx(hCe,{...s})})).with({object:"TableWidget"},s=>i.jsx(er,{menuItems:t,variant:"noChrome",children:i.jsx(h2e,{tableData:s,citationOffset:n??0})})).with({object:"SportsEventsWidget"},s=>i.jsx(jy,{data:s})).with({object:"SportsIndvScheduleWidget"},s=>i.jsx(jy,{data:s})).with({object:"SportsStandingsWidget"},s=>i.jsx(jy,{data:s})).with({object:"SportsIndvEventsWidget"},s=>i.jsx(jy,{data:s})).with({object:"FlightStatusWidget"},s=>i.jsx(d_e,{data:s})).with({object:"CharityWidget"},s=>i.jsx(er,{menuItems:t,variant:"noChrome",children:i.jsx(h6t,{...s})})).with({object:"TaskWidget"},s=>i.jsx(cCe,{data:s})).with({object:"GenericFallbackWidget"},s=>i.jsx(m_e,{...s})).otherwise(()=>(ee.warn(new Error(`No PanelComponent found for livePanelType: ${r.object}`),{widgetData:e}),null)):null});yCe.displayName="LivePanel";const vCe=A.memo(({name:e,title:t,values:n,onEntityClick:r})=>{const{inFlight:s}=Ht(),a=f.useCallback(c=>{s||r(c)},[s,r]),o=U("underline-offset-2 cursor-pointer decoration-subtler hover:text-super hover:decoration-super group transition-colors duration-200 ease-in-out",{underline:!s}),l=f.useCallback(({content:c,href:u})=>{const d=u||(c.startsWith("http://")||c.startsWith("https://")?c:`https://${c}`);return i.jsxs(Ye,{href:d,target:"_blank",rel:"noopener",className:o,children:[c,i.jsx(L,{className:"ml-xs inline",color:"light",variant:"tiny",children:i.jsx(me,{icon:S0,size:"xs"})})]})},[o]);return i.jsx(er.Item,{name:e,title:t,value:n.map((c,u)=>i.jsx(xCe,{attributeValue:c,index:u,totalValues:n.length,entityStyling:o,handleEntityClick:a,renderLink:l},`${c.id}-${u}`))},e)});vCe.displayName="WikiPanelItem";const xCe=A.memo(({attributeValue:e,index:t,totalValues:n,entityStyling:r,handleEntityClick:s,renderLink:a})=>{const o=f.useMemo(()=>()=>i.jsx("div",{children:e.value}),[e.value]),l=f.useCallback(()=>s(e.value),[e.value,s]),c=f.useMemo(()=>i.jsxs(zr,{fallback:o,children:[e.value&&i.jsx(i.Fragment,{children:e.clickable_entity?i.jsx("span",{className:r,onClick:l,children:e.value}):e.value}),e.detail&&i.jsxs("span",{className:"text-quiet ml-1",children:["(",e.source?a({content:e.detail,href:e.source}):e.detail,")"]})]}),[e.clickable_entity,e.detail,e.source,e.value,r,o,l,a]);return i.jsxs("span",{children:[c,t<n-1&&", "]})});xCe.displayName="RenderedValueFactory";const cee=0,bCe=A.memo(({data:e,isReadonly:t,submit:n,entryUUID:r})=>{const{$t:s}=Q(),{title:a,subtitle:o,attributes:l,image_url:c,source_url:u}=e,{trackEvent:d}=Me(),{firstResult:{frontend_context_uuid:m}={}}=Ht(),p=_t(),h=l.length,[g,y]=f.useState(h),v=g===h,x=l.length>2,{menuItems:b}=fg(),_=f.useCallback(()=>{d("click toggle on knowledge card",{newState:v?"collapsed":"expanded",entryUUID:r??"",type:e.type,id:e.source_url,name:e.title}),y(k=>k===cee?h:cee)},[d,v,h,r,e]),[w,{height:C}]=ml(),S=t,E=ja(),M=f.useCallback(k=>{if(d("knowledge card link clicked",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title,label:"attributes",value:k}),n({fork:S,rawQuery:k,collection:null,newFrontendContextUUID:S?E:null,existingFrontendContextUUID:S?void 0:m,promptSource:"user",querySource:"entity_link"}),S){const T=new URLSearchParams({q:k,newFrontendContextUUID:E}),j=new URL(window.location.href);j.pathname="search/new",j.search=T.toString();const R=j.toString();p.push(R)}},[n,S,E,m,p,r,e,d]);return f.useEffect(()=>{d("knowledge card shown",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title})},[]),i.jsx("div",{className:"relative",children:i.jsx(xe.div,{animate:C>0?{height:C}:{},transition:{type:"spring",bounce:.2,duration:.2},className:"overflow-hidden",children:i.jsxs("div",{ref:w,className:"gap-md relative flex flex-col",children:[i.jsx("div",{className:"flex items-end justify-between",children:i.jsx(er.Title,{title:a,subtitle:o,image_url:c,href:u,links:e.links,entryUUID:r??"",data:e,children:i.jsx("div",{className:"flex items-start",children:i.jsx("div",{className:"gap-sm flex items-center",children:b&&b?.length>0&&i.jsx(er.Menu,{menuItems:b,buttonClass:"opacity-0 pointer-events-none"})})})})}),v&&i.jsx("div",{className:"gap-sm border-subtlest pt-md md:gap-x-md grid grid-cols-[auto,1fr] border-t",children:l.slice(0,g).map(k=>i.jsx(vCe,{name:k.key,title:k.title,values:k.values,onEntityClick:M},k.key))}),i.jsx("div",{children:x&&i.jsx("div",{className:"flex justify-end",children:i.jsx(ge,{variant:"border",fullWidth:!0,text:s(v?{defaultMessage:"Less",id:"mFYgAXM/x4"}:{defaultMessage:"More",id:"I5NMJ8llIi"}),size:"tiny",pill:!0,onClick:_,icon:v?YC:Qn,extraCSS:"pl-xs w-[76px]"})})})]})})})});bCe.displayName="WikiPanel";function g6t(e){if(!e||!e.card_type)return null;const{primaryLink:t,otherLinks:n}=e.links.reduce((s,a)=>(a.type==="PRIMARY"&&!s.primaryLink?s.primaryLink=a:s.otherLinks.push(a),s),{primaryLink:null,otherLinks:[]}),r=e?.media_items?.[0]?.image??e?.image_urls?.[0]??"";return{source_url:t?.url??"",image_url:r,title:e?.title??"",subtitle:e.description??"",attributes:e.attributes??[],type:e.card_type,links:n}}const _Ce=A.memo(({knowledgePanelData:e,isReadonly:t,submit:n,menuItems:r,entryUUID:s,className:a})=>{const o=f.useMemo(()=>e?g6t(e):null,[e]);return o?i.jsx(er,{menuItems:r,className:a,children:i.jsx(bCe,{data:o,submit:n,isReadonly:t,entryUUID:s??""})}):null});_Ce.displayName="StaticPanel";function Z9(e){return e&&"is_widget"in e&&e.is_widget===!0}function y6t(e){return e&&"card_type"in e}function uee(e){return"is_code_interpreter"in e&&e.is_code_interpreter===!0&&e.is_image}const wCe=A.memo(({data:e,submit:t,isReadonly:n=!1,menuItems:r,tableCitationOffset:s,entryUUID:a})=>i.jsxs(i.Fragment,{children:[!uee(e)&&Z9(e)&&i.jsx(yCe,{widgetData:e,menuItems:r??le,tableCitationOffset:s}),y6t(e)&&i.jsx(_Ce,{knowledgePanelData:e,summaryData:null,submit:t,isReadonly:n,menuItems:r??le,entryUUID:a??""}),uee(e)&&i.jsx(kxe,{graphData:e})]}));wCe.displayName="ThreadEntryPanel";const Tx=({reason:e})=>{const t=mt(),{searchTerm:n}=qP(),r=[tf,{search_term:n??""}],s=Rnt(),a=Die(),o=Oo(),{mutate:l}=bt({mutationKey:["removeWidget"],mutationFn:async({entryUUID:m,data:p})=>Z9(p)?C$e({backendUUID:m,url:p.url,rwToken:o,reason:e}):Promise.resolve(),onMutate:async({entryUUID:m,data:p})=>{await t.cancelQueries({queryKey:["results"]}),a(m,h=>Z9(p)?{...h,widget_data:h.widget_data?.filter(g=>g.url!==p.url)}:h)}}),{mutate:c}=bt({mutationFn:async m=>{try{await ne.DELETE("/rest/thread/delete_all_threads",e,{body:{delete_all:m==="all"},timeoutMs:0})}catch(p){ee.error(p)}},onMutate:async m=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:an});const p=t.getQueryData(r),h=t.getQueryData(an);return m==="all"?(t.setQueryData(an,g=>{const y=g.pages.map(v=>v.map(x=>({...x,thread_count:0})));return{...g,pages:y}}),t.setQueryData(r,g=>({...g,pages:[]}))):m==="standalone"&&t.setQueryData(r,g=>({...g,pages:g.pages.map(y=>y.filter(v=>v.collection?.uuid))})),{previousThreads:p,previousCollections:h}},onSettled:(m,p,h,g)=>{p?(t.setQueryData(r,g?.previousThreads),t.setQueryData(an,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:an}),t.invalidateQueries({queryKey:[Zl]}),t.invalidateQueries({queryKey:[fw]}),s())}}),{mutate:u}=bt({mutationFn:async({entryUUID:m,callback:p})=>{p?.(),await w$e({entryUUID:m,rwToken:o,callback:p,reason:e})},onMutate:async({entryUUID:m,collectionSlug:p})=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:an});const h=t.getQueryData(r),g=t.getQueryData(an);return t.setQueryData(r,y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.filter(b=>b.uuid!==m));return{...y,pages:v}}),p&&(t.setQueryData(an,y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.map(b=>b.slug===p?{...b,thread_count:b.thread_count-1}:b));return{...y,pages:v}}),t.setQueryData([Zl,{collection_slug:p.slice(-22)}],y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.filter(b=>b.uuid!==m));return{...y,pages:v}})),{previousThreads:h,previousCollections:g}},onSettled:(m,p,{entryUUID:h},g)=>{p?(t.setQueryData(r,g?.previousThreads),t.setQueryData(an,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:an}),t.invalidateQueries({queryKey:[Zl]}),t.invalidateQueries({queryKey:[fw]}),s(h))}}),{mutate:d}=bt({mutationFn:async({entryUUIDs:m,callback:p})=>{p?.(),await _$e({entryUUIDs:m,rwToken:o,reason:e})},onMutate:async({entryUUIDs:m})=>{await t.cancelQueries({queryKey:r});const p=t.getQueryData(r),h=t.getQueryData(an);return t.setQueryData(r,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(v=>v.filter(x=>!m.includes(x.uuid)));return{...g,pages:y}}),{previousThreads:p,previousCollections:h}},onSettled:(m,p,{entryUUIDs:h},g)=>{p?t.setQueryData(r,g?.previousThreads):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:[fw]}),h.forEach(y=>s(y)))}});return f.useMemo(()=>({removeWidgetFromEntry:l,deleteAllThreads:c,deleteThread:u,deleteThreads:d}),[c,u,d,l])};function v6t({queryKey:e,pageSize:t,fetchFn:n,autoFetch:r,nextPageAccessor:s,initialData:a,args:o}){const l=f.useMemo(()=>o||[],[o]),c=f.useCallback(async({pageParam:u=1})=>{(!u||u<1)&&(u=1);const m={offset:(u-1)*t,...l};return n(m)},[l,n,t]);return Cc({enabled:r,queryKey:e,queryFn:c,placeholderData:Ch,refetchOnReconnect:"always",networkMode:"offlineFirst",initialData:a,initialPageParam:1,getNextPageParam:(u,d)=>s(u,d)})}const x6t=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,LWt=(e,t,n,r,s)=>{const a=mt(),{searchTerm:o}=qP(),l=f.useMemo(()=>({search_term:o,with_temporary_threads:t,ascending:r,query_source_filter:n,thread_type_filter:s}),[o,t,r,n,s]),c=f.useCallback(async v=>fie({timeoutMs:5e3,paginationParams:v,ascending:r,reason:e}),[r,e]),u=v6t({queryKey:[tf,l],pageSize:die,fetchFn:c,autoFetch:!0,nextPageAccessor:x6t,args:l}),d=f.useCallback(()=>{a.invalidateQueries({queryKey:[tf,l]})},[a,l]),m=u.data?.pageParams?.length??1,p=u.data?.pages??[],h=p.flat(),g=p[p.length-1]?.[0]?.has_next_page,y=f.useMemo(()=>({currentPage:m,hasNextPage:!!g,hasPreviousPage:m>1,getNextPage:()=>u.fetchNextPage(),getPreviousPage:()=>u.fetchPreviousPage()}),[g,m,u]);return f.useMemo(()=>({...u,data:h,paginationInfo:y,invalidateThreadsQuery:d}),[y,u,h,d])};function b6t({reason:e}){const t=mt();return f.useCallback(()=>{t.prefetchInfiniteQuery({queryKey:[tf,{search_term:""}],initialPageParam:0,queryFn:()=>fie({timeoutMs:5e3,paginationParams:{offset:0},reason:e})})},[t,e])}const CCe="fetch_bookmarks";async function _6t({reason:e}){try{return await(await sr({urlPath:"/rest/collections/list_bookmarks",reason:e})).json()||[]}catch(t){return ee.error("Failed to get bookmarks.",t),[]}}const w6t=({reason:e,enabled:t=!0})=>{const{isIncognito:n}=oa({reason:e}),{session:r}=Ct(),s=r?.user?.email,{data:a,refetch:o,isLoading:l}=$e({queryKey:[CCe,s],queryFn:async()=>s?await _6t({reason:e}):[],enabled:t&&!n&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!0,placeholderData:null});return f.useMemo(()=>!s||n?{data:null,isLoading:!1,refetch:Rn}:{data:a,isLoading:l,refetch:o},[a,s,n,l,o])},C6t=()=>{const e=mt();return f.useCallback(()=>{e.invalidateQueries({queryKey:[CCe]})},[e])};function S6t({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const o=a.threadId,c=n.find(u=>u.id===o)?.entryIds?.[0];if(c&&o){const u=r[c];return u?{id:o,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source,streamCreatedAt:u.stream_created_at,streamId:a.id,frontendContextUUID:u.frontend_context_uuid}:void 0}else return{id:"",slug:void 0,title:a.placeholderChunk?.query_str??"",rwToken:null,lastUpdated:null,contextUUID:null,collectionInfo:null,displayModel:null,entryUUID:null,socialInfo:null,focus:null,mode:null,source:null,streamCreatedAt:new Date().toISOString(),streamId:a.id,frontendContextUUID:a.placeholderChunk?.frontend_context_uuid}}).filter(s=>s!=null)}function E6t({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const o=a.threadId;if(!o)return;const c=n.find(d=>d.id===o)?.entryIds?.[0];if(!c)return;const u=r[c];if(u)return{id:o,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source,streamCreatedAt:u.stream_created_at}}).filter(s=>s!=null)}function M6t(){const e=Ia(),{activeStreams:t,streams:n,threads:r,entries:s}=e.getState();return f.useMemo(()=>{const a=E6t({activeStreams:t,streams:n,threads:r,entries:s}),o=new Set;return a.filter(l=>!l.slug||o.has(l.slug)?!1:(o.add(l.slug),!0))},[t,n,r,s])}function SCe({reason:e}){const{data:t,isLoading:n}=y_t({reason:e}),r=M6t();return f.useMemo(()=>({isLoading:n,data:[...r.filter(s=>!t.some(a=>a.link.split("/").pop()===s.slug)).filter(s=>!t.some(a=>a.uuid===s.id)).filter(s=>s.slug!==null).map(s=>({uuid:s.id,variant:"thread",link:`/search/${s.slug}`,title:s.title??"",isStreaming:!0,unread:!1})),...t]}),[t,r,n])}const k6t="fetch_sidebar_hubs",J9=["SIDEBAR_FINANCE","SIDEBAR_SHOPPING","SIDEBAR_TRAVEL","SIDEBAR_ACADEMIC","SIDEBAR_SPORTS"],dee=(e,t)=>t?.sidebar_hubs.includes(e)??!1,eR=[k6t];async function T6t({reason:e}){try{return(await ne.GET("/rest/user/get_user_sidebar_hubs",e)).data||{sidebar_hubs:le}}catch(t){return ee.error("Failed to get sidebar hubs.",t),{sidebar_hubs:le}}}const ECe=({reason:e})=>{const{data:t,refetch:n,isLoading:r}=$e({queryKey:eR,queryFn:()=>T6t({reason:e})});return f.useMemo(()=>({data:t,isLoading:r,refetch:n}),[t,r,n])},N6t=({reason:e})=>{const{actions:t}=dn(),{data:n}=ECe({reason:e});f.useEffect(()=>{if(!n)return;const r=J9.filter(s=>!n.sidebar_hubs.includes(s));t.setSidebarHiddenHubs(r)},[n,t])},MCe=({reason:e})=>{const t=mt(),{actions:n,sidebarHiddenHubs:r}=dn(),s=f.useCallback(async o=>{try{return await ne.POST("/rest/user/subscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:o}}}),t.invalidateQueries({queryKey:eR}),n.setSidebarHiddenHubs(r.filter(l=>l!==o)),!0}catch{return!1}},[t,n,r,e]),a=f.useCallback(async o=>{try{return await ne.POST("/rest/user/unsubscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:o}}}),t.invalidateQueries({queryKey:eR}),n.setSidebarHiddenHubs([...r,o]),!0}catch{return!1}},[t,n,r,e]);return f.useMemo(()=>({subscribeToHub:s,unsubscribeFromHub:a}),[s,a])},fy=e=>{const t=e?.split("/").slice(1);return ea(t)?["finance"].includes(t[0])?"finance":["travel"].includes(t[0])?"travel":["shopping"].includes(t[0])?"shopping":["academic"].includes(t[0])?"academic":["sports"].includes(t[0])?"sports":null:null},A6t=()=>{const{$t:e}=Q();return[{id:"SIDEBAR_FINANCE",name:e({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:Gv},{id:"SIDEBAR_TRAVEL",name:e({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:one},{id:"SIDEBAR_SHOPPING",name:e({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:ine},{id:"SIDEBAR_ACADEMIC",name:e({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:MR},{id:"SIDEBAR_SPORTS",name:e({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:lne}]},j6t=({isOpen:e,onClose:t,availableHubs:n})=>{const r="home-sidebar-configure-overlay",s=A6t(),{data:a}=ECe({reason:r}),{subscribeToHub:o,unsubscribeFromHub:l}=MCe({reason:r}),{$t:c}=Q(),u=f.useMemo(()=>s.filter(d=>n.includes(d.id)),[n,s]);return i.jsxs(Xt,{title:c({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),isOpen:e,onClose:t,variant:"default",children:[i.jsx(L,{variant:"base",color:"light",className:"mb-sm",children:c({defaultMessage:"Select the items that appear in your sidebar.",id:"I+JwmwJnZQ"})}),i.jsx(z,{className:"mb-[-24px] flex flex-col divide-y",children:u.map(d=>i.jsx(R6t,{hub:d,enabled:dee(d.id,a),onToggle:()=>{dee(d.id,a)?l(d.id):o(d.id)}},d.id))})]})},R6t=({hub:e,enabled:t,onToggle:n})=>i.jsxs("div",{className:"flex h-12 items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(me,{icon:e.icon,size:"base"}),i.jsx(L,{variant:"baseSemi",children:e.name})]}),i.jsx(Ao,{active:t,onChange:n})]}),kCe=A.memo(({item:{title:e,link:t},position:n})=>{const{trackEvent:r}=Me(),{setMobileSidebarOpen:s}=Ac(),a=f.useCallback(()=>{s(!1),r("click recent collection",{title:e,link:t,position:n})},[t,n,s,e,r]);return i.jsx(Ye,{href:t,className:"group block cursor-pointer",onClick:a,children:i.jsx(z,{className:"p-xs rounded",bgHover:"offsetPlus",children:i.jsx(L,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:i.jsx("div",{className:"flex w-full items-center",children:i.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:e})})})})})});kCe.displayName="CollectionHistoryItem";const TCe=({show:e,data:t,type:n,HistoryComponent:r,wrapperClassName:s,id:a})=>{const o="recent-items",{isIncognito:l}=oa({reason:o}),c=(u,d="")=>"link"in u?u.link+d:"uuid"in u?u.uuid+d:"slug"in u?u.slug+d:d;return!e||!t?.length?null:i.jsx("div",{className:"group/history",children:i.jsx(it,{initial:!1,mode:"wait",children:l?i.jsx(tR,{className:"px-sm",direction:"in",children:i.jsx(z,{className:"mx-md mb-lg mt-sm p-md rounded-md border border-dashed",children:i.jsx(L,{color:"ultraLight",variant:"tiny",className:"gap-sm flex flex-col items-start text-left",children:i.jsx("span",{children:n==="thread"?i.jsx(pe,{defaultMessage:"Library disabled while incognito",id:"OUt8F76OaH"}):i.jsx(pe,{defaultMessage:"Spaces disabled while incognito",id:"kdu3grXdAD"})})})})},"empty"):i.jsx(tR,{direction:"out",children:i.jsx(xe.div,{layout:!0,layoutRoot:!0,className:U("mb-md mt-xs space-y-xs border-subtlest pr-sm dark:border-subtle relative ml-[26px] border-l pl-[14px] duration-200",s),children:i.jsx(wl,{children:i.jsx(it,{initial:!1,mode:"popLayout",children:t.map((u,d)=>i.jsx(xe.div,{layout:"position",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:0},transition:{ease:hn,duration:.3},children:i.jsx(r,{item:u,position:d})},c(u,a)))})})})},"history")})})},Lv=f.memo(TCe);TCe.displayName="RecentItems";const tR=f.memo(({children:e,className:t,direction:n})=>i.jsx(xe.div,{initial:{x:n==="in"?20:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:n==="in"?20:-20,opacity:0,transition:{ease:Ta(.7,0,.84,0),duration:.1}},transition:{x:{ease:Ta(.16,1,.3,1),duration:.2},opacity:{ease:na,duration:.15}},className:t,children:e}));tR.displayName="SlideItem";const NCe=A.memo(({item:{variant:e,title:t,link:n},position:r})=>{const{trackEvent:s}=Me(),{setMobileSidebarOpen:a}=Ac(),{actualQuery:o}=hc(t),l=o||t,c=f.useCallback(()=>{a(!1),s("click recent thread",{title:t,link:n,variant:e,position:r})},[n,r,a,t,s,e]);return i.jsx(Ye,{href:n,className:"group block cursor-pointer",onClick:c,children:i.jsx(z,{className:"p-xs rounded",bgHover:"offsetPlus",children:i.jsx(L,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:i.jsxs("div",{className:"flex w-full items-center",children:[i.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:l}),i.jsx(me,{icon:e==="article"?cne:KR,size:"sm",className:"min-w-0 shrink basis-0 scale-90 opacity-0 duration-300 ease-out group-hover:block group-hover:shrink-0 group-hover:basis-auto group-hover:scale-100 group-hover:opacity-100"})]})})})})});NCe.displayName="ThreadHistoryItem";const _5=A.memo(({vertical:e=!0,size:t,collapsed:n,actionList:r,...s})=>i.jsx(_x,{layout:n?"center":"left",size:t,iconOnly:n,vertical:e,actionList:r??le,indicatorPos:n?"right":"none",fillSpace:!0,...s}));_5.displayName="SiteTabs";const ACe=f.memo(({vertical:e=!0,size:t,collapsed:n,incognito:r,animationId:s})=>{const a="ask-site-tabs",{$t:o}=Q(),l=Qe(),{isMobileStyle:c}=ye(),{trackEvent:u}=Me(),{allowArticleCreation:d}=Ds({reason:a}),m=Nt(),{openVisitorLoginUpsell:p}=Xn({enabled:!l}),{shouldShowLossAversionModal:h,handleOpenLossAversion:g}=Yh(),{data:y}=sue({reason:a}),{data:v}=SCe({reason:a}),{setMobileSidebarOpen:x}=Ac(),b=f.useCallback(M=>{x(!1),h&&(M.preventDefault(),g({args:{origin:Ie.DISCOVER_BUTTON}}))},[h,g,x]),_=f.useCallback(()=>{u("spaces click",{}),x(!1),l||p({title:o({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Ie.SPACES_PAGE})},[u,l,p,o,x]),w=f.useCallback(()=>{u("library click",{}),x(!1),l||p({title:o({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:Ie.LIBRARY_PAGE})},[u,l,p,o,x]),C=f.useCallback(()=>{u("finance click",{}),x(!1)},[x,u]),S=f.useCallback(()=>{x(!1)},[x]),E=f.useMemo(()=>{const M=[{icon:une,text:o({defaultMessage:"Home",id:"ejEGdxSUGs"}),href:"/",show:!0,active:m==="/",ariaLabel:o({defaultMessage:"Home",id:"ejEGdxSUGs"}),testId:"home-tab",onClick:S,tooltip:n?o({defaultMessage:"Home",id:"ejEGdxSUGs"}):void 0},{icon:dne,text:o({defaultMessage:"Discover",id:"cE4HfwyEyr"}),show:!0,active:m?.startsWith("/discover"),ariaLabel:o({defaultMessage:"Discover",id:"cE4HfwyEyr"}),testId:"discover-tab",href:h?void 0:"/discover",onClick:b,tooltip:n?o({defaultMessage:"Discover",id:"cE4HfwyEyr"}):void 0},{icon:Ca,text:o({defaultMessage:"Spaces",id:"ZMoczsYew9"}),href:l?"/spaces":void 0,onClick:_,show:!0,active:m?.startsWith("/spaces"),ariaLabel:o({defaultMessage:"Spaces",id:"ZMoczsYew9"}),testId:"spaces-tab",tooltip:n?o({defaultMessage:"Spaces",id:"ZMoczsYew9"}):void 0,children:!n&&l&&i.jsx(Lv,{show:!0,data:y,type:"collection",HistoryComponent:kCe})},{icon:Eke,text:o({defaultMessage:"Library",id:"StcK672jB9"}),href:l?"/library":void 0,onClick:w,show:!0,testId:"library-tab",trailingComponent:!r&&d&&!n?i.jsx(XF,{}):void 0,active:m?.startsWith("/library"),ariaLabel:o({defaultMessage:"Library",id:"StcK672jB9"}),tooltip:n?o({defaultMessage:"Library",id:"StcK672jB9"}):void 0,children:!n&&l&&i.jsx(Lv,{show:!0,data:v,type:"thread",HistoryComponent:NCe})},{icon:Gv,text:o({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),show:!0,active:m?.startsWith("/finance"),ariaLabel:o({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),testId:"finance-tab",href:"/finance",onClick:C,tooltip:n?o({defaultMessage:"Finance",id:"Fm3M+yFIbr"}):void 0}];return n&&M.push({icon:_0,text:o({defaultMessage:"Sign in",id:"SQJto27U8S"}),onClick:()=>{u("login click",{}),p({origin:Ie.LOGIN_BUTTON})},show:!l,active:m?.startsWith("/login"),testId:"sign-in-tab",ariaLabel:"Sign in",tooltip:n?o({defaultMessage:"Sign In",id:"Ub+AGcdPg6"}):void 0}),M},[m,n,o,l,r,d,b,C,_,w,u,p,y,v,h,S]);return i.jsx(_5,{isMobileStyle:c,size:t,vertical:e,collapsed:n,actionList:E,layoutGroupId:s})});ACe.displayName="AskSiteTabs";const XF=f.memo(({defaultHidden:e=!0,buttonClassName:t})=>{const{$t:n}=Q(),[r,s]=f.useState(!1),{openModal:a}=vt(),{trackEvent:o}=Me(),l=_t(),c=Qe(),u=v=>{v.preventDefault(),v.stopPropagation(),s(!r)},d=()=>{s(!1)},m=()=>{s(!0)},p=f.useCallback(v=>{v.stopPropagation(),c?l.push("/page/new"):a("loginModal",{pitchMessage:{title:n({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:Ie.ARTICLE_NEW}),v.preventDefault()},[l,c,n,a]),h=f.useCallback(v=>{v.preventDefault(),v.stopPropagation(),o("new thread click on threads page",{}),l.push("/",void 0,"New thread (library)")},[o,l]),g=f.useMemo(()=>[{type:"default",text:n({defaultMessage:"Thread",id:"6dmn4mbc3j"}),icon:KR,onClick:h,testId:"library-dropdown-new-thread"},{type:"default",text:n({defaultMessage:"Page",id:"wFmAFCPAci"}),icon:cne,onClick:p,testId:"library-dropdown-new-page"}],[h,p,n]),y=Kh();return i.jsx("div",{className:"ltr:-mr-sm rtl:-ml-sm flex w-full flex-1 justify-end",children:i.jsx(Jt,{placement:y?"left":"right",items:g,isMobileStyle:!1,onClose:d,onOpen:m,isOpen:r,children:i.jsx(z,{onClick:u,"data-testid":"library-add-button",className:U("text-foreground flex h-[24px] w-[27px] items-center justify-center rounded-md duration-150 hover:bg-black/5 dark:hover:bg-white/5",{"opacity-0 group-hover/button:opacity-100":e,"!text-foreground !bg-black/5 !opacity-100 dark:!bg-white/5":r},t),children:i.jsx(me,{icon:rr,size:14})})})})});XF.displayName="LibraryDropdown";const fee=(e,t)=>t?t===e.link:!1,jCe=A.memo(({item:e,position:t,onDeleteClick:n,sidebarOpen:r})=>{const{trackEvent:s}=Me(),a=Nt(),{title:o,link:l,variant:c,isStreaming:u,unread:d}=e,m=c==="thread",{actualQuery:p}=hc(o),h=p||o,{$t:g}=Q(),y=f.useCallback(()=>{s("click recent thread",{title:o,link:l,variant:c,position:t})},[l,t,o,s,c]),v=f.useMemo(()=>[{text:g({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:m?"Thread":"Page"}),icon:uu,onClick:x=>{x.stopPropagation(),n(e)},type:"default"}],[g,m,e,n]);return i.jsx(gs,{href:l,text:h,fadeOut:!0,onClick:y,sidebarOpen:r,selected:fee(e,a),menuItems:v,testId:`thread-title-${h}`,loading:u,accessory:d&&!fee(e,a)?i.jsx("div",{className:"bg-super size-1.5 rounded-full"}):null})});jCe.displayName="ThreadHistoryItemV2";const I6t=(e,t)=>{const{value:n,loading:r}=At({flag:"sports-landing-page",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},mee=10,P6t=({isOpen:e,onCreateClick:t,onDeleteThreadOrBookmark:n,isConfiguring:r,setIsConfiguring:s})=>{const a="home-sidebar",{data:o,isLoading:l}=SCe({reason:a}),{data:c,refetch:u}=w6t({reason:a,enabled:e}),{sidebarHiddenHubs:d}=dn(),{unsubscribeFromHub:m}=MCe({reason:a}),{bookmarks:p,bookmarks_collection_slug:h,bookmarks_collection_uuid:g}=c||{},v=jf()==="US",{variation:x}=I6t(!1),b=b6t({reason:a}),{deleteThread:_}=Tx({reason:a}),{trackEvent:w}=Me(),{$t:C}=Q(),S=Qe(),{openVisitorLoginUpsell:E}=Xn({enabled:!S}),M=_t(),k=Nt(),{removeThreadFromCollection:T}=Fh({reason:a});N6t({reason:a});const[j,R]=f.useState([]),[O,P]=f.useState([]),N=f.useMemo(()=>p?.filter(q=>!j.includes(q))??[],[p,j]),I=f.useMemo(()=>o?.filter(q=>!O.includes(q))??[],[o,O]),D=f.useCallback(q=>{const J=g;n(),w("unbookmark item from sidebar",{collectionUUID:J}),R(te=>[...te,q]),T({entryUUID:q.uuid,oldCollectionUUID:J,callback:()=>{u()}})},[T,u,n,g,w]),F=f.useCallback(q=>{n(),w("delete thread from sidebar",{entryUUID:q.uuid}),P(J=>[...J,q]),R(J=>[...J,{uuid:q.uuid,mode:q.variant==="article"?"article":"thread",title:q.title,slug:q.link}]),_({entryUUID:q.uuid,callback:()=>{q.link===k&&M.push("/")}})},[k,M,_,n,w]),B=f.useCallback(q=>{n(),R(J=>[...J,q]),P(J=>[...J,{uuid:q.uuid,link:q.slug,variant:q.mode==="article"?"article":"thread",title:q.title}]),w("delete bookmark from sidebar",{entryUUID:q.uuid}),_({entryUUID:q.uuid,callback:()=>{q.slug===k?.replace("/search/","").replace("/page/","")&&M.push("/")}})},[n,w,k,M,_]),V=f.useCallback(q=>{m(q)},[m]),$=f.useMemo(()=>({text:C({defaultMessage:"Hide from sidebar",id:"bt2xOtkULy"}),icon:Lt,type:"default",size:Wt.small,show:!0}),[C]),G=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_FINANCE")}}],[V,$]),X=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_TRAVEL")}}],[V,$]),Y=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_SHOPPING")}}],[V,$]),W=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_ACADEMIC")}}],[V,$]),H=f.useMemo(()=>[{...$,onClick:q=>{q.stopPropagation(),V("SIDEBAR_SPORTS")}}],[V,$]),Z=f.useMemo(()=>v?J9:J9.filter(q=>q!=="SIDEBAR_SHOPPING"),[v]),re=f.useMemo(()=>S?Z.filter(q=>!d.includes(q)):Z,[d,S,Z]);return i.jsxs("div",{className:"flex flex-col gap-[12px]",children:[re.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs(Av,{children:[re.includes("SIDEBAR_FINANCE")&&i.jsx(gs,{href:"/finance",text:C({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:Gv,selected:fy(k)==="finance",menuItems:S?G:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"finance"})}}),re.includes("SIDEBAR_TRAVEL")&&i.jsx(gs,{href:"/travel",text:C({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:one,selected:fy(k)==="travel",menuItems:S?X:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"travel"})}}),re.includes("SIDEBAR_SHOPPING")&&i.jsx(gs,{href:"/shopping",text:C({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:ine,selected:fy(k)==="shopping",menuItems:S?Y:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"shopping"})}}),re.includes("SIDEBAR_ACADEMIC")&&i.jsx(gs,{href:"/academic",text:C({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:MR,selected:fy(k)==="academic",menuItems:S?W:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"academic"})}}),re.includes("SIDEBAR_SPORTS")&&x&&i.jsx(gs,{href:"/sports",text:C({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:lne,selected:fy(k)==="sports",menuItems:S?H:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"sports"})}})]}),i.jsx(jv,{})]}),i.jsx(rh,{href:"/library",onClick:q=>{S||(q.preventDefault(),E({title:C({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:Ie.LIBRARY_PAGE}))},onMouseOver:b,text:C({defaultMessage:"Library",id:"StcK672jB9"}),className:"-mb-xs",testId:"library-button",accessory:o&&e&&I.length>0?i.jsx(XF,{defaultHidden:!1,buttonClassName:"text-quiet hover:text-foreground duration-150"}):i.jsx("div",{className:"size-[24px]"})}),l?null:I.length===0?i.jsx(gs,{icon:rr,href:"/",text:C({defaultMessage:"Create a Thread",id:"6naN9kZFw2"}),deemphasized:!0,onClick:()=>{const q=document.getElementById("ask-input");q&&(q.focus(),t())},sidebarOpen:e}):i.jsx(Lv,{show:!0,data:I,type:"thread",HistoryComponent:({item:q,position:J})=>i.jsx(jCe,{item:q,position:J,onDeleteClick:F,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-threads"}),I?.length>=mee&&i.jsx(m9,{href:"/library",text:C({defaultMessage:"View All",id:"wbcwKddwLa"}),onMouseOver:b}),S&&c!==null&&i.jsx(i.Fragment,{children:N.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(jv,{}),i.jsx(rh,{href:h?`/spaces/${h}`:void 0,text:C({defaultMessage:"Bookmarks",id:"nGBrvwYczX"}),className:"-mb-xs",testId:"bookmarks-button"}),i.jsx(Lv,{show:!0,data:N,type:"thread",HistoryComponent:({item:q})=>i.jsx(O6t,{item:q,onRemoveClick:D,onDeleteClick:B,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-bookmarks"}),N.length>=mee&&h&&i.jsx(m9,{href:`/spaces/${h}`,text:C({defaultMessage:"View All",id:"wbcwKddwLa"})})]})}),i.jsx(j6t,{isOpen:r,onClose:()=>s(!1),availableHubs:Z})]})},O6t=({item:e,onRemoveClick:t,onDeleteClick:n,sidebarOpen:r})=>{const s=e.mode==="article",o=`/${s?"page":"search"}/${e.slug}`,l=Nt(),{$t:c}=Q();return i.jsx(gs,{href:o,text:e.title||e.slug,fadeOut:!0,selected:o===l,sidebarOpen:r,testId:`thread-title-${e.title||e.slug}`,menuItems:[{text:c({defaultMessage:"Remove Bookmark",id:"RokVj/Gv4U"}),icon:Mke,onClick:u=>{u.stopPropagation(),t(e)},type:"default"},{text:c({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:s?"Page":"Thread"}),icon:uu,onClick:u=>{u.stopPropagation(),n(e)},type:"default"}]})},ZF=A.memo(({showAvatar:e,showCreatorLabel:t,showEdit:n,isCurrentUser:r=!0,textClassName:s="",textColor:a,textVariant:o="smallBold",username:l,image:c,anon:u,avatarSize:d="small",isAlwaysEditing:m=!1,onButtonClick:p=Rn,className:h})=>{const{$t:g}=Q(),{update:y}=Ct(),{session:v}=Ct(),[x,b]=A.useState(m),[_,w]=A.useState(l??(r?v?.user?.username:"Anonymous")),[C,S]=A.useState(),{isMobileUserAgent:E}=ye(),M=async()=>fetch("/api/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:_})}),{mutate:k,isPending:T}=bt({mutationFn:M,onSuccess:N=>{N.json().then(I=>{if(N.status!==200){S(I.message);return}b(!1),S(void 0),y(),p()})}});f.useEffect(()=>{w(l??(r?v?.user?.username:"Anonymous"))},[l,r,v?.user?.username]);const j=f.useCallback(()=>b(!0),[]),R=f.useCallback(()=>k(),[k]),O=f.useCallback(()=>{w(v?.user?.username??""),m||b(!1),p()},[m,p,v?.user?.username]),P=f.useMemo(()=>v?i.jsxs("div",{className:"ml-sm mt-sm gap-x-sm flex items-center",children:[i.jsx(ge,{text:g({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:_===v.user.username||_===""||T?"common":"primary",size:"small",disabled:_===v.user.username||_===""||T,onClick:R}),i.jsx(ge,{text:g({defaultMessage:"Cancel",id:"47FYwba+bI"}),size:"small",disabled:T,onClick:O})]}):null,[g,O,R,T,v,_]);return i.jsxs("div",{className:U("gap-x-xs relative flex items-center",h),children:[e&&i.jsx(Rt,{size:d,anon:u,user:c??(r?v?.user.image??void 0:void 0)}),x?i.jsx(ra,{isMobileUserAgent:E,value:_,disabled:T,errorText:C??(_===""?g({id:"ekGO8lFf3J",defaultMessage:"Username cannot be empty"}):""),onChange:w,className:"md:min-w-[300px]",inlineEditBlock:P,errorPlacement:Ld.LABEL,wrapperClassName:"w-full",pill:!1}):i.jsx(L,{variant:o,color:a,className:U("line-clamp-1 break-all",s),children:u?"Anonymous":_}),t&&i.jsx(z,{variant:"subtler",className:"px-sm py-xs rounded-full",children:i.jsx(L,{variant:"tiny",color:"light",className:s,children:g({id:"tWkQ2JF/jQ",defaultMessage:"Author"})})}),n&&!x&&i.jsx(Te,{pill:!0,size:"small",icon:wc,onClick:j})]})});ZF.displayName="Username";const RCe=({session:e,onClick:t})=>{const n="sidebar-incognito-menu",{$t:r}=Q(),{isIncognito:s,incognitoType:a}=oa({reason:n}),{actions:o}=dn(),{hasAccessToProFeatures:l,isPro:c,isMax:u}=yt(),d=f.useCallback(()=>{o.setIsIncognito(!1),t()},[o,t]),m=f.useCallback(()=>{o.setIsIncognito(!0),t()},[o,t]);return i.jsxs("div",{className:"flex flex-col items-stretch",children:[i.jsx(pee,{onClick:d,icon:i.jsx("div",{className:`relative inline-flex ${l?"-top-two":""}`,children:i.jsx(Rt,{size:"medium",user:e?.user?.image,showProBadge:c,showMaxBadge:u,className:"!text-inverse",showBackground:!1})}),label:i.jsx("div",{className:"gap-sm flex items-center",children:i.jsx(ZF,{username:e?.user?.username})}),selected:!s},"user"),i.jsx(pee,{onClick:m,icon:i.jsx(Bu,{inverse:!0,incognitoType:a}),label:a===xu.GOVERNMENT?i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx(L,{variant:"smallBold",children:r({defaultMessage:"Government",id:"bh4rlKfcgE"})}),i.jsx(L,{variant:"micro",color:"light",children:r({defaultMessage:"Zero Data Usage",id:"JHS3rmaYsL"})})]}):r({defaultMessage:"Incognito",id:"Sp8UUpZ0at"}),selected:s,showTooltip:!0,incognitoType:a},"incognito")]})},pee=({onClick:e,label:t,selected:n,icon:r,showTooltip:s,incognitoType:a})=>{const{$t:o}=Q(),{isGovernmentRequestOrigin:l}=Or(),{device:{isMacOS:c}}=Et();return i.jsxs(z,{as:"button",bgHover:"subtler",className:"gap-sm p-sm pr-md flex items-center rounded-md active:scale-[.98]",onClick:e,children:[r,typeof t=="string"?i.jsx(L,{variant:"smallBold",children:t}):t,i.jsx("div",{className:"flex-1"}),n?i.jsx("span",{className:"text-super",children:i.jsx(me,{icon:Rr,size:"sm"})}):s&&i.jsx(pn,{className:"max-w-[280px]",tooltipText:a===xu.GOVERNMENT?o({defaultMessage:"Zero Data Usage active",id:"9i8r+oh3pt"}):o({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:l?void 0:c?["",";"]:["ctrl",";"],tooltipLayout:"right",asChild:!0,children:i.jsx(L,{color:"light",className:"opacity-50 duration-150 hover:opacity-100",children:i.jsx(me,{icon:$te,size:"sm"})})})]})},ICe=A.memo(({backgroundVariant:e="subtler"})=>i.jsx(z,{variant:e,className:"inline-flex h-5 items-center rounded px-[6px] py-px",children:i.jsx(L,{color:"light",variant:"micro",className:"translate-y-half uppercase tracking-wider",children:i.jsx(pe,{defaultMessage:"Beta",id:"riw/yc06Nq"})})}));ICe.displayName="BetaBadge";const PCe=A.memo(()=>i.jsx("div",{className:"bg-super dark inline-flex h-5 items-center justify-center rounded px-[6px] py-px",children:i.jsx(L,{color:"white",variant:"tinyRegular",children:i.jsx(pe,{defaultMessage:"New",id:"bW7B87wFFp"})})}));PCe.displayName="NewBadge";const DWt=({children:e,card:t=!0,title:n,id:r})=>i.jsxs("div",{id:r,children:[n&&i.jsx(L,{variant:"baseSemi",className:"pl-sm",children:n}),i.jsx(z,{variant:t?"subtler":void 0,className:U("mb-lg mt-sm divide-y",{"px-md py-sm rounded-lg":t}),children:e})]}),L6t=({children:e,title:t,noPadding:n=!1,subTitle:r,cta:s,titleAccessory:a})=>i.jsxs("div",{className:"pb-md flex flex-col",children:[i.jsx(z,{className:"pb-md flex flex-col gap-1 border-b",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(L,{variant:"baseSemi",children:t}),a]}),r&&i.jsx(L,{variant:"tinyRegular",color:"light",children:r})]}),s&&s]})}),i.jsx("div",{className:U("gap-md flex flex-col",{"py-md":!n}),children:e})]}),K6=({label:e,value:t,valueColor:n="light",cta:r,shouldWrapInMobile:s=!0})=>i.jsxs("div",{className:U("gap-md flex justify-between sm:flex-row sm:flex-nowrap sm:items-center",s&&"flex-col flex-wrap"),children:[i.jsxs("div",{children:[e&&i.jsx(L,{variant:"small",children:e}),t&&i.jsx(L,{variant:"tinyRegular",color:n,children:t})]}),i.jsx("div",{children:r})]}),D6t=(e,t)=>{const{value:n,loading:r}=At({flag:"new-memory-v2-overview-page",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},F6t={memory_enabled:!1,conversation_history_enabled:!1,citations_enabled:!1},U6t=()=>{const{value:e}=At({flag:"memory-search-beta",defaultValue:!1,subjectType:"user_nextauth_id"});return e},OCe=({reason:e})=>{const{isEnterprise:t}=gn({reason:e}),{value:n,loading:r}=At({flag:"memory-experiment",defaultValue:!1,extraAttributes:{isEnterprise:t??!1},subjectType:"user_nextauth_id"}),{value:s,loading:a}=Tc({flag:"memory-search-history",defaultValue:F6t,extraAttributes:{isEnterprise:t??!1,dependent_flag:"memory-experiment",variation_served:n},subjectType:"user_nextauth_id"});return a||r?!1:"memory_enabled"in s&&"conversation_history_enabled"in s&&"citations_enabled"in s?s?.memory_enabled&&s?.conversation_history_enabled&&s?.citations_enabled:!1},FWt=()=>{const e="personal-search-settings-main",t=U6t(),{$t:n}=Q(),r=mt(),s=$pe({reason:e}),{openModal:a}=vt(),{trackEvent:o}=Me(),l=Dt(),c=_t(),{session:u}=Ct(),{variation:d}=D6t(!1,{userEmail:u?.user?.email??""});f.useEffect(()=>{l?.get("modal")==="memory"&&a("memoryListModal",{isMemoryEnabled:!0})},[]);const{mutate:m,isPending:p}=bt({mutationFn:b=>bH({type:"memory",value:b,reason:e}),onSuccess:b=>{b&&r.setQueryData(PA(),b)}}),{mutate:h,isPending:g}=bt({mutationFn:b=>bH({type:"searchHistory",value:b,reason:e}),onSuccess:b=>{b&&r.setQueryData(PA(),b)}}),y=f.useCallback(b=>{m(b),o("toggle memory",{memoryToggleState:b?"on":"off"})},[m,o]),v=f.useCallback(b=>{h(b),o("toggle search history",{searchHistoryToggleState:b?"on":"off"})},[h,o]),x=f.useCallback(()=>{d?c.push("/account/personalize/memories"):(o("viewed memory list modal"),a("memoryListModal",{isMemoryEnabled:!0}))},[d,a,c,o]);return i.jsxs(L6t,{title:n({defaultMessage:"Memory",id:"dVx3yznM2C"}),titleAccessory:t?i.jsx(ICe,{}):i.jsx(PCe,{}),children:[i.jsx(K6,{label:n({defaultMessage:"Reference search library",id:"SwsY8rd34h"}),value:n({defaultMessage:"Let Perplexity use previous searches when answering.",id:"ex3azVKEwb"}),cta:i.jsx(Ao,{active:s.use_search_history===null?!0:s.use_search_history??!1,onChange:v,disabled:g})}),i.jsx(K6,{label:n({defaultMessage:"Reference saved memories",id:"jT78QtuUtA"}),value:i.jsx("div",{className:"flex flex-col",children:i.jsx(L,{className:"inline",variant:"tinyRegular",color:"light",children:i.jsx(pe,{defaultMessage:"Let Perplexity save and use memories when answering. Incognito searches are never stored. ",id:"B53ddA1KtU"})})}),cta:i.jsx(Ao,{active:s.use_memory??!1,onChange:y,disabled:p})}),i.jsx(K6,{label:i.jsx("div",{className:"gap-sm flex items-center",children:i.jsx(L,{variant:"small",children:n({defaultMessage:"Edit your saved memories",id:"xuzqKrNHGC"})})}),cta:i.jsx(ge,{extraCSS:"w-fit",variant:"border",size:"small",text:n({defaultMessage:"Manage",id:"0AzlrbMWV9"}),trailingComponent:i.jsx(_r,{size:16}),onClick:x})})]})},Yo="default",LCe=({trigger:e,popoverPlacement:t="top-start"})=>{const[n,r]=f.useState(!1),s=Qe(),a=Z1(),{isMaxUpsellEnabled:o}=Nc(),l=OCe({reason:"sidebar-bottom-popover"}),c=co(),u=f.useRef(eP().sidebar),{openVisitorLoginUpsell:d}=Xn({enabled:!s}),{device:{isWindowsApp:m}}=Et(),{isGovernmentRequestOrigin:p}=Or(),h=jfe(),{isEnterpriseMax:g}=yt(),{$t:y}=Q(),v=XA(),[x,b]=f.useState(m),[_,w]=f.useState(!1),{keysRequiringRerender:C,removeKeyRequiringRerender:S}=ju(),E=l&&!u.current&&lle(),M=WBe(),{variation:k,loading:T}=Ff(!1);f.useEffect(()=>{!u.current&&n&&VBe("sidebar",!0)},[n]);const j=f.useMemo(()=>[{icon:bN,show:!0,text:y({defaultMessage:"Account",id:"TwyMauNL3r"}),type:Yo,href:Zt.Account.href,target:"_self",testId:"sidebar-my-account"},{icon:vw,show:!0,text:y({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),type:Yo,href:Zt.Preferences.href,target:"_self",testId:"sidebar-preferences"},{icon:wte,show:!0,text:y({defaultMessage:"Personalization",id:"FAejG+JVWn"}),type:Yo,href:Zt.Personalize.href,target:"_self",testId:"sidebar-personalize",...E&&{rightElement:i.jsx(me,{icon:uB,color:"currentColor",className:"text-super"})}},{icon:$C,show:a,text:y({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),type:Yo,href:Zt.Shortcuts.href,target:"_self",testId:"sidebar-shortcuts"},{icon:zd,text:y(k?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),type:Yo,href:Zt.Tasks.href,target:"_self",testId:"sidebar-tasks",...!M&&{rightElement:i.jsx(me,{icon:uB,color:"currentColor",className:"text-super"})}},{icon:Ef,show:!0,text:y({defaultMessage:"Notifications",id:"NAidKbB0vi"}),type:Yo,href:Zt.Notifications.href,target:"_self",testId:"sidebar-notifications"},{icon:Yv,show:!0,text:y({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),type:Yo,href:Zt.Connectors.href,target:"_self",testId:"sidebar-connectors"},{icon:Tte,show:!0,text:y({defaultMessage:"API",id:"xwEc8KM8zK"}),type:Yo,href:Zt.API.href,target:"_self",testId:"sidebar-api"},{icon:Ste,show:!0,text:y({defaultMessage:"Pro Perks",id:"x69637XBwS"}),type:Yo,href:Zt.ProPerks.href,target:"_self",testId:"sidebar-pro-perks"},{icon:fne,show:!0,text:y({defaultMessage:"All settings",id:"IzEySeOy5/"}),type:Yo,href:Zt.Account.href,target:"_self",testId:"sidebar-settings"},{type:"separator",show:o&&!g,className:"!border-b-offset !border-b !-mx-1 mb-1"},{icon:kke,show:o&&!g,text:y({defaultMessage:"View plans",id:"EaucLAoHiC"}),type:Yo,onClick:()=>{c({origin:Ie.SIDEBAR_BOTTOM_POPOVER,pitchMessage:{title:y({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}})},testId:"sidebar-view-plans"}],[y,E,a,k,M,o,c,g]);f.useEffect(()=>{C.includes("sidebar-sign-in-button")&&b(!0),S("sidebar-sign-in-button")},[S,C]),f.useEffect(()=>{v||b(!0)},[v]),f.useEffect(()=>{!h&&p&&b(!0)},[h,p]),f.useEffect(()=>{requestAnimationFrame(()=>{w(!0)})},[]);const{trackEvent:R}=Me();return!s&&!x||T?null:s?i.jsx(Jt,{placement:t,items:j,footer:i.jsx(B6t,{handleClick:()=>r(!1)}),isMobileStyle:!1,isOpen:n,onOpen:()=>r(!0),onClose:()=>r(!1),menuItemClassName:"gap-md",wrapperClassName:"inline-flex",children:i.jsx("div",{onClick:()=>r(!n),className:"inline-flex w-full","data-testid":"sidebar-popover-trigger-signed-in",children:e(n)})}):i.jsx("div",{className:"relative inline-flex justify-center duration-150 hover:opacity-80",children:i.jsxs(xe.button,{initial:_?{opacity:0,scale:.5}:void 0,animate:_?{opacity:1,scale:1}:void 0,className:"inline-flex appearance-none flex-col items-center justify-center",onClick:()=>{R("sidebar sign in button clicked"),d({origin:Ie.SIGNUP_BUTTON})},children:[i.jsx("div",{className:"p-1",children:i.jsx(z,{variant:"super",className:"flex size-8 items-center justify-center rounded-full",children:i.jsx(bN,{className:"text-inverse size-5"})})}),i.jsx(L,{variant:"tinyRegular",className:"text-center",color:"super",children:y({defaultMessage:"Sign In",id:"Ub+AGcdPg6"})})]})})},B6t=({handleClick:e})=>{const{session:t}=Ct();return i.jsx("div",{className:"border-t-offset w-full border-t pt-1",children:t&&i.jsx(RCe,{session:t,onClick:e})})},DCe=({showBottomLabels:e})=>{const t="sidebar-v2-account-menu",{$t:n}=Q(),{isIncognito:r,incognitoType:s}=oa({reason:t}),{session:a}=Ct(),{isPro:o,isMax:l,hasAccessToProFeatures:c}=yt(),u=OCe({reason:t}),d=eP().sidebar,m=u&&!d&&lle(),p=f.useCallback(h=>i.jsx(pn,{showTooltip:!!a?.user?.username&&!e,tooltipText:n({defaultMessage:"Account & Settings",id:"zWaEuojd3m"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:i.jsxs("div",{className:"gap-xs group flex w-full cursor-pointer flex-col items-center",children:[i.jsxs("div",{className:"relative select-none duration-100 group-hover:opacity-80",children:[r?i.jsx(Bu,{inverse:!0,incognitoType:s}):i.jsx(Rt,{size:"medium",showProBadge:o,showMaxBadge:l,badgeProps:{show:m,className:"bg-super border-subtlest"},user:a?.user?.image}),i.jsx(Qn,{className:U("text-quietest group-hover:text-quiet absolute right-0 top-1/2 size-3 -translate-y-1/2 translate-x-[calc(100%+2px)] duration-100",{"!text-quiet -translate-y-[calc(50%-2px)]":h})})]}),e&&i.jsx(L,{variant:"micro",color:"light",className:U("px-xs w-full truncate text-center",{"mt-two":c}),children:n({defaultMessage:"Account",id:"TwyMauNL3r"})})]})}),[e,a?.user?.username,n,r,o,l,a?.user?.image,m,c,s]);return i.jsx(LCe,{trigger:p})};DCe.displayName="SidebarAccountMenu";const V6t="#FF3B30",JF=A.memo(({variant:e})=>i.jsx("div",{className:U("absolute size-2 rounded-full",{"-right-1 -top-1":e!=="iconOnly","-right-sm -top-sm ring-offset ring-2":e==="iconOnly"}),style:{backgroundColor:V6t}}));JF.displayName="NotificationBadge";const eU=A.memo(({text:e,variant:t})=>{const{openModal:n}=vt(),{trackEvent:r}=Me(),[s,a]=f.useState(!1),o=bR();f.useEffect(()=>{a(o>5&&!fp())},[o]);const l=f.useCallback(()=>{FC(),r("homepage footer download menu opened",{}),n("platformOptionsModal")},[n,r]),c=f.useMemo(()=>i.jsxs("div",{className:"relative ml-auto",children:[i.jsx(me,{icon:ph,className:"size-4"}),s&&i.jsx(JF,{variant:t})]}),[s,t]);return i.jsx(ge,{size:"small",text:t==="iconOnly"?void 0:e,trailingComponent:c,pill:t==="iconOnly",fullWidth:t!=="iconOnly",onClick:l})});eU.displayName="SideDownloadPrompt";const W6t=()=>{const{$t:e}=Q();return i.jsx(pn,{tooltipText:e({defaultMessage:"Download",id:"5q3qC0sC3r"}),className:"inline-flex",tooltipLayout:"right",asChild:!0,children:i.jsxs("div",{className:"gap-xs flex flex-col items-center [@media(max-height:680px)]:hidden",children:[i.jsx(eU,{variant:"iconOnly"}),i.jsx(L,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Install",id:"ubmFc8rrea"})})]})})},FCe=()=>{const e="sidebar-v2-enterprise-menu",{$t:t}=Q(),{organization:n}=gn({reason:e}),r=kc();return i.jsx(pn,{tooltipText:n?.display_name,tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:i.jsx(Ye,{href:`${r}/org`,className:"flex justify-center",children:n?.logo?i.jsx(Rt,{size:"medium",user:n?.logo,altText:"Logo"}):i.jsx(ge,{ariaLabel:t({defaultMessage:"Organization settings",id:"8JjaslSBQx"}),icon:bi,pill:!0,size:"small",variant:"inverted"})})})};FCe.displayName="SidebarV2EnterpriseMenu";const $6t="gov_free_year",Y6="gov",H6t=()=>{const e="sidebar-gov-badge",{isGovernmentRequestOrigin:t}=Or(),{$t:n}=Q(),r=Qe(),{hasAccessToProFeatures:s}=yt(),a=kfe({reason:e}),o=_t(),[l,c]=f.useState(!1),[u,d]=f.useState(!1),{shouldShow:m}=O1e({cueKey:"gov-badge",impressionsLimit:3,enabled:!0}),h=a.campaignId===$6t&&!s,g=r&&h,y=m&&!l?!0:void 0,v=f.useCallback(()=>{c(!0)},[]),x=f.useCallback(async()=>{if(!u){d(!0);try{const b=await pfe({reason:"sidebar-gov-badge-activation"});if(b?.status==="success")o.push(`/join/p/${Y6}/welcome`);else{const _=b?.error_code||"UNKNOWN_ERROR";o.push(`/join/p/${Y6}?error=${_}`)}}catch{o.push(`/join/p/${Y6}?error=UNKNOWN_ERROR`)}finally{d(!1)}}},[o,u]);return t?i.jsx(lo,{hoverOpen:y?void 0:!0,isOpen:y,onClose:v,sideOffset:5,forceDarkMode:!0,content:i.jsxs("div",{className:"gap-md p-sm max-w-sideBarWidthXL flex flex-col",children:[i.jsx("img",{src:"/static/images/us-gov.png",alt:"GOV",className:"h-14 w-full rounded-md object-cover"}),i.jsxs("div",{children:[i.jsx(L,{variant:"baseSemi",className:"mb-1 leading-tight",children:n({defaultMessage:"Thank you for your service!",id:"VZuM94AjHT"})}),i.jsx(L,{variant:"small",className:"leading-snug",color:"light",children:n(g?{defaultMessage:"Government users get Pro, premium models, and zero data usage.",id:"RgHwMywuQP"}:r?{defaultMessage:"Government users get premium models and zero data usage.",id:"FacxoKMcak"}:{defaultMessage:"Government visitors get premium models and zero data usage.",id:"gG23ZhCcKn"})})]}),i.jsxs("div",{className:"gap-sm flex flex-col",children:[g&&i.jsx(ge,{variant:"primary",size:"small",text:n(u?{defaultMessage:"Activating...",id:"Hg2ZHpJ5KZ"}:{defaultMessage:"Activate Pro",id:"MCY2gI+lUl"}),onClick:x,disabled:u}),i.jsx(ge,{variant:"common",size:"small",text:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),onClick:()=>window.open("https://www.perplexity.ai/hub/blog/introducing-perplexity-for-government","_blank")})]})]}),arrowClassName:"!fill-inverse [&>path:last-of-type]:stroke-borderMain/50",placement:"right",childrenClassName:"inline-flex mt-sm items-center justify-center",children:i.jsxs(z,{variant:"textColor",className:"px-sm gap-xs ring-offset relative flex cursor-pointer items-center justify-center rounded py-1 ring-1",children:[i.jsx($p,{countryCode:"US",className:"relative w-3.5"}),i.jsx(L,{variant:"tiny",color:"defaultInverted",className:"-translate-y-half relative !font-mono",children:"GOV"})]})}):null},UCe=f.memo(({isOpen:e,children:t,title:n,onPin:r,pinned:s,canPin:a,onMouseEnter:o,onMouseLeave:l,accessory:c,actions:u,appContentWrapperRef:d})=>{const{$t:m}=Q(),p=f.useMemo(()=>fh(g=>{d.current?.contains(g.target)&&(window.removeEventListener("mousemove",p),e&&l())},100,{leading:!0,trailing:!0}),[l,d,e]);f.useEffect(()=>{e&&!s?window.addEventListener("mousemove",p):window.removeEventListener("mousemove",p)},[e,s,p]),S1(()=>{window.removeEventListener("mousemove",p)});const h=Kh();return i.jsx("div",{className:"group/sidebar-menu pointer-events-none absolute inset-y-0 start-0 overflow-hidden ltr:-translate-x-px rtl:translate-x-px",style:{width:m2+(s?0:16)+Am},children:i.jsxs(z,{className:U("inset-y-0 border-transparent duration-100 dark:border-transparent","end-md absolute start-0 flex flex-col border-e pe-[20px]",{"erp-tab:pt-two pt-[10px]":s,"ease-inCubic pointer-events-none opacity-0 ltr:-translate-x-[4%] rtl:translate-x-[4%]":!e&&!s,"!border-subtlest ease-outCubic shadow-xl":e&&!s,"pointer-events-auto":e||s}),variant:"underlay",onMouseEnter:o,onMouseLeave:l,style:{paddingLeft:h?void 0:Am+12,paddingRight:h?Am+12:void 0,width:m2+Am},children:[!s&&e&&i.jsx("div",{className:"absolute inset-y-0 -end-[24px] start-0"}),i.jsxs(z,{className:"group/sidebar-menu-header relative mb-[12px] flex min-h-0 items-center justify-between border-b py-[12px]",children:[u&&e?i.jsx(Jt,{items:u,isMobileStyle:!1,placement:"bottom-start",children:i.jsxs(L,{variant:"smallBold",className:"group relative cursor-pointer select-none",children:[i.jsx("span",{className:"bg-offsetPlus -inset-x-sm -inset-y-xs absolute rounded-md opacity-0 duration-100 group-hover:opacity-100"}),i.jsxs("span",{className:"gap-xs relative flex items-center",children:[n,i.jsx(Qn,{className:"text-quietest group-hover:text-quiet size-4 opacity-0 duration-100 group-hover/sidebar-menu-header:opacity-100"})]})]})}):i.jsx(L,{variant:"smallBold",children:n}),i.jsxs("div",{className:"flex min-h-[24px] items-center",children:[i.jsx(it,{initial:!1,children:c&&i.jsx(xe.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:c})}),a&&i.jsx(Te,{size:"tiny",icon:s?Tke:Nke,onClick:r,extraCSS:"!-me-sm",toolTip:m(s?{defaultMessage:"Unpin Sidebar",id:"0ms2vDE7D8"}:{defaultMessage:"Pin Sidebar",id:"rPlnyNxMsY"}),tooltipLayout:"bottom",testId:"sidebar-pin-sidebar"})]})]}),i.jsx(it,{initial:!1,mode:"popLayout",children:i.jsx(xe.div,{initial:{opacity:0,x:h?10:-10},animate:{opacity:1,x:0},exit:{opacity:0},transition:{duration:.1,ease:hn},className:"relative flex min-h-0 flex-1 flex-col",children:i.jsx("div",{className:"scrollbar-subtle mx-[-12px] mt-[-12px] flex min-h-0 flex-1 overflow-y-auto overflow-x-hidden p-[12px]",children:i.jsx("div",{className:"w-full",children:t})})},n)})]})})});UCe.displayName="SidebarMenu";const z6t=e=>typeof e=="object"&&e!==null&&"pages"in e&&Array.isArray(e.pages)&&e.pages.every(t=>"has_more"in t&&typeof t.has_more=="boolean"&&"next_cursor"in t&&(typeof t.next_cursor=="string"||t.next_cursor===null)&&"notifications"in t&&Array.isArray(t.notifications)&&t.notifications.every(n=>typeof n=="object"&&n!==null&&"notification_id"in n&&typeof n.notification_id=="string"&&"type"in n&&typeof n.type=="string"&&"is_read"in n&&typeof n.is_read=="boolean")),G6t=({enabled:e=!0,reason:t})=>{const n=Cc({enabled:e,queryKey:Gc(),queryFn:async({pageParam:h})=>(await ne.GET("/rest/notifications/in-app",t,{params:{query:{cursor:h}}})).data,getNextPageParam:h=>!h||h.notifications.length===0?null:h.next_cursor,initialPageParam:""}),{data:r,error:s,isError:a,refetch:o,isLoading:l,isFetching:c,hasNextPage:u,fetchNextPage:d,isFetchingNextPage:m}=n,p=f.useMemo(()=>r?.pages.flatMap(h=>h?.notifications??[])??[],[r]);return f.useMemo(()=>({refetch:o,error:s,isError:a,isLoading:l,isFetching:c,fetchNextPage:d,isFetchingNextPage:m,hasNextPage:u,notifications:p}),[o,s,a,p,u,d,m,l,c])};function w5({reason:e}){const t=mt(),n=bt({mutationFn:o=>ne.POST("/rest/notifications/in-app/bulk-read",e,{body:{notification_ids:o?.notificationIds}}),onMutate:()=>{t.setQueryData(Gc(),o=>z6t(o)?{...o,pages:o?.pages.map(l=>({...l,notifications:l.notifications.map(c=>({...c,is_read:!0}))}))}:o)},onSuccess:()=>{t.invalidateQueries({queryKey:Gc()})}}),r=bt({mutationFn:o=>ne.POST("/rest/notifications/in-app/{notification_id}/read",e,{params:{path:{notification_id:o.notificationId}}}),onSuccess:()=>{t.invalidateQueries({queryKey:Gc()})}}),s=bt({mutationFn:o=>ne.DELETE("/rest/notifications/in-app/bulk-delete",e,{body:{notification_ids:[o.notificationId]}}),onSuccess:()=>{t.invalidateQueries({queryKey:Gc()})}}),a=bt({mutationFn:()=>ne.DELETE("/rest/notifications/in-app/read",e),onSuccess:()=>{t.invalidateQueries({queryKey:Gc()})}});return f.useMemo(()=>({markAllAsRead:n,markAsRead:r,markAsDeleted:s,markAllReadAsDeleted:a}),[n,r,s,a])}const q6t=(e,t)=>{const{value:n,loading:r}=At({flag:"app-notifications-polling",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},K6t=SDe(5),BCe=({reason:e})=>{const{variation:t}=q6t(!1),n=$e({queryKey:xVe(),queryFn:async()=>(await ne.GET("/rest/notifications/in-app/unread-count",e)).data.unread_count,staleTime:1e3*60*5,refetchInterval:()=>t?K6t:!1});return f.useMemo(()=>{const{data:r,...s}=n;return{count:r??0,...s}},[n])},VCe=f.createContext(null),Y6t=({children:e})=>{const{openModal:t}=vt(),[n,r]=f.useState(!1),[s,a]=f.useState(null),[o,l]=f.useState(null),c=f.useMemo(()=>s===null&&o===null,[s,o]),u=f.useCallback(g=>o===g,[o]),d=f.useCallback(()=>{r(!0)},[]),m=f.useCallback(g=>{c&&(r(!1),g?.())},[c]),p=f.useCallback(()=>{r(!n)},[n]),h=f.useCallback((g,y)=>{a(g),t(g,{...y,onClose:(...v)=>{y?.onClose?.(...v),a(null)}})},[t]);return i.jsx(VCe.Provider,{value:{isOpen:n,isMenuOpen:u,setOpenMenu:l,open:d,close:m,toggle:p,openModal:h},children:e})},Ic=()=>{const e=f.useContext(VCe);if(!e)throw new Error("useSidebarNotifications must be used within a SidebarNotificationsProvider");return e},WCe=({visible:e})=>e?i.jsx(z,{variant:"super",className:U("!ring-offset group-hover:!ring-offsetPlus pointer-events-none size-2 rounded-full opacity-0 ring-2 transition-opacity",{"opacity-100":e})}):null,$Ce=()=>{const{$t:e}=Q(),{trackEvent:t}=Me(),{toggle:n,isOpen:r}=Ic(),{count:s}=BCe({reason:"SidebarNotificationsButton"}),a=f.useCallback(()=>{r||t("inbox opened",{unreadCount:s}),n()},[r,t,s,n]);return i.jsx("div",{className:"flex w-full flex-col items-center justify-center",children:i.jsx("div",{className:"flex flex-col items-center justify-center",children:i.jsx(pn,{tooltipText:e({defaultMessage:"Notifications",id:"NAidKbB0vi"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:16,asChild:!0,children:i.jsxs("div",{className:"group relative size-9 rounded-full",children:[i.jsx(Te,{icon:Ef,onClick:a,pill:!0,extraCSS:"!size-full dark:!text-foreground dark:[&_svg]:opacity-[0.55] dark:group-hover:[&_svg]:opacity-100 dark:[&_svg]:duration-normal",testId:"sidebar-new-thread",size:"large"}),i.jsx(HCe,{})]})})})})};$Ce.displayName="SidebarNotificationsButton";const HCe=()=>{const{count:e,refetch:t}=BCe({reason:"SidebarNotificationsButtonCounter"}),{isOpen:n}=Ic(),r=f.useRef(null),[s,a]=f.useState(null);return f.useEffect(()=>{if(n){a(!1),r.current&&clearTimeout(r.current);return}return a(o=>o===null?e>0:(r.current=setTimeout(()=>{a(e>0)},1e3),o)),()=>{r.current&&clearTimeout(r.current)}},[e,n]),f.useEffect(()=>{n&&t()},[n,t]),i.jsx("div",{className:"right-xs top-xs translate-y-two -translate-x-three pointer-events-none absolute",children:i.jsx(WCe,{visible:!!s})})};HCe.displayName="SidebarNotificationsButtonCounter";function nR({menuId:e,items:t,menu:n,children:r,onClose:s,onOpen:a}){const o=Ls(),{isMenuOpen:l,setOpenMenu:c}=Ic(),u=f.useCallback(()=>{c(e),a?.()},[e,c,a]),d=f.useCallback(()=>{l(e)&&c(null)},[e,c,l]);return f.useEffect(()=>{l(e)||s?.()},[l,e,s]),n?n({onOpen:u,onClose:d}):i.jsx(Jt,{isOpen:l(e),items:t??[],isMobileStyle:o,boxProps:{className:"shrink-0"},onOpen:u,onClose:d,children:r??i.jsx(Te,{size:"tiny",icon:du})})}const Q6t=e=>[e.deleteNotification],zCe=({notification:e,focused:t,onOpen:n,onClose:r,getMenuItems:s=Q6t})=>{const{$t:a}=Q(),{markAsDeleted:o}=w5({reason:"SidebarNotificationsListItemMenu"}),l=f.useMemo(()=>({type:"default",text:a({defaultMessage:"Delete notification",id:"+Nk8iq3V1o"}),icon:uu,onClick:()=>{o.mutate({notificationId:e.notification_id})}}),[o,a,e.notification_id]),c=f.useMemo(()=>s({deleteNotification:l}),[s,l]);return i.jsx("div",{className:U("pointer-events-auto col-start-1 row-start-1 flex items-center justify-center justify-self-end opacity-0 group-hover/notification-list-item:opacity-100",{"opacity-100":t}),children:i.jsx(nR,{menuId:e.notification_id,items:c,onOpen:n,onClose:r})})};zCe.displayName="SidebarNotificationsListItemMenu";const X6t=(e,t)=>{const r=Date.now()-t,s=Math.floor(r/6e4),a=Math.floor(s/60);return s<1?e.formatNumber(1,{style:"unit",unit:"minute",unitDisplay:"narrow"}):s<60?e.formatNumber(s,{style:"unit",unit:"minute",unitDisplay:"narrow"}):D7(new Date(t))?e.formatNumber(a,{style:"unit",unit:"hour"}):_De(new Date(t))?e.formatDate(new Date(t),{month:"short",day:"numeric"}):e.formatDate(new Date(t),{year:"numeric",month:"short",day:"numeric"})},Z6t=({notification:e,className:t,focused:n})=>{const r=Q(),s=f.useMemo(()=>X6t(r,e.created_at_ms),[r,e.created_at_ms]);return i.jsxs("div",{className:U("col-start-1 row-start-1 flex items-center justify-end gap-1 text-nowrap group-hover/notification-list-item:opacity-0",t,{"opacity-0":n}),children:[i.jsx(L,{variant:"tinyRegular",color:"light",children:s}),i.jsx(WCe,{visible:!e.is_read})]})},Nx=({notification:e,getMenuItems:t,children:n})=>{const[r,s]=f.useState(!1),[a,o]=f.useState(!1),l=f.useCallback(()=>{s(!0)},[]),c=f.useCallback(()=>{s(!1)},[]);return i.jsxs(z,{variant:r||a?"subtler":"transparent",className:"group/notification-list-item grid grid-cols-[1fr_max-content] grid-rows-1 gap-2 rounded-lg p-2",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[i.jsx(GCe,{notification:e,className:"col-span-full row-start-1",children:n}),i.jsxs("div",{className:"col-start-2 row-start-1 grid grid-cols-1 grid-rows-1 items-center",children:[i.jsx(Z6t,{notification:e,focused:r}),i.jsx(zCe,{notification:e,focused:r,getMenuItems:t,onOpen:l,onClose:c})]})]})};Nx.displayName="SidebarNotificationsListItemContainer";const GCe=({notification:e,className:t,children:n})=>{const{close:r}=Ic(),{trackEvent:s}=Me(),{markAsRead:a}=w5({reason:"SidebarNotificationsListItemContainer"}),o=f.useCallback(c=>{s("inbox notification clicked",{notificationId:e.notification_id,notificationType:e.type,wasUnread:!e.is_read,deeplinkPath:e.deeplink_path||void 0}),!(c.metaKey||c.ctrlKey)&&e.deeplink_path&&r(),!e.is_read&&a.mutate({notificationId:e.notification_id})},[s,e.notification_id,e.type,e.is_read,e.deeplink_path,r,a]),l=f.useMemo(()=>U("grid gap-2 text-left grid-cols-subgrid",t),[t]);return e.deeplink_path?i.jsx(Ye,{href:e.deeplink_path,className:l,onClick:o,children:i.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})}):i.jsx("button",{type:"button",className:l,onClick:o,children:i.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})})};GCe.displayName="SidebarNotificationsListItemAction";const Ax=({title:e})=>i.jsx(L,{variant:"small",className:"line-clamp-1 text-left",children:e});Ax.displayName="SidebarNotificationsListItemTitle";const jx=({primaryIcon:e,secondaryIcon:t})=>i.jsxs("div",{className:"relative flex size-9 shrink-0 items-center",children:[i.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-full",children:i.jsx(me,{icon:e,size:"md"})}),i.jsx("div",{className:"bg-base absolute bottom-0 right-0 flex size-4 items-center justify-center rounded-full",children:i.jsx(me,{icon:t,size:"xs"})})]});jx.displayName="SidebarNotificationsListItemIcon";const C5=({items:e})=>{const t=i.jsx("span",{className:"mx-1 inline-block size-0.5 shrink-0 -translate-y-0.5 bg-current"});return i.jsx(L,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate",children:e.map((n,r)=>i.jsxs(f.Fragment,{children:[r>0&&t,n]},r))})};C5.displayName="SidebarNotificationsListItemMeta";const J6t=({notification:e})=>{const{$t:t}=Q(),{openToast:n}=xn(),{openModal:r}=Ic(),s=f.useCallback(a=>[{type:"default",text:t({defaultMessage:"Edit alert",id:"84mzvWHJ9O"}),icon:wc,onClick:async()=>{const l=await LE({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});if(!l){n(t({defaultMessage:"Can not edit alert. Alert has been deleted.",id:"ZXF6i2Ca2v"}),"error");return}r("financeAlertModal",{task:l})}},a.deleteNotification],[t,e.metadata.task_id,r,n]);return i.jsxs(Nx,{notification:e,getMenuItems:s,children:[i.jsx(jx,{primaryIcon:Gv,secondaryIcon:Ef}),i.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[i.jsx(Ax,{title:e.title}),i.jsx(C5,{items:[t({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),e.body]})]})]})},eNt=({notification:e})=>{const{$t:t}=Q(),{openToast:n}=xn(),{openModal:r}=Ic(),s=_t(),{variation:a,loading:o}=x5(!1),l=f.useMemo(()=>U7(e.metadata.model_preference)??ce.DEFAULT,[e.metadata.model_preference]),c=Goe(l),u=f.useCallback(async h=>{const g=await LE({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});return g||(n(h,"error"),null)},[e.metadata.task_id,n]),d=f.useCallback(async()=>{const h=await u(t({defaultMessage:"Can not edit task. Task has been deleted.",id:"AsFehDyYGj"}));if(!h)return;const g=y=>{y==="updated"&&n(t({defaultMessage:"Task edited",id:"18F/N84T3b"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))};!o&&a?r("automationModal",{initial:h,source:"notifications_panel",initialConfiguration:lie({selectedTask:h}),onSuccess:g}):r("scheduledTaskModal",{initial:h,source:"notifications_panel",onSuccess:g})},[u,r,a,o,n,t,s]),m=f.useCallback(async()=>{const h=await u(t({defaultMessage:"Can not turn off task. Task has been deleted.",id:"GqnRiHY3AK"}));if(h)try{await h8({taskId:h.id,payload:{status:"PAUSED"},reason:"SidebarNotificationsListItemScheduledTaskComplete"}),n(t({defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))}catch(g){ee.error(g),n(t({defaultMessage:"Failed to turn off task",id:"0sPa5XFHCj"}),"error")}},[u,n,t,s]),p=f.useCallback(h=>{const g={type:"default",text:t({defaultMessage:"Turn off task",id:"+H7RughJHn"}),icon:Ake,onClick:m},y={type:"default",text:t({defaultMessage:"Edit task",id:"dsTLW1Kx6B"}),icon:wc,onClick:d};return[g,y,h.deleteNotification]},[t,m,d]);return i.jsxs(Nx,{notification:e,getMenuItems:p,children:[i.jsx(jx,{primaryIcon:c,secondaryIcon:zC}),i.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[i.jsx(Ax,{title:e.title}),i.jsx(C5,{items:[t(Br[F7(l)].name),e.body]})]})]})},tNt=({notification:e})=>{const{$t:t}=Q(),n=f.useMemo(()=>U7(e.metadata.model_preference)??ce.DEFAULT,[e.metadata.model_preference]),r=f.useMemo(()=>F7(n),[n]),s=Goe(n);return i.jsxs(Nx,{notification:e,children:[i.jsx(jx,{primaryIcon:s,secondaryIcon:Rr}),i.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[i.jsx(Ax,{title:e.title}),i.jsx(C5,{items:[t(Br[r].name),e.body]})]})]})},qCe=({notification:e})=>{switch(e.type){case"SCHEDULED_TASK_COMPLETE":return i.jsx(eNt,{notification:e});case"THREAD_COMPLETE":return i.jsx(tNt,{notification:e});case"FINANCE_ALERT":return i.jsx(J6t,{notification:e});default:return i.jsx(nNt,{notification:e})}},nNt=({notification:e})=>i.jsxs(Nx,{notification:e,children:[i.jsx(jx,{primaryIcon:Ef,secondaryIcon:Rr}),i.jsxs("div",{className:"flex flex-1 flex-col",children:[i.jsx(Ax,{title:e.title}),i.jsx(L,{variant:"tiny",color:"light",className:"line-clamp-1",children:e.body})]})]});qCe.displayName="SidebarNotificationsListItem";const KCe=()=>{const{isOpen:e}=Ic(),{notifications:t,refetch:n,isError:r,isLoading:s,isFetching:a,hasNextPage:o,fetchNextPage:l,isFetchingNextPage:c}=G6t({enabled:e,reason:"SidebarNotificationsList"}),u=mt(),{ref:d,isIntersecting:m}=Yue({threshold:.5});f.useEffect(()=>{m&&o&&!c&&l()},[m,o,c,l]);const p=f.useCallback(()=>{u.setQueryData(Gc(),h=>{if(!(!h||h.pages.length===0))return{pages:[h.pages[0]],pageParams:[h.pageParams[0]]}})},[u]);return f.useEffect(()=>{e&&(p(),n())},[e,p,n]),s||r&&a?i.jsx("div",{className:"flex items-center justify-center p-4",children:i.jsx(as,{size:16})}):r?i.jsx(sNt,{refetch:n}):t.length===0?i.jsx(rNt,{}):i.jsxs("div",{className:"scrollbar-subtle pt-xs overflow-y-auto",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[t.map(h=>i.jsx(qCe,{notification:h},h.notification_id)),c&&i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(as,{size:16})})]}),i.jsx("div",{ref:d})]})};KCe.displayName="SidebarNotificationsList";const rNt=()=>{const{$t:e}=Q();return i.jsxs(L,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 p-4 opacity-70",children:[i.jsx(me,{icon:jke,size:"2xl"}),i.jsx("span",{className:"w-36 text-center",children:e({defaultMessage:"Your notifications will appear here",id:"byRgJ1ceG3"})})]})},sNt=({refetch:e})=>{const{$t:t}=Q();return i.jsxs(L,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 pb-4",children:[i.jsx(me,{icon:HR,size:"2xl",className:"opacity-70"}),i.jsx("span",{className:"mb-2 w-40 text-center opacity-70",children:t({defaultMessage:"There was an error loading your notifications",id:"CSvXfEOB3Y"})}),i.jsx(ge,{size:"small",variant:"border",text:t({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:()=>{e()}})]})};function aNt({source:e,onOpen:t,onClose:n,openModal:r,children:s}){const{$t:a}=Q(),o=Ls(),{openModal:l}=vt(),{hasActiveSubscription:c}=yt(),{variation:u,loading:d}=x5(!1),{variation:m,loading:p}=oCe(!1),h=r??l,g=[{type:"default",text:a({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:zd,onClick:()=>{!d&&u?h("automationModal",{source:e,initialConfiguration:z7(c)}):h("scheduledTaskModal",{source:e})}},{type:"default",text:a({defaultMessage:"Price alert",id:"XMapyUiPpV"}),icon:Ef,onClick:()=>{!p&&m?h("automationModal",{source:e,initialConfiguration:cie()}):h("financeAlertModal",{})}}];return i.jsx(Jt,{items:g,isMobileStyle:o,boxProps:{className:"shrink-0"},onOpen:t,onClose:n,children:s??i.jsx(ge,{variant:"border",size:"small",icon:rr})})}const oNt="notifications-panel-header-menu",iNt="notifications-panel-header-create-task-menu",YCe=()=>{const{$t:e}=Q(),{openModal:t}=Ic(),{markAllReadAsDeleted:n}=w5({reason:"SidebarNotificationsPanelHeader"}),r=[{type:"default",text:e({defaultMessage:"Delete all read",id:"CpNQrgahgD"}),icon:uu,onClick:()=>{n.mutate()}}];return i.jsxs(z,{className:"gap-md px-sm pt-xs pb-sm -mx-xs flex items-center justify-between border-b",children:[i.jsx("div",{className:"ml-xs flex items-center gap-1",children:i.jsx(L,{variant:"smallBold",children:e({defaultMessage:"Notifications",id:"NAidKbB0vi"})})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(nR,{menuId:oNt,items:r}),i.jsx(nR,{menuId:iNt,menu:({onOpen:s,onClose:a})=>i.jsx(aNt,{source:"notifications_panel",onOpen:s,onClose:a,openModal:t,children:i.jsx(Te,{size:"tiny",icon:zd,toolTip:e({defaultMessage:"Schedule a notification",id:"7Zbhtucuv7"})})})})]})]})};YCe.displayName="SidebarNotificationsPanelHeader";const QCe=({ref:e})=>i.jsx("div",{ref:e,className:"group/sidebar-notifications max-h-[50vh] w-[400px]",children:i.jsxs("div",{className:"grid h-full grid-cols-1 grid-rows-[min-content_1fr]",children:[i.jsx(YCe,{}),i.jsx(KCe,{})]})});QCe.displayName="SidebarNotifications";const XCe=({ref:e})=>{const t="sidebar-notifications",{variation:n,loading:r}=H2e(!1),s=Qe(),{isOpen:a,close:o}=Ic(),l=Kh(),{markAllAsRead:c}=w5({reason:t}),u=f.useCallback(()=>{o(()=>{c.mutate()})},[c,o]);return r||!n||!s?null:i.jsx("div",{className:"relative flex flex-col items-center justify-center",children:i.jsx(lo,{isOpen:a,onClose:u,placement:l?"top-end":"top-start",content:i.jsx(QCe,{ref:e}),contentClassName:"inline-flex",childrenClassName:"inline-flex w-full",sideOffset:5,children:i.jsx($Ce,{})})})};XCe.displayName="SidebarNotifications";const ZCe=f.memo(({icon:e,selected:t,hovered:n,iconSize:r=24,showBadge:s=!1,className:a})=>i.jsxs(z,{className:"grid size-[40px] place-items-center",children:[i.jsx(z,{variant:"offsetPlus",className:U("size-[90%] rounded-md duration-100 [grid-area:1/-1] group-hover:opacity-100",{"opacity-0":!t&&!n},a)}),i.jsxs("div",{className:"relative [grid-area:1/-1]",children:[i.jsx(me,{icon:e,size:r,className:U("duration-100 group-hover:scale-110",{"text-foreground":t,"text-quiet":!t,"scale-110":t||n})}),s&&i.jsx(JF,{variant:"iconOnly"})]})]}));ZCe.displayName="SidebarTabButton";const JCe=f.memo(({icon:e,title:t,selected:n,hovered:r,href:s,onHover:a,onLeave:o,onClick:l,showBadge:c=!1})=>i.jsxs(Ye,{href:s,"data-testid":`sidebar-${t.toLowerCase()}`,className:"p-sm group flex w-full flex-col items-center justify-center gap-0.5",onMouseEnter:a,onMouseLeave:o,onClick:l,children:[i.jsx(ZCe,{icon:e,selected:n,hovered:r,showBadge:c}),i.jsx(L,{variant:"micro",color:n?"default":"light",className:U("line-clamp-2 w-full text-ellipsis text-center leading-[1.1]",{"font-medium":n}),children:t})]}));JCe.displayName="SidebarTab";const eSe=()=>{const{$t:e}=Q(),{trackEvent:t}=Me(),n=co(),r=f.useCallback(()=>{t("sidebar pro upsell clicked"),n({origin:Ie.SIDEBAR_PRO_UPSELL})},[t,n]);return i.jsxs("button",{className:"gap-xs group inline-flex appearance-none flex-col items-center [@media(max-height:680px)]:hidden",onClick:r,"data-testid":"sidebar-upgrade-button",children:[i.jsx(z,{variant:"offsetPlus",className:"flex size-8 items-center justify-center rounded-full duration-100 group-hover:opacity-80",children:i.jsx(L,{color:"default",children:i.jsx(no,{className:"size-4"})})}),i.jsx(L,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})]})};eSe.displayName="SidebarUpgradeButton";const lNt=({category:e})=>{const{$t:t}=Q();let n="/spaces";return e==="invited"?n="/spaces#invites":e==="organization"?n="/spaces#organization":(e==="private"||e==="saved"||e==="shared")&&(n="/spaces#my-spaces"),i.jsx(Ye,{href:n,className:"m-0 w-full border-none bg-transparent p-0 text-left no-underline",children:i.jsx(L,{variant:"tinyRegular",color:"light",className:"duration-200 hover:opacity-60",children:t({defaultMessage:"View All",id:"wbcwKddwLa"})})})},tSe=A.memo(({item:{title:e,slug:t,emoji:n},sidebarOpen:r})=>{const{setMobileSidebarOpen:s}=Ac(),a=Nt(),o=`/spaces/${t}`,l=f.useCallback(()=>{s(!1)},[s]);return i.jsx(gs,{href:o,text:e,fadeOut:!0,selected:a===o,sidebarOpen:r,onClick:l,icon:n?i.jsx("div",{className:"flex size-[12px] items-center justify-center",children:i.jsx(Ru,{unified:n,size:"tiny"})}):i.jsx("div",{className:"flex size-[12px] items-center justify-center",children:i.jsx(me,{icon:Ca,className:"text-quiet size-4 shrink-0"})})})});tSe.displayName="SpaceHistoryItem";const hee={organization:{defaultMessage:"Organization",id:"K56Dims7Up"},private:{defaultMessage:"Private",id:"viXE3205/2"},shared:{defaultMessage:"Shared",id:"kWI6zXRaHY"},saved:{defaultMessage:"Saved",id:"fsB/4pdUqN"},invited:{defaultMessage:"Invites",id:"Wy+IdbkBFc"}},cNt={organization:"/spaces#organization",private:"/spaces#my-spaces",shared:"/spaces#my-spaces",saved:"/spaces#my-spaces",invited:"/spaces#invites"};function uNt({category:e,accessory:t,sidebarOpen:n,isLastCategory:r}){const s="spaces-sidebar-section",{$t:a}=Q(),{data:o,isLoading:l}=OGe({category:e,reason:s}),c=f.useMemo(()=>o?.pages.flatMap(u=>u).filter(u=>u!==void 0)??le,[o?.pages]);return l||c.length===0?null:i.jsxs(i.Fragment,{children:[i.jsx(rh,{href:cNt[e]||"/spaces",text:a(hee[e]||hee.private),accessory:t}),i.jsx(Lv,{show:!0,data:c,type:"space_navbar_item",HistoryComponent:({item:u,position:d})=>i.jsx(tSe,{item:u,position:d,sidebarOpen:n}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5"}),c[c.length-1]?.has_next_page&&i.jsx(lNt,{category:e}),!r&&i.jsx(jv,{})]})}const nSe=A.memo(({item:{title:e,slug:t,emoji:n,user_permission:r},sidebarOpen:s})=>{const{setMobileSidebarOpen:a}=Ac(),o=`/spaces/${t}`,l=f.useCallback(()=>{a(!1)},[a]),c=Ap(r),u=Nt();return i.jsx(gs,{href:o,text:e,fadeOut:!0,selected:u===o,sidebarOpen:s,onClick:l,icon:c?i.jsx("div",{className:"flex size-[12px] items-center justify-center",children:i.jsx(me,{icon:YR,className:"text-quiet size-4 shrink-0"})}):n?i.jsx("div",{className:"flex size-[12px] items-center justify-center",children:i.jsx(Ru,{unified:n,size:"tiny"})}):i.jsx("div",{className:"flex size-[12px] items-center justify-center",children:i.jsx(me,{icon:Ca,className:"text-quiet size-4 shrink-0"})})})});nSe.displayName="CollectionHistoryItemV2";const gee="pb-lg flex flex-col gap-[12px]",rSe=f.memo(({sidebarOpen:e})=>{const t="spaces-sidebar",{data:n,isLoading:r}=PGe({reason:t}),s=Qe(),{$t:a}=Q(),o=xi(),{openModal:l}=vt(),c=rO(),u=Array.isArray(o?.slug)?o.slug[0]:o?.slug,{collection:d}=kl({collectionSlug:u,reason:t}),{handleCreateNewSpace:m}=nO(),{templateSpace:p}=iue({collectionSlug:u??"",reason:t}),h=f.useCallback(()=>{l("spaceCreate",{existingCollection:null,onCreate:null})},[l]),g=f.useCallback(()=>{c?m():h()},[c,m,h]),{openVisitorLoginUpsell:y}=Xn({enabled:!s}),x=!(n!==void 0&&((n.organization_spaces?.length??0)>0||(n.saved_spaces?.length??0)>0||(n.private_spaces?.length??0)>0||(n.invited_spaces?.length??0)>0||(n.shared_spaces?.length??0)>0)),b=gG.filter(_=>{const w=(()=>{switch(_){case"private":return n?.private_spaces;case"shared":return n?.shared_spaces;case"saved":return n?.saved_spaces;case"organization":return n?.organization_spaces;case"invited":return n?.invited_spaces;default:return[]}})();return w&&w.length>0});return x?i.jsxs("div",{className:gee,children:[i.jsx(gs,{href:"/spaces/templates",text:a({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),icon:i.jsx(me,{icon:Ca,size:"sm"}),sidebarOpen:e}),r?i.jsx(mC,{}):i.jsx(gs,{icon:rr,onClick:_=>{s?(_.preventDefault(),g()):(_.preventDefault(),y({title:a({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Ie.SPACES_PAGE}))},text:a({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),deemphasized:!0,testId:"create-space-button",sidebarOpen:e})]}):i.jsxs("div",{className:gee,children:[i.jsxs(Av,{children:[i.jsx(gs,{href:"/spaces/templates",text:a({defaultMessage:"Templates",id:"A3ptulOTB3"}),icon:i.jsx(me,{icon:Rke}),sidebarOpen:e}),!!p&&d&&i.jsx(nSe,{item:d,position:0,sidebarOpen:e}),i.jsx(gs,{onClick:g,text:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:rr,sidebarOpen:e,testId:"create-space-button"})]}),i.jsx(jv,{}),r?i.jsx(mC,{}):gG.map(_=>i.jsx(uNt,{category:_,sidebarOpen:e,accessory:_==="private"?i.jsx(Te,{toolTip:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:rr,size:"tiny",extraCSS:"-mr-sm",onClick:g,testId:"create-space-button"}):void 0,isLastCategory:_===b[b.length-1]},_))]})});rSe.displayName="SpacesSidebar";const sSe=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[s,a]=f.useState(""),o=f.useCallback(()=>{r(!0),setTimeout(()=>{r(!1)},2e3)},[]),l=f.useCallback(()=>{a("Brandmark copied to clipboard"),t(!1),o()},[o]),c=f.useCallback(()=>{a("Logo copied to clipboard"),t(!1),o()},[o]),u=f.useCallback(()=>{a("Brand kit downloading..."),t(!1),o()},[o]),d=f.useCallback(()=>{t(!1)},[]);return f.useMemo(()=>({toastCopy:s,toastVisible:n,isBrandDropdownOpen:e,setBrandDropdownOpen:t,handleBrandCopy:l,handleLogoCopy:c,handleDownload:u,handlePopoverClose:d}),[l,u,c,d,e,s,n])},dNt=he(()=>ae(()=>import("./BrandPopoverContent-Bj3aA7Gb.js"),__vite__mapDeps([129,3,1,5,6,4])),{loading:()=>i.jsx("div",{className:"w-[200px]",children:i.jsxs(z,{className:"gap-sm p-sm flex flex-col",children:[i.jsx(ko,{noLines:!0,size:"tiny"}),i.jsx(ko,{noLines:!0,size:"tiny"}),i.jsx(ko,{noLines:!0,size:"tiny"})]})})}),fNt=A.memo(()=>i.jsx("svg",{className:"h-auto w-[14px]",width:"278",height:"330",viewBox:"0 0 278 330",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126.99 83.0617L37.008 0.156738V98.524H0V240.866H37.11V329.64L126.99 250.476V325.948H150.506V249.154L241.005 328.664V240.866H278V98.524H240.891V0.156755L150.506 83.4328V4.1913H126.99V83.0617ZM109.019 121.826L37.088 187.144V217.564H23.5159V121.826H109.019ZM151.01 137.113L217.396 197.396V240.866H217.489V276.862L151.01 218.454V137.113ZM241.005 186.421L169.711 121.826H254.484V217.564H241.005V186.421ZM60.625 197.477L126.99 137.199V219.3L60.625 277.752V197.477ZM168.661 98.524L217.375 53.6415V98.524H168.661ZM60.524 53.6416L109.238 98.524H60.524V53.6416Z",fill:"currentColor"})}));fNt.displayName="Brandmark";const tU=A.memo(({children:e,onLogoCopy:t,onBrandmarkCopy:n,onDownload:r,...s})=>{const a=f.useMemo(()=>i.jsx(dNt,{onLogoCopy:t,onBrandmarkCopy:n,onDownload:r}),[n,r,t]);return i.jsx(lo,{content:a,placement:"right-start",...s,children:e})});tU.displayName="BrandPopover";const mNt=()=>{const{isMax:e}=yt(),{isEnterprise:t,isFetching:n}=oP({reason:"sidebar-v2"}),s=Qe()&&!n&&!t;return f.useMemo(()=>s&&!e,[e,s])},pNt=e=>{switch(e?.split("/").slice(1)?.[0]??""){case"":case"search":case"page":return"home";case"spaces":case"collections":return"spaces";case"discover":return"discover";default:return"home"}},aSe=f.memo(({appContentWrapperRef:e,minimalMode:t})=>{const n="sidebar-v2",[r,s]=f.useState(null),a=Nt(),o=f.useRef(null),l=f.useRef(null),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),m=f.useRef(null),{isSidebarPinned:p,actions:h}=dn(),{isIncognito:g}=oa({reason:n}),y=f.useRef(null),[v,x]=f.useState(null),[b,_]=f.useState(!1),w=_t(),C=Qe(),{openVisitorLoginUpsell:S}=Xn({enabled:!C}),E=u_t({reason:n}),k=Dt()?.get("spaces_created")==="true",T=f.useRef(null),j=f.useRef(null),[R,O]=f.useState(!1),[P,N]=f.useState(!1),I=p&&!t,{setBrandDropdownOpen:D,handleBrandCopy:F,handleDownload:B,handleLogoCopy:V,isBrandDropdownOpen:$,handlePopoverClose:G,toastCopy:X,toastVisible:Y}=sSe(),W=rn(),{device:{isWindowsApp:H}}=Et(),{handleShowPanel:Z}=Af(),{shouldShowLossAversionModal:re,handleOpenLossAversion:q}=Yh(),{isEnterprise:J}=oP({reason:"sidebar-v2"}),te=Be=>{Be.button===2&&(Be.preventDefault(),D(!0))},se=Be=>{l.current=setTimeout(()=>{s(Be)},100),o.current&&clearTimeout(o.current),d.current&&clearTimeout(d.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},de=v||pNt(a),{$t:fe}=Q(),ve=()=>{l.current&&clearTimeout(l.current),o.current=setTimeout(()=>{s(null)},500)},ue=()=>{h.setIsSidebarPinned(!p)},ie=f.useCallback(()=>{s(null),_(!1)},[s,_]),be=()=>{o.current&&clearTimeout(o.current),d.current&&clearTimeout(d.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},Se=()=>{l.current&&clearTimeout(l.current),c.current=setTimeout(()=>{s(null)},150),d.current=setTimeout(()=>{_(!1)},150)},Ce=f.useMemo(()=>{if(r||b){const Be=r??de;return y.current=Be,Be}return y.current&&!I?(setTimeout(()=>{y.current=null},500),y.current):I||b?de:"home"},[r,de,I,b]),ke=f.useCallback(()=>{if(ie(),H)Z();else if(re)q({args:{callback:()=>{w.push("/")},origin:Ie.NEW_THREAD_BUTTON}});else{w.push("/");const Be=document.getElementById("ask-input");Be&&Be.focus()}},[re,q,w,H,Z,ie]);f.useEffect(()=>{x(null)},[a]);const Re=r!==null||I||b,je=f.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{ie()},1e3)},[ie]),ct=f.useMemo(()=>[{id:"home",title:fe({defaultMessage:"Home",id:"ejEGdxSUGs"}),icon:une,menuComponent:i.jsx(P6t,{isOpen:Re,onCreateClick:ie,onDeleteThreadOrBookmark:je,isConfiguring:P,setIsConfiguring:N}),href:"/",actions:[{text:fe({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),onClick:()=>{N(!0)},show:!0,type:"default",size:Wt.small,icon:vw}]},{id:"discover",title:fe({defaultMessage:"Discover",id:"cE4HfwyEyr"}),icon:dne,accessoryIcon:vw,accessoryClick:Be=>{C?O(!0):(Be.preventDefault(),S({title:fe({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:Ie.DISCOVER_TOPICS}))},accessoryTooltip:fe({defaultMessage:"Personalize Discover",id:"d0oRgWBA8Q"}),href:"/discover",menuComponent:i.jsx(wxe,{isConfiguring:R,setConfiguring:O,sidebarOpen:Re})},{id:"spaces",title:fe({defaultMessage:"Spaces",id:"ZMoczsYew9"}),icon:Ca,menuComponent:i.jsx(rSe,{sidebarOpen:Re}),href:E,requireLogin:!0,showBadge:k}],[R,O,fe,C,S,Re,ie,je,P,N,E,k]),tt=f.useMemo(()=>ct.find(Be=>Be.id===Ce),[Ce,ct]),ut=Be=>{const Oe=T.current&&T.current.contains(Be.target);if(Oe){Ue();return}j.current&&j.current.contains(Be.target)&&!Oe&&we(Be)},we=Be=>{d.current&&clearTimeout(d.current),!(T.current&&T.current.contains(Be.target))&&(u.current=setTimeout(()=>{_(!0)},100),m.current&&clearTimeout(m.current))},Ue=()=>{u.current&&clearTimeout(u.current),d.current=setTimeout(()=>{_(!1)},100)},Ot=f.useCallback(Be=>{(Be.metaKey||Be.ctrlKey)&&Be.key===";"&&(Be.preventDefault(),h.setIsIncognito(!g))},[h,g]);f.useEffect(()=>(document.addEventListener("keydown",Ot),()=>{document.removeEventListener("keydown",Ot)}),[Ot]);const pt=mNt(),Mt=!t&&!H&&!W&&C,qe=Kh();return i.jsxs(z,{variant:"transparent",className:U("group/sidebar relative z-10 hidden min-h-0 flex-none flex-row-reverse md:flex",{"duration-100":t}),children:[t&&i.jsx(z,{variant:"background",className:"absolute inset-y-0 -right-px left-0"}),i.jsx(UCe,{isOpen:Re,title:tt?.title??"closed",onPin:ue,pinned:I,onMouseEnter:be,onMouseLeave:Se,appContentWrapperRef:e,actions:tt?.actions,canPin:!t,accessory:tt?.accessoryIcon&&i.jsx(Te,{icon:tt.accessoryIcon,onClick:tt.accessoryClick,size:"tiny",toolTip:tt.accessoryTooltip,tooltipLayout:"bottom"}),children:tt?.menuComponent}),i.jsxs(z,{ref:j,variant:"transparent",style:{width:Am},className:"py-md scrollbar-none relative flex h-full flex-col items-center overflow-y-auto overflow-x-hidden",children:[i.jsx(tU,{onLogoCopy:V,onBrandmarkCopy:F,onDownload:B,onClose:G,isOpen:$,children:i.jsx(Ye,{href:"/",className:U("mt-xs active:ease-outExpo block duration-100 ease-out active:scale-[0.97]",{"opacity-50 duration-100":t,"!opacity-100":t&&Re}),onContextMenu:te,children:i.jsx(Na,{variant:"mark",size:"small",includeEffects:!0})})}),i.jsxs("div",{onMouseEnter:t?we:void 0,onMouseOver:t?ut:void 0,onMouseLeave:t?Ue:void 0,className:U("pt-sm relative flex w-full flex-1 flex-col items-center",{"opacity-0 transition-opacity duration-100":t,"opacity-100":t&&Re}),children:[i.jsx(ge,{icon:rr,onClick:ke,pill:!0,extraCSS:"my-lg hover:scale-105",toolTip:fe({defaultMessage:"New Thread",id:"76XSxT3hV8"}),tooltipLayout:qe?"left":"right",testId:"sidebar-new-thread"}),i.jsx("div",{className:"pb-xl w-full",onMouseEnter:t?void 0:we,onMouseOver:t?void 0:ut,onMouseLeave:t?void 0:Ue,children:ct.map(Be=>i.jsx(JCe,{icon:Be.icon,title:Be.title,selected:de===Be.id,hovered:r===Be.id,href:Be.href,onHover:()=>se(Be.id),onLeave:ve,showBadge:Be.showBadge,onClick:Oe=>{Be.requireLogin&&!C?(Oe.preventDefault(),S({title:fe({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Ie.SPACES_PAGE})):x(Be.id)}},Be.id))})]}),i.jsxs("div",{className:"pb-sm gap-md mt-auto flex w-full min-w-0 flex-col items-center justify-center [&>*]:w-full",children:[i.jsx(XCe,{ref:T}),i.jsx(H6t,{}),i.jsx(DCe,{showBottomLabels:pt}),J&&i.jsx(FCe,{}),pt&&i.jsx(eSe,{}),pt&&Mt&&i.jsx(W6t,{})]})]}),i.jsx(_u,{message:X,variant:"success",isVisible:Y,timeout:2})]})});aSe.displayName="SidebarV2";const oSe=A.memo(({collapsed:e})=>{const{$t:t}=Q(),{device:{isMacOS:n,isWindowsApp:r}}=Et(),{handleShowPanel:s}=Af(),{shouldShowLossAversionModal:a,handleOpenLossAversion:o}=Yh(),l=_t(),c=l8(h=>h.globalShortcuts[or.NEW_THREAD]),u=n?Fn.MACOS:Fn.WINDOWS,d=f.useMemo(()=>c[u],[u,c]),m=f.useMemo(()=>d.map(h=>GWe(h)),[d]),p=f.useCallback(()=>{r?s():a?o({args:{callback:()=>{l.push("/",void 0,"New thread loss aversion")},origin:Ie.NEW_THREAD_BUTTON}}):l.push("/",void 0,"New thread button")},[r,a,s,o,l]);return i.jsx("div",{onClick:p,className:e?"-mb-sm py-lg":"pt-sm",children:e?i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(ge,{tooltipLayout:"right",icon:rr,pill:!0,toolTip:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})})}):i.jsx("div",{className:"ml-xs",children:i.jsxs(z,{variant:"background",className:"mx-md py-sm pl-md pr-sm hover:ring-super group flex flex-none cursor-pointer select-none items-center justify-between rounded-full border ring-1 ring-transparent transition duration-200",children:[i.jsx(L,{variant:"smallBold",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})}),i.jsx(L,{variant:"tiny",color:"light",className:"flex items-center gap-0 whitespace-nowrap",children:m.map(h=>i.jsx(z,{className:U("flex items-center justify-center rounded border font-mono",{"text-xs":h!=="","px-xs h-4 min-w-4":m.length<=2,"px-xs h-3.5 min-w-3.5":m.length===3}),children:h},h))})]})})})});oSe.displayName="NewThreadButton";const hNt=({isEnterprise:e})=>{const t="enterprise-or-social",{$t:n}=Q(),{organization:r,isLoading:s}=gn({reason:t}),{device:{isWindowsApp:a}}=Et(),o=kc();return s&&!a?i.jsx(wn,{className:"p-sm divide-subtlest border-subtlest ring-subtlest h-14 border-t",children:i.jsx("div",{className:"bg-offsetPlus h-8 w-full rounded-md"})}):i.jsxs("div",{className:e||!a?"h-14 items-stretch":"",children:[e&&i.jsx(z,{className:"p-sm h-full border-t",children:i.jsx(Ye,{href:e?`${o}/org`:"",children:i.jsxs(z,{className:"gap-sm p-sm flex cursor-pointer items-center rounded-full",bgHover:"offsetPlus",children:[r?.logo?i.jsx(Rt,{size:"small",user:r?.logo,altText:"Logo"}):i.jsx(L,{children:i.jsx(me,{icon:bi})}),i.jsx(L,{variant:"smallBold",className:"line-clamp-1 grow",children:r?.display_name})]})})}),!e&&!a&&i.jsx(z,{className:"p-sm border-t",children:i.jsx(eU,{text:n({defaultMessage:"Download",id:"5q3qC0sC3r"})})})]})},gNt=({children:e})=>{const[t,n]=f.useState(!1),{session:r}=Ct(),s=()=>{n(!1)};return i.jsx(lo,{childrenClassName:"inline-flex min-w-0",placement:"top-start",isOpen:t,onOpen:()=>{n(!0)},onClose:()=>{n(!1)},content:i.jsx(RCe,{session:r,onClick:s}),children:e})};function yNt({reason:e}){const{organization:t}=gn({reason:e}),n=t?.uuid??"",{value:r}=At({flag:"org-connectors-blocklist",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}});return r}const vNt=({reason:e})=>{const{organization:t}=gn({reason:e}),n=t?.settings?.disabled_connectors,r=n?.includes(Tt.GOOGLE_DRIVE)&&n?.includes(Tt.ONEDRIVE)&&n?.includes(Tt.SHAREPOINT);return f.useMemo(()=>({allFileConnectorsDisabled:r,disabledConnectors:n}),[r,n])},xNt=({imageProps:e,title:t,description:n,buttonText:r,buttonVariant:s,onClick:a,onDismiss:o,useBackgroundImage:l=!1,buttonSize:c="small"})=>{const{image:u,imageAlt:d,imageHeight:m,imageWidth:p,imageClassName:h,imageIsRoundedFull:g}=e;return i.jsx("div",{className:"m-1",children:i.jsxs(z,{variant:l?"offsetPlus":"background",className:U("relative",l?"mx-md p-md animate-in fade-in rounded-[12px] border duration-300 ease-out":"mx-sm rounded-lg p-[10px]"),children:[l&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:I7e,alt:QW,className:"absolute inset-0 rounded-[12px] object-cover dark:hidden"}),i.jsx("img",{src:P7e,alt:QW,className:"light:hidden absolute inset-0 rounded-[12px] object-cover"})]}),i.jsx("img",{src:u,alt:d,className:U("mb-md",g?"rounded-full":"rounded",h),height:m,width:p}),i.jsx(L,{variant:"smallBold",className:"mb-xs text-center",children:t}),i.jsx(L,{color:"light",variant:"small",className:"mb-md text-center leading-tight",children:n}),i.jsx("div",{className:"w-full",children:i.jsx(ge,{fullWidth:!0,text:r,variant:s,size:c,onClick:a})}),o&&i.jsx("div",{className:"right-xs top-xs absolute",children:i.jsx(Te,{icon:Lt,size:"small",onClick:o})})]})})},iSe=A.memo(()=>{const e=Q(),{trackEvent:t}=Me(),n=_t(),{actions:r}=dn(),s=kc(),a=f.useCallback(()=>{r.setIsSidebarConnectorsAdDismissed(!0),t("sidebar connectors upsell clicked",{}),n.push(`${s}/connectors`)},[r,t,n,s]),o=f.useCallback(()=>{t("sidebar connectors upsell dismissed",{}),r.setIsSidebarConnectorsAdDismissed(!0)},[r,t]),l=f.useMemo(()=>({image:F7e,imageAlt:"Sidebar connectors showcase image",imageHeight:128,imageWidth:128,imageClassName:"mx-auto mt-md"}),[]);return i.jsx(xNt,{imageProps:l,title:e.formatMessage({defaultMessage:"Connect your files",id:"tQyDiwqfQw"}),description:"",buttonText:e.formatMessage({defaultMessage:"Get started",id:"/aBLH2Kytu"}),buttonVariant:"primary",buttonSize:"regular",onClick:a,onDismiss:o,useBackgroundImage:!0})});iSe.displayName="SidebarConnectorsAd";const bNt=()=>{const{$t:e}=Q(),{actions:t}=dn(),{isEnterpriseAdDismissed:n}=dn(),{handleSidebarAdClick:r}=NO();return n?null:i.jsxs(z,{className:"px-md pb-sm",children:[i.jsxs("div",{className:"gap-x-xs flex items-center justify-between",children:[i.jsx(L,{variant:"smallBold",className:"inline",children:i.jsx(Ye,{onClick:r,className:"hover:text-super duration-300",children:e({defaultMessage:"Invite your teammates",id:"P1ZqgVAx88"})})}),i.jsx("div",{className:"-mr-sm",children:i.jsx(Te,{ariaLabel:e({defaultMessage:"Close",id:"rbrahOGMC3"}),icon:Lt,size:"small",pill:!0,onClick:()=>t.setIsEnterpriseAdDismissed(!0)})})]}),i.jsx(L,{color:"light",variant:"small",className:"-mt-xs",children:e({defaultMessage:"Want to use Perplexity with your team or business?",id:"6vISFfmj6M"})}),i.jsx("div",{className:"mt-sm gap-x-sm flex",children:i.jsx(ge,{size:"small",onClick:r,fullWidth:!0,chevron:!0,chevronIcon:_r,text:e({defaultMessage:"Learn More",id:"7DIW6+rckr"})})})]})},_Nt=()=>{const e="subs-ad",[t,n]=f.useState(!1),{hasActiveSubscription:r}=yt(),{trackEvent:s}=Me(),[a,o]=f.useState({bannerTitleText:"",bannerBodyText:"",bannerButtonText:"",buttonVariant:"common"}),{value:l}=Tc({flag:"pro-upsell-banner-customization-flag",subjectType:"user_nextauth_id",defaultValue:{bannerTitleText:"",bannerBodyText:"",bannerButtonText:"",buttonVariant:"common"}});if(f.useEffect(()=>{(async()=>{const p=await sfe({originalContent:l,keysToTranslate:["bannerTitleText","bannerBodyText","bannerButtonText"],reason:e});o(p),n(!0)})()},[l]),f.useEffect(()=>{r||s("sidebar pro upsell viewed",{})},[r,s]),r)return null;const{bannerTitleText:c,bannerBodyText:u,bannerButtonText:d}=a;return!t||!c||!u||!d?null:i.jsxs(z,{className:"px-md pb-sm animate-in fade-in duration-200",children:[i.jsx("div",{children:i.jsx(L,{variant:"smallBold",className:"inline",children:i.jsx(Ye,{href:"/pro",className:"hover:text-super duration-300",children:c})})}),i.jsx(L,{color:"light",variant:"small",children:u}),i.jsx("div",{className:"mt-xs",children:i.jsx(qfe,{text:d,origin:Ie.LEFT_HAND_NAV,variant:l.buttonVariant})})]})},wNt=()=>{const e="sidebar-ads",{hasAccessToProFeatures:t}=yt(),{isEnterprise:n,orgUser:r,isLoading:s}=gn({reason:e}),a=r?.role==="MEMBER",o=Qe(),{hasLoadedSettings:l}=Ds({reason:e}),{isSidebarConnectorsAdDismissed:c}=dn(),u=yNt({reason:e}),{allFileConnectorsDisabled:d}=vNt({reason:e});if(s||!l)return null;const m=o&&!a,p=!n&&!s&&t;return n&&t&&!s&&!c&&!u&&!d?i.jsx(iSe,{}):!m&&!p?null:i.jsxs(i.Fragment,{children:[m&&i.jsx(_Nt,{}),p&&i.jsx(bNt,{})]})},CNt="pplx.first-purchase-tooltip",SNt=()=>{const e="collapsed-bottom-items",t=Qe(),{organization:n,isEnterprise:r}=gn({reason:e}),{isIncognito:s,incognitoType:a}=oa({reason:e}),o=kc();return i.jsx(i.Fragment,{children:t&&i.jsxs(z,{className:"mb-md gap-sm pt-sm flex flex-col items-center justify-center border-t",children:[i.jsx(LCe,{trigger:()=>i.jsx(ENt,{isIncognito:s,incognitoType:a})}),r&&i.jsx(z,{className:"px-two pb-sm pt-md flex justify-center border-t",children:i.jsx(Ye,{href:`${o}/org`,children:n?.logo?i.jsx(Rt,{size:"medium",user:n?.logo,altText:"Logo"}):i.jsx(ge,{ariaLabel:"Organization settings",pill:!0,size:"small",variant:"inverted",icon:wN})})})]})})},ENt=({isIncognito:e,incognitoType:t})=>{const{session:n}=Ct(),{isMax:r,isPro:s,hasAccessToProFeatures:a}=yt();return i.jsx(z,{as:"button",bgHover:"offsetPlus",className:"my-xs gap-x-sm relative flex items-center justify-between rounded-full",children:i.jsx("div",{className:"flex items-center gap-px",children:i.jsxs("div",{className:"p-xs relative flex",children:[e?i.jsx("div",{className:"w-[32px]",children:i.jsx(Bu,{inverse:!0,incognitoType:t})}):i.jsx(Rt,{size:"medium",user:n?.user?.image,showProBadge:s,showMaxBadge:r}),!a&&i.jsx(L,{color:"ultraLight",className:"bg-subtler -translate-y-two p-two absolute bottom-0 right-20 inline-flex translate-x-[4px] rounded-full",children:i.jsx(me,{icon:Qn,size:"xs"})})]})})})},MNt=()=>{const e="uncollapsed-bottom-items",{$t:t}=Q(),{isPro:n,isMax:r}=yt(),{isEnterprise:s}=gn({reason:e}),a=Qe(),{session:o,status:l}=Ct(),{isIncognito:c,incognitoType:u}=oa({reason:e}),d=_t(),{isMobileStyle:m}=ye(),[p,,h]=uO(CNt,null);f.useEffect(()=>{p&&setTimeout(()=>{h()},5e3)},[h,p]);const g=F$e(),y=()=>{p&&h(),d.push(g)};return l==="loading"&&i.jsx("div",{className:"p-5",children:i.jsx(z,{variant:"background",className:"h-[20px] w-full rounded-full"})}),i.jsxs("div",{className:"gap-md flex flex-col",children:[i.jsx("div",{className:"hidden md:[@media(min-height:670px)]:block",children:i.jsx("div",{className:"opacity-0 transition-opacity duration-300 ease-in-out [@media(min-height:700px)]:opacity-100",children:i.jsx(wNt,{})})}),i.jsxs("div",{children:[a&&i.jsx("div",{children:i.jsx(z,{className:"py-sm w-full border-t md:mb-0",children:i.jsxs(z,{className:"mx-sm gap-xs flex items-center justify-between",children:[i.jsx(gNt,{children:i.jsxs(z,{variant:"subtler",bgHover:"offsetPlus",className:U("gap-sm pr-sm inline-flex w-full cursor-pointer select-none items-center justify-start rounded-full p-1 transition !duration-150",{"!bg-inverse":c}),children:[c?i.jsxs(i.Fragment,{children:[i.jsx(Bu,{incognitoType:u}),i.jsx(L,{variant:"smallBold",className:"!text-inverse truncate",children:t({defaultMessage:"Incognito",id:"Sp8UUpZ0at"})})]}):i.jsxs(i.Fragment,{children:[i.jsx(Rt,{size:"medium",showProBadge:n,showMaxBadge:r,user:o?.user?.image}),i.jsx(ZF,{username:o?.user?.username})]}),i.jsx("span",{className:U("text-inverse relative top-px opacity-50",{"!text-quiet !opacity-100":!c}),children:i.jsx(me,{icon:Qn,size:"sm"})})]})}),i.jsx(kNt,{text:t({defaultMessage:"Track purchase status in settings",id:"dt0t5ILzKX"}),open:!!p,children:i.jsx(Te,{ariaLabel:t({defaultMessage:"Settings",id:"D3idYvSLF9"}),pill:!0,icon:fne,onClick:y,size:"small",extraCSS:"aspect-square min-h-[unset] shrink-0 h-[32px] -mr-xs"})})]})})}),!m&&i.jsx(hNt,{isEnterprise:!!s})]})]})},kNt=({children:e,text:t,open:n})=>i.jsx(pn,{bodyClassName:"!bg-super !p-md",bodyTextClassName:"!text-base !text-white",tooltipText:t,arrowClassName:"!fill-super !w-4 translate-x-[1px] !h-auto",open:n,asChild:!0,children:e}),TNt=()=>{const e="sidebar-bottom",{$t:t}=Q(),{isIncognito:n}=oa({reason:e}),{isCollapsed:r,actions:s}=dn(),{isMobileStyle:a}=ye(),o=r&&!a,l=f.useCallback(c=>{(c.metaKey||c.ctrlKey)&&c.key===";"&&(c.preventDefault(),s.setIsIncognito(!n))},[s,n]);return f.useEffect(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}),[l]),i.jsxs("div",{className:U("flex flex-col",{"items-center justify-center":o}),children:[o&&i.jsx("div",{className:"pb-md flex items-center justify-center",children:i.jsx(ge,{pill:!0,ariaLabel:"Expand sidebar",icon:Ike,onClick:()=>s.setIsCollapsed(!1),toolTip:t({defaultMessage:"Expand",id:"0oLj/toqZk"}),tooltipLayout:"right"})}),o?i.jsx(SNt,{}):i.jsx(MNt,{})]})},NNt=()=>{const{$t:e}=Q(),{setBrandDropdownOpen:t,handleBrandCopy:n,handleDownload:r,handleLogoCopy:s,isBrandDropdownOpen:a,handlePopoverClose:o,toastCopy:l,toastVisible:c}=sSe(),{isCollapsed:u,actions:d}=dn(),{isMobileUserAgent:m}=ye(),{setMobileSidebarOpen:p}=Ac(),{isMobileStyle:h}=ye(),g=_=>{_.button===2&&(_.preventDefault(),t(!0))},y=()=>{p(!1),b.push("/")},v=()=>{p(!1)},x=u&&!h,b=_t();return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`my-sm md:my-md flex items-center ${x?"justify-center":"justify-between"}`,children:[i.jsx(tU,{onBrandmarkCopy:n,onLogoCopy:s,onDownload:r,isOpen:a,onClose:o,children:i.jsx(Ye,{"aria-label":"Perplexity",href:"/",className:"block",onContextMenu:g,onClick:v,children:x?i.jsx(Na,{includeEffects:!0,size:"md",variant:"mark"}):i.jsx("div",{className:"ml-xs pl-md pr-sm pt-xs",children:i.jsx(Na,{includeEffects:!0,color:"mixed",isPro:!0,size:"small"})})})}),!x&&!m&&i.jsx("div",{className:"mr-xs pt-two",children:i.jsx(Te,{ariaLabel:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),icon:Pke,size:"small",pill:!0,onClick:()=>{p(!1),d.setIsCollapsed(!0)},toolTip:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),tooltipLayout:"bottom"})}),m&&i.jsx("div",{className:"mr-xs pt-two",children:i.jsx(Te,{icon:rr,pill:!0,onClick:y})})]}),i.jsx(_u,{message:l,variant:"success",isVisible:c,timeout:2})]})},ANt=(e,t)=>e&&!t?"w-collapsedSideBarWidth":"w-sideBarWidth",lSe=f.memo(()=>{const e="sidebar",{$t:t}=Q(),n=Qe(),{trackEvent:r}=Me(),{isCollapsed:s}=dn(),{isIncognito:a}=oa({reason:e}),{openVisitorLoginUpsell:o}=Xn({enabled:!n}),{setMobileSidebarOpen:l}=Ac(),{isMobileStyle:c}=ye(),u=ANt(s,c),d=s&&!c;return i.jsx("div",{"data-testid":xue.SIDEBAR,className:U("group/bar isolate h-full shrink-0 transition-all duration-300 ease-in-out md:hidden md:h-auto",u),children:i.jsx(z,{className:U("h-full transition-all duration-300 ease-in-out",u),children:i.jsxs("div",{className:U("flex h-full min-h-0 flex-1 flex-col"),children:[i.jsx(NNt,{}),!c&&i.jsx(oSe,{collapsed:s}),i.jsx("div",{className:"pt-md scrollbar min-h-0 flex-1 overflow-y-auto overflow-x-hidden",children:i.jsx(ACe,{collapsed:d,incognito:a,animationId:"sidebar-tabs"})}),!n&&!d&&i.jsx("div",{className:"m-md md:mb-lg",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(ge,{variant:"primary",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Sign Up",id:"39AHJmowNE"}),onClick:()=>{l(!1),r("signup click",{}),o({origin:Ie.SIGNUP_BUTTON})}}),i.jsx(ge,{variant:"common",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Log in",id:"odXlk858Gb"}),onClick:()=>{l(!1),r("login click",{}),o({origin:Ie.LOGIN_BUTTON})}})]})}),n||d?i.jsx(TNt,{}):null]})})})});lSe.displayName="SidebarMobile";const jNt=({appContentWrapperRef:e,minimalMode:t})=>{const{isMobileStyle:n}=ye({evaluateOnInit:!0});return n?i.jsx(lSe,{}):i.jsx(Y6t,{children:i.jsx(aSe,{minimalMode:t,appContentWrapperRef:e})})};function RNt({children:e}){const t=f.useRef(null),n=Nt(),r=f.useMemo(()=>n?.startsWith("/b/"),[n]),s=f.useMemo(()=>n?.startsWith("/b/zen")||n?.startsWith("/b/try-assistant"),[n]);return i.jsx(PJe,{children:i.jsx(t7e,{children:i.jsx(vxe,{children:i.jsxs(wl,{children:[!s&&i.jsx(OJe,{children:i.jsx(jNt,{minimalMode:r,appContentWrapperRef:t})}),i.jsxs(LJe,{hasSidebar:!s,ref:t,children:[e,i.jsx(yxe,{})]})]})})})})}const INt=["header","ask-input","mini-graphs","watchlist","market-summary","financial-profile"],UWt=["ask-input","mini-graphs","watchlist","financial-profile"],PNt=["header","schedule","standings"],ONt=["header","bracket"],yee=["ask-input"],LNt=["thread-title"],DNt=["ask-input","article-list"],vee=["topic-list"],nU=A.memo(function(){const t="stripe-wrapper",n=Dt(),r=n?.get("stripe_checkout"),s=n?.get("referral_status");return f.useLayoutEffect(()=>{(r||s)&&MP({reason:t})},[r,s]),null});nU.displayName="StripeStatusRefresher";const cSe=A.memo(e=>{const t=e.metadata?.title||"Perplexity";return f.useEffect(()=>{const n=document.head?document.head.getElementsByTagName("title"):document.getElementsByTagName("title");for(const r of n)r.textContent=t},[t]),null});cSe.displayName="DocumentTitle";function uSe({href:e=IJe()}){const{isMobileStyle:t}=ye();return t?i.jsx(Te,{icon:AR,href:e,extraCSS:"mt-sm -ml-sm",pill:!0}):i.jsxs(Ye,{href:e,className:"gap-xs hover:bg-offsetPlus px-sm py-xs pl-xs -ml-xs -mt-xs group flex items-center rounded-md duration-150",children:[i.jsx(me,{icon:Wv,size:"sm",className:"text-quiet group-hover:text-foreground duration-150"}),i.jsx(L,{variant:"small",color:"light",className:"group-hover:!text-foreground duration-150",children:i.jsx(pe,{defaultMessage:"Back",id:"cyR7KhiuaU"})})]})}const FNt=()=>{const{isMobileStyle:e}=ye(),t=Nt();return e&&t!==Sn?i.jsx(uSe,{href:Sn}):null},Q6="selectedApiGroupId",k_=["selected-api-group"],IC=()=>["api-groups"],UNt=async({reason:e})=>await ffe({reason:e}),BNt=async({name:e,address:t,description:n,contactInfo:r,reason:s})=>dfe({displayName:e,address:t,description:n,contactInfo:r,reason:s}),dSe=({reason:e})=>{const t=mt(),{data:n,isLoading:r,isFetching:s,isFetched:a,error:o,refetch:l}=$e({queryKey:IC(),queryFn:()=>UNt({reason:e})}),{mutateAsync:c,isPending:u,error:d}=bt({mutationFn:BNt,onSuccess:()=>{t.invalidateQueries({queryKey:IC()})}});return f.useMemo(()=>({groups:n??le,isLoading:r,isFetching:s,isFetched:a,error:o,refetch:l,createGroup:c,isCreating:u,createError:d}),[d,c,o,n,u,a,s,r,l])},fSe=({reason:e})=>{const t=mt(),{data:n,isFetched:r,isLoading:s,isFetching:a,error:o,refetch:l}=$e({queryKey:IC(),queryFn:async()=>{const{getAPIGroupsV2:h}=await ae(async()=>{const{getAPIGroupsV2:g}=await Promise.resolve().then(()=>bq);return{getAPIGroupsV2:g}},void 0);return h({reason:e})}}),{mutateAsync:c,isPending:u,error:d}=bt({mutationFn:async({name:h,address:g,description:y,contactInfo:v,reason:x})=>{const{createApiGroupV2:b}=await ae(async()=>{const{createApiGroupV2:_}=await Promise.resolve().then(()=>bq);return{createApiGroupV2:_}},void 0);return b({displayName:h,address:g,description:y,contactInfo:v,reason:x})},onSuccess:()=>{t.invalidateQueries({queryKey:IC()})}}),{data:m}=$e({queryKey:k_,queryFn:async()=>null,enabled:!0,staleTime:1/0,gcTime:1/0});f.useEffect(()=>{const h=n??[];if(!(!r||h.length===0)&&m==null){const g=Ae.getItem(Q6),y=h.find(v=>v.api_org_id===g);if(y)t.setQueryData(k_,y);else if(ea(h)){const v=h[0];Ae.setItem(Q6,v?.api_org_id),t.setQueryData(k_,v)}}},[n,r,t,m]);const p=f.useCallback(h=>{h&&(Ae.setItem(Q6,h.api_org_id),t.setQueryData(k_,h),t.invalidateQueries({predicate:g=>g.queryKey.includes(h.api_org_id)}))},[t]);return f.useMemo(()=>({group:m??null,isFetched:r,isLoading:s,isFetching:a,error:o,refetch:l,createGroup:c,isCreating:u,createError:d,setSelectedGroup:p}),[d,c,o,r,a,s,u,l,m,p])},VNt=async({orgId:e,reason:t})=>await mfe({orgId:e,reason:t}),WNt=e=>["selected-api-groups","customer-info",e??"no-group-id"],$Nt=({reason:e})=>{const t=mt(),{group:n}=fSe({reason:e}),r=WNt(n?.api_org_id),s=$e({queryKey:r,queryFn:()=>VNt({orgId:n?.api_org_id,reason:e})}),a=f.useCallback(o=>{const l=()=>{t.invalidateQueries({queryKey:r})};o&&o>0?setTimeout(l,o):l()},[t,r]);return f.useMemo(()=>({...s,apiOrganization:s?.data?.apiOrganization,customerInfo:s?.data?.customerInfo,hasDefaultPaymentMethod:s?.data?.hasDefaultPaymentMethod??!1,taxInfo:s?.data?.taxInfo,invalidateCustomerInfo:a,isMember:s?.data?.apiOrganization?.user_role==="MEMBER",isAdmin:s?.data?.apiOrganization?.user_role==="ADMIN"}),[a,s])},Gn=(e,t)=>t===e;function HNt(){const{value:e}=sE({flag:"sonar-file-search-gate",defaultValue:"disabled",subjectType:"visitor_id"});return e==="enabled"}const mSe=()=>{const e="api-settings",{groups:t}=dSe({reason:e}),{customerInfo:n,isAdmin:r,isLoading:s}=$Nt({reason:e}),a=n?.customer_portal_url||"",{group:o,setSelectedGroup:l,isLoading:c}=fSe({reason:e}),u=Q(),d=Nt(),m=_t(),[p,h]=f.useState(!1),{isMobileStyle:g}=ye(),y=HNt(),v=f.useMemo(()=>({title:u.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),tabs:{isMobileStyle:!1,actionList:[{text:u.formatMessage({defaultMessage:"API group",id:"vzhpEeLnGg"}),...fa.APIGroup,active:Gn(fa.APIGroup.href,d)},{text:u.formatMessage({defaultMessage:"API members",id:"9T3yfgfdEe"}),...fa.APIMembers,active:Gn(fa.APIMembers.href,d)},{text:u.formatMessage({defaultMessage:"API billing",id:"kq1Eo7ekVC"}),...fa.APIBilling,active:Gn(fa.APIBilling.href,d),show:r},{text:u.formatMessage({defaultMessage:"Usage metrics",id:"rmhlHSzjT6"}),...fa.UsageMetrics,trailingComponent:fa.UsageMetrics.trailingComponent,show:!!a&&r,onClick:()=>{window.open(a,"_blank","noopener,noreferrer")}},{text:u.formatMessage({defaultMessage:"Account limits",id:"4Krk/t2RZ4"}),...fa.AccountLimits,active:Gn(fa.AccountLimits.href,d),show:!1},{text:u.formatMessage({defaultMessage:"API keys",id:"yOFPA6eD9X"}),...fa.APIKeys,active:Gn(fa.APIKeys.href,d)},{text:u.formatMessage({defaultMessage:"API files",id:"B/bk1JrYzU"}),...fa.APIFiles,active:!!d?.startsWith(fa.APIFiles.href),show:y}]}}),[u,d,a,r,y]),x=t.map(E=>({type:"default",text:E.display_name||E.api_org_id,onClick:()=>{m.push("/account/api/group"),l(E),h(!1)},selected:o?.api_org_id===E.api_org_id,active:o?.api_org_id===E.api_org_id})),b={type:"default",text:"New API Group",leftElement:i.jsx(rr,{size:16}),onClick:()=>{m.push("/account/api/group?create=true"),h(!1)}},_={type:"separator",show:t.length>0},w=[...x,_,b],C=()=>{h(!p)},S=!c&&(!!o||t.length===0);return t&&t.length>0?i.jsxs("div",{className:"flex flex-col",children:[i.jsxs(z,{className:"flex items-center justify-between gap-3 px-3 py-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(L,{variant:g?"small":"tinyRegular",color:"light",children:v.title}),i.jsx("div",{className:"size-2.5",children:s&&i.jsx(as,{size:10})})]}),S&&i.jsx(Jt,{items:w,isMobileStyle:!1,isOpen:p,onOpen:C,onClose:()=>h(!1),wrapperClassName:"min-w-0",children:i.jsx(ge,{size:"tiny",text:o?.display_name||o?.api_org_id||"Select API Group",variant:"border",chevron:!0,extraCSS:"max-w-full min-w-0"})})]}),!s&&i.jsx(_5,{fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${v.title}`,collapsed:!1,size:g?"regular":"small",isNewRedesign:!0,...v.tabs})]}):null},rU=()=>{const{session:e}=Ct();return jr({flag:"api-groups-and-settings-enabled",defaultValue:!0,extraAttributes:{organizationUUID:e?.user?.org_uuid??"none"}})},pSe=({reason:e})=>{const{groups:t}=dSe({reason:e}),n=Q(),r=Nt(),{value:s}=rU();return f.useMemo(()=>({text:n.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),...Zt.API,show:s&&t.length<1,href:`${Sn}/api/group?create=true`,active:Gn(Zt.API.href,r)}),[n,r,t.length,s])},Rx=({title:e,tabs:t,shouldRenderInMobile:n})=>{const{isMobileStyle:r}=ye();return i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{className:"px-3 py-2",variant:r?"small":"tinyRegular",color:"light",children:e}),i.jsx(_5,{isMobileStyle:n,fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${e}`,collapsed:!1,size:r?"regular":"small",isNewRedesign:!0,...t})]},e)},zNt=()=>{const e="consumer-workspace-settings",t=Q(),n=pSe({reason:e}),{handleSettingsHeaderAdClick:r}=NO(),s=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Workspace",id:"rOZptgrtp0"}),tabs:{isMobileStyle:!1,actionList:[n,{text:t.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),...Zt.Enterprise,onClick:r,href:void 0,active:!1}]}}),[t,n,r]);return s?.tabs?.actionList?.some(o=>o.show)??!1?i.jsx(Rx,{title:s.title,tabs:s.tabs,shouldRenderInMobile:!1}):null},GNt=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const s=Q(),a=Nt(),o=Ls(),l=f.useMemo(()=>({title:s.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),tabs:{isMobileStyle:!1,actionList:[{text:s.formatMessage({defaultMessage:"Organization",id:"K56Dims7Up"}),active:Gn(da.Organization.href,a),...da.Organization},{text:s.formatMessage({defaultMessage:"Members",id:"+a+2ugZ5sB"}),active:Gn(da.Members.href,a),...da.Members,show:t},{text:s.formatMessage({defaultMessage:"User access",id:"a0UwG9o6Tr"}),active:Gn(da["User access"].href,a),...da["User access"],show:e},{text:s.formatMessage({defaultMessage:"Permissions",id:"SFuk1vRI4X"}),active:Gn(da.Permissions.href,a),...da.Permissions,show:e},{text:s.formatMessage({defaultMessage:"Insights",id:"xK7rmdSjmz"}),active:Gn(da.Insights.href,a),...da.Insights,show:r},{text:s.formatMessage({defaultMessage:"Org Connectors",id:"FVJIMTlwBP"}),active:Gn(da["Org Connectors"].href,a),...da["Org Connectors"],show:e},{text:s.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),active:Gn(da["Org Imports"].href,a),...da["Org Imports"],show:n&&!o}]}}),[s,a,e,t,n,o,r]);return i.jsx(Rx,{title:l.title,tabs:l.tabs,shouldRenderInMobile:!1})},qNt=()=>{const e="enterprise-workspace-settings",t=Q(),n=pSe({reason:e}),r=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Developers",id:"aMWgjX56nj"}),tabs:{isMobileStyle:!1,actionList:[n]}}),[t,n]);return r?.tabs?.actionList?.some(a=>a.show)??!1?i.jsx(Rx,{title:r.title,tabs:r.tabs,shouldRenderInMobile:!1}):null};function KNt({reason:e}){const{value:t}=Xxe(),{locale:n}=Q(),r=new Intl.Locale(n),{uuid:s}=wVe({reason:e}),{value:a,loading:o}=jr({flag:"can-book-hotels",defaultValue:!1,extraAttributes:{cfLanguage:r.language,appApiVersion:wi,dependent_flag:"canonical-hotel-pages-enabled",variation_served:t,orgUUID:s??""}});return f.useMemo(()=>({initialized:!o,value:a}),[o,a])}const YNt=()=>{const{session:e}=Ct(),{value:t,loading:n}=jr({flag:"shopping-enabled",defaultValue:!1,extraAttributes:{orgUUID:e?.user?.org_uuid??""}});return f.useMemo(()=>!n&&t,[n,t])},hSe=()=>{const e="purchase-settings",t=Q(),n=Nt(),{value:r,initialized:s}=KNt({reason:e}),a=r&&s,o=YNt(),l=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Transactions",id:"/jJLYymnae"}),tabs:{isMobileStyle:!1,actionList:[{text:t.formatMessage({defaultMessage:"Purchases",id:"abfoNg9A1k"}),active:Gn(Zt.Products.href,n),...Zt.Products,show:o},{text:t.formatMessage({defaultMessage:"Reservations",id:"PnzGcgLznk"}),...Zt.Reservations,active:Gn(Zt.Reservations.href,n),show:a}]}}),[t,n,o,a]);return f.useMemo(()=>l.tabs.actionList.some(u=>u.show),[l.tabs.actionList])?i.jsx(Rx,{title:l.title,tabs:l.tabs,shouldRenderInMobile:!1}):null},QNt=(e,t)=>{const{value:n,loading:r}=At({flag:"site-specific-prompt-teachers",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},gSe=()=>{const e="base-user-settings",{$t:t}=Q(),n=Nt(),{isEnterprise:r,organization:s}=gn({reason:e}),a=Ls(),{value:o}=At({flag:"pro-perks-settings-flag",defaultValue:!1,subjectType:"user_nextauth_id",extraAttributes:{isEnterprise:r??!1,orgUUID:s?.uuid??""}}),{variation:l,loading:c}=Ff(!1),{variation:u}=QNt(!1),d=Z1(),{variation:m}=dO(!1),p=f.useMemo(()=>({title:t({defaultMessage:"Account",id:"TwyMauNL3r"}),tabs:{isMobileStyle:!1,actionList:[{text:t({defaultMessage:"Account",id:"TwyMauNL3r"}),active:Gn(Zt.Account.href,n),...Zt.Account},{text:t({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),...Zt.Preferences,active:Gn(Zt.Preferences.href,n)},{text:t({defaultMessage:"Personalization",id:"FAejG+JVWn"}),...Zt.Personalize,active:Gn(Zt.Personalize.href,n)},{text:t({defaultMessage:"Assistant",id:"wSAvhubuX6"}),...Zt.Assistant,active:Gn(Zt.Assistant.href,n),show:m},{text:t({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),...Zt.Shortcuts,active:Gn(Zt.Shortcuts.href,n),show:d},{text:t({defaultMessage:"Site-Specific Instructions",id:"yhS5llp8gM"}),...Zt.SiteInstructions,active:Gn(Zt.SiteInstructions.href,n),show:u},{text:t(l?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),...Zt.Tasks,href:Zt.Tasks.href,active:Gn(Zt.Tasks.href,n)},{text:t({defaultMessage:"Notifications",id:"NAidKbB0vi"}),...Zt.Notifications,active:Gn(Zt.Notifications.href,n)},{text:t({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),...Zt.Connectors,active:Gn(Zt.Connectors.href,n)},{text:t({defaultMessage:"Files",id:"m4vqJl0/FT"}),...Zt.Imports,active:Gn(Zt.Imports.href,n),show:r&&!a},...o?[{text:t({defaultMessage:"Pro Perks",id:"x69637XBwS"}),active:Gn(Zt.ProPerks.href,n),...Zt.ProPerks}]:[]]}}),[t,n,d,u,l,r,a,o,m]);return c?null:i.jsx(Rx,{title:p.title,tabs:p.tabs,shouldRenderInMobile:!1})},XNt=()=>{const{value:e}=rU();return i.jsxs(i.Fragment,{children:[i.jsx(gSe,{}),i.jsx(hSe,{}),i.jsx(zNt,{}),e&&i.jsx(mSe,{})]})},ZNt=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const{value:s}=rU();return i.jsxs(i.Fragment,{children:[i.jsx(gSe,{}),i.jsx(hSe,{}),i.jsx(qNt,{}),s&&i.jsx(mSe,{}),i.jsx(GNt,{isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})]})},ySe=A.memo(function({shouldRenderInMobile:t=!1,isMobileStyle:n=!1}){const{isEnterprisePro:r,isEnterpriseMax:s}=yt(),a=gn({reason:"settings-sidebar"}),o=a.isEnterprise??!1,l=a.orgUser?.role==="ADMIN",c=l||(a?.organization?.settings?.member_invites_allowed??!1),u=l||(a?.organization?.settings?.members_can_modify_org_files??!1),{value:d}=At({flag:"enterprise-insights",subjectType:"user_nextauth_id",defaultValue:!1}),{value:m}=At({flag:"enterprise-premium-secure",subjectType:"user_nextauth_id",defaultValue:!1}),{value:p}=At({flag:"enterprise-insights-special-access",subjectType:"user_nextauth_id",defaultValue:!1}),h=(r||s)&&l&&(d&&m||p),g=U("flex flex-col gap-2 -mx-sm md:mx-0",{"border-r py-4 w-sideBarWidth":!t});return n&&!t?null:i.jsxs(z,{className:g,children:[i.jsx("div",{className:"mb-3 ml-2 flex md:px-2",children:i.jsx(uSe,{})}),i.jsx("div",{className:"scrollbar-subtle overflow-y-auto md:px-2",children:o?i.jsx(ZNt,{isEnterpriseAdmin:l,showMembersTab:c,showOrgFilesTab:u,showInsightsTab:h}):i.jsx(XNt,{})})]})});ySe.displayName="SettingsSidebar";const JNt=()=>{const e=_t(),t=Nt(),{$t:n}=Q(),{openVisitorLoginUpsell:r}=Xn({enabled:!0});return f.useEffect(()=>{const a=n(t==="/account/pro-perks"?{id:"UfIxhPDVtn",defaultMessage:"Sign in to Perplexity to see available Perks"}:{id:"ZEOKCVFSgA",defaultMessage:"Sign in to manage your account"});r({title:a,origin:Ie.SETTINGS,closeCallback:()=>{e.push("/")}})},[r,e,t,n]),null};function eAt(){return i.jsx("div",{children:i.jsx(z,{className:"mx-auto size-full max-w-screen-md",variant:"background",children:i.jsxs(wn,{className:"mt-lg gap-lg flex flex-col",children:[i.jsxs("div",{className:"gap-sm flex flex-col",children:[i.jsxs(L,{variant:"baseSemi",className:"ml-sm relative",children:["",i.jsx(T_,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),i.jsx(T_,{className:"h-[170px] rounded-md"})]}),i.jsxs("div",{className:"gap-sm flex flex-col",children:[i.jsxs(L,{variant:"baseSemi",className:"ml-sm relative",children:["",i.jsx(T_,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),i.jsx(T_,{className:"h-[170px] rounded-md"})]})]})})})}const T_=({className:e})=>i.jsx("div",{className:U("bg-subtler rounded-full",e)}),vSe=A.memo(({children:e})=>{const{session:t,status:n}=Ct(),{isMobileStyle:r}=ye();return n==="loading"?i.jsx(eAt,{}):t?.user?i.jsxs(i.Fragment,{children:[i.jsx(nU,{}),i.jsxs("div",{className:"grid h-screen grid-cols-1 grid-rows-[min-content_1fr] gap-2 p-2",children:[i.jsx("div",{className:"flex w-full flex-col",children:i.jsx(Nfe,{})}),i.jsxs(z,{variant:"background",className:"flex min-h-0 rounded-md border",children:[i.jsx(ySe,{shouldRenderInMobile:!1,isMobileStyle:r}),i.jsxs(j1,{children:[i.jsx(FNt,{}),i.jsx("div",{className:"md:p-md md:pt-xl",children:e})]})]})]})]}):i.jsx(JNt,{})});vSe.displayName="SettingsDevLayout";const sU=A.memo(()=>i.jsxs(i.Fragment,{children:[i.jsx("script",{id:"reddit-pixel-script",src:"/pixel/reddit.js",async:!0}),i.jsx("script",{id:"facebook-pixel-script",src:"/pixel/meta.js",async:!0}),i.jsx("script",{id:"podscribe-pixel-script",src:"/pixel/podscribe.js",async:!0}),i.jsx("script",{id:"amazon-twitch-pixel-script",src:"/pixel/amazon.js",async:!0})]}));sU.displayName="AfterInteractivePixels";const aU=Th("HomepageComponentsProvider",e=>Po(t=>({homepageTitle:e?.homepageTitle||"",actions:{onHomepageTitleChange:n=>{t({homepageTitle:n})}}}))),tAt=aU.Provider,nAt=aU.useSelector,rAt=aU.useTrackedState,sAt=()=>nAt(e=>e.actions),aAt=rAt,oAt={hidden:{},visible:{transition:{staggerChildren:.025}}},iAt={hidden:{opacity:0},visible:{opacity:1,transition:{type:"tween",duration:.3}},exit:{opacity:0,transition:{duration:.05}}},xSe=A.memo(()=>{const{homepageTitle:e}=aAt(),t=f.useRef(!0),[n,r]=f.useState(!0),{hasAccessToProFeatures:s,isPro:a,isMax:o,isEnterprise:l}=yt(),c=ls(),{isMobileStyle:u}=ye(),d=f.useMemo(()=>{const m=e.split(" ");return m.map((p,h)=>h===m.length-1?p:`${p} `)},[e]);return f.useEffect(()=>{if(c){if(t.current){t.current=!1;return}r(!1)}},[e,c]),i.jsx("div",{className:"mb-lg bottom-0 flex w-full items-center justify-center pb-3 text-center md:absolute",children:i.jsx(it,{mode:"wait",children:n&&!u?i.jsx(xe.div,{initial:{opacity:1},exit:{opacity:0,transition:{duration:.2}},children:i.jsx(Na,{variant:"text",isPro:a,isMax:o,isEnterprise:l,size:s?"xl":"large"})}):i.jsx(xe.span,{variants:oAt,initial:n?!1:"hidden",animate:"visible",exit:"hidden","aria-hidden":"true",className:"inline-block",children:i.jsx(L,{children:i.jsx("span",{className:"font-display inline-block text-3xl md:text-4xl","aria-label":e,children:d.map((m,p)=>i.jsx(xe.span,{variants:iAt,className:"inline-block",style:{whiteSpace:"pre"},children:m},`${m}-${p}`))})})},e)})})});xSe.displayName="HomepageTitle";const dm=["SMALL","MEDIUM","LARGE"],bSe=A.memo(({widget:e,size:t})=>{const n=dm.includes(t)?"linear-gradient(to bottom, black, transparent)":"linear-gradient(to right, transparent, black 50%)",r="absolute inset-0 size-full object-cover object-center",s=f.useMemo(()=>i.jsxs("div",{className:"relative h-full",children:[i.jsx("img",{src:e.image_url_light,className:U(r,"block dark:hidden"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}}),i.jsx("img",{src:e.image_url_dark,className:U(r,"hidden dark:block"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}})]}),[r,e.image_url_dark,e.image_url_light,e.title,n]),a=f.useMemo(()=>i.jsx("div",{className:"p-sm flex h-full flex-col justify-center",children:i.jsxs("div",{className:"gap-2xs p-xs flex flex-col items-start",children:[i.jsx(L,{className:"line-clamp-2 text-ellipsis leading-tight",variant:dm.includes(t)?"tinyRegular":"small",color:dm.includes(t)?"white":void 0,children:e.title}),i.jsx(L,{className:U("line-clamp-2 text-ellipsis leading-tight",{"text-white/70":dm.includes(t)}),variant:"tiny",color:"light",children:i.jsx("span",{className:"font-normal",children:e.text})})]})}),[t,e.title,e.text]);return i.jsx("div",{className:U("relative size-full",{"bg-inverse dark:bg-subtler":dm.includes(t)}),children:dm.includes(t)?i.jsxs(i.Fragment,{children:[s,i.jsx("div",{className:"absolute inset-x-0 bottom-0",children:a})]}):i.jsxs("div",{className:"grid h-full grid-cols-3 grid-rows-1",children:[i.jsx("div",{className:"col-span-2",children:i.jsx("div",{className:"flex h-full flex-row items-center",children:a})}),i.jsx("div",{className:"col-span-1",children:s})]})})});bSe.displayName="AnnouncementHomepageWidget";const _Se=A.memo(({widget:e,size:t})=>{const{colorScheme:n}=Pr(),r=t=="LARGE"?"grid grid-rows-3":"flex flex-row items-center",s=t=="LARGE"?"row-span-1":"",a=t=="LARGE"?"row-span-3":"",o=f.useMemo(()=>i.jsx("div",{className:U("relative",a),children:i.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,className:"size-full object-cover",alt:e.title,style:{maskImage:"linear-gradient(to bottom, black 75%, transparent)"}})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),l=f.useMemo(()=>i.jsx("div",{className:U(a,"pl-[12px]"),children:i.jsx("div",{className:"relative size-[40px] overflow-hidden rounded-md",children:i.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,alt:e.title,className:"size-full object-cover"})})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),c=f.useMemo(()=>i.jsx("div",{className:U("p-sm flex h-full flex-col justify-center",s,t!=="LARGE"&&"pt-sm"),children:i.jsx(L,{className:"px-xs line-clamp-2 text-ellipsis leading-tight",variant:"tinyRegular",children:e.title})}),[t,s,e.title]);return i.jsx("div",{className:U("size-full",r),children:t=="LARGE"?i.jsxs(i.Fragment,{children:[o,c]}):i.jsxs(i.Fragment,{children:[l,c]})})});_Se.displayName="DiscoverHomepageWidget";const S5=({onRequest:e,onSuccess:t,onError:n,origin:r})=>{const{$t:s}=Q(),{trackEvent:a}=Me();return f.useCallback(()=>{e?.(),navigator.geolocation?navigator.geolocation.getCurrentPosition(o=>{t(o),a("precise location granted",{origin:r})},o=>{let l;switch(o.code){case o.PERMISSION_DENIED:n(s({defaultMessage:"Looks like permission was denied. Please allow location access in your browser site settings.",id:"9P7nG1a2Cl"})),l="permission_denied";break;case o.POSITION_UNAVAILABLE:n(s({defaultMessage:"Unable to determine your location. Please try again.",id:"VLgkyqQ5LO"})),l="position_unavailable";break;case o.TIMEOUT:n(s({defaultMessage:"Request timed out. Please try again.",id:"VIQi5rKvh3"})),l="timeout";break;default:n(s({defaultMessage:"An error occurred while getting your location. Please try again.",id:"oOu0W+N9Re"})),l="unsupported"}a("precise location modal denied",{origin:r,reason:l})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(n(s({defaultMessage:"Location services are not supported by your browser.",id:"1eN9TO+Fjt"})),a("precise location modal denied",{origin:r,reason:"unsupported"}))},[s,n,t,e,r,a])},wSe=A.memo(({isOpen:e,onClose:t,onPermissionGranted:n,origin:r})=>{const{$t:s}=Q(),[a,o]=f.useState(!1),[l,c]=f.useState(null),u=S5({onSuccess:g=>{n(g),o(!1),c(null),t()},onError:g=>{o(!1),c(g)},origin:r}),d=f.useCallback(()=>{o(!0),c(null),u()},[u]),{colorScheme:m}=Pr(),{isMobileStyle:p}=ye(),h=f.useMemo(()=>[{text:s({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,disabled:a},{text:s({defaultMessage:"Allow",id:"y/bmsG8rnv"}),onClick:d,isLoading:a,variant:"primary",disabled:a}],[s,d,a,t]);return i.jsx(Xt,{isOpen:e,onClose:t,variant:p?"bottom-sheet":"small",actionList:h,children:i.jsxs(z,{className:"flex flex-col",children:[i.jsx("div",{className:"-mt-md mb-md bg-subtler flex h-24 w-full items-center justify-center overflow-hidden rounded-md bg-cover bg-center",style:{backgroundImage:m==="dark"?"url('/static/images/location-share-dialog-map-dark.jpg')":"url('/static/images/location-share-dialog-map.jpg')"},children:i.jsxs(z,{className:"size-xl relative flex items-center justify-center rounded-full border",children:[i.jsx(z,{className:"absolute left-1/2 top-1/2 size-full -translate-x-1/2 -translate-y-1/2 rounded-full",variant:"super"}),i.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[140%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-20"}),i.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[180%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-10"}),i.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[220%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-5"}),i.jsx(me,{icon:mne,size:"lg",className:"text-inverse relative"})]})}),i.jsx(L,{variant:"section-title",className:"text-center",children:s({defaultMessage:"Enable Precise Location",id:"/JAfaukfkx"})}),i.jsx(L,{variant:"small",color:"light",className:"text-center",children:s({defaultMessage:"To provide you with accurate local weather information, Perplexity needs access to your device location.",id:"0A/wGwJkVw"})}),l&&i.jsx(z,{className:"mt-md",children:i.jsx(L,{variant:"smallBold",color:"red",className:"text-center",children:l})})]})})});wSe.displayName="LocationPermissionModal";const lAt=Object.freeze(Object.defineProperty({__proto__:null,LocationPermissionModal:wSe,useRequestLocation:S5},Symbol.toStringTag,{value:"Module"})),CSe=A.memo(({setShowCTA:e})=>{const{$t:t}=Q(),{openToast:n}=xn(),r=mt(),s=f.useCallback(()=>{r.invalidateQueries({queryKey:[EO]}),e(!1)},[r,e]),o=S5({onSuccess:s,onError:c=>{n(c,"error",5)},origin:"homepage_weather"}),l=f.useCallback(()=>{o()},[o]);return i.jsxs(xe.div,{whileTap:{scale:.98,transition:{ease:hn,duration:.15}},className:"bg-offsetPlus flex w-full cursor-pointer flex-row items-center justify-center rounded-full p-3",onClick:l,children:[i.jsx(me,{icon:mne,size:"sm",className:"text-foreground relative"}),i.jsx(L,{variant:"smallBold",color:"default",className:"ml-2",children:t({defaultMessage:"Use precise location",id:"Si49wMl5CP"})})]})});CSe.displayName="EnableLocationCTA";const SSe=A.memo(({widget:e,size:t})=>{const n="leading-none",r=e.profiles[0]?.image,s=e.profiles[0]?.displayName??e.profiles[0]?.symbol,a=e.profiles[0]?.companyName,o=e.quotes[0]?.price,l=e.profiles[0]?.currency,c=e.quotes[0]?.changesPercentage,u=(c??0)>0,{locale:d}=Q(),m=f.useMemo(()=>U({"!text-[#20808D] dark:!text-[#1FB8CD]":u,"!text-[#A84B2F] dark:!text-[#9C4153]":!u}),[u]),p=f.useMemo(()=>o?o>=1e5?(o/1e3).toLocaleString(d,{minimumFractionDigits:2,maximumFractionDigits:2})+"k":o.toLocaleString(d,{minimumFractionDigits:2,maximumFractionDigits:2}):"",[o,d]),h=f.useMemo(()=>c?`${u?"+":""}${c?.toFixed(2)}%`:"",[c,u]),g=f.useMemo(()=>t==="MEDIUM"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"gap-xs flex items-center",children:[r&&i.jsx("img",{src:r??"",alt:a??"",className:"-mt-two size-[16px] rounded-sm"}),i.jsx(L,{variant:"tinyRegular",color:"light",className:n,children:s})]}),i.jsxs("div",{className:"gap-sm flex flex-row items-baseline",children:[i.jsxs(L,{variant:"tinyRegular",className:n,children:[l==="USD"?"$":"",p,l!=="USD"&&i.jsxs("span",{className:"text-quiet text-[11px]",children:[" ",l]})]}),i.jsx(L,{variant:"tinyRegular",className:U(n,m,"ml-auto"),children:h})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(L,{variant:"tinyRegular",className:n,children:s}),i.jsx(L,{variant:"tinyRegular",className:n,children:p}),i.jsx(L,{variant:"tinyRegular",className:m,children:h})]}),[h,m,a,l,r,p,t,s]),y=f.useMemo(()=>i.jsx("div",{className:U("bg-offsetPlus flex items-center justify-center rounded-full",{"size-[18px]":t==="SMALL","size-[20px]":t!=="SMALL"}),children:i.jsx(me,{icon:u?PR:pne,className:m,size:"xs"})}),[u,t,m]);return i.jsxs("div",{className:U("p-sm flex h-full flex-row items-center",{"py-sm":t==="SMALL"}),children:[i.jsx("div",{className:U("pl-xs flex flex-col",t==="MEDIUM"?"gap-sm":"gap-xs"),children:g}),i.jsx("div",{className:U("ml-auto",{"mr-sm":t==="MEDIUM"}),children:y})]})});SSe.displayName="FinanceHomepageWidget";const cAt={SMALL:"col-span-1 row-span-1",MEDIUM:"col-span-2 row-span-1",LARGE:"col-span-2 row-span-2",ROW:"col-span-6 row-span-1"},uAt=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="comet"),dAt=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="project"),rR=e=>e.type==="QUERY"&&e.educational_type==="primer",ESe={Ask:Ts,"Email & Communication Management":$v,"Finance & Budgeting":Ete,"Work & Research":Gte,"Shopping & Deals":SN,"Social & Personal Life":zte,"Time Management & Productivity":zC,"Travel & Events":HC,Research:Ts,"Current Events":kf,Recommend:CN,Travel:Lke,Shopping:SN,Finance:Oke,Sports:A_,Local:hne,"Make a plan":Gke,Analyze:zke,Summarize:Hke,"Fact Check":bte,Learn:$ke,Health:kN,"What is Perplexity":Qte,Troubleshoot:QR,Compare:dB,Parenting:Wke,Create:zv,Study:w0,"Get a job":Vke,Flashcards:Bke,"Practice test":qC,Law:dB,Technology:Uke,Science:Fke,Humanities:Dke},oU=A.memo(({widget:e,showPadding:t=!0,restrictTwoRows:n=!0,tooltipText:r,icon:s})=>{const a=t?"px-sm py-xs":"",o=t?"p-xs":"",l=f.useMemo(()=>({lineHeight:1.3}),[]);return i.jsx("div",{className:`relative h-full ${a}`,children:i.jsx("div",{className:`flex h-full flex-col ${o}`,children:i.jsxs("div",{className:"flex grow items-center gap-2",children:[i.jsx("div",{className:"bg-offsetPlus flex size-6 shrink-0 items-center justify-center rounded-md",children:i.jsx(me,{icon:(s||ESe[e.prompt])??Ts,color:"#8D9191",size:"sm"})}),r?i.jsx(pn,{tooltipText:r,asChild:!0,children:i.jsx(L,{className:U("text-ellipsis",{"line-clamp-2":n}),variant:"tinyRegular",style:l,children:e.query})}):i.jsx(L,{className:U("text-ellipsis text-pretty",{"line-clamp-2":n}),variant:"tinyRegular",style:l,children:e.query})]})})})});oU.displayName="QueryHomepageWidget";const MSe=xe.create(Ye),fAt={suggested:kf,trending:qke},mAt=(e,t)=>{const{action:n,...r}=e,s=n.actions.find(a=>a.query===t)??n.actions[0];return{...r,type:"QUERY",query:t,action:s}},kSe=A.memo(({prompt:e})=>{switch(e){case"suggested":return i.jsx(L,{variant:"tinyRegular",color:"light",children:i.jsx(pe,{defaultMessage:"Suggested",id:"a0lFbMbzyl"})});case"trending":return i.jsx(L,{variant:"tinyRegular",color:"light",children:i.jsx(pe,{defaultMessage:"Trending",id:"ll/ufR0/ED"})});default:return i.jsx(L,{variant:"tinyRegular",color:"light",children:"Ask"})}});kSe.displayName="WidgetTitle";const TSe=A.memo(({widget:e,onQueryClick:t,onQueryHover:n})=>{const{queries:r}=e,s=pte(r),a=U("px-[12px] pt-[12px]"),o=e.prompt.toLowerCase(),l=fAt[o];return i.jsxs("div",{className:a,children:[i.jsxs("div",{className:"gap-x-xs flex",children:[i.jsx(me,{icon:l,color:"#8D9191",size:"sm"}),i.jsx(L,{variant:"tinyRegular",color:"light",children:i.jsx(kSe,{prompt:o})})]}),i.jsx("div",{children:s?i.jsx(sR,{query:r[0],restrictTwoRows:!1,onQueryClick:t,onQueryHover:n,widget:e},r[0]):i.jsx("div",{children:r.map(c=>i.jsx(sR,{query:c,onQueryClick:t,onQueryHover:n,widget:e},c))})})]})});TSe.displayName="MultiQueryHomepageWidget";const sR=A.memo(({query:e,restrictTwoRows:t,onQueryClick:n,onQueryHover:r,widget:s})=>{const a=f.useMemo(()=>mAt(s,e),[e,s]),o=f.useMemo(()=>({opacity:.5}),[]),l=f.useMemo(()=>({opacity:1}),[]),c=f.useMemo(()=>({opacity:.75,transition:{duration:.15,ease:na}}),[]);return i.jsx(MSe,{href:`/search/new?q=${e}&source=homepage_widget`,initial:o,animate:l,whileHover:c,children:i.jsx("div",{className:"mt-4",onClick:u=>{u.preventDefault(),n(e)},onMouseEnter:()=>r(e),children:i.jsx(oU,{widget:a,size:"MEDIUM",showPadding:!1,restrictTwoRows:t})})})});sR.displayName="MotionLinkFactory";const NSe=A.memo(({widget:e,onClick:t,onMouseEnter:n,index:r=0,buttonClassName:s})=>i.jsx("div",{onMouseEnter:n,children:i.jsx(it,{children:i.jsx(xe.div,{initial:{opacity:0,scale:.7,y:14},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.7},transition:{delay:r*.025,duration:.3,type:"spring",stiffness:400,damping:30},children:i.jsx(ge,{variant:"border",size:"small",text:e.query,icon:ESe[e.prompt]??Ts,onClick:t,extraCSS:s},e.query)},e.uuid)})}));NSe.displayName="QueryPrimerHomepageWidget";const ASe=A.memo(({widget:e})=>{const t=f.useMemo(()=>({lineHeight:1.3}),[]);return i.jsxs("div",{className:"flex size-full grow items-center gap-2",children:[i.jsx("div",{className:"bg-offsetPlus ml-3 flex size-[40px] shrink-0 items-center justify-center rounded-md",children:e.icon_url?i.jsx(is,{src:e.icon_url,alt:e.prompt,includeLightBoxModal:!1}):i.jsx(me,{icon:Ts,color:"#8D9191",size:"sm"})}),i.jsxs("div",{className:"my-auto mr-1 flex flex-col overflow-hidden",children:[i.jsx(L,{variant:"tiny",children:e.prompt}),i.jsx(L,{className:U("line-clamp-2 text-ellipsis text-pretty"),variant:"tinyRegular",style:t,children:e.query})]})]})});ASe.displayName="QueryProjectHomepageWidget";const jSe=A.memo(({widget:e})=>{const t=f.useMemo(()=>({lineHeight:1.3}),[]);return i.jsx("div",{className:"px-sm py-xs relative h-full",children:i.jsx("div",{className:"p-xs flex h-full flex-col",children:i.jsxs("div",{className:"flex grow items-center gap-2",children:[i.jsx("div",{className:"bg-offsetPlus flex size-8 shrink-0 items-center justify-center rounded-md",children:i.jsx(Ru,{unified:e.emoji,size:"small"})}),i.jsx(L,{className:"line-clamp-2 text-ellipsis text-pretty",variant:"tinyRegular",style:t,children:e.title})]})})})});jSe.displayName="SpaceHomepageWidget";const BWt=({event:e})=>{const[t,n]=f.useState("scoring"),{$t:r}=Q(),s=mx(e.event.teams),a=e.event.pbp,o=gg(e.event),l=f.useMemo(()=>a.reduce((c,u)=>(c[u.period]||(c[u.period]=[]),c[u.period]?.push(u),c),{}),[a]);return i.jsx(z,{variant:"subtler",className:"rounded-md",children:i.jsx(r5,{title:t==="all"?"Play-by-Play":"Scoring Plays",titleClassName:"!py-0",trailing:i.jsx(_x,{size:"small",actionList:[{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),show:!0,onClick:()=>n("scoring"),active:t==="scoring"},{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),show:!0,onClick:()=>n("all"),active:t==="all"}],layoutGroupId:"nfl-play-summary-tab-bar",layout:"right"}),children:i.jsx("div",{className:"-my-md",children:i.jsx(pAt,{plays:l,teams:s,brands:e.brands,drives:e.event.driveChart,mode:t,isLive:o})})})})},pAt=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a})=>{const o=a?[...Object.keys(e)].reverse():Object.keys(e);return i.jsx("div",{children:o.map(l=>i.jsx("div",{children:i.jsx(hAt,{plays:e[parseInt(l)]??le,teams:t,brands:n,drives:r,mode:s,isLive:a,period:parseInt(l)})},l+s))})},hAt=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a,period:o})=>{const[l,c]=f.useState(!1),u=f.useMemo(()=>Object.values(e).flat().reduce((p,h)=>(p[h.driveId]||(p[h.driveId]=[]),p[h.driveId]?.push(h),p),{}),[e]),d=()=>{c(!0)};return!Object.keys(u).some(p=>r.find(h=>h.driveId===parseInt(p))?.driveStats.isScoringDrive==="true")&&s==="scoring"?null:i.jsxs(i.Fragment,{children:[i.jsx(L,{variant:"smallCaps",color:"light",className:"-mx-md bg-offsetPlus p-xs px-md",children:iU(o,{asOrdinal:!0})}),i.jsx("div",{className:U("group/plays flex flex-col",{"flex-col-reverse":a}),children:Object.keys(u).map(p=>{const h=r.find(g=>g.driveId===parseInt(p));return s==="scoring"&&h?.driveStats.isScoringDrive==="false"?null:i.jsx(xAt,{brands:n,teams:t,plays:u[parseInt(p)]??le,drives:r,isLive:a,period:o,onExpand:d,hasExpanded:l},p)})})]})},gAt=e=>{if(!e)return;const t=+e.driveStats.timeOfPossession.seconds;return t<10?`${e.driveStats.timeOfPossession.minutes}:0${t}`:`${e.driveStats.timeOfPossession.minutes}:${t}`},yAt=e=>e?e.driveEnd.playType.playTypeId===20:!1,vAt=e=>e?e.driveEnd.gameClock.minutes!==null:!1,xAt=({brands:e,teams:t,plays:n,drives:r,isLive:s,period:a,onExpand:o,hasExpanded:l})=>{const{$t:c}=Q(),u=r.find(x=>x.driveId===n[0]?.driveId),d=vAt(u),[m,p]=f.useState(!1),h=sh(u?.teamId??n[0]?.endPossession.teamId??"",e,"nfl"),g=f.useMemo(()=>{const x=gAt(u);return c({defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},{count:u?.driveStats.plays,yards:u?.driveStats.yards,duration:x})},[c,u]),y=f.useMemo(()=>u?.driveEnd.period&&u.driveEnd.period!==a?c({defaultMessage:"End of Quarter",id:"tY+g5ifXSh"}):u?.driveEnd.driveChartPlayName??c({defaultMessage:"Active Drive",id:"9WRCeRXYnG"}),[c,u,a]),v=yAt(u)?sh(t.find(x=>x.teamId!==h.teamId)?.teamId??h.teamId,e,"nfl"):h;return f.useEffect(()=>{s&&!d&&!l&&!m&&p(!0)},[]),f.useEffect(()=>{d&&!l&&p(!1)},[d,l]),i.jsxs(z,{className:U("py-sm relative border-b",{"!border-transparent":m},{"first:border-b-0":s},{"last:border-b-0":!s}),children:[i.jsx("div",{className:U("-inset-x-md bg-subtler absolute inset-y-0 duration-200",{"opacity-0":!m})}),u&&u.driveEnd.period>a&&i.jsx("div",{className:U("bg-inverse/25 w-two absolute left-[calc(12px-1px)]",{"top-lg bottom-0":!s,"h-lg top-0":s})}),u&&u.driveStart.period<a&&i.jsx("div",{className:U("bg-inverse/25 w-two absolute left-[calc(12px-1px)]",{"h-lg top-0":!s,"top-lg bottom-0":s})}),i.jsxs("div",{className:"gap-md relative flex cursor-pointer items-center",onClick:()=>{p(!m),o()},children:[i.jsx(os,{size:"small",logo:v.logo,color:v.color,className:"!border-subtlest relative"}),i.jsxs("div",{className:"flex-1",children:[i.jsx(L,{variant:"smallBold",children:i.jsx("span",{className:"uppercase",children:y})}),i.jsx(L,{variant:"tiny",color:"light",children:g})]}),i.jsxs("div",{className:"gap-lg grid grid-cols-2",children:[t[0]&&i.jsx(xee,{team:t[0],score:n[n.length-1]?.awayScoreAfter??0,didScore:(n[n.length-1]?.awayScoreAfter??0)>(n[0]?.awayScoreBefore??0)}),t[1]&&i.jsx(xee,{team:t[1],score:n[n.length-1]?.homeScoreAfter??0,didScore:(n[n.length-1]?.homeScoreAfter??0)>(n[0]?.homeScoreBefore??0)})]}),i.jsx(L,{variant:"small",className:"flex items-center",children:i.jsx(me,{icon:m?YC:Qn,size:"sm",className:"text-quiet"})})]}),i.jsx(Uo,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:hn},children:m&&i.jsx(so,{className:"w-full",initial:{opacity:0,y:-5},animate:{opacity:1,y:0,transition:{duration:.2,ease:hn,delay:.05}},exit:{opacity:0,y:-5,transition:{duration:.2,ease:hn}},children:i.jsx(xe.div,{layout:!0,layoutRoot:!0,children:(s?[...n].reverse():n).map(x=>i.jsx(_At,{play:x},x.playId))})})})]})},xee=({team:e,score:t,didScore:n})=>i.jsxs("div",{children:[i.jsx(L,{variant:"small",color:"light",className:"text-right uppercase",children:e.abbreviation}),i.jsxs(L,{variant:"small",className:"text-right align-baseline",color:n?"super":void 0,children:[n&&i.jsx(me,{icon:gne,className:"mr-xs inline-block size-2"}),i.jsx("span",{className:"font-mono",children:t})]})]}),bAt=e=>{const t=e.match(/([A-Za-z]+)(\d+)/);if(!t)return e;const[n,r,s]=t;return`${r} ${s}`},iU=(e,t)=>[1,2,3,4].includes(e)?t?.asOrdinal?Q_e(e):`Q${e}`:"OT",_At=({play:e})=>i.jsxs(xe.div,{layout:"position",initial:{opacity:0},animate:{opacity:1},className:"gap-md group flex w-full",children:[i.jsx("div",{className:"w-[24px] shrink-0"}),i.jsx(z,{className:"gap-md py-sm group-last:-mb-sm flex flex-1 border-b group-last:border-b-0",children:i.jsxs("div",{children:[i.jsxs(L,{variant:"small",children:[e.down&&e.distance&&`${Q_e(e.down)} & ${e.distance} at `,i.jsx("span",{className:"uppercase",children:bAt(e.yardLine)})]}),i.jsxs(L,{variant:"small",color:"light",children:["(",e.time," - ",iU(e.period),") ",e.playText]})]})})]});function VWt({event:e,brands:t,isLive:n}){const{$t:r}=Q(),[s,a]=f.useState(!1),[o,l]=f.useState("all"),c=f.useMemo(()=>e.pbp.filter(d=>o==="all"?bee(d):bee(d)&&CAt(d)).reduce((d,m)=>(d[m.period]=d[m.period]||[],d[m.period]?.push(m),d),{}),[e?.pbp,o]),u=f.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>l("all"),show:!0,active:o==="all"},{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),onClick:()=>l("scoring"),show:!0,active:o==="scoring"}],[o,r]);return i.jsxs(i.Fragment,{children:[i.jsx(z,{variant:"subtler",className:"rounded-md",children:i.jsx(r5,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:i.jsx("div",{className:"-mb-sm",children:i.jsx(_x,{actionList:u,layoutGroupId:"nba-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:i.jsx("div",{className:"-my-md",children:i.jsx(lU,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:n,brands:t,inModal:!1})})})}),s&&i.jsx(SAt,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:n})]})}const lU=f.memo(({plays:e,event:t,onViewAll:n,playsToRender:r=1/0,reverse:s=!1,brands:a,inModal:o=!1})=>{const{$t:l}=Q(),c=mx(t.teams),u=s?[...Object.keys(e)].reverse():Object.keys(e),d=f.useMemo(()=>{let m=r;return i.jsxs(z,{children:[u.map(p=>{let h=0;const g=e[p]?.length??0;return m<=0?null:(m<g?(h=m,m=0):(h=g,m-=g),i.jsx(wAt,{plays:e[p]??le,playsToRender:h,teamsSorted:c,period:p,reverse:s,brands:a},p))}),!o&&n&&i.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:i.jsx(Te,{variant:"super",chevron:!0,chevronIcon:_r,text:l({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:n})})]})},[e,r,c,s,o,n,l,u,a]);return o?d:i.jsx(Uo,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:hn},children:i.jsx(so,{children:d})})});lU.displayName="PlaysByPeriod";function wAt({plays:e,playsToRender:t,teamsSorted:n,period:r,reverse:s,brands:a}){const o=f.useMemo(()=>s?[...e].reverse():e,[e,s]),l=ls();return i.jsxs(z,{children:[t>0&&i.jsx("div",{children:i.jsxs(z,{variant:"offsetPlus",className:U("-mx-md px-md py-sm flex items-center justify-between"),children:[i.jsx(L,{variant:"smallCaps",color:"light",children:iU(parseInt(r))}),i.jsxs("div",{className:"gap-md flex items-center",children:[i.jsx(wee,{team:n[0]?.abbreviation??""}),i.jsx(wee,{team:n[1]?.abbreviation??""})]})]})}),i.jsx(wl,{children:i.jsx(xe.div,{layout:!0,layoutRoot:!0,children:o.slice(0,t).map((c,u)=>{const d=o[u-(s?-1:1)]?.visitorScore??0,m=o[u-(s?-1:1)]?.homeScore??0;return i.jsx(ISe,{play:c,previousHomeScore:m,previousVisitorScore:d,brands:a,parentHasMounted:l},c.playId)})})})]})}function RSe(e){const t=e?.minutes||0,n=Math.ceil(e.seconds??0)?.toString().padStart(2,"0")||"00";return`${`${t}:`}${n}`}const bee=e=>e.playText!=="Starting Lineup",CAt=e=>e.playEvent.playEventId===3||e.playEvent.playEventId===1,ISe=f.memo(({play:e,previousHomeScore:t,previousVisitorScore:n,brands:r,parentHasMounted:s})=>{const a=f.useRef(!s),o=t!==void 0&&t!==e.homeScore,l=n!==void 0&&n!==e.visitorScore,c=o||l,u=sh(e.teamId,r,"nba"),{colorScheme:d}=Pr(),m=MC(u.color,d);return i.jsxs(xe.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:a.current?void 0:{opacity:0},animate:a.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:hn},opacity:{duration:.2,ease:na}},layout:"position",children:[c&&i.jsx("div",{className:"w-xs absolute inset-y-1 left-1 rounded-full opacity-50",style:{backgroundColor:m}}),!a.current&&i.jsx(xe.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:na,delay:.2}}),i.jsxs("div",{className:"gap-md relative flex items-center",children:[i.jsx(os,{logo:u.logo,color:u.color,size:"small",includeStripe:!1}),i.jsxs("div",{className:"gap-xs flex flex-1 flex-col items-start",children:[i.jsx(L,{variant:"smallCaps",color:"light",children:RSe(e.time)}),i.jsx(L,{variant:"small",children:e.playText})]}),i.jsxs("div",{className:"gap-md flex items-center",children:[i.jsx(_ee,{score:e.visitorScore,didScore:l}),i.jsx(_ee,{score:e.homeScore,didScore:o})]})]})]})});ISe.displayName="Play";const _ee=({score:e,didScore:t})=>i.jsxs(L,{variant:"small",className:"relative w-[40px] text-right align-baseline",color:t?"super":void 0,children:[t&&i.jsx(me,{icon:gne,className:"mr-xs inline-block size-2"}),i.jsx("span",{className:"font-mono",children:e})]}),wee=({team:e})=>i.jsx(L,{variant:"smallCaps",className:"w-[40px] shrink-0 text-right",children:e}),SAt=({plays:e,isOpen:t,onClose:n,event:r,brands:s,reverse:a})=>{const{isMobileStyle:o}=ye();return i.jsx(Xt,{isOpen:t,onClose:n,variant:o?"bottom-sheet":"side-sheet",children:i.jsx("div",{className:"min-h-full",children:i.jsx(lU,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})})},PSe=A.memo(({widget:e})=>{const{data:t}=e;return t.event_status.eventStatusId===2||t.event_status.eventStatusId===4?i.jsx(LSe,{widget:e}):i.jsx(OSe,{widget:e})});PSe.displayName="SportsHomepageWidget";const OSe=A.memo(({widget:e})=>{const{$t:t}=Q(),{data:n}=e,{away_team:r,home_team:s}=n,{locale:a}=Q(),o=f.useMemo(()=>{const l=new Date(n.start_date);return pE(l)?`${l.toLocaleString(a,{hour:"numeric",minute:"2-digit"})}, ${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}`:l.toLocaleString(a,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},[n,a,t]);return i.jsxs("div",{className:U("py-sm flex h-full flex-col items-center justify-center px-[12px]"),children:[i.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[i.jsx("div",{className:"flex items-center justify-start",children:i.jsx(os,{logo:r.logo,color:r.color,size:"small"})}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(L,{variant:"tinyRegular",className:"truncate",children:o})}),i.jsx("div",{className:"flex items-center justify-end",children:i.jsx(os,{logo:s.logo,color:s.color,size:"small"})})]}),i.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx(L,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),i.jsx("div",{className:"px-2",children:i.jsx(L,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:"vs"})}),i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx(L,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});OSe.displayName="PreviewContent";const LSe=A.memo(({widget:e})=>{const{$t:t}=Q(),{data:n}=e,{away_team:r,home_team:s,event_status:a,league:o}=n,{minutes:l,seconds:c}=a,u=a.eventStatusId===2,d=a.eventStatusId===4,m=Kwe(t,o.toLowerCase()),p=d?t({defaultMessage:"Final",id:"6/JzkWi0di"}):l!=null&&c!=null?RSe({minutes:l,seconds:c}):null,h=d||!a.period?null:`Q${a.period}`,y=qwe(a)?t({defaultMessage:"Halftime",id:"iC0AL294Dr"}):d?t({defaultMessage:"Final",id:"6/JzkWi0di"}):h&&p?`${h} ${p}`:"";return i.jsxs("div",{className:U("p-sm flex h-full flex-col items-center justify-center"),children:[i.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[i.jsxs("div",{className:"flex items-center justify-start",children:[i.jsx(os,{logo:r.logo,color:r.color,size:"small"}),r.score!==void 0&&i.jsxs("div",{className:"ml-sm flex flex-col items-center justify-center",children:[i.jsx(L,{variant:r.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:r.score}),r.sub_score&&i.jsx(L,{variant:"tinyRegular",color:"light",className:"truncate",children:r.sub_score})]})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(L,{variant:"tinyRegular",className:"truncate",children:y})}),i.jsxs("div",{className:"flex items-center justify-end",children:[s.score!==void 0&&i.jsxs("div",{className:"mr-sm flex flex-col items-center",children:[i.jsx(L,{variant:s.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:s.score}),s.sub_score&&i.jsx(L,{variant:"tinyRegular",color:"light",className:"truncate",children:s.sub_score})]}),i.jsx(os,{logo:s.logo,color:s.color,size:"small"})]})]}),i.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx(L,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),i.jsx("div",{className:"px-2",children:u?i.jsx(DSe,{}):d&&i.jsx(L,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:m})}),i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx(L,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});LSe.displayName="SummaryContent";const DSe=A.memo(()=>i.jsx(L,{variant:"tinyRegular",color:"super",className:"bg-super/10 truncate rounded-full px-2 py-0.5 leading-tight",children:"Live"}));DSe.displayName="LiveIndicator";const EAt={SPORTS:Yke,FINANCE:Kke},MAt="#8D9191",kAt=({watchlistType:e})=>{const t=EAt[e];return i.jsx(me,{icon:t,color:MAt})},FSe=A.memo(({widget:e})=>{const{$t:t}=Q(),n=e.watchlist_type.toLowerCase(),r=t(Jy[n].title),s=t(Jy[n].widgetDescription);return i.jsxs("div",{className:"flex h-full flex-col items-start justify-between p-[12px]",children:[i.jsxs("div",{className:"gap-x-xs flex items-center",children:[i.jsx(kAt,{watchlistType:e.watchlist_type}),i.jsx(L,{variant:"tinyRegular",color:"light",children:r})]}),i.jsx("div",{children:i.jsx(L,{variant:"tinyRegular",children:s})})]})});FSe.displayName="WatchlistWidget";const USe=A.memo(({location:e,forecast:t,prefersMetric:n})=>{const r="leading-none line-clamp-1",{$t:s}=Q(),a=n?t?.[0]?.maxtemp_c:t?.[0]?.maxtemp_f,o=n?t?.[0]?.mintemp_c:t?.[0]?.mintemp_f,l=s({defaultMessage:"H: {high} L: {low}",id:"JyTe6EoY40"},{high:a,low:o});return f.useMemo(()=>i.jsxs("div",{className:"mt-sm gap-sm flex flex-row items-baseline justify-between",children:[i.jsx(L,{variant:"tinyRegular",className:r,color:"light",children:e?.name}),i.jsx(L,{variant:"tinyRegular",className:U(r,"min-w-max"),color:"ultraLight",children:l})]}),[l,e?.name,r])});USe.displayName="WeatherBottomSection";const TAt=({icon:e})=>{const t=UC(h3,e)?wv[e]:Kv;return i.jsx(me,{icon:t,size:"md",className:"self-start"})},BSe=A.memo(({forecast:e,prefersMetric:t})=>{const{locale:n}=Q(),r="row-span-3",s="leading-none line-clamp-1";return i.jsx("div",{className:U(r,"mt-sm flex flex-grow justify-between"),children:e?.slice(0,5).map((a,o)=>{const l=t?a.maxtemp_c:a.maxtemp_f;return i.jsxs(xe.div,{className:"gap-xs flex flex-col items-start",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.025*o,ease:_a},children:[i.jsx(L,{className:"leading-none",children:i.jsx(TAt,{icon:a.icon})}),i.jsxs(L,{variant:"tinyRegular",className:U(s,"mt-xs"),children:[l,""]}),i.jsx(L,{variant:"tinyRegular",className:s,color:"light",children:tO(a.dow??"",n)})]},a.dow)})})});BSe.displayName="WeatherForecast";const NAt=({icon:e})=>{const t=UC(h3,e)?wv[e]:Kv;return i.jsx(me,{icon:t,size:"md",className:"-mt-two mr-xs self-start"})},VSe=A.memo(({current:e,prefersMetric:t,setPrefersMetric:n})=>{const r="leading-none line-clamp-1",s=t?e?.temp_c:e?.temp_f,a=e?.condition?.text??"Sunny";return i.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[i.jsx(L,{variant:"base",className:U(r,"min-w-max"),children:i.jsxs("div",{className:"gap-xs flex flex-row items-center justify-center",children:[i.jsx("div",{children:i.jsx(NAt,{icon:e?.condition?.icon})}),i.jsx(L,{variant:"base",className:"tabular-nums",children:i.jsx(ii,{value:s??0,suffix:""})}),i.jsxs("div",{className:"flex",children:[i.jsx("button",{onClick:()=>n(!1),className:"cursor-pointer appearance-none",children:i.jsx(L,{variant:"tiny",color:t?"light":"default",className:U("transition-opacity",t?"opacity-50 hover:opacity-70":"opacity-100"),children:"F"})}),i.jsx(L,{variant:"tiny",color:"light",className:"opacity-50",children:"/"}),i.jsx("button",{onClick:()=>n(!0),className:"cursor-pointer appearance-none",children:i.jsx(L,{variant:"tiny",color:t?"default":"light",className:U("transition-opacity",t?"opacity-100":"opacity-50 hover:opacity-70"),children:"C"})})]})]})}),i.jsx(L,{variant:"tinyRegular",color:"light",className:r,children:a})]})});VSe.displayName="WeatherTopSection";const WSe=A.memo(({data:e,isLoading:t,error:n,size:r="LARGE"})=>{const{prefersMetric:s,setPrefersMetric:a}=fCe();return t?i.jsx($Se,{size:r}):n||!e?i.jsx(HSe,{}):i.jsx(cU,{data:e,size:r,prefersMetric:s,setPrefersMetric:a})});WSe.displayName="WeatherDisplay";const cU=A.memo(({data:e,prefersMetric:t,setPrefersMetric:n,size:r="LARGE"})=>{const{current:s,location:a,forecast:o}=e;return i.jsxs(xe.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)",transition:{opacity:{ease:_a,duration:.4},filter:{ease:_a,duration:.4}}},exit:{opacity:0,filter:"blur(2px)",transition:{opacity:{ease:_a,duration:.3},filter:{ease:_a,duration:.3}}},className:U("gap-sm grid size-full",r==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[i.jsx(VSe,{current:s,prefersMetric:t,setPrefersMetric:n}),i.jsx(USe,{location:a,forecast:o,prefersMetric:t}),r==="LARGE"&&i.jsx(BSe,{forecast:o,prefersMetric:t})]},"success")});cU.displayName="WeatherInner";const AAt={action:{type:"CREATE_THREAD",query:"weather",prefer_pro:!1},uuid:"123",type:"WEATHER",current:{temp_c:20,temp_f:68,condition:{text:"Sunny",icon:"sun",code:"sun"}},location:{name:"San Francisco",region:"California",country:"USA"},forecast:[],is_metric_preferred:!1},$Se=A.memo(({size:e="LARGE"})=>{const t=f.useCallback(()=>{},[]);return i.jsxs(wn,{className:U("relative"),children:[i.jsx("div",{className:"invisible",children:i.jsx(cU,{data:AAt,size:e,prefersMetric:!0,setPrefersMetric:t})}),i.jsxs("div",{className:U("gap-sm absolute inset-0 grid size-full",e==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[i.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[i.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus size-4 rounded-full"}),i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-5 w-12 rounded"})]}),i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-4 w-20 rounded"})]}),i.jsxs("div",{className:"gap-sm flex flex-row items-baseline justify-between",children:[i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-3 w-16 rounded"}),i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-3 w-14 rounded"})]}),e==="LARGE"&&i.jsx("div",{className:U("row-span-3 flex flex-grow justify-between"),children:[1,2,3,4,5].map(n=>i.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus size-4 rounded-full"}),i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus mt-xs h-3 w-6 rounded"}),i.jsx(z,{variant:"subtler",className:"shimmer dark:bg-offsetPlus h-3 w-8 rounded"})]},n))})]})]})});$Se.displayName="WeatherSkeleton";const HSe=A.memo(()=>i.jsx("div",{className:"gap-sm py-md flex size-full flex-col items-center justify-center",children:i.jsxs("div",{className:"gap-xs flex flex-col items-center text-center",children:[i.jsx(me,{icon:qte,size:"lg",className:"opacity-50"}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"mt-sm leading-tight",children:i.jsx(pe,{defaultMessage:"Unable to load weather",id:"uwWuSjxDbt"})}),i.jsx(L,{variant:"tinyRegular",color:"ultraLight",className:"leading-tight",children:i.jsx(pe,{defaultMessage:"Please try again later",id:"aoWE202GwV"})})]})}));HSe.displayName="WeatherError";const zSe=A.memo(({widget:e,setShowCTA:t,size:n})=>{const{location:r,permissionStatus:s}=$h(),a=r?.latitude??null,o=r?.longitude??null,{locale:l}=Q(),{data:c,isLoading:u,error:d}=$e({queryKey:[EO,a,o].map(String),queryFn:()=>nfe({locale:l,location:r,reason:"weather-homepage-widget"})??e,initialData:e,refetchInterval:1e3*60*5,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0});return f.useEffect(()=>{s!==void 0&&s!=="granted"&&t(!0)},[s,t]),i.jsx("div",{className:"px-sm pt-xs",children:i.jsx(WSe,{data:c,isLoading:u,error:d,size:n})})});zSe.displayName="WeatherHomepageWidget";const Cee=e=>ns(e).with({type:"ANNOUNCEMENT"},()=>"announcement").with({type:"DISCOVER"},()=>"discover_single_page").with({type:"QUERY"},t=>t.prompt.toLowerCase()).with({type:"WEATHER"},()=>"weather_current").with({type:"FINANCE"},()=>"finance_ticker").with({type:"SPORTS"},()=>"sports_game").with({type:"WATCHLIST"},()=>"watchlist").with({type:"MULTIQUERY"},t=>(t.prompt??"Ask").toLowerCase()).with({type:"SPACE"},t=>t.title.toLowerCase()).exhaustive(),jAt=(e,t,n,r="home")=>{const{trackEvent:s}=Me(),[a,o]=f.useState(!1),l=f.useMemo(()=>{const v=ns(e).with({type:"ANNOUNCEMENT"},b=>({title:b.title,text:b.text,variant:b.variant})).with({type:"DISCOVER"},b=>({title:b.title})).with({type:"QUERY"},b=>({prompt:b.prompt,query:b.query,uuid:b.uuid,educational_type:b.educational_type})).with({type:"WEATHER"},b=>({location:b.location.name})).with({type:"FINANCE"},b=>({ticker:b.quotes[0]?.symbol,is_implicit:b.is_implicit??!1})).with({type:"WATCHLIST"},b=>({type:b.watchlist_type})).with({type:"SPACE"},b=>({title:b.title})).otherwise(()=>({})),x=e.action.type==="MULTIQUERY"?e.action.actions.map(b=>({...b,type:b.type.toLowerCase()})):{...e.action,type:e.action.type.toLowerCase()};return{widgetType:e.type.toLowerCase(),widgetName:Cee(e),widgetCTA:x,widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontendUUID:n,metadata:v,uuid:e.uuid}},[e,t,n,r]),c=f.useCallback(()=>{a||(s("widget viewed",l),o(!0))},[l,s,a]),u=f.useCallback(()=>{s("widget selected",l)},[l,s]),d=f.useCallback(()=>{s("widget dismissed",l)},[l,s]),m=f.useCallback(()=>{s("widget hovered",l)},[l,s]),p=f.useCallback(v=>{if(e.type!=="MULTIQUERY")return;const x=e.action.actions.find(b=>b.query===v);if(x)return{widgetType:e.type.toLowerCase(),widgetName:Cee(e),widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontentUUID:n,metadata:{prompt:e.prompt,query:x.query,uuid:x.uuid??null}}},[e,t,n,r]),h=f.useCallback(v=>{const x=p(v);x&&s("widget selected",x)},[p,s]),g=f.useCallback(v=>{const x=p(v);x&&s("widget hovered",x)},[p,s]),y=f.useCallback(v=>{const x=p(v);x&&s("widget viewed",x)},[p,s]);return f.useMemo(()=>({trackView:c,trackClick:u,trackDismiss:d,trackHover:m,trackMultiQueryClick:h,trackMultiQueryHover:g,trackMultiQueryView:y}),[u,d,m,h,g,y,c])},RAt=()=>{const{submitQuery:e}=Oa(),t=_t(),{openModal:n}=vt(),r=o0e(),{device:{isWindowsApp:s}}=Et(),{setUserInput:a,setShouldTriggerFocus:o}=I1(),{blankStateSuggestions:l}=ws(),{setSuggestions:c}=jo(),u=Pa(),{onHomepageTitleChange:d}=sAt(),{setFileUploadUpsellTooltipOpen:m}=jo(),{openToast:p}=xn(),h=Qe(),{hasAccessToProFeatures:g}=yt(),{session:y}=Ct(),v=y?.user?.email??"",{isStudent:x}=cE({email:v,reason:"study-mode-access"}),_=S5({onSuccess:Rn,onError:I=>{p(I,"error",5)},origin:"homepage_primer"}),w=f.useCallback(I=>{const D=ja();e({rawQuery:I.query,copilotOverride:I.prefer_pro,attachments:I.attachments,collection:null,newFrontendContextUUID:D,promptSource:"homepage_widget",querySource:"homepage_widget",sourcesOverride:["web"],modelPreferenceOverride:I.prefer_pro?"pplx_pro":"turbo",shouldRedirectToBackendUUID:!0})},[e]),C=f.useCallback(I=>{a(I.input_prefix),o(!0),I.suggestions&&I.suggestions.length>0?c(I.suggestions.map(({query:D,submission_query:F})=>({query:D,submission_query:F??void 0}))):I.suggestions&&I.suggestions.length===0&&l[u]&&c(l[u]),I.homepage_tagline&&d(I.homepage_tagline),I.trigger_location_prompt&&_(),I.trigger_file_tooltip&&m(!0),I.trigger_deep_research&&h&&r(ce.ALPHA,oe.RESEARCH),I.trigger_labs&&h&&g&&r(ce.BETA,oe.STUDIO),I.trigger_study_mode&&h&&x&&r(ce.STUDY,oe.STUDY)},[a,o,h,c,l,d,_,m,r,u,g,x]),S=f.useCallback((I,D)=>{const F=I.find(B=>B.query===D);F&&w(F)},[w]),E=f.useCallback(I=>{t.push(`/page/${I.page_slug}`)},[t]),M=f.useCallback(I=>{s?o2(I):window.open(I,"_blank")},[s]),k=f.useCallback((I,D)=>{const F=I.should_interpolate_template&&D?Hue(I.permalink,D):I.permalink;M(F)},[M]),T=f.useCallback(I=>{s?o2(I.permalink):t.push(I.permalink)},[t,s]),j=f.useCallback(()=>{t.push("/pro")},[t]),R=f.useCallback(I=>{I.deep_research?r(ce.ALPHA):r(ce.PRO)},[r]),O=f.useCallback(I=>{n("watchlistModal",{origin:"home",watchlistType:I.watchlist_type})},[n]),P=f.useCallback(I=>{n("spaceCreate",{existingCollection:null,onCreate:null,content:{title:I.space_title??void 0,description:I.space_description??void 0,instructions:I.space_instructions??void 0,emoji:I.space_emoji??void 0}})},[n]),N=f.useCallback(I=>{I.modal_name&&n(I.modal_name)},[n]);return f.useMemo(()=>({createThreadAction:w,populateInputAction:C,multiQueryCreateThreadAction:S,openPageAction:E,openExternalUrlAction:k,openInternalUrlAction:T,openPaywallAction:j,enableProAction:R,openWatchlistModalAction:O,createSpaceAction:P,openModalAction:N}),[P,w,R,S,k,T,N,E,j,O,C])},IAt=e=>["ANNOUNCEMENT","QUERY"].includes(e.type),GSe=A.memo(({onClick:e,onMouseEnter:t,href:n,className:r,children:s,disableHoverAnimation:a=!1})=>{const o=n?MSe:xe.div,l=f.useMemo(()=>({opacity:.5}),[]),c=f.useMemo(()=>({opacity:1}),[]),u=f.useMemo(()=>({scale:.98,transition:{ease:hn,duration:.15}}),[]),d=f.useMemo(()=>({scale:{ease:hn,duration:.3},opacity:{ease:_a,duration:.3}}),[]);return i.jsx(o,{initial:l,animate:c,whileHover:a?void 0:{opacity:.75,transition:{duration:.15,ease:na}},whileTap:u,transition:d,className:U(r,a?"":"cursor-pointer"),href:n,onClick:e,onMouseEnter:t,children:i.jsx(z,{variant:"subtler",className:"relative size-full select-none overflow-hidden rounded-lg",children:s})})});GSe.displayName="AnimatedWidgetContainer";const qSe=A.memo(({widget:e,size:t,position:n,frontendSessionUUID:r,widgetLocation:s="home"})=>{const a="homepage-widget-base",[o,l]=f.useState(!1),[c,u]=f.useState(!1),d=Qe(),{showSuggestDropdown:m}=ws(),{trackView:p,trackHover:h,trackClick:g,trackDismiss:y,trackMultiQueryClick:v,trackMultiQueryHover:x,trackMultiQueryView:b}=jAt(e,n,r,s),{createThreadAction:_,openPageAction:w,openExternalUrlAction:C,openInternalUrlAction:S,openPaywallAction:E,enableProAction:M,openWatchlistModalAction:k,multiQueryCreateThreadAction:T,populateInputAction:j,createSpaceAction:R,openModalAction:O}=RAt(),{mutate:P}=xZe({widget:e,reason:a}),N=Fo(),{session:I}=Ct(),D=f.useMemo(()=>({email:I?.user?.email??"",deviceId:N?.device_id??"",browserVersion:N?.browser_version??"",osName:void 0??""}),[I?.user?.email,N?.device_id,N?.browser_version]),B=(H=>ns(H).with({type:"CREATE_THREAD"},Z=>`/search/new?q=${Z.query}&source=homepage_widget`).with({type:"OPEN_PAGE"},Z=>`/page/${Z.page_slug}`).with({type:"EXTERNAL_URL"},Z=>Z.should_interpolate_template?Hue(Z.permalink,D):Z.permalink).with({type:"INTERNAL_URL"},Z=>Z.permalink).otherwise(()=>{}))(e.action),V=f.useRef(!1);f.useEffect(()=>{if(!V.current){if(e.type!=="MULTIQUERY")p();else for(const H of e.queries)b(H);V.current=!0}},[p,e,b]);const $=rR(e),G=f.useCallback(H=>{B&&H.preventDefault(),ns(e.action).with({type:"CREATE_THREAD"},Z=>{_(Z)}).with({type:"OPEN_PAGE"},Z=>w(Z)).with({type:"EXTERNAL_URL"},Z=>C(Z,D)).with({type:"PAYWALL"},E).with({type:"INTERNAL_URL"},Z=>S(Z)).with({type:"ENABLE_PRO"},Z=>M(Z)).with({type:"OPEN_WATCHLIST_MODAL"},Z=>k(Z)).with({type:"MULTIQUERY"},()=>{}).with({type:"POPULATE_INPUT"},Z=>{j(Z)}).with({type:"CREATE_SPACE"},Z=>{R(Z)}).with({type:"OPEN_MODAL"},Z=>{O(Z)}).exhaustive(),IAt(e)&&e.dismissable&&d&&(P(),y()),e.type!=="MULTIQUERY"&&g()},[B,e,E,d,_,w,C,D,S,M,k,R,j,P,y,g,O]),X=f.useCallback(()=>{e.type!=="MULTIQUERY"&&h()},[e.type,h]),Y=f.useMemo(()=>ns(e).with({type:"ANNOUNCEMENT"},H=>i.jsx(bSe,{widget:H,size:t})).with({type:"DISCOVER"},H=>i.jsx(_Se,{widget:H,size:t})).with({type:"QUERY",educational_type:"primer"},H=>i.jsx(NSe,{widget:H,onClick:G,onMouseEnter:X,index:n})).with({type:"QUERY",educational_type:"project"},H=>i.jsx(ASe,{widget:H})).with({type:"QUERY"},H=>i.jsx(oU,{widget:H,size:t})).with({type:"WEATHER"},H=>i.jsx(zSe,{widget:H,setShowCTA:u,size:t})).with({type:"FINANCE"},H=>i.jsx(SSe,{widget:H,size:t})).with({type:"SPORTS"},H=>i.jsx(PSe,{widget:H,size:t})).with({type:"WATCHLIST"},H=>i.jsx(FSe,{widget:H,size:t})).with({type:"SPACE"},H=>i.jsx(jSe,{widget:H,size:t})).with({type:"MULTIQUERY"},H=>i.jsx(TSe,{widget:H,onQueryClick:Z=>{T(H.action.actions,Z),v(Z)},onQueryHover:Z=>x(Z)})).otherwise(()=>(ee.error(new Error(`No HomepageWidget found for type: ${e.type}`)),null)),[e,t,G,X,n,T,v,x]),W=f.useMemo(()=>ns(e.type).with("WEATHER",()=>i.jsx(CSe,{setShowCTA:u})).otherwise(()=>null),[e.type]);return!Y||m?null:i.jsxs("div",{className:U("relative",cAt[t]),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[$?Y:i.jsx(GSe,{href:B,onClick:G,onMouseEnter:X,className:"size-full",disableHoverAnimation:e.type==="MULTIQUERY",children:Y}),i.jsx(it,{children:c&&o&&i.jsx(xe.div,{initial:{opacity:.5},animate:{opacity:1},exit:{opacity:0},transition:{scale:{ease:hn,duration:.2},opacity:{ease:_a,duration:.2}},className:U("bg-subtler absolute inset-0 flex justify-center rounded-lg p-[12px]",t==="LARGE"?"items-end":"items-center"),children:W})})]})});qSe.displayName="HomepageWidgetBase";let See=1234567;function PAt(e){e!==void 0&&(See=e);let t=See+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}const OAt=5,KSe=f.memo(({children:e})=>i.jsx("div",{className:"gap-sm grid grid-cols-6",style:{gridTemplateRows:"repeat(auto-fit, 64px)",gridAutoRows:"64px"},children:e}));KSe.displayName="GridContainer";const LAt=({children:e})=>i.jsx("div",{className:"gap-sm flex h-[32px] flex-row flex-wrap justify-center overflow-hidden",children:e});var ku;(function(e){e[e.Comet=0]="Comet",e[e.Project=1]="Project"})(ku||(ku={}));const DAt=e=>{switch(e){case ku.Comet:return i.jsx(pe,{defaultMessage:"See what Comet can do",id:"TO5vylizup"});case ku.Project:return i.jsx(pe,{defaultMessage:"Projects created with Perplexity",id:"6XX3tVQOXy"})}},FAt=e=>{switch(e){case ku.Comet:return i.jsx(ro,{size:16});case ku.Project:return i.jsx(BC,{size:16})}},UAt=({variant:e,children:t})=>{const n=mt(),{$t:r}=Q(),s=f.useCallback(()=>{n.invalidateQueries({queryKey:[Rp]})},[n]);return e?i.jsxs("div",{children:[i.jsxs("div",{className:"gap-sm pb-sm flex items-center justify-between",children:[i.jsxs("div",{className:"gap-xs flex flex-row items-center",children:[i.jsx(L,{variant:"smallBold",color:"super",children:FAt(e)}),i.jsx(L,{variant:"smallBold",color:"light",children:DAt(e)})]}),i.jsx("div",{children:i.jsx(Te,{size:"tiny",onClick:s,text:r({defaultMessage:"See more",id:"yoLwRWw99S"}),icon:TR})})]}),t]}):t},YSe=f.memo(({widgets:e,widgetLocation:t="home"})=>{const n=f.useMemo(()=>ja(),[]),r=vYe(),s=e.length>0;f.useEffect(()=>{s&&r("web.frontend.homepage_widgets_ttv")},[r,s]);const{flexWidgets:a,gridWidgets:o,headingVariant:l}=f.useMemo(()=>{const d=e.filter(rR).sort((h,g)=>PAt(h.seed)-.5).slice(0,OAt),m=e.filter(h=>!rR(h)),p=uAt(e)?ku.Comet:dAt(e)?ku.Project:void 0;return{flexWidgets:d,gridWidgets:m,headingVariant:p}},[e]),c=f.useCallback(u=>u.map((d,m)=>i.jsx(qSe,{widget:d,size:d.size??"MEDIUM",position:m,frontendSessionUUID:n,widgetLocation:t},d.uuid)),[n,t]);return i.jsx(it,{initial:!1,children:i.jsx(UAt,{variant:l,children:i.jsxs("div",{className:"gap-md grid grid-cols-1",children:[a.length>0&&i.jsx(LAt,{children:c(a)}),o.length>0&&i.jsx(KSe,{children:c(o)})]})})})});YSe.displayName="WidgetsClient";const QSe=f.memo(()=>{const e="homepage-widgets-wrapper",{locale:t}=Q(),n=Qe(),r=f.useMemo(()=>{if(!n)return gZe(rn(),bR(),t)},[n,t]),s=Pa(),a=f.useMemo(()=>s!==oe.STUDIO?{}:{searchMode:oe.STUDIO},[s]),{data:o}=$e({queryKey:[Rp],queryFn:()=>yZe({urlPath:r,params:a,reason:e}),gcTime:1/0}),l=mt(),c=f.useRef(!1);return f.useEffect(()=>{if(!c.current){c.current=!0;return}l.invalidateQueries({queryKey:[Rp]})},[l,a]),o?i.jsx(YSe,{widgets:o}):null});QSe.displayName="HomepageWidgetsWrapper";const XSe=f.memo(()=>{const{isHomepageWidgetsDisabled:e}=dn();return e?null:i.jsx(zr,{children:i.jsx("div",{className:"animate-in fade-in duration-300",children:i.jsx(QSe,{})})})});XSe.displayName="HomepageWidgets";const BAt=({reason:e})=>{const t=mt(),n=Dt(),r=n?.get("stripe_checkout"),s=n?.get("is_enterprise")==="true",{trackEvent:a}=Me(),o=r!=null,l=r==="success";f.useEffect(()=>{o&&s&&(async()=>{try{const[u,d]=await Promise.all([l?t.fetchQuery({queryKey:["refresh-org-subscription-status"],queryFn:()=>ule({reason:e})}):null,t.fetchQuery({queryKey:["user-org-data"],queryFn:()=>$S({reason:e})})]),m=d?.organization?.uuid;m!=null&&m!==void 0&&a("org payment portal returned",{stripeResult:r??"",orgUUID:m??"",source:n?.get("origin")??""})}catch(u){ee.log("Failed to refresh org subscription:",u)}})()},[])},VAt=()=>{const e=f.useRef(!1),t=ls(),n=Qe(),{openVisitorLoginUpsell:r}=Xn({enabled:!n}),{data:s}=TO({enabled:t&&!e.current}),a=E1(s??void 0);f.useEffect(()=>{e.current||t&&s&&s.app_location===$l.MODAL&&(a(),e.current=!0)},[t,n,r,s,a])},X6=dt({[E7e]:{id:"Sj7bs8Ti07",defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro"},[M7e]:{id:"8MOEZchxNH",defaultMessage:"Sign in with your USC email to unlock one month free of Perplexity Pro"},[k7e]:{id:"4d/Zn7HZQx",defaultMessage:"Sign in with your UC Berkeley email to unlock one month free of Perplexity Pro"},[T7e]:{id:"DXeXI7X4DZ",defaultMessage:"Sign in with your IITM email to unlock one year free of Perplexity Pro"},[N7e]:{id:"sBfq8LkRp0",defaultMessage:"Sign in with your ac.kr email to unlock one year free of Perplexity Pro"}}),WAt=()=>{const e=Dt(),{$t:t}=Q(),{openModal:n}=vt(),r=co(),{device:{userAgent:s}}=Et(),[a,o]=f.useState(!1),l=Qe(),{trackEvent:c}=Me(),{openVisitorLoginImageUpsell:u}=Xn({enabled:!0});f.useEffect(()=>{if(typeof window>"u")return;const d=e?.get(S7e),m=[];if(e?.get(GW)&&(m.push(GW),n("onboardingModal",{userAgent:s})),e?.get(qW)&&(m.push(qW),c("default search extension uninstalled",{isBrowserExtension:!0})),e?.get(YW)&&(m.push(YW),r({origin:Ie.MAX_URL_PAYWALL,pitchMessage:{title:t({defaultMessage:"Introducing Perplexity Max",id:"v1bpoVO4Rq"}),description:t({defaultMessage:"Maximize your curiosity with unlimited access to Perplexity Labs",id:"AX3/N9NedQ"})}})),d&&GBe(d),!a&&(e?.get(C7e)||d&&X6[d])){if(l)return;o(!0);const p=d&&X6[d]?t(X6[d]):t({defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro",id:"Sj7bs8Ti07"});u({origin:Ie.BACK_TO_SCHOOL,title:p,image:j7e,imageAlt:R7e,loginButtonsStyle:"highlightBackToSchool"})}if(m.length>0){const p=Array.from(e?.entries()??[]).filter(([g])=>!m.includes(g)),h=new URLSearchParams;p.forEach(([g,y])=>{h.set(g,y)}),Gh(Object.fromEntries(p))}},[e,n,r,s,a,l,t,c,u])},$At=()=>{const e=Qe(),{openModal:t}=vt(),{$t:n}=Q(),{openVisitorLoginUpsell:r}=Xn({enabled:!0}),s=f.useCallback(a=>{if(ee.info("Thread access not allowed",{uuidOrSlug:a,isUserLoggedIn:e}),e)t("requestAccessModal",{uuidOrSlug:a});else{const o=`${window.location.origin}/search/${a}`;r({origin:Ie.REQUEST_ACCESS_LOGIN_GATE,title:n({defaultMessage:"This thread is private",id:"PX12OU86rT"}),description:n({defaultMessage:"Sign in if you are the owner of this thread, or to request access",id:"/A9MF2B0ub"}),sheetModalVariant:"centered-sheet",overrideRedirectUrl:o})}},[n,e,t,r]);return f.useMemo(()=>({handleRequestAccess:s}),[s])};function ZSe(){const{isSplashPageDismissed:e}=dn(),t=PBe(),{isMobileUserAgent:n}=ye(),r=Qe(),s=Nt(),a=Dt(),o=JP(),l=s==="/"&&(a===null||a.size===0);return!(!n||r||e||!l||t||o||fp())}const HAt="https://services.sheerid.com/verify",zAt="681d40e03e7a8077098cb1b6",GAt="685b438c24925a24c23ef56f",qAt="68a6465511f17709c2395bc2",KAt="68a6466f11f17709c2395d7c",Eee={prod:{student:zAt,educator:qAt},test:{student:GAt,educator:KAt}},YAt="referral_code",JSe="externalUserId",QAt="sheerid_url",XAt="country",ZAt="locale",JAt="verificationId",Mee="https://services.sheerid.com",e8t={en:"en-US",es:"es-ES",bn:"bn-IN",hi:"hi-IN"};function t8t(e){const t=e?new Intl.Locale(e).language:null;return t?e8t[t]||t:null}function WWt(e){const{verificationType:t,userId:n,referralCode:r,hostname:s,countryCode:a,locale:o}=e,l=o?t8t(o):null,d=(!s||Gme(s)||Bme(s)?Eee.prod:Eee.test)[t],m=new URL(`${HAt}/${d}/`);return m.searchParams.set(JSe,n),a&&m.searchParams.set(XAt,a),l&&m.searchParams.set(ZAt,l),r&&m.searchParams.set(YAt,r),m}const n8t=e=>{if(e==="pro"||e==="max")return e},eEe=({confirmationRedirectsToHomepage:e}={})=>{const t=Dt(),n=t?.get("stripe_checkout"),r=t?.get("upsell"),s=t?.get("flow_type"),a=t?.get("upgrade_max"),o=t?.get("subscription_tier"),l=co(),{openModal:c}=vt(),{formatMessage:u}=Q(),{session:d}=Ct(),m=d?.user?.id,p=t?.get(JSe),h=t?.get(JAt),g=t?.get(QAt),y=f.useCallback(()=>{const E=s??"unknown",M=a==="success",k=n8t(o);c("subSuccessModal",{flowType:E,upgradeMax:M,subscriptionTier:k,confirmationRedirectsToHomepage:e})},[s,c,a,o,e]),v=f.useCallback(({isTasksAutomationsRenameEnabled:E})=>{$Be(!0),l({origin:Ie.TASKS_PAGE,pitchMessage:E?{title:u({defaultMessage:"Want to use Perplexity Automations?",id:"uujTvYgZRp"}),description:u({defaultMessage:"Upgrade to Pro to create and manage automations.",id:"9vQrVenMdj"})}:{title:u({defaultMessage:"Want to use Perplexity Tasks?",id:"u3CPeNV09q"}),description:u({defaultMessage:"Upgrade to Pro to create and manage tasks.",id:"oUsys+n/zQ"})}})},[u,l]),x=f.useCallback(E=>{c("referralSuccessModal",{monthsAwarded:E})},[c]),b=f.useCallback(async()=>{const E=await TKe({verificationId:h,reason:"referral-success-modal"});x(E.months_awarded)},[h,x]),_=f.useCallback(()=>{const E=setTimeout(()=>{c("referralErrorModal",null)},1e3);return()=>clearTimeout(E)},[c]),w=f.useCallback(()=>{if(g)try{const E=new URL(g.toString());E.hostname===new URL(Mee).hostname&&E.protocol===new URL(Mee).protocol&&c("sheerIdRedirectModal",{sheerIdUrl:E.toString()})}catch{ee.warn("Invalid SheerId redirect URL",{sheerIdRedirectParam:g})}},[c,g]),{variation:C,loading:S}=Ff(!1);f.useEffect(()=>{(n==="success"||a==="success")&&y(),r==="tasks"&&(S||v({isTasksAutomationsRenameEnabled:C})),g&&w(),h&&(!!p&&!!h&&p===m?b():_())},[m,n,r,p,h,g,a,y,v,x,_,w,b,C,S])},tEe=A.memo(({show:e,icon:t,text:n,variant:r})=>i.jsx(it,{children:e&&i.jsx(xe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:[.16,1,.3,1]},style:{overflow:"hidden"},children:i.jsxs(z,{variant:r,className:"p-sm gap-sm flex items-center rounded-t-2xl",children:[t,i.jsx("div",{className:"flex-1",children:n})]})})}));tEe.displayName="AskInputEducationalHeader";const r8t=()=>{const e=Ls(),{value:t}=At({flag:"user-education-long-query",defaultValue:!1,subjectType:"visitor_id",extraAttributes:{queryCount:String(EMe())},skip:e});return t},nEe=A.memo(()=>{const e=r8t(),t=FO(),n=f.useMemo(()=>t?.length>5&&t?.length<100,[t]),r=f.useMemo(()=>i.jsxs(L,{variant:"tiny",children:[i.jsx(L,{inline:!0,variant:"tinyBold",as:"span",children:i.jsx(pe,{defaultMessage:"Try adding more detail: ",id:"F1iv3quHId"})}),i.jsx(pe,{defaultMessage:"Perplexity works better when you give more context or share your goals",id:"q5qPv0neSZ"})]}),[]),s=f.useMemo(()=>i.jsx(me,{icon:Qke,size:"md",className:"text-super"}),[]);return i.jsx(tEe,{show:e&&n,icon:s,text:r})});nEe.displayName="AskInputLongQueriesEducationalHeader";const rEe=A.memo(({dismiss:e})=>{const t=N1({origin:"mweb-splash"}),n=f.useMemo(()=>i.jsx(pe,{id:"Wpt2mdD04V",defaultMessage:"Chat now"}),[]);return i.jsxs("div",{className:U("p-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[i.jsx("div",{className:"right-sm top-sm absolute",children:i.jsx(Te,{pill:!0,variant:"noBackground",size:"small",icon:Lt,extraCSS:"text-foreground md:hover:text-quiet ",onClick:e})}),i.jsx(wE,{}),i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"aspect-square size-20 overflow-hidden rounded-full shadow-lg",children:i.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),i.jsxs("div",{className:U("flex flex-col items-center"),children:[i.jsx(L,{variant:"entry-title",color:"default",textCenter:!0,children:i.jsx(pe,{id:"2WQt3MyLfa",defaultMessage:"Ask anything, anywhere"})}),i.jsx(L,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:i.jsx(pe,{id:"ZTpOAItHHA",defaultMessage:"We're on WhatsApp"})}),i.jsx(L,{variant:"smallMono",color:"super",textCenter:!0,className:"mt-4",children:i.jsx(pe,{id:"b0JEE9uTQq",defaultMessage:"+1 (833) 436-3285"})})]})]}),i.jsx("div",{className:"flex w-full flex-col items-center",children:i.jsx(ge,{variant:"inverted",size:"large",onClick:t,icon:FR,text:n})})]})});rEe.displayName="WhatsAppInterstitial";const s8t=1;function a8t({}){const[e,t]=f.useState(!1),{actions:n}=dn(),{trackEvent:r}=Me(),{$t:s}=Q(),a=()=>{t(!1),n.setIsSplashPageDismissed(!0,s8t),r("mweb splash page dismissed",{}),document.head.querySelector("[name='theme-color']")?.remove()},{mwebUpsellWhatsApp:o,loadingMwebUpsellWhatsApp:l}=A1();f.useEffect(()=>{l||t(!0)},[l]);const c=f.useMemo(()=>({title_1:s({defaultMessage:"Start searching with AI",id:"xADWoMp8Ck"}),subtext_1:s({defaultMessage:"It's better in the app.",id:"E7ck+HTwLo"}),button_text:s({defaultMessage:"Download now",id:"OmsvLbYdpQ"}),button_link:"http://perplexity.ai/download"}),[s]);return i.jsx("div",{className:U("bg-base fixed inset-0 flex size-full flex-grow flex-col md:hidden"),children:i.jsx(k7,{open:e,children:i.jsx(T7,{children:i.jsxs(PS,{children:[i.jsxs(YI,{children:[i.jsx(OS,{children:s({defaultMessage:"Know it all",id:"F6NJO530sQ"})}),i.jsx(N7,{children:s({defaultMessage:"Search and discover with AI",id:"ydYv4/6Poi"})})]}),i.jsx("div",{className:U("bg-base fixed inset-0 flex size-full flex-grow flex-col","z-10"),children:o?i.jsx(rEe,{dismiss:a}):i.jsx(wfe,{dismiss:a,campaignData:c,translated:!0})})]})})})})}function o8t({}){return ZSe()?i.jsx(a8t,{}):null}var Zo={};const i8t=dt({threadAccessNotAllowed:{defaultMessage:"Cannot view this thread.",id:"PWzBFTUMYQ"},threadExpired:{defaultMessage:"This thread is expired and cannot be viewed.",id:"kxDY3MhDfI"},invalidThread:{defaultMessage:"This thread does not exist.",id:"mTtce3cuRp"},threadStreamError:{defaultMessage:"Unable to start thread.",id:"d3yfUXi5SD"},pageAccessNotAllowed:{defaultMessage:"Cannot view this page.",id:"2AsVl5rMny"},spaceAccessNotAllowed:{defaultMessage:"Cannot view this Space.",id:"kUZg0JvZI+"},subscriptionAlreadyActive:{defaultMessage:"Unable to apply discount code to an active subscription.",id:"o2MqqftZuL"},unableToGrantAccess:{defaultMessage:"Unable to make this thread shareable, ensure you are logged in as the owner of the thread.",id:"F8a+v/zyZO"},collectionAccessNotAllowed:{defaultMessage:"Cannot view this collection.",id:"miGPZEm/qm"},invalidCollection:{defaultMessage:"This collection does not exist.",id:"IKZz6s6MYd"}}),l8t=he(async()=>{const{CDN:e}=await ae(async()=>{const{CDN:t}=await import("./cdn-DdrI0kug.js");return{CDN:t}},__vite__mapDeps([130,3,1,6,5,4]));return{default:e,critical:!0}}),sEe=A.memo(function(){const t="home-ask-input",[n,r,s]=FE({csrRedirect:!0}),{isMobileStyle:a}=ye(),{currentOpenedModal:o}=vt(),l=Dt(),c=ZSe(),d=f.useMemo(()=>l?.get("openSearchModeSelector"),[l])==="true",{mentionTypeaheadOptions:m,inputPlaceholder:p,onTriggerTypeahead:h}=rD({reason:t,isLazy:!0}),g=f.useMemo(()=>i.jsx(nEe,{}),[]);return i.jsxs(i.Fragment,{children:[i.jsx(F3,{...s,value:n,json:r,querySource:"home",autofocus:!a&&o===null&&!c&&!d,initialLayout:Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD?"compact":"expanded",minRows:Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD?1:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD,autosuggestionsEnabled:!Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD,dropdownPlacement:Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"top":"bottom",headerComponent:g,dropdownClassName:Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"shadow-[0_-30px_30px_oklch(var(--background-base-color))]":void 0,useLexical:!0,mentionTypeaheadOptions:m,placeholder:p??s.placeholder,onTriggerTypeahead:h,layoutKey:"home-ask-input",disableModeSelector:!!Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD}),i.jsx(l8t,{})]})});sEe.displayName="HomeAskInput";const aEe=A.memo(function(){const{$t:t}=Q(),{hasAccessToProFeatures:n}=yt(),r=Qe(),{actions:{clearCurrentStreamId:s,clearCurrentThreadId:a}}=Ht(),{device:{isIOS:o},env:{isLocalhost:l}}=Et(),{isMobileUserAgent:c,isMobileStyle:u}=ye(),[d,m]=f.useState(null),{openModal:p}=vt(),{handleRequestAccess:h}=$At(),{trackEvent:g}=Me(),y=Dt(),{mwebUpsellWhatsApp:v,loadingMwebUpsellWhatsApp:x}=A1(),{handleAppDownloadClicked:b}=Nf("mobile-header"),_=N1({origin:"mobile-header"});VAt();const w=rn(),{openVisitorLoginUpsell:C}=Xn({enabled:!0}),S=f.useRef(null),E=f.useMemo(()=>y?.get("error"),[y]),M=f.useMemo(()=>y?.get("id"),[y]),k=dn(),T=f.useRef(!1),j=f.useMemo(()=>!!(y?.get(Sl)||y?.get(A7e)==="deep_research"),[y]);eEe({confirmationRedirectsToHomepage:!0}),BAt({reason:"search-inner-home"}),WAt(),f.useEffect(()=>{s(),a()},[s,a]),f.useEffect(()=>{T.current||k.welcomeBackGateImpressions>=u7||w||r||c||l||_R()&&wR()&&(C({origin:Ie.WELCOME_BACK,title:t({defaultMessage:"Welcome back!",id:"0MXX5Bf7Ca"}),description:t({defaultMessage:"Log in to continue your journey.",id:"lSkVbenSxm"}),sheetModalVariant:"centered-sheet"}),T.current=!0,k.actions.setWelcomeBackGateImpressions(k.welcomeBackGateImpressions+1))},[w,l,c,r,p,t,k.welcomeBackGateImpressions,k.actions,C]),f.useEffect(()=>{if(E){const N=E,I=M;N===Dd.ThreadAccessNotAllowed&&I?h(I):(ee.info("Error redirect",{errorQueryParam:E}),m(t(i8t[N]))),eJe()}},[E,h,M,p,t]);const R=f.useCallback(()=>{if(v){_();return}g("app download button clicked",{origin:"mobile-header"}),b()},[b,_,v,g]),O=f.useMemo(()=>({homepageTitle:t({defaultMessage:"What do you want to know?",id:"CMjGvpa5Fr"})}),[t]),P=f.useMemo(()=>v?FR:o?qv:DR,[v,o]);return i.jsxs(i.Fragment,{children:[i.jsx(j1,{childrenWidth:Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD?"none":"default",mobileHeader:!1,children:i.jsxs("div",{className:"erp-sidecar:px-md sm:px-md md:px-lg isolate mx-auto size-full sm:max-w-screen-md",children:[i.jsxs("div",{className:"relative flex h-full flex-col",children:[i.jsxs(z,{className:"py-md h-headerHeight flex items-center justify-between border-b md:hidden",children:[i.jsxs("div",{className:"gap-x-xs -ml-sm flex items-center",children:[i.jsx(AO,{}),i.jsx(Na,{color:"mixed",isPro:n,size:"small"})]}),i.jsx("div",{className:"gap-x-sm flex items-center",children:c&&!x&&i.jsx(pl,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:i.jsx("div",{className:"animate-in fade-in duration-300",children:i.jsx(ge,{size:"small",icon:P,text:t(v?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),pill:!0,variant:"primary",onClick:R})})})})]}),i.jsx(tAt,{initialValue:O,children:i.jsxs(z,{className:U("static w-full grow flex-col items-center justify-center md:mt-0 md:flex","z-10"),ref:S,children:[i.jsx("div",{className:"px-md relative flex size-full flex-col justify-center md:h-auto md:px-0",children:i.jsx(xSe,{})}),i.jsxs(sf,{children:[i.jsx("div",{className:U("w-full",{"bottom-md absolute":!!Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD||u,"bottom-md mb-md animate-in fade-in fill-mode-both slide-in-from-bottom absolute delay-200 duration-300 ease-in-out":!!Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD}),children:i.jsx(sEe,{})}),c?null:i.jsx("div",{className:"relative w-full",children:i.jsx("div",{className:"mt-lg absolute w-full",children:i.jsx(XSe,{})})})]})]})})]}),i.jsx(_u,{isVisible:d!=null,variant:"error",message:d,timeout:7})]})}),j&&i.jsx(sU,{}),!Zo.NEXT_PUBLIC_IS_SIDECAR_BUILD&&i.jsx(pl,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:i.jsx(o8t,{})})]})});aEe.displayName="Home";const c8t={activeStreamingThreads:[],entries:{},refreshState:()=>{},queuedThreadParams:[],enqueueThreadParams:()=>{},cancelQueuedThread:()=>{},recentlyBlockedEntries:[],addRecentlyBlockedEntry:()=>{},removeRecentlyBlockedEntry:()=>{},isDragging:!1,setIsDragging:()=>{}},oEe=f.createContext(c8t),u8t=({children:e})=>{const{session:t}=Ct(),n=f.useMemo(()=>{switch(t?.user.subscription_tier){case"max":return 10;case"pro":return 5;default:return 3}},[t?.user.subscription_tier]),r=Ia(),{trackEvent:s}=Me(),{submitQuery:a}=Oa(),[o,l]=f.useState([]),[c,u]=f.useState([]),[d,m]=f.useState(!1),p=T=>{T?.status===cr.BLOCKED?u(j=>j.some(O=>O.message.backend_uuid===T.backend_uuid)?j:[...j,{message:T}]):T?.status===cr.COMPLETED&&u(j=>j.filter(R=>R.message.backend_uuid!==T.backend_uuid))},h=T=>{u(j=>j.filter(R=>R.message.backend_uuid!==T))},[g,y]=f.useState(()=>r.getState()),v=f.useCallback(()=>{y(r.getState())},[r]);f.useEffect(()=>r.subscribe(j=>{y(j)}),[r]);const{activeStreams:x,streams:b,threads:_,entries:w}=g,C=f.useMemo(()=>S6t({activeStreams:x,streams:b,threads:_,entries:w}),[x,b,_,w]),S=f.useCallback(T=>{const j=T.newFrontendContextUUID||dr();a({newFrontendContextUUID:j,rawQuery:T.query,attachments:T.attachments,promptSource:"user",querySource:"internal",mentions:T.mentions,collection:null,cometIsMissionControl:!0}),s("mission control query submitted",{frontendContextUUID:j,numberOfActiveThreads:C.length+1})},[a,s,C.length]);f.useEffect(()=>{if(C.length<n&&ea(o)){const T=o[0];l(j=>j.slice(1)),S(T)}},[C.length,S,o,n]);const E=f.useCallback(T=>{if(C.length<n)S(T);else{const j=dr();l(R=>(s("mission control query enqueued",{frontendContextUUID:j,numberOfActiveThreads:C.length,numberOfQueuedThreads:R.length+1}),R.concat([{...T,newFrontendContextUUID:j}])))}},[C.length,S,s,n]),k={activeStreamingThreads:C,entries:w,refreshState:v,queuedThreadParams:o,enqueueThreadParams:E,cancelQueuedThread:T=>{l(j=>j.filter(R=>R.newFrontendContextUUID!==T))},recentlyBlockedEntries:c,addRecentlyBlockedEntry:p,removeRecentlyBlockedEntry:h,isDragging:d,setIsDragging:m};return i.jsx(oEe.Provider,{value:k,children:e})},$Wt=()=>{const e=f.useContext(oEe);if(!e)throw new Error("useUserInput must be used within UserInputProvider");return e},d8t=he(async()=>{const{MissionControlPage:e}=await ae(async()=>{const{MissionControlPage:t}=await import("./MissionControlPage-CnhC8MOa.js");return{MissionControlPage:t}},__vite__mapDeps([131,3,1,4,5,132,6,133,134,135,136,76,137,138,67,17,18,139,140]));return{default:e}}),iEe=A.memo(()=>i.jsx(LGe,{children:i.jsx(u8t,{children:i.jsx(d8t,{})})}));iEe.displayName="MissionControlPageComponent";const f8t=(e,t,n)=>{const r=f.useRef(!1),{submitQuery:s}=Oa(),a=_t(),o=Due(),{env:{isLocalhost:l}}=Et();f.useLayoutEffect(()=>{l||(r.current=!1)},[t,l]),f.useLayoutEffect(()=>{const u=new URL(window.location.href).searchParams,d=u.get("copilot"),m=u.get("pro"),p=u.get("q"),h=u.get("utm_source"),g=u.get("in_page"),y=u.get("attachments"),v=u.get("tabs"),x=u.get("nav_suggestions"),b=u.get("sources"),_=u.get("pc"),w=u.get("pt");_&&HBe(_),w&&YBe(w);const C=u.get("qabi")??void 0,S=y?.replace(/[[\]]/g,"").split(","),E=u.get("newFrontendContextUUID"),M=[];if(v)try{const k=JSON.parse(v);if(Array.isArray(k))for(const T of k)M.push({type:"tab",id:T,url:""})}catch(k){ee.error("Failed to parse tabsParam:",k)}if(e&&p&&!E&&!r.current){const k=Array.isArray(p)?p[0]:p,T=u.get("source");if(k==="pending")return;s({rawQuery:k,copilotOverride:d==="true"||m==="true"||Pue(h??void 0),collection:null,newFrontendContextUUID:dr(),frontendUUID:t,attachments:S,inPage:g??void 0,promptSource:T==="homepage_widget"?"homepage_widget":"user",querySource:T==="homepage_widget"?"homepage_widget":"default_search",utmSource:h??void 0,quickActionButtonId:C,isNavSuggestionsDisabled:x==="false",modelPreferenceOverride:ce.DEFAULT,shouldRedirectToBackendUUID:!1,mentions:M,sourcesOverride:b?pnt(b?.split(",")):void 0,shouldUsePageStartTime:!0,onThreadSlugReceived:j=>{a.replace(`/search/${j}`,"Omni search query")}}),r.current=!0,MMe()}},[e,s,t,o,a,n])},uU=()=>{const{value:e}=jr({flag:"labs-side-canvas",defaultValue:!1});return e},m8t=he(async()=>{const{SideCanvasViewer:e}=await ae(async()=>{const{SideCanvasViewer:t}=await import("./SideCanvasViewer-C1OrwslK.js");return{SideCanvasViewer:t}},__vite__mapDeps([141,3,1,4,142,137,6,138,143,67,5,17,18,66,144,145]));return{default:e}}),lEe=f.createContext({openCanvas:()=>{},closeCanvas:()=>{},isCanvasOpen:!1,doCanvasAction:()=>{},setCanvasDispatch:()=>{},setCanvasState:()=>{}}),cEe=()=>{const e=f.useContext(lEe),t=uU();return f.useMemo(()=>({...e,canUseCanvas:t}),[t,e])},uEe=A.memo(({children:e})=>{const[t,n]=f.useState(!1),r=f.useRef(void 0),[s,a]=f.useState(),o=f.useCallback(()=>{n(!0)},[]),l=f.useCallback(()=>{n(!1),r.current=void 0},[]),c=f.useRef([]),u=f.useCallback(p=>{r.current?r.current(p):c.current.push(p)},[]),d=f.useCallback(p=>{r.current=p,c.current.length>0&&p&&(c.current.forEach(h=>p(h)),c.current=[])},[]),m=f.useMemo(()=>({openCanvas:o,closeCanvas:l,isCanvasOpen:t,setCanvasDispatch:d,doCanvasAction:u,canvasState:s,setCanvasState:a}),[o,l,t,d,u,s]);return i.jsxs(lEe.Provider,{value:m,children:[e,i.jsx(it,{children:t&&i.jsx(m8t,{})})]})});uEe.displayName="CanvasStateProvider";const dEe=A.memo(({children:e})=>{const{results:t}=Ht(),n=f.useMemo(()=>{const r=[];return t.map(s=>{s.widget_data?.map(a=>{owt(a)&&r.push(a)})}),r},[t]);return i.jsx(Pxe,{entities:n,children:e})});dEe.displayName="ScrollToWidgetWrapper";const p8t=he(async()=>{const{SidePDFViewer:e}=await ae(async()=>{const{SidePDFViewer:t}=await import("./SidePDFViewer-Df4jeApX.js");return{SidePDFViewer:t}},__vite__mapDeps([146,3,1,144,4,6,5]));return{default:e}}),h8t=f.createContext({openFile:()=>{},closeViewer:()=>{},doViewerAction:()=>{},isViewerOpen:!1,setViewerDispatch:()=>{}}),fEe=A.memo(({children:e})=>{const[t,n]=f.useState(),[r,s]=f.useState(),a=f.useRef(void 0),o=f.useCallback(p=>{n(p)},[n]),l=f.useCallback(()=>{n(void 0),s(void 0),a.current=void 0},[n,s]),c=f.useRef([]),u=f.useCallback(p=>{a.current?a.current(p):c.current.push(p)},[]),d=f.useCallback(p=>{s(()=>p),a.current=p,c.current.length>0&&p&&(c.current.forEach(h=>p(h)),c.current=[])},[s]),m=f.useMemo(()=>({openFile:o,closeViewer:l,doViewerAction:u,isViewerOpen:!!r,setViewerDispatch:d}),[o,l,u,r,d]);return i.jsxs(h8t.Provider,{value:m,children:[e,t&&i.jsx(p8t,{file:t})]})});fEe.displayName="FileViewerStateProvider";const g8t=({items:e,inFlight:t,inFlightLatest:n,rwToken:r,contentHasMounted:s,hasHeader:a=!0})=>{const{scrollContainerRef:o}=Bo(),l=ls(),{isMobileStyle:c}=ye(),u=rn(),d=f.useMemo(()=>{if(typeof window>"u")return 0;const w=a?getComputedStyle(document.documentElement).getPropertyValue("--header-height"):"0";return parseInt(w)+(c||u?0:8)},[c,a,u]),m=f.useRef(!0),p=f.useMemo(()=>!r&&e.every(w=>!un.isStatusPending(w)),[e,r]),h=f.useMemo(()=>e.some(w=>un.isStatusPending(w)),[e]),g=f.useRef({}),y=f.useRef({});f.useEffect(()=>()=>{g.current={},y.current={}},[]);const v=f.useCallback((w,{smooth:C=!0,anchor:S=!1}={smooth:!0,anchor:!1})=>{const E=typeof w=="number"?g.current?.[w]?.current:y.current?.[w]?.current;if(E){const M=E.getBoundingClientRect().top,k=o?.current?.scrollTop??0,T=M+k-d;if(T+k>document.body.scrollHeight&&S){const j=o?.current?.scrollHeight??0,R=o?.current?.clientHeight??0,O=j-R-.1;requestAnimationFrame(()=>o?.current?.scrollTo({top:O,behavior:C?"smooth":"auto"}))}else o?.current?.scrollTo({top:T,behavior:C?"smooth":"auto"})}},[o,d]),x=f.useCallback(()=>{v(e.length-1)},[v,e.length]);f.useEffect(()=>{const w={...g.current},C={};e.forEach((E,M)=>{const k=M,T=E.backend_uuid;if(T)if(!w[k]||!w[k].current){const j=A.createRef();w[k]=j,C[T]=j}else C[T]=w[k]});const S=e.length;Object.keys(w).forEach(E=>{Number(E)>=S&&delete w[Number(E)]}),y.current=C,g.current=w},[e.length,h]);const b=e.at(-1)?.query_source==="edit";f.useEffect(()=>{if(e.length<=1||!l||!s)return;const w=window.location.hash;if(w&&!t&&m.current){try{const C=w.slice(1);C.length>3?v(C,{smooth:!1}):v(Number(C),{smooth:!1})}catch(C){ee.error(C)}return}n&&!b&&v(e.length-1,{anchor:!0})},[t,n,p,e.length,l,v,s,b]);const _=g.current;return f.useMemo(()=>({refs:_,scrollToLatestItem:x,scrollToListItem:v}),[_,x,v])},dU=f.createContext({refs:{},scrollToListItem:()=>{},setContentHasMounted:()=>{},contentHasMounted:!1});dU.displayName="ScrollToEntityContext";const mEe=A.memo(({children:e})=>{const t=Oo(),{results:n=[],inFlight:r,inFlightLatest:s}=Ht(),[a,o]=f.useState(!1),{isMobileStyle:l}=ye(),c=f.useMemo(()=>zpe(n).map(p=>p.length?p[0]:void 0).filter(p=>p!==void 0),[n]),{refs:u,scrollToListItem:d}=g8t({items:c,inFlight:r,inFlightLatest:s,rwToken:t,contentHasMounted:a,hasHeader:l});return i.jsx(dU.Provider,{value:{scrollToListItem:d,refs:u,setContentHasMounted:o,contentHasMounted:a},children:e})});mEe.displayName="ScrollToThreadEntryProvider";const E5=()=>{const e=f.useContext(dU);if(!e)throw new Error("useScrollToEntity must be used within ScrollToEntityContext");return e},y8t=(e,t)=>{const{value:n,loading:r}=At({flag:"enable-comet-clarifying-commands",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},v8t=(e,t,n)=>{const r=axe(),{variation:s}=y8t(!1),{addClarification:a}=Nxe(),{trackEventOnce:o}=Me(),l=n?.length??0,c=n?.filter(g=>g.markdown_block).length??0,u=f.useMemo(()=>{if(!n)return!1;const g=n.find(x=>x.intended_usage==="pro_search_steps");if(!g?.plan_block?.steps)return!1;const y=g.plan_block.steps;return y[y.length-1]?.step_type==="ENTROPY_REQUEST"},[n]),d=f.useMemo(()=>u?s:r?Er(t?.display_model)===oe.RESEARCH||Er(t?.display_model)===oe.STUDIO:!1,[r,u,s,t?.display_model]),m=f.useMemo(()=>d&&!t?.reasoning_plan&&l>0&&c===0,[t?.reasoning_plan,l,c,d]),p=f.useMemo(()=>!m||!d||!n?null:{clarificationQuestion:"Add details or clarifications",isDefaultClarification:!0,clarificationCount:0},[m,d,n]),h=f.useCallback((g,y,v)=>{const b={uuid:dr(),clarification_type:"FREEFORM_CLARIFICATION",freeform_clarification:{text:v.query,question:"Add details or clarifications",attachments:v.attachments??[]}};gPe({entryUUID:g,clarification:b,reason:e}),a({content:b.freeform_clarification?.text??v.query,UUID:b.uuid,entryUUID:g,question:p?.clarificationQuestion??void 0}),p&&o("clarifying query submitted",{entry_uuid:g,context_uuid:y,query:v.query,attachments:v.attachments})},[a,p,e,o]);return{shouldAcceptClarification:m,handleSubmitClarification:h,clarificationData:p}},x8t=({scrollbarSize:e})=>{const[t,n]=f.useState({height:void 0,width:void 0}),r=f.useRef(null);return f.useEffect(()=>{const s=()=>(r.current==null&&(r.current=document.createElement("div"),r.current.classList.add("scrollbar-thin"),r.current.style.width="99px",r.current.style.height="99px",r.current.style.overflow="scroll",r.current.style.position="absolute",r.current.style.top="-9999px",r.current.setAttribute("aria-hidden","true"),r.current.setAttribute("role","presentation")),r.current),a=()=>{const{offsetHeight:c,clientHeight:u,offsetWidth:d,clientWidth:m}=s(),p=c-u,h=d-m;n(g=>{const{height:y,width:v}=g;return y!==p||v!==h?{height:p,width:h}:g})},o=ta(a,100);window.addEventListener("resize",o),document.body.appendChild(s()),a();const l=s();return()=>{o.cancel(),window.removeEventListener("resize",o),document.body.removeChild(l)}},[e]),t},b8t=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),{scrollContainerRef:s}=Bo(),{scrollToListItem:a}=E5(),{resultsLength:o}=Ht(),l=f.useRef(!1),c=f.useCallback(()=>{a(o-1)},[a,o]),u=f.useCallback(()=>{if(!s.current)return;const d=s.current,m=d.scrollHeight>d.clientHeight,p=G2(d),h=o>1;p?l.current=!0:l.current&&(r(!1),l.current=!1),t(m&&!p&&h)},[s,o]);return f.useEffect(()=>{const d=s.current;if(!d)return;const m=ta(u,100);u();const p=setTimeout(u,200);return d.addEventListener("scroll",m),window.addEventListener("resize",m),()=>{d.removeEventListener("scroll",m),window.removeEventListener("resize",m),m.cancel(),clearTimeout(p)}},[s,u]),f.useEffect(()=>{if(o<=1)return;u();const d=setTimeout(u,300);return r(!1),l.current=!1,()=>clearTimeout(d)},[o,u]),f.useMemo(()=>({showScrollButton:e,hasScrolled:n,setHasScrolled:r,scrollToLatestItem:c}),[n,c,e])},_8t=90,pEe=A.memo(({submitWillFork:e})=>{const{$t:t}=Q(),n=_t(),[r,s]=f.useState(!1),{resultsLength:a}=Ht(),{isMobileStyle:o}=ye(),{shouldShowLossAversionModal:l,handleOpenLossAversion:c}=Yh(),u=f.useCallback(()=>{n.push("/")},[n]),d=f.useCallback(h=>{h.preventDefault(),l?c({args:{callback:u,origin:Ie.NEW_THREAD_BUTTON}}):u()},[l,c,u]),m=f.useCallback(()=>{s(!0)},[]),p=f.useMemo(()=>a>=_8t&&!r&&!e,[a,r,e]);return i.jsx(it,{children:p&&i.jsxs(xe.div,{className:"bg-subtler gap-sm py-sm relative z-0 mx-4 flex items-center justify-between rounded-t-lg px-3 shadow-md",role:"alert",initial:{y:"110%"},animate:{y:0},exit:{y:"110%"},transition:{duration:.4,ease:[.16,1,.3,1]},children:[i.jsxs(L,{color:"light",className:"flex items-center gap-2",children:[i.jsx(me,{icon:Hv,className:"text-caution shrink-0"}),i.jsx("span",{className:"font-sans text-xs",children:o?i.jsx(pe,{defaultMessage:"Thread too long. Start new one.",id:"wzstV6j0EL"}):i.jsx(pe,{defaultMessage:"Thread is getting long. Start a new one for better answers.",id:"X7d6hUix4z"})})]}),i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[i.jsx(Te,{variant:"primary",size:"tiny",onClick:d,text:t({defaultMessage:"Start new thread",id:"jsMJO4IUTY"})}),i.jsx(Te,{size:"tiny",onClick:m,pill:!0,icon:Lt})]})]},"thread-capacity-warning")})});pEe.displayName="ThreadCapacityWarning";const Ws={default:"d",shopping:"s",jobs:"j",hotels:"h",places:"p",images:"i",videos:"v",sources:"r",assets:"a",apps:"c",tasks:"t",search:"se",chat:"ch",study:"st"},kee=e=>Object.entries(Ws).find(([t,n])=>n===e)?.[0],M5=(e,t)=>{const r=new URLSearchParams(t?.toString()).get(e.toString());if(r)return typeof r=="string"?kee(r):Array.isArray(r)?kee(r[0]):void 0},w8t=e=>e==="default"||e==="sources",C8t=e=>ns(e).with("default",()=>"default").with("shopping",()=>"wide").with("jobs",()=>"wide").with("hotels",()=>"full").with("places",()=>"full").with("images",()=>"full").with("videos",()=>"full").with("sources",()=>"default").with("assets",()=>"full").with("apps",()=>"full").with("tasks",()=>"default").with("search",()=>"default").otherwise(()=>"default"),Z6=e=>({mode:e,width:C8t(e)}),S8t=()=>{const e=Dt();return f.useCallback(t=>M5(t,e),[e])},E8t=()=>{const e=Dt(),t=Nt(),n=_t();return f.useCallback((r,s)=>{if(M5(r,e)===s)return;const a=new URLSearchParams(e?.toString());a.set(r.toString(),Ws[s]),n.replace(`${t}?${a.toString()}`)},[t,n,e])},fU=f.createContext({activeMode:"default",setActiveMode:()=>{},activeEntryIdx:0,pinnedEntryIdx:-1,viewTitle:null,setViewTitle:()=>{}});fU.displayName="SearchPageContext";const k5=()=>{const e=f.useContext(fU);if(!e)throw new Error("useSearchPage must be used within an SearchPageProvider");return e},hEe=A.memo(({children:e})=>{const t=S8t(),[n,r]=f.useState(t(0)??"default"),[s,a]=f.useState(0),[o,l]=f.useState(-1),[c,u]=f.useState(null),{refs:d}=E5(),m=_t(),{scrollContainerRef:p}=Bo(),h=f.useCallback(()=>{if(Object.keys(d).length===0||!p.current)return;const g=p.current.clientHeight,y=p.current.scrollTop;if(y===0){a(0),l(-1);return}const v=y+g/2;let x=s,b=-1,_=1/0;Object.entries(d).forEach(([w,C])=>{if(C.current){const S=C.current.getBoundingClientRect(),E=S.top+y+S.height/2,M=Math.abs(E-v);S.top<-100&&S.bottom>100&&(b=parseInt(w)),M<_&&(_=M,x=parseInt(w))}}),a(x),l(b)},[d,a,p,s,l]);return f.useEffect(()=>{if(!p?.current)return;const g=p.current,y=fh(h,50,{leading:!1,trailing:!0});return g.addEventListener("scroll",y),h(),()=>{g.removeEventListener("scroll",y),y.cancel()}},[h,p]),f.useEffect(()=>{u(null)},[m]),i.jsx(fU.Provider,{value:{activeMode:n,setActiveMode:r,activeEntryIdx:s,pinnedEntryIdx:o,viewTitle:c,setViewTitle:u},children:e})});hEe.displayName="SearchPageProvider";const M8t=()=>{const e=mt(),t=HS(),n=f.useMemo(()=>e.getQueryData(t),[e,t]),{connectors:r}=Ds({reason:"useHasUnauthenticatedGmailGcal"});return f.useMemo(()=>{const s=!!r?.connectors.find(a=>a.name==="gcal"&&(!a.connected||a.has_required_scopes===!1));return!(!n||!s)},[n,r])},gEe=()=>{const{session:e}=Ct(),{firstResult:{author_username:t}={},inFlight:n}=Ht();return e?.user?.username===t||n};var k8t={};const T8t=({position:e,inFlight:t,isLastResult:n,upsellInformation:r,backendUuid:s})=>{const[a,o]=f.useState(!1),[l,c]=f.useState(null),u=rn(),d=k8t.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":u?"search_results_page":void 0,{trackEventOnce:m,trackEvent:p}=Me(),h=gEe(),g=M8t(),{subscriptionTier:y}=yt(),{isDefaultBrowser:v}=r0e(),x=f.useMemo(()=>{if(a||!r||e==="top"&&r.app_location!=="IN_THREAD"||e==="bottom"&&r.app_location!=="IN_THREAD_BOTTOM"||e==="input"&&r.app_location!=="IN_THREAD_INPUT"||e==="connector_auth"&&r.app_location!=="UPSELL_APP_LOCATION_UNSPECIFIED")return!1;const w=s;return!(!w||w===l||!n&&(!r.is_persistent||e==="input"||e==="router_steps"||e==="connector_auth")||e==="bottom"&&t||r.is_persistent&&(!h||r.name==="gmail_gcal_connector"&&!g||r.name==="comet_set_default_browser"&&v!==!1))},[a,r,e,s,l,n,t,h,g,v]);f.useEffect(()=>{if(!x||!r)return;const w=s;c(w),o(!0),m("thread upsell banner viewed",{entryUUID:w,upsellType:r.upsell_type,upsellName:r.name,cometSurface:d,subscriptionTier:y})},[s,x,m,r,d,y]);const b=f.useCallback(({hideBanner:w=!0}={})=>{w&&o(!1);const C=r,S=s;if(S&&C?.upsell_type){p("thread upsell banner dismissed",{entryUUID:S,upsellType:C.upsell_type,upsellName:C.name,cometSurface:d,subscriptionTier:y});const E=C.cta==="SHORTCUT_MODAL"?C.cta_information?.recommended_shortcut?.name:void 0;dE(C.name,E)}},[s,p,r,d,y]),_=f.useCallback(()=>{o(!1)},[]);return f.useMemo(()=>({show:a,handleDismiss:b,handleHide:_}),[b,a,_])},N8t=({icon_reference:e,icon_image:t})=>{if(t)return i.jsx(z,{variant:"offsetPlus",className:"p-xs rounded-md border",children:i.jsx("img",{src:t.url,alt:t.alt,width:40,height:40,className:"rounded"})});const n={pro:i.jsx(me,{icon:Gl.pro,size:"lg"}),collection:i.jsx(me,{icon:Gl.collection,size:"lg"}),gmail_gcal:i.jsx(z,{variant:"offsetPlus",className:"p-xs rounded-md border",children:i.jsx("img",{src:SS,alt:"Gmail Gcal Upsell Banner",width:40,height:40})}),research:i.jsx(me,{icon:Gl.research,size:"lg"}),labs:i.jsx(me,{icon:Gl.labs,size:"lg"}),max:i.jsx(YP,{width:"w-8"}),shortcut:i.jsx(me,{icon:$C,size:"lg"}),comet_login:i.jsx(z,{variant:"super",className:"p-xs rounded-md border",children:i.jsx(L,{color:"defaultInverted",children:i.jsx(ro,{size:24})})})};return e==="comet_download"?null:n[e||""]||i.jsx(me,{icon:Gl.pro,size:"lg"})},T5=A.memo(({position:e,upsellInformation:t,inFlight:n,isLastResult:r,backendUuid:s,animateExpand:a=!0,hideOnAccept:o=!0,hideOnReject:l=!0,isSkipping:c=!1,onAccept:u,onReject:d,className:m})=>{const{$t:p}=Q(),{show:h,handleDismiss:g,handleHide:y}=T8t({position:e,inFlight:n,isLastResult:r,upsellInformation:t,backendUuid:s}),v=f.useCallback(()=>{g({hideBanner:l}),d?.()},[g,d,l]),x=f.useCallback(()=>{g({hideBanner:o}),u?.()},[g,u,o]),_=Dt()?.get("handle_upsell");f.useEffect(()=>{if(h&&_){const E=new URLSearchParams(window.location.search);E.delete("handle_upsell");const M=Object.fromEntries(E.entries());Gh(M),x()}},[x,h,_]);const w=Qe();if(!h||!t||w&&t.upsell_type===dA.LOGIN)return null;const C=N8t(t),S=e==="router_steps"||e==="connector_auth";return i.jsx(it,{children:i.jsx(xe.div,{initial:a?{height:0}:{opacity:0},animate:a?{height:"auto"}:{opacity:1},exit:a?{height:0}:{opacity:0},transition:{duration:.2},children:i.jsxs(z,{variant:t.background_super?"superLight":"subtler",className:U("gap-sm mb-md p-md md:gap-md relative flex w-full flex-col items-center rounded-md md:flex-row",{"rounded-xl shadow-xl ring-1":e==="input"||e==="router_steps"},m),children:[i.jsx("div",{className:"right-md top-md absolute z-10 md:hidden",children:i.jsx(Te,{icon:Lt,size:"small",onClick:v,noPadding:!0})}),C&&i.jsx(L,{color:"default",className:"mr-sm hidden md:block",children:C}),i.jsxs("div",{className:"md:mr-sm relative flex w-full flex-col",children:[i.jsx(L,{variant:"smallBold",className:U("mr-lg md:mr-0",{"line-clamp-2":t.upsell_type===dA.CREATE_SHORTCUT}),children:t.title}),i.jsx(L,{variant:"small",color:"light",className:"mb-0 font-normal leading-[1.3]",children:t.description})]}),i.jsxs("div",{className:"md:gap-sm flex size-full items-end justify-end md:w-auto md:flex-row md:items-center",children:[S&&i.jsx(Te,{text:p({defaultMessage:"Skip",id:"/4tOwTiCH6"}),size:"small",onClick:v,variant:"common",isLoading:c}),t.button_text&&i.jsx(fE,{upsellInformation:t,inFlight:n,position:e,hideUpsell:y}),!S&&i.jsx("div",{className:"mt-sm hidden md:block",children:i.jsx(Te,{icon:Lt,size:"small",onClick:v,noPadding:!0})})]})]})})})});T5.displayName="ThreadUpsell";const yEe=A.memo(({showStopButton:e,onStopButtonClick:t,clarificationData:n,upsellInformation:r,idx:s,inFlightEntryUUID:a,inFlight:o,isLastResult:l,...c})=>{const{currentOpenedModal:u}=vt(),{isMobileUserAgent:d}=ye(),m=!!n?.clarificationQuestion,[p,h]=f.useState(a);return f.useEffect(()=>{a&&h(a)},[a]),i.jsx("div",{className:"w-full",children:i.jsxs(sf,{children:[i.jsx(T5,{position:"input",idx:s,upsellInformation:r,inFlight:o,isLastResult:l,backendUuid:p,animateExpand:!1}),i.jsx(F3,{hasShadow:!0,isHighlighted:m,showFileUpload:!0,initializeAttachmentsFromLastResult:!0,autofocus:u===null&&!d,querySource:c.submitWillFork?"fork":"followup",showStopButton:e,onStopButtonClick:t,initialLayout:d?"compact":"expanded",minRows:1,className:"bg-base shadow-[0_1px_8px_2px_oklch(var(--foreground-color)/0.1),0_36px_16px_36px_oklch(var(--background-base-color))] dark:shadow-[0_4px_12px_rgba(0,0,0,0.12),0_32px_16px_36px_oklch(var(--dark-background-base-color))]",...c})]})})});yEe.displayName="ThreadInput";var Tee={};const vEe=A.memo(({ref:e})=>{const t="thread-floating-footer",{$t:n}=Q(),r=Ia(),a=Dt()?.get("q"),o=Qe(),{inFlightEntry:{backend_uuid:l,blocks:c,context_uuid:u}={},inFlight:d,lastResult:m,resultsLength:p,firstResult:{frontend_context_uuid:h,collection_info:g,parent_info:y}={}}=Ht(),v=c?.length??0,x=Rc(),b=h,{activeMode:_}=k5(),{width:w}=x8t({scrollbarSize:"thin"}),C=!!Tee.NEXT_PUBLIC_IS_SIDECAR_BUILD,{mentionTypeaheadOptions:S,onTriggerTypeahead:E}=rD({reason:t,variants:["tab","shortcut"]}),{submitQuery:M}=Oa(),{specialCapabilities:k}=Or(),{showScrollButton:T,hasScrolled:j,setHasScrolled:R,scrollToLatestItem:O}=b8t(),{isMobileUserAgent:P}=ye(),{shouldAcceptClarification:N,handleSubmitClarification:I,clarificationData:D}=v8t(t,m,c),F=f.useMemo(()=>{try{return d&&v>0}catch(q){throw ee.error("Unable to parse non-Pro search inFlightEntry.",q),q}},[d,v]),B=f.useMemo(()=>m?.upsell_information,[m?.upsell_information]),V=f.useCallback(q=>{const J=x,te=ja();l&&N&&(I(l,u,q),H.setUserInput("")),!d&&M({fork:J,rawQuery:q.query,copilotOverride:o||k.unlimitedProSearch?void 0:!1,attachments:q.attachments,collection:g??null,newFrontendContextUUID:J?te:null,existingFrontendContextUUID:J?void 0:b,promptSource:"user",querySource:"followup",timeFromFirstType:q.timeFromFirstType,shouldRedirectToBackendUUID:J,...q.side_by_side_metadata&&{side_by_side_metadata:q.side_by_side_metadata},mentions:q.mentions})},[x,l,N,d,M,o,g,b,y]),$=Gpe({handleSubmitQuery:V,isHomepage:!1,contextUuid:b||"",disableSideBySide:!!y}),G=f.useRef(!1),X=f.useCallback(q=>{G.current||(G.current=!0,setTimeout(()=>G.current=!1,ZO),$(q))},[$]);f.useEffect(()=>{N&&(G.current=!1)},[N]);const[Y,W,H]=Vpe({onSubmit:X}),Z=f.useCallback(()=>{if(l){const q=r.getState().entries,te=q[l]?.side_by_side_metadata?.sibling_uuid;te?Object.values(q).forEach(se=>{se.side_by_side_metadata?.sibling_uuid===te&&se.status==="PENDING"&&se.backend_uuid&&Sp({entryUUID:se.backend_uuid,reason:t})}):Sp({entryUUID:l,reason:t})}},[l,r]);f.useEffect(()=>{a!==null&&a!==""&&H.setUserInput("")},[a]);const re=f.useCallback(()=>{O(),R(!0)},[O,R]);return i.jsx(z,{className:U("erp-sidecar:fixed erp-sidecar:w-full bottom-safeAreaInsetBottom p-md pointer-events-none absolute z-10"),style:C?void 0:{width:`calc(100% - ${w??0}px)`},ref:e,children:i.jsx("div",{className:"max-w-threadContentWidth mx-auto",children:i.jsx("div",{className:"pointer-events-auto",children:w8t(_)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"pointer-events-none h-0",children:i.jsx(it,{initial:!1,children:T&&!j&&i.jsx(xe.div,{className:"flex justify-center",layout:"position",initial:{opacity:0,y:"0%"},animate:{opacity:1,y:"-100%"},exit:{opacity:0,y:"0%"},transition:{opacity:{duration:.2,ease:"easeInOut"},y:{duration:.2,ease:"easeInOut"}},children:i.jsx(ge,{size:"small",variant:"border",icon:pne,layout:"center",pill:!0,onClick:re,toolTip:n({defaultMessage:"Scroll to latest",id:"E6r0bc1I6z"}),extraCSS:"!bg-base shadow-subtle mb-2 pointer-events-auto"})},"scroll-button")})}),i.jsx(pEe,{submitWillFork:x}),i.jsx("div",{children:f.createElement(yEe,{...H,key:"ask-input",value:Y,json:W,isFollowUp:!0,disableSubmission:d&&!N,placeholder:n(N?{defaultMessage:"Add details or clarifications...",id:"RkaMsxpXoz"}:{defaultMessage:"Ask a follow-up",id:"dxepjFd+cI"}),showSources:!0,useThreadSources:!0,submitWillFork:x,showStopButton:F,inFlightEntryUUID:l,contextUUID:u,onStopButtonClick:Z,useLexical:!0,mentionTypeaheadOptions:S,onTriggerTypeahead:E,dropdownPlacement:Tee.NEXT_PUBLIC_IS_SIDECAR_BUILD?"top":void 0,clarificationData:D??void 0,showSearchModeSelector:!N,showModelSelector:!N&&!P,showFileUpload:!F||N,upsellInformation:B,idx:p-1,inFlight:d,isLastResult:!0})})]})})})})});vEe.displayName="ThreadFloatingFooter";const A8t=()=>{const e=f.useRef(!1),{results:t,lastResult:n}=Ht(),r=ls(),s=Qe(),{openVisitorLoginUpsell:a}=Xn({enabled:!s}),o=E1(n?.upsell_information);f.useEffect(()=>{e.current||r&&t.length>=1&&n&&n.upsell_information?.app_location===$l.MODAL&&(o(),e.current=!0)},[r,s,a,t.length,n,o])},j8t=()=>{const e=Qe(),{isMobileUserAgent:t}=ye(),{firstResult:{author_username:n}={}}=Ht(),{openInstallUpsell:r}=Eue(),{shareGateImpressions:s,actions:a}=dn(),o=f.useRef(!1),l=Dt(),c=l?.get("installGate"),u=l?.get("q");f.useEffect(()=>{o.current||e||t&&(!n&&!u||fp()||_R()||wR()||c==="true"&&(s>=u7||(r({origin:Ie.SHARED_THREAD_INSTALL_GATE,sheetModalVariant:"inset-centered-sheet"}),a.setShareGateImpressions(s+1),o.current=!0)))},[a,n,t,u,c,e,r,s])},R8t=()=>{const{device:{isMetaBrowser:e,isIOS:t,isAndroid:n}}=Et();return f.useCallback(()=>{if(!e||typeof window>"u")return;const s=window.location.href;let a;t?a=s.replace(/^https?:\/\//,"x-safari-https://"):n&&(a=`intent://${s.replace(/^https?:\/\//,"")}#Intent;scheme=https;package=com.android.chrome;end`),a&&dl(a,"Redirecting to native browser")},[e,t,n])},I8t=(e,t)=>e?"full-sheet-blurred":t==="delayed"?"bottom-sheet-gradient":"centered-sheet",P8t=()=>{const{$t:e}=Q(),t=Qe(),{isMobileUserAgent:n}=ye(),{firstResult:{author_username:r}={}}=Ht(),{openVisitorLoginUpsell:s}=Xn({enabled:!0}),{shareGateImpressions:a,actions:o}=dn(),l=f.useRef(!1),c=Dt(),{scrollContainerRef:u}=Bo(),[d,m]=f.useState(!1),p=R8t(),h=c?.get("visitorGate"),g=c?.get("q");f.useEffect(()=>{const y=u.current;if(y)return y.addEventListener("scroll",()=>{m(G2(y))}),()=>{y.removeEventListener("scroll",()=>{m(G2(y))})}},[u]),f.useEffect(()=>{l.current||t||!r&&!g||_R()||wR()||a>=u7||h==="false"||h==="delayed"&&!d||!h&&!(!n&&!g)||(p(),s({origin:Ie.SHARED_THREAD_LOGIN_GATE,description:"",title:e({defaultMessage:"Instant answers at your fingertips",id:"NFjQpck2Ql"}),sheetModalVariant:I8t(n,h),overrideMobileVariant:!0}),o.setShareGateImpressions(a+1),l.current=!0)},[n,t,s,e,a,o,d,h,c,r,p,g])};function O8t({entropyBrowser:e,isSidecar:t,scrollContainerRef:n}){const r=Nt(),s=f.useCallback(a=>{n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:a})},[n]);f.useEffect(()=>{if(!(!e||!t))return e.subscribeQuickActionButtonFired(()=>{s("smooth")})},[e,t,s]),f.useEffect(()=>{t&&setTimeout(s,0,"instant")},[r,t,s])}var L8t={};const D8t=({reason:e})=>{const{DEFAULT_SOURCES:t}=R1({reason:e}),{setSources:n,setIsCopilot:r,gpt4Limit:s}=Hn(),a=ls(),{trackEvent:o}=Me(),{lossAversionStatus:l,setLossAversionStatus:c,unsetLossAversion:u}=IO(),d=Qe(),{results:m,lastResult:p,firstResult:{author_id:h,author_username:g,context_uuid:y,query_source:v,sources:{sources:x}={}}={}}=Ht(),b=Oo(),_=Dt(),w=f.useRef(!1),{pinnedEntryIdx:C,setViewTitle:S}=k5(),{formatMessage:E}=Q(),{openVisitorLoginUpsell:M}=Xn({enabled:!d}),{scrollContainerRef:k}=Bo(),T=wr();return P8t(),j8t(),A8t(),O8t({scrollContainerRef:k,isSidecar:!!L8t.NEXT_PUBLIC_IS_SIDECAR_BUILD,entropyBrowser:T}),f.useEffect(()=>{const j=un.isSourceListType(x)?x:[...t];n(j);const R=m.some(O=>un.isCopilotMode(O))&&!!s&&s>0;r(R)},[]),f.useEffect(()=>{if(!w.current&&a&&m.length>=1&&p&&un.isStatusCompleted(p)&&h&&g){const j=_?.get("utm_source")??void 0;o("thread viewed",{authorId:h,authorUsername:g,isThreadCreator:!!b,contextUUID:y,viewSource:j}),y&&L$e({contextUUID:y,reason:e}),v==="perplexity_tasks"&&o("task thread viewed",{contextUUID:y}),w.current=!0}},[o,a,h,g,y,p,m.length,_,b,d,M,E,e,v]),f.useEffect(()=>{l!=="cooldown"&&(!d&&!l&&b?c("allowed"):b||u())},[d,l,b,c,u]),f.useEffect(()=>{S(C===-1?null:j3(m[C]?.query_str)??"")},[C,S,m]),S1(()=>{l==="allowed"&&u()}),null},F8t=e=>e?e.filter(t=>t.image_mode_block).flatMap(t=>t.image_mode_block.media_items??le):le,U8t=e=>e?e.filter(t=>t.video_mode_block).flatMap(t=>t.video_mode_block.media_items??le):le,B8t=e=>e?e.filter(t=>t.shopping_mode_block).flatMap(t=>t.shopping_mode_block.shopping_widgets??le):le,V8t=e=>e?e.filter(t=>t.jobs_mode_block).flatMap(t=>t.jobs_mode_block.jobs_blocks??le):le,W8t=e=>e?e.filter(t=>t.maps_mode_block).flatMap(t=>t.maps_mode_block.places??le):le,$8t=e=>{const t=(e??le).filter(o=>o.sources_mode_block).flatMap(o=>o.sources_mode_block),n=t.at(-1),r=new Set,s=[];for(const o of t)for(const l of o.web_results)r.has(l.url)||(s.push(l),r.add(l.url));const a=n?.result_count??0;return{count:Math.max(s.length,a),progress:n?.progress,results:s,rows:n?.rows}},H8t=e=>e?e.filter(t=>t.assets_mode_block).flatMap(t=>t.assets_mode_block.assets??le):le,z8t=({idx:e,searchParams:t,blocks:n})=>Po()((r,s)=>({answerModeActionList:[],currentModeData:Z6(M5(e,t)??"default"),...xEe(n),actions:{updateCurrentMode:a=>{const o=s(),l=o.defaultModeOverride&&a==="default"?o.defaultModeOverride:a;r({currentModeData:Z6(l)})},setOverrideMode:a=>{const o=a;r({defaultModeOverride:o,currentModeData:Z6(o??"default")})}}})),{Context:G8t,useTrackedState:q8t}=f1("AnswerMode"),mU=f.createContext(void 0);mU.displayName="AnswerModeApiContext";const K8t=({children:e,scrollToListItem:t})=>{const n=Dt(),{setActiveMode:r,activeEntryIdx:s}=k5(),{idx:a,result:{backend_uuid:o,context_uuid:l}}=bn(),{actions:{updateCurrentMode:c,setOverrideMode:u},currentModeData:d}=Ix(),m=E8t(),{trackEvent:p}=Me(),h=f.useCallback(y=>{y!==d.mode&&(m(a,y),c(y),s===a&&r(y),requestAnimationFrame(()=>{t(a,{smooth:!0})}),p("answer mode tab selected",{answerMode:y,entryUUID:o,contextUUID:l}))},[d.mode,m,a,c,s,p,o,l,r,t]);f.useEffect(()=>{s===a&&r(d.mode)},[s,a,r,d.mode]),f.useEffect(()=>{const y=M5(a,n);y&&h(y)},[a,h,n]);const g=f.useMemo(()=>({updateCurrentMode:v=>{h(v)},setOverrideMode:u}),[h,u]);return i.jsx(mU.Provider,{value:g,children:e})};function xEe(e){const t=F8t(e),n=U8t(e),r=B8t(e),s=V8t(e),a=W8t(e),o=$8t(e),l=H8t(e);return{images:t,videos:n,shopping:r,jobs:s,places:a,sources:o,assets:l}}const bEe=A.memo(({children:e,scrollToListItem:t})=>{const{$t:n}=Q(),r=Dt(),{idx:s,searchMode:a,hasAnswer:o,researchPlan:l,reasoningPlan:c,showAgentWorkflow:u,result:{answer_modes:d,blocks:m,attachments:p,read_write_token:h},isLastResult:g,hasSources:y}=bn(),v=uU(),{isCanvasOpen:x}=cEe(),b=rn(),[_]=f.useState(()=>z8t({idx:s,searchParams:r,blocks:m}));f.useEffect(()=>{m||ee.error("No blocks found for entry",m)},[m]),f.useEffect(()=>{const M=_.getState(),{images:k,videos:T,shopping:j,jobs:R,places:O,sources:P,assets:N}=xEe(m),I=ms(M.images,k)?M.images:k,D=ms(M.videos,T)?M.videos:T,F=ms(M.shopping,j)?M.shopping:j,B=ms(M.jobs,R)?M.jobs:R,V=ms(M.places,O)?M.places:O,$=ms(M.sources,P)?M.sources:P,G=ms(M.assets,N)?M.assets:N;(I!==M.images||D!==M.videos||F!==M.shopping||B!==M.jobs||V!==M.places||$!==M.sources||G!==M.assets)&&_.setState({images:I,videos:D,shopping:F,jobs:B,places:V,sources:$,assets:G})},[m,_]);const w=_.getState().sources,C=f.useMemo(()=>({[sn.SHOPPING]:{text:n({defaultMessage:"Shopping",id:"my1MLnIMoS"}),show:!0,icon:eTe,id:Ws.shopping,mode:"shopping",testId:Bs.ANSWER_MODE_TABS.SHOPPING},[sn.JOBS]:{text:n({defaultMessage:"Jobs",id:"9AcATFXaoo"}),show:!0,icon:Jke,id:Ws.jobs,mode:"jobs",testId:Bs.ANSWER_MODE_TABS.JOBS},[sn.HOTELS]:{text:n({defaultMessage:"Hotels",id:"+dqK4hw0if"}),show:!0,icon:bi,id:Ws.hotels,mode:"hotels",testId:Bs.ANSWER_MODE_TABS.HOTELS},[sn.MAPS]:{text:n({defaultMessage:"Places",id:"QQInFSbbwr"}),show:!0,icon:sne,id:Ws.places,mode:"places",testId:Bs.ANSWER_MODE_TABS.PLACES},[sn.IMAGE]:{text:n({defaultMessage:"Images",id:"Fip4H8CuWD"}),show:!0,icon:zv,id:Ws.images,mode:"images",testId:Bs.ANSWER_MODE_TABS.IMAGES},[sn.VIDEO]:{text:n({defaultMessage:"Videos",id:"4XfMuxy3FO"}),show:!0,icon:rne,id:Ws.videos,mode:"videos",testId:Bs.ANSWER_MODE_TABS.VIDEOS},[sn.SOURCES]:{text:n({defaultMessage:"Sources",id:"fhwTpAcBLC"}),show:!0,icon:Gd,id:Ws.sources,mode:"sources",testId:Bs.ANSWER_MODE_TABS.SOURCES,count:w.count||p?.length||0,disabled:w.progress!==Bl.DONE&&!p?.length},[sn.ASSETS]:{text:n({defaultMessage:"Assets",id:"d1uESJO+TH"}),show:!x,icon:Zke,id:Ws.assets,mode:"assets",testId:Bs.ANSWER_MODE_TABS.ASSETS},[sn.APPS]:{text:n({defaultMessage:"App",id:"2rUVsUf259"}),show:!v,icon:Xke,id:Ws.apps,mode:"apps",testId:Bs.ANSWER_MODE_TABS.APPS},[sn.TASKS]:{text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),show:!0,icon:fB,id:Ws.tasks,mode:"tasks",testId:Bs.ANSWER_MODE_TABS.TASKS},[sn.SEARCH]:{text:n({defaultMessage:"Search",id:"xmcVZ0BU63"}),show:!!h&&g&&!y,icon:Ts,id:Ws.search,mode:"search",testId:Bs.ANSWER_MODE_TABS.SEARCH},[sn.CHAT]:{text:n({defaultMessage:"Chat",id:"WTrOy36sdu"}),show:!!h&&g,icon:LR,id:Ws.chat,mode:"chat",testId:Bs.ANSWER_MODE_TABS.CHAT}}),[n,p?.length,w.count,w.progress,h,g,y,v,x]),S=f.useMemo(()=>n(b?{defaultMessage:"Assistant",id:"wSAvhubuX6"}:{defaultMessage:"Answer",id:"DwjT1HpUgU"}),[n,b]),E=f.useMemo(()=>{switch(a){case oe.SEARCH:return b?ro:void 0;case oe.STUDIO:case oe.RESEARCH:return;default:return Mp[a]}},[b,a]);return f.useEffect(()=>{const M=d?.map(O=>ns(O.answer_mode_type).with(sn.SHOPPING,()=>C[sn.SHOPPING]).with(sn.JOBS,()=>C[sn.JOBS]).with(sn.HOTELS,()=>C[sn.HOTELS]).with(sn.MAPS,()=>C[sn.MAPS]).with(sn.IMAGE,()=>C[sn.IMAGE]).with(sn.VIDEO,()=>C[sn.VIDEO]).with(sn.SOURCES,()=>C[sn.SOURCES]).with(sn.ASSETS,()=>C[sn.ASSETS]).with(sn.APPS,()=>C[sn.APPS]).with(sn.TASKS,()=>C[sn.TASKS]).with(sn.SEARCH,()=>C[sn.SEARCH]).with(sn.CHAT,()=>C[sn.CHAT]).otherwise(P=>(ee.warn("Unsupported Answer Mode",{mode:P.valueOf()}),null))).filter(O=>!!O),k=[{text:a===oe.SEARCH?S:n(Br[a].name),icon:E,id:"d",mode:"default",testId:Bs.ANSWER_MODE_TABS.ANSWER(a)},...(M??[]).filter(O=>(O.mode!=="tasks"||o)&&(O.show===void 0||O.show===!0))],T=k.some(O=>O.mode==="tasks"),j=(l?.goals?.length??0)+(c?.goals?.length?c.goals.length-1:0);!T&&j>0&&!u&&o&&k.push({text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),icon:fB,id:Ws.tasks,mode:"tasks",testId:Bs.ANSWER_MODE_TABS.TASKS});const R=_.getState();ms(R.answerModeActionList,k)||_.setState({answerModeActionList:k})},[n,d,o,C,c?.goals?.length,l?.goals?.length,a,b,S,E,u,_]),i.jsx(G8t.Provider,{value:_,children:i.jsx(K8t,{scrollToListItem:t,children:e})})});bEe.displayName="AnswerModeProvider";const Ix=q8t,pU=()=>{const e=f.useContext(mU);if(!e)throw new Error("useAnswerModeApi must be used within an AnswerModeProvider");return e},HWt=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/search-videos-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:Kt.MEDIUM}),{media_items:r=[]}=n.data??{};return{media_items:r}},zWt=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/search-images-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:Kt.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},GWt=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/search-images-and-videos",t,{body:{query:e.query,entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:Kt.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},Y8t=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/create-image-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,image_style:e.image_style,custom_instructions:e.custom_instructions},timeoutMs:Kt.EXREMELY_HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},Q8t=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/get-image-gen-subject",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:Kt.HIGH}),{subject:r=""}=n.data??{};return{subject:r}},X8t=(e,t,n)=>{if(e.backend_uuid!==t)return e;const r=e.blocks??[],s=r.findIndex(u=>u.image_mode_block);if(s===-1)return e;const a=r[s]?.image_mode_block;if(!a)return e;const o=[...r],l=[...n,...a.media_items],c={...a,media_items:l};return o[s]&&(o[s]={...o[s],image_mode_block:c}),{...e,blocks:o}},_Ee=({reason:e})=>{const{decrementCreateLimit:t}=Hn(),{trackEvent:n}=Me(),{$t:r}=Q(),s=Oo(),a=co(),o=Die(),{mutate:l}=bt({mutationFn:async u=>{try{return await Q8t({request:u,reason:e})}catch(d){return ee.error("Failed to get image generation subject",d),{subject:""}}}}),c=f.useCallback(async({entryUUID:u,imageStyle:d,customInstructions:m=null,setIsLoadingGeneratedImage:p,onSuccessCallback:h,onFailureCallback:g})=>{n("generate image button clicked",{entryUUID:u,queryStr:m??""}),p(!0);try{const y=await Y8t({request:{entry_uuid:u,read_write_token:s??null,image_style:d,custom_instructions:m},reason:e}),{media_items:v}=y;o(u,x=>X8t(x,u,v)),t(),h()}catch(y){y instanceof Error&&y.message==="Pro feature"?a({redirectUrl:"",pitchMessage:{title:"Generate DALL-E images with Pro",description:"Upgrade to Pro to generate DALL-E images"},origin:Ie.GENERATE_IMAGE}):y instanceof Error&&y.message==="Moderation"?g(r({defaultMessage:"Failed due to moderation. Please try a different query",id:"ChRyieNjo/"})):g(r({defaultMessage:"Failed to generate image",id:"mVJ5f5LkYT"}))}finally{p(!1)}},[n,s,o,t,a,r,e]);return f.useMemo(()=>({onGenerateImageClick:c,getImageGenSubjectMutation:l}),[l,c])},Z8t=({root:e})=>{const t=f.useRef(null),[n,r]=f.useState(!1),[s,a]=f.useState(!1),o=f.useCallback(l=>{l?(t.current=l,r(!0)):(r(!1),t.current=null)},[]);return f.useEffect(()=>{if(!t.current||!n)return;const l=new IntersectionObserver(([c])=>{c&&a(c.intersectionRatio<1)},{threshold:[1],root:e,rootMargin:"-1px 9999px 9999px 9999px"});return l.observe(t.current),()=>l.disconnect()},[e,n]),f.useMemo(()=>({ref:o,isSticky:s}),[s,o])},Nee=150,Aee=500,wEe=A.memo(({entry:e,imageGenSubject:t,setImageGenSubject:n,onSubmit:r})=>{const s="generate-image-custom-input",{$t:a}=Q(),{isMobileStyle:o,isMobileUserAgent:l}=ye(),[c,u]=f.useState(!1),[d,m]=f.useState(""),[p,h]=f.useState(t),{getImageGenSubjectMutation:g}=_Ee({reason:s}),y=d.length>0?d+`. The subject is:
`+p:p,v=d.length===0&&p.length===0||d.length>Nee||p.length>Aee;f.useEffect(()=>{t===""&&(async()=>(u(!0),await g({entry_uuid:e.entryUUID,read_write_token:null},{onSuccess:_=>{n(_.subject),h(_.subject)},onSettled:()=>{u(!1)}})))()},[t,g,e.entryUUID,n]);const x=f.useCallback(()=>r(y),[y,r]);return c?i.jsx(ko,{}):i.jsxs("div",{children:[i.jsx(cl,{className:"mb-sm",isMobileUserAgent:l,isMobileStyle:o,onChange:m,value:d,label:a({defaultMessage:"Style",id:"7mL9QEUFav"}),placeholder:a({defaultMessage:"Use detailed brush strokes.",id:"FqRwHGXuKd"}),maxLength:Nee}),i.jsx(cl,{isMobileUserAgent:l,isMobileStyle:o,onChange:h,label:a({defaultMessage:"Subject",id:"LLtKhppiyE"}),value:p,maxLength:Aee}),i.jsx("div",{className:"mt-md flex",children:i.jsx(ge,{text:a({defaultMessage:"Submit",id:"wSZR47Y5kj"}),disabled:v,variant:"primary",onClick:x})})]})});wEe.displayName="GenerateImageCustomInput";var Dm;(function(e){e.PAINTING="PAINTING",e.PHOTOGRAPH="PHOTOGRAPH",e.ILLUSTRATION="ILLUSTRATION",e.DIAGRAM="DIAGRAM"})(Dm||(Dm={}));const Py=A.memo(({icon:e,text:t,onClick:n})=>i.jsxs(z,{variant:"subtler",bgHover:"subtle",className:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border",onClick:n,children:[i.jsx(me,{icon:e,size:"lg",className:"mb-sm"}),i.jsx(L,{variant:"smallBold",children:t})]}));Py.displayName="StyleChoice";const CEe=A.memo(({onStyleChoiceClick:e})=>{const t=f.useCallback(()=>e(Dm.PAINTING),[e]),n=f.useCallback(()=>e(Dm.PHOTOGRAPH),[e]),r=f.useCallback(()=>e(Dm.ILLUSTRATION),[e]),s=f.useCallback(()=>e(Dm.DIAGRAM),[e]);return i.jsxs(z,{className:"gap-sm grid grid-cols-2",children:[i.jsx(Py,{icon:ene,onClick:t,text:"Painting"}),i.jsx(Py,{icon:IR,onClick:n,text:"Photograph"}),i.jsx(Py,{icon:qC,onClick:r,text:"Illustration"}),i.jsx(Py,{icon:tTe,onClick:s,text:"Diagram"})]})});CEe.displayName="GenerateImageTemplates";const SEe=A.memo(({icon:e,text:t,subtitle:n,onClick:r,hideOnClick:s=!0,disabled:a=!1,...o})=>{const[l,c]=f.useState(!0),u=f.useCallback(()=>{!a&&r&&r(),!a&&s&&c(!1)},[a,s,r]);return l?i.jsx(z,{bgHover:a?void 0:"subtler",className:U("mb-sm px-md py-sm w-full select-none rounded-md border border-dashed",{"cursor-pointer":!a,"opacity-75":a}),onClick:u,...o,children:i.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[i.jsxs(L,{variant:"smallBold",className:"gap-x-sm flex items-center",children:[i.jsx(me,{icon:e,size:"md"}),i.jsxs("div",{children:[i.jsx("div",{children:t}),n&&i.jsx(L,{variant:"tiny",color:"light",children:n})]})]}),i.jsx(L,{color:"super",children:i.jsx(me,{icon:rr})})]})}):null});SEe.displayName="ThreadEntryAccessoryButton";const EEe=A.memo(({icon:e,message:t,variant:n="good",actionList:r,title:s,dismissable:a,onDismiss:o,size:l="regular",pointerVariant:c="none",testId:u,isMobileStyle:d,className:m})=>{const p=r&&r.length>0&&i.jsx("div",{className:"gap-x-sm flex",children:r?.map((y,v)=>y.visible?y.items&&y.items.length>0?i.jsx(Jt,{isMobileStyle:d,items:y.items,children:i.jsx(ge,{size:Wt.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,debounce:y.debounce})},y.text??v):i.jsx("div",{className:"relative flex h-full items-center",children:i.jsx(ge,{size:Wt.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,toolTip:y.tooltip,tooltipLayout:"bottom",disabled:y.disabled,isLoading:y.isLoading,debounce:y.debounce})},y.text??v):i.jsx(A.Fragment,{},v))}),h=f.useMemo(()=>U({"text-foreground":n==="good","text-caution":n==="warning"}),[n]),g=f.useMemo(()=>{if(n==="good")return"super";if(n==="warning")return"red";if(n==="info")return"textColor"},[n]);return t==null?null:i.jsxs("div",{"data-testid":u,children:[c!=="none"&&i.jsx("div",{className:U("mt-sm px-md flex",{"justify-start":c==="left","justify-end":c==="right"||c==="landing-page-right","pr-[75px]":c==="landing-page-right"}),children:i.jsx("div",{className:U("border-b-offset size-0 border-x-[10px] border-b-[15px] border-x-transparent")})}),i.jsxs(z,{variant:"subtler",className:U("gap-sm relative flex flex-col items-center justify-between rounded-lg md:flex-row",{"p-sm":l==="small","p-md":l==="regular"},m),children:[a&&i.jsx("div",{className:"right-xs top-xs absolute",children:i.jsx(Te,{"aria-label":"Dismiss",icon:Lt,size:"small",onClick:o})}),i.jsx("div",{children:i.jsxs("div",{className:"gap-x-md flex items-center",children:[i.jsx(z,{variant:g,className:"flex size-11 shrink-0 items-center justify-center rounded-full",children:i.jsx(L,{variant:l==="regular"?"baseSemi":"smallBold",color:n==="warning"?"white":"defaultInverted",children:e&&i.jsx(me,{icon:e})})}),i.jsxs("div",{children:[i.jsx(L,{variant:s&&l==="regular"?"baseSemi":"smallBold",className:h,children:s||t}),s&&t&&i.jsx(L,{variant:l==="regular"?"base":"small",children:t})]})]})}),p]})]})});EEe.displayName="Banner";const jee={page:"page-title",section:"section-title",subsection:"baseSemi"},J8t={page:"lg",section:"base",subsection:"md"},ejt=({icon:e,variant:t})=>i.jsx(me,{icon:e,size:J8t[t]}),MEe=A.memo(({title:e,icon:t,subtitle:n,actionList:r,search:s,variant:a="page",noBorder:o=!1,center:l="md",testId:c,isMobileStyle:u,leadingComponent:d,trailingComponent:m})=>{const p=r&&r.length>0&&i.jsx("div",{className:"gap-x-sm flex",children:r?.map((g,y)=>g.visible?g.items&&g.items.length>0?i.jsx(Jt,{isMobileStyle:u,items:g.items,children:i.jsx(ge,{testId:c,size:g.size??Wt.small,text:g.text,variant:g.variant,icon:g.icon,onClick:g.onClick,debounce:g.debounce})},g.text??y):i.jsx("div",{className:"relative flex h-full items-center",children:i.jsx(Te,{testId:c,size:g.size??Wt.small,text:g.text,variant:g.variant,icon:g.icon,onClick:g.onClick,toolTip:g.tooltip,tooltipLayout:"bottom",disabled:g.disabled,debounce:g.debounce,isLoading:g.isLoading})},g.text??y):i.jsx(A.Fragment,{},y))}),h=i.jsxs("div",{children:[i.jsxs("div",{className:"gap-x-sm flex items-center",children:[t&&i.jsx(L,{variant:jee[a]??"section-title",children:i.jsx(ejt,{icon:t,variant:a})}),i.jsx(L,{variant:jee[a]??"section-title",children:e})]}),n&&i.jsx(L,{variant:a==="page"?"base":"small",color:"light",className:"mt-sm",children:n})]});return i.jsx(z,{variant:"background",className:U({"sticky top-0 z-[5] flex items-center rounded-t-xl":a==="page","border-b":!o,"h-headerHeight":a==="page"&&!s,"pt-md md:pb-md":a==="page"&&s}),children:i.jsx(z,{className:U("w-full",{"px-sm md:px-lg mx-auto max-w-screen-md":a==="page"&&l==="md","max-w-threadWidth px-md md:px-lg mx-auto":a==="page"&&l==="lg"}),children:i.jsxs(z,{variant:"background",className:U("gap-md flex flex-col md:flex-row md:items-center md:justify-between",{"h-14":!s&&a==="section"}),children:[i.jsxs("div",{className:"md:hidden",children:[i.jsxs("div",{className:"gap-xs flex w-full shrink-0 items-center",children:[d,i.jsxs("div",{className:"gap-sm flex w-full justify-between",children:[h,p]})]}),s&&i.jsx("div",{className:"mt-md w-full max-w-md",children:s})]}),i.jsxs("div",{className:"gap-sm hidden grow items-center justify-between md:flex",children:[h,i.jsxs("div",{className:"gap-sm flex grow items-center justify-end",children:[p,s&&i.jsx("div",{className:"max-w-md grow",children:s})]}),m]})]})})})});MEe.displayName="Header";const kEe=A.memo(({userCreateLimit:e,onGenerateClick:t,isDisabled:n,entry:r,btnText:s,buttonComponent:a})=>{const{$t:o}=Q(),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[m,p]=f.useState(""),[h,g]=f.useState(""),y=Qe(),{hasAccessToProFeatures:v}=yt(),{isMobileStyle:x,isMobileUserAgent:b}=ye(),{openVisitorLoginUpsell:_}=Xn({enabled:!y}),{trackEvent:w}=Me(),C=co(),S=v&&e===0,E=v&&e<10;let M=yne;v?S&&(M=mp):M=jR;const k=f.useCallback(I=>{d(!1),w("generate image style clicked",{entryUUID:r.entryUUID,style:I}),t({style:I,customInstructions:null,onFailure:D=>p(D)})},[r.entryUUID,t,w]),T=f.useCallback(I=>{d(!1),c(!1),t({style:"custom",customInstructions:I,onFailure:D=>p(D)}),w("click image gen custom prompt submit",{prompt:I})},[t,w]),j=f.useCallback(()=>{y?v?d(!0):C({redirectUrl:"",pitchMessage:{title:o({defaultMessage:"Generate images with {pro}",id:"lRrjmenIbD"},{pro:"Pro"}),description:o({defaultMessage:"Visualize your answers with images",id:"mmH7FzyH04"})},origin:Ie.GENERATE_IMAGE}):_({title:o({defaultMessage:"Sign in to generate images",id:"rH/ZsL5HtP"}),origin:Ie.GENERATE_IMAGE}),w("generate image button clicked",{entryUUID:r.entryUUID,queryStr:r.entryTitle})},[r.entryTitle,r.entryUUID,y,v,_,C,o,w]),R=f.useCallback(()=>c(I=>!I),[]),O=f.useMemo(()=>[{icon:QR,tooltipLayout:"right",tooltip:o({defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}),pill:!0,visible:!0,variant:l?"primary":"common",onClick:R}],[o,l,R]),P=f.useMemo(()=>i.jsxs("div",{className:"space-y-md p-sm pt-0",children:[i.jsx(MEe,{title:o(l?{defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}:{defaultMessage:"Choose a style",id:"AU4HcqqKpC"}),variant:"section",isMobileStyle:x,actionList:O}),!l&&i.jsx(CEe,{onStyleChoiceClick:k}),l&&i.jsx(wEe,{entry:r,imageGenSubject:h,setImageGenSubject:g,onSubmit:T})]}),[o,k,T,O,r,h,x,l]),N=f.useCallback(()=>{d(!1),c(!1)},[]);return m!==""?i.jsx(EEe,{isMobileStyle:x,message:m,icon:nTe}):i.jsx(B3,{isMobileStyle:x,isOpen:u,onClose:N,content:P,children:i.jsx(pn,{isMobileUserAgent:b,tooltipText:o({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:e}),tooltipLayout:"bottom",showTooltip:E,asChild:!0,children:a?a({onClick:j,isRateLimitReached:S,isDisabled:n,buttonIcon:M,text:s}):i.jsx(SEe,{text:s,subtitle:S?o({defaultMessage:"Limit reached. Come back soon.",id:"LPlQBHfRcL"}):void 0,disabled:S||n,icon:M,hideOnClick:!1,onClick:j},"imageGenerate")})})});kEe.displayName="GenerateImageButton";const ho=f.memo(({children:e,id:t})=>{const n={hidden:{opacity:0},visible:{opacity:1}};return i.jsx(xe.div,{className:"relative",variants:n,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1,ease:"easeInOut"},children:e},t)});ho.displayName="AnswerModeContainer";const tjt=({durationMinutes:e,enabled:t=!0,maxProgress:n=95})=>{const[r,s]=f.useState(2),[a,o]=f.useState(e*60),l=f.useRef(void 0),c=f.useRef(void 0),u=f.useCallback(()=>{if(!t)return;l.current&&clearTimeout(l.current);const d=Math.random()*1500+500;l.current=setTimeout(()=>{const m=Date.now(),p=(m-(c.current??m))/1e3,h=e*60,g=Math.min(p/h*100,n),y=1+Math.random()*2,v=Math.random()*4-2;let x=r+y+v;const b=Math.min(g+10,n);x=Math.min(x,b),x=Math.max(r,Math.min(x,n)),s(x);const _=x/p,C=(n-x)/_,S=Math.max(0,Math.min(C,h-p));o(Math.round(S)),x<n&&u()},d)},[t,e,n,r]);return f.useEffect(()=>{if(!t){s(2),o(e*60);return}return c.current=Date.now(),u(),()=>{l.current&&clearTimeout(l.current)}},[t,e,u]),f.useEffect(()=>{t&&(s(2),o(e*60),c.current=Date.now())},[t,e]),f.useMemo(()=>({percentCompleted:Math.round(r),percentRemaining:Math.round(100-r),estimatedSecondsRemaining:a}),[r,a])},njt=({researchPlan:e,reasoningPlan:t,blocks:n,hasAnswer:r,isProReasoningMode:s,displayModel:a})=>{const o=t?.goals?.slice(1)??le,l=a===ce.O3_PRO,c=tjt({durationMinutes:5,enabled:l&&!r,maxProgress:95}),u=f.useMemo(()=>!e||r||s&&o.length>0,[e,r,s,o.length]),d=f.useMemo(()=>!t&&!s||!!t?.final,[t,s]),m=r&&d&&u,p=f.useMemo(()=>d?null:t?.goals[t.goals.length-1],[t,d]),h=f.useMemo(()=>{if(l&&!r)return c;let g=0,y=0;if(Array.isArray(n)){for(const x of n)if(x.intended_usage==="plan"&&x.plan_block){const b=x.plan_block;b.eta_seconds_remaining!==void 0&&(g=b.eta_seconds_remaining),b.pct_complete!==void 0&&(y=b.pct_complete)}}const v=y||2;return{estimatedSecondsRemaining:g,percentCompleted:v,percentRemaining:100-v}},[n,l,r,c]);return f.useMemo(()=>({reasoningGoals:o,isResearchPlanFinished:u,isReasoningPlanFinished:d,isAllPlansFinished:m,activeReasoningGoal:p,...h}),[o,u,d,m,p,h])},qWt="/static/images/agent-favicons/gmail.svg",KWt="/static/images/data-connectors/microsoft/outlook-avatar.svg",YWt={click:{message:K({defaultMessage:"Clicking",id:"n43/KMHgLD"}),icon:uTe},paused:{message:K({defaultMessage:"Paused",id:"C2iTEHtK//"}),icon:cTe},fill:{message:K({defaultMessage:"Filling out a form",id:"5i0X5DesMM"}),icon:lTe},search:{message:K({defaultMessage:"Searching",id:"IfE0if3ytt"}),icon:Ts},navigate:{message:K({defaultMessage:"Navigating",id:"3O6LMNhb0M"}),icon:hne},press_key:{message:K({defaultMessage:"Pressing key",id:"R6bmgzv6Xs"}),icon:j_},scroll_page:{message:K({defaultMessage:"Scrolling",id:"/UUUqdefcb"}),icon:iTe},reasoning:{message:K({defaultMessage:"Reasoning",id:"Aw3qRf7hyO"}),icon:Xi},considering_clarification:{message:K({defaultMessage:"Considering your clarification",id:"xvwGmM2LU3"}),icon:Xi},working:{message:K({defaultMessage:"Working",id:"gAR0atqpRn"}),icon:oTe},finished:{message:K({defaultMessage:"Done",id:"JXdbo8Vnlw"}),icon:Rr},reading:{message:K({defaultMessage:"Reading",id:"MOK/yKIpYX"}),icon:$a},reading_browser:{message:K({defaultMessage:"Reviewing your tabs and browser history",id:"P+tFAY9IRT"}),icon:$a},getting_source:{message:K({defaultMessage:"Getting source",id:"Z1eFpRpq7v"}),icon:$a},getting_sources:{message:K({defaultMessage:"Getting sources",id:"Jv/OJ6AjyO"}),icon:$a},reviewing_source:{message:K({defaultMessage:"Reviewing source",id:"ymFEF2YHhs"}),icon:$a},reviewing_sources:{message:K({defaultMessage:"Reviewing sources",id:"/NZJDBzKok"}),icon:$a},reviewing_memory:{message:K({defaultMessage:"Reviewing memory",id:"piUVOodSmM"}),icon:$a},reviewing_memories:{message:K({defaultMessage:"Reviewing memories",id:"VgUfUXIIey"}),icon:$a},reviewing_conversation_history:{message:K({defaultMessage:"Reviewing past queries",id:"RfG7EQT3IO"}),icon:$a},reading_tabs:{message:K({defaultMessage:"Reviewing your tabs",id:"cE3TzCT3eK"}),icon:$a},building_app:{message:K({defaultMessage:"Building application",id:"qK6gEQyvil"}),icon:pB},creating_chart:{message:K({defaultMessage:"Creating chart",id:"yc5YxtS5VS"}),icon:mB},creating_pdf:{message:K({defaultMessage:"Creating PDF",id:"NcD2ia4Hrn"}),icon:bw},creating_docx:{message:K({defaultMessage:"Creating DOCX",id:"GIUtasyzkA"}),icon:vne},thinking:{message:K({defaultMessage:"Thinking",id:"AHQWDTo4+e"}),icon:Xi},reading_history:{message:K({defaultMessage:"Reviewing your browser history",id:"7cZkJ7qeNW"}),icon:V5},searching_browser:{message:K({defaultMessage:"Searching your browser",id:"i91D1hXua6"}),icon:V5},searching_open_tabs:{message:K({defaultMessage:"Searching open tabs",id:"xHbSQOjdLq"}),icon:aTe},opening_tab:{message:K({defaultMessage:"Opening tab",id:"ySnoI+lduZ"}),icon:gB},closing_tabs:{message:K({defaultMessage:"Closing your tabs",id:"2KnXtfjRKV"}),icon:hB},searching_gmail:{message:K({defaultMessage:"Searching your email",id:"X1ami4cm1T"}),icon:W5},emailing:{message:K({defaultMessage:"Emailing",id:"QRygokyD+u"}),icon:W5},searching_calendar:{message:K({defaultMessage:"Searching your calendar",id:"nH9G8cL0Ys"}),icon:$5},conclusion:{message:K({defaultMessage:"Wrapping up",id:"DN3hjkyzeT"}),icon:null},generating_images:{message:K({defaultMessage:"Generating",id:"NAZfqr2apb"}),icon:yne},presenting_images:{message:K({defaultMessage:"Presenting",id:"BlxYo7+tmK"}),icon:Rte},grouping_tabs:{message:K({defaultMessage:"Grouping tabs",id:"Fg6l7eg2HV"}),icon:sTe},ungrouping_tabs:{message:K({defaultMessage:"Ungrouping tab groups",id:"dbpFCBu2NQ"}),icon:rTe},searching_tab_groups:{message:K({defaultMessage:"Searching tab groups",id:"V+4/ioYMPd"}),icon:Ts},getting_freebusy:{message:K({defaultMessage:"Checking availability",id:"ZamRNp2QgI"}),icon:$5},getting_user_info:{message:K({defaultMessage:"Searching your contacts",id:"gPpZJKZdnL"}),icon:Eg},found_contacts:{message:K({defaultMessage:"Found contacts",id:"2zmZgbYnmk"}),icon:Eg},no_contacts_found:{message:K({defaultMessage:"No contacts found",id:"JhY7bAH15Y"}),icon:Eg},selecting_contacts:{message:K({defaultMessage:"Selecting contacts",id:"OQhQc1Jomc"}),icon:Eg},getting_contact_details:{message:K({defaultMessage:"Getting contact details",id:"p391mWkGfv"}),icon:Eg},scheduling:{message:K({defaultMessage:"Scheduling",id:"5lQx5rgTEW"}),icon:yB},scheduled:{message:K({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:yB},reading_events:{message:K({defaultMessage:"Getting event details",id:"0QgD+ftRet"}),icon:$5},reading_emails:{message:K({defaultMessage:"Reviewing emails",id:"f/yAuwo+Vl"}),icon:W5},OPEN_TAB:{message:K({defaultMessage:"Open tabs",id:"KO2pxljl8b"}),icon:gB},RECENTLY_CLOSED_TAB:{message:K({defaultMessage:"Recently closed tabs",id:"GrcBtKIzPh"}),icon:hB},BROWSER_HISTORY:{message:K({defaultMessage:"Browser history",id:"DtBSny6kw5"}),icon:V5},MCP_TOOL:{message:K({defaultMessage:"Connecting to {appName}",id:"w+iLkzBJV0"}),icon:pB},searching_flights:{message:K({defaultMessage:"Searching flights",id:"9+i0zI94jg"}),icon:Ts},reviewing_booking_options:{message:K({defaultMessage:"Reviewing options",id:"hEF13crkAK"}),icon:Ts},looking_for_booking_options:{message:K({defaultMessage:"Looking for booking options",id:"KIKXHtHJvz"}),icon:Ts},redirecting_to_booking:{message:K({defaultMessage:"Redirecting to booking site",id:"y/a1lYMfGW"}),icon:Ts},setting_up_price_alert_automation:{message:K({defaultMessage:"Setting up PriceAlertAutomation",id:"+7IqVk27BT"}),icon:mB}},ch={initial:{opacity:0,position:"absolute",width:"100%"},animate:{opacity:1,position:"relative",transition:{opacity:{duration:.3}}},exit:{opacity:0,position:"absolute",width:"100%",transition:{opacity:{duration:.3}}}},aR=A.memo(({onClick:e})=>{const[t,n]=f.useState(!1),r=f.useCallback(()=>{n(!0),e()},[e]),{searchMode:s}=bn(),a=f.useMemo(()=>i.jsx(pe,{defaultMessage:"Skip remaining steps",id:"nWmXYwgk8a"}),[]);return i.jsx(L,{color:"light",variant:"small",className:"text-pretty",children:i.jsx("div",{className:"relative min-h-[20px] w-full",children:t?i.jsx(xe.div,{initial:"initial",animate:"animate",exit:"exit",variants:ch,children:i.jsx(wn,{variant:"super",as:"div",className:"px-sm flex h-6 items-center",children:s===oe.STUDIO?i.jsx(pe,{defaultMessage:"Creating",id:"rQUSqe6JcA"}):i.jsx(pe,{defaultMessage:"Answer",id:"4hkQO/op5u"})})},"skipping-message"):i.jsx(xe.div,{initial:"initial",animate:"animate",exit:"exit",variants:ch,children:i.jsx(ge,{size:"tiny",onClick:r,variant:"common",icon:dTe,extraCSS:U("rounded-lg"),text:a})},"skip-button")})})});aR.displayName="FastAnswerButton";const TEe=A.memo(()=>{const{trackEvent:e}=Me(),{$t:t}=Q(),{permission:n,requestPermission:r}=_me({windowsAppOnly:!1}),s=f.useCallback(async()=>{try{e("permission notifications requested",{origin:"pro_reasoning_status_updater"}),await r()?e("permission notifications granted",{origin:"pro_reasoning_status_updater"}):e("permission notifications not granted",{origin:"pro_reasoning_status_updater"})}catch(o){ee.error("Error requesting notification permission:",o)}},[e,r]),a=ns(n).with("default",()=>({variant:"primaryGhost",text:t({id:"ipGe+BIJx7",defaultMessage:"Notify me"}),icon:Ef})).with("granted",()=>({variant:"border",text:t({id:"V52jNnY+6M",defaultMessage:"Enabled"}),icon:fTe,toolTip:t({id:"ktmy4MhbQv",defaultMessage:"We'll notify you when done."}),extraCSS:"!pointer-events-none border-none !bg-transparent"})).otherwise(()=>({variant:"border",icon:mTe,toolTip:t({id:"D0ozicKDgX",defaultMessage:"Notifications blocked. Please check browser settings."}),extraCSS:"!pointer-events-none border-none !bg-transparent"}));return i.jsx(ge,{size:"tiny",onClick:s,...a,extraCSS:U("rounded-lg",a.extraCSS)})});TEe.displayName="NotificationButton";const NEe=A.memo(({estimatedSecsRemaining:e,placeholderMessage:t="Creating a plan",resultType:n="project"})=>{const{formatNumber:r,formatMessage:s}=Q();return i.jsx(L,{variant:"small",color:"light",className:"text-pretty",children:i.jsx("div",{className:"relative min-h-[20px] w-full",children:i.jsx(it,{mode:"sync",initial:!1,children:e?i.jsx(xe.div,{initial:"initial",animate:"animate",exit:"exit",variants:ch,children:i.jsx(pe,{defaultMessage:"{time} left to gather sources and create your {resultType}.",id:"AhSqF1URDZ",values:{time:i.jsx(L,{inline:!0,variant:"smallBold",as:"span",children:Math.round(e/60)===1?s({defaultMessage:"A minute",id:"X4ic2xRHa2"}):r(Math.round(e/60),{style:"unit",unit:"minute",unitDisplay:"long"})}),resultType:s(n==="project"?{defaultMessage:"project",id:"RbFAl7UGmp"}:{defaultMessage:"report",id:"TmfXGUz23p"})}})},"time-remaining"):i.jsx(xe.div,{initial:"initial",animate:"animate",exit:"exit",variants:ch,children:i.jsx(wn,{variant:"super",as:"span",children:t})},"creating-plan")})})})});NEe.displayName="TimeRemaining";const N5=A.memo(({estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:n,resultType:r,showAnimatePresence:s=!0,wrapperClassName:a="relative min-h-[20px] w-full"})=>{const o=!t||t<95?i.jsx(xe.div,{initial:"initial",animate:"animate",exit:"exit",variants:ch,children:i.jsx(NEe,{estimatedSecsRemaining:e,placeholderMessage:n,resultType:r})},"time-remaining"):i.jsx(xe.div,{initial:"initial",animate:"animate",exit:"exit",variants:ch,children:i.jsx(L,{color:"light",variant:"small",className:"text-pretty",children:i.jsx(wn,{variant:"super",as:"span",children:i.jsx(pe,{defaultMessage:"Finishing up...",id:"JUr8ErKBCt"})})})},"finishing-message");return s?i.jsx("div",{className:a,children:i.jsx(it,{mode:"sync",initial:!1,children:o})}):o});N5.displayName="ProgressMessage";const AEe=A.memo(({percentCompleted:e})=>i.jsx("div",{className:"gap-two relative flex w-full flex-col",children:i.jsx(N5,{percentCompleted:e,placeholderMessage:"Reasoning with o3-pro"})}));AEe.displayName="O3Message";const jEe=A.memo(({percentCompleted:e=1,className:t,showPlayHead:n=!0})=>i.jsx("div",{className:U("pb-xs relative w-full flex-col",t),children:i.jsxs("div",{className:"bg-offsetPlus h-xs relative left-0 top-0 flex w-full rounded-full",children:[i.jsx("div",{className:"bg-super shadow-super/15 left-0 top-0 h-full rounded-full shadow-[0_0_2px_1px] transition-[width] duration-200 ease-in-out",style:{width:`${e}%`}}),n&&i.jsx("div",{className:"bg-super -ml-two -mt-two shadow-super/50 size-sm rounded-full shadow-[0_0_5px_1px,-4px_0_3px_-2px]"})]})}));jEe.displayName="ProgressBar";const REe=A.memo(({searchMode:e,estimatedSecondsRemaining:t,percentCompleted:n})=>i.jsx("div",{className:"gap-two relative flex w-full flex-col",children:i.jsx(L,{color:"light",variant:"small",className:"text-pretty",children:e===oe.RESEARCH&&i.jsx(N5,{estimatedSecsRemaining:t,percentCompleted:n,placeholderMessage:"It takes a few minutes to gather sources and create your report.",resultType:"report",showAnimatePresence:!1,wrapperClassName:""})})}));REe.displayName="ResearchMessage";const IEe=A.memo(({estimatedSecsRemaining:e,percentCompleted:t})=>i.jsx("div",{className:"gap-two pb-xs relative flex w-full flex-col",children:i.jsx(N5,{estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:"Creating a plan"})}));IEe.displayName="StudioMessage";const PEe=A.memo(({className:e,style:t,skipSearchEnabled:n,onSkipSearch:r})=>{const{searchMode:s,researchPlan:a,reasoningPlan:o,steps:l,hasAnswer:c,isProReasoningMode:u,result:{backend_uuid:d,blocks:m,display_model:p}}=bn(),{estimatedSecondsRemaining:h,percentCompleted:g,percentRemaining:y}=njt({researchPlan:a,reasoningPlan:o,blocks:m,hasAnswer:c,isProReasoningMode:u??!1,displayModel:p}),v=Math.min(g,95),x=p===ce.O3_PRO,b=s===oe.RESEARCH||s===oe.STUDIO||x,_=l.some(w=>w.step_type==="ENTROPY_REQUEST");return b?i.jsxs(xe.div,{initial:{opacity:0,y:-4},className:e,style:t,animate:{opacity:1,y:0,transition:{ease:wu,duration:.2,delay:.05}},exit:{opacity:0,y:-4,transition:{ease:wu,duration:.5}},children:[i.jsxs(z,{variant:"subtler",className:U(x?"py-md rounded-xl border px-6 shadow-sm":"pb-md rounded-xl border px-6 pt-5 shadow-sm","flex flex-col gap-3"),children:[i.jsxs(z,{className:U("gap-sm flex flex-row items-start"),children:[i.jsx("div",{className:"gap-sm pt-two relative flex grow",children:s===oe.RESEARCH?i.jsx(REe,{searchMode:s,estimatedSecondsRemaining:h,percentCompleted:v}):x?i.jsx(AEe,{percentCompleted:v}):i.jsx(IEe,{estimatedSecsRemaining:h,percentRemaining:y,percentCompleted:v,backendUuid:d})}),i.jsxs("div",{className:"gap-sm flex items-start",children:[n&&r&&!x&&i.jsx(aR,{onClick:r}),!x&&i.jsx(TEe,{})]})]}),i.jsx(jEe,{percentCompleted:v,className:"my-1.5"})]}),i.jsx("div",{className:"from-base via-base absolute top-full h-5 w-full bg-gradient-to-b from-0% via-[calc(100%_-_12px)] to-transparent to-100% backdrop-blur-[0.25px]"})]},"progress-banner"):_&&n&&r?i.jsx(aR,{onClick:r}):null});PEe.displayName="ProgressBanner";const hU=f.memo(()=>i.jsxs(wn,{className:"gap-md flex flex-col",children:[i.jsx(yw,{}),i.jsx(yw,{}),i.jsx(yw,{})]}));hU.displayName="AnswerModeLoader";const yw=f.memo(()=>i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(z,{variant:"subtler",className:"size-32 shrink-0 rounded-md"}),i.jsxs("div",{className:"gap-sm flex w-full flex-col",children:[i.jsx(z,{variant:"subtler",className:"h-4 w-full rounded-full"}),i.jsx(z,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]})]}));yw.displayName="Item";const OEe=f.memo(()=>{const{searchMode:e,inFlight:t}=bn(),n=e==oe.STUDIO;return i.jsxs("div",{children:[n&&t&&i.jsx(PEe,{}),i.jsxs(wn,{className:U("gap-md flex",{"max-w-threadContentWidth mx-auto":!n}),children:[n&&i.jsxs("div",{className:"gap-md flex w-[30%] flex-col",children:[i.jsx(z,{variant:"subtler",className:"h-4 w-1/2 rounded-full"}),i.jsxs("div",{className:"gap-sm flex",children:[i.jsx(z,{variant:"subtler",className:"size-3.5 rounded-full"}),i.jsx(z,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]}),i.jsxs("div",{className:"gap-sm flex",children:[i.jsx(z,{variant:"subtler",className:"size-3.5 rounded-full"}),i.jsx(z,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]})]}),i.jsxs("div",{className:"gap-sm flex w-[70%] flex-col",children:[i.jsx(z,{variant:"subtler",className:"h-4 w-[70%] rounded-full"}),i.jsx(z,{variant:"subtler",className:"h-4 w-4/5 rounded-full"}),i.jsx(z,{variant:"subtler",className:"h-4 w-1/2 rounded-full"})]})]})]})});OEe.displayName="TasksModeLoader";function LEe({entryUUID:e,reason:t,callback:n}){const[r,s]=f.useState(!1),a=f.useRef(!1),{inFlight:o}=Ht();return f.useEffect(()=>{!o&&a.current&&(a.current=!1,s(!1),n())},[o,n]),{terminateEntry:()=>{a.current=!0,s(!0),Sp({entryUUID:e,reason:t})},isTerminating:r}}const rjt=(e,t)=>{const{value:n,loading:r}=At({flag:"generative-refinement",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function sjt(){const{result:e,refinementFilters:t,selectedRefinementQuery:n,selectedPillIndices:r,actions:{setSelectedRefinementQuery:s,setSelectedPillIndices:a},submitQuery:o,result:{query_str:l}}=bn(),{variation:c,loading:u}=rjt(!1),[d,m]=f.useState(!1),p=f.useCallback(x=>{const b=r.includes(x);let _;b?_=r.filter(w=>w!==x):_=[...r,x],a(_)},[r,a]),h=f.useCallback(()=>{s(null),a([])},[s,a]),g=f.useCallback(async()=>{if(r.length===0||!l)return null;const x=r.map(b=>t?.[b]?.label).filter(Boolean);if(x.length===0)return null;m(!0);try{const b=await Ubt({query:l,keywords:x,reason:"refinement-query"});return b||x.join(" ")+" "+l}catch{return x.join(" ")+" "+l}finally{m(!1)}},[r,t,l]),y=f.useCallback(async()=>{const x=await g();s(x),x&&o({rawQuery:x,existingEntryUUID:e.backend_uuid,newFrontendContextUUID:null,collection:null,promptSource:"user",querySource:"refinement-pill"})},[g,s,o,e.backend_uuid]),v=f.useCallback(async()=>{const x=await g();s(x)},[g,s]);return{refinementFilters:c&&!u?t:null,selectedRefinementQuery:n,selectedPillIndices:r,handlePillClickAnswerMode:p,handleResetClick:h,handleApplyClickDefaultMode:y,handleApplyClickAnswerMode:v,isRefinementLoading:d}}const oR=f.memo(({title:e,filters:t,selectedIndices:n,onFilterClick:r,isOpen:s,onToggle:a,useCheckboxes:o=!1})=>i.jsxs(z,{className:"cursor-pointer border-b",children:[i.jsxs(z,{onClick:a,className:"p-md group flex w-full cursor-pointer items-center",children:[i.jsx("div",{className:"flex-1",children:i.jsx(L,{variant:"smallBold",children:e})}),i.jsx("div",{className:"pl-md",children:i.jsx(xe.div,{animate:{rotate:s?180:0},transition:{duration:.2,ease:hn},className:"text-quiet group-hover:text-foreground",style:{transformOrigin:"center"},children:i.jsx(Qn,{size:18,strokeWidth:2.5})})})]}),i.jsx(Uo,{transition:{duration:.2,ease:hn},children:s&&i.jsx(so,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:hn},children:i.jsx("div",{className:"px-md pb-md",children:o?i.jsx("div",{className:"gap-xs flex flex-col",children:t.map(l=>i.jsxs("div",{className:"py-xs flex cursor-pointer items-center justify-between",onClick:()=>r(l.originalIndex),children:[i.jsx(L,{variant:"small",children:l.label}),i.jsx(T1,{checked:n?.includes(l.originalIndex)??!1,toggleChecked:()=>r(l.originalIndex),variant:"small"})]},l.originalIndex))}):i.jsx("div",{className:"gap-sm flex flex-wrap",children:t.map(l=>i.jsx(ge,{text:l.label,size:"small",variant:n?.includes(l.originalIndex)?"common":"border",onClick:()=>r(l.originalIndex),extraCSS:"flex-shrink-0"},l.originalIndex))})})})})]}));oR.displayName="FilterSection";const DEe=f.memo(({refinementFilters:e,handlePillClick:t,selectedIndices:n,isOpen:r,setIsOpen:s,handleResetClick:a,handleApplyClick:o,isLoading:l=!1})=>{const{isMobileStyle:c}=ye(),{$t:u}=Q(),d=f.useMemo(()=>e?.map((b,_)=>({...b,originalIndex:_})).filter(b=>b.refinement_filter_type==="DYNAMIC")??[],[e]),m=f.useMemo(()=>{const b={};return e?.map((_,w)=>({..._,originalIndex:w})).filter(_=>_.refinement_filter_type==="STATIC").forEach(_=>{const w=_.category||"Other";b[w]||(b[w]=[]),b[w].push(_)}),b},[e]),[p,h]=f.useState(()=>{const b={"Quick filters":!0};return d.some(w=>n?.includes(w.originalIndex))&&(b["Quick filters"]=!0),Object.entries(m).forEach(([w,C])=>{const S=C.some(E=>n?.includes(E.originalIndex));b[w]=S}),b}),g=f.useCallback(b=>{h(_=>({..._,[b]:!_[b]}))},[]),y=f.useCallback(()=>{s(!1)},[s]),v=f.useCallback(()=>g("Quick filters"),[g]);return f.useMemo(()=>d.length>0||Object.keys(m).length>0,[d,m])?i.jsx(Xt,{modalContentClassname:"!py-0 mb-0 min-h-0 px-0",modalClassname:U("[&_>div]:min-h-0",!c&&"!w-[300px] !min-w-[300px]"),isOpen:r,onClose:y,variant:c?"bottom-sheet":"side-sheet",includeBlur:!1,removeScroll:!1,transparent:!0,renderCloseButton:!1,headerClassname:"hidden",children:i.jsxs("div",{className:"-mx-md flex min-h-0 flex-1 flex-col",children:[i.jsxs(z,{className:"p-md flex items-center justify-between border-b",children:[i.jsx(L,{variant:"smallBold",children:u({defaultMessage:"Filters",id:"zSOvI0LO0n"})}),i.jsx("button",{onClick:y,className:"text-quiet hover:text-foreground cursor-pointer",children:i.jsx(me,{icon:Lt,size:"md"})})]}),i.jsxs("div",{className:"scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:[d.length>0&&i.jsx(oR,{title:"Recommended",filters:d,selectedIndices:n,onFilterClick:t,isOpen:p["Quick filters"]??!0,onToggle:v}),Object.entries(m).map(([b,_])=>i.jsx(oR,{title:b,filters:_,selectedIndices:n,onFilterClick:t,isOpen:p[b]??!1,onToggle:()=>g(b),useCheckboxes:!0},b))]}),i.jsxs("div",{className:"gap-md p-md flex pb-0",children:[i.jsx(ge,{text:u({defaultMessage:"Reset",id:"jm/spnRSn+"}),size:"regular",variant:"common",onClick:a,extraCSS:"flex-1"}),i.jsx(ge,{text:u({defaultMessage:"Apply",id:"EWw/tKINJT"}),size:"regular",variant:"primary",onClick:o,extraCSS:"flex-1",disabled:l,isLoading:l})]})]})}):null});DEe.displayName="RefinementSidePanel";const ajt=async({request:e,reason:t})=>(await ne.POST("/rest/sources/search",t,{body:{entry_uuid:e.entry_uuid,limit:e.limit,page:e.page??null},timeoutMs:Kt.MEDIUM})).data,ojt=({reason:e})=>{const{mutate:t,data:n,isPending:r}=bt({mutationFn:async s=>(await ajt({request:s,reason:e})).results});return f.useMemo(()=>({isSearchResultsLoading:r,searchResults:n,fetchSearch:t}),[t,r,n])},ijt=()=>{const{openModal:e}=vt(),{trackEvent:t}=Me();return f.useCallback(r=>{if(mE(r))return;const s=Fde(r);e("memorySearchHistoryModal",s);const a=s.type,o=s.memoryKey,l=s.entryUuid;t("viewed memory search history modal",{type:a,...a==="memory"&&{memory_key:o},...a==="conversation_history"&&{entry_uuid:l}})},[e,t])};function FEe(){const{value:e}=At({flag:"move-citations-to-paragraph-end",subjectType:"visitor_id",defaultValue:!0});return e}typeof globalThis<"u"&&(globalThis.__useMoveCitationsToParagraphEnd=FEe);const gU=A.memo(({webResult:e,citationIndex:t,isRelatedResult:n})=>{const r="sources-row",{$t:s,formatDate:a}=Q(),o=f.useMemo(()=>Zs(e.url),[e.url]),l=f.useMemo(()=>w1(e.url),[e.url]),c=e.is_client_context,{result:{backend_uuid:u,context_uuid:d,frontend_context_uuid:m}}=bn(),p=wr(),h=rn(),g=f.useMemo(()=>e.meta_data?.domain_name??o.replace(/\.[^.]*$/,""),[o,e.meta_data?.domain_name]),y=Ja(e.url),v=Bue(e),x=e.meta_data?.connection_type,{trackEvent:b}=Me(),_=f.useCallback((X,Y)=>{h&&p.openTab({url:X,tabId:Y})},[h,p]),{mutate:w}=lue({reason:r,onSuccess:h?_:void 0}),C=FEe(),S=ijt(),E=e.meta_data?.repo_type,M=!c||h,k=xO(e),T=kQe(e),j=mE(e),{getImageDownloadUrl:R}=sD({reason:r}),[O,P]=f.useState(null);f.useEffect(()=>{O===null&&(async()=>{if(!y){P(e.url);return}if(iO(e.url)){P(e.url);return}try{const Y=await R({url:e.url,thread_id:u});P(Y)}catch(Y){ee.error(`Failed to fetch image source ${Y}`),P(e.url)}})()},[R,u,e,y,O]),f.useEffect(()=>{b("source card viewed",{citation_url:e.url,position:t,title:e.name,contextUUID:d,frontendContextUUID:m,entryUUID:u,source:n?"sourcesTabViewMore":"sourcesTab"})},[e,b,t,n,d,m,u]);const N=f.useCallback(X=>{try{const W=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":n?"sourcesTabViewMore":"sourcesTab",H=Fde(e),{type:Z,memoryKey:re}=H;b("click citation",{citation_url:e.url,contextUUID:d,frontendContextUUID:m,entryUUID:u,isMemory:e.is_memory,isConversationHistory:e.is_conversation_history,source:W,...Z==="memory"&&{memory_key:re}})}catch(W){ee.error("Failed to send click citation event:",W)}if(k&&!j){X.preventDefault(),S(e);return}if(Vh(e)){X.preventDefault(),w({file_url:e.url});return}if(Jqe(X)){X.preventDefault(),p.openTab({url:e.url,tabId:e.tab_id});return}},[k,e,n,b,d,m,u,S,p,w,j]),I=()=>E=="COLLECTION"?s({defaultMessage:"Space Context",id:"wGTk8CFt1g"}):E=="USER"?s({defaultMessage:"My Files",id:"AjhJXSvkRs"}):E=="ORG"?s({defaultMessage:"Org Files",id:"DaFSYzpM1Q"}):s({defaultMessage:"Attachment",id:"eLCAEP8LHj"}),D=()=>e.meta_data?.repo_type=="COLLECTION"?s({defaultMessage:"File",id:"gyrIElu9qY"}):e.meta_data?.connection_type?i$e(e.meta_data.connection_type):s({defaultMessage:"Local upload",id:"fscjAJoLwa"}),F=f.useMemo(()=>i.jsx(Rt,{size:"tiny",showBackground:!1,rounded:!1,user:Ha(x)??void 0}),[x]);let B=null,V="",$=null;if(y||v||x&&x!==Tt.WILEY)B=i.jsx("div",{className:"bg-subtler size-lg flex items-center justify-center rounded-full",children:x?i.jsx(me,{icon:Ate,size:"base",badge:F}):i.jsx(me,{icon:Sf,className:"size-md"})}),$=i.jsx(L,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:D()}),V=I();else if(k&&!j)B=i.jsx("div",{className:"bg-offsetPlus size-lg flex items-center justify-center rounded-full",children:i.jsx(me,{size:"base",icon:e.is_memory?Xi:Tf})}),$=i.jsx(L,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:e.timestamp&&a(e.timestamp,{dateStyle:"long"})}),V=e?.is_memory?s({defaultMessage:"Memory",id:"dVx3yznM2C"}):s({defaultMessage:"Library",id:"StcK672jB9"});else{const X=x===Tt.WILEY?u1:void 0;B=i.jsx(fl,{size:32,domain:l,className:"size-full rounded-full",overrideIconUrl:X}),V=g,$=j?i.jsxs("div",{className:"gap-xs -ml-two flex flex-row items-center",children:[i.jsx(L,{variant:"tiny",color:"super",className:"-translate-y-px",children:i.jsx(me,{size:"xs",icon:ww})}),i.jsx(L,{variant:"tinyRegular",color:"super",className:"line-clamp-1",children:i.jsx(pe,{defaultMessage:"Personal Search",id:"TZougEncQH",description:"subtitle"})})]}):i.jsx(L,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:SYe(Wue(e.url))})}const G=f.useMemo(()=>{if(y)return O;if(typeof e.meta_data?.image_url=="string")return e.meta_data.image_url;if(typeof e.meta_data?.images?.[0]=="string")return e.meta_data.images[0];if(typeof e.meta_data?.images?.[0]?.src=="string")return e.meta_data.images[0].src},[y,e,O]);return i.jsx("div",{className:"gap-md relative items-start",children:i.jsxs("div",{className:"gap-lg relative flex w-full flex-row items-center lg:pl-0",children:[i.jsxs("div",{className:"grow",children:[i.jsxs(Ye,{href:e.url,className:U("gap-sm group/source flex flex-1 flex-col",{"cursor-pointer":!y&&M}),onClick:N,children:[i.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[i.jsx("div",{className:"size-lg shrink-0",children:B}),i.jsxs("div",{className:"flex flex-1 flex-col",children:[i.jsx("div",{className:"gap-sm flex flex-row items-center",children:i.jsxs(L,{variant:"smallBold",className:"line-clamp-1",children:[!n&&t&&!C?t+". ":null,V]})}),$]}),k&&i.jsx(L,{variant:"tiny",color:"light",children:i.jsx(me,{size:"xs",icon:ww})})]}),T?null:i.jsx(L,{variant:"baseSemi",color:"default",className:U("line-clamp-1 transition-colors duration-300",{"group-hover/source:text-super":!y&&M}),children:e.name})]}),i.jsx(L,{variant:"small",color:"light",className:U("line-clamp-3 whitespace-pre-wrap",{"pt-2":T}),children:e.meta_data?.generated_file_description??e.meta_data?.description??e.snippet})]}),G&&i.jsxs(Ye,{href:e.url,className:"relative ml-auto hidden aspect-square h-fit w-20 shrink-0 cursor-pointer overflow-hidden rounded-md sm:block",onClick:N,children:[i.jsx(is,{src:G,alt:"image",containerClassName:"absolute inset-0",imageClassName:"absolute inset-0 object-cover object-center w-full h-full",includeLightBoxModal:!1}),i.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})]})})});gU.displayName="SourcesRow";var Ree={};const ljt=10,Iee=rn(),UEe=A.memo(()=>{const e="sources-mode",{$t:t}=Q(),{sources:n}=Ix(),r=BEe({dedupeAttachments:!0}),{isEntryInFlight:s,result:a}=bn(),{fetchSearch:o,isSearchResultsLoading:l}=ojt({reason:e}),[c,u]=f.useState(1),[d,m]=f.useState([]),p=Rc(),h=Qe(),{openModal:g}=vt(),y=f.useCallback(()=>{const b=c+1;o({entry_uuid:a.backend_uuid??"",limit:ljt,page:b},{onSuccess:_=>{m([...d,..._]),u(b)}})},[c,o,d,a.backend_uuid]),v=f.useCallback(()=>{if(!h){g("loginModal",{origin:Ie.SOURCES_VIEW_MORE});return}y()},[y,h,g]);f.useEffect(()=>{n.count<10&&!l&&!s&&!p&&!Iee&&!Ree.NEXT_PUBLIC_IS_SIDECAR_BUILD&&y()},[s]);const x=!Iee&&!Ree.NEXT_PUBLIC_IS_SIDECAR_BUILD;return i.jsxs("div",{children:[i.jsx(_m,{heading:r.selectedSources?.length>0?t({defaultMessage:"Attached",id:"2IacYt8NB7"}):void 0,sources:r.attachedSources}),i.jsx(_m,{heading:r.attachedSources?.length>0?t({defaultMessage:"Sourced",id:"P5KqlvUgRC"}):void 0,sources:r.selectedSources}),i.jsx(_m,{heading:t({defaultMessage:"Reviewed",id:"wiy+GNv+BV"}),sources:r.reviewedSources}),i.jsx(_m,{heading:t({defaultMessage:"Reviewing",id:"L+ISAVX7+d"}),sources:r.reviewingSources,shimmer:!0}),i.jsx(_m,{sources:r.unsortedSources}),x&&i.jsxs(it,{mode:"wait",children:[c===1&&i.jsx(xe.div,{animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:ao,className:"mt-md flex w-full items-center justify-center",children:i.jsx(ge,{variant:"common",isLoading:l||s,size:"small",text:t({defaultMessage:"View More",id:"QQSdHPJWXu"}),onClick:v,pill:!0})},"masher"),d.length>0?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"my-md md:mt-lg relative md:ml-0",children:[i.jsx("hr",{className:"bg-offsetPlus absolute top-1/2 h-px w-full border-0"}),i.jsx(L,{variant:"tiny",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:t({defaultMessage:"More Results",id:"7S7CM3eEfJ"})})]}),i.jsx(z,{className:"gap-lg py-sm flex flex-col",children:d.map((b,_)=>i.jsx(gU,{webResult:b,citationIndex:_,isRelatedResult:!0},b.url))})]}):null]})]})});UEe.displayName="SourcesMode";const _m=A.memo(({sources:e,heading:t,shimmer:n=!1})=>e.length===0?null:i.jsxs("div",{className:"my-md md:mt-lg group first:mt-0",children:[t?i.jsxs("div",{className:"mb-md relative",children:[i.jsx("hr",{className:"bg-offsetPlus absolute top-1/2 h-px w-full border-0 group-first:hidden"}),i.jsx("div",{className:"bg-base",children:i.jsx(L,{variant:"tiny",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:i.jsx(wn,{variant:"super",active:n,as:"span",children:t})})})]}):null,i.jsx(z,{className:"gap-lg flex flex-col",children:e.map(r=>i.jsx(gU,{webResult:r.web_result,citationIndex:r.citation},r.web_result?.url))})]}));_m.displayName="SourcesModeSection";const BEe=({dedupeAttachments:e=!1})=>{const{result:t,blocksByIntendedUsage:{sources_answer_mode:n}}=bn(),r=cjt({attachments:t.attachments??le});return f.useMemo(()=>{const s=new Map,a=[];for(const m of n?.sources_mode_block?.rows??[]){const p=m.web_result?.is_attachment&&!Vue(m.web_result);if(p&&a.push(m),!p||!e){const h=s.get(m.status)??[];h.push(m),s.set(m.status,h)}}const o=s.get(Jx.SELECTED)??le,l=s.get(Jx.REVIEWED)??le,c=s.get(Jx.REVIEWING)??le,u=s.get(Jx.UNSORTED)??le;a.length===0&&r.length>0&&a.push(...r);const d=[...o,...l,...c,...u].slice(0,3)?.map(m=>m.web_result?.url??"");return{attachedSources:a,selectedSources:o,reviewedSources:l,reviewingSources:c,unsortedSources:u,topSources:d}},[e,r,n?.sources_mode_block?.rows])},cjt=({attachments:e})=>e.map(t=>({web_result:{name:oO(t),url:t,is_attachment:!0,is_image:Ja(t),is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!1,sitelinks:[],snippet:"",timestamp:"",meta_data:{},inline_entity_id:""},status:"UNKNOWN",citation:0})),VEe=f.memo(({count:e,className:t})=>i.jsx(z,{className:U("flex select-none items-center pt-px text-center font-mono text-xs tabular-nums leading-none",t),as:"span",children:i.jsx(ii,{value:e})}));VEe.displayName="AnimatedCounter";const WEe=f.memo(({...e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:1152,height:24,viewBox:"0 0 1152 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.75,...e,children:[i.jsx("path",{strokeOpacity:.2,d:"M9.056 19.122c-1.794.845-3.353 1.105-4.315.598-2.092-1.105-.533-5.471 3.47-9.734.39-.416.793-.82 1.196-1.21m5.563-3.911c1.781-.845 3.34-1.105 4.289-.598 2.092 1.105.533 5.47-3.47 9.734-.386.411-.784.81-1.196 1.196m4.536-.247c.845 1.794 1.105 3.353.598 4.315-1.105 2.092-5.471.533-9.734-3.47-.416-.39-.819-.793-1.209-1.196M4.871 9.024c-.845-1.781-1.105-3.34-.598-4.29 1.105-2.091 5.471-.532 9.734 3.47.412.386.81.785 1.196 1.197"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M13.306 12a1.3 1.3 0 1 0-2.6 0 1.3 1.3 0 0 0 2.6 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M33.057 19.12c-1.793.846-3.352 1.106-4.314.599-2.092-1.105-.533-5.471 3.469-9.733.388-.412.787-.815 1.195-1.208m5.562-3.912c1.78-.845 3.339-1.104 4.288-.598 2.092 1.104.533 5.47-3.469 9.733-.385.411-.784.81-1.195 1.195m4.534-.246c.845 1.793 1.105 3.352.598 4.314-1.104 2.092-5.47.533-9.733-3.47a35.174 35.174 0 0 1-1.208-1.194m-3.911-5.576c-.845-1.78-1.105-3.34-.598-4.288 1.104-2.092 5.471-.533 9.733 3.469.416.39.819.793 1.195 1.195"}),i.jsx("path",{strokeLinejoin:"round",d:"M28.873 9.024c-.404-.852-.674-1.653-.791-2.361"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M37.31 12a1.303 1.303 0 1 0-2.605-.001 1.303 1.303 0 0 0 2.605 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M57.058 19.117c-1.792.844-3.351 1.104-4.312.597-2.091-1.104-.532-5.468 3.468-9.727.389-.412.787-.815 1.195-1.208m5.559-3.909c1.779-.844 3.338-1.104 4.286-.597 2.091 1.104.532 5.468-3.468 9.727-.39.416-.792.818-1.195 1.195m4.532-.247c.844 1.792 1.104 3.351.597 4.312-1.104 2.091-5.468.532-9.727-3.468a34.994 34.994 0 0 1-1.208-1.195m-3.908-5.57c-.844-1.78-1.104-3.339-.597-4.287 1.104-2.09 5.468-.532 9.727 3.468.416.39.818.792 1.195 1.195"}),i.jsx("path",{strokeLinejoin:"round",d:"M52.877 9.026c-.844-1.779-1.104-3.338-.597-4.286.084-.16.188-.298.308-.416"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M61.32 12a1.313 1.313 0 1 0-2.626 0 1.313 1.313 0 0 0 2.626 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M81.061 19.111c-1.791.843-3.348 1.103-4.308.597-2.089-1.103-.532-5.463 3.465-9.719.388-.412.786-.814 1.194-1.207m5.553-3.906c1.778-.843 3.335-1.103 4.282-.597 2.089 1.103.532 5.463-3.465 9.72-.389.414-.791.817-1.194 1.193m4.529-.246c.843 1.791 1.103 3.348.597 4.308-1.103 2.09-5.463.532-9.719-3.465a35.026 35.026 0 0 1-1.207-1.194M76.883 9.03c-.843-1.778-1.103-3.335-.597-4.282 1.103-2.089 5.463-.532 9.719 3.465.41.385.81.783 1.194 1.194"}),i.jsx("path",{strokeLinejoin:"round",d:"M76.883 9.029c-.843-1.778-1.103-3.335-.597-4.282.44-.833 1.398-1.086 2.661-.836"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M85.337 12a1.33 1.33 0 1 0-2.661 0 1.33 1.33 0 0 0 2.661 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M105.064 19.102c-1.789.842-3.344 1.102-4.303.596-2.087-1.102-.531-5.456 3.46-9.707.387-.411.785-.813 1.192-1.205m5.548-3.901c1.776-.842 3.331-1.102 4.277-.596 2.087 1.102.531 5.456-3.461 9.707-.389.415-.791.817-1.192 1.192m4.524-.246c.842 1.789 1.102 3.344.596 4.303-1.102 2.087-5.456.531-9.707-3.461a34.803 34.803 0 0 1-1.205-1.192m-3.902-5.56c-.842-1.776-1.102-3.331-.596-4.277 1.102-2.087 5.456-.531 9.707 3.46.41.384.808.782 1.192 1.192"}),i.jsx("path",{strokeLinejoin:"round",d:"M100.891 9.032c-.842-1.776-1.102-3.331-.596-4.277.684-1.296 2.624-1.187 5.014.038"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M109.36 12a1.354 1.354 0 1 0-2.707 0 1.354 1.354 0 0 0 2.707 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M129.069 19.092c-1.786.841-3.339 1.1-4.296.595-2.083-1.1-.531-5.448 3.455-9.693.388-.414.789-.815 1.191-1.204m5.538-3.895c1.773-.841 3.326-1.1 4.271-.595 2.083 1.1.531 5.448-3.455 9.693-.388.414-.789.815-1.191 1.191m4.516-.246c.841 1.786 1.1 3.339.595 4.296-1.1 2.083-5.448.531-9.693-3.455a34.726 34.726 0 0 1-1.204-1.191m-3.894-5.551c-.841-1.773-1.1-3.326-.595-4.271 1.1-2.084 5.448-.531 9.693 3.455.41.384.807.781 1.191 1.191"}),i.jsx("path",{strokeLinejoin:"round",d:"M124.902 9.037c-.841-1.773-1.1-3.326-.595-4.271.871-1.651 3.781-1.02 7.063 1.296"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M133.389 12a1.383 1.383 0 1 0-2.766 0 1.383 1.383 0 0 0 2.766 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M153.074 19.079c-1.783.84-3.333 1.098-4.289.594-2.08-1.098-.53-5.438 3.449-9.676.388-.413.788-.814 1.188-1.201m5.53-3.888c1.77-.84 3.32-1.098 4.263-.594 2.08 1.098.53 5.438-3.449 9.676-.383.409-.779.805-1.188 1.188m4.508-.246c.84 1.783 1.098 3.333.594 4.289-1.098 2.08-5.438.53-9.676-3.45a35.478 35.478 0 0 1-1.201-1.187m-3.888-5.542c-.84-1.77-1.098-3.32-.594-4.263 1.098-2.08 5.438-.53 9.676 3.449.413.388.814.788 1.188 1.188"}),i.jsx("path",{strokeLinejoin:"round",d:"M148.915 9.042c-.84-1.77-1.098-3.32-.594-4.263 1.043-1.976 5.013-.675 9.04 2.87"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M157.424 12a1.42 1.42 0 0 0-2.419-1.001 1.42 1.42 0 0 0-.416 1.001 1.42 1.42 0 0 0 2.419 1.002 1.42 1.42 0 0 0 .416-1.002Z"}),i.jsx("path",{strokeOpacity:.2,d:"M177.08 19.065c-1.779.838-3.326 1.096-4.28.593-2.076-1.096-.529-5.427 3.442-9.656.387-.413.786-.812 1.186-1.199m5.518-3.88c1.766-.839 3.313-1.097 4.254-.594 2.076 1.096.529 5.427-3.442 9.656-.382.408-.778.804-1.186 1.186m4.499-.245c.838 1.78 1.096 3.326.593 4.28-1.096 2.076-5.427.53-9.656-3.442a35.011 35.011 0 0 1-1.199-1.186"}),i.jsx("path",{strokeOpacity:.2,d:"M172.929 9.048c-.838-1.766-1.096-3.313-.593-4.254 1.096-2.076 5.427-.529 9.656 3.442.408.382.804.778 1.186 1.186"}),i.jsx("path",{strokeLinejoin:"round",d:"M172.929 9.048c-.838-1.766-1.096-3.313-.593-4.254 1.096-2.076 5.427-.529 9.656 3.442.408.382.804.778 1.186 1.186"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M181.463 12a1.457 1.457 0 1 0-2.913 0 1.457 1.457 0 0 0 2.913 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M201.087 19.049c-1.775.836-3.319 1.093-4.27.592-2.071-1.093-.527-5.415 3.434-9.634.385-.408.779-.807 1.183-1.196m5.505-3.873c1.762-.836 3.306-1.093 4.245-.592 2.071 1.093.527 5.415-3.434 9.634-.381.407-.776.802-1.183 1.183m4.488-.243c.836 1.775 1.093 3.319.592 4.27-1.093 2.071-5.415.527-9.634-3.434-.408-.385-.807-.78-1.196-1.183"}),i.jsx("path",{d:"M211.055 14.92c.615 1.305.916 2.484.834 3.396"}),i.jsx("path",{strokeOpacity:.2,d:"M196.945 9.054c-.836-1.762-1.093-3.306-.592-4.245 1.093-2.071 5.415-.527 9.634 3.434.412.386.81.785 1.183 1.183"}),i.jsx("path",{strokeLinejoin:"round",d:"M197.355 3.996c1.797-.552 5.248 1.07 8.632 4.248l1.183 1.183"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M205.507 12a1.507 1.507 0 0 0-.439-1.06 1.51 1.51 0 0 0-1.061-.44 1.5 1.5 0 1 0 1.5 1.5Z"}),i.jsx("path",{strokeOpacity:.2,d:"M225.094 19.032c-1.771.834-3.311 1.091-4.26.59-2.066-1.09-.526-5.402 3.426-9.61.385-.412.783-.809 1.18-1.194m5.492-3.863c1.758-.834 3.298-1.09 4.234-.59 2.066 1.091.526 5.402-3.426 9.611-.381.406-.774.8-1.18 1.181m4.478-.244c.834 1.771 1.091 3.31.59 4.26-1.091 2.066-5.402.526-9.611-3.426a34.75 34.75 0 0 1-1.193-1.18"}),i.jsx("path",{d:"M235.038 14.913c.834 1.771 1.091 3.31.59 4.26-.385.73-1.173 1.01-2.216.892"}),i.jsx("path",{strokeOpacity:.2,d:"M220.962 9.062c-.834-1.758-1.091-3.298-.59-4.234 1.091-2.066 5.402-.526 9.611 3.426.406.38.8.774 1.181 1.18"}),i.jsx("path",{strokeLinejoin:"round",d:"M226.732 5.678a23.344 23.344 0 0 1 3.25 2.576l1.181 1.18"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M229.554 12a1.547 1.547 0 1 0-3.095.001 1.547 1.547 0 0 0 3.095 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M249.101 19.013c-1.766.832-3.302 1.088-4.249.59-2.061-1.089-.525-5.389 3.417-9.587.384-.41.781-.806 1.177-1.19"}),i.jsx("path",{d:"m247.027 11.438 1.242-1.422 1.177-1.19"}),i.jsx("path",{strokeOpacity:.2,d:"M254.925 4.973c1.753-.832 3.289-1.088 4.224-.589 2.061 1.088.525 5.388-3.417 9.586-.379.405-.772.798-1.177 1.177m4.465-.242c.832 1.766 1.088 3.302.589 4.25-1.088 2.06-5.388.524-9.586-3.418a34.575 34.575 0 0 1-1.19-1.177"}),i.jsx("path",{d:"M259.02 14.905c.832 1.766 1.088 3.302.589 4.25-.724 1.37-2.869 1.15-5.46-.313"}),i.jsx("path",{strokeOpacity:.2,d:"M244.98 9.07c-.832-1.754-1.088-3.29-.589-4.225 1.088-2.06 5.388-.525 9.586 3.417.41.384.806.781 1.177 1.177"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M253.603 12a1.596 1.596 0 1 0-3.192 0 1.596 1.596 0 0 0 3.192 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M273.109 18.995c-1.762.83-3.293 1.085-4.238.587-2.055-1.085-.523-5.374 3.408-9.561.383-.408.779-.804 1.174-1.187"}),i.jsx("path",{d:"M269.182 14.137c.734-1.301 1.781-2.714 3.097-4.115l1.174-1.187"}),i.jsx("path",{strokeOpacity:.2,d:"M278.917 4.992c1.749-.83 3.28-1.085 4.212-.587 2.055 1.085.523 5.374-3.408 9.56-.383.409-.779.805-1.174 1.175m4.454-.242c.83 1.762 1.085 3.293.587 4.238-1.085 2.055-5.374.523-9.561-3.408a34.4 34.4 0 0 1-1.187-1.174"}),i.jsx("path",{d:"M283.001 14.898c.83 1.762 1.085 3.293.587 4.238-.962 1.823-4.446.824-8.143-2.17"}),i.jsx("path",{strokeOpacity:.2,d:"M268.999 9.077c-.83-1.75-1.085-3.281-.587-4.212 1.085-2.055 5.374-.523 9.561 3.408.404.378.795.77 1.174 1.174"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M277.654 12a1.654 1.654 0 0 0-1.647-1.647A1.65 1.65 0 0 0 274.359 12a1.654 1.654 0 0 0 1.647 1.647A1.649 1.649 0 0 0 277.654 12Z"}),i.jsx("path",{strokeOpacity:.2,d:"M297.117 18.976c-1.757.828-3.284 1.082-4.226.586-2.05-1.082-.522-5.359 3.399-9.535.38-.404.771-.799 1.17-1.184"}),i.jsx("path",{d:"M292.005 17.363c.214-1.894 1.749-4.636 4.284-7.336l1.171-1.184"}),i.jsx("path",{strokeOpacity:.2,d:"M302.909 5.01c1.744-.826 3.272-1.081 4.201-.585 2.05 1.082.522 5.359-3.399 9.535-.382.407-.776.802-1.171 1.17"}),i.jsx("path",{strokeOpacity:.2,d:"M306.982 14.89c.828 1.757 1.082 3.284.586 4.226-1.082 2.05-5.359.522-9.535-3.4a35.405 35.405 0 0 1-1.184-1.17"}),i.jsx("path",{d:"M306.982 14.89c.828 1.757 1.082 3.284.586 4.226-1.082 2.05-5.359.522-9.535-3.4a35.405 35.405 0 0 1-1.184-1.17"}),i.jsx("path",{strokeOpacity:.2,d:"M293.017 9.085c-.827-1.744-1.082-3.272-.586-4.2 1.082-2.05 5.359-.523 9.535 3.398.403.378.794.768 1.171 1.171"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M301.705 12a1.697 1.697 0 1 0-3.395 0 1.697 1.697 0 0 0 3.395 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M321.124 18.957c-1.752.825-3.276 1.08-4.215.584-2.044-1.079-.521-5.345 3.39-9.509.381-.406.774-.8 1.168-1.18"}),i.jsx("path",{d:"M317.773 19.781a2.28 2.28 0 0 1-.863-.239c-2.044-1.079-.521-5.345 3.39-9.509.381-.406.774-.8 1.168-1.18"}),i.jsx("path",{strokeOpacity:.2,d:"M326.901 5.03c1.739-.825 3.263-1.079 4.19-.584 2.044 1.079.52 5.345-3.39 9.509-.381.406-.774.8-1.168 1.168m4.431-.241c.825 1.752 1.079 3.276.584 4.215-1.079 2.044-5.345.52-9.509-3.39-.403-.38-.797-.77-1.181-1.168"}),i.jsx("path",{d:"M330.572 19.896c-1.77.557-5.185-1.044-8.534-4.189l-1.181-1.168"}),i.jsx("path",{strokeOpacity:.2,d:"M317.036 9.093c-.825-1.739-1.079-3.263-.584-4.19 1.079-2.044 5.345-.521 9.509 3.39.402.377.791.766 1.168 1.168"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M325.757 12a1.747 1.747 0 0 0-1.75-1.75 1.749 1.749 0 1 0 1.75 1.75Z"}),i.jsx("path",{strokeOpacity:.2,d:"M345.132 18.94c-1.747.822-3.267 1.075-4.204.582-2.039-1.076-.519-5.33 3.381-9.484a34.14 34.14 0 0 1 1.165-1.178"}),i.jsx("path",{d:"M345.132 18.94c-1.747.822-3.267 1.075-4.204.582-2.039-1.076-.519-5.33 3.381-9.484a34.14 34.14 0 0 1 1.165-1.178"}),i.jsx("path",{strokeOpacity:.2,d:"M350.894 5.048c1.735-.823 3.254-1.076 4.179-.582 2.039 1.076.519 5.331-3.381 9.484-.376.401-.764.79-1.165 1.165m4.419-.24c.823 1.746 1.076 3.266.582 4.203-1.076 2.04-5.331.52-9.484-3.38-.405-.38-.798-.773-1.178-1.166"}),i.jsx("path",{d:"M349.253 18.24a23.063 23.063 0 0 1-3.209-2.543l-1.178-1.165"}),i.jsx("path",{strokeOpacity:.2,d:"M341.054 9.1c-.823-1.735-1.076-3.254-.582-4.179 1.076-2.039 5.331-.519 9.484 3.381.405.38.798.772 1.165 1.165"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M349.807 12a1.802 1.802 0 0 0-1.8-1.8 1.802 1.802 0 0 0-1.273 3.073A1.802 1.802 0 0 0 349.807 12Z"}),i.jsx("path",{strokeOpacity:.2,d:"M369.139 18.922c-1.743.821-3.259 1.074-4.193.581-2.034-1.074-.518-5.318 3.372-9.46.378-.402.765-.794 1.162-1.176"}),i.jsx("path",{d:"M369.139 18.922c-1.743.821-3.259 1.074-4.193.581-1.504-.794-1.067-3.32.836-6.259"}),i.jsx("path",{strokeOpacity:.2,d:"M374.886 5.065c1.73-.82 3.246-1.074 4.168-.58 2.034 1.073.518 5.317-3.373 9.46-.379.403-.77.795-1.162 1.161"}),i.jsx("path",{d:"m376.909 12.54-1.227 1.405-1.162 1.162"}),i.jsx("path",{strokeOpacity:.2,d:"M378.928 14.867c.821 1.743 1.074 3.259.581 4.193-1.074 2.034-5.318.518-9.46-3.373a34.866 34.866 0 0 1-1.175-1.162m-3.802-5.417c-.821-1.73-1.074-3.246-.581-4.168 1.074-2.034 5.318-.518 9.46 3.372.4.375.787.762 1.162 1.162"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M373.854 12a1.849 1.849 0 0 0-1.848-1.848A1.847 1.847 0 1 0 373.854 12Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M393.146 18.905c-1.739.819-3.251 1.071-4.184.58-2.029-1.071-.517-5.305 3.364-9.438.377-.4.763-.79 1.159-1.172"}),i.jsx("path",{strokeWidth:1.697,d:"M393.146 18.905c-1.739.82-3.251 1.071-4.184.58a1.594 1.594 0 0 1-.793-.969"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M398.879 5.082c1.726-.819 3.238-1.07 4.158-.58 2.029 1.071.517 5.305-3.365 9.438-.378.403-.769.794-1.159 1.16"}),i.jsx("path",{strokeWidth:1.697,d:"M402.728 9.883c-.724 1.283-1.757 2.676-3.055 4.058l-1.159 1.159"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M402.912 14.86c.819 1.739 1.071 3.25.58 4.184-1.071 2.029-5.305.517-9.438-3.365a34.687 34.687 0 0 1-1.172-1.16m-3.794-5.405c-.819-1.726-1.071-3.238-.58-4.158 1.071-2.03 5.305-.517 9.438 3.364.399.374.785.76 1.159 1.159"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M397.899 12a1.893 1.893 0 1 0-3.786 0 1.893 1.893 0 0 0 3.786 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.693,d:"M417.152 18.89c-1.735.817-3.244 1.069-4.174.578-2.024-1.07-.516-5.293 3.357-9.417l1.157-1.17m5.381-3.784c1.723-.817 3.231-1.07 4.149-.578 2.024 1.069.515 5.293-3.357 9.417l-1.157 1.157"}),i.jsx("path",{strokeWidth:1.693,d:"M427.895 6.699c-.215 1.87-1.73 4.574-4.23 7.237l-1.157 1.157"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.693,d:"M426.897 14.854c.817 1.735 1.069 3.244.578 4.174-1.069 2.024-5.293.515-9.417-3.357l-1.169-1.157m-3.785-5.393c-.817-1.723-1.069-3.231-.578-4.15 1.069-2.023 5.293-.515 9.417 3.358l1.157 1.157"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M421.941 12a1.934 1.934 0 1 0-3.868 0 1.934 1.934 0 0 0 3.868 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.69,d:"M441.158 18.876c-1.732.816-3.238 1.067-4.166.577-2.02-1.067-.514-5.283 3.351-9.399l1.154-1.167m5.37-3.776c1.719-.816 3.225-1.067 4.141-.577 2.02 1.067.514 5.283-3.351 9.399l-1.154 1.154"}),i.jsx("path",{strokeWidth:1.69,d:"M450.174 4.298a2.2 2.2 0 0 1 .834.235c2.02 1.067.514 5.283-3.351 9.399l-1.154 1.154"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.69,d:"M450.883 14.849c.816 1.732 1.067 3.237.577 4.166-1.067 2.02-5.283.514-9.399-3.351l-1.167-1.154m-3.777-5.384c-.816-1.72-1.067-3.225-.577-4.141 1.067-2.02 5.283-.514 9.399 3.35l1.154 1.155"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M445.978 12a1.973 1.973 0 0 0-1.971-1.971 1.972 1.972 0 1 0 1.971 1.97Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M465.163 18.865c-1.729.814-3.232 1.065-4.159.576-2.017-1.065-.514-5.274 3.345-9.383l1.153-1.165M470.863 5.122c1.716-.814 3.219-1.065 4.134-.576 2.017 1.065.514 5.274-3.345 9.383l-1.152 1.153"}),i.jsx("path",{strokeWidth:1.687,d:"M470.863 5.122c1.716-.814 3.219-1.065 4.134-.576 2.017 1.065.514 5.274-3.345 9.383l-1.152 1.153"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M474.871 14.844c.814 1.729 1.065 3.232.576 4.159-1.065 2.017-5.274.514-9.383-3.345l-1.164-1.153m-3.771-5.374c-.814-1.716-1.065-3.22-.576-4.134 1.065-2.017 5.274-.514 9.383 3.345l1.153 1.152"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M470.01 12a2.003 2.003 0 1 0-4.007 0 2.003 2.003 0 0 0 4.007 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.684,d:"M489.167 18.855c-1.726.813-3.227 1.063-4.153.575-2.014-1.063-.513-5.266 3.34-9.37l1.151-1.162m5.353-3.766c1.714-.813 3.215-1.063 4.128-.575 2.014 1.063.513 5.266-3.34 9.369l-1.151 1.15"}),i.jsx("path",{strokeWidth:1.684,d:"M494.858 5.132c1.714-.813 3.215-1.063 4.128-.575 1.49.786 1.056 3.29-.829 6.2"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.684,d:"M498.861 14.84c.813 1.726 1.063 3.227.575 4.153-1.063 2.014-5.266.513-9.369-3.34l-1.163-1.151m-3.765-5.367c-.813-1.714-1.063-3.215-.575-4.128 1.063-2.014 5.266-.513 9.369 3.34l1.151 1.15"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M494.037 12a2.03 2.03 0 1 0-4.06 0 2.03 2.03 0 0 0 4.06 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.682,d:"M513.17 18.847c-1.724.812-3.224 1.062-4.148.575-2.012-1.062-.512-5.26 3.336-9.359l1.15-1.162m5.347-3.761c1.712-.812 3.211-1.062 4.123-.575 2.012 1.062.512 5.26-3.336 9.359l-1.149 1.15"}),i.jsx("path",{strokeWidth:1.682,d:"M518.855 5.14c1.712-.812 3.211-1.062 4.123-.575.398.21.659.543.791.974"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.682,d:"M522.854 14.836c.812 1.724 1.062 3.224.575 4.148-1.062 2.012-5.26.512-9.359-3.336l-1.162-1.149m-3.762-5.36c-.812-1.712-1.062-3.21-.575-4.123 1.062-2.012 5.26-.512 9.359 3.336l1.15 1.15"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M518.058 12a2.05 2.05 0 1 0-4.1 0 2.05 2.05 0 0 0 4.1 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.681,d:"M537.172 18.841c-1.723.812-3.221 1.061-4.145.574-2.01-1.06-.512-5.256 3.333-9.35l1.149-1.162m5.344-3.757c1.71-.812 3.209-1.06 4.12-.574 2.01 1.061.512 5.256-3.334 9.351l-1.149 1.15m4.358-.239c.812 1.723 1.061 3.221.574 4.145-1.061 2.01-5.256.512-9.351-3.334l-1.161-1.148m-3.758-5.356c-.812-1.71-1.061-3.209-.574-4.12 1.061-2.01 5.256-.512 9.351 3.333l1.149 1.15"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M542.074 12a2.066 2.066 0 1 0-4.135 0 2.066 2.066 0 1 0 4.134 0h.001Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M561.174 18.838c-1.722.811-3.219 1.061-4.143.574-2.009-1.06-.512-5.254 3.332-9.347l1.148-1.16m5.34-3.756c1.71-.81 3.207-1.06 4.118-.574 2.009 1.061.512 5.253-3.332 9.346l-1.148 1.148m4.356-.236c.811 1.722 1.061 3.22.574 4.143-1.061 2.01-5.253.512-9.346-3.332l-1.161-1.148m-3.757-5.354c-.811-1.71-1.061-3.207-.574-4.118 1.061-2.009 5.253-.512 9.346 3.332l1.148 1.148"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M566.083 12a2.075 2.075 0 1 0-4.153 0 2.076 2.076 0 0 0 4.152 0h.001Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M585.174 18.837c-1.722.811-3.219 1.061-4.142.574-2.009-1.06-.512-5.253 3.331-9.345l1.148-1.16m5.34-3.756c1.709-.81 3.206-1.06 4.117-.574 2.009 1.061.511 5.253-3.331 9.345l-1.148 1.148m4.354-.237c.811 1.722 1.061 3.22.574 4.142-1.06 2.01-5.253.511-9.345-3.33l-1.16-1.149m-3.755-5.352c-.811-1.709-1.061-3.206-.574-4.117 1.061-2.009 5.253-.512 9.345 3.331l1.148 1.148"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M590.086 12a2.08 2.08 0 1 0-4.159 0 2.08 2.08 0 0 0 4.159 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M609.174 18.838c-1.722.811-3.22 1.061-4.143.574-2.009-1.06-.512-5.254 3.332-9.347l1.147-1.16m5.341-3.756c1.71-.81 3.207-1.06 4.118-.574 2.009 1.061.512 5.254-3.332 9.347l-1.147 1.148m4.355-.237c.811 1.722 1.061 3.22.574 4.143-1.061 2.01-5.254.512-9.347-3.332l-1.161-1.148m-3.756-5.354c-.811-1.71-1.061-3.207-.574-4.118 1.061-2.009 5.254-.512 9.347 3.332l1.148 1.148"}),i.jsx("path",{strokeLinejoin:"round",strokeWidth:1.68,d:"M605.155 9.142c-.599-1.262-.891-2.408-.808-3.288"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M614.082 12a2.075 2.075 0 1 0-4.153-.001 2.075 2.075 0 0 0 4.154 0h-.001Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.681,d:"M633.172 18.842c-1.723.812-3.221 1.061-4.145.574-2.01-1.06-.512-5.257 3.334-9.352l1.149-1.16m5.343-3.759c1.711-.812 3.209-1.06 4.12-.574 2.01 1.061.512 5.256-3.334 9.352l-1.149 1.15m4.358-.239c.812 1.723 1.061 3.221.574 4.145-1.061 2.01-5.256.512-9.352-3.334l-1.16-1.148m-3.758-5.356c-.812-1.71-1.062-3.209-.575-4.12 1.061-2.01 5.256-.513 9.352 3.333l1.149 1.15"}),i.jsx("path",{strokeLinejoin:"round",strokeWidth:1.681,d:"M629.152 9.141c-.812-1.71-1.062-3.209-.575-4.12.376-.713 1.146-.985 2.165-.868"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M638.072 12a2.066 2.066 0 1 0-4.134 0 2.066 2.066 0 0 0 4.135 0h-.001Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.683,d:"M657.169 18.848c-1.725.812-3.224 1.062-4.149.575-2.012-1.062-.512-5.26 3.337-9.36l1.15-1.163m5.349-3.76c1.712-.813 3.212-1.063 4.124-.576 2.012 1.062.512 5.261-3.337 9.36l-1.15 1.15m4.362-.237c.812 1.725 1.062 3.224.575 4.15-1.062 2.011-5.261.511-9.36-3.338l-1.162-1.15m-3.763-5.36c-.812-1.713-1.062-3.213-.575-4.125 1.062-2.012 5.261-.512 9.36 3.337l1.15 1.15"}),i.jsx("path",{strokeLinejoin:"round",strokeWidth:1.683,d:"M653.145 9.138c-.812-1.712-1.062-3.212-.575-4.124.707-1.339 2.804-1.123 5.336.307"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M662.055 12a2.05 2.05 0 1 0-4.099 0 2.05 2.05 0 0 0 4.099 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.685,d:"M681.166 18.857c-1.727.813-3.228 1.064-4.154.576-2.014-1.064-.513-5.268 3.341-9.372l1.151-1.164m5.355-3.767c1.714-.813 3.216-1.064 4.129-.576 2.014 1.064.513 5.268-3.341 9.372l-1.151 1.15m4.367-.236c.813 1.727 1.064 3.228.576 4.154-1.063 2.014-5.268.513-9.372-3.341l-1.164-1.151m-3.766-5.367c-.813-1.714-1.064-3.216-.576-4.13 1.064-2.014 5.268-.512 9.372 3.342l1.151 1.15"}),i.jsx("path",{strokeLinejoin:"round",strokeWidth:1.685,d:"M677.137 9.135c-.813-1.714-1.064-3.216-.576-4.13.943-1.786 4.357-.807 7.98 2.126"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M686.032 12a2.026 2.026 0 1 0-4.051 0 2.026 2.026 0 0 0 4.051 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M705.162 18.867c-1.729.815-3.233 1.065-4.161.577-2.018-1.065-.514-5.276 3.346-9.386l1.153-1.166m5.364-3.772c1.717-.815 3.221-1.065 4.136-.576 2.018 1.065.514 5.276-3.346 9.386l-1.154 1.153m4.374-.238c.815 1.729 1.065 3.233.576 4.16-1.065 2.019-5.276.515-9.386-3.345l-1.165-1.153"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M701.126 9.13c-.815-1.717-1.065-3.221-.576-4.136 1.065-2.018 5.276-.514 9.386 3.346l1.153 1.153"}),i.jsx("path",{strokeLinejoin:"round",strokeWidth:1.687,d:"M701.126 9.13c-.815-1.717-1.065-3.221-.576-4.136 1.065-2.018 5.276-.514 9.386 3.346l1.153 1.153"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M710.003 12a1.996 1.996 0 1 0-3.99 0 1.996 1.996 0 0 0 3.989 0h.001Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.691,d:"M729.156 18.88c-1.733.816-3.239 1.067-4.168.578-2.021-1.067-.515-5.286 3.352-9.404l1.155-1.168m5.374-3.779c1.72-.816 3.227-1.067 4.143-.578 2.021 1.067.515 5.286-3.352 9.404l-1.155 1.155m4.381-.238c.816 1.733 1.067 3.24.577 4.168-1.067 2.021-5.286.515-9.404-3.352l-1.168-1.155"}),i.jsx("path",{strokeWidth:1.691,d:"M738.886 14.85c.6 1.273.894 2.425.814 3.314"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.691,d:"M725.114 9.125c-.816-1.72-1.067-3.227-.578-4.143 1.067-2.02 5.286-.515 9.404 3.352l1.155 1.155"}),i.jsx("path",{strokeLinejoin:"round",strokeWidth:1.691,d:"m724.498 5.058.038-.076c1.067-2.02 5.286-.515 9.404 3.352l1.155 1.155"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M733.968 12a1.962 1.962 0 1 0-3.925 0 1.962 1.962 0 0 0 3.925 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.694,d:"M753.15 18.894c-1.736.818-3.246 1.07-4.177.58-2.026-1.07-.516-5.298 3.359-9.424.377-.399.763-.79 1.158-1.17m5.385-3.787c1.724-.818 3.233-1.069 4.152-.579 2.026 1.07.516 5.297-3.359 9.423-.377.403-.767.793-1.157 1.157m4.39-.238c.818 1.736 1.069 3.246.579 4.177-1.069 2.026-5.297.516-9.423-3.359a32.793 32.793 0 0 1-1.17-1.157"}),i.jsx("path",{strokeWidth:1.694,d:"M762.901 14.856c.818 1.736 1.069 3.246.579 4.177-.378.716-1.15.99-2.173.875"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.694,d:"M749.099 9.12c-.818-1.725-1.069-3.234-.579-4.153 1.069-2.026 5.297-.516 9.423 3.36.403.376.793.766 1.158 1.156"}),i.jsx("path",{strokeLinejoin:"round",strokeWidth:1.694,d:"M752.189 4.471c1.687.625 3.733 1.956 5.755 3.855l1.158 1.157"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M757.929 12a1.922 1.922 0 1 0-3.844 0 1.922 1.922 0 0 0 3.844 0Z"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.698,d:"M777.144 18.91c-1.74.82-3.253 1.072-4.187.58-2.03-1.072-.517-5.31 3.367-9.445a33.81 33.81 0 0 1 1.16-1.173m5.397-3.795c1.728-.82 3.241-1.072 4.161-.58 2.03 1.072.517 5.309-3.367 9.445-.374.4-.761.786-1.16 1.16m4.402-.24c.82 1.74 1.072 3.254.58 4.188-1.072 2.03-5.309.517-9.445-3.367-.4-.377-.791-.764-1.173-1.16"}),i.jsx("path",{strokeWidth:1.698,d:"M786.917 14.863c.82 1.74 1.072 3.253.58 4.187-.713 1.35-2.827 1.133-5.38-.307"}),i.jsx("path",{strokeOpacity:.2,strokeWidth:1.698,d:"M773.083 9.112c-.82-1.728-1.072-3.241-.58-4.161 1.072-2.03 5.309-.517 9.445 3.367.399.374.786.76 1.16 1.16"}),i.jsx("path",{strokeLinejoin:"round",strokeWidth:1.698,d:"M779.866 6.564a24.528 24.528 0 0 1 2.082 1.754l1.16 1.16"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M781.885 12a1.877 1.877 0 0 0-1.879-1.879 1.88 1.88 0 0 0-1.878 1.88 1.877 1.877 0 0 0 1.879 1.878A1.88 1.88 0 0 0 781.885 12Z"}),i.jsx("path",{strokeOpacity:.2,d:"M801.137 18.927c-1.745.822-3.262 1.075-4.197.582-2.035-1.075-.518-5.322 3.375-9.468.378-.401.766-.793 1.163-1.176m5.411-3.805c1.732-.822 3.249-1.075 4.172-.582 2.035 1.075.518 5.322-3.375 9.468-.375.4-.763.788-1.163 1.163m4.411-.239c.822 1.745 1.075 3.261.581 4.197-1.074 2.035-5.322.518-9.468-3.375a33.941 33.941 0 0 1-1.176-1.163"}),i.jsx("path",{d:"M810.934 14.87c.822 1.745 1.075 3.261.581 4.197-.953 1.805-4.403.816-8.064-2.149"}),i.jsx("path",{strokeOpacity:.2,d:"M797.066 9.105c-.822-1.732-1.075-3.249-.582-4.172 1.075-2.035 5.322-.518 9.468 3.375.405.379.796.771 1.163 1.163"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M805.839 12a1.834 1.834 0 0 0-1.131-1.693A1.832 1.832 0 1 0 805.839 12Z"}),i.jsx("path",{strokeOpacity:.2,d:"M825.129 18.945c-1.749.824-3.27 1.077-4.208.583-2.041-1.077-.52-5.336 3.384-9.493a34.18 34.18 0 0 1 1.166-1.179"}),i.jsx("path",{d:"m823.076 11.443 1.23-1.408 1.166-1.179"}),i.jsx("path",{strokeOpacity:.2,d:"M830.896 5.042c1.736-.824 3.257-1.077 4.183-.583 2.041 1.077.52 5.336-3.384 9.493-.38.406-.773.799-1.166 1.166"}),i.jsx("path",{strokeOpacity:.2,d:"M834.952 14.877c.824 1.749 1.077 3.27.583 4.208-1.077 2.04-5.336.52-9.493-3.384-.406-.38-.798-.773-1.179-1.166"}),i.jsx("path",{d:"M834.952 14.877c.824 1.749 1.077 3.27.583 4.208-1.077 2.04-5.336.52-9.493-3.384-.406-.38-.798-.773-1.179-1.166"}),i.jsx("path",{strokeOpacity:.2,d:"M821.048 9.098c-.824-1.736-1.077-3.257-.583-4.183 1.077-2.041 5.336-.52 9.493 3.384.401.376.79.765 1.166 1.166"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M829.789 12a1.783 1.783 0 1 0-3.565 0 1.783 1.783 0 0 0 3.565 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M849.122 18.964c-1.754.826-3.279 1.08-4.219.585-2.046-1.08-.521-5.35 3.393-9.519.38-.403.77-.797 1.169-1.182"}),i.jsx("path",{d:"M845.212 14.127c.73-1.295 1.773-2.702 3.083-4.097l1.169-1.182"}),i.jsx("path",{strokeOpacity:.2,d:"M854.904 5.023c1.741-.826 3.266-1.08 4.194-.585 2.046 1.08.521 5.35-3.393 9.518a25.57 25.57 0 0 1-1.169 1.17m4.434-.24c.826 1.753 1.08 3.278.585 4.218-1.08 2.046-5.35.521-9.518-3.393a33.472 33.472 0 0 1-1.182-1.169"}),i.jsx("path",{d:"m859.6 19.014-.045.09c-1.08 2.046-5.35.521-9.518-3.393a33.472 33.472 0 0 1-1.182-1.169"}),i.jsx("path",{strokeOpacity:.2,d:"M845.03 9.09c-.826-1.741-1.08-3.266-.585-4.194 1.08-2.046 5.35-.521 9.518 3.393.407.381.801.775 1.169 1.169"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M853.738 12a1.735 1.735 0 0 0-1.732-1.732 1.733 1.733 0 0 0-1.225 2.957A1.734 1.734 0 0 0 853.738 12Z"}),i.jsx("path",{strokeOpacity:.2,d:"M873.114 18.983c-1.758.828-3.288 1.083-4.231.586-2.052-1.083-.522-5.365 3.402-9.544.382-.408.777-.803 1.172-1.185"}),i.jsx("path",{d:"M867.997 17.368c.214-1.896 1.75-4.64 4.288-7.343l1.173-1.185"}),i.jsx("path",{strokeOpacity:.2,d:"M878.912 5.004c1.746-.828 3.275-1.083 4.205-.586 2.052 1.083.522 5.365-3.402 9.544-.378.404-.769.794-1.172 1.172m4.446-.24c.828 1.757 1.083 3.287.586 4.23-1.083 2.052-5.365.522-9.544-3.402-.404-.38-.8-.772-1.185-1.172"}),i.jsx("path",{d:"M879.868 19.628c-1.71-.632-3.786-1.98-5.836-3.907l-1.185-1.172"}),i.jsx("path",{strokeOpacity:.2,d:"M869.011 9.082c-.828-1.746-1.083-3.275-.586-4.205 1.083-2.052 5.365-.522 9.544 3.402.408.382.803.777 1.172 1.172"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M877.687 12a1.681 1.681 0 1 0-3.362 0 1.681 1.681 0 0 0 3.362 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M897.106 19.002c-1.763.831-3.296 1.086-4.242.588-2.057-1.086-.524-5.379 3.411-9.57a33.84 33.84 0 0 1 1.175-1.188"}),i.jsx("path",{d:"M893.733 19.83a2.31 2.31 0 0 1-.869-.24c-2.057-1.087-.524-5.38 3.411-9.57.383-.41.779-.806 1.175-1.189"}),i.jsx("path",{strokeOpacity:.2,d:"M902.92 4.985c1.75-.83 3.284-1.086 4.216-.588 2.057 1.086.524 5.38-3.411 9.57-.383.41-.779.805-1.175 1.175m4.458-.242c.831 1.763 1.086 3.296.588 4.242-1.086 2.057-5.379.524-9.57-3.41a35.38 35.38 0 0 1-1.188-1.176"}),i.jsx("path",{d:"M900.135 17.508a25.007 25.007 0 0 1-2.109-1.777l-1.188-1.175"}),i.jsx("path",{strokeOpacity:.2,d:"M892.992 9.074c-.83-1.75-1.086-3.284-.588-4.216 1.086-2.057 5.379-.524 9.57 3.411.409.383.805.779 1.175 1.175"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M901.636 12a1.63 1.63 0 1 0-3.26.001 1.63 1.63 0 0 0 3.26 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M921.099 19.02c-1.768.833-3.305 1.09-4.253.59-2.062-1.09-.525-5.394 3.42-9.596.384-.41.781-.807 1.179-1.19"}),i.jsx("path",{d:"M921.098 19.02c-1.768.833-3.305 1.09-4.253.59-2.062-1.09-.525-5.394 3.42-9.596.384-.41.781-.807 1.179-1.19"}),i.jsx("path",{strokeOpacity:.2,d:"M926.927 4.967c1.755-.833 3.292-1.089 4.227-.589 2.062 1.09.525 5.393-3.42 9.595-.384.41-.781.807-1.178 1.18m4.47-.245c.833 1.768 1.089 3.305.589 4.253-1.089 2.062-5.393.525-9.595-3.42a34.634 34.634 0 0 1-1.191-1.178m-3.855-5.497c-.833-1.755-1.089-3.292-.589-4.227 1.089-2.062 5.393-.525 9.595 3.42.406.38.799.773 1.179 1.18"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M925.586 12a1.58 1.58 0 1 0-3.158.002 1.58 1.58 0 0 0 3.158-.002Z"}),i.jsx("path",{strokeOpacity:.2,d:"M945.091 19.037c-1.772.835-3.313 1.092-4.264.59-2.068-1.091-.527-5.406 3.429-9.618a34.92 34.92 0 0 1 1.181-1.194"}),i.jsx("path",{d:"M945.091 19.037c-1.772.835-3.313 1.092-4.264.59-1.529-.806-1.085-3.376.85-6.363"}),i.jsx("path",{strokeOpacity:.2,d:"M950.934 4.95c1.759-.835 3.3-1.092 4.238-.591 2.068 1.092.526 5.407-3.429 9.619-.385.41-.783.809-1.181 1.18"}),i.jsx("path",{d:"m952.991 12.549-1.248 1.428-1.181 1.18"}),i.jsx("path",{strokeOpacity:.2,d:"M955.044 14.915c.835 1.772 1.092 3.313.591 4.264-1.091 2.068-5.406.526-9.619-3.43a33.582 33.582 0 0 1-1.194-1.18m-3.866-5.51c-.835-1.76-1.092-3.3-.591-4.238 1.092-2.068 5.407-.527 9.619 3.429.411.385.809.783 1.181 1.18"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M949.538 12a1.531 1.531 0 1 0-3.062 0 1.531 1.531 0 0 0 3.062 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M969.084 19.054c-1.776.837-3.321 1.094-4.274.592-2.072-1.094-.528-5.419 3.437-9.64.385-.41.78-.809 1.184-1.198"}),i.jsx("path",{d:"M969.084 19.054c-1.776.837-3.321 1.094-4.274.592a1.625 1.625 0 0 1-.81-.989"}),i.jsx("path",{strokeOpacity:.2,d:"M974.941 4.933c1.763-.837 3.308-1.094 4.248-.592 2.072 1.094.528 5.419-3.437 9.64-.386.413-.785.812-1.184 1.185"}),i.jsx("path",{d:"M978.873 9.837c-.74 1.31-1.795 2.733-3.12 4.145l-1.184 1.184"}),i.jsx("path",{strokeOpacity:.2,d:"M979.06 14.922c.837 1.776 1.094 3.321.592 4.274-1.094 2.072-5.419.528-9.641-3.437-.409-.385-.808-.78-1.197-1.184m-3.874-5.523c-.837-1.763-1.094-3.308-.592-4.248 1.094-2.072 5.419-.528 9.641 3.437.408.382.802.777 1.184 1.184"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M973.493 12a1.486 1.486 0 1 0-2.97 0 1.486 1.486 0 0 0 2.969 0h.001Z"}),i.jsx("path",{strokeOpacity:.2,d:"M993.078 19.07c-1.78.838-3.328 1.095-4.283.592-2.077-1.096-.529-5.43 3.444-9.662.387-.413.787-.813 1.187-1.2m5.522-3.882c1.772-.838 3.312-1.096 4.262-.593 2.07 1.096.52 5.431-3.449 9.662-.383.409-.778.804-1.187 1.187"}),i.jsx("path",{d:"M1004.1 6.562c-.22 1.919-1.78 4.693-4.34 7.424l-1.187 1.187"}),i.jsx("path",{strokeOpacity:.2,d:"M1003.07 14.928c.84 1.78 1.1 3.328.6 4.283-1.1 2.077-5.433.53-9.664-3.444a34.504 34.504 0 0 1-1.2-1.187m-3.881-5.534c-.838-1.767-1.096-3.315-.593-4.257 1.096-2.077 5.431-.529 9.662 3.444.408.383.804.779 1.186 1.187"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M997.451 12a1.445 1.445 0 1 0-2.89 0 1.445 1.445 0 0 0 2.89 0Z"}),i.jsx("path",{strokeOpacity:.2,d:"M1017.07 19.082c-1.78.84-3.33 1.099-4.29.595-2.08-1.1-.53-5.441 3.45-9.68.39-.41.79-.811 1.19-1.202m5.53-3.89c1.77-.84 3.32-1.1 4.27-.595 2.08 1.099.53 5.44-3.45 9.68-.39.409-.78.806-1.19 1.189"}),i.jsx("path",{d:"M1026.36 4.068c.32.03.61.11.86.242 2.08 1.099.53 5.44-3.45 9.68-.39.409-.78.806-1.19 1.189"}),i.jsx("path",{strokeOpacity:.2,d:"M1027.09 14.934c.84 1.784 1.1 3.334.59 4.29-1.1 2.082-5.44.53-9.68-3.45-.41-.387-.81-.783-1.2-1.19m-3.89-5.544c-.84-1.771-1.1-3.322-.59-4.265 1.09-2.081 5.44-.53 9.68 3.45.41.389.81.789 1.18 1.19"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M1021.41 12c0-.373-.14-.731-.41-.995a1.397 1.397 0 0 0-.99-.413c-.38 0-.73.15-1 .413-.26.264-.41.622-.41.995s.15.73.41.995c.27.264.62.412 1 .413.37-.001.73-.15.99-.413.27-.264.41-.622.41-.995Z"}),i.jsx("path",{strokeOpacity:.2,d:"M1041.07 19.094c-1.79.842-3.34 1.1-4.3.596-2.08-1.1-.53-5.45 3.46-9.696.38-.41.78-.812 1.19-1.204M1046.96 4.893c1.77-.841 3.33-1.1 4.27-.595 2.08 1.1.53 5.45-3.46 9.696-.38.414-.79.816-1.19 1.19"}),i.jsx("path",{d:"M1046.96 4.893c1.77-.841 3.33-1.1 4.27-.595 2.08 1.1.53 5.45-3.46 9.696-.38.414-.79.816-1.19 1.19"}),i.jsx("path",{strokeOpacity:.2,d:"M1051.1 14.939c.84 1.787 1.1 3.34.6 4.298-1.1 2.084-5.45.531-9.7-3.457-.41-.388-.82-.79-1.2-1.191m-3.9-5.554c-.84-1.774-1.1-3.327-.6-4.272 1.1-2.084 5.45-.531 9.7 3.457.41.384.81.781 1.19 1.191"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M1045.38 12c0-.76-.61-1.376-1.37-1.376-.76 0-1.38.616-1.38 1.376 0 .76.62 1.376 1.38 1.376.76 0 1.37-.616 1.37-1.376Z"}),i.jsx("path",{strokeOpacity:.2,d:"M1065.06 19.104c-1.78.843-3.34 1.102-4.3.596-2.09-1.102-.53-5.458 3.46-9.71.39-.411.79-.813 1.19-1.206m5.55-3.9c1.78-.844 3.33-1.103 4.28-.597 2.09 1.102.53 5.458-3.46 9.71-.39.41-.78.809-1.19 1.193"}),i.jsx("path",{d:"M1070.96 4.883c1.78-.843 3.33-1.102 4.28-.596 1.54.815 1.09 3.41-.86 6.426"}),i.jsx("path",{strokeOpacity:.2,d:"M1075.11 14.943c.84 1.79 1.1 3.345.6 4.304-1.11 2.087-5.46.531-9.71-3.46a34.38 34.38 0 0 1-1.21-1.194m-3.9-5.562c-.84-1.776-1.1-3.33-.6-4.278 1.1-2.087 5.46-.532 9.71 3.461.41.385.81.783 1.2 1.193"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M1069.35 12c0-.358-.14-.7-.39-.954a1.35 1.35 0 0 0-1.91 0c-.25.254-.39.596-.39.954s.14.7.39.954c.26.252.6.395.96.395.35 0 .7-.143.95-.396s.39-.596.39-.953Z"}),i.jsx("path",{strokeOpacity:.2,d:"M1089.06 19.112c-1.79.844-3.35 1.103-4.31.597-2.09-1.103-.53-5.464 3.47-9.72.39-.412.78-.814 1.19-1.207m5.55-3.907c1.78-.844 3.34-1.103 4.29-.597 2.09 1.103.53 5.464-3.47 9.72-.38.41-.78.809-1.19 1.194"}),i.jsx("path",{d:"M1094.97 4.875c1.77-.844 3.33-1.103 4.28-.597.41.218.68.564.82 1.011"}),i.jsx("path",{strokeOpacity:.2,d:"M1099.12 14.946c.84 1.791 1.1 3.348.6 4.31-1.11 2.088-5.47.531-9.72-3.466-.42-.388-.82-.786-1.21-1.194m-3.91-5.568c-.84-1.778-1.1-3.335-.59-4.283 1.1-2.089 5.46-.532 9.72 3.465.41.39.81.792 1.19 1.194"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M1093.33 12c0-.352-.14-.69-.39-.938a1.3 1.3 0 0 0-.93-.39c-.36 0-.69.14-.94.39a1.324 1.324 0 0 0 0 1.876c.25.248.59.388.94.389.35 0 .69-.141.93-.39.25-.248.39-.585.39-.937Z"}),i.jsx("path",{strokeOpacity:.2,d:"M1113.06 19.117c-1.79.844-3.35 1.104-4.31.598-2.1-1.104-.54-5.468 3.46-9.728.39-.416.8-.818 1.2-1.208m5.56-3.91c1.78-.843 3.34-1.103 4.28-.596 2.09 1.104.54 5.468-3.46 9.728-.39.411-.79.81-1.2 1.195m4.53-.248c.85 1.792 1.11 3.35.6 4.312-1.1 2.09-5.47.532-9.73-3.468-.41-.389-.81-.787-1.21-1.195m-3.9-5.571c-.85-1.78-1.11-3.338-.6-4.286 1.1-2.091 5.47-.533 9.73 3.468.41.39.81.792 1.19 1.195"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M1117.32 12a1.3 1.3 0 0 0-.39-.928 1.28 1.28 0 0 0-.92-.384c-.35 0-.68.138-.93.384s-.38.58-.38.928c0 .348.13.682.38.928s.58.384.93.384c.35 0 .68-.138.92-.384a1.3 1.3 0 0 0 .39-.928Z"}),i.jsx("path",{strokeOpacity:.2,d:"M1137.06 19.12c-1.8.846-3.36 1.106-4.32.599-2.09-1.105-.53-5.471 3.47-9.733.39-.412.79-.815 1.2-1.208m5.56-3.912c1.78-.845 3.34-1.105 4.29-.598 2.09 1.105.53 5.47-3.47 9.733-.39.411-.79.81-1.2 1.196m4.54-.247c.84 1.793 1.1 3.352.59 4.314-1.1 2.092-5.47.533-9.73-3.47-.41-.389-.81-.787-1.21-1.195m-3.91-5.575c-.84-1.78-1.1-3.34-.6-4.288 1.11-2.092 5.48-.533 9.74 3.469.41.385.81.784 1.19 1.195"}),i.jsx("path",{fill:"currentColor",stroke:"none",d:"M1141.31 12a1.3 1.3 0 0 0-1.3-1.303c-.72 0-1.31.583-1.31 1.303s.59 1.303 1.31 1.303a1.3 1.3 0 0 0 1.3-1.303Z"})]}));WEe.displayName="Sequence";const $Ee=f.memo(({...e})=>i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[i.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(6.02816 14.5018)",d:"M3.02816 4.6202C1.23465 5.465 -0.32491 5.7249 -1.28665 5.2181C-3.37906 4.1134 -1.8195 -0.2534 2.18339 -4.51623C2.57328 -4.93212 2.97617 -5.33501 3.37906 -5.7249"}),i.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(17.9719 9.47869)",d:"M-3.00215 -4.61371C-1.22165 -5.45848 0.33785 -5.7184 1.28665 -5.21154C3.37905 -4.10685 1.81945 0.259935 -2.18345 4.52271C-2.57335 4.93861 -2.97615 5.3415 -3.37905 5.7184"}),i.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(14.5083 17.9783)",d:"M4.6202 -3.02815C5.465 -1.23465 5.72491 0.32485 5.21801 1.28665C4.11341 3.37905 -0.253395 1.81945 -4.51624 -2.18345C-4.93213 -2.57335 -5.33501 -2.97625 -5.72491 -3.37905"}),i.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(9.4852 6.02166)",d:"M-4.61371 3.00217C-5.45848 1.22166 -5.71841 -0.3379 -5.21154 -1.28664C-4.10685 -3.37906 0.259935 -1.81949 4.52271 2.1834C4.93861 2.57329 5.3415 2.97618 5.7184 3.37906"}),i.jsx("path",{fill:"currentColor",transform:"translate(12.0065 12)",d:"M1.29965 5e-05C1.29965 -0.71775 0.71785 -1.29965 5e-05 -1.29965C-0.71775 -1.29965 -1.29965 -0.71775 -1.29965 5e-05C-1.29965 0.71785 -0.71775 1.29965 5e-05 1.29965C0.71785 1.29965 1.29965 0.71785 1.29965 5e-05Z"})]}));$Ee.displayName="DeepResearchStatic";const yU=({shouldAnimate:e,animationDuration:t=1,animationName:n})=>{const r=f.useRef(0),s=f.useRef(null),[a,o]=f.useState(!1);f.useEffect(()=>{if(s.current&&(clearTimeout(s.current),s.current=null),e)o(!0),r.current=performance.now();else if(r.current>0){const m=(performance.now()-r.current)/(t*1e3)%1;s.current=setTimeout(()=>{o(!1),r.current=0,s.current=null},(1-m)*t*1e3)}else o(!1),r.current=0;return()=>{s.current&&(clearTimeout(s.current),s.current=null)}},[e,t]);const l=U(n,"fill-mode-both h-full w-auto shrink-0 transform-gpu will-change-transform"),c="h-full w-auto shrink-0 transform-gpu";return f.useMemo(()=>({_shouldAnimate:a,sequenceProps:{className:l,style:{animationDuration:`${t}s`}},staticProps:{className:c}}),[a,t,l])},A5=f.memo(({children:e,className:t,size:n,aspectRatio:r=1})=>i.jsx("div",{className:U("text-foreground flex shrink-0 items-center justify-start overflow-hidden",t),style:{height:n,aspectRatio:r},children:e}));A5.displayName="SpriteAnimationWrapper";const HEe=f.memo(({size:e=32,shouldAnimate:t=!0,className:n})=>{const{_shouldAnimate:r,sequenceProps:s,staticProps:a}=yU({shouldAnimate:t,animationDuration:3,animationName:"animate-deepResearchIndicator"});return i.jsx(A5,{size:e,className:n,children:r?i.jsx(WEe,{...s}):i.jsx($Ee,{...a})})});HEe.displayName="DeepResearchLoader";const zEe=f.memo(e=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:936,height:24,viewBox:"0 0 936 24",...e,children:[i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M9.537 14.568a6.162 6.162 0 0 1-3.695-5.64A6.16 6.16 0 0 1 12 2.77a6.16 6.16 0 0 1 6.158 6.157 6.162 6.162 0 0 1-3.695 5.64v3.597H9.537v3.066h4.926"}),i.jsx("path",{fill:"currentColor",fillOpacity:.2,d:"M13.312 8.927a1.3 1.3 0 1 0-2.6 0 1.3 1.3 0 0 0 2.6 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M33.538 14.567a6.16 6.16 0 0 1-3.694-5.639A6.158 6.158 0 0 1 36 2.772a6.158 6.158 0 0 1 6.156 6.156 6.16 6.16 0 0 1-3.694 5.64v3.594h-4.924v3.066h4.924"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M35.874 21.227h2.59"}),i.jsx("path",{fill:"currentColor",fillOpacity:.204,d:"M37.317 8.928a1.305 1.305 0 1 0-2.61 0 1.305 1.305 0 0 0 2.61 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.748,d:"M57.54 14.565a6.156 6.156 0 0 1-3.69-5.634A6.153 6.153 0 0 1 60 2.78a6.153 6.153 0 0 1 6.15 6.15 6.156 6.156 0 0 1-3.69 5.635v3.592h-4.92v3.063h4.92"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.748,d:"M57.54 20.968v.252h4.92"}),i.jsx("path",{fill:"currentColor",fillOpacity:.22,d:"M61.332 8.93a1.32 1.32 0 1 0-2.64 0 1.32 1.32 0 0 0 2.64 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.746,d:"M81.543 14.561a6.147 6.147 0 0 1-3.686-5.626A6.145 6.145 0 0 1 84 2.792a6.145 6.145 0 0 1 6.143 6.143 6.147 6.147 0 0 1-3.686 5.626v3.587h-4.914v3.06h4.914"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.746,d:"M81.543 18.373v2.835h4.914"}),i.jsx("path",{fill:"currentColor",fillOpacity:.247,d:"M85.357 8.935a1.344 1.344 0 1 0-2.689 0 1.344 1.344 0 0 0 2.689 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.743,d:"M105.547 14.556a6.136 6.136 0 0 1-3.678-5.616A6.134 6.134 0 0 1 108 2.809a6.133 6.133 0 0 1 6.131 6.131 6.136 6.136 0 0 1-3.678 5.616v3.581h-4.906v3.053h4.906"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.743,d:"M107.901 18.137h-2.354v3.054h4.906"}),i.jsx("path",{fill:"currentColor",fillOpacity:.282,d:"M109.39 8.94a1.378 1.378 0 1 0-2.755.001 1.378 1.378 0 0 0 2.755 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.739,d:"M129.553 14.55a6.122 6.122 0 0 1-3.67-5.603A6.12 6.12 0 0 1 132 2.83a6.12 6.12 0 0 1 6.118 6.117 6.123 6.123 0 0 1-3.671 5.604v3.572h-4.894v3.047h4.894"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.739,d:"m134.447 18.122-4.894.001v3.047h4.894"}),i.jsx("path",{fill:"currentColor",fillOpacity:.325,d:"M133.43 8.947a1.418 1.418 0 1 0-2.836 0 1.418 1.418 0 0 0 2.836 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.734,d:"M153.56 14.544a6.106 6.106 0 0 1-3.661-5.59 6.103 6.103 0 0 1 6.101-6.1 6.103 6.103 0 0 1 6.101 6.1 6.106 6.106 0 0 1-3.66 5.59v3.563h-4.881v3.038h4.881"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.734,d:"M158.441 15.511v2.596h-4.881v3.038h4.881"}),i.jsx("path",{fill:"currentColor",fillOpacity:.376,d:"M157.477 8.955a1.465 1.465 0 1 0-2.93 0 1.465 1.465 0 0 0 2.93 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.729,d:"M177.567 14.536a6.088 6.088 0 0 1-3.65-5.572A6.085 6.085 0 0 1 180 2.88a6.085 6.085 0 0 1 6.083 6.084 6.087 6.087 0 0 1-3.65 5.572v3.553h-4.866v3.029h4.866"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.729,d:"M183.809 13.7a6.066 6.066 0 0 1-1.376.836v3.552h-4.866v3.03h4.866"}),i.jsx("path",{fill:"currentColor",fillOpacity:.435,d:"M181.529 8.964a1.517 1.517 0 1 0-3.034 0 1.517 1.517 0 0 0 3.034 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.723,d:"M201.575 14.528a6.068 6.068 0 0 1-3.639-5.555A6.066 6.066 0 0 1 204 2.91a6.066 6.066 0 0 1 6.064 6.064 6.069 6.069 0 0 1-3.638 5.555v3.54h-4.851v3.02h4.851"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.723,d:"M209.405 11.72a6.103 6.103 0 0 1-2.979 2.807v3.542h-4.851v3.02h4.851"}),i.jsx("path",{fill:"currentColor",fillOpacity:.494,d:"M205.585 8.973a1.573 1.573 0 1 0-3.145 0 1.573 1.573 0 0 0 3.145 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.718,d:"M225.583 14.519a6.048 6.048 0 0 1-3.627-5.536A6.046 6.046 0 0 1 228 2.939a6.046 6.046 0 0 1 6.044 6.044 6.049 6.049 0 0 1-3.626 5.536v3.53h-4.835v3.01h4.835"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.718,d:"M234.039 9.24a6.052 6.052 0 0 1-3.621 5.279v3.53h-4.835v3.01h4.835"}),i.jsx("path",{fill:"currentColor",fillOpacity:.561,d:"M229.642 8.983a1.63 1.63 0 1 0-3.259-.001 1.63 1.63 0 0 0 3.259 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.712,d:"M249.591 14.51a6.028 6.028 0 0 1-3.614-5.517A6.025 6.025 0 0 1 252 2.969a6.026 6.026 0 0 1 6.024 6.024c0 2.47-1.494 4.59-3.614 5.517v3.518h-4.819v3h4.819"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.712,d:"M257.578 6.715a6.028 6.028 0 0 1-3.168 7.795v3.518h-4.819v3h4.819"}),i.jsx("path",{fill:"currentColor",fillOpacity:.627,d:"M253.7 8.993a1.688 1.688 0 1 0-3.376 0 1.688 1.688 0 0 0 3.376 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.706,d:"M273.599 14.502a6.008 6.008 0 0 1-3.602-5.5A6.005 6.005 0 0 1 276 3a6.006 6.006 0 0 1 6.004 6.003 6.008 6.008 0 0 1-3.602 5.5v3.506h-4.803v2.99h4.803"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.706,d:"M280.14 4.656a5.987 5.987 0 0 1 1.864 4.346 6.008 6.008 0 0 1-3.602 5.5v3.505h-4.803v2.99h4.803"}),i.jsx("path",{fill:"currentColor",fillOpacity:.69,d:"M277.756 9.003a1.744 1.744 0 1 0-3.488 0 1.744 1.744 0 0 0 3.488 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.701,d:"M297.607 14.494a5.989 5.989 0 0 1-3.591-5.482A5.987 5.987 0 0 1 300 3.027a5.987 5.987 0 0 1 5.985 5.985 5.989 5.989 0 0 1-3.591 5.482v3.494h-4.787v2.98h4.787"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.701,d:"M301.994 3.368a5.99 5.99 0 0 1 3.991 5.644 5.988 5.988 0 0 1-3.591 5.482v3.495h-4.787v2.98h4.787"}),i.jsx("path",{fill:"currentColor",fillOpacity:.753,d:"M301.809 9.012a1.797 1.797 0 1 0-3.594 0 1.797 1.797 0 0 0 3.594 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.696,d:"M321.614 14.486a5.97 5.97 0 0 1-3.58-5.465A5.969 5.969 0 0 1 324 3.054a5.969 5.969 0 0 1 5.967 5.967 5.97 5.97 0 0 1-3.58 5.465v3.485h-4.773v2.971h4.773"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.696,d:"M323.448 3.079a5.969 5.969 0 0 1 6.519 5.942 5.972 5.972 0 0 1-3.58 5.465v3.485h-4.773v2.971h4.773"}),i.jsx("path",{fill:"currentColor",fillOpacity:.812,d:"M325.857 9.02a1.845 1.845 0 1 0-3.69 0 1.845 1.845 0 0 0 3.69 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.691,d:"M345.62 14.48a5.956 5.956 0 0 1-3.571-5.452A5.953 5.953 0 0 1 348 3.077a5.954 5.954 0 0 1 5.952 5.95 5.956 5.956 0 0 1-3.571 5.452v3.476h-4.761v2.963h4.761"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.691,d:"M345.067 3.85a5.954 5.954 0 0 1 8.885 5.178 5.956 5.956 0 0 1-3.571 5.451v3.476h-4.761v2.963h4.761"}),i.jsx("path",{fill:"currentColor",fillOpacity:.867,d:"M349.901 9.028a1.889 1.889 0 1 0-3.778.001 1.889 1.889 0 0 0 3.778-.001Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.688,d:"M369.625 14.473a5.942 5.942 0 0 1-3.562-5.439A5.94 5.94 0 0 1 372 3.097a5.94 5.94 0 0 1 5.938 5.937 5.941 5.941 0 0 1-3.563 5.44v3.467h-4.75v2.957h4.75"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.688,d:"M367.206 5.532A5.93 5.93 0 0 1 372 3.097a5.94 5.94 0 0 1 5.938 5.937 5.942 5.942 0 0 1-3.562 5.44v3.467h-4.751v2.957h4.751"}),i.jsx("path",{fill:"currentColor",fillOpacity:.91,d:"M373.937 9.034a1.924 1.924 0 1 0-3.849 0 1.924 1.924 0 0 0 3.849 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.684,d:"M393.63 14.469a5.93 5.93 0 0 1-3.556-5.43A5.929 5.929 0 0 1 396 3.114a5.929 5.929 0 0 1 5.927 5.927c0 2.43-1.47 4.516-3.556 5.429v3.46h-4.741v2.952h4.741"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.684,d:"M390.203 7.805a5.93 5.93 0 0 1 5.798-4.692 5.929 5.929 0 0 1 5.926 5.927c0 2.43-1.47 4.516-3.556 5.429v3.46h-4.741v2.952h4.741"}),i.jsx("path",{fill:"currentColor",fillOpacity:.949,d:"M397.967 9.04a1.955 1.955 0 1 0-3.91 0 1.955 1.955 0 0 0 3.91 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.682,d:"M417.633 14.465a5.924 5.924 0 0 1-3.551-5.421 5.92 5.92 0 0 1 5.919-5.919 5.92 5.92 0 0 1 5.918 5.919 5.924 5.924 0 0 1-3.551 5.421v3.457h-4.735v2.947h4.735"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.682,d:"M414.232 10.37a5.92 5.92 0 0 1 5.769-7.245 5.92 5.92 0 0 1 5.918 5.919 5.924 5.924 0 0 1-3.551 5.421v3.457h-4.735v2.947h4.735"}),i.jsx("path",{fill:"currentColor",fillOpacity:.976,d:"M421.989 9.044a1.977 1.977 0 1 0-3.954 0 1.977 1.977 0 0 0 3.954 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.681,d:"M441.635 14.463a5.917 5.917 0 0 1-3.548-5.417A5.915 5.915 0 0 1 444 3.133a5.916 5.916 0 0 1 5.914 5.913 5.919 5.919 0 0 1-3.548 5.417v3.454h-4.731v2.945h4.731"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.681,d:"M439.286 12.61a5.874 5.874 0 0 1-1.199-3.564A5.915 5.915 0 0 1 444 3.133a5.916 5.916 0 0 1 5.914 5.913 5.919 5.919 0 0 1-3.548 5.417v3.454h-4.731v2.945h4.731"}),i.jsx("path",{fill:"currentColor",fillOpacity:.992,d:"M446.003 9.046a1.99 1.99 0 1 0-3.981 0 1.99 1.99 0 0 0 3.981 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.68,d:"M465.636 14.463a5.916 5.916 0 0 1-3.547-5.415 5.913 5.913 0 0 1 5.912-5.912 5.913 5.913 0 0 1 5.911 5.912 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.729v2.944h4.729"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M465.181 14.24a5.913 5.913 0 0 1-3.092-5.192 5.913 5.913 0 0 1 5.912-5.912 5.913 5.913 0 0 1 5.911 5.912 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.729v2.944h4.729"}),i.jsx("path",{fill:"currentColor",d:"M470.009 9.047a1.997 1.997 0 1 0-3.994 0 1.997 1.997 0 0 0 3.994 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.68,d:"M489.636 14.463a5.916 5.916 0 0 1-3.548-5.416 5.915 5.915 0 0 1 5.913-5.913 5.915 5.915 0 0 1 5.912 5.913 5.917 5.917 0 0 1-3.547 5.415v3.453h-4.73v2.945h4.73"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M489.636 14.463a5.916 5.916 0 0 1-3.548-5.416 5.915 5.915 0 0 1 5.913-5.913 5.915 5.915 0 0 1 5.912 5.913 5.917 5.917 0 0 1-3.547 5.415v3.453h-4.73v2.945h2.078"}),i.jsx("path",{fill:"currentColor",fillOpacity:.996,d:"M494.006 9.047a1.994 1.994 0 1 0-3.988 0 1.994 1.994 0 0 0 3.988 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.682,d:"M513.634 14.465a5.92 5.92 0 0 1-3.55-5.42 5.919 5.919 0 0 1 5.917-5.917 5.918 5.918 0 0 1 5.916 5.917 5.92 5.92 0 0 1-3.55 5.42v3.455h-4.733v2.946h4.733"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.682,d:"M513.634 14.465a5.92 5.92 0 0 1-3.55-5.42 5.919 5.919 0 0 1 5.917-5.917 5.918 5.918 0 0 1 5.916 5.917 5.92 5.92 0 0 1-3.55 5.42v3.455h-4.733v1.71"}),i.jsx("path",{fill:"currentColor",fillOpacity:.984,d:"M517.994 9.045a1.982 1.982 0 1 0-3.963 0 1.982 1.982 0 0 0 3.963 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.684,d:"M537.631 14.468a5.928 5.928 0 0 1-3.555-5.427 5.927 5.927 0 0 1 5.925-5.924 5.926 5.926 0 0 1 5.924 5.924 5.928 5.928 0 0 1-3.555 5.427v3.46h-4.739v2.95h4.739"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.684,d:"M537.631 14.468a5.928 5.928 0 0 1-3.555-5.427 5.927 5.927 0 0 1 5.925-5.924 5.926 5.926 0 0 1 5.924 5.924 5.928 5.928 0 0 1-3.555 5.427v3.46h-3.129"}),i.jsx("path",{fill:"currentColor",fillOpacity:.961,d:"M541.974 9.04a1.961 1.961 0 1 0-3.923.001 1.961 1.961 0 0 0 3.923 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.687,d:"M561.626 14.472a5.94 5.94 0 0 1-3.561-5.436A5.937 5.937 0 0 1 564 3.1a5.937 5.937 0 0 1 5.936 5.935 5.94 5.94 0 0 1-3.562 5.436v3.466h-4.748v2.956h4.748"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.687,d:"M561.626 14.472a5.94 5.94 0 0 1-3.561-5.436A5.937 5.937 0 0 1 564 3.1a5.937 5.937 0 0 1 5.936 5.935 5.94 5.94 0 0 1-3.562 5.436v3.416"}),i.jsx("path",{fill:"currentColor",fillOpacity:.925,d:"M565.945 9.036a1.932 1.932 0 1 0-3.865 0 1.932 1.932 0 0 0 3.865 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.691,d:"M585.621 14.478a5.953 5.953 0 0 1-3.569-5.448A5.95 5.95 0 0 1 588 3.08a5.95 5.95 0 0 1 5.949 5.949 5.953 5.953 0 0 1-3.569 5.448v3.474h-4.759v2.963h4.759"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.691,d:"M585.621 14.478a5.953 5.953 0 0 1-3.569-5.448A5.95 5.95 0 0 1 588 3.08a5.95 5.95 0 0 1 5.949 5.949 5.952 5.952 0 0 1-3.519 5.426"}),i.jsx("path",{fill:"currentColor",fillOpacity:.882,d:"M589.908 9.03a1.896 1.896 0 1 0-3.792 0 1.896 1.896 0 0 0 3.792 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.695,d:"M609.615 14.485a5.968 5.968 0 0 1-3.579-5.463A5.966 5.966 0 0 1 612 3.058a5.967 5.967 0 0 1 5.965 5.964 5.968 5.968 0 0 1-3.579 5.463v3.483h-4.771v2.97h4.771"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.695,d:"M609.615 14.485a5.968 5.968 0 0 1-3.579-5.463A5.966 5.966 0 0 1 612 3.058a5.967 5.967 0 0 1 5.965 5.964c0 1.21-.363 2.335-.983 3.275"}),i.jsx("path",{fill:"currentColor",fillOpacity:.835,d:"M613.865 9.022a1.853 1.853 0 1 0-3.706 0 1.853 1.853 0 0 0 3.706 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.7,d:"M633.608 14.493a5.987 5.987 0 0 1-3.59-5.48A5.984 5.984 0 0 1 636 3.031a5.984 5.984 0 0 1 5.982 5.982 5.986 5.986 0 0 1-3.589 5.48v3.493h-4.785v2.98h4.785"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.7,d:"M633.608 14.493a5.987 5.987 0 0 1-3.59-5.48A5.984 5.984 0 0 1 636 3.031a5.984 5.984 0 0 1 5.982 5.982v.078"}),i.jsx("path",{fill:"currentColor",fillOpacity:.776,d:"M637.816 9.013a1.804 1.804 0 1 0-3.608 0 1.804 1.804 0 0 0 3.608 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.706,d:"M657.6 14.5a6.005 6.005 0 0 1-3.601-5.496A6.004 6.004 0 0 1 660 3.002a6.003 6.003 0 0 1 6.001 6.002 6.006 6.006 0 0 1-3.6 5.497v3.504H657.6v2.989h4.801"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.706,d:"M657.6 14.5a6.005 6.005 0 0 1-3.601-5.496A6.004 6.004 0 0 1 660 3.002a5.999 5.999 0 0 1 5.101 2.84"}),i.jsx("path",{fill:"currentColor",fillOpacity:.718,d:"M661.762 9.003a1.75 1.75 0 1 0-3.5 0 1.75 1.75 0 0 0 3.5 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.711,d:"M681.592 14.51a6.025 6.025 0 0 1-3.613-5.516A6.024 6.024 0 0 1 684 2.973a6.023 6.023 0 0 1 6.021 6.02 6.026 6.026 0 0 1-3.612 5.516v3.517h-4.817v2.998h4.817"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.711,d:"M681.592 14.51a6.025 6.025 0 0 1-3.613-5.516 6.024 6.024 0 0 1 8.647-5.42"}),i.jsx("path",{fill:"currentColor",fillOpacity:.651,d:"M685.706 8.994a1.694 1.694 0 1 0-3.387 0 1.694 1.694 0 0 0 3.387 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.717,d:"M705.584 14.518a6.045 6.045 0 0 1-3.625-5.534A6.043 6.043 0 0 1 708 2.942a6.044 6.044 0 0 1 6.042 6.042 6.047 6.047 0 0 1-3.625 5.534v3.528h-4.833v3.009h4.833"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.717,d:"M705.584 14.518a6.045 6.045 0 0 1-3.625-5.534 6.045 6.045 0 0 1 5.308-5.997"}),i.jsx("path",{fill:"currentColor",fillOpacity:.588,d:"M709.649 8.984a1.637 1.637 0 1 0-3.273 0 1.637 1.637 0 0 0 3.273 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.723,d:"M729.576 14.527a6.066 6.066 0 0 1-3.637-5.553A6.063 6.063 0 0 1 732 2.913a6.064 6.064 0 0 1 6.062 6.061 6.067 6.067 0 0 1-3.637 5.553v3.54h-4.849v3.018h4.849"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.723,d:"M729.576 14.527a6.066 6.066 0 0 1-3.637-5.553c0-1.89.867-3.58 2.225-4.692"}),i.jsx("path",{fill:"currentColor",fillOpacity:.522,d:"M733.592 8.974a1.58 1.58 0 1 0-3.159 0 1.58 1.58 0 0 0 3.159 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.728,d:"M753.568 14.535a6.085 6.085 0 0 1-3.649-5.57A6.084 6.084 0 0 1 756 2.884a6.083 6.083 0 0 1 6.081 6.08 6.086 6.086 0 0 1-3.648 5.57v3.552h-4.865v3.028h4.865"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.728,d:"M753.568 14.535a6.085 6.085 0 0 1-3.336-7.5"}),i.jsx("path",{fill:"currentColor",fillOpacity:.459,d:"M757.536 8.965a1.524 1.524 0 1 0-3.048 0 1.524 1.524 0 0 0 3.048 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.733,d:"M777.561 14.543a6.104 6.104 0 0 1-3.66-5.587A6.101 6.101 0 0 1 780 2.857a6.1 6.1 0 0 1 6.099 6.1c0 2.5-1.513 4.646-3.659 5.586v3.561h-4.879v3.037h4.879"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.733,d:"M777.561 14.543a6.12 6.12 0 0 1-3.464-4.052"}),i.jsx("path",{fill:"currentColor",fillOpacity:.4,d:"M781.485 8.956a1.472 1.472 0 1 0-2.945 0 1.472 1.472 0 0 0 2.945 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.738,d:"M801.554 14.55a6.12 6.12 0 0 1-3.669-5.602A6.117 6.117 0 0 1 804 2.833a6.117 6.117 0 0 1 6.115 6.115 6.12 6.12 0 0 1-3.669 5.601v3.572h-4.892v3.045h4.892"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.738,d:"M801.554 14.55a6.124 6.124 0 0 1-1.733-1.144"}),i.jsx("path",{fill:"currentColor",fillOpacity:.345,d:"M805.438 8.948a1.426 1.426 0 1 0-2.851 0 1.426 1.426 0 0 0 2.851 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.742,d:"M825.549 14.555a6.133 6.133 0 0 1-3.678-5.614A6.131 6.131 0 0 1 828 2.812a6.131 6.131 0 0 1 6.129 6.13c0 2.512-1.52 4.67-3.677 5.613v3.58h-4.903v3.051h4.903"}),i.jsx("path",{fill:"currentColor",fillOpacity:.298,d:"M829.397 8.942a1.385 1.385 0 1 0-2.77 0 1.385 1.385 0 0 0 2.77 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.745,d:"M849.544 14.56a6.145 6.145 0 0 1-3.684-5.624c0-3.39 2.751-6.14 6.14-6.14s6.14 2.75 6.14 6.14a6.145 6.145 0 0 1-3.684 5.624v3.586h-4.912v3.058h4.912"}),i.jsx("path",{fill:"currentColor",fillOpacity:.259,d:"M853.364 8.936a1.352 1.352 0 1 0-2.703 0 1.352 1.352 0 0 0 2.703 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.748,d:"M873.541 14.564a6.153 6.153 0 0 1-3.69-5.632A6.151 6.151 0 0 1 876 2.782a6.151 6.151 0 0 1 6.149 6.15 6.154 6.154 0 0 1-3.689 5.632v3.59h-4.919v3.063h4.919"}),i.jsx("path",{fill:"currentColor",fillOpacity:.231,d:"M877.338 8.931a1.326 1.326 0 1 0-2.651 0 1.326 1.326 0 0 0 2.651 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.749,d:"M897.538 14.567a6.16 6.16 0 0 1-3.693-5.638A6.157 6.157 0 0 1 900 2.774a6.157 6.157 0 0 1 6.155 6.155 6.16 6.16 0 0 1-3.693 5.638v3.594h-4.924v3.065h4.924"}),i.jsx("path",{fill:"currentColor",fillOpacity:.212,d:"M901.321 8.929a1.309 1.309 0 1 0-2.618 0 1.309 1.309 0 0 0 2.618 0Z"}),i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M921.537 14.568a6.162 6.162 0 0 1-3.694-5.64A6.16 6.16 0 0 1 924 2.77a6.16 6.16 0 0 1 6.157 6.157 6.162 6.162 0 0 1-3.694 5.64v3.596h-4.926v3.067h4.926"}),i.jsx("path",{fill:"currentColor",fillOpacity:.2,d:"M925.313 8.928a1.3 1.3 0 1 0-2.601 0 1.3 1.3 0 0 0 2.601 0Z"})]}));zEe.displayName="Sequence";const GEe=f.memo(({...e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e,children:[i.jsx("path",{d:"M-2.463 2.568a6.162 6.162 0 0 1-3.695-5.64A6.16 6.16 0 0 1 0-9.23a6.16 6.16 0 0 1 6.158 6.157 6.162 6.162 0 0 1-3.695 5.64v3.597h-4.926V9.23h4.926",style:{fill:"none",stroke:"currentColor",strokeWidth:1.75,strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2},transform:"translate(12 11.997) scale(.96001)"}),i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M9.18 14.24a5.912 5.912 0 0 1-3.09-5.193A5.914 5.914 0 0 1 12 3.136a5.914 5.914 0 0 1 5.912 5.911 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.73v2.944h4.73"}),i.jsx("path",{fill:"currentColor",d:"M14.009 9.047a1.997 1.997 0 1 0-3.993 0 1.997 1.997 0 0 0 3.993 0z"})]}));GEe.displayName="LabsStatic";const qEe=f.memo(({size:e=32,shouldAnimate:t=!0,className:n})=>{const{_shouldAnimate:r,sequenceProps:s,staticProps:a}=yU({shouldAnimate:t,animationDuration:1.5,animationName:"animate-labsIndicator"});return i.jsx(A5,{size:e,className:n,children:r?i.jsx(zEe,{...s}):i.jsx(GEe,{...a})})});qEe.displayName="LabsLoader";const KEe=f.memo(({lineThickness:e,...t})=>i.jsxs("svg",{width:"2820",height:"74",viewBox:"0 0 2820 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[i.jsx("path",{d:"M29.6848 25.4603L48.3092 41.1547V64.3955L29.6848 49.0293M29.6848 25.4603L10.9465 41.2436V64.7306L29.6316 49.0293M29.6848 25.4603H3.35229V49.1113H10.3379M29.6848 25.4603H56.0553V49.1113H48.6552M29.6848 25.4603L10.9465 9.77618V24.7752M29.6848 25.4603L48.3092 9.77618V24.7591M29.6848 25.4603L29.6848 2.77313V24.382M29.6848 25.4603V49.1113M29.6848 25.4603V71.6755V49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M209.685 49.029L226.532 65.889V42.256L209.685 25.46L189.647 39.835L189.532 64.785L207.207 50.797",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M209.685 25.46L207.549 47.423V71.566L209.685 49.084M209.685 25.46L183.516 24.701V47.433L189.594 47.823M209.685 25.46L235.855 26.937V50.943L226.655 50.299M209.685 25.46L192.558 8.218V24.1M209.685 25.46L229.708 10.542V26.546M209.685 25.46L211.798 2.855V24.76M209.685 25.46V49.111M269.685 49.029L285.993 66.318V42.675L269.685 25.46L249.061 39.22V63.11L266.369 51.263",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M269.685 25.46L266.606 47.86V71.511L269.685 49.084M269.685 25.46L243.571 22.835V46.558L248.794 47.068M269.685 25.46L295.788 27.702V51.6L286.585 50.723M269.685 25.46L253.227 7.67V24.726M269.685 25.46L290.377 11.28V27.133M269.685 25.46L272.71 2.923V23.098M269.685 25.46V49.111M329.685 49.03L345.299 67.137V43.3L329.685 25.46L308.331 38.51V62.29L325.293 51.73",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M329.685 25.46L325.565 47.635V71.334L329.685 49.084M329.685 25.46L304.726 21.906V45.738L307.934 46.296M329.685 25.46L355.721 28.687V52.584L345.937 51.279M329.685 25.46L314.048 7.233V23.17M329.685 25.46L351.015 11.882V27.907M329.685 25.46L333.714 2.992V22.74M329.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M389.685 49.029L404.201 67.538L404.352 43.92L389.685 25.46L367.86 37.607V61.387L384.2 52.113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M389.685 25.46L384.523 47.3V71.156L389.685 49.084M389.685 25.46L363.9 20.922V44.754L367.262 45.322M389.685 25.46L415.508 29.78V54.723L404.436 51.688M389.685 25.46L375.021 6.57701V22.724",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M389.685 25.46L411.715 12.838V29.235M389.685 25.46L394.754 3.19701V22.344M389.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M449.685 49.029L463.072 68.404L463.215 44.53L449.685 25.46L427.054 36.842V60.595L442.826 52.515",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M449.685 25.46L443.117 47.129V70.924L449.685 49.084M449.685 25.46L424.143 19.8V44.76L426.599 44.184M449.685 25.46L475.28 30.683V54.58L463.735 52.113M449.685 25.46L436.176 5.976V22.356",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M449.685 25.46L472.414 13.727V30.403M449.685 25.46L456.192 3.539L456.33 21.994M449.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M509.685 49.029L521.673 68.656L521.879 45.127L509.685 25.46L486.385 35.611V59.501L501.389 52.742",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M509.685 25.46L501.711 46.575V70.418L509.685 49.084M509.685 25.46L484.477 18.515V42.481L485.621 42.781M509.685 25.46L534.754 32.077V55.906L522.17 52.482",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M509.685 25.46L497.606 5.374L497.3 22.124M509.685 25.46L533.189 14.79V31.499M509.685 25.46L517.651 3.84V21.876M509.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M569.685 49.03L580.306 69.736V45.91L569.685 25.46L545.564 34.271V58.134L559.659 52.802",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M569.685 25.46L560 46.322V69.98L569.685 49.084M569.685 25.46L545.086 17.121V40.813L545.119 40.824M569.685 25.46L594.185 33.444L594.238 57.334L580.581 52.76M569.685 25.46L559.096 4.69V21.458M569.685 25.46L593.98 16.31L594.119 33.415M569.685 25.46L579.4 4.36V21.53M569.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M629.685 49.03L638.275 70.78V46.58L629.685 25.46L604.774 32.603V56.576L617.836 52.61",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M629.685 25.46L618.29 45.14V69.27L629.685 49.084M629.685 25.46L605.937 15.508V32.273M629.685 25.46L653.478 35.112V58.838L638.453 52.696M629.685 25.46L621.102 3.98V21.387",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M629.685 25.46L654.664 17.842V41.941L653.7 42.217M629.685 25.46L641.361 5.084V21.818M629.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M689.685 49.029L696.089 71.244V47.065L689.685 25.46L664.074 30.744V54.552L675.799 52.019",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M689.685 25.46L676.002 44.34V68.094L689.685 49.084M689.685 25.46L667.092 14.721V29.977M689.685 25.46L712.323 36.944V60.698L696.503 52.601M689.685 25.46L683.353 3.433V21.908",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M689.685 25.46L715.303 19.948V43.855L712.658 44.398M689.685 25.46L703.459 6.06799V22.442M689.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M749.685 49.029L753.271 71.747V47.493L749.685 25.46L723.558 28.365V52.201L733.357 51.009",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M749.685 25.46L733.714 43.157V66.918L749.685 49.084M749.685 25.46L728.673 11.707V27.76M749.685 25.46L770.772 38.83V62.694L753.503 51.57M749.685 25.46L746.12 3.05V22.72",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M749.685 25.46L775.789 22.19V46.083L771.103 46.627",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M765.679 23.49V7.408L749.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M809.685 49.029L809.977 72.045L809.685 47.568V25.46H783.345V49.467L790.992 49.34",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M809.685 25.46L791.205 41.503V64.753L809.685 49.083M809.685 25.46L790.832 9.656V25.143M809.685 25.46L828.674 41.127V64.754L809.685 49.11M809.685 25.46L809.343 2.735",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M809.685 25.46L836.063 25.033V48.753L829.072 48.848M809.685 25.46L828.172 9.24001V25.106M809.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M869.685 49.03L866.405 71.53L866.065 47.01L869.685 25.46L843.558 22.37V46.186L848.429 46.717",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M869.685 25.46L848.696 38.865V62.789L866.042 51.462M869.685 25.46L854.76 7.497V23.406M869.685 25.46L885.633 43.096V66.959L869.685 49.111M869.685 25.46L873.235 3.132V22.9",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M869.685 25.46L895.82 28.304V52.088L885.776 50.944M869.685 25.46L890.726 11.618V27.652M869.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M929.685 49.028L922.004 70.99V46.713L929.685 25.46L904.439 18.734V42.44L906.137 42.884",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M929.685 25.46L906.294 35.826V59.59L921.769 52.64M929.685 25.46L917.34 5.48701L917.202 21.692M929.685 25.46L942.076 45.065V68.9L929.685 49.111M929.685 25.46L937.401 3.78801V21.63",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M929.685 25.46L954.747 31.858V55.698L942.558 52.481M929.685 25.46L953.068 14.763V31.197M929.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M989.685 49.03L977.622 69.38V45.26L989.685 25.46L966.203 15.125V31.444",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M989.685 25.46L964.683 32.077V56.008L977.63 52.423M989.685 25.46L981.627 4.01001V21.74M989.685 25.46L997.788 46.787V70.513L989.685 49.111M989.685 25.46L1001.81 5.23701V21.8",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M989.685 25.46L1013.17 35.468V59.279L998 52.711",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1013.48 42.742L1014.79 42.37V18.372L989.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1049.68 49.029L1034.75 66.743V43.12L1049.68 25.46L1028.76 11.652V27.197",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1049.68 25.46L1023.45 28.18V52.112L1033.53 50.949M1049.68 25.46L1046.22 3.026V22.739M1049.68 25.46L1053.2 47.361V71.388L1049.68 49.111M1049.68 25.46L1065.79 7.507V23.295",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1049.68 25.46L1070.59 38.786V62.78L1053.32 51.489",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1070.94 46.661L1075.96 46.101V22.391L1049.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1108.51 49.947L1090.23 64.228V40.474L1109.68 25.46L1091.89 8.78101V24.188",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1109.68 25.46L1084.75 24.27V48.175L1090.22 48.405M1109.68 25.46L1110.87 2.862L1110.71 24.747M1109.68 25.46L1108.57 47.033V71.716L1109.68 49.111M1109.68 25.46L1129.08 10.132V25.747",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1109.68 25.46L1127.46 41.848V65.568L1109.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1127.63 49.715L1135.96 50.034V26.328L1109.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1163.88 52.298L1147.7 61.414V37.531L1169.68 25.46L1155.29 6.59399V22.504",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1169.68 25.46L1143.85 20.662V44.552L1147.51 45.194M1169.68 25.46L1175.13 3.327L1174.79 22.093M1169.68 25.46L1164.62 47.033L1164.2 71.17L1169.68 49.111L1184.23 67.947V44.145L1169.68 25.46ZM1169.68 25.46L1191.87 12.948V28.924",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1184.43 51.662L1195.53 54.743V29.828L1169.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1220.25 52.825L1206.12 58.508V34.662L1229.68 25.46L1218.52 5.036V21.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1229.68 25.46L1204.75 17.627V41.49L1205.54 41.7M1229.68 25.46L1238.81 4.256L1238.64 21.334M1229.68 25.46L1220.73 46.404V70.24L1229.68 49.111L1240.89 69.588V45.758L1229.68 25.46ZM1229.68 25.46L1253.58 15.873V32.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1241.03 52.54L1254.41 56.678V32.863L1229.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1289.68 25.46L1264.5 32.081V55.974L1277.2 52.472M1289.68 25.46L1281.65 3.97V21.309M1289.68 25.46L1266.25 14.747V31.563M1289.68 25.46L1301.82 5.35V21.67",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1289.68 49.111L1277.57 69.174V45.365L1289.68 25.46L1314.76 18.389V42.272L1314.08 42.458",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1289.68 25.46L1297.73 46.798V70.544L1289.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1297.9 52.673L1313.16 59.44V35.488L1289.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1349.68 25.46L1323.79 29.631V53.515L1334.71 51.624M1349.68 25.46L1344.45 3.259V22.232M1349.68 25.46L1327.68 12.87V28.975M1349.68 25.46L1364.34 6.717V22.43",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1349.68 49.111L1335.01 67.943V44.053L1349.68 25.46L1375.61 20.877V44.761L1372.31 45.315",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1349.68 25.46L1354.73 47.317V71.173L1349.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1354.79 52.049L1371.71 61.573V37.785L1349.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1409.68 25.46L1383.5 27.452V51.428L1392.53 50.601M1409.68 25.46L1407.03 2.95801V23.477M1409.68 25.46L1389.23 11.092V26.894M1409.68 25.46L1426.44 7.97501V23.577",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1409.68 49.112L1393.01 66.522V42.522L1409.68 25.46L1435.92 23.037V46.975L1430.43 47.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1409.68 25.46L1412.44 47.563V71.501L1409.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1412.62 51.087L1430.15 63.391V39.466L1409.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1469.68 25.46L1443.5 25.626V49.323L1450.99 49.239M1469.68 25.46L1469.63 2.79401V2.86401M1469.68 25.46L1450.9 9.64301V25.562M1469.68 25.46L1488.17 9.37001V24.736",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1469.68 49.112L1451.33 65.182V41.237L1469.68 25.46L1496.16 25.142V48.807L1488.91 48.89",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1469.68 25.46L1470 47.754V71.638L1469.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1469.68 49.029L1488.52 64.754V40.916L1469.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1529.68 25.46L1503.5 23.874V47.758L1509.37 48.043M1529.68 25.46L1531.55 2.84801V23.465M1529.68 25.46L1512.36 8.33001V24.23M1529.68 25.46L1549.57 10.545V26.025",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1529.68 49.111L1509.84 63.869V40.061L1529.68 25.46L1556.02 26.756V50.694L1547.51 50.182",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1529.68 25.46L1527.94 47.918V71.474L1529.68 49.111V25.46ZM1529.68 25.46L1547.05 42.091V66.098L1529.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1589.68 25.46L1563.5 22.18V46.007L1568.24 46.554M1589.68 25.46L1593.34 3.09401V22.586M1589.68 25.46L1573.79 7.40001V23.212M1589.68 25.46L1610.79 11.584V27.55",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1585.87 51.573L1568.66 62.693V38.803L1589.68 25.46L1615.89 28.242V52.307L1606.05 51.107",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1589.68 25.46L1586.05 47.645V71.31L1589.68 49.111V25.46ZM1589.68 25.46L1605.57 43.075V67.082L1589.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1649.68 25.46L1623.96 20.819V44.572L1627.42 45.172M1649.68 25.46L1654.72 3.17599V21.958M1649.68 25.46L1635.13 6.55299V22.64M1649.68 25.46L1671.73 12.842V28.897",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1644.41 52.059L1627.59 61.463V37.628L1649.68 25.46L1675.55 29.8V54.747L1664.45 51.7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1649.68 25.46L1644.38 47.317V71.255L1649.68 49.111V25.46ZM1649.68 25.46L1664.25 44.019V67.929L1649.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1709.68 25.46L1684.35 19.59V43.25L1686.64 43.77M1709.68 25.46L1716.47 3.58701V21.618M1709.68 25.46L1696.43 5.87001V22.235M1709.68 25.46L1732.55 14.018V30.154",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1702.93 52.469L1686.93 60.424V36.452L1709.68 25.46L1735.25 31.14V54.76L1722.16 51.964",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1709.68 25.46L1702.88 47.085V70.9L1709.68 49.111V25.46ZM1709.68 25.46L1722.9 44.757V68.558L1709.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1769.68 25.46L1744.79 18.471V42.224L1746.02 42.562M1769.68 25.46L1777.81 3.99701V21.415M1769.68 25.46L1757.68 5.32301V21.924M1769.68 25.46L1793.25 15.056V31.36",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1761.32 52.76L1746.01 59.44V35.467L1769.68 25.46L1794.76 32.084V55.97L1781.58 52.363",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1769.68 25.46L1761.49 46.729V70.489L1769.68 49.111V25.46ZM1769.68 25.46L1781.63 45.222V69.146L1769.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1829.68 25.46L1805.1 17.39V41.163L1805.4 41.259M1829.68 25.46L1839 4.35201V21.335M1829.68 25.46L1818.87 4.703V21.707M1829.68 25.46L1853.83 15.986V32.568",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1820.07 52.787L1805.53 58.347V34.647L1829.68 25.46L1854.34 33.21V57.037L1841 52.75",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1829.68 25.46L1820.32 46.305V70.148L1829.68 49.111V25.46ZM1829.68 25.46L1840.49 45.66V69.638L1829.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1889.68 25.46L1865.62 16.478L1865.29 33.368M1889.68 25.46L1900.06 4.68V21.433M1889.68 25.46L1879.96 4.42V21.716M1889.68 25.46L1914.28 16.834V40.88L1914.24 40.895M1889.68 25.46L1865.16 33.554V57.444L1879.17 52.685",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1899.9 52.822L1913.91 57.912V34.058L1889.68 25.46L1879.29 45.868V69.806L1889.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1889.68 49.029L1899.43 69.806V46.015L1889.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1949.68 25.46L1925.99 15.695V31.95M1949.68 25.46L1961.1 5.063V21.494M1949.68 25.46L1940.84 4.092V21.5M1949.68 25.46L1974.68 17.79L1974.47 41.702L1973.9 41.872M1949.68 25.46L1924.76 32.706V56.596L1938.1 52.605",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1958.83 52.837L1973.52 58.814V34.733L1949.68 25.46L1938.23 45.615V69.41L1949.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M1949.68 49.029L1958.5 70.298V46.37L1949.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2009.68 25.46L1986.3 14.757V31.231M2009.68 25.46L2021.92 5.44601V21.716M2009.68 25.46L2001.76 3.87401V21.862M2009.68 25.46L2034.73 18.584V42.522L2033.42 42.892M2009.68 25.46L1984.49 31.943V55.858L1997.18 52.461",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2017.96 52.797L2033.06 59.525V35.698L2009.68 25.46L1997.49 45.136V69.026L2009.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2009.68 49.029L2017.51 70.544V46.63L2009.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2069.68 25.46L2046.84 14.317V30.256M2069.68 25.46L2082.74 5.82901V21.933M2069.68 25.46L2062.64 3.71001V21.922M2069.68 25.46L2095.2 19.377V43.287L2092.94 43.803M2069.68 25.46L2044.28 31.26V55.065L2056.51 52.199",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2076.98 52.648L2092.73 60.29V36.218L2069.68 25.46L2056.73 44.713V68.576L2069.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2069.68 49.03L2076.74 70.79V47.018L2069.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2129.68 25.46L2107.19 13.74V29.597M2129.68 25.46L2143.31 6.211V22.141M2129.68 25.46L2123.43 3.464V21.942M2129.68 25.46L2155.41 20.033L2155.2 43.916L2152.65 44.436M2129.68 25.46L2103.94 30.658V54.463L2115.78 52.002",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2136.31 52.545L2152.21 60.783V36.874L2129.68 25.46L2115.95 44.384V68.274L2129.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2129.68 49.029L2135.9 70.968V47.032L2129.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2189.68 25.46L2167.64 13.069V28.892M2189.68 25.46L2204.01 6.43V22.382M2189.68 25.46L2184.31 3.3V22.194M2189.68 25.46L2215.62 20.58V44.518L2212.13 45.137M2189.68 25.46L2163.85 29.865L2163.94 53.862L2174.73 51.834",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2195.71 52.442L2211.87 61.385V37.448L2189.68 25.46L2175.33 44.111V67.974L2189.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2189.68 49.029L2195.25 71.118V47.114L2189.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2249.68 25.46L2227.97 12.556V28.31M2249.68 25.46L2264.62 6.676V22.45M2249.68 25.46L2244.76 3.08V22.463M2249.68 25.46L2275.62 21.072V45.229L2271.85 45.793M2249.68 25.46L2223.76 29.346L2223.94 53.233L2234.52 51.539",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2254.75 52.153L2271.51 61.713V37.913L2249.68 25.46L2234.72 43.728V67.618L2249.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2249.68 49.029L2254.55 71.146V47.14L2249.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2309.68 25.46L2288.37 12.072V27.909M2309.68 25.46L2325.14 7.196V22.866M2309.68 25.46L2305.5 3.026V22.507M2309.68 25.46L2335.72 21.7L2335.62 45.502L2331.57 46.066M2309.68 25.46L2284.77 28.853V52.66L2294.05 51.244",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2314.36 51.989L2331.05 62.26V38.46L2309.68 25.46L2294.2 43.51V67.29L2309.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2309.68 49.029L2313.94 71.378V47.36L2309.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2348.71 27.302V11.671L2369.68 25.46L2385.56 7.414V23.034",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2369.68 25.46L2366.04 2.944V23.073M2369.68 25.46L2395.82 22.11L2395.62 46.158L2391.12 46.671M2369.68 25.46L2343.55 28.222V52.167L2353.56 50.996",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2374.76 51.665L2390.75 62.643V38.813L2369.68 25.46L2353.78 43.14V67.003L2369.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2369.68 49.029L2373.21 71.378V47.332L2369.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2429.68 25.46L2409.04 11.326V26.962M2429.68 25.46L2446.08 7.66V23.246M2429.68 25.46L2426.62 2.944V23.177M2429.68 25.46L2455.93 22.548V46.568L2450.64 47.08M2429.68 25.46L2403.43 27.948V51.62L2413.16 50.69",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2433.12 51.449L2450.35 63.189V39.251L2429.68 25.46L2413.32 42.771V66.69L2429.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2429.68 49.03L2432.71 71.46V47.332L2429.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2489.68 25.46L2469.4 11.01V26.644M2489.68 25.46L2506.48 7.88001V23.456M2489.68 25.46L2487.23 2.91701V24.713M2489.68 25.46L2516 23.095V46.98L2510.45 47.43M2489.68 25.46L2463.4 27.429L2463.43 51.292L2472.71 50.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2492.62 51.175L2510.11 63.49V39.415L2489.68 25.46L2472.91 42.553V66.457L2489.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2489.68 49.029L2492.24 71.474V47.4L2489.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2549.68 25.46L2529.67 10.693V26.371M2549.68 25.46L2566.81 8.098V24.768M2549.68 25.46L2547.67 2.821V24.777M2549.68 25.46L2576.07 23.45V47.39L2570.31 47.765M2549.68 25.46L2523.37 27.019L2523.43 50.964L2532.28 50.339",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2551.97 50.759L2569.78 64.726V39.606L2549.68 25.46L2532.56 42.252V66.142L2549.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2549.68 49.029L2551.77 71.515V47.333L2549.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2609.68 25.46L2589.92 10.392V25.937M2609.68 25.46L2627.12 8.31701V23.877M2609.68 25.46L2608.05 2.80701V23.983M2609.68 25.46L2636.14 23.888V47.744L2629.74 48.075M2609.68 25.46L2583.34 26.663L2583.38 50.526L2591.88 50.069",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2611.76 50.677L2629.29 63.873V40.071L2609.68 25.46L2592.23 42.074V65.971L2609.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2609.68 49.029L2611.33 71.542V47.305L2609.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2669.68 25.46L2650.26 10.242V25.778M2669.68 25.46L2687.45 8.56301V24.107M2669.68 25.46L2668.45 2.79401V24.457M2669.68 25.46L2696.14 24.161V48.127L2689.77 48.364M2669.68 25.46L2643.32 26.335L2643.33 50.253L2651.65 49.893",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2671.01 50.121L2689.05 63.9V40.235L2669.68 25.46L2651.95 41.828V65.698L2669.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2669.68 49.029L2670.93 71.556V47.387L2669.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2729.68 25.46L2710.5 9.982V25.512M2729.68 25.46L2747.69 8.782V24.307M2729.68 25.46L2728.87 2.78V24.433M2729.68 25.46L2756.14 24.49V48.236L2749.71 48.449M2729.68 25.46L2703.29 25.782V49.597L2711.26 49.45",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2730.41 49.695L2748.94 64.53V40.59L2729.68 25.46L2711.6 41.705V65.493L2729.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2729.68 49.029L2730.61 71.638V47.606L2729.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2789.68 25.46L2770.67 9.72201V25.286M2789.68 25.46L2807.94 9.00001V24.505M2789.68 25.46L2789.16 2.76601V24.416M2789.68 25.46L2816.14 24.763V48.673L2809.16 48.789M2789.68 25.46H2763.29V49.337L2771.24 49.269",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2790.41 49.7L2808.83 64.72V40.727L2789.68 25.46L2771.41 41.493V65.383L2789.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2789.68 49.029L2790.25 71.611V47.742L2789.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M89.6848 25.4603L108.309 41.4828V65.1065L89.6848 49.0293M89.6848 25.4603L70.5359 40.7925L70.5892 64.669L89.6316 49.0293M89.6848 25.4603L89.0273 47.9151V71.6481L89.6848 49.0839M89.6848 25.4603L63.4071 24.7588V48.5542L70.0911 48.6959M89.6848 25.4603L115.988 25.7611V49.5761L108.665 49.4467M89.6848 25.4603L71.3722 9.03792L71.2884 24.5988M89.6848 25.4603L108.796 9.74877V25.4474M89.6848 25.4603L90.293 2.75943V24.3785M89.6848 25.4603V49.1113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M149.676 25.4488L167.472 41.872L167.285 65.449L149.676 49.0179M149.676 25.4488L130.087 40.3914V64.2269L148.148 50.1661M149.676 25.4488L148.969 47.3567V71.6093L149.676 49.0725M149.676 25.4488L123.453 24.2184V47.9959L129.828 48.2643M149.676 25.4488L175.913 26.3511V50.1388L167.428 49.8028M149.676 25.4488L131.911 8.67098V24.5132M149.676 25.4488L169.243 10.0381V26.0706M149.676 25.4488L150.984 2.73438V24.3846M149.676 25.4488V49.0999",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})]}));KEe.displayName="Sequence";const YEe=f.memo(({lineThickness:e,...t})=>i.jsx("svg",{width:"60",height:"74",viewBox:"0 0 60 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:i.jsx("path",{d:"M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})}));YEe.displayName="Static";const ujt=e=>{switch(e){case"asIcon":return 4.7;case"normal":return 3.3}},j5=f.memo(({size:e=32,shouldAnimate:t=!0,lineThickness:n="asIcon",className:r})=>{const{_shouldAnimate:s,sequenceProps:a,staticProps:o}=yU({shouldAnimate:t,animationDuration:1,animationName:"animate-pplxIndicator"}),l=ujt(n);return i.jsx(A5,{size:e,className:r,aspectRatio:60/74,children:s?i.jsx(KEe,{lineThickness:l,...a}):i.jsx(YEe,{lineThickness:l,...o})})});j5.displayName="MarkSpinner";const QEe=Object.freeze(Object.defineProperty({__proto__:null,MarkSpinner:j5},Symbol.toStringTag,{value:"Module"})),iR=f.memo(({type:e,size:t,shouldAnimate:n,className:r})=>f.useMemo(()=>{switch(e){case"research":return i.jsx(HEe,{size:t,shouldAnimate:n,className:r});case"labs":return i.jsx(qEe,{size:t,shouldAnimate:n,className:r});default:return i.jsx(j5,{size:t,shouldAnimate:n,className:r})}},[e,t,n,r]));iR.displayName="SearchModeLoader";const vU=A.memo(({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:o="default"})=>{const[l,c]=f.useState(!1),u=a?l:r;return A.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:U({shimmer:u&&o==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&o==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)});vU.displayName="Shimmer";const XEe=A.memo(({count:e=3,variant:t="default",className:n})=>{const r="clip-path-small-shimmer",s="clip-path-default-shimmer",a=t==="small"?12:14;return i.jsxs(i.Fragment,{children:[i.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:i.jsx("defs",{children:i.jsx("clipPath",{id:s,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z",fill:"#D9D9D9"})})})}),i.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:i.jsx("defs",{children:i.jsx("clipPath",{id:r,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z",fill:"#D9D9D9"})})})}),i.jsx("div",{className:U("gap-xs relative flex shrink-0 items-center",n),children:i.jsx("div",{className:"ml-xs flex",children:Array.from({length:e}).map((o,l)=>i.jsx("div",{className:U("relative z-0 shrink-0",{"-ml-[5px]":t==="default"},{"-ml-xs":t==="small"}),style:{width:a,height:a,...l!==e-1?{clipPath:`url(#${t==="small"?r:s})`}:{}},children:i.jsx(vU,{as:"div",className:"bg-offsetPlus size-full rounded-full"})},l))})})]})});XEe.displayName="CitationPileShimmer";const ZEe=40,xU=(e,t)=>U("relative flex items-center gap-1.5",{"border-subtlest bg-subtler border rounded-full px-3 py-2":t,"border border-super/20 bg-super/10 dark:bg-super/10 focus:bg-super/20 focus:border-super/30 text-super":e&&t}),JEe=()=>{const{isMobileUserAgent:e}=ye();return e?16:18},e3e=f.memo(({modeList:e,isSticky:t,inFlight:n,accessoryProps:r,accessory:s,defaultModeOverride:a,tabsPlaceholder:o})=>{const{result:{query_str:l,uuid:c,collection_info:{uuid:u}={},backend_uuid:d,context_uuid:m,frontend_context_uuid:p,display_model:h,attachments:g},selectedRefinementQuery:y,selectedPillIndices:v,userClarifications:x,editQueryValue:b}=bn(),{topSources:_}=BEe({dedupeAttachments:!1}),{submitQuery:w}=Oa(),C=Rc(),{isMobileUserAgent:S}=ye(),{refinementFilters:E,handleResetClick:M,handleApplyClickDefaultMode:k,handleApplyClickAnswerMode:T,handlePillClickAnswerMode:j,isRefinementLoading:R}=sjt(),[O,P]=f.useState(!1),N=y||l,I=f.useMemo(()=>N?j3(hc(N,x).actualQuery):"",[N,x]),{updateCurrentMode:D}=pU(),{currentModeData:{mode:F}}=Ix(),{trackEvent:B}=Me(),[V,$]=f.useState(!1);f.useEffect(()=>{M(),P(!1)},[F,M]);const{isMax:G}=yt(),X=rn(),{variation:Y}=sxe(!1),W=G&&h==="comet_max_assistant"&&X&&Y,[H,Z]=f.useState(null),re=f.useCallback(ue=>{const ie=ue.mode==="search";w({rawQuery:b,existingEntryUUID:d,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:C?void 0:p,promptSource:"user",querySource:ie?"search-mode":"chat-mode",attachments:g,modelPreferenceOverride:h,...ie?{alwaysSearchOverride:!0}:{overrideNoSearch:!0}}),Z(null)},[w,b,d,C,p,g,h]),{terminateEntry:q}=LEe({entryUUID:d||"",reason:H?.mode==="search"?"search-answer-mode":"chat-answer-mode",callback:f.useCallback(()=>{H&&re(H)},[H,re])}),J=f.useCallback(ue=>{ue.mode==="search"||ue.mode==="chat"?(d&&n?(Z(ue),q()):re(ue),B("answer mode tab selected",{answerMode:ue.mode,entryUUID:d,contextUUID:m})):(D(ue.mode),ue.mode!=="default"&&r?.isOpen&&r.onClick())},[D,r,d,m,B,n,q,Z,re]),te=f.useMemo(()=>e.find(ie=>ie.mode==="default"),[e]),se=f.useMemo(()=>e.filter(ue=>ue.mode!=="default"&&ue.mode!==a),[e,a]),de=f.useCallback(()=>{te&&J(te)},[J,te]),fe=f.useCallback(ue=>{F!==ue.mode&&J(ue)},[J,F]);f.useEffect(()=>{let ue=null;const ie=Se=>{Se.metaKey&&Se.shiftKey&&!ue&&(ue=setTimeout(()=>{$(!0)},500))},be=Se=>{(!Se.metaKey||!Se.shiftKey)&&(ue&&(clearTimeout(ue),ue=null),$(!1))};return document.addEventListener("keydown",ie),document.addEventListener("keyup",be),()=>{ue&&clearTimeout(ue),document.removeEventListener("keydown",ie),document.removeEventListener("keyup",be)}},[]);const ve=f.useCallback(()=>P(!0),[]);return i.jsxs(xe.div,{layout:!0,layoutRoot:!0,"data-testid":Bs.ANSWER_MODE_TABS_ROOT,children:[i.jsx("div",{className:U("max-w-threadContentWidth mx-auto flex w-full items-end ease-out will-change-auto",{"opacity-100":t,"pointer-events-none opacity-0":!t}),style:{height:ZEe},children:i.jsx(L,{variant:"section-title",className:U("erp-sidecar:line-clamp-1 hidden translate-y-px",{"@[1056px]/main:md:!line-clamp-1":!!u,"@[900px]/main:md:!line-clamp-1":!u}),children:I})}),i.jsx(z,{className:U("relative",{"border-b":!S,"pt-sm":S}),children:i.jsx("div",{className:"-mx-md px-md scrollbar-none -my-px overflow-x-auto overflow-y-hidden py-px",children:i.jsxs("div",{className:"table w-full",children:[i.jsx("div",{className:U("inset-x-sm top-md absolute bottom-0 shadow-md will-change-[opacity]",{"opacity-0":!t,"opacity-30":t})}),i.jsx(z,{variant:"background",className:"gap-xs relative",children:i.jsxs("div",{className:"relative flex gap-1.5",children:[i.jsx("div",{className:"md:max-w-threadContentWidth md:mx-auto md:w-full",children:i.jsxs("div",{className:U("-mx-sm grid grid-cols-1 grid-rows-1",{"-mx-0":S}),children:[!te&&i.jsx(r3e,{}),i.jsxs("div",{className:"gap-xs relative col-start-1 row-start-1 flex",children:[te&&i.jsx(n3e,{tab:te,active:F===te.mode||!!a&&F==a,onClick:de,id:c??"",inFlight:n,testId:te.testId,isScreenshotting:V,isCometMaxAssistantAnswer:W}),i.jsxs(it,{initial:!1,children:[se.map(ue=>i.jsx(bU,{text:ue.text,active:F===ue.mode,onClick:fe,mode:ue,icon:ue.icon,id:c??"",count:ue.count,inFlight:n,disabled:ue.disabled,testId:ue.testId,loading:ue.loading,...ue.mode==="sources"&&{sources:_}},ue.text)),i.jsx("div",{className:"flex-1"}),E&&E.length>0&&i.jsx(t3e,{onClick:ve})]})]}),se.length===0&&o]})}),i.jsx("div",{className:"right-0 flex items-center md:absolute md:top-1/2 md:-translate-y-1/2",children:s})]})})]})})}),E&&E.length>0&&i.jsx(DEe,{refinementFilters:E,handlePillClick:j,selectedIndices:v,isOpen:O,setIsOpen:P,handleResetClick:M,handleApplyClick:F==="default"?k:T,isLoading:R})]})});e3e.displayName="AnswerModeTabs";const t3e=f.memo(({onClick:e})=>{const{isMobileUserAgent:t}=ye(),{$t:n}=Q();return i.jsxs("button",{className:U("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":t,"py-md pl-sm pr-2.5":!t}),onClick:e,type:"button","aria-label":"Filters",children:[i.jsx(z,{variant:"subtler",className:U("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),i.jsxs("div",{className:xU(!1,t),children:[i.jsx("div",{className:"relative flex h-[16px] w-auto items-center",children:i.jsx("div",{className:"flex size-[16px] items-center justify-center",children:i.jsx(me,{icon:UR,size:t?"sm":"xs",className:U("text-foreground opacity-80 duration-100 sm:block",{"group-hover:opacity-100":!t})})})}),i.jsx("div",{className:U("flex items-center",{"h-4":t}),children:i.jsx(L,{className:U("text-foreground whitespace-nowrap font-medium opacity-80 duration-150",{"text-xs":t,"text-sm":!t},!t&&"group-hover:opacity-100"),children:n({defaultMessage:"Filters",id:"zSOvI0LO0n"})})})]})]})});t3e.displayName="FiltersTab";const n3e=f.memo(({tab:e,active:t,onClick:n,id:r,inFlight:s,testId:a,isCometMaxAssistantAnswer:o,isScreenshotting:l})=>{const{hasAnswer:c,isAnswerSkipped:u}=bn(),{isMobileUserAgent:d}=ye(),m=f.useCallback(y=>l?"Perplexity":o?i.jsxs("div",{className:"flex items-center gap-2",children:[y,i.jsx(cx,{className:"text-max h-2.5"})]}):y,[l,o]),p=f.useMemo(()=>{switch(e.text.toLowerCase()){case"research":return"research";case"labs":return"labs";default:return"default"}},[e.text]),h=JEe(),g=U("text-foreground duration-100 group-hover:opacity-100",{"opacity-80":!t,"text-super":t&&d});return i.jsxs(xe.button,{className:U("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1":d,"py-md pl-sm pr-2.5":!d}),onClick:n,type:"button","aria-label":e.text,"data-testid":a,children:[i.jsx(z,{variant:"subtler",className:U("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),i.jsxs("div",{className:xU(t,d),children:[i.jsx("div",{className:"relative flex size-4 items-center justify-center",children:i.jsx(it,{mode:"wait",initial:!1,children:!c&&!u?i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:e.icon?{opacity:0}:void 0,transition:{duration:.15},children:i.jsx(iR,{type:p,size:h,shouldAnimate:!0,className:g})},"spinner"):e.icon?i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:i.jsx(me,{icon:e.icon,size:d?"sm":"xs",className:g})},`icon-${e.text}`):i.jsx(xe.div,{children:i.jsx(iR,{type:p,size:h,shouldAnimate:!1,className:g})},"empty-spinner")})}),i.jsxs("div",{className:"relative",children:[i.jsx(it,{initial:!1,mode:"wait",children:i.jsx(xe.div,{className:"absolute whitespace-nowrap",initial:c?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},exit:c?{opacity:0}:{opacity:0,y:-20},transition:{duration:l?0:c?.15:.3},children:i.jsx(L,{className:U("text-foreground whitespace-nowrap font-medium duration-150 group-hover:opacity-100",{"text-xs":d,"text-sm":!d,"opacity-80":!t,"text-super":t&&d}),children:m(e.text)})},`text-${e.text}`)}),i.jsx("div",{className:"invisible",children:i.jsx(L,{className:U("text-foreground whitespace-nowrap",{"text-xs font-medium":d,"text-sm font-[475]":!d}),children:m(e.text)})})]})]}),t&&i.jsx(_U,{id:r,inFlight:s,isScreenshotting:l})]})});n3e.displayName="StaticTabWithAnimatedContent";const r3e=f.memo(()=>{const e=f.useMemo(()=>({mode:"default",text:"placeholder",count:0,disabled:!1,icon:void 0,loading:!1,testId:"placeholder",id:"d"}),[]);return i.jsx("div",{className:"pointer-events-none invisible col-start-1 row-start-1 opacity-0",role:"none",children:i.jsx(bU,{text:"placeholder",active:!1,onClick:Rn,mode:e,icon:void 0,id:"placeholder",count:0,inFlight:!1,disabled:!1,testId:"placeholder",loading:!1},"placeholder")})});r3e.displayName="PlaceholderTab";const bU=f.memo(({text:e,active:t,mode:n,onClick:r,icon:s,id:a,count:o,inFlight:l,disabled:c,testId:u,loading:d,sources:m})=>{const{isMobileUserAgent:p}=ye(),h=f.useCallback(()=>{r(n)},[r,n]),g=!p&&o!==void 0&&o>0;return i.jsxs("button",{className:U("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":p,"py-md pl-sm pr-2.5":!p}),onClick:h,type:"button","aria-label":e,disabled:c,"data-testid":u,children:[i.jsx(z,{variant:"subtler",className:U("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t&&!c&&!p})}),i.jsxs("div",{className:xU(t,p),children:[i.jsx("div",{className:"relative flex h-[16px] w-auto items-center",children:i.jsx(s3e,{icon:s,loading:d,active:t,disabled:c,mode:n,sources:m})}),i.jsxs("div",{className:U("flex items-center",{"h-4":p}),children:[i.jsx(L,{className:U("text-foreground whitespace-nowrap font-medium duration-150",{"text-xs":p,"text-sm":!p,"text-super":t&&p},!c&&!p&&"group-hover:opacity-100",c?"opacity-50":!t&&"opacity-80"),children:e}),g&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"px-xs ml-px leading-none opacity-35",children:""}),i.jsx(VEe,{count:o,className:U(c?"opacity-40":"opacity-65")})]})]})]}),t&&i.jsx(_U,{id:a,inFlight:l})]})});bU.displayName="AnswerModeTab";const _U=f.memo(({id:e,inFlight:t,isScreenshotting:n})=>{const{isMobileUserAgent:r}=ye();return i.jsx(xe.div,{className:U("bg-inverse inset-x-sm absolute -bottom-px h-[2.5px]",{hidden:r}),transition:{duration:n?0:.1,ease:"easeOut"},layoutId:t?void 0:`answer-mode-tab-underline-${e}`})});_U.displayName="Underline";const djt=({sources:e})=>{const{isEntryInFlight:t}=bn();return e?.length?i.jsx(OF,{sources:e,count:3,variant:"small"}):t?i.jsx(XEe,{count:3,variant:"small"}):null},s3e=({icon:e,loading:t,active:n,disabled:r,mode:s,sources:a})=>{const{isMobileUserAgent:o}=ye(),l=JEe();return s.mode==="sources"?i.jsx("div",{className:"w-max flex-none",children:i.jsx(djt,{sources:a})}):i.jsx("div",{className:"flex size-[16px] items-center justify-center",children:e?t?i.jsx(as,{size:l}):i.jsx(me,{icon:e,size:o?"sm":"xs",className:U("text-foreground duration-100 sm:block",{"group-hover:opacity-100":!r&&!o,"text-super":n&&o},r?"opacity-50":!n&&"opacity-80")}):i.jsx(j5,{size:l,shouldAnimate:!1,className:U("text-foreground duration-100",{"group-hover:opacity-100":!r&&!o,"opacity-80":!n,"text-super":n&&o})})})};s3e.displayName="AnswerModeIcon";const dp=A.memo(({...e})=>i.jsx(xe.div,{className:"ml-auto flex items-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:i.jsx(Te,{...e,extraCSS:"!py-md [&_*]:!font-regular hover:!bg-subtler shrink-0 whitespace-nowrap rounded-md",size:"tiny"})}));dp.displayName="AnswerModeTabsAccessory";const a3e=f.memo(({submitQuery:e,isFirstResult:t})=>{const{$t:n}=Q(),{inFlight:r,editQueryValue:s,isEditingQuery:a,isFailed:o,userClarifications:l,selectedRefinementQuery:c,result:{uuid:u,query_str:d,backend_uuid:m,frontend_context_uuid:p,display_model:h,attachments:g,side_by_side_metadata:y,user_selected_model:v,sources:x},actions:{setEditQueryValue:b,setIsEditingQuery:_}}=bn(),w=Rc(),C=Oo(),{trackEvent:S}=Hh(),{isMobileStyle:E}=ye(),{openModal:M}=vt(),[k,T]=f.useState(!1),j=c??d,R=f.useCallback(()=>{b(j??""),_(!1),m&&S("cancel edit query click",{entryUUID:m})},[m,j,b,_,S]),O=f.useRef(null),P="editable-thread-title",{updateCurrentMode:N}=pU();_1("thread-title",{skip:!t}),f.useEffect(()=>{r&&_(!1)},[_,r]);const I=f.useCallback(()=>{p?(s!==j&&e({rawQuery:s,existingEntryUUID:m,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:w?void 0:p,promptSource:"user",querySource:"edit",attachments:g,modelPreferenceOverride:h,sourcesOverride:bA(x?.sources)}),_(!1),N("default")):ee.warn(new Error(`No frontend UUID for thread backendUUID=${m}`))},[m,p,w,s,j,g,x,h,e,_,N]),{terminateEntry:D,isTerminating:F}=LEe({entryUUID:m,reason:P,callback:I}),B=f.useCallback(()=>{C&&D()},[C,D]),V=f.useCallback(()=>{C&&(S("confirm edit query click",{entryUUID:m??"",newQuery:s}),p?I():ee.warn(new Error(`No frontend UUID for thread backendUUID=${m}`)))},[C,m,p,I,S,s]),$=Z1(),G=f.useCallback(()=>{r?B():V()},[r,B,V]),X=f.useCallback(de=>{So.isEnterKeyWithoutShift(de)?(de.preventDefault(),G()):So.isEscapeKey(de)&&R()},[G,R]),{quote:Y,actualQuery:W}=hc(j,l),H=f.useCallback(()=>{b(W??""),_(!0)},[b,W,_]),Z=f.useCallback(de=>{de.preventDefault(),navigator.clipboard.writeText(j??"")},[j]),re=s==="",q=!!C,J=un.hasUnspecifiedSelectionStatus(y),te=f.useMemo(()=>({maskImage:"linear-gradient(to bottom, black 50%, transparent)"}),[]),se=f.useCallback(()=>{M("taskShortcutModal",{source:"thread_create",shortcut:{prompt:j??"",searchModel:v??JO,sources:bA(x?.sources)}})},[M,j,v,x]);return i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"mb-xs group relative flex items-end gap-0.5 pt-6",children:[i.jsx("div",{className:"-inset-md absolute select-none"}),i.jsx("div",{className:"md:mr-xl min-w-0 flex-1",children:a?i.jsx(mjt,{onKeyDown:X,editQueryValue:s,setEditQueryValue:b,isEmptyQuery:re,inputRef:O}):i.jsx(i3e,{queryString:W??"",isFirstResult:t,isFailed:o,quote:Y,setInitialized:T,initialized:k},u)}),q&&i.jsx("div",{className:"absolute bottom-0 right-0 flex shrink-0",children:i.jsx("div",{"data-testid":"edit-query-button-group",className:U("bg-base mb-xs shadow-subtle border-subtlest relative flex shrink-0 flex-row rounded-[10px] border p-[1.5px] duration-150 group-hover:pointer-events-auto group-hover:opacity-100",{"pointer-events-none opacity-0":!a,"pointer-events-auto opacity-100":a||F}),children:a?E?null:i.jsxs(i.Fragment,{children:[i.jsx(ge,{toolTip:n({defaultMessage:"Save and rewrite answer",id:"J0SzInCu9R"}),icon:Rr,size:"tiny",variant:"primary",onClick:G,extraCSS:"shrink-0",testId:"confirm-edit-query-button",disabled:F,isLoading:F}),i.jsx("div",{className:"m-[1.5px] w-px border-r border-transparent"}),i.jsx(ge,{icon:Lt,size:"tiny",variant:"common",extraCSS:"!bg-base !text-quiet hover:!bg-subtler shrink-0",onClick:R,testId:"cancel-edit-query-button",disabled:F})]}):i.jsxs(i.Fragment,{children:[i.jsx(ge,{icon:wc,size:"tiny",variant:"common",onClick:H,disabled:J,extraCSS:U("!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-r-[2px]"),testId:"edit-query-button",toolTip:n({defaultMessage:"Edit Query",id:"b3OoXBV5TQ"})}),i.jsx(z,{className:"m-[1.5px] w-px border-r"}),i.jsx(ge,{icon:pTe,size:"tiny",variant:"common",extraCSS:U("!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-l-[2px]",{"!rounded-r-[2px]":$}),onClick:Z,testId:"copy-query-button",toolTip:n({defaultMessage:"Copy Query",id:"pLS6m4WFYK"}),clickFeedback:!0}),$&&i.jsxs(i.Fragment,{children:[i.jsx(z,{className:"m-[1.5px] w-px border-r"}),i.jsx(ge,{icon:$C,size:"tiny",variant:"common",extraCSS:"!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-l-[2px]",onClick:se,testId:"save-as-shortcut-button",toolTip:n({defaultMessage:"Save query as shortcut",id:"iOwvGHWuK/"}),clickFeedback:!0})]})]})})})]}),a&&E&&i.jsxs("div",{className:"gap-x-sm mb-sm pb-sm -inset-x-xs absolute top-full mt-[12px] flex justify-end",children:[i.jsx(z,{className:"-inset-lg -top-sm absolute",variant:"background",style:te}),i.jsx(ge,{size:"small",variant:"border",onClick:R,text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),extraCSS:"!bg-base",disabled:F}),i.jsx(ge,{size:"small",variant:"primary",onClick:G,text:n({defaultMessage:"Done",id:"JXdbo8Vnlw"}),disabled:F,isLoading:F})]})]})});a3e.displayName="EditableThreadTitle";const lR=144,o3e=A.memo(({queryString:e="",className:t="",quote:n,isFirstResult:r,isFailed:s,setInitialized:a,initialized:o})=>{const{$t:l}=Q(),[c,u]=f.useState(!1),[d,m]=f.useState(!1),p=f.useRef(null),h=f.useMemo(()=>{const v=j3(e);return v.length<75?"entry-title-100":v.length<200?"entry-title-200":"entry-title-300"},[e]);f.useEffect(()=>{typeof window>"u"||!p.current||p.current.getBoundingClientRect().height>lR&&!d&&m(!0)},[d,o]);const g=f.useCallback(()=>{u(!c)},[c]),y=f.useCallback(()=>{a(!0)},[a]);return i.jsxs("div",{className:"group/title relative inline-flex flex-col",children:[n&&i.jsxs(L,{variant:"small",color:"light",className:"border-super bg-subtlest px-sm mb-2 flex items-center border-l-2 py-1.5",children:[i.jsx(hTe,{size:18,className:"text-super mr-sm shrink-0 -translate-y-px rotate-180"}),i.jsx("span",{className:"line-clamp-1",children:n})]}),i.jsx("div",{className:"overflow-hidden",children:i.jsxs(fjt,{isTruncated:d,isExpanded:c,children:[i.jsx(L,{variant:h,as:r?"h1":"div",ref:p,className:U("group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word]",t),children:s?i.jsx("div",{className:"gap-x-sm flex items-center",children:i.jsx("span",{children:e?i.jsx(PC,{editQueryValue:e,disabled:!0}):l({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})})}):i.jsx(PC,{editQueryValue:e,disabled:!0,onChange:y})}),i.jsx("div",{className:U("text-inverse pointer-events-none absolute inset-x-0 bottom-0 h-1/4 transition-opacity duration-100",{"opacity-0":c}),style:{background:!c&&d?"linear-gradient(transparent, currentColor)":void 0}})]})}),d&&i.jsx("div",{className:"top-xs relative flex",children:i.jsx(Te,{size:"tiny","data-testid":"toggle-query-expand-button",extraCSS:"-mt-0.5 -ml-sm",chevron:!0,chevronIcon:c?YC:Qn,onClick:g,text:c?l({defaultMessage:"Show less",id:"qyJtWyZ0yt"}):i.jsx(pe,{defaultMessage:"Show more",id:"kgNFsmh2uY",description:"Show more of the query."})})})]})});o3e.displayName="DisplayQueryBase";const i3e=f.memo(o3e);i3e.displayName="DisplayQuery";const fjt=({children:e,isTruncated:t,isExpanded:n})=>t?i.jsx(Uo,{transition:{duration:.2,ease:hn},initial:!1,mode:"popLayout",supportZeroHeight:!1,children:i.jsx(so,{className:"overflow-hidden",style:{maxHeight:n?void 0:lR},children:e})}):i.jsx("div",{style:{maxHeight:lR},children:e}),l3e=(e,t)=>{const n=j3(e);return n.length<75?U("font-display text-2xl md:text-3xl font-semimedium",{"translate-y-[1px]":!t}):n.length<200?"font-display text-xl font-medium":"font-sans font-medium"},mjt=({onKeyDown:e,editQueryValue:t,setEditQueryValue:n,isEmptyQuery:r,inputRef:s})=>{const a=f.useCallback(o=>{n(o)},[n]);return i.jsxs("div",{className:"relative w-full min-w-0",children:[i.jsx("div",{className:"-inset-y-xs -left-sm border-subtlest bg-subtlest -right-sm md:-right-md absolute rounded-md border"}),i.jsxs("div",{className:"relative grid",children:[i.jsx(PC,{onKeyDown:e,editQueryValue:t,onChange:a,inputRef:s}),i.jsx("div",{className:U("pointer-events-none col-start-1 row-start-1 opacity-0",l3e(t)),children:r?i.jsx(i.Fragment,{children:""}):i.jsx(PC,{editQueryValue:t,disabled:!0})})]})]})},PC=({onKeyDown:e=Rn,editQueryValue:t,disabled:n,onChange:r=Rn,inputRef:s})=>{const{$t:a}=Q(),{isMobileUserAgent:o}=ye();return i.jsx("div",{className:U("text-foreground block h-auto w-full resize-none appearance-none overflow-hidden bg-transparent focus:outline-none","caret-super selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super",l3e(t,n),"[&_[contenteditable]]:!font-display [&_[contenteditable]]:!bg-transparent","[&_[contenteditable]]:max-h-none [&_[contenteditable]]:!overflow-hidden [&_[contenteditable]]:sm:max-h-none [&_[contenteditable]]:lg:max-h-none","[&_[contenteditable]+*>*]:opacity-50","[&>*]:p-0"),style:{gridArea:"1/-1"},children:i.jsx(eF,{onKeyDown:e,placeholder:a({defaultMessage:"Ask anything",id:"AUouhaZgFv"}),value:t,onChange:r,minRows:0,isMobileStyle:!1,isMobileUserAgent:o,useLexical:!0,autoFocus:!0,disableInput:n,ref:s})})},pjt=({trackEvent:e,entryUUID:t,frontendContextUUID:n,contextUUID:r})=>f.useCallback((s,a)=>{e(s,{entryUUID:t,frontendContextUUID:n,contextUUID:r,...a})},[t,n,r,e]),hjt=({webResults:e})=>Po(t=>({isShowing:!1,webResults:e,actions:{hide:()=>t({isShowing:!1}),show:n=>t({...n,isShowing:!0})}})),{Context:gjt,useTrackedState:yjt}=f1("SourcesList"),c3e=f.memo(({children:e,webResults:t})=>{const[n]=A.useState(()=>hjt({webResults:t}));return f.useEffect(()=>{n.setState({webResults:t})},[t,n]),i.jsx(gjt.Provider,{value:n,children:e})});c3e.displayName="SourcesListProvider";const vjt=yjt,u3e=({webResults:e,navigationResults:t=[],isStudyMode:n=!1})=>{if(!e)return{dedupedWebResults:[],hasSufficientTrendingRatio:!1,trendingResults:[],trendingResultsWithImages:[]};const r=yE.dedupWebResults(e,t,n),s=r.filter(u=>u.meta_data?.client==="trending"),o=r.slice(0,10).filter(u=>u.meta_data?.client==="trending"),l=o.length>=3,c=o.filter(u=>u.meta_data?.images?.[0]).slice(0,3);return{dedupedWebResults:r,hasSufficientTrendingRatio:l,trendingResults:s,trendingResultsWithImages:c}},xjt=({webResults:e,navigationResults:t=[],isStudyMode:n=!1,isMobileStyle:r})=>{if(!r||!e)return!1;const{hasSufficientTrendingRatio:s,trendingResultsWithImages:a}=u3e({webResults:e,navigationResults:t,isStudyMode:n});return s&&a.length>=3},d3e=A.memo(({urlData:e,handleClick:t,...n})=>{const r=f.useMemo(()=>{const{url:p,snippet:h}=e;if("title"in e){const y=e;return{url:p,title:y.title,snippet:h,domain:y.domain||Zs(p)}}return{url:p,title:e.name,snippet:h,domain:Zs(p)}},[e]),{url:s,title:a,snippet:o,domain:l}=r,c=f.useMemo(()=>l.replace(/^www\./,"").split(".")[0],[l]),u=f.useMemo(()=>w1(s),[s]),d=f.useMemo(()=>p=>()=>{},[]),m=t||d;return i.jsx("div",{className:"p-sm border-t-subtlest last:border-b-subtlest -mx-4 flex grow flex-col border-t px-4 last:border-b [&:only-child]:border-0",children:i.jsxs(Ye,{className:"gap-sm border-t-subtlest group flex cursor-pointer flex-col items-stretch",href:s,target:"_self",onClick:m(s,"primaryLink"),rel:"noopener",...n,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fl,{size:24,domain:u,className:"flex-shrink-0 rounded-full"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{variant:"small",className:"line-clamp-1 break-all",children:c}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"line-clamp-1 break-all",children:s})]})]}),i.jsxs("div",{children:[i.jsx(L,{className:"line-clamp-1 break-all",variant:"base",children:a}),i.jsx(L,{variant:"small",color:"light",className:"line-clamp-2 break-all",children:o})]})]},s)})});d3e.displayName="MobileUrlCard";const ud={lastEntryUUID:null,loggedUrls:new Set,seenEntries:new Set};function bjt(e){if(e)return[{...e,url:e?.url,title:e?.name,snippet:e?.snippet,sitelinks:e?.sitelinks?.map(t=>({url:t.url,title:t.title}))}]}const R5=A.memo(({navigationResult:e,trackEvent:t,queryString:n,entryUUID:r,frontendUUID:s,onClick:a,showSiteLinks:o=!1,showNewMobileCard:l=!1,...c})=>{const{url:u,title:d,snippet:m,sitelinks:p,position:h,source:g,client_request_timestamp:y,unstable_server_request_timestamp:v,is_cached:x,is_comet_navigation:b}=e,{isMobileStyle:_}=ye(),w=f.useMemo(()=>w1(u),[u]),C=f.useMemo(()=>QA(u),[u]);f.useEffect(()=>{if(!r||!u)return;const E=ud.seenEntries.has(r);ud.lastEntryUUID!==r&&(ud.lastEntryUUID=r,ud.loggedUrls.clear()),ud.loggedUrls.has(u)||(ud.loggedUrls.add(u),ud.seenEntries.add(r),t("navigational source viewed",{query:n,url:u,title:d,...o&&{subLinks:p},position:h,source:g,is_comet_navigation:b,frontendUUID:s,...typeof y=="number"&&!E&&{renderTimeMs:performance.now()-y},...typeof v=="number"&&!E&&{unstableRenderTimeMs:performance.now()-v},isCached:x}))},[r,u,n]);const S=f.useCallback((E,M)=>k=>{t("click citation",{source:"navigationalCard",navigationalLinkType:M,citation_url:E,is_comet_navigation:b,frontendUUID:s}),a?.(k)},[b,t,a,s]);return _&&l?i.jsx(d3e,{urlData:e,handleClick:S,...c}):i.jsx("div",{className:"gap-sm flex",children:i.jsx("div",{className:"grow",children:i.jsxs(z,{variant:"transparent",className:"flex grow flex-col rounded-lg",children:[i.jsx(Ye,{className:"group flex cursor-pointer items-stretch",href:u,target:"_self",onClick:S(u,"primaryLink"),rel:"noopener",...c,children:i.jsxs(z,{className:"pr-md group",children:[i.jsxs("div",{className:"mb-xs flex items-center gap-1.5",children:[i.jsx(fl,{size:18,domain:w,className:"flex-shrink-0 rounded-full"}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"line-clamp-1 break-all",children:C})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{variant:"baseSemi",color:"super",className:"decoration-1 underline-offset-1 group-hover:underline",children:d}),i.jsx(L,{variant:"small",color:"light",className:"mb-two line-clamp-2",children:m})]})]})},u),p&&p.length>0&&o&&i.jsx(L,{variant:"small",color:"light",className:"pt-two pb-sm",children:i.jsx(gc,{className:"flex-wrap",children:p.map(E=>i.jsx(br,{id:E.url,children:i.jsx(Ye,{className:"group flex cursor-pointer items-stretch",href:E.url,onClick:S(E.url,"siteLink"),rel:"noopener",...c,children:i.jsx(L,{variant:"small",color:"super",className:U("decoration-1 underline-offset-1 group-hover:underline"),children:E.title})})},E.url))})})]})})})});R5.displayName="CitationNavigationalCard";const _jt=({entry:e,webResults:t,showSourcesSidebar:n,submit:r,allowedNavResultsCount:s,isFirstResult:a,enableMobileCalculations:o=!1,...l})=>{const{trackEvent:c}=Me(),{trackEvent:u}=Hh(),{openModal:d}=vt(),m=Oo(),p=vjt(),{isMobileStyle:h}=ye(),g=f.useMemo(()=>"searchMode"in l&&l.searchMode===oe.SEARCH,[l]),y=f.useMemo(()=>t?.filter(I=>I.is_navigational)?.flatMap(I=>bjt(I)||[]),[t]),{data:v}=mBe(e?.query_str??""),x=f.useMemo(()=>v?.navigation_results?.map(I=>({...I,is_cached:!0}))??y?.map(I=>({...I,is_cached:!1})),[v,y]),b=f.useMemo(()=>x?.slice(0,s),[x,s]),_=b?.length&&a&&!g,w=f.useMemo(()=>un.isPerplexityMessage(e)?e?.display_model==="pplx_study":!1,[e]),C=f.useMemo(()=>u3e({webResults:t,navigationResults:b,isStudyMode:w}),[t,b,w]),{dedupedWebResults:S,hasSufficientTrendingRatio:E,trendingResults:M,trendingResultsWithImages:k}=C,T=f.useMemo(()=>!o||!h?[]:k,[o,h,k]),j=f.useMemo(()=>o?h&&E&&k.length>=3:!1,[o,h,E,k.length]),R=f.useMemo(()=>un.isPerplexityMessage(e)?e?.blocks?.some(I=>I.intended_usage==="answer_media_items"):!1,[e]),O=f.useMemo(()=>!_&&!R&&E,[_,R,E]),P=f.useCallback(()=>{if(e?.backend_uuid){const I=n?"sidebar":"modal";u("click view sources button",{entryUUID:e.backend_uuid,type:p.isShowing?void 0:I})}n?p.actions.show({webResults:t}):d("citationListModal",{webResults:t,entry:e,submit:m?r:void 0})},[e?.backend_uuid,d,m,n,p.isShowing,p.actions.hide,r,u,t?.length]),N=pjt({trackEvent:c,entryUUID:e?.backend_uuid,frontendContextUUID:e?.uuid,contextUUID:e?.context_uuid});return f.useMemo(()=>({isNavigationalLayout:_,navigationResults:b,trackCitationClickEvent:N,handleViewAllClick:P,dedupedWebResults:S,isTrendingLayout:O,trendingResults:M,trendingResultsWithImages:T,showTrendingInMobile:j}),[S,P,_,O,b,j,N,M,T])},f3e=({target:e,entryUUID:t,frontendContextUUID:n,targetVisibilityPortionThreshold:r=.5,hasLLMToken:s})=>{const a=f.useRef(null),o=f.useRef(null),l=f.useRef(!1),{trackEvent:c}=Me(),{result:u}=bn(),d=f.useRef(u);f.useEffect(()=>{d.current=u},[u]);const m=f.useCallback(()=>{if(a.current){const h=Math.round(performance.now()-a.current);c("thread entry exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:h}),a.current=null}if(o.current){const h=d.current;h&&Er(h.display_model)==oe.STUDIO&&un.isStatusPending(h)&&c("answer processing exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:Math.round(performance.now()-o.current)}),o.current=null}},[c,t,n]),p=f.useCallback(()=>{s&&(a.current=performance.now()),o.current||(o.current=performance.now())},[s]);return f.useEffect(()=>{const h=new IntersectionObserver(y=>{y.forEach(v=>{l.current=v.isIntersecting,v.isIntersecting&&document.visibilityState==="visible"?p():m()})},{threshold:r}),g=e.current;return g&&h.observe(g),()=>{g&&h.unobserve(g),m()}},[e,r,p,m]),f.useEffect(()=>{const h=()=>{document.visibilityState==="hidden"?m():document.visibilityState==="visible"&&l.current&&p()};return document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h)}},[p,m]),f.useEffect(()=>{const h=()=>{l.current&&a.current&&m()};return window.addEventListener("beforeunload",h),()=>{window.removeEventListener("beforeunload",h)}},[m]),null},wjt={"nav-card":!1,"nav-links-bottom-position":!1,"news-carousel":!1,"primary-card":!1},m3e=A.memo(({navigationResult:e,trackEvent:t})=>{const{url:n,snippet:r,domain:s,sitelinks:a=[],site_name:o}=e,l=f.useMemo(()=>(s||Zs(n)).replace(/\.[^.]*$/,""),[s,n]),c=f.useMemo(()=>w1(n),[n]),{$t:u}=Q(),d=f.useCallback(m=>{m.preventDefault(),t("click citation",{type:"primaryLink",...e})},[t,e]);return i.jsxs(z,{className:"p-md border-subtler mb-md rounded-xl border",variant:"subtler",children:[i.jsxs(Ye,{className:"gap-sm border-t-subtlest group flex cursor-pointer flex-col items-stretch",href:n,target:"_self",onClick:d,rel:"noopener",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fl,{size:32,domain:c,className:"flex-shrink-0 rounded-full"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(L,{variant:"smallBold",className:"line-clamp-1 break-words",children:o??l}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"line-clamp-1 break-words",children:n})]})]}),i.jsx("div",{children:i.jsx(L,{variant:"small",className:"line-clamp-2 break-words",children:r})})]},n),i.jsx("div",{className:"mt-sm",children:a.map(m=>i.jsx("div",{className:"border-subtler px-two py-md flex items-center border-t",children:i.jsx(Ye,{href:m.url,children:i.jsx(L,{variant:"smallBold",className:"line-clamp-2 break-all",children:m.title})})},m.url))}),i.jsx("div",{className:"mt-sm",children:i.jsx(Ye,{href:n,target:"_blank",rel:"noopener",children:i.jsx(ge,{variant:"common",fullWidthMobile:!0,text:u({id:"hqHEPnjKO/",defaultMessage:"Visit {domain}"},{domain:Wue(n)})})})})]})});m3e.displayName="MobilePrimaryNavResultCard";const wU=A.memo(({navigationResult:e,trackEvent:t})=>{const{isMobileStyle:n}=ye();return n?i.jsx(m3e,{navigationResult:e,trackEvent:t}):i.jsx(p3e,{navigationResult:e,trackEvent:t})}),p3e=A.memo(({navigationResult:e,trackEvent:t})=>{const{sitelinks:n=le}=e;return i.jsxs("div",{children:[i.jsx(R5,{navigationResult:e,trackEvent:t,queryString:"",entryUUID:""}),i.jsx("div",{className:"gap-x-md grid grid-cols-2 items-stretch",children:n.map(r=>i.jsxs(Ye,{href:r.url,target:"_self",className:"py-sm flex h-full flex-col justify-start",children:[i.jsx(L,{variant:"smallBold",className:"line-clamp-2 break-words hover:underline",color:"super",children:r.title}),i.jsx(L,{variant:"small",className:"line-clamp-1 break-words",color:"light",children:r?.snippet??""})]},r.url))})]})});p3e.displayName="DesktopPrimaryNavResultCard";wU.displayName="PrimaryNavResultCard";const h3e=(e,t,n)=>{const r=e?.sitelinks??le;return n?t===0&&r.length>0:t===0&&r.length>0&&r.every(s=>!!s?.snippet)},g3e=f.memo(({navResult:e,index:t,isPrimaryCardEnabled:n,trackCitationClickEvent:r,queryStr:s,entryUUID:a,frontendUUID:o,showSiteLinks:l})=>{const{isMobileStyle:c}=ye();return n&&h3e(e,t,c)?i.jsx(wU,{navigationResult:e,trackEvent:r}):i.jsx(R5,{navigationResult:e,trackEvent:r,queryString:s,entryUUID:a,frontendUUID:o,showSiteLinks:l,showNewMobileCard:c})});g3e.displayName="RedesignedNavResultListItem";const y3e=(e,t)=>{const{value:n,loading:r}=Tc({flag:"web-navigation-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},v3e=(e,t)=>{const{value:n,loading:r}=At({flag:"web-site-links-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},x3e=f.memo(({navResults:e,queryStr:t,result:n,frontendUUID:r,trackCitationClickEvent:s,onMount:a})=>{const{isMobileStyle:o}=ye(),{variation:l,loading:c}=y3e(wjt),u=l["nav-card"],d=typeof l["primary-card"]=="boolean"?l["primary-card"]:!1,{variation:m}=v3e(!1);f.useEffect(()=>{a?.()},[a]);const p=f.useCallback((h,g)=>{s(h,g);const y=n.query_source==="default_search",v=g.is_comet_navigation;!(h==="click citation")||!y||!v||To("web.frontend.omnisearch_nav_results_clicked")},[s,n.query_source]);return c?null:u?i.jsx(b3e,{navResults:e,queryStr:t,result:n,frontendUUID:r,trackCitationClickEvent:s,isPrimaryCardEnabled:d}):i.jsx(z,{"data-testid":"old-navigation-list",className:"my-sm flex flex-col gap-3",children:e.map((h,g)=>d&&h3e(h,g,o)?i.jsx(wU,{navigationResult:h,trackEvent:p},h.url):i.jsx(R5,{navigationResult:h,trackEvent:p,queryString:t,entryUUID:n.backend_uuid??"",frontendUUID:r,showSiteLinks:m,showNewMobileCard:!1},h.url))})});x3e.displayName="NavigationResultList";const Cjt=7,b3e=f.memo(({navResults:e,queryStr:t,result:n,frontendUUID:r,trackCitationClickEvent:s,isPrimaryCardEnabled:a})=>{const{webResults:o,hasAnswer:l}=bn(),{isMobileStyle:c}=ye(),{variation:u}=v3e(!1),{$t:d}=Q(),{updateCurrentMode:m}=pU(),[p,h]=f.useState("none"),g=f.useMemo(()=>e.length<3?[]:yE.dedupWebResults(o,e,!1).slice(0,Cjt).map((M,k)=>({url:M.url,title:M.name,snippet:M.snippet||"",domain:M.url?new URL(M.url).hostname:void 0,position:e.length+k,source:"default_search",is_comet_navigation:!1})),[o,e]),y=f.useMemo(()=>p==="none"?"collapsed":l&&g.length>0?"expanded":"loading",[p,l,g.length]),v=f.useMemo(()=>y==="collapsed"?e:[...e,...g],[e,g,y]),x=e.length>=3,b=v.length>e.length,_=d(b?{defaultMessage:"See all results",id:"DQlyy2kiD5"}:{defaultMessage:"See more results",id:"N/NQ07tu+u"}),w=f.useCallback(()=>{if(b){m("sources");return}h("clicked")},[b,m]),C=f.useMemo(()=>i.jsx(me,{icon:GC,size:"xs"}),[]),S=y==="loading"&&!b;return i.jsxs(z,{"data-testid":"redesigned-navigation-list",className:"my-sm flex flex-col",children:[i.jsx("div",{className:"flex flex-col gap-3",children:v.map((E,M)=>i.jsx(g3e,{navResult:E,index:M,isPrimaryCardEnabled:a,trackCitationClickEvent:s,queryStr:t,entryUUID:n.backend_uuid??"",frontendUUID:r??"",showSiteLinks:u},E.url))}),x&&i.jsx("div",{className:"pt-md",children:c?i.jsx(ge,{fullWidth:!0,variant:"common",onClick:w,text:_,isLoading:S}):i.jsxs("div",{className:"flex items-center",children:[i.jsx(ge,{size:"small",variant:"border",onClick:w,text:_,trailingComponent:b?C:void 0,isLoading:S}),i.jsx("div",{className:"bg-subtle h-px flex-1"})]})})]})});b3e.displayName="RedesignedNavigationResultList";const Sjt=({data:e})=>{const{inFlight:t,result:n}=bn(),{openCanvas:r,doCanvasAction:s}=cEe(),a=f.useRef(void 0),o=f.useRef(void 0);return f.useEffect(()=>{!t||!e.should_auto_open||r()},[t,e.should_auto_open,r]),f.useEffect(()=>{if(!t)return;const l={progress:e.progress,assetType:e.expected_asset_type};(a.current?.progress!==l.progress||a.current?.assetType!==l.assetType)&&(s({type:"setLoading",loading:e.progress===Bl.IN_PROGRESS,assetType:e.expected_asset_type}),a.current=l)},[e.expected_asset_type,e.progress,s,t]),f.useEffect(()=>{if(!e.asset||!t)return;const l=e.asset?.uuid;o.current!==l&&(s({type:"setAsset",asset:e.asset,result:n}),o.current=l)},[e.asset,s,t,n]),null},Ejt=()=>{const{blocksByIntendedUsage:{canvas_mode:e}}=bn();if(uU())return e?.canvas_block};var Mjt={};const kjt=({hasSources:e,hasFastWidget:t,showAgentWorkflow:n,shouldShowNavResults:r,hasMediaOnlyLayout:s,isMobileStyle:a,isEntryInFlight:o,isMobileTrendingLayout:l})=>f.useMemo(()=>{const c=!!Mjt.NEXT_PUBLIC_IS_SIDECAR_BUILD,u=a&&!c,d=e&&!t&&!n&&!r&&!s;return c?{showSourcesAtTop:d,showSourcesAtBottom:!1}:{showSourcesAtTop:d&&!u||d&&l&&u,showSourcesAtBottom:d&&u&&!o&&!l}},[e,t,n,r,s,a,o,l]),_3e=A.memo(({onClick:e,didSelectAnswer:t,onDismiss:n})=>{const{isMobileStyle:r}=ye(),[s,a]=f.useState(!1),{$t:o}=Q(),l=f.useCallback(()=>{a(!0),n()},[n]);return r||s?null:i.jsx("div",{children:i.jsx(z,{variant:"superLight",className:"p-md gap-sm flex items-center justify-between rounded-md",children:t?i.jsxs("div",{className:"gap-sm flex w-full items-center justify-between",children:[i.jsxs("div",{className:"gap-sm flex items-center",children:[i.jsx(me,{icon:gTe,size:"lg",className:"text-super"}),i.jsx(L,{color:"super",variant:"smallBold",children:o({defaultMessage:"Thank you! Your feedback helps improve answers for everyone.",id:"jfIf25t1OU"})})]}),i.jsx(Te,{variant:"noHover",icon:Lt,pill:!0,size:"small",extraCSS:"!text-super",onClick:l})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(L,{color:"super",variant:"smallBold",children:o({defaultMessage:"Help improve our product",id:"A7lIeL4dUS"})}),i.jsx(L,{color:"super",variant:"small",children:o({defaultMessage:"We made two versions of this answer. Which do you prefer?",id:"GT2t8+NleA"})})]}),i.jsx(ge,{variant:"primary",size:"small",text:o({defaultMessage:"Compare",id:"493J7RI1tF"}),onClick:e})]})})})});_3e.displayName="AnswerComparisonBanner";const Tjt=he(async()=>{const{MarkSpinner:e}=await ae(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>QEe);return{MarkSpinner:t}},void 0);return{default:e}}),Njt=A.memo(({title:e,titleIcon:t,titleAccessory:n,titleUrl:r,showPplxMark:s,queryStr:a,loading:o,className:l="mb-sm"})=>{const{trackEvent:c}=Me(),[u,d]=f.useState(!1),m=f.useCallback(()=>{r!=null&&(c("click result entry header",{query:a}),window.open(r,"_blank")?.focus())},[c,a,r]);return i.jsxs("div",{className:U("flex w-full items-center justify-between",l),children:[i.jsx("div",{onClick:m,className:U({"cursor-pointer":r!=null}),children:i.jsxs("div",{color:"super",className:"space-x-sm flex items-center",children:[(s||t)&&i.jsx(L,{variant:"section-title",as:"div",children:s?i.jsx("div",{className:"relative -top-px flex w-[24px] transform-gpu items-center justify-center",onClick:()=>{d(!0),setTimeout(()=>{d(!1)},0)},children:i.jsx(Tjt,{size:24,shouldAnimate:o||u})}):t&&i.jsx("div",{className:"w-[24px]",children:i.jsx(me,{icon:t,size:"lg"})})}),i.jsx(L,{variant:"section-title",as:"div",children:e})]})}),n]})});Njt.displayName="ThreadEntryHeader";const w3e=A.memo(({header:e,children:t})=>i.jsxs(z,{children:[e&&i.jsx(z,{variant:"background",className:U("flex","items-center","justify-between"),children:e}),t]}));w3e.displayName="ThreadEntrySection";const Ajt=e=>{try{return JSON.parse(e)}catch{return null}},C3e=A.memo(({title:e,description:t,className:n="",role:r,retryFn:s,...a})=>{const{$t:o}=Q(),l=o({defaultMessage:"Please try again later.",id:"EjH+J3uOTD"}),c=f.useMemo(()=>Ajt(t??""),[t]);return c&&(console.warn("Tried to pass a JSON error description"),console.warn(c)),i.jsxs("div",{className:`gap-md bg-caution py-sm px-md mt-4 flex items-center rounded-lg text-left font-sans text-white ${n}`,role:"alert",...a,children:[i.jsx(me,{icon:HR}),i.jsxs("div",{className:"flex grow flex-col",children:[i.jsx("p",{className:"font-medium",children:e||o({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}),i.jsx("p",{children:c?l:t})]}),s&&i.jsx(Te,{noXPadding:!0,text:o({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:s,textClassName:"text-white"})]})});C3e.displayName="QueryError";const I5=A.memo(({fullWidth:e,retryFn:t,className:n,errorCode:r})=>{const{$t:s}=Q(),a=f.useCallback(()=>{hS("error retry")},[]),o=(()=>{switch(r){case"FETCHER_SSE_OFFLINE_ERROR":return s({defaultMessage:"Unstable internet, check your connection",id:"vbFcV2WAsH"});default:return s({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}})();return i.jsx("div",{className:U("max-w-threadContentWidth mx-auto",{"w-full":e},n),children:i.jsx(C3e,{className:U("mx-md md:mx-0",{"bg-super":r==="FETCHER_SSE_OFFLINE_ERROR"}),title:o,retryFn:t??a})})});I5.displayName="QueryErrorFallback";var jjt={};const Rjt=he(async()=>{const{ConnectorAuthorizationPrompt:e}=await ae(async()=>{const{ConnectorAuthorizationPrompt:t}=await import("./ConnectorAuthorizationPrompt-Cs9LGeKW.js");return{ConnectorAuthorizationPrompt:t}},__vite__mapDeps([140,3,1,4,6,5]));return{default:e}}),Ijt=he(async()=>{const{AgentWorkflow:e}=await ae(async()=>{const{AgentWorkflow:t}=await import("./AgentWorkflow-CE6QliQT.js");return{AgentWorkflow:t}},__vite__mapDeps([147,3,1,4,134,5,6,135,136,76,137,138,67,17,18,139,148,19,145,143]));return{default:e}}),Pjt=he(async()=>{const{ThreadEntryFooter:e}=await ae(async()=>{const{ThreadEntryFooter:t}=await import("./ThreadEntryFooter-A00xcEIP.js");return{ThreadEntryFooter:t}},__vite__mapDeps([149,3,1,4,5,150,135,6,136,76,137,138,67,17,18,65,151,56,73,152,39,148,19,153,50,154,155,156,157,158,29,159,160,161,162,163,145,143,164,165]));return{default:e}}),Ojt=he(async()=>{const{RelatedContent:e}=await ae(async()=>{const{RelatedContent:t}=await import("./Related-B4ls7ZX7.js");return{RelatedContent:t}},__vite__mapDeps([166,3,1,4,167,168,115,116,5,169,164,6]));return{default:e}}),Ljt=he(async()=>{const{StudyModeRelated:e}=await ae(async()=>{const{StudyModeRelated:t}=await import("./StudyModeRelated-pN3FtTqA.js");return{StudyModeRelated:t}},__vite__mapDeps([170,3,1,4,168,115,116,5,6]));return{default:e}}),Djt=he(async()=>{const{MapsPreview:e}=await ae(async()=>{const{MapsPreview:t}=await import("./MapsPreview-Zej4Nd_5.js");return{MapsPreview:t}},__vite__mapDeps([171,3,1,4,151,56,6,73,5,152,39,38]));return{default:e}}),Fjt=he(async()=>{const{ThreadContentResponse:e}=await ae(async()=>{const{ThreadContentResponse:t}=await import("./ThreadContentResponse-CzChdvzZ.js");return{ThreadContentResponse:t}},__vite__mapDeps([172,3,1,4,118,150,135,6,5,136,76,137,138,67,17,18,65,151,56,73,152,39,148,19,153,50,154,155,156,157,158,29,159,160,161,162,163,145,143]));return{default:e}}),Ujt=he(async()=>{const{SourcesModePreviewRow:e}=await ae(async()=>{const{SourcesModePreviewRow:t}=await import("./SourcesModePreview-4DC-bo-b.js");return{SourcesModePreviewRow:t}},__vite__mapDeps([173,3,1,117,4,118,5,6]));return{default:e}}),Bjt=he(async()=>ae(()=>import("./AnswerComparisonModal-DYfvjzn4.js"),__vite__mapDeps([174,3,1,4,172,118,150,135,6,5,136,76,137,138,67,17,18,65,151,56,73,152,39,148,19,153,50,154,155,156,157,158,29,159,160,161,162,163,145,143,125]))),Vjt=he(async()=>{const{MobileCitationList:e}=await ae(async()=>{const{MobileCitationList:t}=await import("./MobileCitationList-li8zqiRu.js");return{MobileCitationList:t}},__vite__mapDeps([175,3,1,6,5,4]));return{default:e}}),Wjt={"nav-card":!1,"nav-links-bottom-position":!1,"news-carousel":!1,"primary-card":!1},S3e=A.memo(({submitQuery:e,shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,deleteLastResult:s,setQuote:a,answerModesTabsBottom:o,shouldShowNavResults:l,shouldShowRelatedContent:c=!0,sbsEntriesGroup:u})=>{const d="thread-content",{$t:m}=Q(),{isMobileStyle:p}=ye(),{trackEvent:h}=Me(),{session:g}=Ct(),{removeWidgetFromEntry:y}=Tx({reason:d}),{result:v,widgetData:x,isEntryInFlight:b,response:_,hasLLMToken:w,isAnswerSkipped:C,steps:S,isPending:E,hasMediaOnlyLayout:M,showAgentWorkflow:k,isFinalStep:T,sportsWidgetData:j,weatherWidgetData:R,timeWidgetData:O,timerWidgetData:P,calculatorWidgetData:N,currencyExchangeWidgetData:I,flightStatusWidgetData:D,highPriorityWidgets:F,lowPriorityWidgets:B,taskWidgetData:V,hasFastWidget:$,isLastResult:G,idx:X,hasAnswer:Y,hasSources:W,hasWebResults:H,mapsPreviewData:Z}=bn(),{variation:re}=y3e(Wjt),q=f.useMemo(()=>jjt.NEXT_PUBLIC_IS_SIDECAR_BUILD||!re["news-carousel"]||b?!1:xjt({webResults:_?.web_results,navigationResults:void 0,isStudyMode:v?.display_model==="pplx_study",isMobileStyle:p}),[b,_?.web_results,v?.display_model,p,re]),J=Rc(),te=JUe(),se=VS(),de=gEe(),fe=f.useRef(null),ve=f.useMemo(()=>{const ht=v?.side_by_side_metadata?.selection_status;return ht===ti.SELECTED||ht===ti.TIE},[v?.side_by_side_metadata?.selection_status]),ue=f.useMemo(()=>u.length<1?[]:[...u].sort((ht,pr)=>ht.backend_uuid.localeCompare(pr.backend_uuid,void 0,{sensitivity:"base"})),[u]),{trackJudgment:ie,trackBannerExposure:be,trackSBSExposure:Se}=Tot({results:ue,session:g,trackEvent:h}),Ce=f.useMemo(()=>{const ht=v?.side_by_side_metadata?.sibling_uuid;return ht?Ae.getItem(`sbs-banner-dismissed-${ht}`)==="true":!1},[v?.side_by_side_metadata?.sibling_uuid]),ke=f.useMemo(()=>u.length>1,[u]),Re=f.useMemo(()=>v?.side_by_side_metadata?.sibling_uuid,[v]),je=f.useMemo(()=>v?.display_model==="pplx_study",[v?.display_model]),ct=f.useMemo(()=>de?!Ce&&(ve||ke&&Y):!1,[Ce,de,ke,ve,Y]),tt=f.useCallback(()=>{Re&&Ae.setItem(`sbs-banner-dismissed-${Re}`,"true")},[Re]);f.useEffect(()=>{ct&&be()},[ct,be]);const[ut,we]=f.useState(!1),Ue=f.useMemo(()=>ue.map(ht=>un.parseAskTextField(ht)??void 0).filter(ht=>ht!==void 0),[ue]),Ot=f.useCallback(async ht=>{try{ie(ht);const pr=ue[0]?.side_by_side_metadata?.sibling_uuid;await Vot(ht,ue,pr,se),we(!1)}catch(pr){ee.error("Failed to process answer selection:",pr)}},[ue,se,ie]),pt=f.useCallback(()=>{we(!0),Se()},[Se]),Mt=f.useMemo(()=>u.some(ht=>un.isStatusPending(ht)),[u]),qe=f.useMemo(()=>{if(!v?.query_str)return"";const{actualQuery:ht}=hc(v.query_str);return ht||""},[v?.query_str]),Be=f.useCallback(()=>we(!1),[]),{standardWidgetData:Oe,codeInterpreterImages:nt}=x.reduce((ht,pr)=>(pr.is_code_interpreter&&pr.is_image?ht.codeInterpreterImages.push(pr):ht.standardWidgetData.push(pr),ht),{standardWidgetData:[],codeInterpreterImages:[]}),St=f.useMemo(()=>nt.length>0,[nt]),Yt=f.useMemo(()=>!St&&Oe.length>0,[St,Oe]),Ft=f.useMemo(()=>!p,[p]),Gt=f.useCallback(ht=>{v?.frontend_context_uuid&&v?.backend_uuid&&(y({entryUUID:v.backend_uuid,data:ht}),h("remove widget",{url:"url"in ht?ht.url:ht?.links?.[0]?.url??"",entryUUID:v.backend_uuid,source:"thread"}))},[y,v.backend_uuid,h,v.frontend_context_uuid]),Cn=f.useCallback((ht,pr,Ni,Hu,Pc)=>{const ca=Pc||("url"in ht?ht.url:ht?.links?.[0]?.url??"");return i.jsx(wCe,{data:ht,submit:e,isReadonly:pr,menuItems:pr||b?[]:[{type:"default",text:m({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:_w,onClick:()=>Ni&&Ni(ht)}],inFlight:b,entryUUID:v?.backend_uuid??null,tableCitationOffset:Hu},ca)},[b,e,m,v?.backend_uuid]),ln=f.useCallback((ht,pr,Ni)=>{const Hu={name:`${pr}-widget`,snippet:"",timestamp:"",url:"",meta_data:ht,is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""};return Cn(Hu,J,Gt,_?.web_results?.length,Ni)},[Gt,J,_?.web_results?.length,Cn]),Ke=f.useCallback(ht=>Cn(ht,J,Gt,_?.web_results?.length),[Gt,J,_?.web_results?.length,Cn]),He=f.useCallback(ht=>ln(ht,"sports"),[ln]),st=f.useCallback(ht=>ln(ht,"weather"),[ln]),Vt=f.useCallback(ht=>ln(ht,"time"),[ln]),en=f.useCallback(ht=>ln(ht,"timer"),[ln]),On=f.useCallback(ht=>ln(ht,"currency_exchange"),[ln]),_e=f.useCallback(ht=>ln(ht,"calculator"),[ln]),Ge=f.useCallback(ht=>ln(ht,"flight-status"),[ln]),We=f.useCallback(ht=>ln(ht,"task","task"),[ln]),rt=f.useRef(null),{hasAccessToProFeatures:et}=yt();f3e({entryUUID:v?.backend_uuid??"",target:rt,targetVisibilityPortionThreshold:.3,frontendContextUUID:v?.frontend_context_uuid??"",hasLLMToken:w});const kt=wr(),{showSourcesAtTop:_n,showSourcesAtBottom:tn}=kjt({hasSources:W,hasFastWidget:$,showAgentWorkflow:k,shouldShowNavResults:l,hasMediaOnlyLayout:M,isMobileStyle:p,isEntryInFlight:b,isMobileTrendingLayout:q}),cn=Ejt(),Mr=Lie(v?.frontend_uuid),La=rBe(v?.backend_uuid),mo=un.isStatusFailed(v),qo=mo&&v.reconnectable&&Mr;f.useEffect(()=>{kt.maybeSendSearchResult(_,S,E)},[E,H,_,kt,S]);const $u=f.useCallback(()=>{te(v.backend_uuid??"")},[v.backend_uuid,te]),Uf=f.useMemo(()=>A.memo(()=>{throw new Tme("STREAM_FAILED_CHUNK_ERROR")}),[]),vg=f.useMemo(()=>()=>i.jsx(I5,{retryFn:$u,errorCode:La?.code}),[$u,La?.code]);return i.jsxs(i.Fragment,{children:[ct&&i.jsx(_3e,{onClick:pt,didSelectAnswer:ve,onDismiss:tt}),v?.connector_auth_info&&i.jsx(Rjt,{connectorAuthInfo:v.connector_auth_info,isLastResult:G,backendUuid:v?.backend_uuid,inFlight:b}),_n&&i.jsx(Ujt,{}),k&&!C&&i.jsx(Ijt,{answerModesTabsBottom:o,autoScroll:G}),cn&&b&&i.jsx(Sjt,{data:cn}),i.jsxs("div",{className:"gap-y-lg mt-3 flex flex-col first:mt-0",children:[(M||C||!k&&(T||$))&&i.jsx(w3e,{children:i.jsxs("div",{className:"gap-y-sm md:gap-y-md flex flex-col",children:[St&&nt.map(ht=>i.jsx("div",{children:Cn(ht,J)},ht.url)),Yt&&F.map(Ke),R&&st(R),O&&Vt(O),P&&en(P),I&&On(I),N&&_e(N),D&&Ge(D),j&&He(j),Yt&&B.map(Ke),Z&&Z.place_widgets.length>0&&i.jsx(Djt,{placeWidgets:Z.place_widgets}),i.jsx(Fjt,{submitQuery:e,setQuote:a,markdownRef:fe}),et&&de&&V&&We(V),tn&&i.jsx(Vjt,{webResults:_?.web_results??eae}),i.jsx(Pjt,{submitQuery:e,deleteLastResult:s,showSourcesSidebar:Ft,markdownRef:fe}),i.jsx(pl,{isSamsungBrowser:!0,children:i.jsx(T5,{position:"bottom",idx:X,upsellInformation:v?.upsell_information,backendUuid:v?.backend_uuid,isLastResult:G,inFlight:b})})]})}),mo&&!qo&&i.jsx(zr,{fallback:vg,children:i.jsx(Uf,{})}),c&&!je&&i.jsx(Ojt,{shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,submitQuery:e}),je&&i.jsx(Ljt,{onClick:e})]}),ke&&i.jsx(Bjt,{isOpen:ut,onClose:Be,responses:Ue,queryStr:qe,onSelectAnswer:Ot,isAnyEntryPending:Mt})]})});S3e.displayName="LowerPriorityThreadContent";const $jt=e=>{const{result:{classifier_results:t,query_source:n}}=bn(),r=qbe(),{classifierResults:s}=Fs(),a=t,o=typeof a<"u",l=s[e],c=typeof l<"u",u=n==="default_search";return f.useEffect(()=>{u&&(o&&r("web.frontend.browser.mhe_loaded_ms"),c&&r("web.frontend.browser.mhe_extension_loaded_ms"))},[o,c,u,r]),l??a},Hjt=({items:e})=>{const[t,n]=f.useState(!1),r=f.useMemo(()=>document.querySelector("meta[name='version']")?.getAttribute("content")||"",[]),s=e.filter(l=>l.isStatic),a=e.filter(l=>!l.isStatic),o=l=>i.jsx(z,{className:"px-md py-sm gap-sm grid grid-cols-3 align-top",children:l.map((c,u)=>i.jsx("div",{children:c.href?i.jsx(Te,{variant:"negative",href:c.href,text:c.label,target:"_blank",size:"tiny",icon:S0}):i.jsxs("div",{className:"py-xs",children:[i.jsx(L,{variant:"tiny",color:"light",children:c.label}),i.jsx(L,{variant:"tiny",children:c.value})]})},u))});return i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"bg-caution/10 border-caution/20 rounded-lg border shadow-md 2xl:absolute 2xl:right-[-450px] 2xl:w-[400px]",children:[i.jsxs("div",{className:"py-sm pl-md pr-sm gap-sm border-caution/20 flex items-center justify-between border-b",children:[i.jsxs(L,{variant:"smallBold",color:"red",className:"gap-sm flex items-center",children:[i.jsx(QR,{size:16}),i.jsx("span",{children:"Internal Debug Mode"})]}),i.jsx(ge,{size:"small",text:"Report a Bug",variant:"rejecter",onClick:()=>n(!0)})]}),s.length>0&&o(s),s.length>0&&a.length>0&&i.jsx("div",{className:"border-caution/20 border-t"}),a.length>0&&o(a),r&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-caution/20 border-t"}),i.jsxs(z,{className:"px-md py-sm gap-sm flex items-center",children:[i.jsx(L,{variant:"tinyBold",color:"red",children:"Version"}),i.jsx(Te,{variant:"negative",href:`https://github.com/ppl-ai/agi/commit/${r}`,text:r,target:"_blank",size:"tiny",icon:S0})]})]})]}),i.jsx(Kle,{isOpen:t,onClose:()=>n(!1)})]})},Pee=1e3*60*20,Oee=e=>new Date(e).getTime(),zjt=["llm","mhe"],Gjt=["ms"],qjt=e=>(e.split(".").at(-1)??"").split("_").map(t=>zjt.includes(t)?t.toUpperCase():Gjt.includes(t)?t.toLowerCase():`${t.charAt(0).toUpperCase()}${t.slice(1)}`).join(" "),Kjt=()=>{const{result:{backend_uuid:e,frontend_uuid:t,frontend_context_uuid:n,debug_data:r}}=bn(),{formatNumber:s}=Q(),o=Fue()(),l=Z7(),c=t??"",u=l(t??"")??l(n??""),{env:{envHasDevLogins:d,isLocalhost:m}}=Et(),{navigationMeta:p,pendingTasks:h}=Fs(),g=p[c]??{},y=m?"http://localhost:3009":"https://admin.i.perplexity.ai",v=`${y}/debugger/`,x=`${y}/replayer/`,b=m||!d?"production":"testing",_=u!==o?u?.getEvents()??[]:o?.getEvents()??[],w=f.useMemo(()=>h.size?[...h.values()].filter(S=>S.entryId===e).map(S=>S.uuid):le,[h,e]),C=[{label:"Nav Search Type",value:g.type??"unknown"},{label:"Nav Search Time",value:g.searchTime},{label:"Nav Classify Time",value:g.classifyTime},..._.map(S=>({label:qjt(S.metricName),value:S.duration})),{label:"Debugger",href:`${v}${e}?env=${b}`,isStatic:!0},{label:"Chat Replayer",href:`${x}${e}?env=${b}`,isStatic:!0}];if(r?.dd_trace_id&&C.push({label:"Datadog Trace",href:`https://app.datadoghq.com/apm/trace/${r.dd_trace_id}`,isStatic:!0}),r?.dd_request_id&&C.push({label:"Datadog Logs",href:`https://app.datadoghq.com/logs?query=%40request_id%3A"${r.dd_request_id.request_id}"&from_ts=${Oee(r.dd_request_id.datetime)-Pee}&to_ts=${Oee(r.dd_request_id.datetime)+Pee}&live=false`,isStatic:!0}),w.length)for(const S of w)C.push({label:"Agent Engine Task",href:`${y}/agent-engine/${b}/task/${S}`,isStatic:!0});return i.jsx("div",{children:i.jsx(Hjt,{items:C.filter(S=>S.href||S.value).map(S=>({label:S.label,value:S.value?typeof S.value=="number"?s(S.value,{style:"unit",unit:"millisecond",unitDisplay:"narrow"}):S.value:"",href:S.href,isStatic:S.isStatic}))})})},Yjt=()=>{const e=f.useContext(Lme);return!!e&&e.debugEnabled};var Qjt={};const Lee=3,E3e=A.memo(({sbsEntriesGroup:e,submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:o,answerModesTabsBottom:l})=>{const{isMobileStyle:c}=ye(),u=mt(),d=qbe(),{result:m,response:p,hasLLMToken:h,searchMode:g,isFirstResult:y,webResults:v,steps:x,isPending:b,actions:{handleSourcesCuration:_}}=bn(),w=Due(),C=f.useMemo(()=>{if(!m?.query_str)return"";const{actualQuery:q}=hc(m.query_str);return q||""},[m?.query_str]),S=f.useMemo(()=>!c,[c]),E=f.useRef(null);f3e({entryUUID:m?.backend_uuid??"",target:E,targetVisibilityPortionThreshold:.3,frontendContextUUID:m?.frontend_context_uuid??"",hasLLMToken:h});const{trackCitationClickEvent:M,navigationResults:k}=_jt({allowedNavResultsCount:Lee,entry:m,webResults:v,showSourcesSidebar:S,submit:_,searchMode:g,isFirstResult:y}),T=rn(),j=wr(),{navigationResults:R}=Fs(),O=m?.frontend_uuid,P=R[O??""]??le,N=Lie(O),I=$jt(O??""),D=f.useMemo(()=>P.length>0,[P]),F=f.useMemo(()=>T&&(P.length||N)?P:k||le,[T,P,k,N]),B=f.useMemo(()=>F?{serverRequestTimestamp:u.getQueryData(["serverRequestTimestamp",m?.query_str??void 0,m?.uuid??void 0])}:{serverRequestTimestamp:void 0},[u,m?.query_str,F,m?.uuid]),V=f.useMemo(()=>F?.slice(0,Math.max(Lee,P?.length??0))?.map((q,J)=>({...q,position:J,source:B.serverRequestTimestamp?"default_search":"client_search",client_request_timestamp:w(),unstable_server_request_timestamp:B.serverRequestTimestamp||void 0,sitelinks:q.sitelinks?.map((te,se)=>({url:te.url,title:te.title,position:se,snippet:te?.snippet??""})),is_comet_navigation:D})),[w,F,P?.length,B.serverRequestTimestamp,D]),$=f.useMemo(()=>!!v&&v.length>0,[v]),G=f.useMemo(()=>m?.search_focus==="writing",[m?.search_focus]),X=rn(),Y=typeof I<"u",W=f.useMemo(()=>{if(!X)return!1;const q=m.status==="COMPLETED";return!(Y||q)||!!I?.personal_search||!!I?.skip_search||!!I?.hide_nav||!!I?.image_generation||!!I?.time_widget},[X,Y,I,m.status]),H=f.useMemo(()=>!Qjt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!W&&V&&V.length>0&&m.attachments?.length===0&&!G&&g===oe.SEARCH,[W,V,m.attachments?.length,G,g]);f.useEffect(()=>{j.maybeSendSearchResult(p,x,b)},[b,$,p,j,x]);const Z=f.useCallback(()=>{D&&(m?.query_source==="default_search"?d("web.frontend.omnisearch_nav_results_shown",{omnisearch:w()!==0}):d("web.frontend.nav_results_shown"))},[D,m?.query_source,d,w]),re=Yjt();return i.jsxs("div",{className:"gap-y-sm flex flex-col",ref:E,children:[re&&i.jsx(Kjt,{}),H&&i.jsx(x3e,{navResults:V,queryStr:C,result:m,frontendUUID:m?.frontend_uuid,trackCitationClickEvent:M,onMount:Z}),i.jsx(S3e,{submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:o,answerModesTabsBottom:l,shouldShowNavResults:H,sbsEntriesGroup:e})]})});E3e.displayName="ThreadContent";const M3e=A.memo(({submitQuery:e})=>{const t="trigger-entry-rewrite",n=Dt(),{result:{backend_uuid:r,frontend_context_uuid:s,attachments:a,display_model:o},idx:l,editQueryValue:c}=bn(),u=Rc(),d=window.location.hash.slice(1),m=parseInt(d,10),p=n?.get("rw")==="true";return f.useEffect(()=>{if(!(isNaN(m)||l!==m)&&p){Ip({rw:void 0});const h=()=>e({rawQuery:c,existingEntryUUID:r,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:u?void 0:s,promptSource:"user",querySource:"rewrite-url-param",attachments:a,modelPreferenceOverride:o});r?Sp({entryUUID:r,reason:t}).catch(g=>{ee.error("Error terminating entry",g)}).finally(h):h()}},[p,u,e,m,l,r,c,s,a,o]),null});M3e.displayName="TriggerEntryRewrite";function Xjt(e,t,n){const r=new Blob([n],{type:"text/plain"});CU(e,t,r)}function CU(e,t,n){const r=document.createElement("a"),s=URL.createObjectURL(n);r.href=s,r.download=t,e.appendChild(r),r.click(),URL.revokeObjectURL(s),e.removeChild(r)}const Zjt=new Set(["markdown","md"]);function k3e(e){if(e?.asset_type==Bn.CODE_FILE&&e.code_file?.url&&Zjt.has(e.code_file.name.split(".").at(-1)))return{filenamePrefix:e.code_file.name.slice(0,e.code_file.name.lastIndexOf(".")),url:e.code_file.url}}function QWt(e){return k3e(e)!==void 0}function XWt(e){return!!(e?.asset_type===Bn.SLIDES&&e.app?.url&&e.app.name)}function Jjt(e){if(e)return e.find(t=>t.asset_type===Bn.CODE_FILE&&t.code_file?.name?.endsWith(".pptx"))}function ZWt(e){return Jjt(e)?.code_file?.url}function JWt(e){return e?.asset_type?[Bn.GENERATED_IMAGE,Bn.CHART,Bn.CODE_FILE,Bn.CODE_ASSET].includes(e.asset_type):!1}function e9t(e){return e?.asset_type?[Bn.CHART,Bn.GENERATED_IMAGE,Bn.GENERATED_VIDEO,Bn.PDF_FILE].includes(e.asset_type):!1}function e$t({asset:e,reason:t}){const n=f.useCallback(async(r,s)=>{const a=k3e(e);if(!a)return;const{filenamePrefix:o,url:l}=a,c=o+"."+r,u=await hQe({request:{filename:c,format:r,url:l},reason:t});CU(s||document.body,c,u)},[e,t]);return f.useMemo(()=>({exportAsset:n}),[n])}function t9t({reason:e,entryUUID:t}){const[n,r]=f.useState(!1),s=f.useCallback(async a=>{r(!0);try{const o=await gQe({request:{entry_uuid:t},reason:e});CU(a||document.body,"exported-assets.zip",o)}finally{r(!1)}},[t,e]);return f.useMemo(()=>({exportAllAssets:s,isExporting:n}),[s,n])}function n9t({asset:e,reason:t,answerMode:n,entryUUID:r}){const{downloadS3Asset:s,downloadImageAsset:a,downloadMediaAsset:o}=sde({reason:t}),{trackEvent:l}=Me(),c=f.useCallback(async u=>{if(e)if(l("generated asset downloaded",{assetType:e.asset_type,answerMode:n,entryUUID:r,reason:t}),e.asset_type===Bn.GENERATED_IMAGE)e.generated_image?.url&&await a(e.generated_image.url,"generated-image.png",u||document.body);else if(e.asset_type===Bn.GENERATED_VIDEO)e.generated_video?.url&&await o(e.generated_video.url,"generated-video.mp4",u||document.body);else for(const d of e.download_info)d.url?await s({url:d.url,filename:d.filename}):d.text_content&&Xjt(u||document.body,d.filename,d.text_content)},[e,l,n,r,a,o,s,t]);return f.useMemo(()=>({downloadAsset:c}),[c])}var wd;(function(e){e[e.UNCOPIED=0]="UNCOPIED",e[e.COPYING=1]="COPYING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED"})(wd||(wd={}));var Cd;(function(e){e[e.UNLINKED=0]="UNLINKED",e[e.LINKING=1]="LINKING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED"})(Cd||(Cd={}));function t$t({asset:e,reason:t}){const[n,r]=f.useState(wd.UNCOPIED),{$t:s}=Q(),{openToast:a}=xn(),o=f.useCallback(async()=>{if(e){r(wd.COPYING);try{await r9t({asset:e,reason:t}),a(s({defaultMessage:"Copied to the clipboard!",id:"WWy0tPuRW8"}),"success",3),r(wd.SUCCEEDED)}catch{a(s({defaultMessage:"Failed to copy the asset",id:"HHPhgIZj9h"}),"error",3),r(wd.FAILED)}setTimeout(()=>r(wd.UNCOPIED),2e3)}},[s,a,r,e,t]);return f.useMemo(()=>({copyStatus:n,copyAsset:o}),[n,o])}function n$t({asset:e}){const[t,n]=f.useState(Cd.UNLINKED),{$t:r}=Q(),{openToast:s}=xn(),a=f.useCallback(async()=>{if(!(!e||!e9t(e))){n(Cd.LINKING);try{let o;if(e.asset_type===Bn.CHART&&e.chart?.url)o=e.chart.url;else if(e.asset_type===Bn.GENERATED_IMAGE&&e.generated_image?.url)o=e.generated_image.url;else if(e.asset_type===Bn.GENERATED_VIDEO&&e.generated_video?.url)o=e.generated_video.url;else if(e.asset_type===Bn.PDF_FILE&&e.pdf_file?.url)o=e.pdf_file.url;else throw new Error("Asset is not linkable or URL not found");await navigator.clipboard.writeText(o),s(r({defaultMessage:"Link copied to clipboard!",id:"PsDXPeXpVG"}),"success",3),n(Cd.SUCCEEDED)}catch{s(r({defaultMessage:"Failed to copy link",id:"ruCwQMVFzJ"}),"error",3),n(Cd.FAILED)}setTimeout(()=>n(Cd.UNLINKED),2e3)}},[e,r,s]);return f.useMemo(()=>({linkStatus:t,linkAsset:a}),[t,a])}async function r9t({asset:e,reason:t}){let n;if(e.asset_type==Bn.CODE_ASSET)n={"text/plain":e.code?.script??""};else if(e.asset_type==Bn.CHART&&e.chart?.url){const s=await wy({request:{url:e.chart.url,filename:"chart.png"},reason:t});n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==Bn.CODE_FILE&&e.code_file?.url){const s=await wy({request:{url:e.code_file.url,filename:e.code_file.name},reason:t});n={"text/plain":await(await fetch(s)).text()}}else if(e.asset_type==Bn.GENERATED_IMAGE&&e.generated_image?.url){const s=e.generated_image.url;n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==Bn.GENERATED_VIDEO&&e.generated_video?.url){const s=e.generated_video.url;n={"video/mp4":await(await fetch(s,{mode:"cors",cache:"no-cache"})).blob()}}else if(e.asset_type==Bn.PDF_FILE&&e.pdf_file?.url){const s=await wy({request:{url:e.pdf_file.url,filename:e.pdf_file.name},reason:t});n={"application/pdf":await(await fetch(s)).blob()}}else if(e.asset_type==Bn.DOCX_FILE&&e.docx_file?.url){const s=await wy({request:{url:e.docx_file.url,filename:e.docx_file.name},reason:t});n={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":await(await fetch(s)).blob()}}if(!n)throw new Error("Failed to find anything to copy");const r=new ClipboardItem(n);await navigator.clipboard.write([r])}const T3e=A.memo(()=>i.jsx(wn,{children:i.jsx("div",{className:"gap-sm flex flex-wrap",children:Array.from({length:8}).map((e,t)=>i.jsx(N3e,{index:t},t))})}));T3e.displayName="ImagesModeLoader";const N3e=A.memo(({index:e})=>{const{isMobileStyle:t}=ye(),{isLargeScreen:n,isXLargeScreen:r}=f3(),s=f.useMemo(()=>t?120:r?240:n?200:180,[t,n,r]);return i.jsx("div",{className:U("bg-subtler grow basis-1/3 rounded-xl md:basis-1/4",{"w-1/2 !max-w-none":e===1}),style:{height:s}})});N3e.displayName="Item";const A3e=A.memo(()=>i.jsx(wn,{children:i.jsx(z,{variant:"subtler",className:"h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));A3e.displayName="JobsModeLoader";const SU=A.memo(()=>i.jsxs("div",{className:"gap-md @container flex w-full flex-row",children:[i.jsx("div",{className:"md:@[1458px]:w-[874px] md:@[1458px]:shrink-0 w-full md:w-3/5",children:i.jsx(R3e,{})}),i.jsx("div",{className:"@md:w-[570px] @md:@[1458px]:w-full hidden md:block",children:i.jsx(j3e,{})})]}));SU.displayName="PlacesModeLoader";const j3e=A.memo(()=>i.jsx(wn,{children:i.jsx(z,{variant:"subtler",className:"sticky h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));j3e.displayName="PlacesModeMapLoader";const R3e=A.memo(()=>i.jsx(wn,{children:i.jsx("div",{className:"gap-md grid h-[180px] grid-cols-[repeat(auto-fill,minmax(220px,1fr))] overflow-hidden [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]",children:Array.from({length:8}).map((e,t)=>i.jsx(I3e,{},t))})}));R3e.displayName="PlacesModeGridLoader";const I3e=A.memo(()=>i.jsx("div",{className:U("bg-subtler aspect-[4/3] w-full rounded-xl")}));I3e.displayName="Item";const P3e=f.memo(()=>{const{isMobileStyle:e}=ye();return i.jsxs(wn,{className:"-mx-md pl-md md:mx-auto",children:[i.jsx("div",{className:"gap-md md:mb-lg mb-md flex auto-rows-fr grid-cols-2 overflow-hidden md:grid md:grid-cols-3",children:Array.from({length:3}).map((t,n)=>i.jsx(O3e,{},n))}),i.jsxs("div",{className:"gap-sm flex flex-col",children:[i.jsxs("div",{className:"grid grid-cols-1 grid-rows-1 items-center",children:[i.jsx(L,{variant:e?"base":"section-title",className:"col-start-1 row-start-1",children:""}),i.jsx("div",{className:"bg-subtler col-start-1 row-start-1 h-3 w-32 grow rounded-full md:h-4"})]}),i.jsx("div",{className:"gap-md pr-md flex auto-rows-fr grid-cols-2 flex-col md:grid md:pr-0",children:Array.from({length:2}).map((t,n)=>i.jsx(L3e,{},n))})]})]})});P3e.displayName="ShoppingModeLoader";const O3e=f.memo(()=>i.jsx("div",{className:U("bg-subtler aspect-video h-[327px] w-[70vw] grow rounded-xl md:h-[413px] md:w-full")}));O3e.displayName="Item";const L3e=f.memo(()=>i.jsx("div",{className:"bg-subtler aspect-video h-[144px] w-full grow rounded-md"}));L3e.displayName="SmallItem";const D3e=A.memo(()=>i.jsx(wn,{children:i.jsx("div",{className:"gap-xs grid auto-cols-fr auto-rows-fr grid-cols-2 sm:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((e,t)=>i.jsx(F3e,{},t))})}));D3e.displayName="VideoModeLoader";const F3e=A.memo(()=>i.jsx("div",{className:U("bg-subtler aspect-video w-full grow rounded-md")}));F3e.displayName="Item";var s9t={};const a9t=he(async()=>{const{ShoppingMode:e}=await ae(async()=>{const{ShoppingMode:t}=await import("./ShoppingMode-DccEIS_l.js");return{ShoppingMode:t}},__vite__mapDeps([176,3,1,4,123,154,177,178,6,5]));return{default:e}},{loading:()=>i.jsx(P3e,{})}),o9t=he(async()=>{const{HotelsMode:e}=await ae(async()=>{const{HotelsMode:t}=await import("./HotelsMode-CpyFaIEh.js");return{HotelsMode:t}},__vite__mapDeps([179,3,1,151,4,56,6,73,5,152,39,180,38,181,178]));return{default:e}},{loading:()=>i.jsx(SU,{})}),i9t=he(async()=>{const{JobsMode:e}=await ae(async()=>{const{JobsMode:t}=await import("./JobsMode-CdJvgnP0.js");return{JobsMode:t}},__vite__mapDeps([182,3,1,4,5,163,6]));return{default:e}},{loading:()=>i.jsx(A3e,{})}),l9t=he(async()=>{const{VideosMode:e}=await ae(async()=>{const{VideosMode:t}=await import("./VideosMode-C925BSol.js");return{VideosMode:t}},__vite__mapDeps([183,3,1,4,184,114,115,116,5,178,6]));return{default:e}},{loading:()=>i.jsx(D3e,{})}),c9t=he(async()=>{const{ImagesMode:e}=await ae(async()=>{const{ImagesMode:t}=await import("./ImagesMode-BdAw6ZAK.js");return{ImagesMode:t}},__vite__mapDeps([185,3,1,4,184,155,5,186,178,6]));return{default:e}},{loading:()=>i.jsx(T3e,{})}),u9t=he(async()=>{const{MapsMode:e}=await ae(async()=>{const{MapsMode:t}=await import("./MapsMode-Cgc0ygGU.js");return{MapsMode:t}},__vite__mapDeps([187,3,1,6,38,4,5,39,181,151,56,73,152,178]));return{default:e}},{loading:()=>i.jsx(SU,{})}),d9t=he(async()=>{const{AssetsMode:e}=await ae(async()=>{const{AssetsMode:t}=await import("./AssetsMode-mmXwMlqf.js").then(n=>n.a);return{AssetsMode:t}},__vite__mapDeps([142,3,1,4,137,6,138,143,67,5,17,18,66]));return{default:e}},{loading:()=>i.jsx(hU,{})}),f9t=he(async()=>{const{AppsMode:e}=await ae(async()=>{const{AppsMode:t}=await import("./AppsMode-yEWaj0FI.js");return{AppsMode:t}},__vite__mapDeps([145,3,1,4,137,6,143,5]));return{default:e}},{loading:()=>i.jsx(hU,{})}),m9t=he(async()=>{const{TasksMode:e}=await ae(async()=>{const{TasksMode:t}=await import("./TasksMode-BhEXmmeB.js");return{TasksMode:t}},__vite__mapDeps([188,3,1,147,4,134,5,6,135,136,76,137,138,67,17,18,139,148,19,145,143,189]));return{default:e}},{loading:()=>i.jsx(OEe,{})}),U3e=A.memo(({isLastResult:e,isFirstResult:t,sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:o,deleteLastResult:l,setQuote:c,scrollToListItem:u,lastResultBuffer:d,idx:m})=>{const{answerModeActionList:p,currentModeData:h,defaultModeOverride:g}=Ix(),{isMobileStyle:y}=ye(),{result:{backend_uuid:v,context_uuid:x,attachments:b,status:_,frontend_context_uuid:w,query_str:C,upsell_information:S,parent_info:{mode:E,url_slug:M}={}},isEntryInFlight:k,webResults:T}=bn(),j=Rc(),R=E&&M,[O,P]=f.useState(!1),{scrollContainerRef:N}=Bo(),I=f.useRef(new Set),{trackEvent:D}=Me();f.useEffect(()=>{if(!(v?.length===0||v===q7||x?.length===0))for(const re of p)I.current.has(re.mode)||(I.current.add(re.mode),D("answer mode tab viewed",{answerMode:re.mode,entryUUID:v,contextUUID:x}))},[p,D,v,x]);const{ref:F,isSticky:B}=Z8t({root:N.current??void 0}),V=f.useMemo(()=>y&&!s9t.NEXT_PUBLIC_IS_SIDECAR_BUILD?!1:B,[y,B]),$=f.useCallback(()=>{u(m,{smooth:!0})},[u,m]);f.useEffect(()=>{typeof window>"u"||_!=="PENDING"||$()},[k,_,$]);const G=f.useMemo(()=>({backend_uuid:v,frontend_context_uuid:w,query_str:C}),[v,w,C]),X=f.useMemo(()=>{if(h.mode!=="default")return h.mode==="images"?j?void 0:i.jsx(W3e,{result:G,setIsGeneratingImage:P,isGeneratingImage:O}):h.mode==="assets"?i.jsx(V3e,{}):h.mode==="apps"?i.jsx(B3e,{}):null},[h.mode,j,G,O]),Y=b&&b.length>0,[W,H]=f.useState(null);f.useEffect(()=>{const re=()=>{const te=document.querySelector(".sticky-tabs-ref");te&&H(te.clientHeight)};re(),window.addEventListener("scroll",re,{passive:!0});const q=new ResizeObserver(re),J=document.querySelector(".sticky-tabs-ref");return J&&q.observe(J),()=>{window.removeEventListener("scroll",re);const te=document.querySelector(".sticky-tabs-ref");te&&q.unobserve(te)}},[]);const Z=f.useMemo(()=>{if(e&&d)return{paddingBottom:`${d+(Y?52:0)}px`}},[e,d,Y]);return i.jsxs(z,{className:U({"pt-headerHeight md:pt-sm erp-sidecar:pt-0 erp-mobile-sidecar:pt-0":t&&!R,"erp-sidecar:min-h-[var(--sidecar-content-height)] min-h-[var(--page-content-height)] md:min-h-[var(--page-content-height-without-header)]":e}),style:Z,children:[i.jsx(M3e,{submitQuery:r}),i.jsx(c3e,{webResults:T,children:i.jsxs("div",{className:U("isolate mx-auto md:pt-6",{"px-md max-w-none":h.width==="full","max-w-threadWidth px-md md:px-lg":h.width==="wide","px-md":h.width==="default"}),children:[i.jsx("div",{className:"max-w-threadContentWidth relative isolate z-20 mx-auto",children:i.jsx("div",{className:V?"pointer-events-none opacity-0":void 0,children:i.jsx(a3e,{isFirstResult:t,submitQuery:r})})}),i.jsx(pl,{isSamsungBrowser:!0,children:i.jsx(T5,{position:"top",idx:m,upsellInformation:S,backendUuid:v,isLastResult:e,inFlight:k,className:"max-w-threadContentWidth mt-md relative z-20 mx-auto"})}),i.jsx("div",{ref:F,className:"bg-base -mx-md px-md sticky-tabs-ref erp-sidecar:sticky top-0 z-10 md:sticky",style:{marginTop:`-${ZEe}px`},children:i.jsx("div",{className:U("mx-auto",{"max-w-threadContentWidth":h.width==="default","max-w-none":h.width==="full","max-w-threadWidth":h.width==="wide"}),children:i.jsx(e3e,{modeList:p,defaultModeOverride:g,isSticky:V,inFlight:k,accessory:X})})}),i.jsx("div",{className:U("pb-md mx-auto pt-5 md:pb-12",{"max-w-threadWidth":h.width==="wide","max-w-none":h.width==="full","max-w-threadContentWidth":h.width==="default","border-subtlest border-b":!e}),children:i.jsxs(it,{initial:!1,children:[h.mode==="default"&&i.jsx(ho,{id:`default-mode-${w}`,children:i.jsx(E3e,{sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:o,deleteLastResult:l,setQuote:c,answerModesTabsBottom:W})}),h.mode==="shopping"&&i.jsx(ho,{id:`shopping-mode-${w}`,children:i.jsx(a9t,{})}),h.mode==="hotels"&&i.jsx(ho,{id:`hotels-mode-${w}`,children:i.jsx(o9t,{})}),h.mode==="places"&&i.jsx(ho,{id:`maps-mode-${w}`,children:i.jsx(u9t,{})}),h.mode==="jobs"&&i.jsx(ho,{id:`jobs-mode-${w}`,children:i.jsx(i9t,{})}),h.mode==="videos"&&i.jsx(ho,{id:`videos-mode-${w}`,children:i.jsx(l9t,{})}),h.mode==="images"&&i.jsx(ho,{id:`images-mode-${w}`,children:i.jsx(c9t,{isGeneratingImage:O})}),h.mode==="sources"&&i.jsx(ho,{id:`sources-mode-${w}`,children:i.jsx(UEe,{})}),h.mode==="assets"&&i.jsx(ho,{id:`assets-mode-${w}`,children:i.jsx(d9t,{})}),h.mode==="apps"&&i.jsx(ho,{id:`apps-mode-${w}`,children:i.jsx(f9t,{})}),h.mode==="tasks"&&i.jsx(ho,{id:`tasks-mode-${w}`,children:i.jsx(m9t,{})})]})})]})})]})});U3e.displayName="ThreadEntryInner";const B3e=A.memo(()=>{const e="apps-accessory",{$t:t}=Q(),{openModal:n}=vt(),{assets:r}=Ix(),{result:{backend_uuid:s}}=bn(),a=f.useMemo(()=>{for(let h=r.length-1;h>=0;h--){const g=r[h];if(g?.asset_type===Bn.APP)return g}},[r]);ade({assetType:Bn.APP,entryUUID:s,answerMode:"apps",reason:"apps-accessory"});const{downloadAsset:o}=n9t({asset:a,reason:e,answerMode:"apps",entryUUID:s}),l=f.useCallback(()=>{let h,g;for(let y=r.length-1;y>=0;y--){if(r[y]?.asset_type!==Bn.CODE_FILE)continue;const v=r[y];if(v?.code_file?.name==="index.html"){h=v?.uuid,g=v?.backend_uuid;break}}n("searchStepsAssetsModal",{backendUUID:g||s,assetUUID:h,answerMode:"search"})},[r,s,n]),c=f.useCallback(()=>{o()},[o]),u=f.useCallback(()=>{const h=new URL(window.location.href);h.pathname=`/apps/${s}`,window.open(h.toString(),"_blank","noopener,noreferrer")},[s]),d=f.useMemo(()=>i.jsx(me,{icon:yTe,size:"xs",className:"duration-150"}),[]),m=f.useMemo(()=>i.jsx(me,{icon:xw,size:"xs",className:"duration-150"}),[]),p=f.useMemo(()=>i.jsx(me,{icon:ph,size:"xs",className:"duration-150"}),[]);return i.jsxs("div",{className:"ml-auto flex items-center gap-1.5",children:[i.jsx(dp,{size:"tiny",pill:!0,leadingComponent:d,onClick:u,toolTip:t({defaultMessage:"View full screen",id:"nnujdEvOPI"})}),i.jsx(dp,{size:"tiny",pill:!0,leadingComponent:m,onClick:l,toolTip:t({defaultMessage:"View source",id:"khjKGjoVqR"})}),i.jsx(dp,{size:"tiny",pill:!0,leadingComponent:p,onClick:c,toolTip:t({defaultMessage:"Download",id:"5q3qC0sC3r"})})]})});B3e.displayName="AppsAccessory";const V3e=A.memo(()=>{const e="assets-accessory",{$t:t}=Q(),{inFlight:n,result:{backend_uuid:r}}=bn(),{exportAllAssets:s,isExporting:a}=t9t({reason:e,entryUUID:r}),o=f.useCallback(()=>s(),[s]);return n?null:i.jsx(dp,{text:t({defaultMessage:"Download all",id:"V1UrPNM96z"}),size:"tiny",icon:vTe,onClick:o,isLoading:a,disabled:a})});V3e.displayName="AssetsAccessory";const W3e=A.memo(({result:e,setIsGeneratingImage:t,isGeneratingImage:n})=>{const r="generate-image-accessory",{createLimit:s}=Ds({reason:r}),{onGenerateImageClick:a}=_Ee({reason:r}),{$t:o}=Q(),{isMobileStyle:l}=ye(),c=f.useMemo(()=>({entryUUID:e.backend_uuid,entryTitle:e.query_str??"",frontendContextUUID:e.frontend_context_uuid??""}),[e.backend_uuid,e.frontend_context_uuid,e.query_str]),u=f.useCallback(({style:m,customInstructions:p,onFailure:h})=>a({entryUUID:e.backend_uuid,imageStyle:m,customInstructions:p,setIsLoadingGeneratedImage:t,onSuccessCallback:()=>t(!1),onFailureCallback:g=>h(g)}),[a,e.backend_uuid,t]),d=f.useCallback(({onClick:m,isRateLimitReached:p,isDisabled:h,buttonIcon:g,text:y})=>i.jsx(dp,{text:y,size:"tiny",icon:g,onClick:m,disabled:h||p||n,extraCSS:"!py-md"}),[n]);return i.jsx(xe.div,{className:"py-sm pl-sm ml-auto",children:!l&&i.jsx(kEe,{entry:c,btnText:o(n?{defaultMessage:"Generating...",id:"A/lLjOnjl0"}:{defaultMessage:"Generate Image",id:"DjAvWI2RyU"}),userCreateLimit:s,isDisabled:!1,onGenerateClick:u,buttonComponent:d})})});W3e.displayName="GenerateImageAccessory";const $3e=f.memo(({idx:e,result:t,sbsEntriesGroup:n,isLastResult:r,isFirstResult:s,lastResultBuffer:a})=>{const{inFlight:o}=Ht(),{scrollToListItem:l}=E5(),{submitQuery:c,shouldShowProductFeedback:u,feedbackEntryUUID:d,shouldShowRecruitmentBanner:m,deleteLastResult:p,setQuote:h}=Oa(),g=f.useCallback(async y=>{o||c(y)},[c,o]);return i.jsx(Gbe,{idx:e,result:t,inFlight:o,isLastResult:r,isFirstResult:s,scrollToListItem:l,submitQuery:g,children:i.jsx(bEe,{scrollToListItem:l,children:i.jsx(Rxe,{children:i.jsx(U3e,{isLastResult:r,isFirstResult:s,sbsEntriesGroup:n,shouldShowProductFeedback:u,feedbackEntryUUID:d??"",shouldShowRecruitmentBanner:m,deleteLastResult:p,setQuote:h,submitQuery:g,scrollToListItem:l,lastResultBuffer:a,idx:e})})})})});$3e.displayName="ThreadEntry";const H3e=A.memo(({children:e,forceVisible:t=!1,unmeasuredHeight:n,rootMargin:r,threshold:s,root:a,ref:o})=>{const[l,c]=f.useState(0),[u,d]=f.useState(t),[m,p]=f.useTransition(),h=f.useRef(null),g=f.useRef(null);f.useEffect(()=>{if(!h.current||!g.current||t)return;const v=new ResizeObserver(b=>{if(!b[0])return;const _=b[0].contentRect.height;c(w=>_||w)}),x=new IntersectionObserver(b=>{b.forEach(_=>{p(()=>d(_.isIntersecting))})},{rootMargin:r,threshold:s,root:a});return v.observe(h.current),x.observe(g.current),()=>{v.disconnect(),x.disconnect()}},[t,n,r,s,a]);const y=f.useCallback(v=>{h.current=v,o instanceof Function?o(v):o&&(o.current=v)},[o]);return i.jsx("div",{style:t?void 0:{minHeight:`${l||n}px`},ref:g,children:i.jsx("div",{ref:y,children:t||u?e:null})})});H3e.displayName="LazyContainer";const Dee=1e3,p9t=1,z3e=A.memo(e=>{const t="thread",{openToast:n}=xn(),{results:r}=Ht(),{setQuote:s}=Oa(),{scrollContainerRef:a}=Bo(),{refs:o}=E5(),l=Nt(),[c,u]=f.useState(!1),d=Q();D8t({reason:t});const m=f.useMemo(()=>zpe(r?.length?r:e.placeholderResults||[]),[r,e.placeholderResults]);f.useEffect(()=>{m.length===0&&ee.error("No thread results found")},[m.length]),f.useEffect(()=>{m.some(x=>x[0]?.has_expired_attachments)&&n(d.formatMessage({id:"zR3dvwKUWo",defaultMessage:"Some files have expired. Please reupload files to continue."}),"error",3)},[m,n,d]);const p=f.useMemo(()=>{if(typeof window>"u")return-1;const v=window.location.hash.slice(1);return v?Number.isNaN(Number(v))?m?.findIndex(x=>x[0]?.backend_uuid===v):Number(v):-1},[m]),h=f.useCallback((v,x)=>{x?o[v]={current:x}:delete o[v]},[o]),g=f.useCallback((v,x)=>v===0||v>=x-2||!c&&v<=p,[p,c]);f.useEffect(()=>{if(~p){const v=setTimeout(()=>{u(!0)},1e4);return()=>{clearTimeout(v)}}},[p]),f.useEffect(()=>{const v=a.current;return v&&(v.scrollTop=0),()=>{u(!1)}},[l,a]),f.useEffect(()=>()=>{s(null)},[]);const y=f.useMemo(()=>m.map((v,x)=>{const b=v[0],_=x===0,w=x===m.length-1;return b?i.jsx(G3e,{result:b,resultsGroup:v.length>1?v:le,isLastResult:w,isFirstResult:_,lastResultBuffer:w?e.lastResultBuffer:void 0,forceVisible:g(x,m.length),idx:x,scrollContainerRef:a,setRef:h},b.uuid||b.backend_uuid):null}),[m,e.lastResultBuffer,g,a,h]);return i.jsx("div",{children:y})});z3e.displayName="Thread";const G3e=A.memo(({result:e,resultsGroup:t,isLastResult:n,isFirstResult:r,forceVisible:s,idx:a,scrollContainerRef:o,lastResultBuffer:l,setRef:c})=>{const u=e.attachments?.length>0,d=f.useMemo(()=>()=>i.jsx(I5,{className:U({"pb-threadInputHeightWithPadding":n&&!u,"pb-threadAttachmentsHeightWithPadding":n&&u})}),[u,n]),m=f.useCallback(p=>c(a,p),[a,c]);return i.jsx(zr,{fallback:d,code:"SOMETHING_WENT_WRONG_ERROR",children:i.jsx(H3e,{forceVisible:s,unmeasuredHeight:Dee,rootMargin:`${Dee*p9t}px 0px`,threshold:0,root:o.current,ref:m,children:i.jsx($3e,{idx:a,result:e,sbsEntriesGroup:t,isLastResult:n,isFirstResult:r,lastResultBuffer:l})})},e.uuid||e.backend_uuid)});G3e.displayName="LazyContainerFactory";const q3e=A.memo(()=>{const{$t:e}=Q(),{firstResult:{parent_info:t}={}}=Ht();if(!t?.mode||!t?.url_slug)return null;const n=t?.mode===Hm.ARTICLE?"page":"search",r=!!t?.preview_image_url;return i.jsx(Ye,{href:`/${n}/${t?.url_slug}`,children:i.jsxs(z,{variant:"background",bgHover:"subtler",className:"p-md shadow-subtle mb-sm relative mx-auto mt-[calc(var(--header-height)+var(--size-md))] flex justify-between rounded-lg border pb-[12px]",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs(L,{color:"light",variant:"tiny",className:"mb-xs gap-x-xs flex items-center",children:[i.jsx(me,{icon:Yv,size:"xs"}),i.jsx("div",{children:e({defaultMessage:"Follow up to",id:"D3eCB2NeGQ"})})]}),i.jsx(L,{variant:"baseSemi",color:"light",className:"line-clamp-1 break-all",children:t?.title})]}),r&&i.jsx("div",{className:"ml-md shrink-0",children:i.jsx(is,{src:t?.preview_image_url,alt:t?.title||"Preview",imageClassName:"h-16 w-16 rounded object-cover",rounded:"sm",fadeIn:!1})})]})})});q3e.displayName="ParentThreadLink";const K3e=({entryUUID:e,frontendContextUUID:t,existingCollection:n,existingFirstThreadQuery:r,filterOnSearchTerm:s,reason:a})=>{const{openModal:o}=vt(),{collections:l}=U3({autoFetch:!0,reason:a}),c=f.useCallback(async()=>{!e||!t||(l?.length?o("collectionSelectModal",{entryUUID:e,currentCollection:n??null,searchTerm:s?r??"":void 0,frontendContextUUID:t}):o("spaceCreateForThread",{frontendContextUUID:t,entryUUID:e}))},[l?.length,e,t,n,r,o,s]);return f.useMemo(()=>({openAddToCollectionModal:c}),[c])};async function h9t({contextUUID:e,title:t,rwToken:n,callback:r,reason:s}){try{const a=await ne.POST("/rest/thread/set_thread_title",s,{body:{context_uuid:e,title:t,read_write_token:n},headers:{"Content-Type":"application/json"}});r?.(a)}catch(a){r?.(a)}}function g9t(e){return qoe(e)?e:ce.PRO}function y9t(e){const t=e?.filter(kh)??le;return t.length>0?t:[$i.web]}function v9t(){if(typeof window>"u")throw new Error("useCreateTaskFromThread should only be used on the client");const[e,t]=f.useState(!1),[n,r]=f.useState(!1),{hasAccessToProFeatures:s}=yt(),a=_t(),{firstResult:o}=Ht(),l=dBe(),c=o?.query_str||l.first_query,u=f.useMemo(()=>g9t(o?.display_model),[o?.display_model]),d=f.useMemo(()=>o?.sources?.sources?y9t(o.sources.sources):[$i.web],[o?.sources?.sources]),m=f.useMemo(()=>s&&!!c,[s,c]),p=f.useCallback(()=>{m&&t(!0)},[m]),h=f.useCallback(()=>{t(!1)},[]),g=f.useCallback(()=>{t(!1),r(!0)},[]),y=f.useCallback(()=>{r(!1),a.push("/account/tasks")},[a]),v=f.useCallback(()=>{r(!1)},[]),x=f.useMemo(()=>{if(!c)return;const b=new Date;return{title:"",prompt:c,schedule:{kind:"DAILY",hour:b.getHours(),minute:b.getMinutes(),day:b.getDate(),month:b.getMonth(),year:b.getFullYear(),dayOfWeek:b.getDay()},searchModel:u,sources:d}},[c,u,d]);return f.useMemo(()=>({canCreateTask:m,isTaskModalOpen:e,handleCreateTask:p,handleTaskModalClose:h,handleTaskModalSuccess:g,taskPrefillData:x,showConfirmationToast:n,handleConfirmationToastSettings:y,handleConfirmationToastDismiss:v}),[m,p,h,g,e,x,n,y,v])}const x9t=e=>{const{openToast:t}=xn(),[n,r]=f.useState(!1),s=f.useCallback(async(a,o)=>{try{r(!0),t("Exporting thread...","refresh",10);const l=await o(),c=atob(l.file_content_64),u=new Array(c.length);for(let g=0;g<c.length;g++)u[g]=c.charCodeAt(g);const d=new Uint8Array(u),m=new Blob([d],{type:`application/${a}`}),p=window.URL.createObjectURL(m),h=document.createElement("a");h.href=p,h.download=l.filename,h.style.display="none",document.body.appendChild(h),h.click(),setTimeout(()=>{document.body.removeChild(h),window.URL.revokeObjectURL(p)},1e3),t("Export succeeded","success",3)}catch{t(e,"error")}finally{r(!1)}},[t,e]);return f.useMemo(()=>({handleExport:s,isExporting:n}),[s,n])},b9t=({reason:e})=>{const n=Q().formatMessage({defaultMessage:"Failed to export answer",id:"UiPrX3hXY8"}),{handleExport:r,isExporting:s}=x9t(n),a=f.useCallback(async(o,l)=>{await r(l,()=>mie({thread_uuid:o,format:l,reason:e}))},[r,e]);return f.useMemo(()=>({convertContent:a,isExporting:s}),[a,s])},EU=A.memo(({choices:e,...t})=>i.jsx(z,{className:"mt-sm divide-y rounded md:border",...t,children:e.map((n,r)=>n.subMenu?i.jsxs("div",{children:[f.createElement(Tp,{type:"default",...n,rounded:!1,key:r}),n.active&&n.subMenu&&i.jsx(Y3e,{choices:n.subMenu})]}):f.createElement(Tp,{type:"default",...n,rounded:!1,key:r}))}));EU.displayName="RadioCard";const Y3e=A.memo(({choices:e})=>i.jsx(z,{children:e.map((t,n)=>f.createElement(Tp,{type:"radio",showIconLeft:!0,selected:t.active??!1,...t,rounded:!1,key:n}))}));Y3e.displayName="RadioCardSubMenu";const Q3e=A.memo(({onClose:e,isOpen:t,onDelete:n,...r})=>{const{$t:s}=Q(),[a,o]=f.useState(!1),[l,c]=f.useState("all");f.useEffect(()=>{t||(o(!1),c("all"))},[t]);const u=f.useMemo(()=>[{text:s({defaultMessage:"All Threads",id:"2DJ/HRvVaR"}),label:s({defaultMessage:"All your threads will be deleted",id:"YDOzv2WOkx"}),active:l==="all",onClick:()=>{c("all")}},{text:s({defaultMessage:"Standalone Threads",id:"6HJEHjz/aG"}),label:s({defaultMessage:"Only your threads which are not part of a space will be deleted",id:"lFOvDZ2Tnp"}),active:l==="standalone",onClick:()=>{c("standalone")}}],[s,l]),d=f.useMemo(()=>[{text:"Cancel",onClick:e},{text:s(a?{defaultMessage:"Yes, Delete",id:"QEmYhzreEW"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),variant:"rejected",onClick:()=>{a?n(l):o(!0)}}],[s,l,a,e,n]);return i.jsx(Xt,{...r,isOpen:t,onClose:e,title:s(a?l==="all"?{defaultMessage:"Delete all threads?",id:"Kju4ObJhbP"}:{defaultMessage:"Delete standalone threads?",id:"kiKGdmk4lu"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),actionList:d,children:i.jsx("div",{children:a?i.jsx("div",{children:i.jsx(L,{children:s(l==="all"?{defaultMessage:"All your threads will be deleted. This cannot be undone.",id:"U1IQ/Dlkge"}:{defaultMessage:"Your threads which are not part of a space will be deleted. This cannot be undone.",id:"Ko7lNjweFq"})})}):i.jsx(EU,{className:"-mx-sm -my-sm border-none",choices:u})})})});Q3e.displayName="DeleteThreadsModal";const _9t=(e,t)=>{const{value:n,loading:r}=At({flag:"discover-early-fetch",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},X3e=A.memo(({children:e,fetchNextPage:t,hasNextPage:n,showLoadingState:r,itemsLength:s,loadingPlaceholder:a})=>{const o=f.useRef(t);o.current=t;const l=f.useRef(ta(()=>o.current(),300,{leading:!0,trailing:!1})),c=f.useRef(null),u=f.useRef(!1),d=f.useRef(null),{variation:m}=_9t(!1);f.useEffect(()=>{if(!m||!n||s===0)return;const h=()=>{if(!c.current)return;const y=c.current.getBoundingClientRect(),v=window.innerHeight;d.current===null&&(d.current=y.top);const x=window.scrollY||window.pageYOffset,b=document.documentElement.scrollTop,_=document.body.scrollTop,w=x||b||_,C=d.current!==null&&y.top<d.current*.9;(w>100||C)&&!u.current&&(u.current=!0);const S=u.current?Math.min(v*3,1200):0;y.top<=v+S&&l.current()},g=ta(h,100);return window.addEventListener("scroll",g,!0),document.addEventListener("scroll",g,!0),h(),()=>{window.removeEventListener("scroll",g,!0),document.removeEventListener("scroll",g,!0),g.cancel()}},[n,s,m]),aE(c,l.current,{rootMargin:"50px",threshold:0});const p=a||(s===0?i.jsx(z,{className:"py-sm",children:i.jsx(ko,{animateLines:!1,blockCount:12,divider:!0})}):i.jsx(z,{className:"py-md",children:i.jsx(ko,{animateLines:!1,blockCount:1})}));return i.jsxs(i.Fragment,{children:[e,r&&p,s>0&&n&&i.jsx("div",{ref:c,className:"border border-transparent"})]})});X3e.displayName="LibraryItemList";const w9t=({collectionUUID:e,reason:t})=>{const{collections:n}=U3({autoFetch:!0,reason:t});return!e||!n?null:n.find(s=>s.uuid===e)??null},Z3e=A.memo(({type:e,featuredImage:t,title:n,className:r,href:s})=>{if(!t||e!==oo.DISCOVER)return null;const a=i.jsx("div",{className:U("relative size-24 flex-none overflow-hidden rounded-md",r),children:t.includes("images.unsplash.com")?i.jsx("img",{src:t,alt:n,className:"size-full object-cover object-center"}):i.jsx("img",{src:t,alt:n,sizes:"33vw",className:"object-cover object-center"})});return s?i.jsx(Ye,{href:s,children:a}):a});Z3e.displayName="ThreadImage";const C9t=()=>{const{$t:e}=Q();return f.useMemo(()=>({yearAgo:e({defaultMessage:"year ago",id:"FzcTXH29w0"}),yearsAgo:e({defaultMessage:"years ago",id:"zJmD8CS6cm"}),monthAgo:e({defaultMessage:"month ago",id:"bZWV9MmB/N"}),monthsAgo:e({defaultMessage:"months ago",id:"Lui0j+6Np9"}),dayAgo:e({defaultMessage:"day ago",id:"G4Y/+2FJhb"}),daysAgo:e({defaultMessage:"days ago",id:"vEpDmSBrwP"}),hourAgo:e({defaultMessage:"hour ago",id:"7v28g+bbYy"}),hoursAgo:e({defaultMessage:"hours ago",id:"2GaNTzDbM2"}),minutesAgo:e({defaultMessage:"minutes ago",id:"9aNLtXrhB8"}),minuteAgo:e({defaultMessage:"minute ago",id:"G8L9c8oAYi"}),justNow:e({defaultMessage:"Just now",id:"bxv59Vvssz"}),justNowShort:e({defaultMessage:"Now",id:"tgvES0v2HS"})}),[e])},J3e=A.memo(({className:e})=>{const t=_t(),n=f.useCallback(()=>{t.push("/account/tasks")},[t]),{variation:r,loading:s}=Ff(!1);return s?null:i.jsxs(L,{variant:"tiny",color:"super",className:U("gap-x-xs flex flex-row items-center hover:cursor-pointer",e),onClick:n,children:[i.jsx(me,{icon:zd,size:"xs",className:"-translate-y-px"}),r?i.jsx(pe,{defaultMessage:"Automation",id:"Fn4YKyl4lm"}):i.jsx(pe,{defaultMessage:"Task",id:"0wJ7N+noSq"})]})});J3e.displayName="TaskIndicator";const cR=A.memo(({icon:e,count:t,textVariant:n="tiny",textColor:r="light",className:s})=>i.jsxs("div",{className:"gap-x-xs flex items-center",children:[i.jsx(L,{variant:n,color:r,className:s,children:i.jsx(me,{icon:e,size:"sm"})}),i.jsx(L,{variant:n,color:r,className:s,children:GA(t)})]}),(e,t)=>e.count===t.count&&e.icon===t.icon&&e.className===t.className),e5e=A.memo(({threadAccess:e,socialInfo:t,textVariant:n,textColor:r,className:s})=>{if(!e||!t||CVe(e))return null;const a=t.view_count??0,o=t.fork_count??0;return i.jsxs(i.Fragment,{children:[a>0&&i.jsx(cR,{icon:WC,count:a,textColor:r,textVariant:n,className:s}),o>0&&i.jsx(cR,{icon:Yv,count:o,textColor:r,textVariant:n,className:s})]})});e5e.displayName="ThreadSocial";const S9t=he(async()=>ae(()=>import("./TimeAgoTooltip-CQmkbC5i.js"),__vite__mapDeps([163,3,1,4,5,6]))),t5e=()=>{const{$t:e}=Q(),{isEnterprise:t}=gn({reason:"temporary-thread-tooltip"});return e(t?{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, data retention policies, or organizational requirements.",id:"BJL0VPkJd3"}:{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, or data retention policies.",id:"mxG1FiTDFj"})},n5e=A.memo(({type:e,threadCount:t,threadAccess:n,lastUpdated:r,socialInfo:s,expiry:a,source:o,displayModel:l})=>{const c=C9t(),{locale:u,$t:d}=Q(),m=n?EVe(n):null,p=Q(),h=f.useMemo(()=>{if(!a)return null;const v=a.endsWith("Z")?a:`${a}Z`,x=new Date(v);return hE(p,x,{style:"short"},1e3*60*60*24)},[a,p]),g=f.useMemo(()=>{if(!a)return null;const v=a.endsWith("Z")?a:`${a}Z`;return new Date(v).toLocaleString(u,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},[a,u]),y=t5e();return i.jsxs("div",{className:"gap-x-md flex items-center",children:[l?i.jsx(M9t,{displayModel:l}):null,h&&i.jsx(pn,{tooltipText:y,tooltipLayout:"right",asChild:!0,children:i.jsxs(L,{variant:"tiny",color:"light",className:"pr-sm pl-xs border-subtler flex cursor-default items-center gap-x-0.5 rounded-full border border-dashed py-0.5",children:[i.jsx(me,{icon:xne,size:"xs"}),d({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"})]})}),h?i.jsx(pn,{tooltipText:g,tooltipLayout:"right",children:i.jsx(L,{variant:"tiny",color:"light",className:"cursor-default",children:d({defaultMessage:"Expires {expiry}",id:"KhQvNJGIsK"},{expiry:h})})}):r&&i.jsx(S9t,{timestamp:r,translations:c,locale:u}),o&&o==="perplexity_tasks"&&i.jsx(J3e,{}),i.jsx(e5e,{socialInfo:s,threadAccess:n}),!!t&&t>1&&i.jsx(cR,{icon:KR,count:t}),e===oo.COLLECTION&&yle(n)&&i.jsxs(L,{className:"gap-x-xs ml-xs flex items-center",variant:"tiny",color:"light",testId:"thread-shared-indicator",children:[m&&i.jsx(me,{icon:m,size:"xs",className:"-mt-px"}),i.jsx("span",{children:d({defaultMessage:"Shared",id:"kWI6zXRaHY"})})]})]})});n5e.displayName="ThreadMetadata";const E9t=["pplx_alpha","pplx_beta"],M9t=({displayModel:e})=>{const{$t:t}=Q();if(!e||!E9t.includes(e))return null;const n=e==="pplx_alpha"?t({defaultMessage:"Research",id:"JEe7dVso7F"}):e==="pplx_beta"?t({defaultMessage:"Labs",id:"ylFNoY79wa"}):null,r=e==="pplx_alpha"?kR:e==="pplx_beta"?BC:null;return i.jsxs(L,{variant:"tiny",color:"light",className:"pr-sm border-subtlest flex items-center gap-x-0.5 rounded-full border py-0.5 pl-1.5",children:[r&&i.jsx(me,{icon:r,size:"xs"}),n]})},r5e=f.memo(({title:e,preview:t,threadCount:n,lastUpdated:r,href:s="/",rwToken:a,socialInfo:o,showActionMenu:l=!0,authorImage:c,threadAccess:u,type:d,featuredImage:m,entryUUID:p,contextUUID:h,collection:g,expiry:y,onRemoveExpiration:v,source:x,isIncognitoThread:b,displayModel:_,isSelectable:w,isSelected:C,onSelect:S,isStreaming:E})=>{const M="thread-item",k=w9t({collectionUUID:g?.uuid,reason:M}),{deleteThread:T}=Tx({reason:M}),{removeThreadFromCollection:j}=Fh({reason:M}),{trackEvent:R}=Me(),[O,P]=f.useState(!1),N=f.useCallback(async X=>{T({entryUUID:X,collectionSlug:k?.slug}),R("delete thread from history click",{entryUUID:X})},[k?.slug,T,R]),{openAddToCollectionModal:I}=K3e({entryUUID:p,existingCollection:k,reason:M,frontendContextUUID:h}),D=f.useCallback(X=>{X==="add"?R("click add thread to space",{contextUUID:h,isBookmark:!1}):R("click swap thread space",{contextUUID:h,isFromBookmark:!1,collectionUUID:k?.uuid||""}),I()},[k,h,R,I]),F=f.useCallback(()=>{R("click remove thread from space",{contextUUID:h,collectionUUID:k?.uuid||"",isBookmark:!1}),j({entryUUID:p,oldCollectionUUID:k?.uuid,frontendContextUUID:h,collectionSlug:k?.slug})},[k?.uuid,k?.slug,h,p,j,R]),B=f.useCallback(()=>D("add"),[D]),V=f.useCallback(()=>D("swap"),[D]),$=f.useCallback(()=>{P(!0),US(p,()=>{v()})},[p,v]),G=f.useCallback(()=>S?.(!C),[C,S]);return i.jsxs(z,{className:"relative",children:[i.jsx(it,{initial:!1,children:w&&!E&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"-translate-x-sm top-md mt-three absolute right-full",children:i.jsx(T1,{checked:C??!1,toggleChecked:G})})}),i.jsxs("div",{className:"gap-x-md py-md group relative flex items-center",children:[i.jsx(Z3e,{featuredImage:m,type:d,title:e,href:s}),i.jsxs("div",{className:"gap-y-sm flex w-full grow flex-col",children:[i.jsxs(z,{className:"flex justify-between",children:[i.jsx(Ye,{href:s,className:"group block overflow-x-hidden",children:i.jsxs(z,{children:[i.jsxs(xe.div,{className:"gap-x-sm flex items-center",layout:!0,layoutRoot:!0,children:[(!!c||d===oo.COLLECTION)&&i.jsx(Rt,{size:"small",user:c??void 0}),i.jsx(L,{className:"gap-sm flex grow items-center",variant:"baseSemi",children:i.jsxs(wl,{children:[i.jsx(it,{initial:!1,children:E&&i.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"text-super",children:i.jsx(as,{size:14})},"spinner")}),i.jsx(xe.div,{layout:"position",transition:{duration:.15,ease:wu},"data-testid":`thread-title-${e}`,className:"md:group-hover:text-super line-clamp-1 w-full break-all",children:i.jsx(vU,{speed:"slow",active:!!E,children:e})},e)]})})]}),i.jsx(L,{color:"light",className:"mt-two line-clamp-2 text-balance",variant:"small",children:t})]})}),i.jsx(z,{className:U("duration-150",{"opacity-0":w,"pointer-events-none group-hover:opacity-0":w}),children:i.jsx(P5,{show:l,currentSpace:k,showConvertThreadToArticle:!1,onDelete:N,onAddToSpace:B,onSwapSpace:V,onRemoveFromSpace:F,rwToken:a,contextUUID:h,threadAccess:u,collectionSlug:g?.slug,type:d,showSaveAsFileToSpace:!1,expiry:O?void 0:y,onRemoveExpiration:O?void 0:$,buttonSize:"tiny",threadId:p,isIncognitoThread:b})})]}),i.jsx("div",{className:l?"mt-xs":"mt-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(n5e,{type:d,threadCount:n,threadAccess:u,lastUpdated:r,socialInfo:o??null,expiry:y,source:x,displayModel:_}),i.jsx("div",{className:"gap-x-xs flex items-center",children:g?.title&&d===oo.LIBRARY&&i.jsx(Ye,{href:`/spaces/${g?.slug}`,className:"block",children:i.jsx(z,{className:"px-xs rounded-full border",children:i.jsxs(L,{variant:"tiny",className:"gap-x-xs px-sm py-xs flex cursor-pointer select-none items-center transition duration-300 hover:opacity-70",testId:"thread-collection-pill",children:[i.jsx(Ru,{unified:g.emoji,size:"tiny"}),i.jsx("div",{className:"line-clamp-1",children:g.title})]})})})})]})})]})]})]})});r5e.displayName="ThreadItem";var oo;(function(e){e.LIBRARY="library",e.COLLECTION="collection",e.DISCOVER="discover",e.SEARCH="search",e.INCOGNITO_SEARCH="incognitoSearch"})(oo||(oo={}));const k9t="temporary-threads",Fee=e=>{Qt(k9t,String(e),{expires:Sr})};function T9t(e){let t;switch(e.mode){case"CONCISE":t="concise";break;case"COPILOT":t="copilot";break;case"ARTICLE":t="article";break}return{title:e.title??"",preview:"",threadCount:1,lastUpdated:e.lastUpdated??"",href:`/search/${e.slug}`,rwToken:e.rwToken??"",focus:e.focus,entryUUID:e.entryUUID??"",contextUUID:e.contextUUID??"",copilot:!1,socialInfo:e.socialInfo??null,collectionUUID:e.collectionInfo?.uuid??null,authorImage:null,featuredImage:null,thumbnailImage:null,threadAccess:null,collection:e.collectionInfo?{uuid:e.collectionInfo?.uuid??"",title:e.collectionInfo?.title??"",slug:e.collectionInfo?.slug??"",emoji:e.collectionInfo?.emoji??""}:void 0,mode:t,expiry:null,source:e.source??null,displayModel:e.displayModel,slug:e.slug??""}}const N9t=A.memo(({threads:e,fetchNextPage:t,hasNextPage:n=!1,showLoadingState:r=!1,showEmptyState:s=!1,type:a,showTemporaryThreads:o,setShowTemporaryThreads:l,searchTerm:c,invalidateThreadsQuery:u,ascending:d,setAscending:m,isFetchingNextPage:p,source:h,setSource:g,threadType:y,setThreadType:v,setDeleteModalOpen:x,deleteModalOpen:b,streamingThreads:_})=>{const{$t:w}=Q(),C=f.useMemo(()=>(e??[]).map(z$e),[e]),S=Qe(),[E,M]=f.useState(!1),[k,T]=f.useState([]),{isMobileStyle:j}=ye(),R=f.useRef(c),{deleteAllThreads:O,deleteThreads:P}=Tx({reason:"threads-list"}),[N,I]=f.useState(null),D=f.useCallback(te=>{O(te),x(!1)},[O,x]),F=f.useCallback(te=>{T(se=>se.includes(te)?se.filter(de=>de!==te):[...se,te])},[]),B=f.useCallback(()=>{M(!1),T([])},[]);f.useEffect(()=>{R.current!==c&&(B(),R.current=c)},[c,B]);const V=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"Newest First",id:"dZYazP4QWO"}),onClick:()=>{m(!1),B()},show:!0,active:!d},{type:"default",text:w({defaultMessage:"Oldest First",id:"FqI37DU6LJ"}),onClick:()=>{m(!0),B()},show:!0,active:d}],[d,w,m,B]),$=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{g("all"),B()},active:h==="all"},{type:"default",text:w({defaultMessage:"Comet",id:"9WmFFQw7ns"}),onClick:()=>{g("comet"),B()},active:h==="comet"}],[h,w,g,B]),G=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{v("all"),B()},active:y==="all"},{type:"default",text:w({defaultMessage:"Research",id:"JEe7dVso7F"}),onClick:()=>{v("research"),B()},active:y==="research"},{type:"default",text:w({defaultMessage:"Labs",id:"ylFNoY79wa"}),onClick:()=>{v("labs"),B()},active:y==="labs"}],[y,w,v,B]),X=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"Show",id:"K7AkdLoAj6"}),onClick:()=>{l(!0),Fee(!0),B()},active:o},{type:"default",text:w({defaultMessage:"Hide",id:"VA/Z1SW3vH"}),onClick:()=>{l(!1),Fee(!1),B()},active:!o}],[o,w,l,B]),Y=rn(),W=f.useMemo(()=>i.jsx(o5e,{}),[]),H=f.useCallback(()=>x(!1),[x]),Z=f.useCallback(()=>{P({entryUUIDs:k,callback:B})},[P,k,B]),{isIncognito:re,incognitoType:q}=oa({reason:"threads-list"}),J=f.useMemo(()=>h!=="all"||y!=="all",[h,y]);return i.jsxs(i.Fragment,{children:[i.jsxs(X3e,{fetchNextPage:t,hasNextPage:n,showLoadingState:p||r,itemsLength:C.length,loadingPlaceholder:W,children:[re&&i.jsx("div",{"data-color-scheme":"dark",children:i.jsxs(z,{className:"mt-md p-md gap-sm flex items-center justify-start rounded-md",variant:"subtler",children:[i.jsx(Bu,{inverse:!0,incognitoType:q}),i.jsxs("div",{children:[i.jsx(L,{variant:"smallBold",color:"white",children:w({defaultMessage:"You are incognito",id:"pBm4msoyyh"})}),q===xu.GOVERNMENT?i.jsx(L,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads will have Zero Data Usage active",id:"Yq0Q7xmZMb"})}):i.jsx(L,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads are anonymous, won't appear in your library, and expire after 24 hours.",id:"/FQ4Dx5TpY"})})]})]})}),i.jsx(z,{className:U("gap-sm pt-md flex items-center justify-between",{"bg-base pb-md -mb-md sticky top-0 z-10":!j}),variant:"background",children:i.jsxs(a5e,{children:[i.jsxs("div",{className:"gap-sm flex items-center",children:[!j&&i.jsxs(z,{className:"pr-sm relative flex-1 shrink-0",children:[i.jsx(s5e,{selectEnabled:E,resetSelect:B,setSelectEnabled:M}),i.jsx(z,{className:"absolute right-0 top-1/2 h-5 -translate-y-1/2 border-r"})]}),Y&&i.jsx(Jt,{placement:"bottom-start",isMobileStyle:j,items:$,wrapperClassName:"inline-flex",onOpen:()=>I("source"),onClose:()=>I(null),isOpen:N==="source",children:i.jsx(eu,{variant:h==="all"?"border":"primary",text:h==="all"?w({defaultMessage:"Source",id:"aH4De2Y20k"}):w({defaultMessage:"Source: {comet}",id:"pAvXy3TmGv"},{comet:"Comet"})})}),i.jsx(Jt,{placement:"bottom-start",isMobileStyle:j,items:G,wrapperClassName:"inline-flex",onOpen:()=>I("type"),onClose:()=>I(null),isOpen:N==="type",children:i.jsx(eu,{variant:y==="all"?"border":"primary",text:w(y==="all"?{defaultMessage:"Type",id:"+U6ozcnv4r"}:y==="research"?{defaultMessage:"Type: Research",id:"NeGk8fwf1M"}:{defaultMessage:"Type: Labs",id:"yLIVi0dTj2"})})}),i.jsx(Jt,{placement:"bottom-start",isMobileStyle:j,items:X,wrapperClassName:"inline-flex",onOpen:()=>I("temporary"),onClose:()=>I(null),isOpen:N==="temporary",children:i.jsx(eu,{variant:"border",text:w(o?{defaultMessage:"Temporary Threads: Show",id:"j0VHwshtHd"}:{defaultMessage:"Temporary Threads: Hide",id:"X8Kc6bnTnf"})})})]}),i.jsx("div",{className:U("gap-sm flex items-center",{}),children:i.jsx(Jt,{placement:Y?"bottom-start":"bottom-end",isMobileStyle:j,wrapperClassName:"inline-flex",items:V,onOpen:()=>I("sort"),onClose:()=>I(null),isOpen:N==="sort",children:i.jsx(eu,{text:w(d?{defaultMessage:"Sort: Oldest",id:"K8y5AUAIdW"}:{defaultMessage:"Sort: Newest",id:"ouRV0Q2JpB"})})})})]})}),s&&C.length===0?i.jsxs(z,{className:"mt-xl p-xl flex flex-col items-center justify-center rounded-md",children:[i.jsx(L,{variant:"baseSemi",children:J||c?w({defaultMessage:"Nothing turned up",id:"Rn55YzpVb0"}):w({defaultMessage:"No {threads} yet",id:"5zP56HMUgk"},{threads:"Threads"})}),J||c?i.jsx(L,{variant:"small",color:"light",children:w({defaultMessage:"Try different keywords, check for typos, or adjust your filters.",id:"3DJFcRxvex"})}):i.jsx(L,{variant:"small",color:"light",children:i.jsx(pe,{defaultMessage:"Try creating a <link>new Thread</link>",id:"18hNnPSiwJ",values:{link:te=>i.jsx(Ye,{className:"text-super",href:"/",children:te})}})})]}):i.jsxs("div",{className:"relative",children:[i.jsxs(z,{className:"relative divide-y",children:[_.filter(te=>!C.find(se=>se.slug===te.slug)).filter(te=>!C.find(se=>se.entryUUID===te.id)).filter(te=>te.slug!==null).map(te=>i.jsx(uR,{thread:T9t(te),invalidateThreadsQuery:u,selectEnabled:!1,selectedThreads:k,showActionMenu:!1,handleSelect:F,type:a,isStreaming:!0},te.slug||te.entryUUID)),C.map(te=>i.jsx(uR,{thread:te,invalidateThreadsQuery:u,selectEnabled:E,selectedThreads:k,showActionMenu:a!==oo.DISCOVER&&S,handleSelect:F,type:a},te.slug))]}),r&&i.jsx("div",{className:"bg-base absolute inset-0 opacity-50"})]})]}),i.jsx(Q3e,{isOpen:b,onClose:H,onDelete:D}),i.jsx(it,{initial:!1,children:E&&i.jsx(xe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2,bounce:.2,type:"spring"},className:"bottom-md fixed inset-x-0 flex items-center justify-center",children:i.jsxs(z,{variant:"raised",className:"p-sm pl-md shadow-subtle bottom-md flex w-[400px] items-center justify-between rounded-xl border",children:[i.jsx(L,{variant:"small",color:"light",children:w({defaultMessage:"{count, plural, =0 {No Threads} one {# Thread} other {# Threads}} Selected",id:"MqdlBPNiqL"},{count:k.length})}),i.jsx(ge,{text:w({defaultMessage:"Delete {count, plural, =0 {Threads} one {# Thread} other {# Threads}}",id:"nBPaP34ufb"},{count:k.length}),variant:"rejected",size:"small",disabled:k.length===0,onClick:Z})]})})})]})}),uR=A.memo(({thread:e,invalidateThreadsQuery:t,selectEnabled:n,selectedThreads:r,handleSelect:s,type:a,showActionMenu:o,isStreaming:l})=>{const c=f.useCallback(u=>{s(e.entryUUID)},[s,e.entryUUID]);return i.jsx(r5e,{href:e.href,rwToken:e.rwToken,title:e.title,preview:e.preview??"",threadCount:e.threadCount,lastUpdated:e.lastUpdated,copilot:e.copilot,socialInfo:e.socialInfo,threadAccess:e.threadAccess??null,authorImage:e.authorImage,featuredImage:e.featuredImage??null,showActionMenu:o,type:a,entryUUID:e.entryUUID,contextUUID:e.contextUUID,collection:e.collection??null,expiry:e.expiry,onRemoveExpiration:t,source:e.source,isIncognitoThread:!1,displayModel:e.displayModel,isSelectable:n,isSelected:r.includes(e.entryUUID),onSelect:c,isStreaming:l},e.entryUUID)});uR.displayName="ThreadItemWrapper";N9t.displayName="ThreadsList";const eu=A.memo(({text:e,variant:t="border",onClick:n,chevron:r=!0,icon:s,disabled:a,className:o})=>{const{isMobileStyle:l}=ye();return i.jsx(ge,{variant:t,size:l?"small":"tiny",text:e,chevron:r,onClick:n,icon:s,extraCSS:U(a?"opacity-50 pointer-events-none":"",o)})});eu.displayName="FilterButton";const s5e=A.memo(({selectEnabled:e,resetSelect:t,setSelectEnabled:n})=>{const{$t:r}=Q(),s=f.useCallback(()=>{n(!e),e&&t()},[e,t,n]);return i.jsxs("div",{className:"inline-grid w-max grid-cols-1 grid-rows-1",children:[i.jsx(eu,{text:r(e?{defaultMessage:"Done",id:"JXdbo8Vnlw"}:{defaultMessage:"Select",id:"kQAf2d9u+x"}),onClick:s,chevron:!1,variant:e?"primary":"border",className:"col-start-1 row-start-1"}),i.jsx(eu,{text:r({defaultMessage:"Select",id:"kQAf2d9u+x"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1}),i.jsx(eu,{text:r({defaultMessage:"Done",id:"JXdbo8Vnlw"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1})]})});s5e.displayName="SelectButton";const a5e=A.memo(({children:e})=>{const{isMobileStyle:t}=ye();return t?i.jsx("div",{className:"w-full",children:i.jsx("div",{className:"-mx-md",children:i.jsx(ul,{showScrollIndicator:!1,orientation:"horizontal",children:i.jsx("div",{className:"gap-sm px-md flex items-center",children:e})})})}):i.jsx(ul,{showScrollIndicator:!1,orientation:"horizontal",children:i.jsx("div",{className:"gap-sm flex w-full items-center justify-between",children:e})})});a5e.displayName="FiltersWrapper";const o5e=A.memo(()=>i.jsxs(z,{className:"gap-x-md py-md gap-sm group relative flex flex-col items-start",children:[i.jsxs("div",{className:"gap-two flex w-full flex-col",children:[i.jsxs("div",{className:"grid items-center",children:[i.jsx(L,{variant:"baseSemi",className:"col-start-1 row-start-1",children:""}),i.jsx(z,{variant:"subtler",className:"col-start-1 row-start-1 h-4 w-[120px] rounded-full"})]}),i.jsxs("div",{className:"grid w-full items-center",children:[i.jsxs(L,{variant:"small",className:"col-start-1 row-start-1",children:["",i.jsx("br",{}),""]}),i.jsxs("div",{className:"col-start-1 row-start-1 flex w-full flex-col gap-2",children:[i.jsx(z,{variant:"subtler",className:"h-2 w-2/3 rounded-full"}),i.jsx(z,{variant:"subtler",className:"h-2 w-2/3 rounded-full"})]})]})]}),i.jsxs("div",{className:"grid items-center",children:[i.jsx(L,{variant:"tiny",className:"col-start-1 row-start-1",children:""}),i.jsx(z,{variant:"subtler",className:"col-start-1 row-start-1 h-2 w-[80px] rounded-full"})]})]}));o5e.displayName="ThreadItemSkeleton";const i5e=A.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=Rn,icon:a,...o})=>{const[l,c]=f.useState(t),u=f.useRef(null),{$t:d}=Q();f.useEffect(()=>{c(t)},[t]);const m=f.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),p=f.useCallback(()=>{c(!1),s(),m()},[s,m]);return f.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{p()},n*1e3)),()=>{m()}),[l,n,t,s,p,m]),i.jsx(Nu,{children:i.jsx(it,{children:l&&i.jsx(xe.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:ao,...o,children:i.jsxs(z,{variant:"raised",className:U("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&i.jsx("div",{className:"p-sm bg-subtler dark:bg-offsetPlus my-[12px] flex aspect-square items-center justify-center rounded-md",children:i.jsx(me,{icon:a,className:"text-quiet",size:"md"})}),i.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[i.jsx(L,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),i.jsxs(z,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[i.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-settings-button"}),i.jsx(z,{className:"border-t"}),i.jsx(Te,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:p,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-dismiss-button"})]})]})]})},"task-creation-toast")})})});i5e.displayName="TaskCreationConfirmationToast";const P5=A.memo(({show:e,isBookmarked:t,currentSpace:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:o,onConvertToArticle:l,onRename:c,threadAccess:u,contextUUID:d,rwToken:m,collectionSlug:p,type:h,isConverting:g,showConvertThreadToArticle:y,className:v,firstResultBackendUUID:x,showSaveAsFileToSpace:b=!0,onBookmark:_,showBookmarkButton:w=!1,title:C,expiry:S,onRemoveExpiration:E,onOpen:M,onClose:k,buttonSize:T="small",threadId:j,isIncognitoThread:R,isNativeMobileVariant:O=!1})=>{const P="thread-overflow-dropdown",N=Q(),[I,D]=f.useState(!1),{trackEvent:F}=Me(),{isMobileStyle:B}=ye(),V=N.formatMessage({defaultMessage:"Export as PDF",id:"syduyBQ0eU"}),$=N.formatMessage({defaultMessage:"Export as Markdown",id:"d3prfCUwCt"}),G=N.formatMessage({defaultMessage:"Export as DOCX",id:"yQ3Z7H5E8P"}),[X,Y]=f.useState(!1),{session:W}=Ct(),{convertContent:H,isExporting:Z}=b9t({reason:P}),{fileRepoInfo:re}=Do({reason:P}),q=re?.file_repository_type==="COLLECTION",J=!!m,te=f.useMemo(()=>({pdf:"export thread PDF clicked",md:"export thread MD clicked",docx:"export thread DOCX clicked"}),[]),{collection:se}=kl({collectionSlug:p,reason:P}),{data:de}=OO({fileRepoInfo:re,fileName:j??"",reason:P}),{saveThreadToSpace:fe,removeThreadFromSpace:ve}=bme({fileRepoInfo:re,fileExists:de??!1,reason:P}),ue=f.useCallback(async et=>{x&&(F(te[et],{}),await H(x,et))},[x,te,F,H]),ie=w&&B&&!!_,be=n===null&&(h===oo.LIBRARY||h===oo.SEARCH)&&!!s,Se=n!==null&&J&&!!a,Ce=n!==null&&!!o,{isUserAtLeastWriter:ke}=Dh({reason:P}),{onShareThreadToSpace:Re,onMakeThreadPrivate:je,isShareable:ct}=iP({threadAccess:u,contextUUID:d,rwToken:m,collectionSlug:p,reason:P}),tt=q&&ke&&!ct&&!!Re,ut=q&&ke&&ct&&!!je,we=J&&!!r,Ue=q&&b&&!de&&!X&&!!se&&se?.user_permission>=2,Ot=J&&!!E&&!!S&&!R,pt=q&&b&&(de||X),[Mt,qe]=f.useState(!1),{canCreateTask:Be,isTaskModalOpen:Oe,handleCreateTask:nt,handleTaskModalClose:St,handleTaskModalSuccess:Yt,taskPrefillData:Ft,showConfirmationToast:Gt,handleConfirmationToastSettings:Cn,handleConfirmationToastDismiss:ln}=v9t(),{variation:Ke,loading:He}=x5(!1),st=f.useMemo(()=>[{type:"default",icon:t?bne:YR,text:t?N.formatMessage({defaultMessage:"Bookmarked",id:"k0fraU5NBY"}):N.formatMessage({defaultMessage:"Add Bookmark",id:"Y4GyA+IDCn"}),show:ie,onClick:_},{type:"default",icon:rr,text:N.formatMessage({defaultMessage:"Add to Space",id:"nB+VQ2svMZ"}),show:be,onClick:s,testId:"thread-add-to-space"},{type:"default",icon:xTe,text:N.formatMessage({defaultMessage:"Swap Space",id:"y3tRs6Jpig"}),show:Se,onClick:a,testId:"thread-swap-space"},{type:"default",icon:Lt,text:N.formatMessage({defaultMessage:"Remove from Space",id:"2B71WoR6Sk"}),show:Ce,onClick:o,testId:"thread-remove-from-space"},{type:"default",icon:Ca,text:N.formatMessage({defaultMessage:"Share thread with Space",id:"kynn3b03Sq"}),show:tt,onClick:et=>{et.preventDefault(),Re()},testId:"thread-share-to-space"},{type:"default",icon:mp,text:N.formatMessage({defaultMessage:"Make thread private",id:"AIUSJMqN6C"}),show:ut,onClick:et=>{et.preventDefault(),je()},testId:"thread-make-private"},{type:"default",icon:bTe,text:N.formatMessage({defaultMessage:"Convert to Page",id:"IcFSSFTdA7"}),show:y,onClick:l,testId:"thread-article-create",disabled:g},{type:"default",icon:_ne,text:N.formatMessage({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),show:Ot,onClick:E},{type:"default",icon:Ca,text:N.formatMessage({defaultMessage:"Save as file to Space",id:"L8nSm8m8qs"}),show:Ue,onClick:()=>{!x||!j||(Y(!0),F("save thread to space clicked",{}),fe(x,j))},testId:"thread-save-to-space"},{type:"default",icon:uu,text:N.formatMessage({defaultMessage:"Remove file from Space",id:"TjcTDl4lU+"}),show:pt,onClick:async()=>{await ve(j??""),Y(!1)},testId:"remove-file-from-space"},{type:"default",icon:zd,text:N.formatMessage({defaultMessage:"Create task",id:"7X1tNR2pav"}),show:Be,onClick:nt,testId:"thread-create-task"},{type:"separator",show:(tt||ut||y)&&!!x},{type:"default",icon:bw,text:V,show:!!x,onClick:()=>ue("pdf"),disabled:Z,testId:"thread-export-pdf"},{type:"default",icon:_Te,text:$,show:!!x,onClick:()=>ue("md"),disabled:Z,testId:"thread-export-md"},{type:"default",icon:vne,text:G,show:!!x,onClick:()=>ue("docx"),disabled:Z,testId:"thread-export-docx"},{type:"separator",show:we&&(be||y)},{type:"default",icon:uu,text:N.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),show:we,onClick:()=>qe(!0),testId:"thread-delete"}],[be,Ce,Se,we,g,Z,y,l,x,N,V,$,G,ue,tt,Re,ut,je,fe,j,Ue,ve,pt,F,ie,_,t,s,o,a,Ot,E,Be,nt]),Vt=d&&m&&W,en=f.useCallback(()=>{D(!0),M?.()},[M]),On=f.useCallback(()=>{D(!1),k?.()},[k]),_e=se?.user_permission&&Ap(se.user_permission),Ge=f.useMemo(()=>i.jsxs("div",{className:"flex min-h-10 flex-col justify-center",children:[i.jsxs("div",{className:"gap-x-sm group relative flex items-center justify-between py-0.5",children:[Vt&&i.jsx(z,{className:"-inset-x-sm absolute -inset-y-0 rounded-lg opacity-0 transition-opacity duration-150 group-hover:opacity-100",variant:"subtler"}),i.jsx(L,{variant:"small",className:"relative line-clamp-1",color:"light",children:C}),Vt&&c&&i.jsx(Te,{size:"tiny",icon:qC,onClick:c,testId:"thread-rename",toolTip:N.formatMessage({defaultMessage:"Rename Thread",id:"4cT2c/aQya"}),extraCSS:"-mr-sm opacity-0 group-hover:opacity-100 transition-opacity duration-150"})]}),n&&!_e&&i.jsxs("div",{className:"gap-x-xs -mt-xs flex h-8 items-center",children:[i.jsx(wTe,{className:"text-quietest size-4 shrink-0 -translate-y-0.5"}),i.jsx("div",{className:"shrink-0 scale-90",children:n.emoji?i.jsx(Ru,{unified:n.emoji,size:"small"}):i.jsx(Ca,{size:16,className:"text-quietest shrink-0 -translate-y-0.5"})}),i.jsx(L,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:n.title})]})]}),[Vt,C,c,N,n,_e]),We=f.useMemo(()=>[{text:N.formatMessage({defaultMessage:"Nevermind",id:"64sfSNetr+"}),onClick:()=>qe(!1),testId:"thread-delete-nevermind"},{text:N.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),variant:"rejected",onClick:()=>{qe(!1),r?.(j??"")},testId:"thread-delete-confirm"}],[N,r,j]),rt=f.useCallback(()=>qe(!1),[]);return!e||st?.every(et=>!et.show)?null:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:v,children:i.jsx(Jt,{items:st,isMobileStyle:B,onOpen:en,onClose:On,placement:"bottom-end",header:C?Ge:void 0,children:O&&B?i.jsx(ge,{testId:"thread-dropdown-menu",size:T,icon:du,variant:"common",pill:!0,extraCSS:U("",{"!text-foreground !bg-offsetPlus":I})}):i.jsx(Te,{testId:"thread-dropdown-menu",size:T,icon:du,extraCSS:U("",{"!text-foreground !bg-offsetPlus":I})})})}),i.jsx(_E,{isOpen:Mt,onClose:rt,message:N.formatMessage({defaultMessage:"Delete thread",id:"2WxP2iMtPx"}),subtitle:N.formatMessage({defaultMessage:"Are you sure you want to delete this thread?",id:"9JVHvYsJ0s"}),actionList:We}),i.jsx(sf,{children:!He&&Ke?i.jsx(v5,{open:Oe,onClose:St,onSave:Yt,initialConfiguration:Ft?iie(Ft):null,source:"thread_dropdown",trackEvent:F}):i.jsx(YF,{open:Oe,onClose:St,onSuccess:Yt,prefill:Ft,source:"thread_dropdown"})}),i.jsx(i5e,{message:N.formatMessage({defaultMessage:"Created task",id:"sYXsMoH4Bc"}),isVisible:Gt,onSettingsClick:Cn,onTimeout:ln,timeout:5,icon:zd})]})});P5.displayName="ThreadOverflowDropdown";const A9t=({reason:e})=>{const{$t:t}=Q(),n=Qe(),{firstResult:{context_uuid:r,thread_access:s=Bae,collection_info:{slug:a}={}}={}}=Ht(),{isEnterprise:o}=gn({reason:e}),{openVisitorLoginUpsell:l}=Xn({enabled:!n}),c=Oo(),{handleAccessChange:u,isShareable:d}=iP({threadAccess:s,contextUUID:r,rwToken:c,collectionSlug:a,reason:e}),m=f.useCallback(y=>{y!==s&&(n?r&&c&&u(y):l({title:t({defaultMessage:"Sign in to save private {threads}",id:"Rf9T7Whe3t"},{threads:"Threads"}),origin:Ie.SHARE_DROPDOWN,sheetModalVariant:"bottom-sheet-gradient"}))},[s,n,r,c,l,t,u]),p=f.useCallback(()=>{o||s===gt.PRIVATE_READ&&n&&m(gt.PUBLIC_READ)},[o,s,n,m]),{accessLevelMenuItems:h,selectedAccessMenuItem:g}=gle({currentAccessLevel:s,onClick:m,isCollection:!1,isPage:!1,reason:e});return f.useMemo(()=>({rwToken:c,thread_access:s,handleShareDropdownClick:p,accessLevelMenuItems:h,selectedAccessMenuItem:g,isThreadSharable:d,context_uuid:r}),[h,r,p,d,c,g,s])},l5e=A.memo(({shareHref:e,shareSource:t,hasMounted:n,maybeContextUUID:r,onClick:s,...a})=>{const{$t:o}=Q(),{trackEvent:l}=Hh(),{openToast:c}=xn(),u=f.useCallback(()=>{s?.(),c(o({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"}),"success",3),navigator.clipboard.writeText(n?l2(decodeURIComponent(e)):""),l("click copy link button",{contextUUID:r,source:t||"copyLinkButton"})},[n,e,t,l,r,s,c,o]);return i.jsx(ge,{clickFeedback:!0,size:"small",onClick:u,toolTip:o({defaultMessage:"Copy link",id:"lbr3Lq2Lnm"}),tooltipLayout:"bottom",icon:Mf,variant:"primary",testId:"copy-link-button",...a})});l5e.displayName="CopyLinkButton";const j9t=({onClick:e,size:t="small",isMobileStyle:n,isNativeMobileVariant:r,testId:s="share-button"})=>{const{$t:a}=Q();return r?i.jsx(ge,{pill:!0,onClick:e,variant:"common",size:t,icon:Oy,extraCSS:"-mr-sm",testId:s}):n?i.jsx(Te,{onClick:e,icon:Oy,variant:"common",size:t,testId:s}):i.jsx(ge,{onClick:e,variant:"primary",size:t,text:a({defaultMessage:"Share",id:"OKhRC6eWRw"}),icon:Oy,testId:s})},c5e=A.memo(({hasMounted:e,shareHref:t,EditorDropDownContent:n,onClick:r,maybeContextUUID:s,size:a="small",showCopyLinkButton:o=!0,contentWidth:l,isOpen:c,onClose:u,isNativeMobileVariant:d=!1})=>{const{isMobileStyle:m}=ye(),{device:{isMacOS:p}}=Et(),g=Dt()?.get("open-share"),[y,v]=f.useState(!1),x=c!==void 0,b=x?c:y;f.useEffect(()=>{g&&(r?.(),v(!0),Gh({}))},[g,r]);const _=f.useCallback(()=>{r?.(),x||v(S=>!S)},[r,x]),w=f.useCallback(()=>{u?.(),x||v(!1)},[x,u]),C=f.useCallback(S=>{(p?S.metaKey&&S.shiftKey&&S.key==="c":S.ctrlKey&&S.shiftKey&&S.key==="c")&&(S.preventDefault(),_())},[p,_]);return f.useEffect(()=>(document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}),[C]),e?i.jsxs("div",{className:"gap-x-sm flex items-center",children:[!m&&o&&i.jsx(l5e,{shareHref:t,hasMounted:e,maybeContextUUID:s,onClick:r}),i.jsx(B3,{content:n,placement:"bottom-end",contentWidth:l,isMobileStyle:m,isOpen:b,onClose:w,children:i.jsx(j9t,{onClick:_,size:a,isMobileStyle:m,isNativeMobileVariant:d,testId:"share-button"})})]}):null});c5e.displayName="ShareDropdown";const u5e=A.memo(({descriptionText:e,shareHref:t,isShareable:n,onlyOrgSharable:r,onlySpaceSharable:s,maybeContextUUID:a,hasMounted:o,icon:l})=>{const{$t:c}=Q(),u="hidden md:block",d="block md:hidden",{trackEvent:m}=Hh(),h=Dt()?.get("open-share"),g=f.useCallback(()=>{document.hasFocus&&(navigator.clipboard.writeText(o?l2(decodeURIComponent(t)):""),m("click copy link button",{contextUUID:a,source:"shareThread"}))},[o,t,m,a]),y=f.useCallback(()=>{navigator.share({text:`${e} ${o?l2(decodeURIComponent(t)):""}`,title:"Perplexity AI"}),m("click mobile native share button",{})},[t,e,o,m]);return f.useEffect(()=>{o&&n&&!h&&g()},[o,n,g,h]),!o||!n?null:i.jsxs("div",{children:[i.jsx("div",{className:"mt-sm",children:i.jsxs(L,{variant:"tiny",color:"super",className:"flex",children:[i.jsx(me,{icon:Yte,className:"mr-xs",size:"xs"}),i.jsx("span",{children:c({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"})})]})}),i.jsxs("div",{className:u,children:[i.jsx(L,{variant:"baseSemi",className:"mb-sm mt-md",children:c(r?{defaultMessage:"Share this link within your Organization",id:"kjiOOzdX3d"}:s?{defaultMessage:"Share this link within your Space",id:"zAEbvlplsJ"}:{defaultMessage:"Share",id:"OKhRC6eWRw"})}),i.jsx(ge,{size:"small",fullWidth:!0,onClick:g,text:c({defaultMessage:"Copy Link",id:"u5aHb4gcxX"}),icon:Mf,clickFeedback:!0,testId:"copy-link-button"})]}),i.jsx("div",{className:d,children:i.jsx("div",{className:"mt-md",children:i.jsx(ge,{variant:"primary",fullWidth:!0,text:c({defaultMessage:"Share",id:"OKhRC6eWRw"}),target:"_blank",icon:l,onClick:y})})})]})});u5e.displayName="SocialShareLinks";const d5e=A.memo(({descriptionText:e,sharableURL:t,isNativeMobileVariant:n=!1})=>{const r="share-thread-dropdown",{$t:s}=Q(),a=ls(),{rwToken:o,thread_access:l,handleShareDropdownClick:c,accessLevelMenuItems:u,selectedAccessMenuItem:d,isThreadSharable:m,context_uuid:p}=A9t({reason:r}),h=i.jsxs("div",{className:"p-sm gap-sm flex flex-col",children:[o!=null&&i.jsxs("div",{children:[i.jsx(L,{variant:"baseSemi",children:s({defaultMessage:"Share this Thread",id:"WMdsw58EMp"})}),i.jsx(EU,{choices:u})]}),i.jsx(u5e,{descriptionText:e,shareHref:t,isShareable:m,onlyOrgSharable:l===gt.ORG_READ,onlySpaceSharable:l===gt.COLLECTION_READ,maybeContextUUID:p,hasMounted:a,icon:d?.icon})]});return i.jsx(c5e,{hasMounted:a,shareHref:t,EditorDropDownContent:h,icon:d?.icon,onClick:c,maybeContextUUID:p,showCopyLinkButton:!1,isNativeMobileVariant:n})});d5e.displayName="ShareThreadDropdown";const MU=f.memo(({visible:e,tweetDescriptionText:t,threadSharedSlug:n,urlSearchParams:r,isNativeMobileVariant:s=!1})=>{const a=ls(),[o,l]=f.useState("");f.useEffect(()=>{if(typeof window>"u")return;const{protocol:m,host:p}=window.location,h=`${m}//${p}/search/${n}?${r?.toString()}`;l(h)},[n,r]);const c=f.useMemo(()=>encodeURIComponent(a?l2(decodeURIComponent(o)):""),[o,a]),u=f.useMemo(()=>t!=null?`Perplexity AI: ${t}`:"Perplexity AI",[t]),d=f.useMemo(()=>U("transition-all duration-300 flex items-center gap-x-xs md:gap-x-0",{"opacity-0":!e,"opacity-100":e}),[e]);return i.jsx("div",{className:d,children:e&&i.jsx(d5e,{descriptionText:u,sharableURL:c,isNativeMobileVariant:s})})});MU.displayName="ThreadShareButtons";const kU=A.memo(({isBookmarked:e,handleAddBookmark:t,handleRemoveBookmark:n,size:r="small",isNativeMobileVariant:s=!1})=>{const{$t:a}=Q(),{isMobileStyle:o}=ye(),l={icon:e?bne:YR,size:r,testId:"article-bookmark-button",toolTip:a(e?{defaultMessage:"Bookmarked",id:"k0fraU5NBY"}:{defaultMessage:"Bookmark",id:"Rs4kCECwJ8"}),onClick:e?n:t};return s&&o?i.jsx(ge,{...l,variant:"common",pill:!0}):i.jsx(Te,{...l,pill:!0,variant:"common"})});kU.displayName="BookmarkButton";const f5e=A.memo(({currentTitle:e,isBookmarked:t,effectiveCollection:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:o,onConvertToArticle:l,onRename:c,isConverting:u,showConvertThreadToArticle:d,rwToken:m,onBookmark:p,onRemoveBookmark:h,showBookmarkButton:g,onRemoveExpiration:y,showExportButton:v})=>{const x=ls(),b=Qe(),{session:_}=Ct(),w=Dt(),{firstResult:{backend_uuid:C,status:S,context_uuid:E,privacy_state:M,thread_access:k,thread_title:T,author_image:j,thread_url_slug:R,expiry_time:O,query_str:P}={},inFlight:N}=Ht(),{isMax:I,isPro:D}=yt(),F=S===cr.PENDING,B=M===Cp.INCOGNITO;return i.jsxs("div",{className:"px-md py-sm flex h-full items-center justify-between",children:[i.jsx("div",{className:"pointer-events-auto flex min-w-0 flex-1 items-center",children:i.jsx(Rt,{user:j??(b&&N?_?.user?.image??void 0:void 0),showProBadge:D,showMaxBadge:I,size:"medium"})}),i.jsxs("div",{className:"gap-sm pointer-events-auto flex items-center",children:[g&&i.jsx(kU,{isBookmarked:t,handleAddBookmark:p,handleRemoveBookmark:h,isNativeMobileVariant:!0}),!B&&!F&&i.jsx(MU,{visible:!!R,tweetDescriptionText:T||P,threadSharedSlug:R??void 0,urlSearchParams:w,isNativeMobileVariant:!0}),i.jsx(P5,{className:"ml-sm",isNativeMobileVariant:!0,title:e,show:x&&!F,isBookmarked:t,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:o,currentSpace:n,onConvertToArticle:l,onRename:c,isConverting:u,showConvertThreadToArticle:d,rwToken:m??void 0,contextUUID:E,threadAccess:k,collectionSlug:n?.slug,type:B?oo.INCOGNITO_SEARCH:oo.SEARCH,firstResultBackendUUID:v?C:void 0,onBookmark:t?h:p,showBookmarkButton:!1,onRemoveExpiration:y,expiry:O,threadId:R??"",isIncognitoThread:B})]})]})});f5e.displayName="CometMobileHeader";const R9t=e=>e&&(e.viewCount>0||e.forkCount>0),m5e=A.memo(({textVariant:e="small"})=>{const{socialStats:t,firstResult:n}=Ht(),{$t:r}=Q(),s=t&&t.viewCount>0,a=t&&t.forkCount>0;return!n?.backend_uuid||!s&&!a?null:i.jsxs(z,{className:"gap-x-sm flex items-center",children:[s&&i.jsx(pn,{tooltipText:r({defaultMessage:"Views",id:"akF0LyBDxT"}),tooltipLayout:"bottom",asChild:!0,children:i.jsxs(L,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[i.jsx(WC,{width:"1.1em",height:"1.1em",className:"-translate-y-px"}),i.jsx("span",{children:GA(t.viewCount)})]})}),a&&i.jsx(pn,{tooltipText:r({defaultMessage:"Follow-ups Asked",id:"DDyRtVl03r"}),tooltipLayout:"bottom",asChild:!0,children:i.jsxs(L,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[i.jsx(Yv,{width:"1.1em",height:"1.1em",className:"-translate-y-px"}),i.jsx("span",{children:GA(t.forkCount)})]})})]})});m5e.displayName="ThreadSocialData";const I9t=()=>{const{$t:e}=Q();return[{name:"google_drive",title:xp,avatarSrc:CS},{name:"onedrive",title:hu,avatarSrc:ES},{name:"sharepoint",title:gu,avatarSrc:MS},{name:"web",title:"Web",icon:kf},{name:"scholar",title:e({defaultMessage:"Scholar",id:"vzzehe/j6l"}),icon:C0},{name:"social",title:e({defaultMessage:"Social",id:"qOLogguG/7"}),icon:$R},{name:"edgar",title:d7,icon:WR},{name:"wiley",title:wS,avatarSrc:u1},{name:"crunchbase",title:_S,avatarSrc:bS},{name:"notion",title:_p,avatarSrc:TS},{name:"org",title:e({defaultMessage:"Org files",id:"iWDsD738/m"}),icon:VR},{name:"box",title:bp,avatarSrc:kS},{name:"factset",title:xS,avatarSrc:vS},{name:"gcal",title:U0,avatarSrc:SS},{name:"my_files",title:e({defaultMessage:"My files",id:"bYbrKKlKgS"}),icon:BR},{name:"dropbox",title:pc,avatarSrc:f7}]},p5e=A.memo(({sources:e})=>{const t=I9t(),n=3,r=e.slice(n).map(s=>t.find(o=>o.name===s)?.title).join(", ");return i.jsxs("div",{className:"flex items-center",children:[e.slice(0,n).map(s=>{const a=t.find(o=>o.name===s);return a?i.jsx(h5e,{imgSrc:a.avatarSrc,icon:a.icon,title:a.title},s):null}),e.length>n&&i.jsx(TU,{tooltipText:r,children:i.jsxs(L,{variant:"micro",color:"light",className:"flex size-4 cursor-default items-center justify-center",children:["+",e.length-n]})})]})});p5e.displayName="ThreadSourcesList";const TU=A.memo(({children:e,tooltipText:t})=>i.jsx(pn,{tooltipText:t,asChild:!0,tooltipLayout:"bottom",children:i.jsx(z,{variant:"subtler",className:"-ml-xs !ring-inverse relative aspect-square shrink-0 rounded-full p-0.5 ring-[1.5px] first:ml-0",children:e})}));TU.displayName="SourceIconWrapper";const h5e=A.memo(({imgSrc:e,icon:t,title:n})=>i.jsx(TU,{tooltipText:n,children:t?i.jsx(me,{icon:t,className:"text-quiet size-4"}):i.jsx("img",{src:e,alt:n,className:"size-4 rounded-full object-cover"})}));h5e.displayName="SourceIcon";const g5e=A.memo(({authorUsername:e,threadAccess:t,authorImage:n,authorId:r,isIncognitoThread:s,collection:a})=>{const o=Qe(),l=!e&&!o&&!s,[c,u]=f.useState(!1),{isIncognito:d}=oa({reason:"thread-context"}),[m,p]=f.useState(!1),{inFlight:h,firstResult:{expiry_time:g,updated_datetime:y}={}}=Ht(),v=!l,x=a?.user_permission&&Ap(a.user_permission),b=g&&G_(g)&&!s&&!a&&!m,{$t:_}=Q(),w=d&&status===cr.PENDING?void 0:n,C=f.useCallback(()=>{u(!0)},[]),S=f.useMemo(()=>i.jsx(y5e,{authorUsername:e,authorId:r,updatedTimestamp:y??"",expiryTimestamp:g??"",threadAccess:t,isAnon:l,isIncognitoThread:s,isInFlight:h,setHasRemovedExpiration:p,hasRemovedExpiration:m}),[r,e,g,h,l,s,t,y,m]),E=f.useCallback(()=>{u(!1)},[]);return i.jsxs("div",{className:"gap-sm flex min-w-0 items-center",children:[v&&i.jsx(lo,{onOpen:C,onClose:E,content:S,placement:"bottom-start",childrenClassName:"inline-flex pb-xs -mb-xs",children:i.jsxs("div",{className:"group relative flex cursor-pointer items-center gap-0.5",children:[i.jsx(z,{variant:"transparent",className:U("group-hover:!bg-offsetPlus -inset-three absolute rounded-full duration-150",{"!bg-offsetPlus":c})}),i.jsxs("div",{className:"relative isolate flex items-center gap-0",children:[i.jsx(Rt,{user:w??void 0,size:"small",className:"relative z-10 [&>*]:size-6"}),b&&i.jsx(z,{variant:c?"offsetPlus":"background",className:U("group-hover:bg-offsetPlus p-half absolute bottom-1.5 right-0 z-20 flex shrink-0 translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full duration-150"),children:i.jsx(xne,{size:16,className:"text-quiet relative"})})]}),!b&&i.jsx(Qn,{className:U("group-hover:text-quiet relative size-3 transition-all duration-150",{"text-quiet":c,"text-quietest":!c})})]})}),a&&!x&&i.jsx(pn,{tooltipText:_({defaultMessage:"Part of the {collectionTitle} Space",id:"eNL1YKIijb"},{collectionTitle:a.title}),asChild:!0,children:i.jsx(Ye,{href:`/spaces/${a.slug}`,className:"inline-flex",children:i.jsxs(z,{variant:"background",bgHover:"subtler",className:U("pr-sm hover:ring-offset-offset ring-offset-inverse ring-offset gap-xs @[1100px]/main:max-w-[80px] @[1200px]/main:max-w-[160px] relative z-20 flex h-6 max-w-[80px] shrink-0 items-center justify-center rounded-full ring-1 ring-offset-1",{"pl-0.5":a.emoji,"pl-sm":!a.emoji}),children:[i.jsx(z,{className:"flex size-5 items-center justify-center rounded-full",variant:a.emoji?"transparent":"subtler",children:a.emoji?i.jsx(Ru,{unified:a.emoji,size:"tiny"}):i.jsx(Ca,{size:12,className:"text-quiet relative"})}),i.jsx(L,{variant:"tiny",color:"light",className:"min-w-0 flex-1 truncate",children:a.title})]})})})]})});g5e.displayName="ThreadAuthorInfo";const y5e=A.memo(({authorUsername:e,authorId:t,updatedTimestamp:n,expiryTimestamp:r,threadAccess:s,isAnon:a,isIncognitoThread:o,isInFlight:l,setHasRemovedExpiration:c,hasRemovedExpiration:u})=>{const{locale:d}=Q(),{session:m}=Ct(),{socialStats:p,firstResult:{sources:h,backend_uuid:g}={sources:[],backend_uuid:""}}=Ht(),y=Rc(),v=n.endsWith("Z")?n:`${n}Z`,x=r.endsWith("Z")?r:`${r}Z`,b=new Date(v),_=b.toLocaleDateString(d,{year:"numeric",month:"long",day:"numeric"}),w=b.toLocaleString(d,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),C=x?new Date(x).toLocaleString(d,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",S=Q(),E=new Date(x),M=hE(S,E,{style:"short",numeric:"auto"}),k=pE(b),T=t===m?.user?.id,{$t:j}=Q(),R=h?.sources,O=R&&R.length>0&&!(R.length===1&&R[0]==="web"),P=f.useMemo(()=>i.jsx(pn,{tooltipText:C,tooltipLayout:"bottom",children:M}),[C,M]),N=f.useCallback(()=>{g&&(US(g),c(!0))},[g,c]),I=f.useMemo(()=>({delayDuration:0,arrowClassName:" ",offset:4}),[]),D=t5e();return i.jsxs("div",{className:"flex flex-col divide-y",children:[o&&i.jsx($c,{children:i.jsxs(L,{variant:"tinyRegular",color:"light",className:"gap-xs flex items-center",children:[i.jsx("div",{className:"inline-flex opacity-70",children:i.jsx(Bu,{size:"tiny",inverse:!0})}),j({defaultMessage:"Incognito Thread",id:"0iMI59SVV3"})]})}),r&&G_(r)&&!u&&!o&&i.jsxs($c,{children:[i.jsxs(L,{variant:"tiny",className:"flex items-center gap-0.5",children:[j({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"}),i.jsx(pn,{tooltipText:D,tooltipLayout:"right",asChild:!0,delayDuration:0,children:i.jsx("span",{children:i.jsx(me,{icon:CTe,size:"2xs",className:"text-quiet opacity-60 duration-150 hover:opacity-100"})})})]}),!y&&i.jsx(Te,{size:"tiny",onClick:N,icon:_ne,pill:!0,extraCSS:"-mr-xs",toolTip:j({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),tooltipLayout:"right",tooltipProps:I})]}),!o&&e&&i.jsx($c,{leading:j({defaultMessage:"Created by",id:"p4mBmLaKhc"}),trailing:T?j({defaultMessage:"{author} (You)",id:"QbgjmmII2s"},{author:e}):e}),r&&G_(r)?i.jsx($c,{leading:j({defaultMessage:"Expires",id:"xhQMeQjkbK"}),trailing:P}):i.jsx($c,{leading:j({defaultMessage:"Last Updated",id:"EeRwjEG9ge"}),trailing:G_(n)?i.jsx(pn,{tooltipText:w,tooltipLayout:"bottom",children:k?j({defaultMessage:"Today",id:"zWgbGgjUUg"}):_}):l?j({defaultMessage:"Just now",id:"bxv59Vvssz"}):"-"}),O&&i.jsx($c,{leading:j({defaultMessage:"{n, plural, one {Source} other {Sources}}",id:"Qe5RCQLzVg"},{n:R.length}),children:i.jsx(L,{variant:"tinyRegular",children:i.jsx(p5e,{sources:R})})}),!a&&SVe(s??0)&&!o&&R9t(p)&&i.jsx($c,{children:i.jsx(m5e,{textVariant:"tiny"})})]})});y5e.displayName="InfoMenu";const $c=A.memo(({leading:e,trailing:t,children:n})=>i.jsxs(z,{className:"mx-sm group/row flex h-8 items-center justify-between gap-[12px]",children:[e&&i.jsx(L,{variant:"tinyRegular",color:"light",children:e}),n,t&&i.jsx(L,{variant:"tiny",className:"text-right",children:t})]}));$c.displayName="InfoMenuRow";const P9t="",v5e=A.memo(({isOpen:e,onClose:t,onSave:n,defaultTitle:r})=>{const{$t:s}=Q(),[a,o]=f.useState(r??""),l=f.useCallback(()=>{n(a),t()},[a,t,n]),c=f.useRef(null),u=g=>{o(g)},d=g=>{g.key==="Enter"&&l()},m=f.useMemo(()=>[{text:s({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:l,testId:"thread-rename-save"}],[s,l]),{isMobileUserAgent:p,isMobileStyle:h}=ye();return i.jsx(Xt,{isOpen:e,title:s({defaultMessage:"Edit Thread Title",id:"lv9nkrxVPt"}),onClose:t,actionList:m,children:i.jsx(JD,{size:"large",inputRef:c,children:i.jsx(eF,{isMobileUserAgent:p,isMobileStyle:h,placeholder:s({defaultMessage:"What's your Thread about?",id:"bq3jzjDvHH"}),value:a,onChange:u,autoFocus:!0,onKeyDown:d,ref:c,testId:"thread-rename-input"})})})});v5e.displayName="ThreadTitleEditModal";const x5e=A.memo(()=>{const e="thread-header-v2",{$t:t}=Q(),[n,r]=f.useState(!1),s=f.useRef(void 0),a=_t(),o=ls(),l=Qe(),{firstResult:{backend_uuid:c,status:u,frontend_context_uuid:d,collection_info:m,query_str:p,context_uuid:h,privacy_state:g,bookmark_state:y,thread_access:v,thread_title:x,author_username:b,author_image:_,author_id:w,thread_url_slug:C,expiry_time:S}={},inFlight:E}=Ht(),M=u===cr.PENDING,{session:k}=Ct(),{collections:T}=U3({autoFetch:!M,reason:e}),j=Oo(),{deleteThread:R}=Tx({reason:e}),{openModal:O,closeModal:P}=vt(),{openVisitorLoginUpsell:N}=Xn({enabled:!l}),{removeThreadFromCollection:I,swapThreadCollection:D,firstTimeBookmark:F}=Fh({reason:e}),B=C6t(),{openAddToCollectionModal:V}=K3e({entryUUID:c,frontendContextUUID:d,existingCollection:m,existingFirstThreadQuery:p,filterOnSearchTerm:!0,reason:e}),$=rO(),{handleCreateNewSpaceForThread:G}=nO(),{trackEvent:X}=Me(),{allowArticleCreation:Y}=Ds({reason:e}),{isMobileStyle:W}=ye(),H=g===Cp.INCOGNITO,Z=y==="BOOKMARKED",{handleAppDownloadClicked:re}=Nf("mobile-header"),{mwebUpsellWhatsApp:q,loadingMwebUpsellWhatsApp:J}=A1(),te=N1({origin:"mobile-header"}),se=Dt(),[de,fe]=f.useState(x??p??""),ve=!M&&!H&&c!=null;gle({currentAccessLevel:v??Bae,onClick:Rn,isCollection:!1,isPage:!1,reason:e}),!M&&m!==void 0&&(s.current=m);const ue=M?s.current:m;f.useEffect(()=>{de===""&&fe(x??p??"")},[x,p,de]);const ie=f.useCallback(()=>{c&&(X("delete thread from search result page click",{entryUUID:c}),R({entryUUID:c,callback:()=>a.push("/",void 0,"Delete thread")}))},[R,c,a,X]),be=f.useCallback(()=>{if(!l){N({title:t({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:Ie.THREAD_BOOKMARK_BUTTON,sheetModalVariant:"bottom-sheet-gradient"});return}if(Z||!c)return;h&&X("click add thread to space",{contextUUID:h,isBookmark:!0});const He=T.find(st=>Ap(st.user_permission));He===void 0?F({entryUUID:c,frontendContextUUID:d}):D({entryUUID:c,newCollectionTitle:He.title,newCollectionUUID:He.uuid,newCollectionSlug:He.slug,newCollectionAccess:He.access,frontendContextUUID:d,newCollectionEmoji:He.emoji??null,currentCollectionUUID:null,existingCollectionSlug:null,closeModal:Rn,callback:()=>{B()},newCollectionUserPermission:He.user_permission})},[l,Z,c,X,h,T,N,t,F,d,D,B]),Se=f.useCallback(He=>{if(He==="add"&&h)X("click add thread to space",{contextUUID:h,isBookmark:!1});else{if(!d){ee.error("[ThreadHeader] frontendContextUUID is undefined");return}if(!c){ee.warn("[ThreadHeader] backend_uuid is undefined");return}$?G(c,d):O("collectionSelectModal",{entryUUID:c,currentCollection:ue??null,searchTerm:p,frontendContextUUID:d})}h&&X("click swap thread space",{contextUUID:h,isFromBookmark:ue?Ap(ue.user_permission):!1,collectionUUID:ue?.uuid}),l?V():N({title:t({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:Ie.COLLECTIONS,sheetModalVariant:"bottom-sheet-gradient"})},[X,c,ue,l,O,t,V,N,h,p,d,$,G]),Ce=f.useCallback(()=>{if(!l)O("loginModal",{pitchMessage:{title:t({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:Ie.THREAD_TO_ARTICLE});else{r(!0);const He=ja();h&&X("click convert thread to page",{oldContextUUID:h,newFrontendContextUUID:He});const st=new URLSearchParams({newFrontendContextUUID:He,existingResultsCacheUUID:d??"",existingContextBackendUUID:h??"",existingBackendUUID:c??"",...ue&&{collectionSlug:ue.slug}}),Vt=new URL(window.location.href);Vt.pathname="page/new",Vt.search=st.toString();const en=Vt.toString();a.push(en)}},[l,O,t,h,d,c,ue,a,X]),[ke,Re]=f.useState(!1),je=f.useCallback(He=>{const st=ue?.uuid;if(!h||!c){ee.error("[ThreadHeader] missing frontendContextUUID or entryUUID");return}if(!st){ee.warn("[ThreadHeader] oldCollectionUUID is undefined");return}if(!m?.uuid){ee.warn("[ThreadHeader] collectionUUID is undefined");return}X("click remove thread from space",{contextUUID:h,collectionUUID:st,isBookmark:He==="remove bookmark"}),I({entryUUID:c,oldCollectionUUID:st,callback:()=>{P(),B()},frontendContextUUID:d})},[c,P,m?.uuid,h,ue?.uuid,d,B,I,X]),ct=h9t,tt=f.useCallback((He,st)=>{if(!He||He===P9t){ee.warn("Empty title callback.");return}if(!h){ee.warn("No thread UUID found.");return}if(!j){ee.warn("No write token found.");return}ct({contextUUID:h,title:He,rwToken:j,callback:st,reason:e})},[h,j,ct]),ut=Y&&!W&&!M&&!H,we=!M&&!H&&o,Ue=W&&!M,Ot=f.useCallback(He=>{tt(He,()=>{Re(!1),fe(He)})},[tt]),pt=f.useCallback(()=>{window.document.body.click(),Re(!0)},[]),Mt=f.useCallback(()=>{a.push("/",void 0,"New thread button")},[a]),qe=f.useCallback(()=>Se("add"),[Se]),Be=f.useCallback(()=>Se("swap"),[Se]),Oe=f.useCallback(()=>je("remove"),[je]),nt=f.useCallback(()=>je("remove bookmark"),[je]),{viewTitle:St}=k5(),{isSidebarPinned:Yt}=dn(),Ft=11,Gt=f.useCallback(()=>{if(q){te();return}X("clicked open in app button in mweb thread header",{}),re()},[re,te,q,X]),Cn=f.useCallback(()=>{c&&US(c)},[c]),ln=f.useCallback(()=>Re(!1),[]),Ke=Rce();return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:U("h-headerHeight bg-base pointer-events-none absolute left-0 top-0 z-10 duration-150 md:mb-0 md:rounded-t-xl md:bg-transparent",{"max-[1224px]:md:bg-base":Yt,"max-[970px]:md:bg-base":!Yt}),style:{right:W?0:Ft},children:Ke?i.jsx(f5e,{currentTitle:de,isBookmarked:Z,effectiveCollection:ue??null,onDelete:ie,onAddToSpace:qe,onSwapSpace:Be,onRemoveFromSpace:Oe,onConvertToArticle:Ce,onRename:pt,isConverting:n,showConvertThreadToArticle:ut,rwToken:j??null,onBookmark:be,onRemoveBookmark:nt,showBookmarkButton:we,onRemoveExpiration:Cn,showExportButton:ve}):i.jsxs("div",{className:"gap-x-md px-md py-sm flex h-full items-center justify-between",children:[i.jsxs("div",{className:"pointer-events-auto relative flex items-center",children:[i.jsx("div",{className:"-inset-xs absolute hidden rounded-lg backdrop-blur-sm md:block",children:i.jsx(z,{className:"rounded-inherit absolute inset-0 opacity-85",variant:"background"})}),W?i.jsxs("div",{className:"gap-x-sm flex items-center",children:[i.jsx(AO,{className:"-ml-sm"}),i.jsx(ge,{variant:"common",size:"small",icon:rr,text:t({defaultMessage:"New",id:"bW7B87wFFp"}),onClick:Mt})]}):i.jsx(g5e,{authorUsername:b??null,threadAccess:v??0,authorImage:_??(l&&E?k?.user?.image??null:null),authorId:w??"",isIncognitoThread:H,collection:ue??null,privacyState:g})]}),St&&i.jsx("div",{className:U("fade-in animate-in hidden min-w-0 flex-1 duration-150 md:block",{"@[900px]/main:md:hidden":!ue,"@[1056px]/main:md:hidden":!!ue}),children:i.jsx(L,{className:"truncate whitespace-nowrap",variant:"baseSemi",children:St})}),i.jsxs("div",{className:"gap-x-sm pointer-events-auto relative flex items-center",style:{marginRight:W?0:-11},children:[i.jsx("div",{className:"-inset-xs absolute hidden rounded-lg backdrop-blur-sm md:block",children:i.jsx(z,{className:"rounded-inherit absolute inset-0 opacity-85",variant:"background"})}),i.jsxs("div",{className:"relative flex items-center",onClick:He=>He.stopPropagation(),children:[i.jsx(P5,{title:de,show:o&&!M,isBookmarked:Z,onDelete:ie,onAddToSpace:qe,onSwapSpace:Be,onRemoveFromSpace:Oe,currentSpace:ue??null,onConvertToArticle:Ce,onRename:pt,isConverting:n,showConvertThreadToArticle:ut,rwToken:j,contextUUID:h,threadAccess:v,collectionSlug:ue?.slug,type:H?oo.INCOGNITO_SEARCH:oo.SEARCH,firstResultBackendUUID:ve?c:void 0,onBookmark:Z?nt:be,showBookmarkButton:we,onRemoveExpiration:Cn,expiry:S,threadId:C??"",isIncognitoThread:H}),we&&!W&&i.jsx(kU,{isBookmarked:Z,handleAddBookmark:be,handleRemoveBookmark:nt})]}),!H&&!M&&i.jsx(MU,{visible:!!C,tweetDescriptionText:x||p,threadSharedSlug:C??void 0,urlSearchParams:se}),Ue&&!J&&i.jsx(pl,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:i.jsx("div",{className:"animate-in fade-in duration-300",children:i.jsx(ge,{size:"small",variant:"primary",text:t(q?{defaultMessage:"Ask in WhatsApp",id:"8QxwIbOYLa"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:Gt})})})]})]})}),ke&&i.jsx(v5e,{isOpen:ke,onClose:ln,onSave:Ot,defaultTitle:de})]})});x5e.displayName="ThreadHeaderV2";const b5e=A.memo(({children:e,className:t,innerClassName:n})=>i.jsx("div",{className:U("px-md md:px-lg",t),children:i.jsx("div",{className:U("max-w-threadContentWidth mx-auto",n),children:e})}));b5e.displayName="ThreadSectionWrapper";var Uee={};const O9t=he(async()=>{const{SearchLoadingComponent:e}=await ae(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-C7iK06jw.js");return{SearchLoadingComponent:t}},__vite__mapDeps([190,3,1,6,5,4]));return{default:e}}),_5e=A.memo(()=>i.jsx(I5,{}));_5e.displayName="SearchErrorFallback";const dR=A.memo(e=>{const t=Nt(),[n,{height:r}]=ml();return i.jsx(zr,{fallback:_5e,code:"SOMETHING_WENT_WRONG_ERROR",children:i.jsx(M_t,{children:i.jsx(mEe,{children:i.jsx(hEe,{children:i.jsxs(uEe,{children:[i.jsxs(dEe,{children:[i.jsx(x5e,{}),i.jsx("div",{className:"erp-sidecar:h-fit erp-sidecar:pb-0 mx-auto h-full",children:i.jsxs(z,{variant:"background",className:"relative",children:[i.jsx(b5e,{children:i.jsx(q3e,{})}),i.jsx(z3e,{...e,lastResultBuffer:r})]})})]}),i.jsx(vEe,{ref:n},t)]})})})})})});dR.displayName="SearchContent";function L9t(e){const t=tBe(),{actions:{setCurrentThreadId:n}}=Ht(),r=ZUe(),s=eBe(),{data:a}=$e({queryKey:["storedResults"],queryFn:()=>TE(),refetchOnMount:!0});f.useEffect(()=>{if(e.entries){e.entries.forEach(c=>{c.reconnectable&&!s(c.backend_uuid)&&r(c.backend_uuid)});const l=e.entries[0]?.context_uuid??dr();n(l),t(e.entries)}},[r,e.entries,t,n,s]);const o=f.useMemo(()=>{if(e.entries?.length)return e.entries;if(e.placeholderResults?.length)return e.placeholderResults;if(e.slugOrUUID){const l=a?.find(kE(e.slugOrUUID));if(l)return[l]}return le},[e.placeholderResults,e.slugOrUUID,e.entries,a]);return f.useMemo(()=>({placeholderResults:o}),[o])}const w5e=A.memo(e=>{const{placeholderResults:t}=L9t(e);return eEe({confirmationRedirectsToHomepage:!1}),!t?.length&&e.skipLoadingUI!==!0?Uee.NEXT_PUBLIC_IS_SIDECAR_BUILD?null:i.jsx(O9t,{slugOrUUID:e.slugOrUUID}):Uee.NEXT_PUBLIC_IS_SIDECAR_BUILD?i.jsx(dR,{...e,placeholderResults:t}):i.jsxs(i.Fragment,{children:[i.jsx(j1,{childrenWidth:"none",children:i.jsx(fEe,{children:i.jsx(dR,{...e,placeholderResults:t})})}),i.jsx(sU,{})]})});w5e.displayName="SearchPage";const D9t="streamId",F9t=he(async()=>{const{SearchLoadingComponent:e}=await ae(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-C7iK06jw.js");return{SearchLoadingComponent:t}},__vite__mapDeps([190,3,1,6,5,4]));return{default:e}});function U9t({active:e,query:t,copilot:n,source:r,streamId:s}){const a=f.useMemo(()=>t&&e?[gUe({query_str:t,frontend_uuid:s,query_source:r??"default_search",mode:n==="true"?"COPILOT":"CONCISE"})]:le,[t,e,s,r,n]);return f.useMemo(()=>e?{hasFrontendUUID:!!s,placeholderResults:a}:void 0,[e,a,s])}function B9t({active:e,frontendUUID:t}){const r=Ia().getState().streams,a=(e?r[t]:void 0)?.placeholderChunk,o=f.useMemo(()=>a?[a]:void 0,[a]);return f.useMemo(()=>e?{skipLoadingUI:!0,placeholderResults:o}:void 0,[e,o])}function V9t({active:e,slugOrUUID:t}){const n="search-components",r=_t(),s=f.useMemo(()=>kE(t),[t]),o=Ia().getState().entries,l=e?Object.values(o).find(m=>m?.thread_url_slug===t||m?.backend_uuid===t):void 0,{data:c,error:u}=Ant({slugOrUUID:t,enabled:!l&&e,reason:n});f.useEffect(()=>{c?.[0]&&wme(c[0])},[c]);const d=f.useMemo(()=>c?.length?c:l?[l]:le,[c,l]);return f.useEffect(()=>{if(u){const m=TE();if(m.find(s)){const h=m.filter(g=>!s(g));rv(h)}let p=null;u?.cause&&typeof u?.cause=="object"&&"error_code"in u.cause&&(u.cause.error_code===pG?(p=Dd.ThreadAccessNotAllowed,ee.error(pG,{error:u,slugOrUUID:t})):u.cause.error_code===vGe?(p=Dd.ThreadExpired,ee.error(u?.message,{error:u,slugOrUUID:t})):(p=Dd.InvalidThread,ee.error(u?.message,{error:u,slugOrUUID:t})),r.replace(`/?error=${p}&id=${t}`,"Search error"))}},[u,t,s,r]),f.useMemo(()=>e?{entries:d,slugOrUUID:t,hasError:!!u}:void 0,[e,d,u,t])}function W9t(){const{actions:{clearCurrentStreamId:e,clearCurrentThreadId:t}}=Ht(),n=typeof window<"u",r=xi(),s=!!(r?.new&&r?.uuid&&n),a=!!(r?.new&&!r?.uuid&&n),o=!!(!r?.new&&r?.uuid&&n),l=n?new URLSearchParams(window.location.search):null,c=l?.get("q")??void 0,u=l?.get("copilot")??void 0,d=l?.get("source")??void 0,m=l?.get(D9t),p=f.useMemo(()=>m??dr(),[m]),h=B9t({active:s,frontendUUID:r?.uuid??""}),g=U9t({active:a,query:c,copilot:u,streamId:p,source:d}),y=V9t({active:o,slugOrUUID:r?.uuid??""});return f.useEffect(()=>()=>{e(),t()},[e,t]),f.useLayoutEffect(()=>{g?.hasFrontendUUID&&(e(),t())},[e,t,g?.hasFrontendUUID]),f8t(a,p,"new-query-search-components"),f.useMemo(()=>{if(s){const v=r?.uuid;if(!v||!Sne(v))return{component:i.jsx(Xl,{to:"/"})}}else if(a){if(!c||c==="pending")return{component:i.jsx(Xl,{to:"/"})}}else if(o){const v=r?.uuid;if(!v||v==="undefined")return{component:i.jsx(Xl,{to:"/"})};if(y?.hasError)return null}else return n?{component:i.jsx(Xl,{to:c?`/search/new${window.location.search}`:"/"})}:{component:i.jsx(F9t,{})};return{props:{...h,...g,...y}}},[n,y,o,g,a,h,s,r?.uuid,c])}const C5e=A.memo(()=>{const e=W9t();return e?"component"in e?e.component:i.jsx(w5e,{...e.props}):null});C5e.displayName="SearchComponents";const S5e=e=>{if(!e)return{base:void 0,symbol:void 0,tab:void 0};const t=new RegExp(NE),n=e?.match(t);return{base:n?.[1]?.replace("app",""),symbol:n?.[2],tab:n?.[3]}};async function $9t({eventId:e,league:t,reason:n}){const{error:r,data:s}=await ne.GET("/rest/sports/tennis/{league}/events/{event_id}",n,{params:{path:{event_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}async function H9t({seasonId:e,league:t,reason:n}){const{error:r,data:s}=await ne.GET("/rest/sports/tennis/{league}/tournaments/{season_id}",n,{params:{path:{season_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r,details:{seasonId:e}});return s?.data}function z9t(e){return e==="cricket"||e==="european_tour"||e==="f1"||e==="nba"||e==="ncaam"||e==="ncaaw"||e==="pga"||e==="soccer"||e==="wnba"||e==="mlb"}const G9t=async({eventId:e,league:t,headers:n,reason:r})=>{if(!z9t(t))throw new Ee("API_CLIENTS_ERROR",{message:`Invalid league: ${t}`,details:{league:t,eventId:e}});const{error:s,data:a}=await ne.GET(`/rest/sports/${t}/events/{event_id}`,r,{headers:n,timeoutMs:15e3,params:{path:{event_id:decodeURIComponent(e)}}});if(s)throw new Ee("API_CLIENTS_ERROR",{cause:s,details:{league:t,eventId:e}});try{a?.data.pplx_event&&(a.data.apns=a.data.pplx_event.apns)}catch{}return a?.data},q9t=(e,t)=>[`sports/${t}/event/`,e];async function r$t({eventId:e,league:t,locale:n,reason:r}){const s={};n&&(s["accept-language"]=n);try{const{error:a,data:o}=await ne.GET("/rest/sports/{league}/events/{event_id}/hype",r,{headers:s,timeoutMs:0,params:{path:{league:t,event_id:decodeURIComponent(e)}}});if(a)throw new Ee("API_CLIENTS_ERROR",{cause:a,details:{league:t,eventId:e}});return o?.data}catch(a){return ee.error(a),null}}async function s$t({eventId:e,headers:t,reason:n}){try{const{error:r,data:s}=await ne.GET("/rest/sports/f1/live_racer",n,{headers:t,timeoutMs:0});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}catch(r){return ee.error(r),null}}async function a$t(e){const{error:t,data:n}=await ne.GET("/rest/sports/soccer/events/{event_id}","championsleague-events-event-id-client-page",{params:{path:{event_id:decodeURIComponent(e)}},timeoutMs:15e3});if(t)throw new Ee("API_CLIENTS_ERROR",{cause:t,details:{eventId:e}});return n?.data??null}async function K9t({playerId:e,reason:t}){const{error:n,data:r}=await ne.GET("/rest/sports/nba/players/{player_id}",t,{params:{path:{player_id:e}},timeoutMs:15e3});if(n)throw new Ee("API_CLIENTS_ERROR",{cause:n,details:{playerId:e}});return r?.data??null}const Y9t=e=>["/rest/sports/nba/players/",e];async function o$t(e){const{error:t,data:n}=await ne.GET("/rest/sports/nba/players/{player_id}/bio","nba-players-player-id-bio-client-page",{params:{path:{player_id:e}},timeoutMs:15e3});if(t)throw new Ee("API_CLIENTS_ERROR",{cause:t,details:{playerId:e}});return n?.data??null}const Q9t=async({teamId:e,reason:t})=>{const n=await sr({urlPath:`/rest/sports/nfl/teams/${decodeURIComponent(e)}`,timeoutMs:0,reason:t});if(!n.ok)throw ee.error(n.url,n.statusText),new Error(`Failed to fetch nfl team: ${n.statusText}`);return(await n.json()).data},X9t=e=>["/sports/nfl/teams/",e],Z9t=async({teamId:e,reason:t})=>{const n=await sr({urlPath:`/rest/sports/nba/teams/${decodeURIComponent(e)}`,timeoutMs:0,reason:t});if(!n.ok)throw ee.error(n.url,n.statusText),new Error(`Failed to fetch nba team: ${n.statusText}`);return(await n.json()).data},J9t=e=>["/sports/nba/teams/",e],eRt=({teamId:e,reason:t,enabled:n})=>$e({queryFn:()=>Z9t({teamId:e,reason:t}),queryKey:J9t(e),enabled:n}),tRt=({teamId:e,reason:t,enabled:n})=>$e({queryFn:()=>Q9t({teamId:e,reason:t}),queryKey:X9t(e),enabled:n}),nRt=({playerId:e,reason:t,enabled:n})=>$e({queryFn:()=>K9t({playerId:e,reason:t}),queryKey:Y9t(e),enabled:n}),Bee=({seasonId:e,league:t,reason:n,enabled:r})=>$e({queryFn:()=>H9t({seasonId:e,league:t,reason:n}),queryKey:[`${t}/tournaments`,e],enabled:r}),Nl=({eventId:e,league:t,reason:n,staleTime:r,refetchInterval:s,enabled:a})=>$e({...Ov,queryFn:()=>G9t({eventId:e,league:t,reason:n}),queryKey:q9t(e,t),staleTime:r,refetchInterval:s,enabled:a}),Vee=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?xf(s.state.data.event)?!1:gg(s.state.data.event)?1e3*10:1e3*30:1e3*60}),rRt=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,enabled:r}),i$t=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,enabled:r}),sRt=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?xf(s.state.data.event)?!1:gg(s.state.data.event)?1e3*10:1e3*30:1e3*60}),aRt=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:decodeURIComponent(e),league:t,reason:n,refetchInterval:s=>s?.state?.data?.event&&s.state.data.event.status==="live"?1e3*10:1e3*60,enabled:r}),oRt=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,refetchInterval:s=>s?.state?.data?.event?xf(s.state.data.event)?!1:gg(s.state.data.event)?1e3*10:1e3*30:1e3*60,enabled:r}),iRt=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,enabled:r}),lRt=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:r}),Wee=({eventId:e,league:t,enabled:n,reason:r})=>$e({...Ov,queryKey:[`${t}/events`,e],queryFn:()=>$9t({eventId:e,league:t,reason:r}),refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:n}),cRt=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_url?.replace("/widget",""),o=s.state?.data?.event?.refetch_interval_secs;return a&&o?1e3*o:!1},staleTime:0,enabled:r}),uRt=({eventId:e,league:t,reason:n,enabled:r})=>Nl({eventId:e,league:t,reason:n,enabled:r}),dRt=({reason:e})=>{const t=Dt(),n=typeof t?.get("c")=="string"?t.get("c"):Array.isArray(t?.get("c"))?t.get("c")?.[0]:void 0,r=$e({queryKey:vVe(n??""),queryFn:()=>xot({copyToken:n??"",reason:e}),enabled:!!n}),s=r.isLoading?null:r.data?.shortcut??null;return{...r,shortcut:s,copyToken:n}};var J6={},eN={},tN={},$ee;function fRt(){return $ee||($ee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(r,s,a){const o=Reflect.get(r,s,a);return typeof o=="function"?o.bind(r):o}static set(r,s,a,o){return Reflect.set(r,s,a,o)}static has(r,s){return Reflect.has(r,s)}static deleteProperty(r,s){return Reflect.deleteProperty(r,s)}}}(tN)),tN}var Hee;function mRt(){return Hee||(Hee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,o){for(var l in o)Object.defineProperty(a,l,{enumerable:!0,get:o[l]})}t(e,{HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return r}});const n=fRt();class r extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new r}}class s extends Headers{constructor(o){super(),this.headers=new Proxy(o,{get(l,c,u){if(typeof c=="symbol")return n.ReflectAdapter.get(l,c,u);const d=c.toLowerCase(),m=Object.keys(o).find(p=>p.toLowerCase()===d);if(!(typeof m>"u"))return n.ReflectAdapter.get(l,m,u)},set(l,c,u,d){if(typeof c=="symbol")return n.ReflectAdapter.set(l,c,u,d);const m=c.toLowerCase(),p=Object.keys(o).find(h=>h.toLowerCase()===m);return n.ReflectAdapter.set(l,p??c,u,d)},has(l,c){if(typeof c=="symbol")return n.ReflectAdapter.has(l,c);const u=c.toLowerCase(),d=Object.keys(o).find(m=>m.toLowerCase()===u);return typeof d>"u"?!1:n.ReflectAdapter.has(l,d)},deleteProperty(l,c){if(typeof c=="symbol")return n.ReflectAdapter.deleteProperty(l,c);const u=c.toLowerCase(),d=Object.keys(o).find(m=>m.toLowerCase()===u);return typeof d>"u"?!0:n.ReflectAdapter.deleteProperty(l,d)}})}static seal(o){return new Proxy(o,{get(l,c,u){switch(c){case"append":case"delete":case"set":return r.callable;default:return n.ReflectAdapter.get(l,c,u)}}})}merge(o){return Array.isArray(o)?o.join(", "):o}static from(o){return o instanceof Headers?o:new s(o)}append(o,l){const c=this.headers[o];typeof c=="string"?this.headers[o]=[c,l]:Array.isArray(c)?c.push(l):this.headers[o]=l}delete(o){delete this.headers[o]}get(o){const l=this.headers[o];return typeof l<"u"?this.merge(l):null}has(o){return typeof this.headers[o]<"u"}set(o,l){this.headers[o]=l}forEach(o,l){for(const[c,u]of this.entries())o.call(l,u,c,this)}*entries(){for(const o of Object.keys(this.headers)){const l=o.toLowerCase(),c=this.get(l);yield[l,c]}}*keys(){for(const o of Object.keys(this.headers))yield o.toLowerCase()}*values(){for(const o of Object.keys(this.headers))yield this.get(o)}[Symbol.iterator](){return this.entries()}}}(eN)),eN}var nN={},zee;function pRt(){return zee||(zee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(Se,Ce){for(var ke in Ce)Object.defineProperty(Se,ke,{enumerable:!0,get:Ce[ke]})}t(e,{ACTION_SUFFIX:function(){return m},APP_DIR_ALIAS:function(){return N},CACHE_ONE_YEAR:function(){return E},DOT_NEXT_ALIAS:function(){return O},ESLINT_DEFAULT_DIRS:function(){return fe},GSP_NO_RETURNED_VALUE:function(){return re},GSSP_COMPONENT_MEMBER_ERROR:function(){return te},GSSP_NO_RETURNED_VALUE:function(){return q},INFINITE_CACHE:function(){return M},INSTRUMENTATION_HOOK_FILENAME:function(){return j},MATCHED_PATH_HEADER:function(){return s},MIDDLEWARE_FILENAME:function(){return k},MIDDLEWARE_LOCATION_REGEXP:function(){return T},NEXT_BODY_SUFFIX:function(){return g},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return S},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return v},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return x},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return C},NEXT_CACHE_TAGS_HEADER:function(){return y},NEXT_CACHE_TAG_MAX_ITEMS:function(){return _},NEXT_CACHE_TAG_MAX_LENGTH:function(){return w},NEXT_DATA_SUFFIX:function(){return p},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return r},NEXT_META_SUFFIX:function(){return h},NEXT_QUERY_PARAM_PREFIX:function(){return n},NEXT_RESUME_HEADER:function(){return b},NON_STANDARD_NODE_ENV:function(){return se},PAGES_DIR_ALIAS:function(){return R},PRERENDER_REVALIDATE_HEADER:function(){return a},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return o},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return G},ROOT_DIR_ALIAS:function(){return P},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return $},RSC_ACTION_ENCRYPTION_ALIAS:function(){return V},RSC_ACTION_PROXY_ALIAS:function(){return F},RSC_ACTION_VALIDATE_ALIAS:function(){return D},RSC_CACHE_WRAPPER_ALIAS:function(){return B},RSC_MOD_REF_PROXY_ALIAS:function(){return I},RSC_PREFETCH_SUFFIX:function(){return l},RSC_SEGMENTS_DIR_SUFFIX:function(){return c},RSC_SEGMENT_SUFFIX:function(){return u},RSC_SUFFIX:function(){return d},SERVER_PROPS_EXPORT_ERROR:function(){return Z},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return Y},SERVER_PROPS_SSG_CONFLICT:function(){return W},SERVER_RUNTIME:function(){return ve},SSG_FALLBACK_EXPORT_ERROR:function(){return de},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return X},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return H},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return J},WEBPACK_LAYERS:function(){return ie},WEBPACK_RESOURCE_QUERIES:function(){return be}});const n="nxtP",r="nxtI",s="x-matched-path",a="x-prerender-revalidate",o="x-prerender-revalidate-if-generated",l=".prefetch.rsc",c=".segments",u=".segment.rsc",d=".rsc",m=".action",p=".json",h=".meta",g=".body",y="x-next-cache-tags",v="x-next-revalidated-tags",x="x-next-revalidate-tag-token",b="next-resume",_=128,w=256,C=1024,S="_N_T_",E=31536e3,M=4294967294,k="middleware",T=`(?:src/)?${k}`,j="instrumentation",R="private-next-pages",O="private-dot-next",P="private-next-root-dir",N="private-next-app-dir",I="private-next-rsc-mod-ref-proxy",D="private-next-rsc-action-validate",F="private-next-rsc-server-reference",B="private-next-rsc-cache-wrapper",V="private-next-rsc-action-encryption",$="private-next-rsc-action-client-wrapper",G="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",X="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",Y="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",W="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",H="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",Z="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",re="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",q="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",J="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",te="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",se='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',de="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",fe=["app","pages","components","lib","src"],ve={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ue={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},ie={...ue,GROUP:{builtinReact:[ue.reactServerComponents,ue.actionBrowser],serverOnly:[ue.reactServerComponents,ue.actionBrowser,ue.instrument,ue.middleware],neutralTarget:[ue.api],clientOnly:[ue.serverSideRendering,ue.appPagesBrowser],bundled:[ue.reactServerComponents,ue.actionBrowser,ue.serverSideRendering,ue.appPagesBrowser,ue.shared,ue.instrument,ue.middleware],appPages:[ue.reactServerComponents,ue.serverSideRendering,ue.appPagesBrowser,ue.actionBrowser]}},be={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}}(nN)),nN}var rN={},sN={},Gee;function E5e(){return Gee||(Gee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,x){for(var b in x)Object.defineProperty(v,b,{enumerable:!0,get:x[b]})}t(e,{AppRenderSpan:function(){return c},AppRouteRouteHandlersSpan:function(){return m},BaseServerSpan:function(){return n},LoadComponentsSpan:function(){return r},LogSpanAllowList:function(){return y},MiddlewareSpan:function(){return h},NextNodeServerSpan:function(){return a},NextServerSpan:function(){return s},NextVanillaSpanAllowlist:function(){return g},NodeSpan:function(){return d},RenderSpan:function(){return l},ResolveMetadataSpan:function(){return p},RouterSpan:function(){return u},StartServerSpan:function(){return o}});var n=function(v){return v.handleRequest="BaseServer.handleRequest",v.run="BaseServer.run",v.pipe="BaseServer.pipe",v.getStaticHTML="BaseServer.getStaticHTML",v.render="BaseServer.render",v.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",v.renderToResponse="BaseServer.renderToResponse",v.renderToHTML="BaseServer.renderToHTML",v.renderError="BaseServer.renderError",v.renderErrorToResponse="BaseServer.renderErrorToResponse",v.renderErrorToHTML="BaseServer.renderErrorToHTML",v.render404="BaseServer.render404",v}(n||{}),r=function(v){return v.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",v.loadComponents="LoadComponents.loadComponents",v}(r||{}),s=function(v){return v.getRequestHandler="NextServer.getRequestHandler",v.getServer="NextServer.getServer",v.getServerRequestHandler="NextServer.getServerRequestHandler",v.createServer="createServer.createServer",v}(s||{}),a=function(v){return v.compression="NextNodeServer.compression",v.getBuildId="NextNodeServer.getBuildId",v.createComponentTree="NextNodeServer.createComponentTree",v.clientComponentLoading="NextNodeServer.clientComponentLoading",v.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",v.generateStaticRoutes="NextNodeServer.generateStaticRoutes",v.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",v.generatePublicRoutes="NextNodeServer.generatePublicRoutes",v.generateImageRoutes="NextNodeServer.generateImageRoutes.route",v.sendRenderResult="NextNodeServer.sendRenderResult",v.proxyRequest="NextNodeServer.proxyRequest",v.runApi="NextNodeServer.runApi",v.render="NextNodeServer.render",v.renderHTML="NextNodeServer.renderHTML",v.imageOptimizer="NextNodeServer.imageOptimizer",v.getPagePath="NextNodeServer.getPagePath",v.getRoutesManifest="NextNodeServer.getRoutesManifest",v.findPageComponents="NextNodeServer.findPageComponents",v.getFontManifest="NextNodeServer.getFontManifest",v.getServerComponentManifest="NextNodeServer.getServerComponentManifest",v.getRequestHandler="NextNodeServer.getRequestHandler",v.renderToHTML="NextNodeServer.renderToHTML",v.renderError="NextNodeServer.renderError",v.renderErrorToHTML="NextNodeServer.renderErrorToHTML",v.render404="NextNodeServer.render404",v.startResponse="NextNodeServer.startResponse",v.route="route",v.onProxyReq="onProxyReq",v.apiResolver="apiResolver",v.internalFetch="internalFetch",v}(a||{}),o=function(v){return v.startServer="startServer.startServer",v}(o||{}),l=function(v){return v.getServerSideProps="Render.getServerSideProps",v.getStaticProps="Render.getStaticProps",v.renderToString="Render.renderToString",v.renderDocument="Render.renderDocument",v.createBodyResult="Render.createBodyResult",v}(l||{}),c=function(v){return v.renderToString="AppRender.renderToString",v.renderToReadableStream="AppRender.renderToReadableStream",v.getBodyResult="AppRender.getBodyResult",v.fetch="AppRender.fetch",v}(c||{}),u=function(v){return v.executeRoute="Router.executeRoute",v}(u||{}),d=function(v){return v.runHandler="Node.runHandler",v}(d||{}),m=function(v){return v.runHandler="AppRouteRouteHandlers.runHandler",v}(m||{}),p=function(v){return v.generateMetadata="ResolveMetadata.generateMetadata",v.generateViewport="ResolveMetadata.generateViewport",v}(p||{}),h=function(v){return v.execute="Middleware.execute",v}(h||{});const g=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],y=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]}(sN)),sN}var aN={},qee;function hRt(){return qee||(qee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isThenable",{enumerable:!0,get:function(){return t}});function t(n){return n!==null&&typeof n=="object"&&"then"in n&&typeof n.then=="function"}}(aN)),aN}var gRt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},jd="1.8.0",Kee=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function yRt(e){var t=new Set([e]),n=new Set,r=e.match(Kee);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(c){return c===e};function a(l){return n.add(l),!1}function o(l){return t.add(l),!0}return function(c){if(t.has(c))return!0;if(n.has(c))return!1;var u=c.match(Kee);if(!u)return a(c);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||s.major!==d.major?a(c):s.major===0?s.minor===d.minor&&s.patch<=d.patch?o(c):a(c):s.minor<=d.minor?o(c):a(c)}}var vRt=yRt(jd),xRt=jd.split(".")[0],Dv=Symbol.for("opentelemetry.js.api."+xRt),Fv=gRt;function Px(e,t,n,r){var s;r===void 0&&(r=!1);var a=Fv[Dv]=(s=Fv[Dv])!==null&&s!==void 0?s:{version:jd};if(!r&&a[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(a.version!==jd){var o=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+e+" does not match previously registered API v"+jd);return n.error(o.stack||o.message),!1}return a[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+jd+"."),!0}function wf(e){var t,n,r=(t=Fv[Dv])===null||t===void 0?void 0:t.version;if(!(!r||!vRt(r)))return(n=Fv[Dv])===null||n===void 0?void 0:n[e]}function Ox(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+jd+".");var n=Fv[Dv];n&&delete n[e]}var bRt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},_Rt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},wRt=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return my("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return my("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return my("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return my("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return my("verbose",this._namespace,t)},e}();function my(e,t,n){var r=wf("diag");if(r)return n.unshift(t),r[e].apply(r,_Rt([],bRt(n),!1))}var ha;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ha||(ha={}));function CRt(e,t){e<ha.NONE?e=ha.NONE:e>ha.ALL&&(e=ha.ALL),t=t||{};function n(r,s){var a=t[r];return typeof a=="function"&&e>=s?a.bind(t):function(){}}return{error:n("error",ha.ERROR),warn:n("warn",ha.WARN),info:n("info",ha.INFO),debug:n("debug",ha.DEBUG),verbose:n("verbose",ha.VERBOSE)}}var SRt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},ERt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},MRt="diag",bl=function(){function e(){function t(s){return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var l=wf("diag");if(l)return l[s].apply(l,ERt([],SRt(a),!1))}}var n=this,r=function(s,a){var o,l,c;if(a===void 0&&(a={logLevel:ha.INFO}),s===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=u.stack)!==null&&o!==void 0?o:u.message),!1}typeof a=="number"&&(a={logLevel:a});var d=wf("diag"),m=CRt((l=a.logLevel)!==null&&l!==void 0?l:ha.INFO,s);if(d&&!a.suppressOverrideMessage){var p=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),m.warn("Current logger will overwrite one already registered from "+p)}return Px("diag",m,n,!0)};n.setLogger=r,n.disable=function(){Ox(MRt,n)},n.createComponentLogger=function(s){return new wRt(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),kRt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},TRt=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},NRt=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=kRt(t,2),r=n[0],s=n[1];return[r,s]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var a=new e(this._entries);try{for(var o=TRt(r),l=o.next();!l.done;l=o.next()){var c=l.value;a._entries.delete(c)}}catch(u){t={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},e.prototype.clear=function(){return new e},e}(),ARt=Symbol("BaggageEntryMetadata"),jRt=bl.instance();function RRt(e){return e===void 0&&(e={}),new NRt(new Map(Object.entries(e)))}function IRt(e){return typeof e!="string"&&(jRt.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:ARt,toString:function(){return e}}}function NU(e){return Symbol.for(e)}var PRt=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var a=new e(n._currentContext);return a._currentContext.set(r,s),a},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e}(),M5e=new PRt,oN=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],ORt=function(){function e(){function t(r){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(console){var o=console[r];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,s)}}}for(var n=0;n<oN.length;n++)this[oN[n].n]=t(oN[n].c)}return e}(),yg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LRt=function(){function e(){}return e.prototype.createHistogram=function(t,n){return HRt},e.prototype.createCounter=function(t,n){return $Rt},e.prototype.createUpDownCounter=function(t,n){return zRt},e.prototype.createObservableGauge=function(t,n){return qRt},e.prototype.createObservableCounter=function(t,n){return GRt},e.prototype.createObservableUpDownCounter=function(t,n){return KRt},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),AU=function(){function e(){}return e}(),DRt=function(e){yg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(AU),FRt=function(e){yg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(AU),URt=function(e){yg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(AU),jU=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),BRt=function(e){yg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(jU),VRt=function(e){yg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(jU),WRt=function(e){yg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(jU),k5e=new LRt,$Rt=new DRt,HRt=new URt,zRt=new FRt,GRt=new BRt,qRt=new VRt,KRt=new WRt;function YRt(){return k5e}var fR;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(fR||(fR={}));var T5e={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},N5e={set:function(e,t,n){e!=null&&(e[t]=n)}},QRt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},XRt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},ZRt=function(){function e(){}return e.prototype.active=function(){return M5e},e.prototype.with=function(t,n,r){for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return n.call.apply(n,XRt([r],QRt(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),JRt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},eIt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},iN="context",tIt=new ZRt,O5=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Px(iN,t,bl.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return(s=this._getContextManager()).with.apply(s,eIt([t,n,r],JRt(a),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return wf(iN)||tIt},e.prototype.disable=function(){this._getContextManager().disable(),Ox(iN,bl.instance())},e}(),OC;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(OC||(OC={}));var RU="0000000000000000",IU="00000000000000000000000000000000",A5e={traceId:IU,spanId:RU,traceFlags:OC.NONE},x0=function(){function e(t){t===void 0&&(t=A5e),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),PU=NU("OpenTelemetry Context Key SPAN");function OU(e){return e.getValue(PU)||void 0}function nIt(){return OU(O5.getInstance().active())}function LU(e,t){return e.setValue(PU,t)}function rIt(e){return e.deleteValue(PU)}function sIt(e,t){return LU(e,new x0(t))}function j5e(e){var t;return(t=OU(e))===null||t===void 0?void 0:t.spanContext()}var aIt=/^([0-9a-f]{32})$/i,oIt=/^[0-9a-f]{16}$/i;function R5e(e){return aIt.test(e)&&e!==IU}function I5e(e){return oIt.test(e)&&e!==RU}function DU(e){return R5e(e.traceId)&&I5e(e.spanId)}function iIt(e){return new x0(e)}var lN=O5.getInstance(),P5e=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=lN.active());var s=!!n?.root;if(s)return new x0;var a=r&&j5e(r);return lIt(a)&&DU(a)?new x0(a):new x0},e.prototype.startActiveSpan=function(t,n,r,s){var a,o,l;if(!(arguments.length<2)){arguments.length===2?l=n:arguments.length===3?(a=n,l=r):(a=n,o=r,l=s);var c=o??lN.active(),u=this.startSpan(t,a,c),d=LU(c,u);return lN.with(d,l,void 0,u)}},e}();function lIt(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var cIt=new P5e,O5e=function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):cIt},e}(),uIt=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new P5e},e}(),dIt=new uIt,mR=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new O5e(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:dIt},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e}(),pR;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(pR||(pR={}));var hR;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(hR||(hR={}));var gR;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(gR||(gR={}));var yR="[_0-9a-z-*/]",fIt="[a-z]"+yR+"{0,255}",mIt="[a-z0-9]"+yR+"{0,240}@[a-z]"+yR+"{0,13}",pIt=new RegExp("^(?:"+fIt+"|"+mIt+")$"),hIt=/^[ -~]{0,255}[!-~]$/,gIt=/,|=/;function yIt(e){return pIt.test(e)}function vIt(e){return hIt.test(e)&&!gIt.test(e)}var Yee=32,xIt=512,Qee=",",Xee="=",bIt=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,n),r},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,r){return n.push(r+Xee+t.get(r)),n},[]).join(Qee)},e.prototype._parse=function(t){t.length>xIt||(this._internalState=t.split(Qee).reverse().reduce(function(n,r){var s=r.trim(),a=s.indexOf(Xee);if(a!==-1){var o=s.slice(0,a),l=s.slice(a+1,r.length);yIt(o)&&vIt(l)&&n.set(o,l)}return n},new Map),this._internalState.size>Yee&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Yee))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function _It(e){return new bIt(e)}var L5e=O5.getInstance(),D5e=bl.instance(),wIt=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return k5e},e}(),CIt=new wIt,cN="metrics",SIt=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return Px(cN,t,bl.instance())},e.prototype.getMeterProvider=function(){return wf(cN)||CIt},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){Ox(cN,bl.instance())},e}(),F5e=SIt.getInstance(),EIt=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}(),FU=NU("OpenTelemetry Baggage Key");function U5e(e){return e.getValue(FU)||void 0}function MIt(){return U5e(O5.getInstance().active())}function kIt(e,t){return e.setValue(FU,t)}function TIt(e){return e.deleteValue(FU)}var uN="propagation",NIt=new EIt,AIt=function(){function e(){this.createBaggage=RRt,this.getBaggage=U5e,this.getActiveBaggage=MIt,this.setBaggage=kIt,this.deleteBaggage=TIt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return Px(uN,t,bl.instance())},e.prototype.inject=function(t,n,r){return r===void 0&&(r=N5e),this._getGlobalPropagator().inject(t,n,r)},e.prototype.extract=function(t,n,r){return r===void 0&&(r=T5e),this._getGlobalPropagator().extract(t,n,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Ox(uN,bl.instance())},e.prototype._getGlobalPropagator=function(){return wf(uN)||NIt},e}(),B5e=AIt.getInstance(),dN="trace",jIt=function(){function e(){this._proxyTracerProvider=new mR,this.wrapSpanContext=iIt,this.isSpanContextValid=DU,this.deleteSpan=rIt,this.getSpan=OU,this.getActiveSpan=nIt,this.getSpanContext=j5e,this.setSpan=LU,this.setSpanContext=sIt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Px(dN,this._proxyTracerProvider,bl.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return wf(dN)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Ox(dN,bl.instance()),this._proxyTracerProvider=new mR},e}(),V5e=jIt.getInstance();const RIt={context:L5e,diag:D5e,metrics:F5e,propagation:B5e,trace:V5e},IIt=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:ORt,get DiagLogLevel(){return ha},INVALID_SPANID:RU,INVALID_SPAN_CONTEXT:A5e,INVALID_TRACEID:IU,ProxyTracer:O5e,ProxyTracerProvider:mR,ROOT_CONTEXT:M5e,get SamplingDecision(){return pR},get SpanKind(){return hR},get SpanStatusCode(){return gR},get TraceFlags(){return OC},get ValueType(){return fR},baggageEntryMetadataFromString:IRt,context:L5e,createContextKey:NU,createNoopMeter:YRt,createTraceState:_It,default:RIt,defaultTextMapGetter:T5e,defaultTextMapSetter:N5e,diag:D5e,isSpanContextValid:DU,isValidSpanId:I5e,isValidTraceId:R5e,metrics:F5e,propagation:B5e,trace:V5e},Symbol.toStringTag,{value:"Module"})),Zee=hh(IIt);var fN={exports:{}},Jee;function PIt(){return Jee||(Jee=1,(()=>{var e={491:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ContextAPI=void 0;const l=o(223),c=o(172),u=o(930),d="context",m=new l.NoopContextManager;class p{constructor(){}static getInstance(){return this._instance||(this._instance=new p),this._instance}setGlobalContextManager(g){return(0,c.registerGlobal)(d,g,u.DiagAPI.instance())}active(){return this._getContextManager().active()}with(g,y,v,...x){return this._getContextManager().with(g,y,v,...x)}bind(g,y){return this._getContextManager().bind(g,y)}_getContextManager(){return(0,c.getGlobal)(d)||m}disable(){this._getContextManager().disable(),(0,c.unregisterGlobal)(d,u.DiagAPI.instance())}}a.ContextAPI=p},930:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagAPI=void 0;const l=o(56),c=o(912),u=o(957),d=o(172),m="diag";class p{constructor(){function g(x){return function(...b){const _=(0,d.getGlobal)("diag");if(_)return _[x](...b)}}const y=this,v=(x,b={logLevel:u.DiagLogLevel.INFO})=>{var _,w,C;if(x===y){const M=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return y.error((_=M.stack)!==null&&_!==void 0?_:M.message),!1}typeof b=="number"&&(b={logLevel:b});const S=(0,d.getGlobal)("diag"),E=(0,c.createLogLevelDiagLogger)((w=b.logLevel)!==null&&w!==void 0?w:u.DiagLogLevel.INFO,x);if(S&&!b.suppressOverrideMessage){const M=(C=new Error().stack)!==null&&C!==void 0?C:"<failed to generate stacktrace>";S.warn(`Current logger will be overwritten from ${M}`),E.warn(`Current logger will overwrite one already registered from ${M}`)}return(0,d.registerGlobal)("diag",E,y,!0)};y.setLogger=v,y.disable=()=>{(0,d.unregisterGlobal)(m,y)},y.createComponentLogger=x=>new l.DiagComponentLogger(x),y.verbose=g("verbose"),y.debug=g("debug"),y.info=g("info"),y.warn=g("warn"),y.error=g("error")}static instance(){return this._instance||(this._instance=new p),this._instance}}a.DiagAPI=p},653:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MetricsAPI=void 0;const l=o(660),c=o(172),u=o(930),d="metrics";class m{constructor(){}static getInstance(){return this._instance||(this._instance=new m),this._instance}setGlobalMeterProvider(h){return(0,c.registerGlobal)(d,h,u.DiagAPI.instance())}getMeterProvider(){return(0,c.getGlobal)(d)||l.NOOP_METER_PROVIDER}getMeter(h,g,y){return this.getMeterProvider().getMeter(h,g,y)}disable(){(0,c.unregisterGlobal)(d,u.DiagAPI.instance())}}a.MetricsAPI=m},181:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PropagationAPI=void 0;const l=o(172),c=o(874),u=o(194),d=o(277),m=o(369),p=o(930),h="propagation",g=new c.NoopTextMapPropagator;class y{constructor(){this.createBaggage=m.createBaggage,this.getBaggage=d.getBaggage,this.getActiveBaggage=d.getActiveBaggage,this.setBaggage=d.setBaggage,this.deleteBaggage=d.deleteBaggage}static getInstance(){return this._instance||(this._instance=new y),this._instance}setGlobalPropagator(x){return(0,l.registerGlobal)(h,x,p.DiagAPI.instance())}inject(x,b,_=u.defaultTextMapSetter){return this._getGlobalPropagator().inject(x,b,_)}extract(x,b,_=u.defaultTextMapGetter){return this._getGlobalPropagator().extract(x,b,_)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,l.unregisterGlobal)(h,p.DiagAPI.instance())}_getGlobalPropagator(){return(0,l.getGlobal)(h)||g}}a.PropagationAPI=y},997:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceAPI=void 0;const l=o(172),c=o(846),u=o(139),d=o(607),m=o(930),p="trace";class h{constructor(){this._proxyTracerProvider=new c.ProxyTracerProvider,this.wrapSpanContext=u.wrapSpanContext,this.isSpanContextValid=u.isSpanContextValid,this.deleteSpan=d.deleteSpan,this.getSpan=d.getSpan,this.getActiveSpan=d.getActiveSpan,this.getSpanContext=d.getSpanContext,this.setSpan=d.setSpan,this.setSpanContext=d.setSpanContext}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalTracerProvider(y){const v=(0,l.registerGlobal)(p,this._proxyTracerProvider,m.DiagAPI.instance());return v&&this._proxyTracerProvider.setDelegate(y),v}getTracerProvider(){return(0,l.getGlobal)(p)||this._proxyTracerProvider}getTracer(y,v){return this.getTracerProvider().getTracer(y,v)}disable(){(0,l.unregisterGlobal)(p,m.DiagAPI.instance()),this._proxyTracerProvider=new c.ProxyTracerProvider}}a.TraceAPI=h},277:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.deleteBaggage=a.setBaggage=a.getActiveBaggage=a.getBaggage=void 0;const l=o(491),u=(0,o(780).createContextKey)("OpenTelemetry Baggage Key");function d(g){return g.getValue(u)||void 0}a.getBaggage=d;function m(){return d(l.ContextAPI.getInstance().active())}a.getActiveBaggage=m;function p(g,y){return g.setValue(u,y)}a.setBaggage=p;function h(g){return g.deleteValue(u)}a.deleteBaggage=h},993:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaggageImpl=void 0;class o{constructor(c){this._entries=c?new Map(c):new Map}getEntry(c){const u=this._entries.get(c);if(u)return Object.assign({},u)}getAllEntries(){return Array.from(this._entries.entries()).map(([c,u])=>[c,u])}setEntry(c,u){const d=new o(this._entries);return d._entries.set(c,u),d}removeEntry(c){const u=new o(this._entries);return u._entries.delete(c),u}removeEntries(...c){const u=new o(this._entries);for(const d of c)u._entries.delete(d);return u}clear(){return new o}}a.BaggageImpl=o},830:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.baggageEntryMetadataSymbol=void 0,a.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.baggageEntryMetadataFromString=a.createBaggage=void 0;const l=o(930),c=o(993),u=o(830),d=l.DiagAPI.instance();function m(h={}){return new c.BaggageImpl(new Map(Object.entries(h)))}a.createBaggage=m;function p(h){return typeof h!="string"&&(d.error(`Cannot create baggage metadata from unknown type: ${typeof h}`),h=""),{__TYPE__:u.baggageEntryMetadataSymbol,toString(){return h}}}a.baggageEntryMetadataFromString=p},67:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.context=void 0;const l=o(491);a.context=l.ContextAPI.getInstance()},223:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopContextManager=void 0;const l=o(780);class c{active(){return l.ROOT_CONTEXT}with(d,m,p,...h){return m.call(p,...h)}bind(d,m){return m}enable(){return this}disable(){return this}}a.NoopContextManager=c},780:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ROOT_CONTEXT=a.createContextKey=void 0;function o(c){return Symbol.for(c)}a.createContextKey=o;class l{constructor(u){const d=this;d._currentContext=u?new Map(u):new Map,d.getValue=m=>d._currentContext.get(m),d.setValue=(m,p)=>{const h=new l(d._currentContext);return h._currentContext.set(m,p),h},d.deleteValue=m=>{const p=new l(d._currentContext);return p._currentContext.delete(m),p}}}a.ROOT_CONTEXT=new l},506:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.diag=void 0;const l=o(930);a.diag=l.DiagAPI.instance()},56:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagComponentLogger=void 0;const l=o(172);class c{constructor(m){this._namespace=m.namespace||"DiagComponentLogger"}debug(...m){return u("debug",this._namespace,m)}error(...m){return u("error",this._namespace,m)}info(...m){return u("info",this._namespace,m)}warn(...m){return u("warn",this._namespace,m)}verbose(...m){return u("verbose",this._namespace,m)}}a.DiagComponentLogger=c;function u(d,m,p){const h=(0,l.getGlobal)("diag");if(h)return p.unshift(m),h[d](...p)}},972:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagConsoleLogger=void 0;const o=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class l{constructor(){function u(d){return function(...m){if(console){let p=console[d];if(typeof p!="function"&&(p=console.log),typeof p=="function")return p.apply(console,m)}}}for(let d=0;d<o.length;d++)this[o[d].n]=u(o[d].c)}}a.DiagConsoleLogger=l},912:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createLogLevelDiagLogger=void 0;const l=o(957);function c(u,d){u<l.DiagLogLevel.NONE?u=l.DiagLogLevel.NONE:u>l.DiagLogLevel.ALL&&(u=l.DiagLogLevel.ALL),d=d||{};function m(p,h){const g=d[p];return typeof g=="function"&&u>=h?g.bind(d):function(){}}return{error:m("error",l.DiagLogLevel.ERROR),warn:m("warn",l.DiagLogLevel.WARN),info:m("info",l.DiagLogLevel.INFO),debug:m("debug",l.DiagLogLevel.DEBUG),verbose:m("verbose",l.DiagLogLevel.VERBOSE)}}a.createLogLevelDiagLogger=c},957:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagLogLevel=void 0,function(o){o[o.NONE=0]="NONE",o[o.ERROR=30]="ERROR",o[o.WARN=50]="WARN",o[o.INFO=60]="INFO",o[o.DEBUG=70]="DEBUG",o[o.VERBOSE=80]="VERBOSE",o[o.ALL=9999]="ALL"}(a.DiagLogLevel||(a.DiagLogLevel={}))},172:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.unregisterGlobal=a.getGlobal=a.registerGlobal=void 0;const l=o(200),c=o(521),u=o(130),d=c.VERSION.split(".")[0],m=Symbol.for(`opentelemetry.js.api.${d}`),p=l._globalThis;function h(v,x,b,_=!1){var w;const C=p[m]=(w=p[m])!==null&&w!==void 0?w:{version:c.VERSION};if(!_&&C[v]){const S=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${v}`);return b.error(S.stack||S.message),!1}if(C.version!==c.VERSION){const S=new Error(`@opentelemetry/api: Registration of version v${C.version} for ${v} does not match previously registered API v${c.VERSION}`);return b.error(S.stack||S.message),!1}return C[v]=x,b.debug(`@opentelemetry/api: Registered a global for ${v} v${c.VERSION}.`),!0}a.registerGlobal=h;function g(v){var x,b;const _=(x=p[m])===null||x===void 0?void 0:x.version;if(!(!_||!(0,u.isCompatible)(_)))return(b=p[m])===null||b===void 0?void 0:b[v]}a.getGlobal=g;function y(v,x){x.debug(`@opentelemetry/api: Unregistering a global for ${v} v${c.VERSION}.`);const b=p[m];b&&delete b[v]}a.unregisterGlobal=y},130:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isCompatible=a._makeCompatibilityCheck=void 0;const l=o(521),c=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function u(d){const m=new Set([d]),p=new Set,h=d.match(c);if(!h)return()=>!1;const g={major:+h[1],minor:+h[2],patch:+h[3],prerelease:h[4]};if(g.prerelease!=null)return function(b){return b===d};function y(x){return p.add(x),!1}function v(x){return m.add(x),!0}return function(b){if(m.has(b))return!0;if(p.has(b))return!1;const _=b.match(c);if(!_)return y(b);const w={major:+_[1],minor:+_[2],patch:+_[3],prerelease:_[4]};return w.prerelease!=null||g.major!==w.major?y(b):g.major===0?g.minor===w.minor&&g.patch<=w.patch?v(b):y(b):g.minor<=w.minor?v(b):y(b)}}a._makeCompatibilityCheck=u,a.isCompatible=u(l.VERSION)},886:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.metrics=void 0;const l=o(653);a.metrics=l.MetricsAPI.getInstance()},901:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ValueType=void 0,function(o){o[o.INT=0]="INT",o[o.DOUBLE=1]="DOUBLE"}(a.ValueType||(a.ValueType={}))},102:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createNoopMeter=a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=a.NOOP_OBSERVABLE_GAUGE_METRIC=a.NOOP_OBSERVABLE_COUNTER_METRIC=a.NOOP_UP_DOWN_COUNTER_METRIC=a.NOOP_HISTOGRAM_METRIC=a.NOOP_COUNTER_METRIC=a.NOOP_METER=a.NoopObservableUpDownCounterMetric=a.NoopObservableGaugeMetric=a.NoopObservableCounterMetric=a.NoopObservableMetric=a.NoopHistogramMetric=a.NoopUpDownCounterMetric=a.NoopCounterMetric=a.NoopMetric=a.NoopMeter=void 0;class o{constructor(){}createHistogram(x,b){return a.NOOP_HISTOGRAM_METRIC}createCounter(x,b){return a.NOOP_COUNTER_METRIC}createUpDownCounter(x,b){return a.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(x,b){return a.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(x,b){return a.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(x,b){return a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(x,b){}removeBatchObservableCallback(x){}}a.NoopMeter=o;class l{}a.NoopMetric=l;class c extends l{add(x,b){}}a.NoopCounterMetric=c;class u extends l{add(x,b){}}a.NoopUpDownCounterMetric=u;class d extends l{record(x,b){}}a.NoopHistogramMetric=d;class m{addCallback(x){}removeCallback(x){}}a.NoopObservableMetric=m;class p extends m{}a.NoopObservableCounterMetric=p;class h extends m{}a.NoopObservableGaugeMetric=h;class g extends m{}a.NoopObservableUpDownCounterMetric=g,a.NOOP_METER=new o,a.NOOP_COUNTER_METRIC=new c,a.NOOP_HISTOGRAM_METRIC=new d,a.NOOP_UP_DOWN_COUNTER_METRIC=new u,a.NOOP_OBSERVABLE_COUNTER_METRIC=new p,a.NOOP_OBSERVABLE_GAUGE_METRIC=new h,a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new g;function y(){return a.NOOP_METER}a.createNoopMeter=y},660:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NOOP_METER_PROVIDER=a.NoopMeterProvider=void 0;const l=o(102);class c{getMeter(d,m,p){return l.NOOP_METER}}a.NoopMeterProvider=c,a.NOOP_METER_PROVIDER=new c},200:function(s,a,o){var l=this&&this.__createBinding||(Object.create?function(u,d,m,p){p===void 0&&(p=m),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[m]}})}:function(u,d,m,p){p===void 0&&(p=m),u[p]=d[m]}),c=this&&this.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&l(d,u,m)};Object.defineProperty(a,"__esModule",{value:!0}),c(o(46),a)},651:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a._globalThis=void 0,a._globalThis=typeof globalThis=="object"?globalThis:Ya},46:function(s,a,o){var l=this&&this.__createBinding||(Object.create?function(u,d,m,p){p===void 0&&(p=m),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[m]}})}:function(u,d,m,p){p===void 0&&(p=m),u[p]=d[m]}),c=this&&this.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&l(d,u,m)};Object.defineProperty(a,"__esModule",{value:!0}),c(o(651),a)},939:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.propagation=void 0;const l=o(181);a.propagation=l.PropagationAPI.getInstance()},874:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTextMapPropagator=void 0;class o{inject(c,u){}extract(c,u){return c}fields(){return[]}}a.NoopTextMapPropagator=o},194:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.defaultTextMapSetter=a.defaultTextMapGetter=void 0,a.defaultTextMapGetter={get(o,l){if(o!=null)return o[l]},keys(o){return o==null?[]:Object.keys(o)}},a.defaultTextMapSetter={set(o,l,c){o!=null&&(o[l]=c)}}},845:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.trace=void 0;const l=o(997);a.trace=l.TraceAPI.getInstance()},403:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NonRecordingSpan=void 0;const l=o(476);class c{constructor(d=l.INVALID_SPAN_CONTEXT){this._spanContext=d}spanContext(){return this._spanContext}setAttribute(d,m){return this}setAttributes(d){return this}addEvent(d,m){return this}setStatus(d){return this}updateName(d){return this}end(d){}isRecording(){return!1}recordException(d,m){}}a.NonRecordingSpan=c},614:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTracer=void 0;const l=o(491),c=o(607),u=o(403),d=o(139),m=l.ContextAPI.getInstance();class p{startSpan(y,v,x=m.active()){if(!!v?.root)return new u.NonRecordingSpan;const _=x&&(0,c.getSpanContext)(x);return h(_)&&(0,d.isSpanContextValid)(_)?new u.NonRecordingSpan(_):new u.NonRecordingSpan}startActiveSpan(y,v,x,b){let _,w,C;if(arguments.length<2)return;arguments.length===2?C=v:arguments.length===3?(_=v,C=x):(_=v,w=x,C=b);const S=w??m.active(),E=this.startSpan(y,_,S),M=(0,c.setSpan)(S,E);return m.with(M,C,void 0,E)}}a.NoopTracer=p;function h(g){return typeof g=="object"&&typeof g.spanId=="string"&&typeof g.traceId=="string"&&typeof g.traceFlags=="number"}},124:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTracerProvider=void 0;const l=o(614);class c{getTracer(d,m,p){return new l.NoopTracer}}a.NoopTracerProvider=c},125:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ProxyTracer=void 0;const l=o(614),c=new l.NoopTracer;class u{constructor(m,p,h,g){this._provider=m,this.name=p,this.version=h,this.options=g}startSpan(m,p,h){return this._getTracer().startSpan(m,p,h)}startActiveSpan(m,p,h,g){const y=this._getTracer();return Reflect.apply(y.startActiveSpan,y,arguments)}_getTracer(){if(this._delegate)return this._delegate;const m=this._provider.getDelegateTracer(this.name,this.version,this.options);return m?(this._delegate=m,this._delegate):c}}a.ProxyTracer=u},846:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ProxyTracerProvider=void 0;const l=o(125),c=o(124),u=new c.NoopTracerProvider;class d{getTracer(p,h,g){var y;return(y=this.getDelegateTracer(p,h,g))!==null&&y!==void 0?y:new l.ProxyTracer(this,p,h,g)}getDelegate(){var p;return(p=this._delegate)!==null&&p!==void 0?p:u}setDelegate(p){this._delegate=p}getDelegateTracer(p,h,g){var y;return(y=this._delegate)===null||y===void 0?void 0:y.getTracer(p,h,g)}}a.ProxyTracerProvider=d},996:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SamplingDecision=void 0,function(o){o[o.NOT_RECORD=0]="NOT_RECORD",o[o.RECORD=1]="RECORD",o[o.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(a.SamplingDecision||(a.SamplingDecision={}))},607:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSpanContext=a.setSpanContext=a.deleteSpan=a.setSpan=a.getActiveSpan=a.getSpan=void 0;const l=o(780),c=o(403),u=o(491),d=(0,l.createContextKey)("OpenTelemetry Context Key SPAN");function m(x){return x.getValue(d)||void 0}a.getSpan=m;function p(){return m(u.ContextAPI.getInstance().active())}a.getActiveSpan=p;function h(x,b){return x.setValue(d,b)}a.setSpan=h;function g(x){return x.deleteValue(d)}a.deleteSpan=g;function y(x,b){return h(x,new c.NonRecordingSpan(b))}a.setSpanContext=y;function v(x){var b;return(b=m(x))===null||b===void 0?void 0:b.spanContext()}a.getSpanContext=v},325:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceStateImpl=void 0;const l=o(564),c=32,u=512,d=",",m="=";class p{constructor(g){this._internalState=new Map,g&&this._parse(g)}set(g,y){const v=this._clone();return v._internalState.has(g)&&v._internalState.delete(g),v._internalState.set(g,y),v}unset(g){const y=this._clone();return y._internalState.delete(g),y}get(g){return this._internalState.get(g)}serialize(){return this._keys().reduce((g,y)=>(g.push(y+m+this.get(y)),g),[]).join(d)}_parse(g){g.length>u||(this._internalState=g.split(d).reverse().reduce((y,v)=>{const x=v.trim(),b=x.indexOf(m);if(b!==-1){const _=x.slice(0,b),w=x.slice(b+1,v.length);(0,l.validateKey)(_)&&(0,l.validateValue)(w)&&y.set(_,w)}return y},new Map),this._internalState.size>c&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,c))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const g=new p;return g._internalState=new Map(this._internalState),g}}a.TraceStateImpl=p},564:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateValue=a.validateKey=void 0;const o="[_0-9a-z-*/]",l=`[a-z]${o}{0,255}`,c=`[a-z0-9]${o}{0,240}@[a-z]${o}{0,13}`,u=new RegExp(`^(?:${l}|${c})$`),d=/^[ -~]{0,255}[!-~]$/,m=/,|=/;function p(g){return u.test(g)}a.validateKey=p;function h(g){return d.test(g)&&!m.test(g)}a.validateValue=h},98:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createTraceState=void 0;const l=o(325);function c(u){return new l.TraceStateImpl(u)}a.createTraceState=c},476:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.INVALID_SPAN_CONTEXT=a.INVALID_TRACEID=a.INVALID_SPANID=void 0;const l=o(475);a.INVALID_SPANID="0000000000000000",a.INVALID_TRACEID="00000000000000000000000000000000",a.INVALID_SPAN_CONTEXT={traceId:a.INVALID_TRACEID,spanId:a.INVALID_SPANID,traceFlags:l.TraceFlags.NONE}},357:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SpanKind=void 0,function(o){o[o.INTERNAL=0]="INTERNAL",o[o.SERVER=1]="SERVER",o[o.CLIENT=2]="CLIENT",o[o.PRODUCER=3]="PRODUCER",o[o.CONSUMER=4]="CONSUMER"}(a.SpanKind||(a.SpanKind={}))},139:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.wrapSpanContext=a.isSpanContextValid=a.isValidSpanId=a.isValidTraceId=void 0;const l=o(476),c=o(403),u=/^([0-9a-f]{32})$/i,d=/^[0-9a-f]{16}$/i;function m(y){return u.test(y)&&y!==l.INVALID_TRACEID}a.isValidTraceId=m;function p(y){return d.test(y)&&y!==l.INVALID_SPANID}a.isValidSpanId=p;function h(y){return m(y.traceId)&&p(y.spanId)}a.isSpanContextValid=h;function g(y){return new c.NonRecordingSpan(y)}a.wrapSpanContext=g},847:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SpanStatusCode=void 0,function(o){o[o.UNSET=0]="UNSET",o[o.OK=1]="OK",o[o.ERROR=2]="ERROR"}(a.SpanStatusCode||(a.SpanStatusCode={}))},475:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceFlags=void 0,function(o){o[o.NONE=0]="NONE",o[o.SAMPLED=1]="SAMPLED"}(a.TraceFlags||(a.TraceFlags={}))},521:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VERSION=void 0,a.VERSION="1.6.0"}},t={};function n(s){var a=t[s];if(a!==void 0)return a.exports;var o=t[s]={exports:{}},l=!0;try{e[s].call(o.exports,o,o.exports,n),l=!1}finally{l&&delete t[s]}return o.exports}typeof n<"u"&&(n.ab=__dirname+"/");var r={};(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.trace=s.propagation=s.metrics=s.diag=s.context=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.createTraceState=s.TraceFlags=s.SpanStatusCode=s.SpanKind=s.SamplingDecision=s.ProxyTracerProvider=s.ProxyTracer=s.defaultTextMapSetter=s.defaultTextMapGetter=s.ValueType=s.createNoopMeter=s.DiagLogLevel=s.DiagConsoleLogger=s.ROOT_CONTEXT=s.createContextKey=s.baggageEntryMetadataFromString=void 0;var a=n(369);Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}});var o=n(780);Object.defineProperty(s,"createContextKey",{enumerable:!0,get:function(){return o.createContextKey}}),Object.defineProperty(s,"ROOT_CONTEXT",{enumerable:!0,get:function(){return o.ROOT_CONTEXT}});var l=n(972);Object.defineProperty(s,"DiagConsoleLogger",{enumerable:!0,get:function(){return l.DiagConsoleLogger}});var c=n(957);Object.defineProperty(s,"DiagLogLevel",{enumerable:!0,get:function(){return c.DiagLogLevel}});var u=n(102);Object.defineProperty(s,"createNoopMeter",{enumerable:!0,get:function(){return u.createNoopMeter}});var d=n(901);Object.defineProperty(s,"ValueType",{enumerable:!0,get:function(){return d.ValueType}});var m=n(194);Object.defineProperty(s,"defaultTextMapGetter",{enumerable:!0,get:function(){return m.defaultTextMapGetter}}),Object.defineProperty(s,"defaultTextMapSetter",{enumerable:!0,get:function(){return m.defaultTextMapSetter}});var p=n(125);Object.defineProperty(s,"ProxyTracer",{enumerable:!0,get:function(){return p.ProxyTracer}});var h=n(846);Object.defineProperty(s,"ProxyTracerProvider",{enumerable:!0,get:function(){return h.ProxyTracerProvider}});var g=n(996);Object.defineProperty(s,"SamplingDecision",{enumerable:!0,get:function(){return g.SamplingDecision}});var y=n(357);Object.defineProperty(s,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}});var v=n(847);Object.defineProperty(s,"SpanStatusCode",{enumerable:!0,get:function(){return v.SpanStatusCode}});var x=n(475);Object.defineProperty(s,"TraceFlags",{enumerable:!0,get:function(){return x.TraceFlags}});var b=n(98);Object.defineProperty(s,"createTraceState",{enumerable:!0,get:function(){return b.createTraceState}});var _=n(139);Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}});var w=n(476);Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return w.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return w.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return w.INVALID_SPAN_CONTEXT}});const C=n(67);Object.defineProperty(s,"context",{enumerable:!0,get:function(){return C.context}});const S=n(506);Object.defineProperty(s,"diag",{enumerable:!0,get:function(){return S.diag}});const E=n(886);Object.defineProperty(s,"metrics",{enumerable:!0,get:function(){return E.metrics}});const M=n(939);Object.defineProperty(s,"propagation",{enumerable:!0,get:function(){return M.propagation}});const k=n(845);Object.defineProperty(s,"trace",{enumerable:!0,get:function(){return k.trace}}),s.default={context:C.context,diag:S.diag,metrics:E.metrics,propagation:M.propagation,trace:k.trace}})(),fN.exports=r})()),fN.exports}var ete;function OIt(){return ete||(ete=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0});function n(S,E){for(var M in E)Object.defineProperty(S,M,{enumerable:!0,get:E[M]})}n(e,{BubbledError:function(){return p},SpanKind:function(){return d},SpanStatusCode:function(){return u},getTracer:function(){return C},isBubbledError:function(){return h}});const r=E5e(),s=hRt();let a;if(t.NEXT_RUNTIME==="edge")a=Zee;else try{a=Zee}catch{a=PIt()}const{context:o,propagation:l,trace:c,SpanStatusCode:u,SpanKind:d,ROOT_CONTEXT:m}=a;class p extends Error{constructor(E,M){super(),this.bubble=E,this.result=M}}function h(S){return typeof S!="object"||S===null?!1:S instanceof p}const g=(S,E)=>{h(E)&&E.bubble?S.setAttribute("next.bubble",!0):(E&&S.recordException(E),S.setStatus({code:u.ERROR,message:E?.message})),S.end()},y=new Map,v=a.createContextKey("next.rootSpanId");let x=0;const b=()=>x++,_={set(S,E,M){S.push({key:E,value:M})}};class w{getTracerInstance(){return c.getTracer("next.js","0.0.1")}getContext(){return o}getTracePropagationData(){const E=o.active(),M=[];return l.inject(E,M,_),M}getActiveScopeSpan(){return c.getSpan(o?.active())}withPropagatedContext(E,M,k){const T=o.active();if(c.getSpanContext(T))return M();const j=l.extract(T,E,k);return o.with(j,M)}trace(...E){var M;const[k,T,j]=E,{fn:R,options:O}=typeof T=="function"?{fn:T,options:{}}:{fn:j,options:{...T}},P=O.spanName??k;if(!r.NextVanillaSpanAllowlist.includes(k)&&t.NEXT_OTEL_VERBOSE!=="1"||O.hideSpan)return R();let N=this.getSpanContext(O?.parentSpan??this.getActiveScopeSpan()),I=!1;N?(M=c.getSpanContext(N))!=null&&M.isRemote&&(I=!0):(N=o?.active()??m,I=!0);const D=b();return O.attributes={"next.span_name":P,"next.span_type":k,...O.attributes},o.with(N.setValue(v,D),()=>this.getTracerInstance().startActiveSpan(P,O,F=>{const B="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,V=()=>{y.delete(D),B&&t.NEXT_OTEL_PERFORMANCE_PREFIX&&r.LogSpanAllowList.includes(k||"")&&performance.measure(`${t.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(k.split(".").pop()||"").replace(/[A-Z]/g,$=>"-"+$.toLowerCase())}`,{start:B,end:performance.now()})};I&&y.set(D,new Map(Object.entries(O.attributes??{})));try{if(R.length>1)return R(F,G=>g(F,G));const $=R(F);return(0,s.isThenable)($)?$.then(G=>(F.end(),G)).catch(G=>{throw g(F,G),G}).finally(V):(F.end(),V(),$)}catch($){throw g(F,$),V(),$}}))}wrap(...E){const M=this,[k,T,j]=E.length===3?E:[E[0],{},E[1]];return!r.NextVanillaSpanAllowlist.includes(k)&&t.NEXT_OTEL_VERBOSE!=="1"?j:function(){let R=T;typeof R=="function"&&typeof j=="function"&&(R=R.apply(this,arguments));const O=arguments.length-1,P=arguments[O];if(typeof P=="function"){const N=M.getContext().bind(o.active(),P);return M.trace(k,R,(I,D)=>(arguments[O]=function(F){return D?.(F),N.apply(this,arguments)},j.apply(this,arguments)))}else return M.trace(k,R,()=>j.apply(this,arguments))}}startSpan(...E){const[M,k]=E,T=this.getSpanContext(k?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(M,k,T)}getSpanContext(E){return E?c.setSpan(o.active(),E):void 0}getRootSpanAttributes(){const E=o.active().getValue(v);return y.get(E)}setRootSpanAttribute(E,M){const k=o.active().getValue(v),T=y.get(k);T&&T.set(E,M)}}const C=(()=>{const S=new w;return()=>S})()}(rN)),rN}var mN={exports:{}},tte;function LIt(){return tte||(tte=1,(()=>{typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab=__dirname+"/");var e={};(()=>{var t=e;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=o,t.serialize=l;var n=decodeURIComponent,r=encodeURIComponent,s=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(u,d){if(typeof u!="string")throw new TypeError("argument str must be a string");for(var m={},p=d||{},h=u.split(s),g=p.decode||n,y=0;y<h.length;y++){var v=h[y],x=v.indexOf("=");if(!(x<0)){var b=v.substr(0,x).trim(),_=v.substr(++x,v.length).trim();_[0]=='"'&&(_=_.slice(1,-1)),m[b]==null&&(m[b]=c(_,g))}}return m}function l(u,d,m){var p=m||{},h=p.encode||r;if(typeof h!="function")throw new TypeError("option encode is invalid");if(!a.test(u))throw new TypeError("argument name is invalid");var g=h(d);if(g&&!a.test(g))throw new TypeError("argument val is invalid");var y=u+"="+g;if(p.maxAge!=null){var v=p.maxAge-0;if(isNaN(v)||!isFinite(v))throw new TypeError("option maxAge is invalid");y+="; Max-Age="+Math.floor(v)}if(p.domain){if(!a.test(p.domain))throw new TypeError("option domain is invalid");y+="; Domain="+p.domain}if(p.path){if(!a.test(p.path))throw new TypeError("option path is invalid");y+="; Path="+p.path}if(p.expires){if(typeof p.expires.toUTCString!="function")throw new TypeError("option expires is invalid");y+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(y+="; HttpOnly"),p.secure&&(y+="; Secure"),p.sameSite){var x=typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite;switch(x){case!0:y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"strict":y+="; SameSite=Strict";break;case"none":y+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return y}function c(u,d){try{return d(u)}catch{return u}}})(),mN.exports=e})()),mN.exports}var nte;function DIt(){return nte||(nte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,w){for(var C in w)Object.defineProperty(_,C,{enumerable:!0,get:w[C]})}t(e,{ApiError:function(){return v},COOKIE_NAME_PRERENDER_BYPASS:function(){return d},COOKIE_NAME_PRERENDER_DATA:function(){return m},RESPONSE_LIMIT_DEFAULT:function(){return p},SYMBOL_CLEARED_COOKIES:function(){return g},SYMBOL_PREVIEW_DATA:function(){return h},checkIsOnDemandRevalidate:function(){return u},clearPreviewData:function(){return y},redirect:function(){return c},sendError:function(){return x},sendStatusCode:function(){return l},setLazyProp:function(){return b},wrapApiHandler:function(){return o}});const n=mRt(),r=pRt(),s=OIt(),a=E5e();function o(_,w){return(...C)=>((0,s.getTracer)().setRootSpanAttribute("next.route",_),(0,s.getTracer)().trace(a.NodeSpan.runHandler,{spanName:`executing api route (pages) ${_}`},()=>w(...C)))}function l(_,w){return _.statusCode=w,_}function c(_,w,C){if(typeof w=="string"&&(C=w,w=307),typeof w!="number"||typeof C!="string")throw Object.defineProperty(new Error("Invalid redirect arguments. Please use a single argument URL, e.g. res.redirect('/destination') or use a status code and URL, e.g. res.redirect(307, '/destination')."),"__NEXT_ERROR_CODE",{value:"E389",enumerable:!1,configurable:!0});return _.writeHead(w,{Location:C}),_.write(C),_.end(),_}function u(_,w){const C=n.HeadersAdapter.from(_.headers),E=C.get(r.PRERENDER_REVALIDATE_HEADER)===w.previewModeId,M=C.has(r.PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER);return{isOnDemandRevalidate:E,revalidateOnlyGenerated:M}}const d="__prerender_bypass",m="__next_preview_data",p=4*1024*1024,h=Symbol(m),g=Symbol(d);function y(_,w={}){if(g in _)return _;const{serialize:C}=LIt(),S=_.getHeader("Set-Cookie");return _.setHeader("Set-Cookie",[...typeof S=="string"?[S]:Array.isArray(S)?S:[],C(d,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...w.path!==void 0?{path:w.path}:void 0}),C(m,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...w.path!==void 0?{path:w.path}:void 0})]),Object.defineProperty(_,g,{value:!0,enumerable:!1}),_}class v extends Error{constructor(w,C){super(C),this.statusCode=w}}function x(_,w,C){_.statusCode=w,_.statusMessage=C,_.end(C)}function b({req:_},w,C){const S={configurable:!0,enumerable:!0},E={...S,writable:!0};Object.defineProperty(_,w,{...S,get:()=>{const M=C();return Object.defineProperty(_,w,{...E,value:M}),M},set:M=>{Object.defineProperty(_,w,{...E,value:M})}})}}(J6)),J6}var FIt=DIt();function UIt(e,t,n){if(!e)return null;const r=e.split(t);return r.length<=n?r:[r.slice(0,-1).join(t),...r.slice(-1)]}function uh(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}const BIt=async({hotelSlug:e,headers:t={},reason:n})=>{const{error:r,data:s}=await ne.GET("/rest/travel/hotels/{slug}",n,{params:{path:{slug:e}},headers:t,timeoutMs:Kt.HIGH});if(r)throw new Ee("API_CLIENTS_ERROR",{cause:r});return s},l$t=async({filters:e,reason:t})=>{const n=await ne.POST("/rest/travel/hotels/search-widgets",t,{body:e,timeoutMs:Kt.NONE});if(n.data)return{hotels:n.data.hotels,map_item:n.data.map_item};throw new Error("No hotel results returned",{cause:n.error})},c$t=async({hotelTripadvisorId:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:o}=t,l=await ne.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:[e]},stay_info:{check_in_date:uh(r),check_out_date:uh(s),guests:{adults:a,children:o}}},timeoutMs:Kt.HIGH,retries:2});return l.data?{availability:l.data.results?.find(c=>c.tripadvisor_id===e),currencyExchangeRates:l.data.currency_exchange_rates,otaOffers:l.data.ota_hotel_offers?.find(c=>c.tripadvisor_id===e),perplexityProRateInfo:l.data.perplexity_pro_rate_info}:null},u$t=async({tripadvisorIds:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:o}=t,l=await ne.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:e},stay_info:{check_in_date:uh(r),check_out_date:uh(s),guests:{adults:a,children:o}}},timeoutMs:Kt.HIGH,retries:2});return l.data?{availability:l.data.results,currencyExchangeRates:l.data.currency_exchange_rates,otaOffers:l.data.ota_hotel_offers}:null},d$t=async({searchPayload:e,rate:t,paymentInfo:n,discountId:r,isProRate:s,reason:a})=>{const{checkIn:o,checkOut:l,numAdults:c,numChildren:u}=e,d=UIt(n.name," ",1),m=await ne.POST("/rest/travel/hotels/reservations",a,{timeoutMs:Kt.NONE,body:{hotel_booking:{check_in_date:uh(o),check_out_date:uh(l),guests:{number_of_adults:c,number_of_children:u||null,primary:{address:{street:[n.address.line1,n.address.line2].filter(p=>!!p).join(" "),city:n.address.city,state:n.address.state,country_code:n.address.country,postal_code:n.address.postal_code},email:n.email,given_name:d?.[0]??"",surname:d?.[1]??"",telephone_number:n.phone}},payment:{stripe_payment_method_id:n.stripePaymentMethodId,stripe_customer_id:n.stripeCustomerId},selfbook_rate:{...t,is_pro_rate:s},customer_loyalty_code:n.customerLoyaltyCode},discount_id:r}});if(m.data)return m.data.hotel_booking;throw new FIt.ApiError(m.response.status,"Booking hotel room failed")},f$t=async({limit:e,offset:t,isCanceled:n,beforeDate:r,afterDate:s,dateOrder:a="desc",headers:o,reason:l})=>{const c=await ne.GET("/rest/travel/hotels/user/reservations",l,{params:{query:{limit:e,offset:t,is_canceled:n,before_date:r,after_date:s,date_order_by:a}},headers:o,timeoutMs:Kt.MEDIUM});return c.data?c.data:null},m$t=async({bookingId:e,reason:t})=>{const n=await ne.DELETE("/rest/travel/hotels/reservations/{reservation_id}",t,{params:{path:{reservation_id:e}},timeoutMs:Kt.HIGH});if(!n.data)throw Error("Failed to cancel booking",{cause:n.error})},p$t=async({amount:e,currency:t,paymentMethodId:n,reason:r})=>{const s=await ne.GET("/rest/travel/hotels/user/discount-offer",r,{params:{query:{base_amount_micros:e,currency_code:t,payment_method_id:n}},timeoutMs:Kt.HIGH});return s.data?s.data:null},h$t=async({reason:e})=>{const t=await ne.GET("/rest/stripe/get-customer-billing-info",e);return t.data?t.data:null},VIt=({slug:e,reason:t,enabled:n=!!e})=>$e({enabled:n,queryKey:["hotels",e],queryFn:()=>BIt({hotelSlug:e,reason:t})}),WIt=e=>{const t=/\[([^\]]+)\]\(pplx:\/\/action\/[^)]+\)/g;return e.replace(t,"$1")};var LC={};const b0="Perplexity",$It="",W5e=80,$5e=160,vR="Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question.";function HIt(e){if(!e)return null;try{return new Date(e).toISOString().slice(0,10)}catch{return null}}const xR=({firstEntity:e,query:t,slug:n,userAgent:r})=>{if(r?b1(r):!1)return ir({title:b0,index:!1,userAgent:r});if(!e)return pN({result:"no_result",slug:n,userAgent:r}),ir({index:!1,title:t?hc(t).actualQuery||t:void 0,userAgent:r});const a=un.parseAskTextField(e);if(!a)return pN({result:"bad_parse",slug:n,userAgent:r}),ir({index:!1,userAgent:r});const o=zIt(e);pN({result:"url_served",slug:n,userAgent:r,imageURL:o});let l=b0,c;if(Sde(e)&&e.article_info?.title?(l=e.article_info.title,e?.article_info?.read_time,c=e?.author_username):e.thread_title&&e.thread_title!==$It?l=e.thread_title:e.query_str&&(l=e.query_str),l){const{actualQuery:p}=hc(l);l=p||l,l=jp(l,W5e)}const u=a.answer?jp(a.answer,$5e):vR,d=e?.thread_url_slug?e?.mode?.toLowerCase()=="article"?`https://www.perplexity.ai/page/${e.thread_url_slug}`:`https://www.perplexity.ai/search/${e.thread_url_slug}`:void 0,m=WIt(u);return ir({imageURL:o,title:l,description:m,author:c,datePublished:e?.updated_datetime,canonicalURL:d,index:e?.should_index??!1,userAgent:r})},pN=({result:e,slug:t,userAgent:n,imageURL:r})=>{const s="[trackThreadOGImageServing]";try{t!=="new"&&WS(`${s} [${t}] [${n}] ${e}: ${r}`)}catch(a){ile("[trackThreadOGImageServing] error:",{result:e,slug:t,userAgent:n,imageURL:r,err:a})}},zIt=e=>{let t=Wm;const n=`[getThreadOGImageURL] [${e?.thread_url_slug}]`;if(e.s3_social_preview_url&&e.s3_social_preview_url!==Wm)return e.s3_social_preview_url;try{t=Wm;const r=un.isArticleMode(e);return e.thread_url_slug?r?`${LC.NEXTAUTH_URL}/api/og/page/${e.thread_url_slug}`:`${LC.NEXTAUTH_URL}/api/og/thread/${e.thread_url_slug}`:t}catch(r){WS(`${n} error getting thread og image url: `,r)}return t},GIt=e=>{let t=Wm;const n=`[getSpaceOGImageURL] [${e?.slug}]`;try{return t=e?.s3_social_preview_url??Wm,e?.slug?`${LC.NEXTAUTH_URL}/api/og/space/${e?.slug}`:t}catch(r){WS(`${n} error getting space og image url: `,r)}return t},ir=({title:e=b0,description:t=vR,imageURL:n=Wm,canonicalURL:r,author:s,datePublished:a,index:o,userAgent:l})=>{try{let c=!1;typeof window>"u"&&(c=l?b1(l):!1),c&&(e=b0);const u=HIt(a);return r=r??"./",{metadataBase:new URL("https://www.perplexity.ai"),title:e,description:t,author:s??void 0,alternates:{canonical:r},openGraph:{url:r,images:[n],locale:"en_US",type:"website",siteName:"Perplexity AI"},twitter:{card:t?"summary_large_image":"summary",images:[n],site:"@perplexity_ai",creator:s?`@${s}`:void 0},other:{datePublished:u??""},robots:{index:o}}}catch(c){return ile("[generatePageMetadata] Error generating metadata:",c),{title:b0,description:vR,metadataBase:new URL("https://www.perplexity.ai"),robots:{index:!1}}}};function qIt({collection:e,slug:t,userAgent:n}){return!t||!e||e?.status==="failed"?ir({index:!1,userAgent:n}):ir({index:!1,title:e?.title??"Perplexity AI",description:"A Space on Perplexity AI by "+e?.owner_user?.username+"  "+e?.description,imageURL:GIt(e),canonicalURL:`https://www.perplexity.ai/spaces/${t}`,author:e?.owner_user?.username,datePublished:e?.updated_datetime,userAgent:n})}function rte({articleSection:e,slug:t,userAgent:n}){return xR(!t||!e?{slug:t,userAgent:n}:{firstEntity:e,slug:t,userAgent:n})}function KIt({userAgent:e}){return ir({imageURL:"https://r2cdn.perplexity.ai/pplx-academic-og.png",title:"Perplexity Academic",description:"The free, AI-powered academic search engine for scholars, students, and educators. Get instant answers from research papers, peer-reviewed journal articles, theses, conference papers, technical reports, and more.",index:!0,userAgent:e})}function YIt({userAgent:e}){return ir({title:"Perplexity Shopping",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-shopping-og.png",description:"Discover trending products, best deals, and trusted reviews with Perplexity Shopping  your smart companion for finding what to buy.",userAgent:e})}function QIt({hotelData:e,userAgent:t}){return ir(e?{title:`${e?.hotel.name} - Perplexity Travel`,imageURL:e?.hotel?.photos[0]?.image_url,description:e?.hotel.description??void 0,index:!0,userAgent:t}:{index:!1,userAgent:t})}function XIt({userAgent:e}){return ir({title:"Perplexify Me",index:!0,imageURL:"https://r2cdn.perplexity.ai/poster-lab-og-image.png",description:"Generate a personalized Perplexity poster.",userAgent:e})}function ZIt({userAgent:e}){return ir({title:"Perplexity Discover",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-discover-og.png",description:"Stay informed on the biggest stories happening around the world across tech, finance, sports, entertainment and more with Perplexity Discover.",userAgent:e})}function JIt({userAgent:e}){return ir({title:"Perplexity Travel",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-travel-og.png",description:"Explore top destinations, hidden gems, and travel tips all in one place with Perplexity Travel  your go-to for smarter, faster trip planning.",userAgent:e})}function e7t({$t:e}){return{title:e({defaultMessage:"Formula 1  Perplexity Sports",id:"Ktk9GJrnKB"})}}function t7t({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.subtitle;return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function n7t({$t:e}){return{title:e({defaultMessage:"NBA  Perplexity Sports",id:"OygSHzfDGc"})}}function r7t({$t:e}){return{title:e({defaultMessage:"Perplexity Finance",id:"DhdcmgxwQc"}),description:e({defaultMessage:"Get the latest stock price, historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.",id:"NcFbXdi/CA"}),imageURL:"https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg"}}function s7t({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function a7t({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NBA | Perplexity Sports",id:"AIPY9QcrzT"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NBA | Perplexity Sports",id:"C6OMW0nwOa"})}}function o7t({playerData:e,$t:t}){return e?{title:t({defaultMessage:"{firstName} {lastName} | NBA | Perplexity Sports",id:"cMhXouxymy"},{firstName:e.player.firstName,lastName:e.player.lastName})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function i7t({$t:e}){return{title:e({defaultMessage:"NFL  Perplexity Sports",id:"El6nRJUzwb"})}}function l7t({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function c7t({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NFL | Perplexity Sports",id:"Hk4RXLiB59"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NFL | Perplexity Sports",id:"7QAbUNnW6e"})}}function u7t({playerData:e,$t:t}){return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function d7t({$t:e}){return{title:e({defaultMessage:"MLB  Perplexity Sports",id:"CU0tFjpqFn"})}}function f7t({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:n};const r=e.event.team_1?.title||"",s=e.event.team_2?.title||"";return{title:`${r} vs ${s}  MLB | Perplexity Sports`}}function ste({$t:e,league:t}){const n=e(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:n})}}function ate({eventData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:r};const s=e.event.team_1.title,a=e.event.team_2.title,o=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{team1} vs {team2}  {league} | Perplexity Sports",id:"d7RYhrB+bM"},{team1:s,team2:a,league:o})}}function ote({tournamentData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),s=e?.tournamentInfo?.season?.name;if(!s)return{title:r};const a=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{title}  {league} | Perplexity Sports",id:"+pm49/sORt"},{title:s,league:a})}}function m7t({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.matchStats?.matchInfo?.description,s=e?.matchStats?.matchInfo?.competition?.name;return r?{title:`${r}  ${s}`}:{title:n}}function ite({league:e,$t:t}){return{title:t({defaultMessage:"{title}  Perplexity Sports",id:"wrVvZZ22yC"},{title:e==="ncaam"?"NCAA Men's Basketball":"NCAA Women's Basketball"})}}function lte({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.event?.teams;if(r?.length!==2)return{title:n};const s=r.map(a=>a.location);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:s[0],team2:s[1]})}}function p7t({$t:e}){return{title:e({defaultMessage:"IPL  Perplexity Sports",id:"YUrNinGa6l"})}}function h7t({$t:e}){return{title:e({defaultMessage:"ICC Cricket  Perplexity Sports",id:"t+zWRM/EBt"})}}function g7t({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"PGA"})}}function y7t({eventData:e}){return{title:`${e?.event?.name||"Event"}  Perplexity Sports`}}function v7t({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"DP World Tour"})}}function x7t({eventData:e}){return{title:"Event  Perplexity Sports"}}function b7t({$t:e}){return{title:e({defaultMessage:"WNBA  Perplexity Sports",id:"xp6AiOFIGz"})}}function _7t({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function w7t({$t:e}){return{title:e({defaultMessage:"Champions League  Perplexity Sports",id:"5k4cIVBqE4"})}}function C7t({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.title[0];return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}const S7t=({$t:e,userAgent:t})=>ir({title:e({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),index:!0,description:"Stay updated with the latest sports news, scores, and highlights from your favorite leagues and teams.",userAgent:t}),E7t="https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg",M7t=e=>({title:`${e.name} Stock Price: Quote, Forecast, Splits & News (${e.symbol})`,description:`Get the latest ${e.name} stock price (${e.symbol}), historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.`}),k7t=e=>({title:`${e.name} Price: Quote, Market Cap, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, real-time quotes, market cap, historical data, charts, price predictions, and news from Perplexity Finance.`}),T7t=e=>({title:`${e.name} Exchange Rate: Live Price, Chart, Forecast & News`,description:`Get the latest ${e.name} exchange rate, live price, interactive chart, historical data, and expert forecast from Perplexity Finance.`}),N7t=e=>({title:`${e.name} Price: Live Chart, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price (${e.symbol}), live charts, market trends, expert forecasts, and breaking news from Perplexity Finance.`}),A7t=e=>({title:`${e.name} Price: Quote, Forecast, Charts & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`}),j7t=e=>e.exchange==="NASDAQ"||e.exchange==="NYSE"||e.exchange==="AMEX"?M7t(e):e.exchange==="CRYPTO"?k7t(e):e.exchange==="FOREX"?T7t(e):e.exchange==="COMMODITY"?N7t(e):A7t(e);function R7t({pathname:e,tickerSearchData:t,userAgent:n,$t:r}){const{symbol:s,tab:a}=S5e(e);if(!s&&!a)return r7t({$t:r});if(!s)return ir({index:!1,userAgent:n});const o={title:`${s} Price: Quote, Forecast, Charts & News`,description:`Get the latest ${s} price, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`,imageURL:E7t,index:!0},l=t?j7t(t):{};return ir({...o,...l,userAgent:n})}function I7t({shortcut:e}){return ir(e?{index:!1,title:jp(`/${e.task_name}`,W5e),description:jp(e.prompt,$5e),imageURL:`${LC.NEXTAUTH_URL}/api/og/shortcut/${e.task_name}`}:{index:!1,title:"Perplexity Account"})}const P7t=e=>{const t="home-metadata",{$t:n}=Q(),{device:{userAgent:r}}=Et(),s=Nt(),a=s?.split("/").pop()??"",o=kMe(e,s??""),{route:l,params:c}=o??{},u=l,{firstResult:d}=Ht(),{collection:m}=kl({collectionSlug:a,reason:t,enabled:u==="/spaces/:slug"}),{article:p}=rue(),{data:h}=VIt({slug:a,reason:t,enabled:u==="/hotels/:slug"}),{symbol:g}=S5e(s),{data:y}=kx({symbol:g}),{data:v}=aRt({eventId:a,league:"f1",reason:t,enabled:u==="/sports/f1/events/:eventId"}),{data:x}=oRt({eventId:a,league:"nba",reason:t,enabled:u==="/sports/nba/events/:eventId"}),{data:b}=iRt({eventId:a,league:"nfl",reason:t,enabled:u==="/sports/nfl/events/:eventId"}),{data:_}=uRt({eventId:a,league:"championsleague",reason:t,enabled:u==="/sports/championsleague/events/:eventId"}),{data:w}=lRt({eventId:a,league:"mlb",reason:t,enabled:u==="/sports/mlb/events/:eventId"}),{data:C}=cRt({eventId:a,league:"cricket",reason:t,enabled:u==="/sports/cricket/events/:eventId"}),{data:S}=rRt({eventId:a,league:"pga",reason:t,enabled:u==="/sports/pga/events/:eventId"}),{data:E}=sRt({eventId:a,league:"wnba",reason:t,enabled:u==="/sports/wnba/events/:eventId"}),{data:M}=Wee({eventId:a,league:"atp",reason:t,enabled:u==="/sports/atp/events/:eventId"}),{data:k}=Wee({eventId:a,league:"wta",reason:t,enabled:u==="/sports/wta/events/:eventId"}),{data:T}=Vee({eventId:a,league:"ncaam",reason:t,enabled:u==="/sports/ncaam/events/:eventId"}),{data:j}=Vee({eventId:a,league:"ncaaw",reason:t,enabled:u==="/sports/ncaaw/events/:eventId"}),{data:R}=eRt({teamId:a,reason:t,enabled:u==="/sports/nba/teams/:teamId"}),{data:O}=tRt({teamId:a,reason:t,enabled:u==="/sports/nfl/teams/:teamId"}),{data:P}=nRt({playerId:Number(a),reason:t,enabled:u==="/sports/nba/players/:playerId"}),{data:N}=Bee({seasonId:a,league:"atp",reason:t,enabled:u==="/sports/atp/tournaments/:seasonId"}),{data:I}=Bee({seasonId:a,league:"wta",reason:t,enabled:u==="/sports/wta/tournaments/:seasonId"}),{data:D}=dRt({reason:t});if(!s||!u||!c)return ir({index:!0,userAgent:r});switch(u){case"/spaces/:slug":return qIt({slug:c.slug,userAgent:r,collection:m});case"/page/:slug":return rte({slug:c.slug,userAgent:r,articleSection:p?.[0]});case"/academic":return KIt({userAgent:r});case"/discover":case"/discover/:topic":return ZIt({userAgent:r});case"/shopping":return YIt({userAgent:r});case"/hotels/:slug":return QIt({slug:c.slug??"",userAgent:r,hotelData:h});case"/perplexify_me":return XIt({userAgent:r});case NE:return R7t({userAgent:r,pathname:s,tickerSearchData:y,$t:n});case"/sports/f1":return e7t({$t:n});case"/sports/f1/events/:eventId":return t7t({eventId:c.eventId??"",eventData:v,$t:n});case"/sports/nba":return n7t({$t:n});case"/sports/nba/events/:eventId":return s7t({eventId:c.eventId??"",eventData:x,$t:n});case"/sports/nba/teams/:teamId":return a7t({teamId:c.teamId??"",teamData:R,$t:n});case"/sports/nba/players/:playerId":return o7t({playerId:c.playerId??"",playerData:P,$t:n});case"/sports/nfl":return i7t({$t:n});case"/sports/nfl/events/:eventId":return l7t({eventId:c.eventId??"",eventData:b,$t:n});case"/sports/nfl/teams/:teamId":return c7t({teamId:c.teamId??"",teamData:O,$t:n});case"/sports/nfl/players/:playerId":return u7t({playerId:c.playerId??"",playerData:void 0,$t:n});case"/sports/championsleague":return w7t({$t:n});case"/sports/championsleague/events/:eventId":return C7t({eventId:c.eventId??"",eventData:_,$t:n});case"/sports/mlb":return d7t({$t:n});case"/sports/mlb/events/:eventId":return f7t({eventId:c.eventId??"",eventData:w,$t:n});case"/sports/ipl":return p7t({$t:n});case"/sports/icc":return h7t({$t:n});case"/sports/cricket/events/:eventId":case"/sports/ipl/events/:eventId":case"/sports/icc/events/:eventId":return m7t({eventId:c.eventId??"",eventData:C,$t:n});case"/sports/pga":return g7t({$t:n});case"/sports/pga/events/:eventId":return y7t({eventId:c.eventId??"",eventData:S});case"/sports/dpworldtour":return v7t({$t:n});case"/sports/dpworldtour/events/:eventId":return x7t({eventId:c.eventId??"",eventData:null});case"/sports/wnba":return b7t({$t:n});case"/sports/wnba/events/:eventId":return _7t({eventId:c.eventId??"",eventData:E,$t:n});case"/sports/ncaam":return ite({league:"ncaam",$t:n});case"/sports/ncaaw":return ite({league:"ncaaw",$t:n});case"/sports/ncaam/events/:eventId":return lte({eventId:c.eventId??"",eventData:T,$t:n});case"/sports/ncaaw/events/:eventId":return lte({eventId:c.eventId??"",eventData:j,$t:n});case"^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$":return xR({slug:c.uuid,userAgent:r,firstEntity:d});case"/discover/:topic/:slug":return rte({slug:c.slug,userAgent:r,articleSection:p?.[0]});case"/travel":return JIt({userAgent:r});case"/sports":return S7t({$t:n,userAgent:r});case"/sports/atp":return ste({league:"atp",$t:n});case"/sports/wta":return ste({league:"wta",$t:n});case"/sports/atp/events/:eventId":return ate({eventId:c.eventId??"",league:"atp",eventData:M,$t:n});case"/sports/wta/events/:eventId":return ate({eventId:c.eventId??"",league:"wta",eventData:k,$t:n});case"/sports/atp/tournaments/:seasonId":return ote({seasonId:c.seasonId??"",league:"atp",tournamentData:N,$t:n});case"/sports/wta/tournaments/:seasonId":return ote({seasonId:c.seasonId??"",league:"wta",tournamentData:I,$t:n});case"/b/home":return ir({title:"New Tab",index:!0,userAgent:r});case"/account":case"/account/details":case"/account/org/details":case"/account/org/user-access":case"/account/org/permissions":case"/account/org/insights":case"/account/org/files":case"/account/org/connectors":case"/account/org":case"/account/api/group":case"/account/api/members":case"/account/api/billing":case"/account/api/keys":case"/account/api/limits":case"/account/api/files":case"/account/api/files/:repositoryUuid":case"/account/api":case"/account/pro-perks":case"/account/pro-perks/:name":case"/account/tasks/:taskId":case"/account/tasks":case"/account/org/members":case"/account/preferences":case"/account/personalize/memories":case"/account/personalize":case"/account/assistant":case"/account/site-instructions":case"/account/notifications":case"/account/files":case"/account/connectors":return ir({title:"Perplexity Account",index:!0,userAgent:r});case"/account/shortcuts":return I7t({shortcut:D?.shortcut??void 0});case"/account/reservations":return ir({title:"Perplexity Reservations",index:!0,userAgent:r});case"/account/purchases":return ir({title:"Perplexity Purchases",index:!0,userAgent:r});case"/":case"/library":case"/b/speak":case"/b/zen":case"/b/try-assistant":case"/spaces":case"/b/mission-control":case"/spaces/templates":case"/windows-app/ask/input":case void 0:return ir({index:!0,userAgent:r});default:$t(u)}};function O7t(){return rn()?i.jsx(j1,{childrenWidth:"none",mobileHeader:!1,children:i.jsx(mxe,{})}):i.jsx(Xl,{to:"/"})}const L7t=he(async()=>{const{CometZenMode:e}=await ae(async()=>{const{CometZenMode:t}=await import("./CometZenMode-DjQKAtK-.js");return{CometZenMode:t}},__vite__mapDeps([191,3,1,63,192,5,6,4]));return{default:e,critical:!0}},{loading:()=>i.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:i.jsx(as,{})})}),D7t=he(async()=>{const{TryAssistantPage:e}=await ae(async()=>{const{TryAssistantPage:t}=await import("./TryAssistantPage-DLaMJw11.js");return{TryAssistantPage:t}},__vite__mapDeps([193,3,1,4,132,6,5]));return{default:e,critical:!0}},{loading:()=>i.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:i.jsx(as,{})})}),F7t=he(async()=>{const{VoiceToVoiceModal:e}=await ae(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-CuOEL2bt.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([62,3,1,63,4,6,5]));return{default:e,critical:!0}},{loading:()=>i.jsx(gO,{})}),U7t=he(async()=>{const{default:e}=await ae(async()=>{const{default:t}=await import("./library-BFiV1BUU.js");return{default:t}},__vite__mapDeps([194,3,1,4,5,6,195,196]));return{default:e,critical:!0}}),B7t=he(async()=>{const{default:e}=await ae(async()=>{const{default:t}=await import("./index-i6SokZ8B.js");return{default:t}},__vite__mapDeps([197,3,1,4,14,6,5,198]));return{default:e,critical:!0}}),V7t=he(async()=>{const{default:e}=await ae(async()=>{const{default:t}=await import("./templates-Brylh76m.js");return{default:t}},__vite__mapDeps([199,3,1,4,5,6]));return{default:e,critical:!0}}),W7t=he(async()=>{const{default:e}=await ae(async()=>{const{default:t}=await import("./slug-BWhqF06h.js");return{default:t}},__vite__mapDeps([200,3,1,4,6,201,5,198,76]));return{default:e,critical:!0}}),cte=he(async()=>{const{ArticlePageLayout:e}=await ae(async()=>{const{ArticlePageLayout:t}=await import("./slug-QuO2n4TJ.js").then(n=>n.s);return{ArticlePageLayout:t}},__vite__mapDeps([202,3,1,4,6,5,203,116,163,164,14,204,117,118,192,186,165,148,17,18,19,124,196,49,50,167,168,115,162,189]));return{default:e,critical:!0}}),$7t=he(async()=>{const{AcademicLandingPage:e}=await ae(async()=>{const{AcademicLandingPage:t}=await import("./academic-DGRqIHYf.js");return{AcademicLandingPage:t}},__vite__mapDeps([205,3,1,4,206,160,5,6,153,50,207,157,158,29]));return{default:e,critical:!0}}),H7t=he(async()=>{const{ShoppingLandingPage:e}=await ae(async()=>{const{ShoppingLandingPage:t}=await import("./shopping-DApEuWoa.js");return{ShoppingLandingPage:t}},__vite__mapDeps([208,3,1,4,157,6,5,158,29,154,153,50,177,207,206,160]));return{default:e,critical:!0}}),z7t=he(async()=>{const{HotelsSlugPage:e}=await ae(async()=>{const{HotelsSlugPage:t}=await import("./hotels-JmT8EnwO.js").then(n=>n.h);return{HotelsSlugPage:t}},__vite__mapDeps([209,1,3,4,157,6,5,180,56,72,152,39,49,50,210]));return{default:e,critical:!0}}),G7t=he(async()=>{const{PerplexifyMeLandingPage:e}=await ae(async()=>{const{PerplexifyMeLandingPage:t}=await import("./perplexify_me-CtnzL9r0.js");return{PerplexifyMeLandingPage:t}},__vite__mapDeps([211,3,1,4,157,6,5]));return{default:e,critical:!0}}),q7t=he(async()=>{const{TravelIndexPage:e}=await ae(async()=>{const{TravelIndexPage:t}=await import("./travel-iv8LETwn.js");return{TravelIndexPage:t}},__vite__mapDeps([212,3,1,4,157,6,5,158,29,207,206,160,153,50]));return{default:e,critical:!0}}),ute=he(async()=>{const{DiscoverPage:e}=await ae(async()=>{const{DiscoverPage:t}=await import("./discover-BrwZERV5.js");return{DiscoverPage:t}},__vite__mapDeps([213,3,1,4,157,6,5,158,29,159,203,116,163,164,195,214]));return{default:e,critical:!0}}),K7t=he(async()=>{const{F1MainPage:e}=await ae(async()=>{const{F1MainPage:t}=await import("./index-D0XlLf-D.js");return{F1MainPage:t}},__vite__mapDeps([215,3,1,4,216,217,6,5,218,219,157]));return{default:e,critical:!0}}),Y7t=he(async()=>{const{F1EventMainPage:e}=await ae(async()=>{const{F1EventMainPage:t}=await import("./events-CuoEhLfq.js");return{F1EventMainPage:t}},__vite__mapDeps([220,3,1,4,6,5,216,210,219,157]));return{default:e,critical:!0}}),Q7t=he(async()=>{const{NBAMainPage:e}=await ae(async()=>{const{NBAMainPage:t}=await import("./index-C-3lshiO.js");return{NBAMainPage:t}},__vite__mapDeps([221,3,1,4,222,5,223,224,225,226,227,228,229,218,6,230,219,157]));return{default:e,critical:!0}}),X7t=he(async()=>{const{NBAEventMainPage:e}=await ae(async()=>{const{NBAEventMainPage:t}=await import("./events-BfTcEnwo.js");return{NBAEventMainPage:t}},__vite__mapDeps([231,3,1,4,232,6,233,234,235,236,237,230,238,239,240,241,242,210,219,157,5]));return{default:e,critical:!0}}),Z7t=he(async()=>{const{NBATeamMainPage:e}=await ae(async()=>{const{NBATeamMainPage:t}=await import("./teams-D68VUI10.js");return{NBATeamMainPage:t}},__vite__mapDeps([243,3,1,4,230,244,233,236,237,239,240,241,224,225,222,5,210,219,157,6]));return{default:e,critical:!0}}),J7t=he(async()=>{const{NBAPlayerMainPage:e}=await ae(async()=>{const{NBAPlayerMainPage:t}=await import("./players-KsEDdTQs.js");return{NBAPlayerMainPage:t}},__vite__mapDeps([245,3,1,4,246,5,237,210,219,157,6]));return{default:e,critical:!0}}),ePt=he(async()=>{const{NFLMainPage:e}=await ae(async()=>{const{NFLMainPage:t}=await import("./index-DMJRto7u.js");return{NFLMainPage:t}},__vite__mapDeps([247,3,1,4,233,228,5,229,157,6]));return{default:e,critical:!0}}),tPt=he(async()=>{const{NFLEventMainPage:e}=await ae(async()=>{const{NFLEventMainPage:t}=await import("./events-_qZFe3dA.js");return{NFLEventMainPage:t}},__vite__mapDeps([248,3,1,4,233,235,236,237,230,238,240,241,242,210,157,6,5]));return{default:e,critical:!0}}),nPt=he(async()=>{const{NFLTeamMainPage:e}=await ae(async()=>{const{NFLTeamMainPage:t}=await import("./teams-DzcSVF7k.js");return{NFLTeamMainPage:t}},__vite__mapDeps([249,3,1,4,233,5,6,210,157]));return{default:e,critical:!0}}),rPt=he(async()=>{const{NFLPlayerMainPage:e}=await ae(async()=>{const{NFLPlayerMainPage:t}=await import("./players-LUhrMfT0.js");return{NFLPlayerMainPage:t}},__vite__mapDeps([250,3,1,4,244,233,246,5,237,210,219,157,6]));return{default:e,critical:!0}}),sPt=he(async()=>{const{ChampionsLeagueMainPage:e}=await ae(async()=>{const{ChampionsLeagueMainPage:t}=await import("./index-BjDwBALe.js");return{ChampionsLeagueMainPage:t}},__vite__mapDeps([251,3,1,4,252,227,228,5,6,218,217,219,157]));return{default:e,critical:!0}}),aPt=he(async()=>{const{ChampionsLeagueEventMainPage:e}=await ae(async()=>{const{ChampionsLeagueEventMainPage:t}=await import("./events-DvG1-rQz.js");return{ChampionsLeagueEventMainPage:t}},__vite__mapDeps([253,3,1,4,254,6,242,241,210,219,157,5]));return{default:e,critical:!0}}),oPt=he(async()=>{const{MLBMainPage:e}=await ae(async()=>{const{MLBMainPage:t}=await import("./index-D8c6ibV5.js");return{MLBMainPage:t}},__vite__mapDeps([255,1,3,4,256,222,5,223,257,225,6,226,229,218,230,219,157]));return{default:e,critical:!0}}),iPt=he(async()=>{const{MLBEventMainPage:e}=await ae(async()=>{const{MLBEventMainPage:t}=await import("./events-Cq7na1_O.js");return{MLBEventMainPage:t}},__vite__mapDeps([258,3,1,4,254,6,259,5,256,222,223,257,225,226,210,219,157]));return{default:e,critical:!0}}),hN=he(async()=>{const{CricketEventMainPage:e}=await ae(async()=>{const{CricketEventMainPage:t}=await import("./events-BianfYBi.js");return{CricketEventMainPage:t}},__vite__mapDeps([260,3,1,4,6,5,259,261,210,219,157]));return{default:e,critical:!0}}),lPt=he(async()=>{const{ICCMainPage:e}=await ae(async()=>{const{ICCMainPage:t}=await import("./index-CcKWjVMZ.js");return{ICCMainPage:t}},__vite__mapDeps([262,3,1,4,222,5,226,6,261,210,219,157]));return{default:e,critical:!0}}),cPt=he(async()=>{const{IPLMainPage:e}=await ae(async()=>{const{IPLMainPage:t}=await import("./index-BBf4qjUH.js");return{IPLMainPage:t}},__vite__mapDeps([263,3,1,4,222,5,226,227,228,229,218,6,230,219,157]));return{default:e,critical:!0}}),uPt=he(async()=>{const{PGAMainPage:e}=await ae(async()=>{const{PGAMainPage:t}=await import("./index-CKqHa4S5.js").then(n=>n.i);return{PGAMainPage:t}},__vite__mapDeps([264,3,1,4,6,265,217,5,210,219,157]));return{default:e,critical:!0}}),dPt=he(async()=>{const{PGAEventMainPage:e}=await ae(async()=>{const{PGAEventMainPage:t}=await import("./events-CIbDC9tn.js");return{PGAEventMainPage:t}},__vite__mapDeps([266,3,1,4,264,6,265,217,5,210,219,157]));return{default:e,critical:!0}}),fPt=he(async()=>{const{EuropeanTourMainPage:e}=await ae(async()=>{const{EuropeanTourMainPage:t}=await import("./index-CKqHa4S5.js").then(n=>n.i);return{EuropeanTourMainPage:t}},__vite__mapDeps([264,3,1,4,6,265,217,5,210,219,157]));return{default:e,critical:!0}}),mPt=he(async()=>{const{EuropeanTourEventMainPage:e}=await ae(async()=>{const{EuropeanTourEventMainPage:t}=await import("./events-CIbDC9tn.js");return{EuropeanTourEventMainPage:t}},__vite__mapDeps([266,3,1,4,264,6,265,217,5,210,219,157]));return{default:e,critical:!0}}),pPt=he(async()=>{const{WNBAMainPage:e}=await ae(async()=>{const{WNBAMainPage:t}=await import("./index-CaKWoLsf.js");return{WNBAMainPage:t}},__vite__mapDeps([267,3,1,4,229,5,218,6,230,222,223,257,225,226,219,157]));return{default:e,critical:!0}}),hPt=he(async()=>{const{WNBAEventMainPage:e}=await ae(async()=>{const{WNBAEventMainPage:t}=await import("./events-DRuoCGOi.js");return{WNBAEventMainPage:t}},__vite__mapDeps([268,3,1,4,232,6,233,235,236,237,230,5,241,210,219,157]));return{default:e,critical:!0}}),gPt=he(async()=>{const{NCAAMEventMainPage:e}=await ae(async()=>{const{NCAAMEventMainPage:t}=await import("./events-Bq98U7IX.js");return{NCAAMEventMainPage:t}},__vite__mapDeps([269,3,1,4,232,6,233,234,235,236,237,230,238,239,240,241,242,210,219,157,5]));return{default:e,critical:!0}}),yPt=he(async()=>{const{NCAAWEventMainPage:e}=await ae(async()=>{const{NCAAWEventMainPage:t}=await import("./events-Bq98U7IX.js");return{NCAAWEventMainPage:t}},__vite__mapDeps([269,3,1,4,232,6,233,234,235,236,237,230,238,239,240,241,242,210,219,157,5]));return{default:e,critical:!0}}),vPt=he(async()=>{const{NCAAMMainPage:e}=await ae(async()=>{const{NCAAMMainPage:t}=await import("./index-Da-SV7lB.js");return{NCAAMMainPage:t}},__vite__mapDeps([270,3,1,4,252,227,228,5,218,6,210,219,157]));return{default:e,critical:!0}}),xPt=he(async()=>{const{NCAAWMainPage:e}=await ae(async()=>{const{NCAAWMainPage:t}=await import("./index-Da-SV7lB.js");return{NCAAWMainPage:t}},__vite__mapDeps([270,3,1,4,252,227,228,5,218,6,210,219,157]));return{default:e,critical:!0}}),bPt=he(async()=>{const{WTAMainPage:e}=await ae(async()=>{const{WTAMainPage:t}=await import("./index-S88DNb6e.js");return{WTAMainPage:t}},__vite__mapDeps([271,3,1,4,272,265,217,6,5,273,210,219,157]));return{default:e,critical:!0}}),_Pt=he(async()=>{const{ATPMainPage:e}=await ae(async()=>{const{ATPMainPage:t}=await import("./index-S88DNb6e.js");return{ATPMainPage:t}},__vite__mapDeps([271,3,1,4,272,265,217,6,5,273,210,219,157]));return{default:e,critical:!0}}),wPt=he(async()=>{const{WTAEventMainPage:e}=await ae(async()=>{const{WTAEventMainPage:t}=await import("./events-BK-L_fTI.js");return{WTAEventMainPage:t}},__vite__mapDeps([274,3,1,4,254,6,5,275,227,228,241,273,210,219,157]));return{default:e,critical:!0}}),CPt=he(async()=>{const{ATPEventMainPage:e}=await ae(async()=>{const{ATPEventMainPage:t}=await import("./events-BK-L_fTI.js");return{ATPEventMainPage:t}},__vite__mapDeps([274,3,1,4,254,6,5,275,227,228,241,273,210,219,157]));return{default:e,critical:!0}}),SPt=he(async()=>{const{ATPTournamentMainPage:e}=await ae(async()=>{const{ATPTournamentMainPage:t}=await import("./tournaments-CsM00hBu.js");return{ATPTournamentMainPage:t}},__vite__mapDeps([276,3,1,4,218,6,272,275,227,228,5,273,210,219,157]));return{default:e,critical:!0}}),EPt=he(async()=>{const{WTATournamentMainPage:e}=await ae(async()=>{const{WTATournamentMainPage:t}=await import("./tournaments-CsM00hBu.js");return{WTATournamentMainPage:t}},__vite__mapDeps([276,3,1,4,218,6,272,275,227,228,5,273,210,219,157]));return{default:e,critical:!0}}),MPt=he(async()=>{const{FinanceRouter:e}=await ae(async()=>{const{FinanceRouter:t}=await import("./sub-router-BItKyrPs.js");return{FinanceRouter:t}},__vite__mapDeps([277,3,1,4,5,156,157,6,158,29,159,160,161,278,17,18,148,19,210]));return{default:e}}),kPt=he(async()=>{const{AccountPage:e}=await ae(async()=>{const{AccountPage:t}=await import("./index-CDoNV27h.js");return{AccountPage:t}},__vite__mapDeps([279,3,1,6,5,4]));return{default:e,critical:!0}}),TPt=he(async()=>{const{AccountDetailsPage:e}=await ae(async()=>{const{AccountDetailsPage:t}=await import("./details-ClxqlJU6.js");return{AccountDetailsPage:t}},__vite__mapDeps([280,3,1,4,6,18,5]));return{default:e,critical:!0}}),NPt=he(async()=>{const{AccountApiGroupPage:e}=await ae(async()=>{const{AccountApiGroupPage:t}=await import("./group-BF8mm7YC.js");return{AccountApiGroupPage:t}},__vite__mapDeps([281,3,1,282,283,204,6,284,285,4,286,5,287,41,136]));return{default:e,critical:!0}}),APt=he(async()=>{const{AccountApiMembersPage:e}=await ae(async()=>{const{AccountApiMembersPage:t}=await import("./members-A4GG3mF8.js");return{AccountApiMembersPage:t}},__vite__mapDeps([288,3,1,282,283,204,6,4,284,285,286,5,289]));return{default:e,critical:!0}}),jPt=he(async()=>{const{AccountApiBillingPage:e}=await ae(async()=>{const{AccountApiBillingPage:t}=await import("./billing-DCgttu74.js");return{AccountApiBillingPage:t}},__vite__mapDeps([290,3,1,282,283,204,6,4,161,286,5,287,41,136,285]));return{default:e,critical:!0}}),RPt=he(async()=>{const{AccountApiKeysPage:e}=await ae(async()=>{const{AccountApiKeysPage:t}=await import("./keys-VnBBW3gd.js");return{AccountApiKeysPage:t}},__vite__mapDeps([291,3,1,282,283,204,6,4,286,5,284,285]));return{default:e,critical:!0}}),IPt=he(async()=>{const{AccountApiLimitsPage:e}=await ae(async()=>{const{AccountApiLimitsPage:t}=await import("./limits-0N2yYunj.js");return{AccountApiLimitsPage:t}},__vite__mapDeps([292,3,1,282,283,204,6,4,5]));return{default:e,critical:!0}}),PPt=he(async()=>{const{AccountApiFilesPage:e}=await ae(async()=>{const{AccountApiFilesPage:t}=await import("./files-CirxPNH1.js");return{AccountApiFilesPage:t}},__vite__mapDeps([293,3,1,282,283,204,6,4,284,285,5]));return{default:e,critical:!0}}),OPt=he(async()=>{const{AccountApiFilesRepoPage:e}=await ae(async()=>{const{AccountApiFilesRepoPage:t}=await import("./files-repo-BIb3bd-F.js");return{AccountApiFilesRepoPage:t}},__vite__mapDeps([294,3,1,282,283,204,6,4,285,11,5]));return{default:e,critical:!0}}),LPt=he(async()=>{const{ApiIndexPage:e}=await ae(async()=>{const{ApiIndexPage:t}=await import("./index-Oftqaz_k.js");return{ApiIndexPage:t}},__vite__mapDeps([295,3,1,282,283,204,6,5,4]));return{default:e,critical:!0}}),DPt=he(async()=>{const{AccountProPerksPage:e}=await ae(async()=>{const{AccountProPerksPage:t}=await import("./pro-perks-D63SRds-.js");return{AccountProPerksPage:t}},__vite__mapDeps([296,3,1,297,6,283,204,4,5]));return{default:e,critical:!0}}),FPt=he(async()=>{const{AccountProPerksDetailPage:e}=await ae(async()=>{const{AccountProPerksDetailPage:t}=await import("./pro-perks-detail-C5Ba_ug5.js");return{AccountProPerksDetailPage:t}},__vite__mapDeps([298,3,1,297,6,283,204,4,17,5,18]));return{default:e,critical:!0}}),UPt=he(async()=>{const{OrgIndexPage:e}=await ae(async()=>{const{OrgIndexPage:t}=await import("./index-D47pfPlu.js");return{OrgIndexPage:t}},__vite__mapDeps([299,3,1,300,283,204,6,5,4]));return{default:e,critical:!0}}),BPt=he(async()=>{const{OrgDetailsPage:e}=await ae(async()=>{const{OrgDetailsPage:t}=await import("./index-D7TFFSKT.js");return{OrgDetailsPage:t}},__vite__mapDeps([301,3,1,300,283,204,6,4,93,201,302,5,18,303,136,304]));return{default:e,critical:!0}}),VPt=he(async()=>{const{OrgMembersPage:e}=await ae(()=>import("./members-Bhj7v7bb.js"),__vite__mapDeps([305,3,1,300,283,204,6,4,201,5,289,136]));return{default:e,critical:!0}}),WPt=he(async()=>{const{OrgInsightsPage:e}=await ae(()=>import("./insights-s8AGDYhr.js"),__vite__mapDeps([306,3,1,300,283,204,6,4,93,5]));return{default:e,critical:!0}}),$Pt=he(async()=>{const{OrgUserAccessPage:e}=await ae(()=>import("./user-access-CVWqoVLj.js"),__vite__mapDeps([307,3,1,300,283,204,6,4,5,93,303]));return{default:e,critical:!0}}),HPt=he(async()=>{const{OrgPermissionsPage:e}=await ae(()=>import("./permissions-C57Ad-Vk.js"),__vite__mapDeps([308,3,1,300,283,204,6,4,302,304,5]));return{default:e,critical:!0}}),zPt=he(async()=>{const{OrgFilesPage:e}=await ae(()=>import("./files-BHc370L1.js"),__vite__mapDeps([309,3,1,4,300,283,204,6,10,11,5,310]));return{default:e,critical:!0}}),GPt=he(async()=>{const{OrgConnectorsPage:e}=await ae(()=>import("./connectors-BhqgXq70.js"),__vite__mapDeps([311,3,1,300,283,204,6,4,5]));return{default:e,critical:!0}}),qPt=he(async()=>{const{AccountPurchasesPage:e}=await ae(async()=>{const{AccountPurchasesPage:t}=await import("./purchases-B4KP04_R.js");return{AccountPurchasesPage:t}},__vite__mapDeps([312,3,1,4,313,54,5,6]));return{default:e,critical:!0}}),KPt=he(async()=>{const{AccountReservationsPage:e}=await ae(async()=>{const{AccountReservationsPage:t}=await import("./reservations-DLLF7Vup.js");return{AccountReservationsPage:t}},__vite__mapDeps([314,3,1,4,313,56,57,5,6]));return{default:e,critical:!0}}),YPt=he(async()=>{const{AccountTasksPage:e}=await ae(async()=>{const{AccountTasksPage:t}=await import("./index-CkOLcn7h.js");return{AccountTasksPage:t}},__vite__mapDeps([315,3,1,4,316,6,5,214]));return{default:e,critical:!0}}),QPt=he(async()=>{const{AccountTaskDetailsPage:e}=await ae(async()=>{const{AccountTaskDetailsPage:t}=await import("./task-DyVKxZfv.js");return{AccountTaskDetailsPage:t}},__vite__mapDeps([317,3,1,4,6,5]));return{default:e,critical:!0}}),XPt=he(async()=>{const{AccountShortcutsPage:e}=await ae(async()=>{const{AccountShortcutsPage:t}=await import("./shortcuts-P4kySjQm.js");return{AccountShortcutsPage:t}},__vite__mapDeps([318,3,1,4,316,5,6]));return{default:e,critical:!0}}),ZPt=he(async()=>{const{AccountSiteInstructionsPage:e}=await ae(async()=>{const{AccountSiteInstructionsPage:t}=await import("./site-instructions-DNpaWvlI.js");return{AccountSiteInstructionsPage:t}},__vite__mapDeps([319,3,1,4,5,6]));return{default:e,critical:!0}}),JPt=he(async()=>{const{AccountPreferencesPage:e}=await ae(async()=>{const{AccountPreferencesPage:t}=await import("./preferences-CkswGMGZ.js");return{AccountPreferencesPage:t}},__vite__mapDeps([320,3,1,4,5,6]));return{default:e,critical:!0}}),eOt=he(async()=>{const{AccountPersonalizePage:e}=await ae(async()=>{const{AccountPersonalizePage:t}=await import("./personalize-BYTrnr-c.js");return{AccountPersonalizePage:t}},__vite__mapDeps([321,3,1,4,5,6,119]));return{default:e,critical:!0}}),tOt=he(async()=>{const{AccountAssistantPage:e}=await ae(async()=>{const{AccountAssistantPage:t}=await import("./assistant-BF32Wzrn.js");return{AccountAssistantPage:t}},__vite__mapDeps([322,3,1,4,5,6,79]));return{default:e,critical:!0}}),nOt=he(async()=>{const{AccountPersonalizeMemoriesPage:e}=await ae(async()=>{const{AccountPersonalizeMemoriesPage:t}=await import("./memories-CNi5eFVE.js");return{AccountPersonalizeMemoriesPage:t}},__vite__mapDeps([323,3,1,4,69,5,6]));return{default:e,critical:!0}}),rOt=he(async()=>{const{AccountNotificationsPage:e}=await ae(async()=>{const{AccountNotificationsPage:t}=await import("./notifications-Bs_RIqCT.js");return{AccountNotificationsPage:t}},__vite__mapDeps([324,3,1,4,25,6,5]));return{default:e,critical:!0}}),sOt=he(async()=>{const{AccountFilesPage:e}=await ae(async()=>{const{AccountFilesPage:t}=await import("./files-CqD907vg.js");return{AccountFilesPage:t}},__vite__mapDeps([325,3,1,4,310,10,11,5,6]));return{default:e,critical:!0}}),aOt=he(async()=>{const{AccountConnectorsPage:e}=await ae(async()=>{const{AccountConnectorsPage:t}=await import("./connectors-frImwxbb.js");return{AccountConnectorsPage:t}},__vite__mapDeps([326,1,3,6,5,4]));return{default:e,critical:!0}}),oOt=he(async()=>{const{SportsLandingPage:e}=await ae(async()=>{const{SportsLandingPage:t}=await import("./index-BbVjXLTP.js");return{SportsLandingPage:t}},__vite__mapDeps([327,3,1,4,157,6,5,158,29,278,206,160,210]));return{default:e,critical:!0}}),iOt=he(async()=>{const{InputPage:e}=await ae(async()=>{const{InputPage:t}=await import("./ask-input-WIO7hRET.js");return{InputPage:t}},__vite__mapDeps([328,3,1,210,4,6,5]));return{default:e,critical:!0}});function lOt(){const e=_t(),t=f.useCallback(()=>{e.push("/b/home",void 0,"voice to ntp")},[e]);return rn()?i.jsx(j1,{childrenWidth:"none",mobileHeader:!1,children:i.jsx(F7t,{isOpen:!0,onClose:t})}):i.jsx(Xl,{to:"/"})}function cOt(){return rn()?i.jsx(L7t,{}):i.jsx(Xl,{to:"/"})}function uOt(){const e=eS();return!rn()||!e?i.jsx(Xl,{to:"/"}):i.jsx(iEe,{})}function dOt(){return rn()?i.jsx(D7t,{}):i.jsx(Xl,{to:"/"})}const N_={"/library":{Component:U7t,modules:le},"^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$":{Component:C5e,modules:LNt},"/b/home":{Component:O7t,modules:yee},"/b/speak":{Component:lOt,modules:le},"/b/zen":{Component:cOt,modules:le},"/b/mission-control":{Component:uOt,modules:le},"/b/try-assistant":{Component:dOt,modules:le},"/spaces/templates":{Component:V7t,modules:le},"/spaces/:slug":{Component:W7t,modules:DNt},"/spaces":{Component:B7t,modules:le},"/page/:slug":{Component:cte,modules:le},"/discover/:topic/:slug":{Component:cte,modules:le},"/discover/:topic":{Component:ute,modules:vee},"/discover":{Component:ute,modules:vee},"/academic":{Component:$7t,modules:le},"/shopping":{Component:H7t,modules:le},"/hotels/:slug":{Component:z7t,modules:le},"/perplexify_me":{Component:G7t,modules:le},"/sports":{Component:oOt,modules:le},"/sports/f1/events/:eventId":{Component:Y7t,modules:le},"/sports/f1":{Component:K7t,modules:PNt},"/sports/nba/events/:eventId":{Component:X7t,modules:le},"/sports/nba/teams/:teamId":{Component:Z7t,modules:le},"/sports/nba/players/:playerId":{Component:J7t,modules:le},"/sports/nba":{Component:Q7t,modules:ONt},"/sports/nfl/events/:eventId":{Component:tPt,modules:le},"/sports/nfl/teams/:teamId":{Component:nPt,modules:le},"/sports/nfl/players/:playerId":{Component:rPt,modules:le},"/sports/nfl":{Component:ePt,modules:le},"/sports/championsleague/events/:eventId":{Component:aPt,modules:le},"/sports/championsleague":{Component:sPt,modules:le},"/sports/mlb/events/:eventId":{Component:iPt,modules:le},"/sports/mlb":{Component:oPt,modules:le},"/sports/cricket/events/:eventId":{Component:hN,modules:le},"/sports/ipl/events/:eventId":{Component:hN,modules:le},"/sports/icc/events/:eventId":{Component:hN,modules:le},"/sports/ipl":{Component:cPt,modules:le},"/sports/icc":{Component:lPt,modules:le},"/sports/pga/events/:eventId":{Component:dPt,modules:le},"/sports/pga":{Component:uPt,modules:le},"/sports/dpworldtour/events/:eventId":{Component:mPt,modules:le},"/sports/dpworldtour":{Component:fPt,modules:le},"/sports/wnba/events/:eventId":{Component:hPt,modules:le},"/sports/wnba":{Component:pPt,modules:le},"/sports/wta":{Component:bPt,modules:le},"/sports/atp":{Component:_Pt,modules:le},"/sports/wta/events/:eventId":{Component:wPt,modules:le},"/sports/atp/events/:eventId":{Component:CPt,modules:le},"/sports/atp/tournaments/:seasonId":{Component:SPt,modules:le},"/sports/wta/tournaments/:seasonId":{Component:EPt,modules:le},"/sports/ncaam/events/:eventId":{Component:gPt,modules:le},"/sports/ncaam":{Component:vPt,modules:le},"/sports/ncaaw/events/:eventId":{Component:yPt,modules:le},"/sports/ncaaw":{Component:xPt,modules:le},"/travel":{Component:q7t,modules:le},[NE]:{Component:MPt,modules:INt},"/account/details":{Component:TPt,modules:le},"/account/org/details":{Component:BPt,modules:le},"/account/org/members":{Component:VPt,modules:le},"/account/org/insights":{Component:WPt,modules:le},"/account/org/user-access":{Component:$Pt,modules:le},"/account/org/permissions":{Component:HPt,modules:le},"/account/org/files":{Component:zPt,modules:le},"/account/org/connectors":{Component:GPt,modules:le},"/account/api/group":{Component:NPt,modules:le},"/account/api/members":{Component:APt,modules:le},"/account/api/billing":{Component:jPt,modules:le},"/account/api/keys":{Component:RPt,modules:le},"/account/api/limits":{Component:IPt,modules:le},"/account/api/files":{Component:PPt,modules:le},"/account/api/files/:repositoryUuid":{Component:OPt,modules:le},"/account/api":{Component:LPt,modules:le},"/account/pro-perks":{Component:DPt,modules:le},"/account/pro-perks/:name":{Component:FPt,modules:le},"/account/org":{Component:UPt,modules:le},"/account/purchases":{Component:qPt,modules:le},"/account/reservations":{Component:KPt,modules:le},"/account/tasks/:taskId":{Component:QPt,modules:le},"/account/tasks":{Component:YPt,modules:le},"/account/shortcuts":{Component:XPt,modules:le},"/account/site-instructions":{Component:ZPt,modules:le},"/account/preferences":{Component:JPt,modules:le},"/account/personalize":{Component:eOt,modules:le},"/account/assistant":{Component:tOt,modules:le},"/account/personalize/memories":{Component:nOt,modules:le},"/account/notifications":{Component:rOt,modules:le},"/account/files":{Component:sOt,modules:le},"/account/connectors":{Component:aOt,modules:le},"/account":{Component:kPt,modules:le},"/windows-app/ask/input":{Component:iOt,modules:le},"/":{Component:aEe,modules:yee}},fOt=/^\/account/,mOt=/^\/windows-app/,H5e=A.memo(function(){const t=f.useMemo(()=>Object.keys(N_),[]),n=P7t(t),r=f.useMemo(()=>Object.entries(N_).filter(([o])=>o.startsWith("/account")),[]),s=f.useMemo(()=>Object.entries(N_).filter(([o])=>o.startsWith("/windows-app")),[]),a=f.useMemo(()=>Object.entries(N_).filter(([o])=>!o.startsWith("/account")),[]);return i.jsxs(Xme,{children:[i.jsx(nU,{}),i.jsxs(U5,{children:[i.jsx($f,{path:mOt,children:s.map(([o,{Component:l,modules:c}])=>i.jsx($f,{path:o,children:i.jsx(dk,{modules:c,children:i.jsx(l,{})})},o))}),i.jsx($f,{path:fOt,children:i.jsx(vSe,{children:i.jsx(U5,{children:r.map(([o,{Component:l,modules:c}])=>i.jsx($f,{path:o,children:i.jsx(dk,{modules:c,children:i.jsx(l,{})})},o))})})}),i.jsx($f,{children:i.jsx(pxe,{children:i.jsx(RNt,{children:i.jsx(U5,{children:a.map(([o,{Component:l,modules:c}])=>i.jsx($f,{path:o.startsWith("^")?new RegExp(o):o,children:i.jsx(dk,{modules:c,children:i.jsx(l,{})})},o))})})})})]}),i.jsx(cSe,{metadata:n})]})});H5e.displayName="SpaEntryPoint";const pOt=document.getElementById("root"),hOt=RMe.createRoot(pOt),gOt=navigator.userAgent;function z5e(e,t){hOt.render(i.jsx(A.StrictMode,{children:i.jsx(zr,{fallback:Ome,children:i.jsx(Qme,{host:window.location.hostname,userAgent:gOt,session:t??void 0,children:i.jsxs(trt,{isMobileUserAgent:vOt,hostname:xOt??"",version:e.version,minVersion:e.minVersion??0,spaRoutes:srt,strictSpa:!0,idleRefresh:!1,minVersionRefresh:!0,children:[i.jsx(H5e,{}),i.jsx(Vtt,{})]})})})}))}const{config:Uv,cachedSession:DC,sessionFetchPromise:yOt}=Crt();window.__PPL_CONFIG__=Uv;const vOt=bue(navigator.userAgent),xOt=window.location.host;DC&&Pme(Uv,DC.user);z5e(Uv,DC);yOt.then(e=>{DC||Pme(Uv,e?.user),z5e(Uv,e)});export{wn as $,it as A,ge as B,dr as C,JO as D,le as E,AVt as F,jVt as G,Jyt as H,ra as I,i7 as J,fze as K,l7 as L,Ie as M,LOt as N,DOt as O,Le as P,OOt as Q,dQ as R,as as S,L as T,Lae as U,Te as V,$m as W,Rce as X,xn as Y,S1 as Z,OA as _,Uit as a,dl as a$,Wt as a0,fl as a1,w1 as a2,Xt as a3,Zs as a4,ml as a5,Qe as a6,Ds as a7,AO as a8,MEe as a9,oo as aA,_x as aB,XFt as aC,j1 as aD,LGe as aE,ODt as aF,Ap as aG,Ru as aH,Hwe as aI,Rt as aJ,C9t as aK,gt as aL,$e as aM,JLt as aN,js as aO,Fh as aP,mt as aQ,Ow as aR,gDt as aS,rO as aT,nO as aU,U3 as aV,aE as aW,cFt as aX,ko as aY,Xn as aZ,Pe as a_,ne as aa,Kt as ab,v6t as ac,Hn as ad,ce as ae,hE as af,Jt as ag,qP as ah,die as ai,CDt as aj,X3e as ak,FE as al,sf as am,F3 as an,x8t as ao,Za as ap,dn as aq,At as ar,z_ as as,cQe as at,is as au,ode as av,k9t as aw,LWt as ax,M6t as ay,N9t as az,z as b,Ha as b$,YDt as b0,cE as b1,gn as b2,Ip as b3,VGe as b4,bt as b5,an as b6,yy as b7,gm as b8,eDt as b9,xDt as bA,yle as bB,pGe as bC,gGe as bD,_E as bE,aae as bF,Hce as bG,xGe as bH,Tt as bI,zGe as bJ,rD as bK,jo as bL,Pa as bM,lo as bN,ja as bO,YSe as bP,n5e as bQ,z$e as bR,r5e as bS,_1 as bT,R1 as bU,iue as bV,oa as bW,hce as bX,Do as bY,QDt as bZ,n$e as b_,XLt as ba,kl as bb,dxe as bc,_u as bd,zh as be,mg as bf,ls as bg,l2 as bh,qLt as bi,gle as bj,EU as bk,u5e as bl,SVe as bm,c5e as bn,ZLt as bo,Zl as bp,KDt as bq,Dh as br,Ld as bs,pBe as bt,tue as bu,$y as bv,Ao as bw,l5e as bx,qDt as by,vDt as bz,pn as c,kRe as c$,rf as c0,Ene as c1,Bu as c2,VW as c3,cl as c4,WW as c5,tAt as c6,GDt as c7,zDt as c8,HDt as c9,kU as cA,Sre as cB,FDt as cC,NFt as cD,UDt as cE,un as cF,nLt as cG,rLt as cH,XDt as cI,m1 as cJ,nu as cK,Z7e as cL,J$ as cM,fDt as cN,H_ as cO,Ht as cP,_jt as cQ,LDt as cR,GA as cS,pwe as cT,TRe as cU,TW as cV,kOt as cW,wRe as cX,SRe as cY,CRe as cZ,MRe as c_,$Dt as ca,rue as cb,rDt as cc,sDt as cd,fw as ce,zWt as cf,Y8t as cg,w$e as ch,aDt as ci,oDt as cj,jFt as ck,RFt as cl,iDt as cm,lDt as cn,uDt as co,cDt as cp,dDt as cq,GWt as cr,KFt as cs,mDt as ct,C$e as cu,pDt as cv,K3e as cw,vLt as cx,H$e as cy,Na as cz,Nu as d,Pxe as d$,jse as d0,So as d1,FK as d2,JD as d3,eF as d4,T1 as d5,ZF as d6,Hh as d7,EEe as d8,SEe as d9,c3e as dA,w3e as dB,Njt as dC,MFt as dD,ZO as dE,Vpe as dF,yEe as dG,mF as dH,x5t as dI,$$e as dJ,kFt as dK,TFt as dL,Ehe as dM,lc as dN,UE as dO,s$ as dP,wDt as dQ,QS as dR,uE as dS,hn as dT,Bo as dU,Kgt as dV,Ygt as dW,jS as dX,g8t as dY,p9e as dZ,BDt as d_,kEe as da,gF as db,gc as dc,br as dd,fFt as de,Jxe as df,H_t as dg,wl as dh,Km as di,jp as dj,k1 as dk,AFt as dl,Uo as dm,so as dn,FEe as dp,dx as dq,h9 as dr,hF as ds,owt as dt,Oa as du,Rxe as dv,wCe as dw,swt as dx,OF as dy,Zue as dz,vt as e,CSe as e$,vF as e0,bLt as e1,Dd as e2,Ls as e3,nP as e4,DDt as e5,Ch as e6,CGe as e7,LLt as e8,WDt as e9,CU as eA,$P as eB,lde as eC,Cue as eD,jr as eE,Wue as eF,WLt as eG,FUt as eH,UUt as eI,BUt as eJ,VUt as eK,Vl as eL,Dc as eM,qn as eN,xxe as eO,Fit as eP,p_t as eQ,ayt as eR,Kye as eS,yt as eT,Ff as eU,YF as eV,$h as eW,EO as eX,hZe as eY,_a as eZ,WSe as e_,RLt as ea,EGe as eb,oFt as ec,I1 as ed,NSe as ee,Cwe as ef,Pn as eg,aFt as eh,v6e as ei,GFt as ej,Cc as ek,xae as el,qFt as em,jf as en,c$t as eo,B3 as ep,xF as eq,NJ as er,ywe as es,D6 as et,gFt as eu,Zce as ev,VIt as ew,MP as ex,pO as ey,YA as ez,DE as f,nRt as f$,GBt as f0,FP as f1,bxe as f2,Rit as f3,m_t as f4,f_t as f5,h_t as f6,sE as f7,_l as f8,PL as f9,cWt as fA,Ee as fB,_5t as fC,oRt as fD,mx as fE,EWt as fF,xWt as fG,gg as fH,jWt as fI,VWt as fJ,NWt as fK,sh as fL,gC as fM,QVt as fN,gWt as fO,TWt as fP,Kwe as fQ,fMt as fR,vWt as fS,kWt as fT,bWt as fU,mMt as fV,eRt as fW,g3t as fX,lWt as fY,zMt as fZ,os as f_,p5t as fa,b5t as fb,N5t as fc,Ov as fd,_we as fe,u5t as ff,K5t as fg,vwe as fh,OEt as fi,AF as fj,r5 as fk,na as fl,v_e as fm,iWt as fn,pg as fo,n5 as fp,kEt as fq,I_e as fr,ul as fs,MO as ft,aRt as fu,r$t as fv,s$t as fw,uWt as fx,MWt as fy,e2e as fz,Me as g,EYe as g$,Y9t as g0,o$t as g1,wCt as g2,BWt as g3,EMt as g4,fCe as g5,a$t as g6,V3t as g7,N3t as g8,fWt as g9,NVe as gA,r4t as gB,zJ as gC,um as gD,x4t as gE,v4t as gF,IWt as gG,i4t as gH,$J as gI,Wh as gJ,dce as gK,V$e as gL,m2e as gM,b4t as gN,HJ as gO,PWt as gP,zr as gQ,Ah as gR,f3 as gS,sD as gT,lue as gU,ijt as gV,h8t as gW,SFt as gX,Ja as gY,iO as gZ,xO as g_,M5t as ga,wee as gb,MC as gc,_ee as gd,B6 as ge,V6 as gf,lRt as gg,f3t as gh,wwe as gi,PLt as gj,Nh as gk,OLt as gl,CLt as gm,Tp as gn,wAe as go,n1 as gp,Zv as gq,ZDt as gr,Zd as gs,$ue as gt,s1 as gu,M1 as gv,Awe as gw,jwe as gx,Rwe as gy,Iwe as gz,Ct as h,xf as h$,vFt as h0,Jqe as h1,Vh as h2,pjt as h3,Fde as h4,i5 as h5,_O as h6,yE as h7,gE as h8,vjt as h9,fxe as hA,f1e as hB,B2 as hC,Vde as hD,Die as hE,_be as hF,ewt as hG,twt as hH,Bs as hI,pF as hJ,fbe as hK,pbe as hL,gbe as hM,Rv as hN,uh as hO,Gh as hP,k2e as hQ,MVt as hR,EVt as hS,Ggt as hT,qgt as hU,iAe as hV,rWt as hW,SWt as hX,sWt as hY,eWt as hZ,wWt as h_,Rc as ha,NT as hb,YNt as hc,K_t as hd,hbe as he,WIt as hf,bn as hg,aWt as hh,mEt as hi,NJe as hj,EOt as hk,Du as hl,ws as hm,xr as hn,d1e as ho,cF as hp,B1e as hq,Zbt as hr,Md as hs,Qbt as ht,zyt as hu,Byt as hv,Vyt as hw,Qyt as hx,lxe as hy,F1e as hz,wr as i,dBt as i$,_Wt as i0,CWt as i1,nWt as i2,tWt as i3,ZVt as i4,CCt as i5,JVt as i6,XVt as i7,ii as i8,yCt as i9,a2e as iA,Wee as iB,RWt as iC,hWt as iD,D3t as iE,dWt as iF,yWt as iG,Bee as iH,J5t as iI,gBt as iJ,CO as iK,yBt as iL,TQe as iM,x8 as iN,i2e as iO,DBt as iP,LBt as iQ,Ele as iR,kBt as iS,MBt as iT,XBt as iU,vBt as iV,bBt as iW,xBt as iX,wBt as iY,_Bt as iZ,JUt as i_,RSe as ia,qwe as ib,pE as ic,AWt as id,YVt as ie,Vne as ig,$t as ih,cRt as ii,rwe as ij,EFt as ik,T5t as il,k5t as im,Y5t as io,Q5t as ip,C5t as iq,S5t as ir,i$t as is,w5t as it,sRt as iu,Vee as iv,E5t as iw,KMt as ix,FJ as iy,YMt as iz,ye as j,cBt as j$,mBt as j0,fBt as j1,eBt as j2,lBt as j3,rBt as j4,J_ as j5,EBt as j6,x9t as j7,ICe as j8,nBt as j9,KBt as jA,qBt as jB,oxe as jC,TBt as jD,kVt as jE,dk as jF,UWt as jG,oyt as jH,x5 as jI,oCe as jJ,v5 as jK,cie as jL,b5 as jM,rVt as jN,S5e as jO,RL as jP,sEt as jQ,XE as jR,Mu as jS,sa as jT,rEt as jU,ohe as jV,aBt as jW,sBt as jX,SBt as jY,CBt as jZ,uBt as j_,tBt as ja,VBt as jb,BBt as jc,xIe as jd,Kpt as je,OL as jf,Zpt as jg,r3 as jh,$p as ji,tVt as jj,$Bt as jk,WBt as jl,zBt as jm,HBt as jn,flt as jo,dlt as jp,jBt as jq,RBt as jr,UBt as js,IBt as jt,nVt as ju,PBt as jv,$ye as jw,ame as jx,OBt as jy,FBt as jz,$bt as k,Im as k$,hBt as k0,pBt as k1,iBt as k2,oBt as k3,ZUt as k4,XUt as k5,VMt as k6,z9 as k7,t2e as k8,SO as k9,sVt as kA,dVt as kB,uVt as kC,mVt as kD,iVt as kE,oVt as kF,lVt as kG,hx as kH,Bye as kI,cVt as kJ,fVt as kK,xC as kL,Igt as kM,pVt as kN,aVt as kO,Uye as kP,CVt as kQ,hVt as kR,gVt as kS,SEt as kT,SVt as kU,xVt as kV,vVt as kW,l0 as kX,_Vt as kY,wVt as kZ,yVt as k_,ABt as ka,NBt as kb,SZe as kc,mlt as kd,YBt as ke,VYe as kf,Sh as kg,JXe as kh,eZe as ki,tZe as kj,e8 as kk,eS as kl,oe as km,h6e as kn,g6e as ko,iCe as kp,r3t as kq,j_e as kr,Ugt as ks,Vgt as kt,q1 as ku,NL as kv,Wye as kw,Jl as kx,Bp as ky,Lf as kz,s_t as l,VZe as l$,Nj as l0,bVt as l1,Lgt as l2,Oye as l3,Pye as l4,eVt as l5,j5 as l6,JBt as l7,Flt as l8,s3t as l9,eEe as lA,xle as lB,Btt as lC,fSe as lD,IC as lE,WNt as lF,QFt as lG,dSe as lH,$Nt as lI,rU as lJ,UZe as lK,zJe as lL,eUt as lM,ZFt as lN,tUt as lO,qh as lP,cP as lQ,aUt as lR,Sc as lS,qs as lT,Q3 as lU,TL as lV,jL as lW,hg as lX,Qmt as lY,vx as lZ,R_e as l_,oWt as la,Hye as lb,zye as lc,Gye as ld,qye as le,G_e as lf,fEt as lg,ySe as lh,iE as li,xLt as lj,ale as lk,m6e as ll,Xv as lm,bDt as ln,kc as lo,K6 as lp,Att as lq,jtt as lr,Ntt as ls,sme as lt,VDt as lu,TDt as lv,L6t as lw,Nc as lx,qfe as ly,pet as lz,xe as m,iae as m$,kO as m0,get as m1,het as m2,WZe as m3,$Ze as m4,eAt as m5,HZe as m6,NDt as m7,ADt as m8,fa as m9,DWt as mA,ELt as mB,MLt as mC,wVe as mD,eQe as mE,yP as mF,oE as mG,dFt as mH,POt as mI,uFt as mJ,UP as mK,ru as mL,bGe as mM,HS as mN,hDt as mO,d7 as mP,wS as mQ,_S as mR,QOt as mS,u1 as mT,bS as mU,uKe as mV,h1 as mW,DFt as mX,ILt as mY,NQe as mZ,mbe as m_,HNt as ma,nHe as mb,tDt as mc,d$e as md,h7e as me,f$e as mf,qze as mg,Sn as mh,BLt as mi,ULt as mj,F$e as mk,wLt as ml,hJe as mm,f2 as mn,ROt as mo,oi as mp,kLt as mq,NLt as mr,TLt as ms,GLt as mt,SLt as mu,nVe as mv,tVe as mw,oUt as mx,NO as my,Nue as mz,TVt as n,Coe as n$,Wr as n0,f$t as n1,FLt as n2,KNt as n3,hLt as n4,gLt as n5,yLt as n6,g5 as n7,Kw as n8,TFe as n9,RDt as nA,IDt as nB,vle as nC,$pe as nD,FOt as nE,PA as nF,MDt as nG,BA as nH,kDt as nI,SDt as nJ,Or as nK,Sze as nL,Ott as nM,kAt as nN,Jy as nO,S5 as nP,IOt as nQ,jOt as nR,OCe as nS,FWt as nT,dO as nU,g1 as nV,XS as nW,vse as nX,Um as nY,k7 as nZ,T7 as n_,jFe as na,ft as nb,u1e as nc,oF as nd,$i as ne,G1e as nf,Z1 as ng,FFe as nh,AUt as ni,B_ as nj,jUt as nk,$Be as nl,wTt as nm,AFe as nn,iie as no,lie as np,z7 as nq,LE as nr,aP as ns,ZTt as nt,tCe as nu,UFe as nv,dRt as nw,qpe as nx,jDt as ny,jLt as nz,RVt as o,Mh as o$,PS as o0,UWe as o1,$I as o2,Lse as o3,Pse as o4,Dse as o5,PFt as o6,OFt as o7,D6t as o8,$Lt as o9,ZUe as oA,tBe as oB,oLt as oC,Yr as oD,Dw as oE,p7 as oF,Fw as oG,m7 as oH,Lw as oI,TS as oJ,YWt as oK,VEe as oL,bu as oM,mbt as oN,wze as oO,pbt as oP,ubt as oQ,rVe as oR,T5 as oS,bA as oT,oO as oU,fLt as oV,bf as oW,_f as oX,OOe as oY,Is as oZ,JTt as o_,G5t as oa,I6t as ob,ME as oc,Af as od,hqe as oe,Vae as of,hS as og,bAe as oh,Mre as oi,XAe as oj,$je as ok,A8e as ol,a8e as om,SS as on,kP as oo,tst as op,$Wt as oq,Sp as or,wu as os,_Dt as ot,cr as ou,cwt as ov,Gbe as ow,bEe as ox,L$e as oy,pPe as oz,NVt as p,UKe as p$,QBt as p0,qWt as p1,KWt as p2,CYe as p3,nDt as p4,uie as p5,FS as p6,i$e as p7,F2e as p8,pU as p9,ESe as pA,lFt as pB,iFt as pC,tFt as pD,hUt as pE,yUt as pF,vUt as pG,dUt as pH,_Ut as pI,mUt as pJ,bUt as pK,xUt as pL,fUt as pM,gUt as pN,uUt as pO,pUt as pP,cUt as pQ,QZe as pR,met as pS,vJe as pT,cfe as pU,iUt as pV,eFt as pW,VOt as pX,eLt as pY,WOt as pZ,$Ot as p_,uU as pa,cEe as pb,Bn as pc,r7 as pd,TE as pe,kE as pf,x5e as pg,b5e as ph,q3e as pi,i3e as pj,qOt as pk,GOt as pl,SKe as pm,eO as pn,Cfe as po,BW as pp,BOt as pq,UOt as pr,DKe as ps,kfe as pt,Nf as pu,YFt as pv,nFt as pw,pJe as px,Sl as py,OKe as pz,mDe as q,nUt as q$,aF as q0,sF as q1,wUt as q2,sFt as q3,TKe as q4,Oq as q5,d9e as q6,uO as q7,CNt as q8,Tc as q9,VFt as qA,m$t as qB,Mfe as qC,xnt as qD,l8 as qE,Fn as qF,Yle as qG,or as qH,QLt as qI,GWe as qJ,mH as qK,E5 as qL,lwt as qM,ade as qN,n9t as qO,e$t as qP,t$t as qQ,JWt as qR,QWt as qS,wd as qT,Ix as qU,SUt as qV,wy as qW,LFt as qX,Hy as qY,QJe as qZ,JFt as q_,zi as qa,W_t as qb,JDt as qc,cbe as qd,Oo as qe,SYe as qf,FZe as qg,FFt as qh,BFt as qi,UFt as qj,zFt as qk,$Ft as ql,EDt as qm,AS as qn,HFt as qo,r4 as qp,sUt as qq,MZe as qr,Bxe as qs,G_t as qt,q_t as qu,Fr as qv,Ta as qw,WFt as qx,BZe as qy,mw as qz,DM as r,bIe as r$,lfe as r0,ALt as r1,Nq as r2,rFt as r3,OG as r4,MKe as r5,sO as r6,iet as r7,CUt as r8,YAt as r9,_Tt as rA,CTt as rB,Iy as rC,Vce as rD,lUt as rE,Gat as rF,yst as rG,gst as rH,KO as rI,gat as rJ,iv as rK,MUt as rL,Uat as rM,TUt as rN,kUt as rO,NUt as rP,gpe as rQ,GO as rR,H8t as rS,t9t as rT,XWt as rU,ZWt as rV,qEe as rW,c_t as rX,e9t as rY,n$t as rZ,Cd as r_,WWt as ra,Mee as rb,XZe as rc,zLt as rd,ZZe as re,JZe as rf,at as rg,FOe as rh,tr as ri,ys as rj,Ec as rk,nLe as rl,XTt as rm,DUt as rn,IUt as ro,_Ft as rp,Aa as rq,yVe as rr,RUt as rs,Zt as rt,PUt as ru,Ope as rv,OUt as rw,LUt as rx,HLt as ry,lh as rz,ao as s,sjt as s$,qbt as s0,Yue as s1,bFt as s2,bc as s3,PVt as s4,Yn as s5,Xe as s6,ur as s7,De as s8,Kr as s9,BVt as sA,q0e as sB,Ps as sC,es as sD,Z0e as sE,xc as sF,fo as sG,R0t as sH,BD as sI,VVt as sJ,Qve as sK,fNt as sL,gde as sM,KVt as sN,zVt as sO,NZe as sP,Zu as sQ,Jw as sR,Uxe as sS,$Vt as sT,GVt as sU,qVt as sV,HVt as sW,D_t as sX,Y_t as sY,sLt as sZ,ybe as s_,th as sa,LVt as sb,DVt as sc,OVt as sd,S0e as se,nvt as sf,C0e as sg,FVt as sh,lw as si,Ze as sj,Rs as sk,VD as sl,UVt as sm,Jb as sn,rve as so,Fu as sp,Bi as sq,iX as sr,Jn as ss,lu as st,Vd as su,Ne as sv,i9 as sw,ug as sx,v3 as sy,uC as sz,Et as t,d3e as t$,sn as t0,P3e as t1,wbe as t2,l$t as t3,Bl as t4,u$t as t5,wi as t6,Zxe as t7,Xxe as t8,$_t as t9,Br as tA,yDt as tB,sde as tC,U7 as tD,yFt as tE,mFt as tF,pFt as tG,vU as tH,Xgt as tI,Zgt as tJ,f_e as tK,$3 as tL,Due as tM,Tx as tN,_Ce as tO,aLt as tP,lLt as tQ,pce as tR,OO as tS,Wy as tT,fd as tU,vW as tV,iLt as tW,qbe as tX,_Lt as tY,BEe as tZ,tLt as t_,xFt as ta,YEe as tb,hFt as tc,R3e as td,j3e as te,DLt as tf,HWt as tg,hc as th,EUt as ti,OEe as tj,o4t as tk,Nxe as tl,Ife as tm,njt as tn,dLt as to,PEe as tp,Lwe as tq,Go as tr,cLt as ts,uLt as tt,lE as tu,W1e as tv,H1e as tw,bm as tx,qoe as ty,iF as tz,Pr as u,p$t as u0,h$t as u1,VLt as u2,zOt as u3,HOt as u4,JOt as u5,ZOt as u6,UIt as u7,rUt as u8,FIt as u9,DXe as uA,wFt as uB,XOt as uC,oP as uD,GG as uE,XYe as uF,vbt as uG,yBe as uH,jle as uI,V7e as uJ,Mn as uK,afe as uL,mWt as uM,QEe as uN,d$t as ua,hbt as ub,$s as uc,z0 as ud,H0 as ue,$0 as uf,W0 as ug,V0 as uh,B0 as ui,_p as uj,kd as uk,xS as ul,ri as um,CFt as un,JYe as uo,$ce as up,EP as uq,uce as ur,D$e as us,U$e as ut,BP as uu,_P as uv,ybt as uw,KOt as ux,YOt as uy,tQe as uz,rn as v,fQ as w,co as x,IVt as y,Fs as z};
//# sourceMappingURL=index-CkXFF0S0.js.map
